function J1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Ed=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function i_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Z1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var o_={exports:{}},rc={},a_={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ra=Symbol.for("react.element"),eI=Symbol.for("react.portal"),tI=Symbol.for("react.fragment"),nI=Symbol.for("react.strict_mode"),rI=Symbol.for("react.profiler"),sI=Symbol.for("react.provider"),iI=Symbol.for("react.context"),oI=Symbol.for("react.forward_ref"),aI=Symbol.for("react.suspense"),lI=Symbol.for("react.memo"),uI=Symbol.for("react.lazy"),ry=Symbol.iterator;function cI(t){return t===null||typeof t!="object"?null:(t=ry&&t[ry]||t["@@iterator"],typeof t=="function"?t:null)}var l_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},u_=Object.assign,c_={};function qi(t,e,n){this.props=t,this.context=e,this.refs=c_,this.updater=n||l_}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function d_(){}d_.prototype=qi.prototype;function Kf(t,e,n){this.props=t,this.context=e,this.refs=c_,this.updater=n||l_}var Gf=Kf.prototype=new d_;Gf.constructor=Kf;u_(Gf,qi.prototype);Gf.isPureReactComponent=!0;var sy=Array.isArray,h_=Object.prototype.hasOwnProperty,Qf={current:null},f_={key:!0,ref:!0,__self:!0,__source:!0};function p_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)h_.call(e,r)&&!f_.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Ra,type:t,key:i,ref:o,props:s,_owner:Qf.current}}function dI(t,e){return{$$typeof:Ra,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Yf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ra}function hI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var iy=/\/+/g;function Td(t,e){return typeof t=="object"&&t!==null&&t.key!=null?hI(""+t.key):e.toString(36)}function Fl(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ra:case eI:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+Td(o,0):r,sy(s)?(n="",t!=null&&(n=t.replace(iy,"$&/")+"/"),Fl(s,e,n,"",function(d){return d})):s!=null&&(Yf(s)&&(s=dI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(iy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",sy(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+Td(i,u);o+=Fl(i,e,n,c,s)}else if(c=cI(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+Td(i,u++),o+=Fl(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function yl(t,e,n){if(t==null)return t;var r=[],s=0;return Fl(t,r,"","",function(i){return e.call(n,i,s++)}),r}function fI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},zl={transition:null},pI={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:zl,ReactCurrentOwner:Qf};function m_(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:yl,forEach:function(t,e,n){yl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return yl(t,function(){e++}),e},toArray:function(t){return yl(t,function(e){return e})||[]},only:function(t){if(!Yf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=qi;te.Fragment=tI;te.Profiler=rI;te.PureComponent=Kf;te.StrictMode=nI;te.Suspense=aI;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pI;te.act=m_;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=u_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Qf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)h_.call(e,c)&&!f_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Ra,type:t.type,key:s,ref:i,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:iI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:sI,_context:t},t.Consumer=t};te.createElement=p_;te.createFactory=function(t){var e=p_.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:oI,render:t}};te.isValidElement=Yf;te.lazy=function(t){return{$$typeof:uI,_payload:{_status:-1,_result:t},_init:fI}};te.memo=function(t,e){return{$$typeof:lI,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=zl.transition;zl.transition={};try{t()}finally{zl.transition=e}};te.unstable_act=m_;te.useCallback=function(t,e){return Nt.current.useCallback(t,e)};te.useContext=function(t){return Nt.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};te.useEffect=function(t,e){return Nt.current.useEffect(t,e)};te.useId=function(){return Nt.current.useId()};te.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return Nt.current.useMemo(t,e)};te.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};te.useRef=function(t){return Nt.current.useRef(t)};te.useState=function(t){return Nt.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return Nt.current.useTransition()};te.version="18.3.1";a_.exports=te;var R=a_.exports;const g_=i_(R),mI=J1({__proto__:null,default:g_},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gI=R,yI=Symbol.for("react.element"),vI=Symbol.for("react.fragment"),_I=Object.prototype.hasOwnProperty,xI=gI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wI={key:!0,ref:!0,__self:!0,__source:!0};function y_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)_I.call(e,r)&&!wI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:yI,type:t,key:i,ref:o,props:s,_owner:xI.current}}rc.Fragment=vI;rc.jsx=y_;rc.jsxs=y_;o_.exports=rc;var l=o_.exports,yh={},v_={exports:{}},Wt={},__={exports:{}},x_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var ee=B.length;B.push(Y);e:for(;0<ee;){var Ee=ee-1>>>1,he=B[Ee];if(0<s(he,Y))B[Ee]=Y,B[ee]=he,ee=Ee;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],ee=B.pop();if(ee!==Y){B[0]=ee;e:for(var Ee=0,he=B.length,Pe=he>>>1;Ee<Pe;){var Mn=2*(Ee+1)-1,Vn=B[Mn],Un=Mn+1,Fn=B[Un];if(0>s(Vn,ee))Un<he&&0>s(Fn,Vn)?(B[Ee]=Fn,B[Un]=ee,Ee=Un):(B[Ee]=Vn,B[Mn]=ee,Ee=Mn);else if(Un<he&&0>s(Fn,ee))B[Ee]=Fn,B[Un]=ee,Ee=Un;else break e}}return Y}function s(B,Y){var ee=B.sortIndex-Y.sortIndex;return ee!==0?ee:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],f=1,g=null,p=3,w=!1,N=!1,T=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function S(B){if(T=!1,y(B),!N)if(n(c)!==null)N=!0,eo(D);else{var Y=n(d);Y!==null&&Ln(S,Y.startTime-B)}}function D(B,Y){N=!1,T&&(T=!1,E(v),v=-1),w=!0;var ee=p;try{for(y(Y),g=n(c);g!==null&&(!(g.expirationTime>Y)||B&&!k());){var Ee=g.callback;if(typeof Ee=="function"){g.callback=null,p=g.priorityLevel;var he=Ee(g.expirationTime<=Y);Y=t.unstable_now(),typeof he=="function"?g.callback=he:g===n(c)&&r(c),y(Y)}else r(c);g=n(c)}if(g!==null)var Pe=!0;else{var Mn=n(d);Mn!==null&&Ln(S,Mn.startTime-Y),Pe=!1}return Pe}finally{g=null,p=ee,w=!1}}var V=!1,I=null,v=-1,A=5,b=-1;function k(){return!(t.unstable_now()-b<A)}function j(){if(I!==null){var B=t.unstable_now();b=B;var Y=!0;try{Y=I(!0,B)}finally{Y?P():(V=!1,I=null)}}else V=!1}var P;if(typeof x=="function")P=function(){x(j)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Dn=He.port2;He.port1.onmessage=j,P=function(){Dn.postMessage(null)}}else P=function(){C(j,0)};function eo(B){I=B,V||(V=!0,P())}function Ln(B,Y){v=C(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||w||(N=!0,eo(D))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var ee=p;p=Y;try{return B()}finally{p=ee}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var ee=p;p=B;try{return Y()}finally{p=ee}},t.unstable_scheduleCallback=function(B,Y,ee){var Ee=t.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?Ee+ee:Ee):ee=Ee,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=ee+he,B={id:f++,callback:Y,priorityLevel:B,startTime:ee,expirationTime:he,sortIndex:-1},ee>Ee?(B.sortIndex=ee,e(d,B),n(c)===null&&B===n(d)&&(T?(E(v),v=-1):T=!0,Ln(S,ee-Ee))):(B.sortIndex=he,e(c,B),N||w||(N=!0,eo(D))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var Y=p;return function(){var ee=p;p=Y;try{return B.apply(this,arguments)}finally{p=ee}}}})(x_);__.exports=x_;var EI=__.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var TI=R,Ht=EI;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var w_=new Set,Jo={};function js(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(Jo[t]=e,t=0;t<e.length;t++)w_.add(e[t])}var rr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),vh=Object.prototype.hasOwnProperty,bI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,oy={},ay={};function II(t){return vh.call(ay,t)?!0:vh.call(oy,t)?!1:bI.test(t)?ay[t]=!0:(oy[t]=!0,!1)}function NI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function SI(t,e,n,r){if(e===null||typeof e>"u"||NI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xf=/[\-:]([a-z])/g;function Jf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xf,Jf);tt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xf,Jf);tt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xf,Jf);tt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function Zf(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(SI(e,n,s,r)&&(n=null),r||s===null?II(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var dr=TI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,vl=Symbol.for("react.element"),ti=Symbol.for("react.portal"),ni=Symbol.for("react.fragment"),ep=Symbol.for("react.strict_mode"),_h=Symbol.for("react.profiler"),E_=Symbol.for("react.provider"),T_=Symbol.for("react.context"),tp=Symbol.for("react.forward_ref"),xh=Symbol.for("react.suspense"),wh=Symbol.for("react.suspense_list"),np=Symbol.for("react.memo"),wr=Symbol.for("react.lazy"),b_=Symbol.for("react.offscreen"),ly=Symbol.iterator;function mo(t){return t===null||typeof t!="object"?null:(t=ly&&t[ly]||t["@@iterator"],typeof t=="function"?t:null)}var Ie=Object.assign,bd;function So(t){if(bd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);bd=e&&e[1]||""}return`
`+bd+t}var Id=!1;function Nd(t,e){if(!t||Id)return"";Id=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{Id=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?So(t):""}function AI(t){switch(t.tag){case 5:return So(t.type);case 16:return So("Lazy");case 13:return So("Suspense");case 19:return So("SuspenseList");case 0:case 2:case 15:return t=Nd(t.type,!1),t;case 11:return t=Nd(t.type.render,!1),t;case 1:return t=Nd(t.type,!0),t;default:return""}}function Eh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ni:return"Fragment";case ti:return"Portal";case _h:return"Profiler";case ep:return"StrictMode";case xh:return"Suspense";case wh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case T_:return(t.displayName||"Context")+".Consumer";case E_:return(t._context.displayName||"Context")+".Provider";case tp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case np:return e=t.displayName||null,e!==null?e:Eh(t.type)||"Memo";case wr:e=t._payload,t=t._init;try{return Eh(t(e))}catch{}}return null}function PI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Eh(e);case 8:return e===ep?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function I_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function CI(t){var e=I_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function _l(t){t._valueTracker||(t._valueTracker=CI(t))}function N_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=I_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function uu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Th(t,e){var n=e.checked;return Ie({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function uy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function S_(t,e){e=e.checked,e!=null&&Zf(t,"checked",e,!1)}function bh(t,e){S_(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ih(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ih(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function cy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ih(t,e,n){(e!=="number"||uu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ao=Array.isArray;function fi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Nh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ie({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function dy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Ao(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function A_(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function hy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function P_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Sh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?P_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xl,C_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xl=xl||document.createElement("div"),xl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Zo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Vo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kI=["Webkit","ms","Moz","O"];Object.keys(Vo).forEach(function(t){kI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Vo[e]=Vo[t]})});function k_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Vo.hasOwnProperty(t)&&Vo[t]?(""+e).trim():e+"px"}function R_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=k_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var RI=Ie({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ah(t,e){if(e){if(RI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ph(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ch=null;function rp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var kh=null,pi=null,mi=null;function fy(t){if(t=Da(t)){if(typeof kh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=lc(e),kh(t.stateNode,t.type,e))}}function j_(t){pi?mi?mi.push(t):mi=[t]:pi=t}function O_(){if(pi){var t=pi,e=mi;if(mi=pi=null,fy(t),e)for(t=0;t<e.length;t++)fy(e[t])}}function D_(t,e){return t(e)}function L_(){}var Sd=!1;function M_(t,e,n){if(Sd)return t(e,n);Sd=!0;try{return D_(t,e,n)}finally{Sd=!1,(pi!==null||mi!==null)&&(L_(),O_())}}function ea(t,e){var n=t.stateNode;if(n===null)return null;var r=lc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Rh=!1;if(rr)try{var go={};Object.defineProperty(go,"passive",{get:function(){Rh=!0}}),window.addEventListener("test",go,go),window.removeEventListener("test",go,go)}catch{Rh=!1}function jI(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Uo=!1,cu=null,du=!1,jh=null,OI={onError:function(t){Uo=!0,cu=t}};function DI(t,e,n,r,s,i,o,u,c){Uo=!1,cu=null,jI.apply(OI,arguments)}function LI(t,e,n,r,s,i,o,u,c){if(DI.apply(this,arguments),Uo){if(Uo){var d=cu;Uo=!1,cu=null}else throw Error(F(198));du||(du=!0,jh=d)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function V_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function py(t){if(Os(t)!==t)throw Error(F(188))}function MI(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return py(s),t;if(i===r)return py(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function U_(t){return t=MI(t),t!==null?F_(t):null}function F_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=F_(t);if(e!==null)return e;t=t.sibling}return null}var z_=Ht.unstable_scheduleCallback,my=Ht.unstable_cancelCallback,VI=Ht.unstable_shouldYield,UI=Ht.unstable_requestPaint,je=Ht.unstable_now,FI=Ht.unstable_getCurrentPriorityLevel,sp=Ht.unstable_ImmediatePriority,$_=Ht.unstable_UserBlockingPriority,hu=Ht.unstable_NormalPriority,zI=Ht.unstable_LowPriority,B_=Ht.unstable_IdlePriority,sc=null,Nn=null;function $I(t){if(Nn&&typeof Nn.onCommitFiberRoot=="function")try{Nn.onCommitFiberRoot(sc,t,void 0,(t.current.flags&128)===128)}catch{}}var mn=Math.clz32?Math.clz32:HI,BI=Math.log,qI=Math.LN2;function HI(t){return t>>>=0,t===0?32:31-(BI(t)/qI|0)|0}var wl=64,El=4194304;function Po(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function fu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Po(u):(i&=o,i!==0&&(r=Po(i)))}else o=n&~s,o!==0?r=Po(o):i!==0&&(r=Po(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-mn(e),s=1<<n,r|=t[n],e&=~s;return r}function WI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function KI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-mn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=WI(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Oh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function q_(){var t=wl;return wl<<=1,!(wl&4194240)&&(wl=64),t}function Ad(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function ja(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-mn(e),t[e]=n}function GI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-mn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function ip(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-mn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ue=0;function H_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var W_,op,K_,G_,Q_,Dh=!1,Tl=[],Rr=null,jr=null,Or=null,ta=new Map,na=new Map,Tr=[],QI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gy(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":ta.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(e.pointerId)}}function yo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Da(e),e!==null&&op(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function YI(t,e,n,r,s){switch(e){case"focusin":return Rr=yo(Rr,t,e,n,r,s),!0;case"dragenter":return jr=yo(jr,t,e,n,r,s),!0;case"mouseover":return Or=yo(Or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ta.set(i,yo(ta.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,na.set(i,yo(na.get(i)||null,t,e,n,r,s)),!0}return!1}function Y_(t){var e=us(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=V_(n),e!==null){t.blockedOn=e,Q_(t.priority,function(){K_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function $l(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Lh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Ch=r,n.target.dispatchEvent(r),Ch=null}else return e=Da(n),e!==null&&op(e),t.blockedOn=n,!1;e.shift()}return!0}function yy(t,e,n){$l(t)&&n.delete(e)}function XI(){Dh=!1,Rr!==null&&$l(Rr)&&(Rr=null),jr!==null&&$l(jr)&&(jr=null),Or!==null&&$l(Or)&&(Or=null),ta.forEach(yy),na.forEach(yy)}function vo(t,e){t.blockedOn===e&&(t.blockedOn=null,Dh||(Dh=!0,Ht.unstable_scheduleCallback(Ht.unstable_NormalPriority,XI)))}function ra(t){function e(s){return vo(s,t)}if(0<Tl.length){vo(Tl[0],t);for(var n=1;n<Tl.length;n++){var r=Tl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&vo(Rr,t),jr!==null&&vo(jr,t),Or!==null&&vo(Or,t),ta.forEach(e),na.forEach(e),n=0;n<Tr.length;n++)r=Tr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Tr.length&&(n=Tr[0],n.blockedOn===null);)Y_(n),n.blockedOn===null&&Tr.shift()}var gi=dr.ReactCurrentBatchConfig,pu=!0;function JI(t,e,n,r){var s=ue,i=gi.transition;gi.transition=null;try{ue=1,ap(t,e,n,r)}finally{ue=s,gi.transition=i}}function ZI(t,e,n,r){var s=ue,i=gi.transition;gi.transition=null;try{ue=4,ap(t,e,n,r)}finally{ue=s,gi.transition=i}}function ap(t,e,n,r){if(pu){var s=Lh(t,e,n,r);if(s===null)Vd(t,e,r,mu,n),gy(t,r);else if(YI(s,t,e,n,r))r.stopPropagation();else if(gy(t,r),e&4&&-1<QI.indexOf(t)){for(;s!==null;){var i=Da(s);if(i!==null&&W_(i),i=Lh(t,e,n,r),i===null&&Vd(t,e,r,mu,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Vd(t,e,r,null,n)}}var mu=null;function Lh(t,e,n,r){if(mu=null,t=rp(r),t=us(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=V_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return mu=t,null}function X_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FI()){case sp:return 1;case $_:return 4;case hu:case zI:return 16;case B_:return 536870912;default:return 16}default:return 16}}var Ar=null,lp=null,Bl=null;function J_(){if(Bl)return Bl;var t,e=lp,n=e.length,r,s="value"in Ar?Ar.value:Ar.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Bl=s.slice(t,1<r?1-r:void 0)}function ql(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function bl(){return!0}function vy(){return!1}function Kt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bl:vy,this.isPropagationStopped=vy,this}return Ie(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},up=Kt(Hi),Oa=Ie({},Hi,{view:0,detail:0}),eN=Kt(Oa),Pd,Cd,_o,ic=Ie({},Oa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:cp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==_o&&(_o&&t.type==="mousemove"?(Pd=t.screenX-_o.screenX,Cd=t.screenY-_o.screenY):Cd=Pd=0,_o=t),Pd)},movementY:function(t){return"movementY"in t?t.movementY:Cd}}),_y=Kt(ic),tN=Ie({},ic,{dataTransfer:0}),nN=Kt(tN),rN=Ie({},Oa,{relatedTarget:0}),kd=Kt(rN),sN=Ie({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),iN=Kt(sN),oN=Ie({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),aN=Kt(oN),lN=Ie({},Hi,{data:0}),xy=Kt(lN),uN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},cN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},dN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=dN[t])?!!e[t]:!1}function cp(){return hN}var fN=Ie({},Oa,{key:function(t){if(t.key){var e=uN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ql(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?cN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:cp,charCode:function(t){return t.type==="keypress"?ql(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ql(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),pN=Kt(fN),mN=Ie({},ic,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=Kt(mN),gN=Ie({},Oa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:cp}),yN=Kt(gN),vN=Ie({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),_N=Kt(vN),xN=Ie({},ic,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),wN=Kt(xN),EN=[9,13,27,32],dp=rr&&"CompositionEvent"in window,Fo=null;rr&&"documentMode"in document&&(Fo=document.documentMode);var TN=rr&&"TextEvent"in window&&!Fo,Z_=rr&&(!dp||Fo&&8<Fo&&11>=Fo),Ey=" ",Ty=!1;function ex(t,e){switch(t){case"keyup":return EN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function tx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ri=!1;function bN(t,e){switch(t){case"compositionend":return tx(e);case"keypress":return e.which!==32?null:(Ty=!0,Ey);case"textInput":return t=e.data,t===Ey&&Ty?null:t;default:return null}}function IN(t,e){if(ri)return t==="compositionend"||!dp&&ex(t,e)?(t=J_(),Bl=lp=Ar=null,ri=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Z_&&e.locale!=="ko"?null:e.data;default:return null}}var NN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function by(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!NN[t.type]:e==="textarea"}function nx(t,e,n,r){j_(r),e=gu(e,"onChange"),0<e.length&&(n=new up("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,sa=null;function SN(t){fx(t,0)}function oc(t){var e=oi(t);if(N_(e))return t}function AN(t,e){if(t==="change")return e}var rx=!1;if(rr){var Rd;if(rr){var jd="oninput"in document;if(!jd){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),jd=typeof Iy.oninput=="function"}Rd=jd}else Rd=!1;rx=Rd&&(!document.documentMode||9<document.documentMode)}function Ny(){zo&&(zo.detachEvent("onpropertychange",sx),sa=zo=null)}function sx(t){if(t.propertyName==="value"&&oc(sa)){var e=[];nx(e,sa,t,rp(t)),M_(SN,e)}}function PN(t,e,n){t==="focusin"?(Ny(),zo=e,sa=n,zo.attachEvent("onpropertychange",sx)):t==="focusout"&&Ny()}function CN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return oc(sa)}function kN(t,e){if(t==="click")return oc(e)}function RN(t,e){if(t==="input"||t==="change")return oc(e)}function jN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var vn=typeof Object.is=="function"?Object.is:jN;function ia(t,e){if(vn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!vh.call(e,s)||!vn(t[s],e[s]))return!1}return!0}function Sy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ay(t,e){var n=Sy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sy(n)}}function ix(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?ix(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ox(){for(var t=window,e=uu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=uu(t.document)}return e}function hp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function ON(t){var e=ox(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&ix(n.ownerDocument.documentElement,n)){if(r!==null&&hp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ay(n,i);var o=Ay(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var DN=rr&&"documentMode"in document&&11>=document.documentMode,si=null,Mh=null,$o=null,Vh=!1;function Py(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Vh||si==null||si!==uu(r)||(r=si,"selectionStart"in r&&hp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),$o&&ia($o,r)||($o=r,r=gu(Mh,"onSelect"),0<r.length&&(e=new up("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=si)))}function Il(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ii={animationend:Il("Animation","AnimationEnd"),animationiteration:Il("Animation","AnimationIteration"),animationstart:Il("Animation","AnimationStart"),transitionend:Il("Transition","TransitionEnd")},Od={},ax={};rr&&(ax=document.createElement("div").style,"AnimationEvent"in window||(delete ii.animationend.animation,delete ii.animationiteration.animation,delete ii.animationstart.animation),"TransitionEvent"in window||delete ii.transitionend.transition);function ac(t){if(Od[t])return Od[t];if(!ii[t])return t;var e=ii[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in ax)return Od[t]=e[n];return t}var lx=ac("animationend"),ux=ac("animationiteration"),cx=ac("animationstart"),dx=ac("transitionend"),hx=new Map,Cy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){hx.set(t,e),js(e,[t])}for(var Dd=0;Dd<Cy.length;Dd++){var Ld=Cy[Dd],LN=Ld.toLowerCase(),MN=Ld[0].toUpperCase()+Ld.slice(1);Qr(LN,"on"+MN)}Qr(lx,"onAnimationEnd");Qr(ux,"onAnimationIteration");Qr(cx,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(dx,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Co="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VN=new Set("cancel close invalid load scroll toggle".split(" ").concat(Co));function ky(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,LI(r,e,void 0,t),t.currentTarget=null}function fx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;ky(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;ky(s,u,d),i=c}}}if(du)throw t=jh,du=!1,jh=null,t}function ve(t,e){var n=e[Bh];n===void 0&&(n=e[Bh]=new Set);var r=t+"__bubble";n.has(r)||(px(e,t,2,!1),n.add(r))}function Md(t,e,n){var r=0;e&&(r|=4),px(n,t,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function oa(t){if(!t[Nl]){t[Nl]=!0,w_.forEach(function(n){n!=="selectionchange"&&(VN.has(n)||Md(n,!1,t),Md(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,Md("selectionchange",!1,e))}}function px(t,e,n,r){switch(X_(e)){case 1:var s=JI;break;case 4:s=ZI;break;default:s=ap}n=s.bind(null,e,n,t),s=void 0,!Rh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Vd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=us(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}M_(function(){var d=i,f=rp(n),g=[];e:{var p=hx.get(t);if(p!==void 0){var w=up,N=t;switch(t){case"keypress":if(ql(n)===0)break e;case"keydown":case"keyup":w=pN;break;case"focusin":N="focus",w=kd;break;case"focusout":N="blur",w=kd;break;case"beforeblur":case"afterblur":w=kd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":w=_y;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":w=nN;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":w=yN;break;case lx:case ux:case cx:w=iN;break;case dx:w=_N;break;case"scroll":w=eN;break;case"wheel":w=wN;break;case"copy":case"cut":case"paste":w=aN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":w=wy}var T=(e&4)!==0,C=!T&&t==="scroll",E=T?p!==null?p+"Capture":null:p;T=[];for(var x=d,y;x!==null;){y=x;var S=y.stateNode;if(y.tag===5&&S!==null&&(y=S,E!==null&&(S=ea(x,E),S!=null&&T.push(aa(x,S,y)))),C)break;x=x.return}0<T.length&&(p=new w(p,N,null,n,f),g.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",w=t==="mouseout"||t==="pointerout",p&&n!==Ch&&(N=n.relatedTarget||n.fromElement)&&(us(N)||N[sr]))break e;if((w||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,w?(N=n.relatedTarget||n.toElement,w=d,N=N?us(N):null,N!==null&&(C=Os(N),N!==C||N.tag!==5&&N.tag!==6)&&(N=null)):(w=null,N=d),w!==N)){if(T=_y,S="onMouseLeave",E="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(T=wy,S="onPointerLeave",E="onPointerEnter",x="pointer"),C=w==null?p:oi(w),y=N==null?p:oi(N),p=new T(S,x+"leave",w,n,f),p.target=C,p.relatedTarget=y,S=null,us(f)===d&&(T=new T(E,x+"enter",N,n,f),T.target=y,T.relatedTarget=C,S=T),C=S,w&&N)t:{for(T=w,E=N,x=0,y=T;y;y=Ks(y))x++;for(y=0,S=E;S;S=Ks(S))y++;for(;0<x-y;)T=Ks(T),x--;for(;0<y-x;)E=Ks(E),y--;for(;x--;){if(T===E||E!==null&&T===E.alternate)break t;T=Ks(T),E=Ks(E)}T=null}else T=null;w!==null&&Ry(g,p,w,T,!1),N!==null&&C!==null&&Ry(g,C,N,T,!0)}}e:{if(p=d?oi(d):window,w=p.nodeName&&p.nodeName.toLowerCase(),w==="select"||w==="input"&&p.type==="file")var D=AN;else if(by(p))if(rx)D=RN;else{D=CN;var V=PN}else(w=p.nodeName)&&w.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(D=kN);if(D&&(D=D(t,d))){nx(g,D,n,f);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&Ih(p,"number",p.value)}switch(V=d?oi(d):window,t){case"focusin":(by(V)||V.contentEditable==="true")&&(si=V,Mh=d,$o=null);break;case"focusout":$o=Mh=si=null;break;case"mousedown":Vh=!0;break;case"contextmenu":case"mouseup":case"dragend":Vh=!1,Py(g,n,f);break;case"selectionchange":if(DN)break;case"keydown":case"keyup":Py(g,n,f)}var I;if(dp)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else ri?ex(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(Z_&&n.locale!=="ko"&&(ri||v!=="onCompositionStart"?v==="onCompositionEnd"&&ri&&(I=J_()):(Ar=f,lp="value"in Ar?Ar.value:Ar.textContent,ri=!0)),V=gu(d,v),0<V.length&&(v=new xy(v,t,null,n,f),g.push({event:v,listeners:V}),I?v.data=I:(I=tx(n),I!==null&&(v.data=I)))),(I=TN?bN(t,n):IN(t,n))&&(d=gu(d,"onBeforeInput"),0<d.length&&(f=new xy("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=I))}fx(g,e)})}function aa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function gu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ea(t,n),i!=null&&r.unshift(aa(t,i,s)),i=ea(t,e),i!=null&&r.push(aa(t,i,s))),t=t.return}return r}function Ks(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Ry(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=ea(n,i),c!=null&&o.unshift(aa(n,c,u))):s||(c=ea(n,i),c!=null&&o.push(aa(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var UN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function jy(t){return(typeof t=="string"?t:""+t).replace(UN,`
`).replace(FN,"")}function Sl(t,e,n){if(e=jy(e),jy(t)!==e&&n)throw Error(F(425))}function yu(){}var Uh=null,Fh=null;function zh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var $h=typeof setTimeout=="function"?setTimeout:void 0,zN=typeof clearTimeout=="function"?clearTimeout:void 0,Oy=typeof Promise=="function"?Promise:void 0,$N=typeof queueMicrotask=="function"?queueMicrotask:typeof Oy<"u"?function(t){return Oy.resolve(null).then(t).catch(BN)}:$h;function BN(t){setTimeout(function(){throw t})}function Ud(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),ra(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);ra(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Dy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),In="__reactFiber$"+Wi,la="__reactProps$"+Wi,sr="__reactContainer$"+Wi,Bh="__reactEvents$"+Wi,qN="__reactListeners$"+Wi,HN="__reactHandles$"+Wi;function us(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[sr]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Dy(t);t!==null;){if(n=t[In])return n;t=Dy(t)}return e}t=n,n=t.parentNode}return null}function Da(t){return t=t[In]||t[sr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function oi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function lc(t){return t[la]||null}var qh=[],ai=-1;function Yr(t){return{current:t}}function _e(t){0>ai||(t.current=qh[ai],qh[ai]=null,ai--)}function ge(t,e){ai++,qh[ai]=t.current,t.current=e}var Hr={},yt=Yr(Hr),Ot=Yr(!1),xs=Hr;function Ii(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function vu(){_e(Ot),_e(yt)}function Ly(t,e,n){if(yt.current!==Hr)throw Error(F(168));ge(yt,e),ge(Ot,n)}function mx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,PI(t)||"Unknown",s));return Ie({},n,r)}function _u(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,xs=yt.current,ge(yt,t),ge(Ot,Ot.current),!0}function My(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=mx(t,e,xs),r.__reactInternalMemoizedMergedChildContext=t,_e(Ot),_e(yt),ge(yt,t)):_e(Ot),ge(Ot,n)}var Hn=null,uc=!1,Fd=!1;function gx(t){Hn===null?Hn=[t]:Hn.push(t)}function WN(t){uc=!0,gx(t)}function Xr(){if(!Fd&&Hn!==null){Fd=!0;var t=0,e=ue;try{var n=Hn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Hn=null,uc=!1}catch(s){throw Hn!==null&&(Hn=Hn.slice(t+1)),z_(sp,Xr),s}finally{ue=e,Fd=!1}}return null}var li=[],ui=0,xu=null,wu=0,Gt=[],Qt=0,ws=null,Kn=1,Gn="";function is(t,e){li[ui++]=wu,li[ui++]=xu,xu=t,wu=e}function yx(t,e,n){Gt[Qt++]=Kn,Gt[Qt++]=Gn,Gt[Qt++]=ws,ws=t;var r=Kn;t=Gn;var s=32-mn(r)-1;r&=~(1<<s),n+=1;var i=32-mn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Kn=1<<32-mn(e)+s|n<<s|r,Gn=i+t}else Kn=1<<i|n<<s|r,Gn=t}function fp(t){t.return!==null&&(is(t,1),yx(t,1,0))}function pp(t){for(;t===xu;)xu=li[--ui],li[ui]=null,wu=li[--ui],li[ui]=null;for(;t===ws;)ws=Gt[--Qt],Gt[Qt]=null,Gn=Gt[--Qt],Gt[Qt]=null,Kn=Gt[--Qt],Gt[Qt]=null}var qt=null,$t=null,xe=!1,dn=null;function vx(t,e){var n=Yt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Vy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,qt=t,$t=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,qt=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Kn,overflow:Gn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Yt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,qt=t,$t=null,!0):!1;default:return!1}}function Hh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Wh(t){if(xe){var e=$t;if(e){var n=e;if(!Vy(t,e)){if(Hh(t))throw Error(F(418));e=Dr(n.nextSibling);var r=qt;e&&Vy(t,e)?vx(r,n):(t.flags=t.flags&-4097|2,xe=!1,qt=t)}}else{if(Hh(t))throw Error(F(418));t.flags=t.flags&-4097|2,xe=!1,qt=t}}}function Uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;qt=t}function Al(t){if(t!==qt)return!1;if(!xe)return Uy(t),xe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!zh(t.type,t.memoizedProps)),e&&(e=$t)){if(Hh(t))throw _x(),Error(F(418));for(;e;)vx(t,e),e=Dr(e.nextSibling)}if(Uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=qt?Dr(t.stateNode.nextSibling):null;return!0}function _x(){for(var t=$t;t;)t=Dr(t.nextSibling)}function Ni(){$t=qt=null,xe=!1}function mp(t){dn===null?dn=[t]:dn.push(t)}var KN=dr.ReactCurrentBatchConfig;function xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Pl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fy(t){var e=t._init;return e(t._payload)}function xx(t){function e(E,x){if(t){var y=E.deletions;y===null?(E.deletions=[x],E.flags|=16):y.push(x)}}function n(E,x){if(!t)return null;for(;x!==null;)e(E,x),x=x.sibling;return null}function r(E,x){for(E=new Map;x!==null;)x.key!==null?E.set(x.key,x):E.set(x.index,x),x=x.sibling;return E}function s(E,x){return E=Ur(E,x),E.index=0,E.sibling=null,E}function i(E,x,y){return E.index=y,t?(y=E.alternate,y!==null?(y=y.index,y<x?(E.flags|=2,x):y):(E.flags|=2,x)):(E.flags|=1048576,x)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function u(E,x,y,S){return x===null||x.tag!==6?(x=Kd(y,E.mode,S),x.return=E,x):(x=s(x,y),x.return=E,x)}function c(E,x,y,S){var D=y.type;return D===ni?f(E,x,y.props.children,S,y.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wr&&Fy(D)===x.type)?(S=s(x,y.props),S.ref=xo(E,x,y),S.return=E,S):(S=Xl(y.type,y.key,y.props,null,E.mode,S),S.ref=xo(E,x,y),S.return=E,S)}function d(E,x,y,S){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=Gd(y,E.mode,S),x.return=E,x):(x=s(x,y.children||[]),x.return=E,x)}function f(E,x,y,S,D){return x===null||x.tag!==7?(x=ys(y,E.mode,S,D),x.return=E,x):(x=s(x,y),x.return=E,x)}function g(E,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Kd(""+x,E.mode,y),x.return=E,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case vl:return y=Xl(x.type,x.key,x.props,null,E.mode,y),y.ref=xo(E,null,x),y.return=E,y;case ti:return x=Gd(x,E.mode,y),x.return=E,x;case wr:var S=x._init;return g(E,S(x._payload),y)}if(Ao(x)||mo(x))return x=ys(x,E.mode,y,null),x.return=E,x;Pl(E,x)}return null}function p(E,x,y,S){var D=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:u(E,x,""+y,S);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case vl:return y.key===D?c(E,x,y,S):null;case ti:return y.key===D?d(E,x,y,S):null;case wr:return D=y._init,p(E,x,D(y._payload),S)}if(Ao(y)||mo(y))return D!==null?null:f(E,x,y,S,null);Pl(E,y)}return null}function w(E,x,y,S,D){if(typeof S=="string"&&S!==""||typeof S=="number")return E=E.get(y)||null,u(x,E,""+S,D);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case vl:return E=E.get(S.key===null?y:S.key)||null,c(x,E,S,D);case ti:return E=E.get(S.key===null?y:S.key)||null,d(x,E,S,D);case wr:var V=S._init;return w(E,x,y,V(S._payload),D)}if(Ao(S)||mo(S))return E=E.get(y)||null,f(x,E,S,D,null);Pl(x,S)}return null}function N(E,x,y,S){for(var D=null,V=null,I=x,v=x=0,A=null;I!==null&&v<y.length;v++){I.index>v?(A=I,I=null):A=I.sibling;var b=p(E,I,y[v],S);if(b===null){I===null&&(I=A);break}t&&I&&b.alternate===null&&e(E,I),x=i(b,x,v),V===null?D=b:V.sibling=b,V=b,I=A}if(v===y.length)return n(E,I),xe&&is(E,v),D;if(I===null){for(;v<y.length;v++)I=g(E,y[v],S),I!==null&&(x=i(I,x,v),V===null?D=I:V.sibling=I,V=I);return xe&&is(E,v),D}for(I=r(E,I);v<y.length;v++)A=w(I,E,v,y[v],S),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?v:A.key),x=i(A,x,v),V===null?D=A:V.sibling=A,V=A);return t&&I.forEach(function(k){return e(E,k)}),xe&&is(E,v),D}function T(E,x,y,S){var D=mo(y);if(typeof D!="function")throw Error(F(150));if(y=D.call(y),y==null)throw Error(F(151));for(var V=D=null,I=x,v=x=0,A=null,b=y.next();I!==null&&!b.done;v++,b=y.next()){I.index>v?(A=I,I=null):A=I.sibling;var k=p(E,I,b.value,S);if(k===null){I===null&&(I=A);break}t&&I&&k.alternate===null&&e(E,I),x=i(k,x,v),V===null?D=k:V.sibling=k,V=k,I=A}if(b.done)return n(E,I),xe&&is(E,v),D;if(I===null){for(;!b.done;v++,b=y.next())b=g(E,b.value,S),b!==null&&(x=i(b,x,v),V===null?D=b:V.sibling=b,V=b);return xe&&is(E,v),D}for(I=r(E,I);!b.done;v++,b=y.next())b=w(I,E,v,b.value,S),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?v:b.key),x=i(b,x,v),V===null?D=b:V.sibling=b,V=b);return t&&I.forEach(function(j){return e(E,j)}),xe&&is(E,v),D}function C(E,x,y,S){if(typeof y=="object"&&y!==null&&y.type===ni&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case vl:e:{for(var D=y.key,V=x;V!==null;){if(V.key===D){if(D=y.type,D===ni){if(V.tag===7){n(E,V.sibling),x=s(V,y.props.children),x.return=E,E=x;break e}}else if(V.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===wr&&Fy(D)===V.type){n(E,V.sibling),x=s(V,y.props),x.ref=xo(E,V,y),x.return=E,E=x;break e}n(E,V);break}else e(E,V);V=V.sibling}y.type===ni?(x=ys(y.props.children,E.mode,S,y.key),x.return=E,E=x):(S=Xl(y.type,y.key,y.props,null,E.mode,S),S.ref=xo(E,x,y),S.return=E,E=S)}return o(E);case ti:e:{for(V=y.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(E,x.sibling),x=s(x,y.children||[]),x.return=E,E=x;break e}else{n(E,x);break}else e(E,x);x=x.sibling}x=Gd(y,E.mode,S),x.return=E,E=x}return o(E);case wr:return V=y._init,C(E,x,V(y._payload),S)}if(Ao(y))return N(E,x,y,S);if(mo(y))return T(E,x,y,S);Pl(E,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(E,x.sibling),x=s(x,y),x.return=E,E=x):(n(E,x),x=Kd(y,E.mode,S),x.return=E,E=x),o(E)):n(E,x)}return C}var Si=xx(!0),wx=xx(!1),Eu=Yr(null),Tu=null,ci=null,gp=null;function yp(){gp=ci=Tu=null}function vp(t){var e=Eu.current;_e(Eu),t._currentValue=e}function Kh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function yi(t,e){Tu=t,gp=ci=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(jt=!0),t.firstContext=null)}function tn(t){var e=t._currentValue;if(gp!==t)if(t={context:t,memoizedValue:e,next:null},ci===null){if(Tu===null)throw Error(F(308));ci=t,Tu.dependencies={lanes:0,firstContext:t}}else ci=ci.next=t;return e}var cs=null;function _p(t){cs===null?cs=[t]:cs.push(t)}function Ex(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,_p(e)):(n.next=s.next,s.next=n),e.interleaved=n,ir(t,r)}function ir(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Er=!1;function xp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Tx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Jn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ie&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,ir(t,n)}return s=r.interleaved,s===null?(e.next=e,_p(r)):(e.next=s.next,s.next=e),r.interleaved=e,ir(t,n)}function Hl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ip(t,n)}}function zy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function bu(t,e,n,r){var s=t.updateQueue;Er=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==o&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,u=i;do{var p=u.lane,w=u.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:w,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=t,T=u;switch(p=e,w=n,T.tag){case 1:if(N=T.payload,typeof N=="function"){g=N.call(w,g,p);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=T.payload,p=typeof N=="function"?N.call(w,g,p):N,p==null)break e;g=Ie({},g,p);break e;case 2:Er=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[u]:p.push(u))}else w={eventTime:w,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=w,c=g):f=f.next=w,o|=p;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;p=u,u=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ts|=o,t.lanes=o,t.memoizedState=g}}function $y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var La={},Sn=Yr(La),ua=Yr(La),ca=Yr(La);function ds(t){if(t===La)throw Error(F(174));return t}function wp(t,e){switch(ge(ca,e),ge(ua,t),ge(Sn,La),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Sh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Sh(e,t)}_e(Sn),ge(Sn,e)}function Ai(){_e(Sn),_e(ua),_e(ca)}function bx(t){ds(ca.current);var e=ds(Sn.current),n=Sh(e,t.type);e!==n&&(ge(ua,t),ge(Sn,n))}function Ep(t){ua.current===t&&(_e(Sn),_e(ua))}var Te=Yr(0);function Iu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function Tp(){for(var t=0;t<zd.length;t++)zd[t]._workInProgressVersionPrimary=null;zd.length=0}var Wl=dr.ReactCurrentDispatcher,$d=dr.ReactCurrentBatchConfig,Es=0,be=null,Ue=null,Be=null,Nu=!1,Bo=!1,da=0,GN=0;function ot(){throw Error(F(321))}function bp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!vn(t[n],e[n]))return!1;return!0}function Ip(t,e,n,r,s,i){if(Es=i,be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Wl.current=t===null||t.memoizedState===null?JN:ZN,t=n(r,s),Bo){i=0;do{if(Bo=!1,da=0,25<=i)throw Error(F(301));i+=1,Be=Ue=null,e.updateQueue=null,Wl.current=eS,t=n(r,s)}while(Bo)}if(Wl.current=Su,e=Ue!==null&&Ue.next!==null,Es=0,Be=Ue=be=null,Nu=!1,e)throw Error(F(300));return t}function Np(){var t=da!==0;return da=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?be.memoizedState=Be=t:Be=Be.next=t,Be}function nn(){if(Ue===null){var t=be.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Be===null?be.memoizedState:Be.next;if(e!==null)Be=e,Ue=t;else{if(t===null)throw Error(F(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Be===null?be.memoizedState=Be=t:Be=Be.next=t}return Be}function ha(t,e){return typeof e=="function"?e(t):e}function Bd(t){var e=nn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var f=d.lane;if((Es&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,o=r):c=c.next=g,be.lanes|=f,Ts|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,vn(r,e.memoizedState)||(jt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,be.lanes|=i,Ts|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function qd(t){var e=nn(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);vn(i,e.memoizedState)||(jt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ix(){}function Nx(t,e){var n=be,r=nn(),s=e(),i=!vn(r.memoizedState,s);if(i&&(r.memoizedState=s,jt=!0),r=r.queue,Sp(Px.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,fa(9,Ax.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(F(349));Es&30||Sx(n,e,s)}return s}function Sx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ax(t,e,n,r){e.value=n,e.getSnapshot=r,Cx(e)&&kx(t)}function Px(t,e,n){return n(function(){Cx(e)&&kx(t)})}function Cx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!vn(t,n)}catch{return!0}}function kx(t){var e=ir(t,1);e!==null&&gn(e,t,1,-1)}function By(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ha,lastRenderedState:t},e.queue=t,t=t.dispatch=XN.bind(null,be,t),[e.memoizedState,t]}function fa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=be.updateQueue,e===null?(e={lastEffect:null,stores:null},be.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Rx(){return nn().memoizedState}function Kl(t,e,n,r){var s=bn();be.flags|=t,s.memoizedState=fa(1|e,n,void 0,r===void 0?null:r)}function cc(t,e,n,r){var s=nn();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&bp(r,o.deps)){s.memoizedState=fa(e,n,i,r);return}}be.flags|=t,s.memoizedState=fa(1|e,n,i,r)}function qy(t,e){return Kl(8390656,8,t,e)}function Sp(t,e){return cc(2048,8,t,e)}function jx(t,e){return cc(4,2,t,e)}function Ox(t,e){return cc(4,4,t,e)}function Dx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Lx(t,e,n){return n=n!=null?n.concat([t]):null,cc(4,4,Dx.bind(null,e,t),n)}function Ap(){}function Mx(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Vx(t,e){var n=nn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&bp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Ux(t,e,n){return Es&21?(vn(n,e)||(n=q_(),be.lanes|=n,Ts|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,jt=!0),t.memoizedState=n)}function QN(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=$d.transition;$d.transition={};try{t(!1),e()}finally{ue=n,$d.transition=r}}function Fx(){return nn().memoizedState}function YN(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zx(t))$x(e,n);else if(n=Ex(t,e,n,r),n!==null){var s=bt();gn(n,t,r,s),Bx(n,e,r)}}function XN(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zx(t))$x(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,vn(u,o)){var c=e.interleaved;c===null?(s.next=s,_p(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Ex(t,e,s,r),n!==null&&(s=bt(),gn(n,t,r,s),Bx(n,e,r))}}function zx(t){var e=t.alternate;return t===be||e!==null&&e===be}function $x(t,e){Bo=Nu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Bx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ip(t,n)}}var Su={readContext:tn,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},JN={readContext:tn,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:tn,useEffect:qy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Kl(4194308,4,Dx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Kl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Kl(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=YN.bind(null,be,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:By,useDebugValue:Ap,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=By(!1),e=t[0];return t=QN.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=be,s=bn();if(xe){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),qe===null)throw Error(F(349));Es&30||Sx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,qy(Px.bind(null,r,i,t),[t]),r.flags|=2048,fa(9,Ax.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=bn(),e=qe.identifierPrefix;if(xe){var n=Gn,r=Kn;n=(r&~(1<<32-mn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=da++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=GN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ZN={readContext:tn,useCallback:Mx,useContext:tn,useEffect:Sp,useImperativeHandle:Lx,useInsertionEffect:jx,useLayoutEffect:Ox,useMemo:Vx,useReducer:Bd,useRef:Rx,useState:function(){return Bd(ha)},useDebugValue:Ap,useDeferredValue:function(t){var e=nn();return Ux(e,Ue.memoizedState,t)},useTransition:function(){var t=Bd(ha)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Nx,useId:Fx,unstable_isNewReconciler:!1},eS={readContext:tn,useCallback:Mx,useContext:tn,useEffect:Sp,useImperativeHandle:Lx,useInsertionEffect:jx,useLayoutEffect:Ox,useMemo:Vx,useReducer:qd,useRef:Rx,useState:function(){return qd(ha)},useDebugValue:Ap,useDeferredValue:function(t){var e=nn();return Ue===null?e.memoizedState=t:Ux(e,Ue.memoizedState,t)},useTransition:function(){var t=qd(ha)[0],e=nn().memoizedState;return[t,e]},useMutableSource:Ix,useSyncExternalStore:Nx,useId:Fx,unstable_isNewReconciler:!1};function un(t,e){if(t&&t.defaultProps){e=Ie({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Gh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ie({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var dc={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Vr(t),i=Jn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(gn(e,t,s,r),Hl(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=bt(),s=Vr(t),i=Jn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(gn(e,t,s,r),Hl(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=bt(),r=Vr(t),s=Jn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(gn(e,t,r,n),Hl(e,t,r))}};function Hy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ia(n,r)||!ia(s,i):!0}function qx(t,e,n){var r=!1,s=Hr,i=e.contextType;return typeof i=="object"&&i!==null?i=tn(i):(s=Dt(e)?xs:yt.current,r=e.contextTypes,i=(r=r!=null)?Ii(t,s):Hr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=dc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Wy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&dc.enqueueReplaceState(e,e.state,null)}function Qh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},xp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=tn(i):(i=Dt(e)?xs:yt.current,s.context=Ii(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Gh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&dc.enqueueReplaceState(s,s.state,null),bu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Pi(t,e){try{var n="",r=e;do n+=AI(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Hd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Yh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var tS=typeof WeakMap=="function"?WeakMap:Map;function Hx(t,e,n){n=Jn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Pu||(Pu=!0,af=r),Yh(t,e)},n}function Wx(t,e,n){n=Jn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Yh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Yh(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ky(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new tS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=mS.bind(null,t,e,n),e.then(t,t))}function Gy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Jn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var nS=dr.ReactCurrentOwner,jt=!1;function Tt(t,e,n,r){e.child=t===null?wx(e,null,n,r):Si(e,t.child,n,r)}function Yy(t,e,n,r,s){n=n.render;var i=e.ref;return yi(e,s),r=Ip(t,e,n,r,i,s),n=Np(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,or(t,e,s)):(xe&&n&&fp(e),e.flags|=1,Tt(t,e,r,s),e.child)}function Xy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Lp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Kx(t,e,i,r,s)):(t=Xl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ia,n(o,r)&&t.ref===e.ref)return or(t,e,s)}return e.flags|=1,t=Ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function Kx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ia(i,r)&&t.ref===e.ref)if(jt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(jt=!0);else return e.lanes=t.lanes,or(t,e,s)}return Xh(t,e,n,r,s)}function Gx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ge(hi,zt),zt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ge(hi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ge(hi,zt),zt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ge(hi,zt),zt|=r;return Tt(t,e,s,n),e.child}function Qx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Xh(t,e,n,r,s){var i=Dt(n)?xs:yt.current;return i=Ii(e,i),yi(e,s),n=Ip(t,e,n,r,i,s),r=Np(),t!==null&&!jt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,or(t,e,s)):(xe&&r&&fp(e),e.flags|=1,Tt(t,e,n,s),e.child)}function Jy(t,e,n,r,s){if(Dt(n)){var i=!0;_u(e)}else i=!1;if(yi(e,s),e.stateNode===null)Gl(t,e),qx(e,n,r),Qh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=tn(d):(d=Dt(n)?xs:yt.current,d=Ii(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Wy(e,o,r,d),Er=!1;var p=e.memoizedState;o.state=p,bu(e,r,o,s),c=e.memoizedState,u!==r||p!==c||Ot.current||Er?(typeof f=="function"&&(Gh(e,n,f,r),c=e.memoizedState),(u=Er||Hy(e,n,u,r,p,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Tx(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:un(e.type,u),o.props=d,g=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=tn(c):(c=Dt(n)?xs:yt.current,c=Ii(e,c));var w=n.getDerivedStateFromProps;(f=typeof w=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==g||p!==c)&&Wy(e,o,r,c),Er=!1,p=e.memoizedState,o.state=p,bu(e,r,o,s);var N=e.memoizedState;u!==g||p!==N||Ot.current||Er?(typeof w=="function"&&(Gh(e,n,w,r),N=e.memoizedState),(d=Er||Hy(e,n,d,r,p,N,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Jh(t,e,n,r,i,s)}function Jh(t,e,n,r,s,i){Qx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&My(e,n,!1),or(t,e,i);r=e.stateNode,nS.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Si(e,t.child,null,i),e.child=Si(e,null,u,i)):Tt(t,e,u,i),e.memoizedState=r.state,s&&My(e,n,!0),e.child}function Yx(t){var e=t.stateNode;e.pendingContext?Ly(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ly(t,e.context,!1),wp(t,e.containerInfo)}function Zy(t,e,n,r,s){return Ni(),mp(s),e.flags|=256,Tt(t,e,n,r),e.child}var Zh={dehydrated:null,treeContext:null,retryLane:0};function ef(t){return{baseLanes:t,cachePool:null,transitions:null}}function Xx(t,e,n){var r=e.pendingProps,s=Te.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ge(Te,s&1),t===null)return Wh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=pc(o,r,0,null),t=ys(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=ef(n),e.memoizedState=Zh,t):Pp(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return rS(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ur(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Ur(u,i):(i=ys(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?ef(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Zh,r}return i=t.child,t=i.sibling,r=Ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Pp(t,e){return e=pc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Cl(t,e,n,r){return r!==null&&mp(r),Si(e,t.child,null,n),t=Pp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function rS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Hd(Error(F(422))),Cl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=pc({mode:"visible",children:r.children},s,0,null),i=ys(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Si(e,t.child,null,o),e.child.memoizedState=ef(o),e.memoizedState=Zh,i);if(!(e.mode&1))return Cl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(F(419)),r=Hd(i,r,void 0),Cl(t,e,o,r)}if(u=(o&t.childLanes)!==0,jt||u){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ir(t,s),gn(r,t,s,-1))}return Dp(),r=Hd(Error(F(421))),Cl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=gS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Dr(s.nextSibling),qt=e,xe=!0,dn=null,t!==null&&(Gt[Qt++]=Kn,Gt[Qt++]=Gn,Gt[Qt++]=ws,Kn=t.id,Gn=t.overflow,ws=e),e=Pp(e,r.children),e.flags|=4096,e)}function ev(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Kh(t.return,e,n)}function Wd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Jx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=Te.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&ev(t,n,e);else if(t.tag===19)ev(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ge(Te,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Iu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Wd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Iu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Wd(e,!0,n,null,i);break;case"together":Wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Gl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function or(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ts|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function sS(t,e,n){switch(e.tag){case 3:Yx(e),Ni();break;case 5:bx(e);break;case 1:Dt(e.type)&&_u(e);break;case 4:wp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ge(Eu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ge(Te,Te.current&1),e.flags|=128,null):n&e.child.childLanes?Xx(t,e,n):(ge(Te,Te.current&1),t=or(t,e,n),t!==null?t.sibling:null);ge(Te,Te.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Jx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ge(Te,Te.current),r)break;return null;case 22:case 23:return e.lanes=0,Gx(t,e,n)}return or(t,e,n)}var Zx,tf,ew,tw;Zx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};tf=function(){};ew=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ds(Sn.current);var i=null;switch(n){case"input":s=Th(t,s),r=Th(t,r),i=[];break;case"select":s=Ie({},s,{value:void 0}),r=Ie({},r,{value:void 0}),i=[];break;case"textarea":s=Nh(t,s),r=Nh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=yu)}Ah(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Jo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Jo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ve("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};tw=function(t,e,n,r){n!==r&&(e.flags|=4)};function wo(t,e){if(!xe)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function iS(t,e,n){var r=e.pendingProps;switch(pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return Dt(e.type)&&vu(),at(e),null;case 3:return r=e.stateNode,Ai(),_e(Ot),_e(yt),Tp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Al(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,dn!==null&&(cf(dn),dn=null))),tf(t,e),at(e),null;case 5:Ep(e);var s=ds(ca.current);if(n=e.type,t!==null&&e.stateNode!=null)ew(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return at(e),null}if(t=ds(Sn.current),Al(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[In]=e,r[la]=i,t=(e.mode&1)!==0,n){case"dialog":ve("cancel",r),ve("close",r);break;case"iframe":case"object":case"embed":ve("load",r);break;case"video":case"audio":for(s=0;s<Co.length;s++)ve(Co[s],r);break;case"source":ve("error",r);break;case"img":case"image":case"link":ve("error",r),ve("load",r);break;case"details":ve("toggle",r);break;case"input":uy(r,i),ve("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ve("invalid",r);break;case"textarea":dy(r,i),ve("invalid",r)}Ah(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Sl(r.textContent,u,t),s=["children",""+u]):Jo.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&ve("scroll",r)}switch(n){case"input":_l(r),cy(r,i,!0);break;case"textarea":_l(r),hy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=yu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=P_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[In]=e,t[la]=r,Zx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ph(n,r),n){case"dialog":ve("cancel",t),ve("close",t),s=r;break;case"iframe":case"object":case"embed":ve("load",t),s=r;break;case"video":case"audio":for(s=0;s<Co.length;s++)ve(Co[s],t);s=r;break;case"source":ve("error",t),s=r;break;case"img":case"image":case"link":ve("error",t),ve("load",t),s=r;break;case"details":ve("toggle",t),s=r;break;case"input":uy(t,r),s=Th(t,r),ve("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ie({},r,{value:void 0}),ve("invalid",t);break;case"textarea":dy(t,r),s=Nh(t,r),ve("invalid",t);break;default:s=r}Ah(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?R_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&C_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Zo(t,c):typeof c=="number"&&Zo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Jo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ve("scroll",t):c!=null&&Zf(t,i,c,o))}switch(n){case"input":_l(t),cy(t,r,!1);break;case"textarea":_l(t),hy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?fi(t,!!r.multiple,i,!1):r.defaultValue!=null&&fi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=yu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)tw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=ds(ca.current),ds(Sn.current),Al(e)){if(r=e.stateNode,n=e.memoizedProps,r[In]=e,(i=r.nodeValue!==n)&&(t=qt,t!==null))switch(t.tag){case 3:Sl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Sl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[In]=e,e.stateNode=r}return at(e),null;case 13:if(_e(Te),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(xe&&$t!==null&&e.mode&1&&!(e.flags&128))_x(),Ni(),e.flags|=98560,i=!1;else if(i=Al(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[In]=e}else Ni(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else dn!==null&&(cf(dn),dn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Fe===0&&(Fe=3):Dp())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Ai(),tf(t,e),t===null&&oa(e.stateNode.containerInfo),at(e),null;case 10:return vp(e.type._context),at(e),null;case 17:return Dt(e.type)&&vu(),at(e),null;case 19:if(_e(Te),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)wo(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Iu(t),o!==null){for(e.flags|=128,wo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ge(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Ci&&(e.flags|=128,r=!0,wo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Iu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),wo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!xe)return at(e),null}else 2*je()-i.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,r=!0,wo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=Te.current,ge(Te,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return Op(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function oS(t,e){switch(pp(e),e.tag){case 1:return Dt(e.type)&&vu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ai(),_e(Ot),_e(yt),Tp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ep(e),null;case 13:if(_e(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Ni()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return _e(Te),null;case 4:return Ai(),null;case 10:return vp(e.type._context),null;case 22:case 23:return Op(),null;case 24:return null;default:return null}}var kl=!1,ht=!1,aS=typeof WeakSet=="function"?WeakSet:Set,q=null;function di(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ae(t,e,r)}else n.current=null}function nf(t,e,n){try{n()}catch(r){Ae(t,e,r)}}var tv=!1;function lS(t,e){if(Uh=pu,t=ox(),hp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,f=0,g=t,p=null;t:for(;;){for(var w;g!==n||s!==0&&g.nodeType!==3||(u=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(w=g.firstChild)!==null;)p=g,g=w;for(;;){if(g===t)break t;if(p===n&&++d===s&&(u=o),p===i&&++f===r&&(c=o),(w=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=w}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Fh={focusedElem:t,selectionRange:n},pu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var T=N.memoizedProps,C=N.memoizedState,E=e.stateNode,x=E.getSnapshotBeforeUpdate(e.elementType===e.type?T:un(e.type,T),C);E.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(S){Ae(e,e.return,S)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return N=tv,tv=!1,N}function qo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&nf(e,n,i)}s=s.next}while(s!==r)}}function hc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function nw(t){var e=t.alternate;e!==null&&(t.alternate=null,nw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[la],delete e[Bh],delete e[qN],delete e[HN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function rw(t){return t.tag===5||t.tag===3||t.tag===4}function nv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||rw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function sf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=yu));else if(r!==4&&(t=t.child,t!==null))for(sf(t,e,n),t=t.sibling;t!==null;)sf(t,e,n),t=t.sibling}function of(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(of(t,e,n),t=t.sibling;t!==null;)of(t,e,n),t=t.sibling}var Qe=null,cn=!1;function _r(t,e,n){for(n=n.child;n!==null;)sw(t,e,n),n=n.sibling}function sw(t,e,n){if(Nn&&typeof Nn.onCommitFiberUnmount=="function")try{Nn.onCommitFiberUnmount(sc,n)}catch{}switch(n.tag){case 5:ht||di(n,e);case 6:var r=Qe,s=cn;Qe=null,_r(t,e,n),Qe=r,cn=s,Qe!==null&&(cn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(cn?(t=Qe,n=n.stateNode,t.nodeType===8?Ud(t.parentNode,n):t.nodeType===1&&Ud(t,n),ra(t)):Ud(Qe,n.stateNode));break;case 4:r=Qe,s=cn,Qe=n.stateNode.containerInfo,cn=!0,_r(t,e,n),Qe=r,cn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&nf(n,e,o),s=s.next}while(s!==r)}_r(t,e,n);break;case 1:if(!ht&&(di(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ae(n,e,u)}_r(t,e,n);break;case 21:_r(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,_r(t,e,n),ht=r):_r(t,e,n);break;default:_r(t,e,n)}}function rv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new aS),e.forEach(function(r){var s=yS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function ln(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Qe=u.stateNode,cn=!1;break e;case 3:Qe=u.stateNode.containerInfo,cn=!0;break e;case 4:Qe=u.stateNode.containerInfo,cn=!0;break e}u=u.return}if(Qe===null)throw Error(F(160));sw(i,o,s),Qe=null,cn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ae(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)iw(e,t),e=e.sibling}function iw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ln(e,t),Tn(t),r&4){try{qo(3,t,t.return),hc(3,t)}catch(T){Ae(t,t.return,T)}try{qo(5,t,t.return)}catch(T){Ae(t,t.return,T)}}break;case 1:ln(e,t),Tn(t),r&512&&n!==null&&di(n,n.return);break;case 5:if(ln(e,t),Tn(t),r&512&&n!==null&&di(n,n.return),t.flags&32){var s=t.stateNode;try{Zo(s,"")}catch(T){Ae(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&S_(s,i),Ph(u,o);var d=Ph(u,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?R_(s,g):f==="dangerouslySetInnerHTML"?C_(s,g):f==="children"?Zo(s,g):Zf(s,f,g,d)}switch(u){case"input":bh(s,i);break;case"textarea":A_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var w=i.value;w!=null?fi(s,!!i.multiple,w,!1):p!==!!i.multiple&&(i.defaultValue!=null?fi(s,!!i.multiple,i.defaultValue,!0):fi(s,!!i.multiple,i.multiple?[]:"",!1))}s[la]=i}catch(T){Ae(t,t.return,T)}}break;case 6:if(ln(e,t),Tn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Ae(t,t.return,T)}}break;case 3:if(ln(e,t),Tn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{ra(e.containerInfo)}catch(T){Ae(t,t.return,T)}break;case 4:ln(e,t),Tn(t);break;case 13:ln(e,t),Tn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Rp=je())),r&4&&rv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,ln(e,t),ht=d):ln(e,t),Tn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(p=q,w=p.child,p.tag){case 0:case 11:case 14:case 15:qo(4,p,p.return);break;case 1:di(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(T){Ae(r,n,T)}}break;case 5:di(p,p.return);break;case 22:if(p.memoizedState!==null){iv(g);continue}}w!==null?(w.return=p,q=w):iv(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=k_("display",o))}catch(T){Ae(t,t.return,T)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(T){Ae(t,t.return,T)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:ln(e,t),Tn(t),r&4&&rv(t);break;case 21:break;default:ln(e,t),Tn(t)}}function Tn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(rw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Zo(s,""),r.flags&=-33);var i=nv(t);of(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=nv(t);sf(t,u,o);break;default:throw Error(F(161))}}catch(c){Ae(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function uS(t,e,n){q=t,ow(t)}function ow(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||kl;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ht;u=kl;var d=ht;if(kl=o,(ht=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?ov(s):c!==null?(c.return=o,q=c):ov(s);for(;i!==null;)q=i,ow(i),i=i.sibling;q=s,kl=u,ht=d}sv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):sv(t)}}function sv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||hc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:un(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$y(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$y(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&ra(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ht||e.flags&512&&rf(e)}catch(p){Ae(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function iv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function ov(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{hc(4,e)}catch(c){Ae(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ae(e,s,c)}}var i=e.return;try{rf(e)}catch(c){Ae(e,i,c)}break;case 5:var o=e.return;try{rf(e)}catch(c){Ae(e,o,c)}}}catch(c){Ae(e,e.return,c)}if(e===t){q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,q=u;break}q=e.return}}var cS=Math.ceil,Au=dr.ReactCurrentDispatcher,Cp=dr.ReactCurrentOwner,Xt=dr.ReactCurrentBatchConfig,ie=0,qe=null,Le=null,Ze=0,zt=0,hi=Yr(0),Fe=0,pa=null,Ts=0,fc=0,kp=0,Ho=null,Ct=null,Rp=0,Ci=1/0,Bn=null,Pu=!1,af=null,Mr=null,Rl=!1,Pr=null,Cu=0,Wo=0,lf=null,Ql=-1,Yl=0;function bt(){return ie&6?je():Ql!==-1?Ql:Ql=je()}function Vr(t){return t.mode&1?ie&2&&Ze!==0?Ze&-Ze:KN.transition!==null?(Yl===0&&(Yl=q_()),Yl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:X_(t.type)),t):1}function gn(t,e,n,r){if(50<Wo)throw Wo=0,lf=null,Error(F(185));ja(t,n,r),(!(ie&2)||t!==qe)&&(t===qe&&(!(ie&2)&&(fc|=n),Fe===4&&br(t,Ze)),Lt(t,r),n===1&&ie===0&&!(e.mode&1)&&(Ci=je()+500,uc&&Xr()))}function Lt(t,e){var n=t.callbackNode;KI(t,e);var r=fu(t,t===qe?Ze:0);if(r===0)n!==null&&my(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&my(n),e===1)t.tag===0?WN(av.bind(null,t)):gx(av.bind(null,t)),$N(function(){!(ie&6)&&Xr()}),n=null;else{switch(H_(r)){case 1:n=sp;break;case 4:n=$_;break;case 16:n=hu;break;case 536870912:n=B_;break;default:n=hu}n=pw(n,aw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function aw(t,e){if(Ql=-1,Yl=0,ie&6)throw Error(F(327));var n=t.callbackNode;if(vi()&&t.callbackNode!==n)return null;var r=fu(t,t===qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ku(t,r);else{e=r;var s=ie;ie|=2;var i=uw();(qe!==t||Ze!==e)&&(Bn=null,Ci=je()+500,gs(t,e));do try{fS();break}catch(u){lw(t,u)}while(!0);yp(),Au.current=i,ie=s,Le!==null?e=0:(qe=null,Ze=0,e=Fe)}if(e!==0){if(e===2&&(s=Oh(t),s!==0&&(r=s,e=uf(t,s))),e===1)throw n=pa,gs(t,0),br(t,r),Lt(t,je()),n;if(e===6)br(t,r);else{if(s=t.current.alternate,!(r&30)&&!dS(s)&&(e=ku(t,r),e===2&&(i=Oh(t),i!==0&&(r=i,e=uf(t,i))),e===1))throw n=pa,gs(t,0),br(t,r),Lt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:os(t,Ct,Bn);break;case 3:if(br(t,r),(r&130023424)===r&&(e=Rp+500-je(),10<e)){if(fu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){bt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=$h(os.bind(null,t,Ct,Bn),e);break}os(t,Ct,Bn);break;case 4:if(br(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-mn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*cS(r/1960))-r,10<r){t.timeoutHandle=$h(os.bind(null,t,Ct,Bn),r);break}os(t,Ct,Bn);break;case 5:os(t,Ct,Bn);break;default:throw Error(F(329))}}}return Lt(t,je()),t.callbackNode===n?aw.bind(null,t):null}function uf(t,e){var n=Ho;return t.current.memoizedState.isDehydrated&&(gs(t,e).flags|=256),t=ku(t,e),t!==2&&(e=Ct,Ct=n,e!==null&&cf(e)),t}function cf(t){Ct===null?Ct=t:Ct.push.apply(Ct,t)}function dS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!vn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function br(t,e){for(e&=~kp,e&=~fc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-mn(e),r=1<<n;t[n]=-1,e&=~r}}function av(t){if(ie&6)throw Error(F(327));vi();var e=fu(t,0);if(!(e&1))return Lt(t,je()),null;var n=ku(t,e);if(t.tag!==0&&n===2){var r=Oh(t);r!==0&&(e=r,n=uf(t,r))}if(n===1)throw n=pa,gs(t,0),br(t,e),Lt(t,je()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,Ct,Bn),Lt(t,je()),null}function jp(t,e){var n=ie;ie|=1;try{return t(e)}finally{ie=n,ie===0&&(Ci=je()+500,uc&&Xr())}}function bs(t){Pr!==null&&Pr.tag===0&&!(ie&6)&&vi();var e=ie;ie|=1;var n=Xt.transition,r=ue;try{if(Xt.transition=null,ue=1,t)return t()}finally{ue=r,Xt.transition=n,ie=e,!(ie&6)&&Xr()}}function Op(){zt=hi.current,_e(hi)}function gs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,zN(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(pp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&vu();break;case 3:Ai(),_e(Ot),_e(yt),Tp();break;case 5:Ep(r);break;case 4:Ai();break;case 13:_e(Te);break;case 19:_e(Te);break;case 10:vp(r.type._context);break;case 22:case 23:Op()}n=n.return}if(qe=t,Le=t=Ur(t.current,null),Ze=zt=e,Fe=0,pa=null,kp=fc=Ts=0,Ct=Ho=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cs=null}return t}function lw(t,e){do{var n=Le;try{if(yp(),Wl.current=Su,Nu){for(var r=be.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Nu=!1}if(Es=0,Be=Ue=be=null,Bo=!1,da=0,Cp.current=null,n===null||n.return===null){Fe=1,pa=e,Le=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Ze,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var w=Gy(o);if(w!==null){w.flags&=-257,Qy(w,o,u,i,e),w.mode&1&&Ky(i,d,e),e=w,c=d;var N=e.updateQueue;if(N===null){var T=new Set;T.add(c),e.updateQueue=T}else N.add(c);break e}else{if(!(e&1)){Ky(i,d,e),Dp();break e}c=Error(F(426))}}else if(xe&&u.mode&1){var C=Gy(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Qy(C,o,u,i,e),mp(Pi(c,u));break e}}i=c=Pi(c,u),Fe!==4&&(Fe=2),Ho===null?Ho=[i]:Ho.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=Hx(i,c,e);zy(i,E);break e;case 1:u=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Mr===null||!Mr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var S=Wx(i,u,e);zy(i,S);break e}}i=i.return}while(i!==null)}dw(n)}catch(D){e=D,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function uw(){var t=Au.current;return Au.current=Su,t===null?Su:t}function Dp(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||!(Ts&268435455)&&!(fc&268435455)||br(qe,Ze)}function ku(t,e){var n=ie;ie|=2;var r=uw();(qe!==t||Ze!==e)&&(Bn=null,gs(t,e));do try{hS();break}catch(s){lw(t,s)}while(!0);if(yp(),ie=n,Au.current=r,Le!==null)throw Error(F(261));return qe=null,Ze=0,Fe}function hS(){for(;Le!==null;)cw(Le)}function fS(){for(;Le!==null&&!VI();)cw(Le)}function cw(t){var e=fw(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?dw(t):Le=e,Cp.current=null}function dw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=oS(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Le=null;return}}else if(n=iS(n,e,zt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);Fe===0&&(Fe=5)}function os(t,e,n){var r=ue,s=Xt.transition;try{Xt.transition=null,ue=1,pS(t,e,n,r)}finally{Xt.transition=s,ue=r}return null}function pS(t,e,n,r){do vi();while(Pr!==null);if(ie&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(GI(t,i),t===qe&&(Le=qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Rl||(Rl=!0,pw(hu,function(){return vi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Xt.transition,Xt.transition=null;var o=ue;ue=1;var u=ie;ie|=4,Cp.current=null,lS(t,n),iw(n,t),ON(Fh),pu=!!Uh,Fh=Uh=null,t.current=n,uS(n),UI(),ie=u,ue=o,Xt.transition=i}else t.current=n;if(Rl&&(Rl=!1,Pr=t,Cu=s),i=t.pendingLanes,i===0&&(Mr=null),$I(n.stateNode),Lt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Pu)throw Pu=!1,t=af,af=null,t;return Cu&1&&t.tag!==0&&vi(),i=t.pendingLanes,i&1?t===lf?Wo++:(Wo=0,lf=t):Wo=0,Xr(),null}function vi(){if(Pr!==null){var t=H_(Cu),e=Xt.transition,n=ue;try{if(Xt.transition=null,ue=16>t?16:t,Pr===null)var r=!1;else{if(t=Pr,Pr=null,Cu=0,ie&6)throw Error(F(331));var s=ie;for(ie|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:qo(8,f,i)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var p=f.sibling,w=f.return;if(nw(f),f===d){q=null;break}if(p!==null){p.return=w,q=p;break}q=w}}}var N=i.alternate;if(N!==null){var T=N.child;if(T!==null){N.child=null;do{var C=T.sibling;T.sibling=null,T=C}while(T!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:qo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=x;q!==null;){if(u=q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:hc(9,u)}}catch(D){Ae(u,u.return,D)}if(u===o){q=null;break e}var S=u.sibling;if(S!==null){S.return=u.return,q=S;break e}q=u.return}}if(ie=s,Xr(),Nn&&typeof Nn.onPostCommitFiberRoot=="function")try{Nn.onPostCommitFiberRoot(sc,t)}catch{}r=!0}return r}finally{ue=n,Xt.transition=e}}return!1}function lv(t,e,n){e=Pi(n,e),e=Hx(t,e,1),t=Lr(t,e,1),e=bt(),t!==null&&(ja(t,1,e),Lt(t,e))}function Ae(t,e,n){if(t.tag===3)lv(t,t,n);else for(;e!==null;){if(e.tag===3){lv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=Pi(n,t),t=Wx(e,t,1),e=Lr(e,t,1),t=bt(),e!==null&&(ja(e,1,t),Lt(e,t));break}}e=e.return}}function mS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=bt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ze&n)===n&&(Fe===4||Fe===3&&(Ze&130023424)===Ze&&500>je()-Rp?gs(t,0):kp|=n),Lt(t,e)}function hw(t,e){e===0&&(t.mode&1?(e=El,El<<=1,!(El&130023424)&&(El=4194304)):e=1);var n=bt();t=ir(t,e),t!==null&&(ja(t,e,n),Lt(t,n))}function gS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),hw(t,n)}function yS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),hw(t,n)}var fw;fw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)jt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return jt=!1,sS(t,e,n);jt=!!(t.flags&131072)}else jt=!1,xe&&e.flags&1048576&&yx(e,wu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Gl(t,e),t=e.pendingProps;var s=Ii(e,yt.current);yi(e,n),s=Ip(null,e,r,t,s,n);var i=Np();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,_u(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,xp(e),s.updater=dc,e.stateNode=s,s._reactInternals=e,Qh(e,r,t,n),e=Jh(null,e,r,!0,i,n)):(e.tag=0,xe&&i&&fp(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Gl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=_S(r),t=un(r,t),s){case 0:e=Xh(null,e,r,t,n);break e;case 1:e=Jy(null,e,r,t,n);break e;case 11:e=Yy(null,e,r,t,n);break e;case 14:e=Xy(null,e,r,un(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Xh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Jy(t,e,r,s,n);case 3:e:{if(Yx(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Tx(t,e),bu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Pi(Error(F(423)),e),e=Zy(t,e,r,n,s);break e}else if(r!==s){s=Pi(Error(F(424)),e),e=Zy(t,e,r,n,s);break e}else for($t=Dr(e.stateNode.containerInfo.firstChild),qt=e,xe=!0,dn=null,n=wx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Ni(),r===s){e=or(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return bx(e),t===null&&Wh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,zh(r,s)?o=null:i!==null&&zh(r,i)&&(e.flags|=32),Qx(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Wh(e),null;case 13:return Xx(t,e,n);case 4:return wp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Si(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Yy(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ge(Eu,r._currentValue),r._currentValue=o,i!==null)if(vn(i.value,o)){if(i.children===s.children&&!Ot.current){e=or(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Jn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Kh(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Kh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,yi(e,n),s=tn(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=un(r,e.pendingProps),s=un(r.type,s),Xy(t,e,r,s,n);case 15:return Kx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:un(r,s),Gl(t,e),e.tag=1,Dt(r)?(t=!0,_u(e)):t=!1,yi(e,n),qx(e,r,s),Qh(e,r,s,n),Jh(null,e,r,!0,t,n);case 19:return Jx(t,e,n);case 22:return Gx(t,e,n)}throw Error(F(156,e.tag))};function pw(t,e){return z_(t,e)}function vS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Yt(t,e,n,r){return new vS(t,e,n,r)}function Lp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function _S(t){if(typeof t=="function")return Lp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===tp)return 11;if(t===np)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=Yt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Xl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Lp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ni:return ys(n.children,s,i,e);case ep:o=8,s|=8;break;case _h:return t=Yt(12,n,e,s|2),t.elementType=_h,t.lanes=i,t;case xh:return t=Yt(13,n,e,s),t.elementType=xh,t.lanes=i,t;case wh:return t=Yt(19,n,e,s),t.elementType=wh,t.lanes=i,t;case b_:return pc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case E_:o=10;break e;case T_:o=9;break e;case tp:o=11;break e;case np:o=14;break e;case wr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Yt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ys(t,e,n,r){return t=Yt(7,t,r,e),t.lanes=n,t}function pc(t,e,n,r){return t=Yt(22,t,r,e),t.elementType=b_,t.lanes=n,t.stateNode={isHidden:!1},t}function Kd(t,e,n){return t=Yt(6,t,null,e),t.lanes=n,t}function Gd(t,e,n){return e=Yt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function xS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ad(0),this.expirationTimes=Ad(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ad(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Mp(t,e,n,r,s,i,o,u,c){return t=new xS(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Yt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},xp(i),t}function wS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ti,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function mw(t){if(!t)return Hr;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Dt(n))return mx(t,n,e)}return e}function gw(t,e,n,r,s,i,o,u,c){return t=Mp(n,r,!0,t,s,i,o,u,c),t.context=mw(null),n=t.current,r=bt(),s=Vr(n),i=Jn(r,s),i.callback=e??null,Lr(n,i,s),t.current.lanes=s,ja(t,s,r),Lt(t,r),t}function mc(t,e,n,r){var s=e.current,i=bt(),o=Vr(s);return n=mw(n),e.context===null?e.context=n:e.pendingContext=n,e=Jn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,o),t!==null&&(gn(t,s,o,i),Hl(t,s,o)),o}function Ru(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function uv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Vp(t,e){uv(t,e),(t=t.alternate)&&uv(t,e)}function ES(){return null}var yw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Up(t){this._internalRoot=t}gc.prototype.render=Up.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));mc(t,e,null,null)};gc.prototype.unmount=Up.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bs(function(){mc(null,t,null,null)}),e[sr]=null}};function gc(t){this._internalRoot=t}gc.prototype.unstable_scheduleHydration=function(t){if(t){var e=G_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Tr.length&&e!==0&&e<Tr[n].priority;n++);Tr.splice(n,0,t),n===0&&Y_(t)}};function Fp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function yc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function cv(){}function TS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Ru(o);i.call(d)}}var o=gw(e,r,t,0,null,!1,!1,"",cv);return t._reactRootContainer=o,t[sr]=o.current,oa(t.nodeType===8?t.parentNode:t),bs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Ru(c);u.call(d)}}var c=Mp(t,0,!1,null,null,!1,!1,"",cv);return t._reactRootContainer=c,t[sr]=c.current,oa(t.nodeType===8?t.parentNode:t),bs(function(){mc(e,c,n,r)}),c}function vc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Ru(o);u.call(c)}}mc(e,o,t,s)}else o=TS(n,e,t,s,r);return Ru(o)}W_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Po(e.pendingLanes);n!==0&&(ip(e,n|1),Lt(e,je()),!(ie&6)&&(Ci=je()+500,Xr()))}break;case 13:bs(function(){var r=ir(t,1);if(r!==null){var s=bt();gn(r,t,1,s)}}),Vp(t,1)}};op=function(t){if(t.tag===13){var e=ir(t,134217728);if(e!==null){var n=bt();gn(e,t,134217728,n)}Vp(t,134217728)}};K_=function(t){if(t.tag===13){var e=Vr(t),n=ir(t,e);if(n!==null){var r=bt();gn(n,t,e,r)}Vp(t,e)}};G_=function(){return ue};Q_=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};kh=function(t,e,n){switch(e){case"input":if(bh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=lc(r);if(!s)throw Error(F(90));N_(r),bh(r,s)}}}break;case"textarea":A_(t,n);break;case"select":e=n.value,e!=null&&fi(t,!!n.multiple,e,!1)}};D_=jp;L_=bs;var bS={usingClientEntryPoint:!1,Events:[Da,oi,lc,j_,O_,jp]},Eo={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IS={bundleType:Eo.bundleType,version:Eo.version,rendererPackageName:Eo.rendererPackageName,rendererConfig:Eo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:dr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=U_(t),t===null?null:t.stateNode},findFiberByHostInstance:Eo.findFiberByHostInstance||ES,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jl.isDisabled&&jl.supportsFiber)try{sc=jl.inject(IS),Nn=jl}catch{}}Wt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bS;Wt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Fp(e))throw Error(F(200));return wS(t,e,null,n)};Wt.createRoot=function(t,e){if(!Fp(t))throw Error(F(299));var n=!1,r="",s=yw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Mp(t,1,!1,null,null,n,!1,r,s),t[sr]=e.current,oa(t.nodeType===8?t.parentNode:t),new Up(e)};Wt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=U_(e),t=t===null?null:t.stateNode,t};Wt.flushSync=function(t){return bs(t)};Wt.hydrate=function(t,e,n){if(!yc(e))throw Error(F(200));return vc(null,t,e,!0,n)};Wt.hydrateRoot=function(t,e,n){if(!Fp(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=yw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=gw(e,null,t,1,n??null,s,!1,i,o),t[sr]=e.current,oa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new gc(e)};Wt.render=function(t,e,n){if(!yc(e))throw Error(F(200));return vc(null,t,e,!1,n)};Wt.unmountComponentAtNode=function(t){if(!yc(t))throw Error(F(40));return t._reactRootContainer?(bs(function(){vc(null,null,t,!1,function(){t._reactRootContainer=null,t[sr]=null})}),!0):!1};Wt.unstable_batchedUpdates=jp;Wt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!yc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return vc(t,e,n,!1,r)};Wt.version="18.3.1-next-f1338f8080-20240426";function vw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(vw)}catch(t){console.error(t)}}vw(),v_.exports=Wt;var NS=v_.exports,dv=NS;yh.createRoot=dv.createRoot,yh.hydrateRoot=dv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ma(){return ma=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ma.apply(this,arguments)}var Cr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cr||(Cr={}));const hv="popstate";function SS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return df("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:ju(s)}return PS(e,n,null,t)}function Oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function _w(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function AS(){return Math.random().toString(36).substr(2,8)}function fv(t,e){return{usr:t.state,key:t.key,idx:e}}function df(t,e,n,r){return n===void 0&&(n=null),ma({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:n,key:e&&e.key||r||AS()})}function ju(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function PS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=Cr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(ma({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){u=Cr.Pop;let C=f(),E=C==null?null:C-d;d=C,c&&c({action:u,location:T.location,delta:E})}function p(C,E){u=Cr.Push;let x=df(T.location,C,E);d=f()+1;let y=fv(x,d),S=T.createHref(x);try{o.pushState(y,"",S)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(S)}i&&c&&c({action:u,location:T.location,delta:1})}function w(C,E){u=Cr.Replace;let x=df(T.location,C,E);d=f();let y=fv(x,d),S=T.createHref(x);o.replaceState(y,"",S),i&&c&&c({action:u,location:T.location,delta:0})}function N(C){let E=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof C=="string"?C:ju(C);return x=x.replace(/ $/,"%20"),Oe(E,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,E)}let T={get action(){return u},get location(){return t(s,o)},listen(C){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(hv,g),c=C,()=>{s.removeEventListener(hv,g),c=null}},createHref(C){return e(s,C)},createURL:N,encodeLocation(C){let E=N(C);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:p,replace:w,go(C){return o.go(C)}};return T}var pv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(pv||(pv={}));function CS(t,e,n){return n===void 0&&(n="/"),kS(t,e,n)}function kS(t,e,n,r){let s=typeof e=="string"?Ki(e):e,i=zp(s.pathname||"/",n);if(i==null)return null;let o=xw(t);RS(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=qS(i);u=zS(o[c],d)}return u}function xw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Oe(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Fr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(Oe(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),xw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:US(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of ww(i.path))s(i,o,c)}),e}function ww(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=ww(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function RS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:FS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const jS=/^:[\w-]+$/,OS=3,DS=2,LS=1,MS=10,VS=-2,mv=t=>t==="*";function US(t,e){let n=t.split("/"),r=n.length;return n.some(mv)&&(r+=VS),e&&(r+=DS),n.filter(s=>!mv(s)).reduce((s,i)=>s+(jS.test(i)?OS:i===""?LS:MS),r)}function FS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function zS(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=$S({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Fr([i,g.pathname]),pathnameBase:GS(Fr([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=Fr([i,g.pathnameBase]))}return o}function $S(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=BS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:p,isOptional:w}=f;if(p==="*"){let T=u[g]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const N=u[g];return w&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function BS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),_w(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function qS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return _w(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function zp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function HS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ki(t):t;return{pathname:n?n.startsWith("/")?n:WS(n,e):e,search:QS(r),hash:YS(s)}}function WS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Qd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function KS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $p(t,e){let n=KS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Bp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ki(t):(s=ma({},t),Oe(!s.pathname||!s.pathname.includes("?"),Qd("?","pathname","search",s)),Oe(!s.pathname||!s.pathname.includes("#"),Qd("#","pathname","hash",s)),Oe(!s.search||!s.search.includes("#"),Qd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;s.pathname=p.join("/")}u=g>=0?e[g]:"/"}let c=HS(s,u),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),GS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),QS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,YS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function XS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Ew=["post","put","patch","delete"];new Set(Ew);const JS=["get",...Ew];new Set(JS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ga(){return ga=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ga.apply(this,arguments)}const qp=R.createContext(null),ZS=R.createContext(null),Jr=R.createContext(null),_c=R.createContext(null),hr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),Tw=R.createContext(null);function eA(t,e){let{relative:n}=e===void 0?{}:e;Gi()||Oe(!1);let{basename:r,navigator:s}=R.useContext(Jr),{hash:i,pathname:o,search:u}=Nw(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Fr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function Gi(){return R.useContext(_c)!=null}function Ds(){return Gi()||Oe(!1),R.useContext(_c).location}function bw(t){R.useContext(Jr).static||R.useLayoutEffect(t)}function on(){let{isDataRoute:t}=R.useContext(hr);return t?fA():tA()}function tA(){Gi()||Oe(!1);let t=R.useContext(qp),{basename:e,future:n,navigator:r}=R.useContext(Jr),{matches:s}=R.useContext(hr),{pathname:i}=Ds(),o=JSON.stringify($p(s,n.v7_relativeSplatPath)),u=R.useRef(!1);return bw(()=>{u.current=!0}),R.useCallback(function(d,f){if(f===void 0&&(f={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=Bp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Fr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,i,t])}function Iw(){let{matches:t}=R.useContext(hr),e=t[t.length-1];return e?e.params:{}}function Nw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Jr),{matches:s}=R.useContext(hr),{pathname:i}=Ds(),o=JSON.stringify($p(s,r.v7_relativeSplatPath));return R.useMemo(()=>Bp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function nA(t,e){return rA(t,e)}function rA(t,e,n,r){Gi()||Oe(!1);let{navigator:s}=R.useContext(Jr),{matches:i}=R.useContext(hr),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ds(),f;if(e){var g;let C=typeof e=="string"?Ki(e):e;c==="/"||(g=C.pathname)!=null&&g.startsWith(c)||Oe(!1),f=C}else f=d;let p=f.pathname||"/",w=p;if(c!=="/"){let C=c.replace(/^\//,"").split("/");w="/"+p.replace(/^\//,"").split("/").slice(C.length).join("/")}let N=CS(t,{pathname:w}),T=lA(N&&N.map(C=>Object.assign({},C,{params:Object.assign({},u,C.params),pathname:Fr([c,s.encodeLocation?s.encodeLocation(C.pathname).pathname:C.pathname]),pathnameBase:C.pathnameBase==="/"?c:Fr([c,s.encodeLocation?s.encodeLocation(C.pathnameBase).pathname:C.pathnameBase])})),i,n,r);return e&&T?R.createElement(_c.Provider,{value:{location:ga({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Cr.Pop}},T):T}function sA(){let t=hA(),e=XS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const iA=R.createElement(sA,null);class oA extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(hr.Provider,{value:this.props.routeContext},R.createElement(Tw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aA(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(qp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(hr.Provider,{value:e},r)}function lA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let f=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);f>=0||Oe(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:p,errors:w}=n,N=g.route.loader&&p[g.route.id]===void 0&&(!w||w[g.route.id]===void 0);if(g.route.lazy||N){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,p)=>{let w,N=!1,T=null,C=null;n&&(w=u&&g.route.id?u[g.route.id]:void 0,T=g.route.errorElement||iA,c&&(d<0&&p===0?(pA("route-fallback"),N=!0,C=null):d===p&&(N=!0,C=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,p+1)),x=()=>{let y;return w?y=T:N?y=C:g.route.Component?y=R.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=f,R.createElement(aA,{match:g,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?R.createElement(oA,{location:n.location,revalidation:n.revalidation,component:T,error:w,children:x(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):x()},null)}var Sw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Sw||{}),Aw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Aw||{});function uA(t){let e=R.useContext(qp);return e||Oe(!1),e}function cA(t){let e=R.useContext(ZS);return e||Oe(!1),e}function dA(t){let e=R.useContext(hr);return e||Oe(!1),e}function Pw(t){let e=dA(),n=e.matches[e.matches.length-1];return n.route.id||Oe(!1),n.route.id}function hA(){var t;let e=R.useContext(Tw),n=cA(),r=Pw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function fA(){let{router:t}=uA(Sw.UseNavigateStable),e=Pw(Aw.UseNavigateStable),n=R.useRef(!1);return bw(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ga({fromRouteId:e},i)))},[t,e])}const gv={};function pA(t,e,n){gv[t]||(gv[t]=!0)}function mA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function hf(t){let{to:e,replace:n,state:r,relative:s}=t;Gi()||Oe(!1);let{future:i,static:o}=R.useContext(Jr),{matches:u}=R.useContext(hr),{pathname:c}=Ds(),d=on(),f=Bp(e,$p(u,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(f);return R.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function ct(t){Oe(!1)}function gA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Cr.Pop,navigator:i,static:o=!1,future:u}=t;Gi()&&Oe(!1);let c=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:i,static:o,future:ga({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=Ki(r));let{pathname:f="/",search:g="",hash:p="",state:w=null,key:N="default"}=r,T=R.useMemo(()=>{let C=zp(f,c);return C==null?null:{location:{pathname:C,search:g,hash:p,state:w,key:N},navigationType:s}},[c,f,g,p,w,N,s]);return T==null?null:R.createElement(Jr.Provider,{value:d},R.createElement(_c.Provider,{children:n,value:T}))}function yA(t){let{children:e,location:n}=t;return nA(ff(e),n)}new Promise(()=>{});function ff(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,ff(r.props.children,i));return}r.type!==ct&&Oe(!1),!r.props.index||!r.props.children||Oe(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ff(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function pf(){return pf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},pf.apply(this,arguments)}function vA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function _A(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function xA(t,e){return t.button===0&&(!e||e==="_self")&&!_A(t)}function mf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function wA(t,e){let n=mf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const EA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],TA="6";try{window.__reactRouterVersion=TA}catch{}const bA="startTransition",yv=mI[bA];function IA(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=SS({window:s,v5Compat:!0}));let o=i.current,[u,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=R.useCallback(g=>{d&&yv?yv(()=>c(g)):c(g)},[c,d]);return R.useLayoutEffect(()=>o.listen(f),[o,f]),R.useEffect(()=>mA(r),[r]),R.createElement(gA,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const NA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,pe=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:f,viewTransition:g}=e,p=vA(e,EA),{basename:w}=R.useContext(Jr),N,T=!1;if(typeof d=="string"&&SA.test(d)&&(N=d,NA))try{let y=new URL(window.location.href),S=d.startsWith("//")?new URL(y.protocol+d):new URL(d),D=zp(S.pathname,w);S.origin===y.origin&&D!=null?d=D+S.search+S.hash:T=!0}catch{}let C=eA(d,{relative:s}),E=AA(d,{replace:o,state:u,target:c,preventScrollReset:f,relative:s,viewTransition:g});function x(y){r&&r(y),y.defaultPrevented||E(y)}return R.createElement("a",pf({},p,{href:N||C,onClick:T||i?r:x,ref:n,target:c}))});var vv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(vv||(vv={}));var _v;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(_v||(_v={}));function AA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=on(),d=Ds(),f=Nw(t,{relative:o});return R.useCallback(g=>{if(xA(g,n)){g.preventDefault();let p=r!==void 0?r:ju(d)===ju(f);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,f,r,s,n,t,i,o,u])}function PA(t){let e=R.useRef(mf(t)),n=R.useRef(!1),r=Ds(),s=R.useMemo(()=>wA(r.search,n.current?null:e.current),[r.search]),i=on(),o=R.useCallback((u,c)=>{const d=mf(typeof u=="function"?u(s):u);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var xv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},CA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},kw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let p=(u&15)<<2|d>>6,w=d&63;c||(w=64,o||(p=64)),r.push(n[f],n[g],n[p],n[w])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Cw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):CA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||g==null)throw new kA;const p=i<<2|u>>4;if(r.push(p),d!==64){const w=u<<4&240|d>>2;if(r.push(w),g!==64){const N=d<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class kA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const RA=function(t){const e=Cw(t);return kw.encodeByteArray(e,!0)},Ou=function(t){return RA(t).replace(/\./g,"")},Rw=function(t){try{return kw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OA=()=>jA().__FIREBASE_DEFAULTS__,DA=()=>{if(typeof process>"u"||typeof xv>"u")return;const t=xv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},LA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Rw(t[1]);return e&&JSON.parse(e)},xc=()=>{try{return OA()||DA()||LA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},jw=t=>{var e,n;return(n=(e=xc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Ow=t=>{const e=jw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Dw=()=>{var t;return(t=xc())===null||t===void 0?void 0:t.config},Lw=t=>{var e;return(e=xc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Ou(JSON.stringify(n)),Ou(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function VA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(vt())}function UA(){var t;const e=(t=xc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function zA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function $A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function BA(){const t=vt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function qA(){return!UA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Vw(){try{return typeof indexedDB=="object"}catch{return!1}}function Uw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function HA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA="FirebaseError";class En extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=WA,Object.setPrototypeOf(this,En.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ls.prototype.create)}}class Ls{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?KA(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new En(s,u,r)}}function KA(t,e){return t.replace(GA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const GA=/\{\$([^}]+)}/g;function QA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ya(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(wv(i)&&wv(o)){if(!ya(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function wv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ma(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ko(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ro(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function YA(t,e){const n=new XA(t,e);return n.subscribe.bind(n)}class XA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");JA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Yd),s.error===void 0&&(s.error=Yd),s.complete===void 0&&(s.complete=Yd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function JA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Yd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function we(t){return t&&t._delegate?t._delegate:t}class rn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new MA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(tP(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:eP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function eP(t){return t===as?void 0:t}function tP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new ZA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var re;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(re||(re={}));const rP={debug:re.DEBUG,verbose:re.VERBOSE,info:re.INFO,warn:re.WARN,error:re.ERROR,silent:re.SILENT},sP=re.INFO,iP={[re.DEBUG]:"log",[re.VERBOSE]:"log",[re.INFO]:"info",[re.WARN]:"warn",[re.ERROR]:"error"},oP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=iP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Hp{constructor(e){this.name=e,this._logLevel=sP,this._logHandler=oP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in re))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?rP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,re.DEBUG,...e),this._logHandler(this,re.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,re.VERBOSE,...e),this._logHandler(this,re.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,re.INFO,...e),this._logHandler(this,re.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,re.WARN,...e),this._logHandler(this,re.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,re.ERROR,...e),this._logHandler(this,re.ERROR,...e)}}const aP=(t,e)=>e.some(n=>t instanceof n);let Ev,Tv;function lP(){return Ev||(Ev=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function uP(){return Tv||(Tv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Fw=new WeakMap,gf=new WeakMap,zw=new WeakMap,Xd=new WeakMap,Wp=new WeakMap;function cP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Zn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Fw.set(n,t)}).catch(()=>{}),Wp.set(e,t),e}function dP(t){if(gf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});gf.set(t,e)}let yf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||zw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Zn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function hP(t){yf=t(yf)}function fP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Jd(this),e,...n);return zw.set(r,e.sort?e.sort():[e]),Zn(r)}:uP().includes(t)?function(...e){return t.apply(Jd(this),e),Zn(Fw.get(this))}:function(...e){return Zn(t.apply(Jd(this),e))}}function pP(t){return typeof t=="function"?fP(t):(t instanceof IDBTransaction&&dP(t),aP(t,lP())?new Proxy(t,yf):t)}function Zn(t){if(t instanceof IDBRequest)return cP(t);if(Xd.has(t))return Xd.get(t);const e=pP(t);return e!==t&&(Xd.set(t,e),Wp.set(e,t)),e}const Jd=t=>Wp.get(t);function wc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Zn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Zn(o.result),c.oldVersion,c.newVersion,Zn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}function Zd(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Zn(n).then(()=>{})}const mP=["get","getKey","getAll","getAllKeys","count"],gP=["put","add","delete","clear"],eh=new Map;function bv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(eh.get(e))return eh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=gP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||mP.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return eh.set(e,i),i}hP(t=>({...t,get:(e,n,r)=>bv(e,n)||t.get(e,n,r),has:(e,n)=>!!bv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(vP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function vP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vf="@firebase/app",Iv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ar=new Hp("@firebase/app"),_P="@firebase/app-compat",xP="@firebase/analytics-compat",wP="@firebase/analytics",EP="@firebase/app-check-compat",TP="@firebase/app-check",bP="@firebase/auth",IP="@firebase/auth-compat",NP="@firebase/database",SP="@firebase/data-connect",AP="@firebase/database-compat",PP="@firebase/functions",CP="@firebase/functions-compat",kP="@firebase/installations",RP="@firebase/installations-compat",jP="@firebase/messaging",OP="@firebase/messaging-compat",DP="@firebase/performance",LP="@firebase/performance-compat",MP="@firebase/remote-config",VP="@firebase/remote-config-compat",UP="@firebase/storage",FP="@firebase/storage-compat",zP="@firebase/firestore",$P="@firebase/vertexai-preview",BP="@firebase/firestore-compat",qP="firebase",HP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _f="[DEFAULT]",WP={[vf]:"fire-core",[_P]:"fire-core-compat",[wP]:"fire-analytics",[xP]:"fire-analytics-compat",[TP]:"fire-app-check",[EP]:"fire-app-check-compat",[bP]:"fire-auth",[IP]:"fire-auth-compat",[NP]:"fire-rtdb",[SP]:"fire-data-connect",[AP]:"fire-rtdb-compat",[PP]:"fire-fn",[CP]:"fire-fn-compat",[kP]:"fire-iid",[RP]:"fire-iid-compat",[jP]:"fire-fcm",[OP]:"fire-fcm-compat",[DP]:"fire-perf",[LP]:"fire-perf-compat",[MP]:"fire-rc",[VP]:"fire-rc-compat",[UP]:"fire-gcs",[FP]:"fire-gcs-compat",[zP]:"fire-fst",[BP]:"fire-fst-compat",[$P]:"fire-vertex","fire-js":"fire-js",[qP]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Du=new Map,KP=new Map,xf=new Map;function Nv(t,e){try{t.container.addComponent(e)}catch(n){ar.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function _n(t){const e=t.name;if(xf.has(e))return ar.debug(`There were multiple attempts to register component ${e}.`),!1;xf.set(e,t);for(const n of Du.values())Nv(n,t);for(const n of KP.values())Nv(n,t);return!0}function Ms(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function hn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},zr=new Ls("app","Firebase",GP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new rn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw zr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=HP;function $w(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:_f,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw zr.create("bad-app-name",{appName:String(s)});if(n||(n=Dw()),!n)throw zr.create("no-options");const i=Du.get(s);if(i){if(ya(n,i.options)&&ya(r,i.config))return i;throw zr.create("duplicate-app",{appName:s})}const o=new nP(s);for(const c of xf.values())o.addComponent(c);const u=new QP(n,r,o);return Du.set(s,u),u}function Ec(t=_f){const e=Du.get(t);if(!e&&t===_f&&Dw())return $w();if(!e)throw zr.create("no-app",{appName:t});return e}function Mt(t,e,n){var r;let s=(r=WP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ar.warn(u.join(" "));return}_n(new rn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP="firebase-heartbeat-database",XP=1,va="firebase-heartbeat-store";let th=null;function Bw(){return th||(th=wc(YP,XP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(va)}catch(n){console.warn(n)}}}}).catch(t=>{throw zr.create("idb-open",{originalErrorMessage:t.message})})),th}async function JP(t){try{const n=(await Bw()).transaction(va),r=await n.objectStore(va).get(qw(t));return await n.done,r}catch(e){if(e instanceof En)ar.warn(e.message);else{const n=zr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ar.warn(n.message)}}}async function Sv(t,e){try{const r=(await Bw()).transaction(va,"readwrite");await r.objectStore(va).put(e,qw(t)),await r.done}catch(n){if(n instanceof En)ar.warn(n.message);else{const r=zr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ar.warn(r.message)}}}function qw(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZP=1024,eC=30*24*60*60*1e3;class tC{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new rC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Av();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=eC}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ar.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Av(),{heartbeatsToSend:r,unsentEntries:s}=nC(this._heartbeatsCache.heartbeats),i=Ou(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ar.warn(n),""}}}function Av(){return new Date().toISOString().substring(0,10)}function nC(t,e=ZP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Pv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Pv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class rC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Vw()?Uw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await JP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Sv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Pv(t){return Ou(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){_n(new rn("platform-logger",e=>new yP(e),"PRIVATE")),_n(new rn("heartbeat",e=>new tC(e),"PRIVATE")),Mt(vf,Iv,t),Mt(vf,Iv,"esm2017"),Mt("fire-js","")}sC("");function Kp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function Hw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const iC=Hw,Ww=new Ls("auth","Firebase",Hw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lu=new Hp("@firebase/auth");function oC(t,...e){Lu.logLevel<=re.WARN&&Lu.warn(`Auth (${Vs}): ${t}`,...e)}function Jl(t,...e){Lu.logLevel<=re.ERROR&&Lu.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t,...e){throw Qp(t,...e)}function yn(t,...e){return Qp(t,...e)}function Gp(t,e,n){const r=Object.assign(Object.assign({},iC()),{[e]:n});return new Ls("auth","Firebase",r).create(e,{appName:t.name})}function er(t){return Gp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function aC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&sn(t,"argument-error"),Gp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Qp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Ww.create(t,...e)}function K(t,e,...n){if(!t)throw Qp(e,...n)}function Qn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Jl(e),new Error(e)}function lr(t,e){t||Qn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function lC(){return Cv()==="http:"||Cv()==="https:"}function Cv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lC()||zA()||"connection"in navigator)?navigator.onLine:!0}function cC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Va{constructor(e,n){this.shortDelay=e,this.longDelay=n,lr(n>e,"Short delay should be less than long delay!"),this.isMobile=VA()||$A()}get(){return uC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yp(t,e){lr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Qn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Qn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Qn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC=new Va(3e4,6e4);function fr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function jn(t,e,n,r,s={}){return Gw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=Ma(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return FA()||(d.referrerPolicy="no-referrer"),Kw.fetch()(Qw(t,t.config.apiHost,n,u),d)})}async function Gw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},dC),e);try{const s=new pC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ol(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ol(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ol(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ol(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gp(t,f,d);sn(t,f)}}catch(s){if(s instanceof En)throw s;sn(t,"network-request-failed",{message:String(s)})}}async function Ua(t,e,n,r,s={}){const i=await jn(t,e,n,r,s);return"mfaPendingCredential"in i&&sn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Qw(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Yp(t.config,s):`${t.config.apiScheme}://${s}`}function fC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class pC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(yn(this.auth,"network-request-failed")),hC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ol(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=yn(t,e,r);return s.customData._tokenResponse=n,s}function kv(t){return t!==void 0&&t.enterprise!==void 0}class mC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return fC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function gC(t,e){return jn(t,"GET","/v2/recaptchaConfig",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yC(t,e){return jn(t,"POST","/v1/accounts:delete",e)}async function Yw(t,e){return jn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ko(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function vC(t,e=!1){const n=we(t),r=await n.getIdToken(e),s=Xp(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Ko(nh(s.auth_time)),issuedAtTime:Ko(nh(s.iat)),expirationTime:Ko(nh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function nh(t){return Number(t)*1e3}function Xp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Jl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Rw(n);return s?JSON.parse(s):(Jl("Failed to decode base64 JWT payload"),null)}catch(s){return Jl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function Rv(t){const e=Xp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ki(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof En&&_C(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function _C({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ko(this.lastLoginAt),this.creationTime=Ko(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mu(t){var e;const n=t.auth,r=await t.getIdToken(),s=await ki(t,Yw(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Xw(i.providerUserInfo):[],u=EC(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new Ef(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function wC(t){const e=we(t);await Mu(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function EC(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Xw(t){return t.map(e=>{var{providerId:n}=e,r=Kp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e){const n=await Gw(t,{},async()=>{const r=Ma({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Qw(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Kw.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function bC(t,e){return jn(t,"POST","/v2/accounts:revokeToken",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _i{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Rv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=Rv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await TC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new _i;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new _i,this.toJSON())}_performRefresh(){return Qn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Yn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Kp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new xC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Ef(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ki(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return vC(this,e)}reload(){return wC(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Yn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Mu(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(hn(this.auth.app))return Promise.reject(er(this.auth));const e=await this.getIdToken();return await ki(this,yC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,w=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(u=n.tenantId)!==null&&u!==void 0?u:void 0,C=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:S,isAnonymous:D,providerData:V,stsTokenManager:I}=n;K(y&&I,e,"internal-error");const v=_i.fromJSON(this.name,I);K(typeof y=="string",e,"internal-error"),xr(g,e.name),xr(p,e.name),K(typeof S=="boolean",e,"internal-error"),K(typeof D=="boolean",e,"internal-error"),xr(w,e.name),xr(N,e.name),xr(T,e.name),xr(C,e.name),xr(E,e.name),xr(x,e.name);const A=new Yn({uid:y,auth:e,email:p,emailVerified:S,displayName:g,isAnonymous:D,photoURL:N,phoneNumber:w,tenantId:T,stsTokenManager:v,createdAt:E,lastLoginAt:x});return V&&Array.isArray(V)&&(A.providerData=V.map(b=>Object.assign({},b))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,n,r=!1){const s=new _i;s.updateFromServerResponse(n);const i=new Yn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Mu(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Xw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new _i;u.updateFromIdToken(r);const c=new Yn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Ef(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jv=new Map;function Xn(t){lr(t instanceof Function,"Expected a class definition");let e=jv.get(t);return e?(lr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,jv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Jw.type="NONE";const Ov=Jw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zl(t,e,n){return`firebase:${t}:${e}:${n}`}class xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Zl(this.userKey,s.apiKey,i),this.fullPersistenceKey=Zl("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Yn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xi(Xn(Ov),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Xn(Ov);const o=Zl(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Yn._fromJSON(e,f);d!==i&&(u=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new xi(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(nE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Zw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(sE(e))return"Blackberry";if(iE(e))return"Webos";if(eE(e))return"Safari";if((e.includes("chrome/")||tE(e))&&!e.includes("edge/"))return"Chrome";if(rE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Zw(t=vt()){return/firefox\//i.test(t)}function eE(t=vt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function tE(t=vt()){return/crios\//i.test(t)}function nE(t=vt()){return/iemobile/i.test(t)}function rE(t=vt()){return/android/i.test(t)}function sE(t=vt()){return/blackberry/i.test(t)}function iE(t=vt()){return/webos/i.test(t)}function Jp(t=vt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function IC(t=vt()){var e;return Jp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function NC(){return BA()&&document.documentMode===10}function oE(t=vt()){return Jp(t)||rE(t)||iE(t)||sE(t)||/windows phone/i.test(t)||nE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aE(t,e=[]){let n;switch(t){case"Browser":n=Dv(vt());break;case"Worker":n=`${Dv(vt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AC(t,e={}){return jn(t,"GET","/v2/passwordPolicy",fr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=6;class CC{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:PC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Lv(this),this.idTokenSubscription=new Lv(this),this.beforeStateQueue=new SC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ww,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Xn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Yw(this,{idToken:e}),r=await Yn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(hn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Mu(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(hn(this.app))return Promise.reject(er(this));const n=e?we(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return hn(this.app)?Promise.reject(er(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return hn(this.app)?Promise.reject(er(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Xn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AC(this),n=new CC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ls("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await bC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Xn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[Xn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=aE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&oC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function pr(t){return we(t)}class Lv{constructor(e){this.auth=e,this.observer=null,this.addObserver=YA(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function RC(t){Tc=t}function lE(t){return Tc.loadJS(t)}function jC(){return Tc.recaptchaEnterpriseScript}function OC(){return Tc.gapiScript}function DC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const LC="recaptcha-enterprise",MC="NO_RECAPTCHA";class VC{constructor(e){this.type=LC,this.auth=pr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{gC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new mC(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;kv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(MC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&kv(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=jC();c.length!==0&&(c+=u),lE(c).then(()=>{s(u,i,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function Mv(t,e,n,r=!1){const s=new VC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Vu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Mv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Mv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UC(t,e){const n=Ms(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(ya(i,e??{}))return s;sn(s,"already-initialized")}return n.initialize({options:e})}function FC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Xn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function zC(t,e,n){const r=pr(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=uE(e),{host:o,port:u}=$C(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),BC()}function uE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function $C(t){const e=uE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Vv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Vv(o)}}}function Vv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function BC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Qn("not implemented")}_getIdTokenResponse(e){return Qn("not implemented")}_linkToIdToken(e,n){return Qn("not implemented")}_getReauthenticationResolver(e){return Qn("not implemented")}}async function qC(t,e){return jn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){return Ua(t,"POST","/v1/accounts:signInWithPassword",fr(t,e))}async function WC(t,e){return jn(t,"POST","/v1/accounts:sendOobCode",fr(t,e))}async function KC(t,e){return WC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GC(t,e){return Ua(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}async function QC(t,e){return Ua(t,"POST","/v1/accounts:signInWithEmailLink",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a extends Zp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new _a(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new _a(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vu(e,n,"signInWithPassword",HC);case"emailLink":return GC(e,{email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Vu(e,r,"signUpPassword",qC);case"emailLink":return QC(e,{idToken:n,email:this._email,oobCode:this._password});default:sn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wi(t,e){return Ua(t,"POST","/v1/accounts:signInWithIdp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YC="http://localhost";class Is extends Zp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):sn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Kp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return wi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,wi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,wi(e,n)}buildRequest(){const e={requestUri:YC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ma(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JC(t){const e=ko(Ro(t)).link,n=e?ko(Ro(e)).deep_link_id:null,r=ko(Ro(t)).deep_link_id;return(r?ko(Ro(r)).link:null)||r||n||e||t}class em{constructor(e){var n,r,s,i,o,u;const c=ko(Ro(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=XC((s=c.mode)!==null&&s!==void 0?s:null);K(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=JC(e);try{return new em(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,n){return _a._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=em.parseLink(n);return K(r,"argument-error"),_a._fromEmailAndCode(e,r.code,r.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fa extends tm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Fa{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ir.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn extends Fa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:Wn.PROVIDER_ID,signInMethod:Wn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wn.credentialFromTaggedObject(e)}static credentialFromError(e){return Wn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Wn.credential(n,r)}catch{return null}}}Wn.GOOGLE_SIGN_IN_METHOD="google.com";Wn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr extends Fa{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:Nr.PROVIDER_ID,signInMethod:Nr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Nr.credentialFromTaggedObject(e)}static credentialFromError(e){return Nr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Nr.credential(e.oauthAccessToken)}catch{return null}}}Nr.GITHUB_SIGN_IN_METHOD="github.com";Nr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr extends Fa{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:Sr.PROVIDER_ID,signInMethod:Sr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Sr.credentialFromTaggedObject(e)}static credentialFromError(e){return Sr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Sr.credential(n,r)}catch{return null}}}Sr.TWITTER_SIGN_IN_METHOD="twitter.com";Sr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZC(t,e){return Ua(t,"POST","/v1/accounts:signUp",fr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Yn._fromIdTokenResponse(e,r,s),o=Uv(r);return new Ns({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Uv(r);return new Ns({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Uv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu extends En{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Uu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Uu(e,n,r,s)}}function cE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Uu._fromErrorAndOperation(t,i,e,r):i})}async function ek(t,e,n=!1){const r=await ki(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ns._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e,n=!1){const{auth:r}=t;if(hn(r.app))return Promise.reject(er(r));const s="reauthenticate";try{const i=await ki(t,cE(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Xp(i.idToken);K(o,r,"internal-error");const{sub:u}=o;return K(t.uid===u,r,"user-mismatch"),Ns._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&sn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dE(t,e,n=!1){if(hn(t.app))return Promise.reject(er(t));const r="signIn",s=await cE(t,r,e),i=await Ns._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function nk(t,e){return dE(pr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hE(t){const e=pr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rk(t,e,n){const r=pr(t);await Vu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",KC)}async function sk(t,e,n){if(hn(t.app))return Promise.reject(er(t));const r=pr(t),o=await Vu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZC).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&hE(t),c}),u=await Ns._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function ik(t,e,n){return hn(t.app)?Promise.reject(er(t)):nk(we(t),Qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&hE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ok(t,e){return jn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=we(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ki(r,ok(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function lk(t,e,n,r){return we(t).onIdTokenChanged(e,n,r)}function uk(t,e,n){return we(t).beforeAuthStateChanged(e,n)}function ck(t,e,n,r){return we(t).onAuthStateChanged(e,n,r)}function dk(t){return we(t).signOut()}const Fu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Fu,"1"),this.storage.removeItem(Fu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hk=1e3,fk=10;class pE extends fE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=oE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);NC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,fk):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},hk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}pE.type="LOCAL";const pk=pE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mE extends fE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}mE.type="SESSION";const gE=mE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new bc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await mk(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}bc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=nm("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(p.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(){return window}function yk(t){An().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(){return typeof An().WorkerGlobalScope<"u"&&typeof An().importScripts=="function"}async function vk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function _k(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function xk(){return yE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vE="firebaseLocalStorageDb",wk=1,zu="firebaseLocalStorage",_E="fbase_key";class za{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ic(t,e){return t.transaction([zu],e?"readwrite":"readonly").objectStore(zu)}function Ek(){const t=indexedDB.deleteDatabase(vE);return new za(t).toPromise()}function Tf(){const t=indexedDB.open(vE,wk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zu,{keyPath:_E})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zu)?e(r):(r.close(),await Ek(),e(await Tf()))})})}async function Fv(t,e,n){const r=Ic(t,!0).put({[_E]:e,value:n});return new za(r).toPromise()}async function Tk(t,e){const n=Ic(t,!1).get(e),r=await new za(n).toPromise();return r===void 0?null:r.value}function zv(t,e){const n=Ic(t,!0).delete(e);return new za(n).toPromise()}const bk=800,Ik=3;class xE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Tf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ik)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return yE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=bc._getInstance(xk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await vk(),!this.activeServiceWorker)return;this.sender=new gk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||_k()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Tf();return await Fv(e,Fu,"1"),await zv(e,Fu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Tk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ic(s,!1).getAll();return new za(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),bk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}xE.type="LOCAL";const Nk=xE;new Va(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wE(t,e){return e?Xn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm extends Zp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return wi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return wi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return wi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Sk(t){return dE(t.auth,new rm(t),t.bypassAuthState)}function Ak(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),tk(n,new rm(t),t.bypassAuthState)}async function Pk(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),ek(n,new rm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Sk;case"linkViaPopup":case"linkViaRedirect":return Pk;case"reauthViaPopup":case"reauthViaRedirect":return Ak;default:sn(this.auth,"internal-error")}}resolve(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){lr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ck=new Va(2e3,1e4);async function kk(t,e,n){if(hn(t.app))return Promise.reject(yn(t,"operation-not-supported-in-this-environment"));const r=pr(t);aC(t,e,tm);const s=wE(r,n);return new hs(r,"signInViaPopup",e,s).executeNotNull()}class hs extends EE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){lr(this.filter.length===1,"Popup operations only handle one event");const e=nm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ck.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rk="pendingRedirect",eu=new Map;class jk extends EE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=eu.get(this.auth._key());if(!e){try{const r=await Ok(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}eu.set(this.auth._key(),e)}return this.bypassAuthState||eu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Ok(t,e){const n=Mk(e),r=Lk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Dk(t,e){eu.set(t._key(),e)}function Lk(t){return Xn(t._redirectPersistence)}function Mk(t){return Zl(Rk,t.config.apiKey,t.name)}async function Vk(t,e,n=!1){if(hn(t.app))return Promise.reject(er(t));const r=pr(t),s=wE(r,e),o=await new jk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uk=10*60*1e3;class Fk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!zk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!TE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(yn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Uk&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function TE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function zk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return TE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $k(t,e={}){return jn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,qk=/^https?/;async function Hk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await $k(t);for(const n of e)try{if(Wk(n))return}catch{}sn(t,"unauthorized-domain")}function Wk(t){const e=wf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!qk.test(n))return!1;if(Bk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Va(3e4,6e4);function Bv(){const t=An().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Gk(t){return new Promise((e,n)=>{var r,s,i;function o(){Bv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Bv(),n(yn(t,"network-request-failed"))},timeout:Kk.get()})}if(!((s=(r=An().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=An().gapi)===null||i===void 0)&&i.load)o();else{const u=DC("iframefcb");return An()[u]=()=>{gapi.load?o():n(yn(t,"network-request-failed"))},lE(`${OC()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw tu=null,e})}let tu=null;function Qk(t){return tu=tu||Gk(t),tu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk=new Va(5e3,15e3),Xk="__/auth/iframe",Jk="emulator/auth/iframe",Zk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},e2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function t2(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Yp(e,Jk):`https://${t.config.authDomain}/${Xk}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=e2.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ma(r).slice(1)}`}async function n2(t){const e=await Qk(t),n=An().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:t2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Zk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=yn(t,"network-request-failed"),u=An().setTimeout(()=>{i(o)},Yk.get());function c(){An().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},s2=500,i2=600,o2="_blank",a2="http://localhost";class qv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function l2(t,e,n,r=s2,s=i2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},r2),{width:r.toString(),height:s.toString(),top:i,left:o}),d=vt().toLowerCase();n&&(u=tE(d)?o2:n),Zw(d)&&(e=e||a2,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[w,N])=>`${p}${w}=${N},`,"");if(IC(d)&&u!=="_self")return u2(e||"",u),new qv(null);const g=window.open(e||"",u,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new qv(g)}function u2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="__/auth/handler",d2="emulator/auth/handler",h2=encodeURIComponent("fac");async function Hv(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof tm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",QA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof Fa){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),d=c?`#${h2}=${encodeURIComponent(c)}`:"";return`${f2(t)}?${Ma(u).slice(1)}${d}`}function f2({config:t}){return t.emulator?Yp(t,d2):`https://${t.authDomain}/${c2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="webStorageSupport";class p2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=gE,this._completeRedirectFn=Vk,this._overrideRedirectResult=Dk}async _openPopup(e,n,r,s){var i;lr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await Hv(e,n,r,wf(),s);return l2(e,o,nm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await Hv(e,n,r,wf(),s);return yk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(lr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await n2(e),r=new Fk(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(rh,{type:rh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[rh];o!==void 0&&n(!!o),sn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Hk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return oE()||eE()||Jp()}}const m2=p2;var Wv="@firebase/auth",Kv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function v2(t){_n(new rn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:aE(t)},d=new kC(r,s,i,c);return FC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),_n(new rn("auth-internal",e=>{const n=pr(e.getProvider("auth").getImmediate());return(r=>new g2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(Wv,Kv,y2(t)),Mt(Wv,Kv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _2=5*60,x2=Lw("authIdTokenMaxAge")||_2;let Gv=null;const w2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>x2)return;const s=n==null?void 0:n.token;Gv!==s&&(Gv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function E2(t=Ec()){const e=Ms(t,"auth");if(e.isInitialized())return e.getImmediate();const n=UC(t,{popupRedirectResolver:m2,persistence:[Nk,pk,gE]}),r=Lw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=w2(i.toString());uk(n,o,()=>o(n.currentUser)),lk(n,u=>o(u))}}const s=jw("auth");return s&&zC(n,`http://${s}`),n}function T2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}RC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=yn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",T2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});v2("Browser");var b2="firebase",I2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt(b2,I2,"app");var Qv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,bE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,v){function A(){}A.prototype=v.prototype,I.D=v.prototype,I.prototype=new A,I.prototype.constructor=I,I.C=function(b,k,j){for(var P=Array(arguments.length-2),He=2;He<arguments.length;He++)P[He-2]=arguments[He];return v.prototype[k].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,v,A){A||(A=0);var b=Array(16);if(typeof v=="string")for(var k=0;16>k;++k)b[k]=v.charCodeAt(A++)|v.charCodeAt(A++)<<8|v.charCodeAt(A++)<<16|v.charCodeAt(A++)<<24;else for(k=0;16>k;++k)b[k]=v[A++]|v[A++]<<8|v[A++]<<16|v[A++]<<24;v=I.g[0],A=I.g[1],k=I.g[2];var j=I.g[3],P=v+(j^A&(k^j))+b[0]+3614090360&4294967295;v=A+(P<<7&4294967295|P>>>25),P=j+(k^v&(A^k))+b[1]+3905402710&4294967295,j=v+(P<<12&4294967295|P>>>20),P=k+(A^j&(v^A))+b[2]+606105819&4294967295,k=j+(P<<17&4294967295|P>>>15),P=A+(v^k&(j^v))+b[3]+3250441966&4294967295,A=k+(P<<22&4294967295|P>>>10),P=v+(j^A&(k^j))+b[4]+4118548399&4294967295,v=A+(P<<7&4294967295|P>>>25),P=j+(k^v&(A^k))+b[5]+1200080426&4294967295,j=v+(P<<12&4294967295|P>>>20),P=k+(A^j&(v^A))+b[6]+2821735955&4294967295,k=j+(P<<17&4294967295|P>>>15),P=A+(v^k&(j^v))+b[7]+4249261313&4294967295,A=k+(P<<22&4294967295|P>>>10),P=v+(j^A&(k^j))+b[8]+1770035416&4294967295,v=A+(P<<7&4294967295|P>>>25),P=j+(k^v&(A^k))+b[9]+2336552879&4294967295,j=v+(P<<12&4294967295|P>>>20),P=k+(A^j&(v^A))+b[10]+4294925233&4294967295,k=j+(P<<17&4294967295|P>>>15),P=A+(v^k&(j^v))+b[11]+2304563134&4294967295,A=k+(P<<22&4294967295|P>>>10),P=v+(j^A&(k^j))+b[12]+1804603682&4294967295,v=A+(P<<7&4294967295|P>>>25),P=j+(k^v&(A^k))+b[13]+4254626195&4294967295,j=v+(P<<12&4294967295|P>>>20),P=k+(A^j&(v^A))+b[14]+2792965006&4294967295,k=j+(P<<17&4294967295|P>>>15),P=A+(v^k&(j^v))+b[15]+1236535329&4294967295,A=k+(P<<22&4294967295|P>>>10),P=v+(k^j&(A^k))+b[1]+4129170786&4294967295,v=A+(P<<5&4294967295|P>>>27),P=j+(A^k&(v^A))+b[6]+3225465664&4294967295,j=v+(P<<9&4294967295|P>>>23),P=k+(v^A&(j^v))+b[11]+643717713&4294967295,k=j+(P<<14&4294967295|P>>>18),P=A+(j^v&(k^j))+b[0]+3921069994&4294967295,A=k+(P<<20&4294967295|P>>>12),P=v+(k^j&(A^k))+b[5]+3593408605&4294967295,v=A+(P<<5&4294967295|P>>>27),P=j+(A^k&(v^A))+b[10]+38016083&4294967295,j=v+(P<<9&4294967295|P>>>23),P=k+(v^A&(j^v))+b[15]+3634488961&4294967295,k=j+(P<<14&4294967295|P>>>18),P=A+(j^v&(k^j))+b[4]+3889429448&4294967295,A=k+(P<<20&4294967295|P>>>12),P=v+(k^j&(A^k))+b[9]+568446438&4294967295,v=A+(P<<5&4294967295|P>>>27),P=j+(A^k&(v^A))+b[14]+3275163606&4294967295,j=v+(P<<9&4294967295|P>>>23),P=k+(v^A&(j^v))+b[3]+4107603335&4294967295,k=j+(P<<14&4294967295|P>>>18),P=A+(j^v&(k^j))+b[8]+1163531501&4294967295,A=k+(P<<20&4294967295|P>>>12),P=v+(k^j&(A^k))+b[13]+2850285829&4294967295,v=A+(P<<5&4294967295|P>>>27),P=j+(A^k&(v^A))+b[2]+4243563512&4294967295,j=v+(P<<9&4294967295|P>>>23),P=k+(v^A&(j^v))+b[7]+1735328473&4294967295,k=j+(P<<14&4294967295|P>>>18),P=A+(j^v&(k^j))+b[12]+2368359562&4294967295,A=k+(P<<20&4294967295|P>>>12),P=v+(A^k^j)+b[5]+4294588738&4294967295,v=A+(P<<4&4294967295|P>>>28),P=j+(v^A^k)+b[8]+2272392833&4294967295,j=v+(P<<11&4294967295|P>>>21),P=k+(j^v^A)+b[11]+1839030562&4294967295,k=j+(P<<16&4294967295|P>>>16),P=A+(k^j^v)+b[14]+4259657740&4294967295,A=k+(P<<23&4294967295|P>>>9),P=v+(A^k^j)+b[1]+2763975236&4294967295,v=A+(P<<4&4294967295|P>>>28),P=j+(v^A^k)+b[4]+1272893353&4294967295,j=v+(P<<11&4294967295|P>>>21),P=k+(j^v^A)+b[7]+4139469664&4294967295,k=j+(P<<16&4294967295|P>>>16),P=A+(k^j^v)+b[10]+3200236656&4294967295,A=k+(P<<23&4294967295|P>>>9),P=v+(A^k^j)+b[13]+681279174&4294967295,v=A+(P<<4&4294967295|P>>>28),P=j+(v^A^k)+b[0]+3936430074&4294967295,j=v+(P<<11&4294967295|P>>>21),P=k+(j^v^A)+b[3]+3572445317&4294967295,k=j+(P<<16&4294967295|P>>>16),P=A+(k^j^v)+b[6]+76029189&4294967295,A=k+(P<<23&4294967295|P>>>9),P=v+(A^k^j)+b[9]+3654602809&4294967295,v=A+(P<<4&4294967295|P>>>28),P=j+(v^A^k)+b[12]+3873151461&4294967295,j=v+(P<<11&4294967295|P>>>21),P=k+(j^v^A)+b[15]+530742520&4294967295,k=j+(P<<16&4294967295|P>>>16),P=A+(k^j^v)+b[2]+3299628645&4294967295,A=k+(P<<23&4294967295|P>>>9),P=v+(k^(A|~j))+b[0]+4096336452&4294967295,v=A+(P<<6&4294967295|P>>>26),P=j+(A^(v|~k))+b[7]+1126891415&4294967295,j=v+(P<<10&4294967295|P>>>22),P=k+(v^(j|~A))+b[14]+2878612391&4294967295,k=j+(P<<15&4294967295|P>>>17),P=A+(j^(k|~v))+b[5]+4237533241&4294967295,A=k+(P<<21&4294967295|P>>>11),P=v+(k^(A|~j))+b[12]+1700485571&4294967295,v=A+(P<<6&4294967295|P>>>26),P=j+(A^(v|~k))+b[3]+2399980690&4294967295,j=v+(P<<10&4294967295|P>>>22),P=k+(v^(j|~A))+b[10]+4293915773&4294967295,k=j+(P<<15&4294967295|P>>>17),P=A+(j^(k|~v))+b[1]+2240044497&4294967295,A=k+(P<<21&4294967295|P>>>11),P=v+(k^(A|~j))+b[8]+1873313359&4294967295,v=A+(P<<6&4294967295|P>>>26),P=j+(A^(v|~k))+b[15]+4264355552&4294967295,j=v+(P<<10&4294967295|P>>>22),P=k+(v^(j|~A))+b[6]+2734768916&4294967295,k=j+(P<<15&4294967295|P>>>17),P=A+(j^(k|~v))+b[13]+1309151649&4294967295,A=k+(P<<21&4294967295|P>>>11),P=v+(k^(A|~j))+b[4]+4149444226&4294967295,v=A+(P<<6&4294967295|P>>>26),P=j+(A^(v|~k))+b[11]+3174756917&4294967295,j=v+(P<<10&4294967295|P>>>22),P=k+(v^(j|~A))+b[2]+718787259&4294967295,k=j+(P<<15&4294967295|P>>>17),P=A+(j^(k|~v))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+v&4294967295,I.g[1]=I.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,v){v===void 0&&(v=I.length);for(var A=v-this.blockSize,b=this.B,k=this.h,j=0;j<v;){if(k==0)for(;j<=A;)s(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<v;)if(b[k++]=I.charCodeAt(j++),k==this.blockSize){s(this,b),k=0;break}}else for(;j<v;)if(b[k++]=I[j++],k==this.blockSize){s(this,b),k=0;break}}this.h=k,this.o+=v},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var v=1;v<I.length-8;++v)I[v]=0;var A=8*this.o;for(v=I.length-8;v<I.length;++v)I[v]=A&255,A/=256;for(this.u(I),I=Array(16),v=A=0;4>v;++v)for(var b=0;32>b;b+=8)I[A++]=this.g[v]>>>b&255;return I};function i(I,v){var A=u;return Object.prototype.hasOwnProperty.call(A,I)?A[I]:A[I]=v(I)}function o(I,v){this.h=v;for(var A=[],b=!0,k=I.length-1;0<=k;k--){var j=I[k]|0;b&&j==v||(A[k]=j,b=!1)}this.g=A}var u={};function c(I){return-128<=I&&128>I?i(I,function(v){return new o([v|0],0>v?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return C(d(-I));for(var v=[],A=1,b=0;I>=A;b++)v[b]=I/A|0,A*=4294967296;return new o(v,0)}function f(I,v){if(I.length==0)throw Error("number format error: empty string");if(v=v||10,2>v||36<v)throw Error("radix out of range: "+v);if(I.charAt(0)=="-")return C(f(I.substring(1),v));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=d(Math.pow(v,8)),b=g,k=0;k<I.length;k+=8){var j=Math.min(8,I.length-k),P=parseInt(I.substring(k,k+j),v);8>j?(j=d(Math.pow(v,j)),b=b.j(j).add(d(P))):(b=b.j(A),b=b.add(d(P)))}return b}var g=c(0),p=c(1),w=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-C(this).m();for(var I=0,v=1,A=0;A<this.g.length;A++){var b=this.i(A);I+=(0<=b?b:4294967296+b)*v,v*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(T(this))return"-"+C(this).toString(I);for(var v=d(Math.pow(I,6)),A=this,b="";;){var k=S(A,v).g;A=E(A,k.j(v));var j=((0<A.g.length?A.g[0]:A.h)>>>0).toString(I);if(A=k,N(A))return j+b;for(;6>j.length;)j="0"+j;b=j+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var v=0;v<I.g.length;v++)if(I.g[v]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=E(this,I),T(I)?-1:N(I)?0:1};function C(I){for(var v=I.g.length,A=[],b=0;b<v;b++)A[b]=~I.g[b];return new o(A,~I.h).add(p)}t.abs=function(){return T(this)?C(this):this},t.add=function(I){for(var v=Math.max(this.g.length,I.g.length),A=[],b=0,k=0;k<=v;k++){var j=b+(this.i(k)&65535)+(I.i(k)&65535),P=(j>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);b=P>>>16,j&=65535,P&=65535,A[k]=P<<16|j}return new o(A,A[A.length-1]&-2147483648?-1:0)};function E(I,v){return I.add(C(v))}t.j=function(I){if(N(this)||N(I))return g;if(T(this))return T(I)?C(this).j(C(I)):C(C(this).j(I));if(T(I))return C(this.j(C(I)));if(0>this.l(w)&&0>I.l(w))return d(this.m()*I.m());for(var v=this.g.length+I.g.length,A=[],b=0;b<2*v;b++)A[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<I.g.length;k++){var j=this.i(b)>>>16,P=this.i(b)&65535,He=I.i(k)>>>16,Dn=I.i(k)&65535;A[2*b+2*k]+=P*Dn,x(A,2*b+2*k),A[2*b+2*k+1]+=j*Dn,x(A,2*b+2*k+1),A[2*b+2*k+1]+=P*He,x(A,2*b+2*k+1),A[2*b+2*k+2]+=j*He,x(A,2*b+2*k+2)}for(b=0;b<v;b++)A[b]=A[2*b+1]<<16|A[2*b];for(b=v;b<2*v;b++)A[b]=0;return new o(A,0)};function x(I,v){for(;(I[v]&65535)!=I[v];)I[v+1]+=I[v]>>>16,I[v]&=65535,v++}function y(I,v){this.g=I,this.h=v}function S(I,v){if(N(v))throw Error("division by zero");if(N(I))return new y(g,g);if(T(I))return v=S(C(I),v),new y(C(v.g),C(v.h));if(T(v))return v=S(I,C(v)),new y(C(v.g),v.h);if(30<I.g.length){if(T(I)||T(v))throw Error("slowDivide_ only works with positive integers.");for(var A=p,b=v;0>=b.l(I);)A=D(A),b=D(b);var k=V(A,1),j=V(b,1);for(b=V(b,2),A=V(A,2);!N(b);){var P=j.add(b);0>=P.l(I)&&(k=k.add(A),j=P),b=V(b,1),A=V(A,1)}return v=E(I,k.j(v)),new y(k,v)}for(k=g;0<=I.l(v);){for(A=Math.max(1,Math.floor(I.m()/v.m())),b=Math.ceil(Math.log(A)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),j=d(A),P=j.j(v);T(P)||0<P.l(I);)A-=b,j=d(A),P=j.j(v);N(j)&&(j=p),k=k.add(j),I=E(I,P)}return new y(k,I)}t.A=function(I){return S(this,I).h},t.and=function(I){for(var v=Math.max(this.g.length,I.g.length),A=[],b=0;b<v;b++)A[b]=this.i(b)&I.i(b);return new o(A,this.h&I.h)},t.or=function(I){for(var v=Math.max(this.g.length,I.g.length),A=[],b=0;b<v;b++)A[b]=this.i(b)|I.i(b);return new o(A,this.h|I.h)},t.xor=function(I){for(var v=Math.max(this.g.length,I.g.length),A=[],b=0;b<v;b++)A[b]=this.i(b)^I.i(b);return new o(A,this.h^I.h)};function D(I){for(var v=I.g.length+1,A=[],b=0;b<v;b++)A[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(A,I.h)}function V(I,v){var A=v>>5;v%=32;for(var b=I.g.length-A,k=[],j=0;j<b;j++)k[j]=0<v?I.i(j+A)>>>v|I.i(j+A+1)<<32-v:I.i(j+A);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,bE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,vs=o}).apply(typeof Qv<"u"?Qv:typeof self<"u"?self:typeof window<"u"?window:{});var Dl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var IE,jo,NE,nu,bf,SE,AE,PE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Dl=="object"&&Dl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var _=0;_<a.length-1;_++){var O=a[_];if(!(O in m))break e;m=m[O]}a=a[a.length-1],_=m[a],h=h(_),h!=_&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,_=!1,O={next:function(){if(!_&&m<a.length){var L=m++;return{value:h(L,a[L]),done:!1}}return _=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function g(a,h,m){if(!a)throw Error();if(2<arguments.length){var _=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,_),a.apply(h,O)}}return function(){return a.apply(h,arguments)}}function p(a,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,p.apply(null,arguments)}function w(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var _=m.slice();return _.push.apply(_,arguments),a.apply(this,_)}}function N(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(_,O,L){for(var z=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)z[fe-2]=arguments[fe];return h.prototype[O].apply(_,z)}}function T(a){const h=a.length;if(0<h){const m=Array(h);for(let _=0;_<h;_++)m[_]=a[_];return m}return[]}function C(a,h){for(let m=1;m<arguments.length;m++){const _=arguments[m];if(c(_)){const O=a.length||0,L=_.length||0;a.length=O+L;for(let z=0;z<L;z++)a[O+z]=_[z]}else a.push(_)}}class E{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){return/^[\s\xa0]*$/.test(a)}function y(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function S(a){return S[" "](a),a}S[" "]=function(){};var D=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function V(a,h,m){for(const _ in a)h.call(m,a[_],_,a)}function I(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function v(a){const h={};for(const m in a)h[m]=a[m];return h}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let m,_;for(let O=1;O<arguments.length;O++){_=arguments[O];for(m in _)a[m]=_[m];for(let L=0;L<A.length;L++)m=A[L],Object.prototype.hasOwnProperty.call(_,m)&&(a[m]=_[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function j(a){u.setTimeout(()=>{throw a},0)}function P(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class He{constructor(){this.h=this.g=null}add(h,m){const _=Dn.get();_.set(h,m),this.h?this.h.next=_:this.g=_,this.h=_}}var Dn=new E(()=>new eo,a=>a.reset());class eo{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let Ln,B=!1,Y=new He,ee=()=>{const a=u.Promise.resolve(void 0);Ln=()=>{a.then(Ee)}};var Ee=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(m){j(m)}var h=Dn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function he(){this.s=this.s,this.C=this.C}he.prototype.s=!1,he.prototype.ma=function(){this.s||(this.s=!0,this.N())},he.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Mn=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};u.addEventListener("test",m,h),u.removeEventListener("test",m,h)}catch{}return a}();function Vn(a,h){if(Pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,_=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(D){e:{try{S(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,_?(this.clientX=_.clientX!==void 0?_.clientX:_.pageX,this.clientY=_.clientY!==void 0?_.clientY:_.pageY,this.screenX=_.screenX||0,this.screenY=_.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Un[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Vn.aa.h.call(this)}}N(Vn,Pe);var Un={2:"touch",3:"pen",4:"mouse"};Vn.prototype.h=function(){Vn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Fn="closure_listenable_"+(1e6*Math.random()|0),w1=0;function E1(a,h,m,_,O){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!_,this.ha=O,this.key=++w1,this.da=this.fa=!1}function Za(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function el(a){this.src=a,this.g={},this.h=0}el.prototype.add=function(a,h,m,_,O){var L=a.toString();a=this.g[L],a||(a=this.g[L]=[],this.h++);var z=ed(a,h,_,O);return-1<z?(h=a[z],m||(h.fa=!1)):(h=new E1(h,this.src,L,!!_,O),h.fa=m,a.push(h)),h};function Zc(a,h){var m=h.type;if(m in a.g){var _=a.g[m],O=Array.prototype.indexOf.call(_,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(_,O,1),L&&(Za(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function ed(a,h,m,_){for(var O=0;O<a.length;++O){var L=a[O];if(!L.da&&L.listener==h&&L.capture==!!m&&L.ha==_)return O}return-1}var td="closure_lm_"+(1e6*Math.random()|0),nd={};function sg(a,h,m,_,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)sg(a,h[L],m,_,O);return null}return m=ag(m),a&&a[Fn]?a.K(h,m,d(_)?!!_.capture:!1,O):T1(a,h,m,!1,_,O)}function T1(a,h,m,_,O,L){if(!h)throw Error("Invalid event type");var z=d(O)?!!O.capture:!!O,fe=sd(a);if(fe||(a[td]=fe=new el(a)),m=fe.add(h,m,_,z,L),m.proxy)return m;if(_=b1(),m.proxy=_,_.src=a,_.listener=m,a.addEventListener)Mn||(O=z),O===void 0&&(O=!1),a.addEventListener(h.toString(),_,O);else if(a.attachEvent)a.attachEvent(og(h.toString()),_);else if(a.addListener&&a.removeListener)a.addListener(_);else throw Error("addEventListener and attachEvent are unavailable.");return m}function b1(){function a(m){return h.call(a.src,a.listener,m)}const h=I1;return a}function ig(a,h,m,_,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)ig(a,h[L],m,_,O);else _=d(_)?!!_.capture:!!_,m=ag(m),a&&a[Fn]?(a=a.i,h=String(h).toString(),h in a.g&&(L=a.g[h],m=ed(L,m,_,O),-1<m&&(Za(L[m]),Array.prototype.splice.call(L,m,1),L.length==0&&(delete a.g[h],a.h--)))):a&&(a=sd(a))&&(h=a.g[h.toString()],a=-1,h&&(a=ed(h,m,_,O)),(m=-1<a?h[a]:null)&&rd(m))}function rd(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Fn])Zc(h.i,a);else{var m=a.type,_=a.proxy;h.removeEventListener?h.removeEventListener(m,_,a.capture):h.detachEvent?h.detachEvent(og(m),_):h.addListener&&h.removeListener&&h.removeListener(_),(m=sd(h))?(Zc(m,a),m.h==0&&(m.src=null,h[td]=null)):Za(a)}}}function og(a){return a in nd?nd[a]:nd[a]="on"+a}function I1(a,h){if(a.da)a=!0;else{h=new Vn(h,this);var m=a.listener,_=a.ha||a.src;a.fa&&rd(a),a=m.call(_,h)}return a}function sd(a){return a=a[td],a instanceof el?a:null}var id="__closure_events_fn_"+(1e9*Math.random()>>>0);function ag(a){return typeof a=="function"?a:(a[id]||(a[id]=function(h){return a.handleEvent(h)}),a[id])}function rt(){he.call(this),this.i=new el(this),this.M=this,this.F=null}N(rt,he),rt.prototype[Fn]=!0,rt.prototype.removeEventListener=function(a,h,m,_){ig(this,a,h,m,_)};function _t(a,h){var m,_=a.F;if(_)for(m=[];_;_=_.F)m.push(_);if(a=a.M,_=h.type||h,typeof h=="string")h=new Pe(h,a);else if(h instanceof Pe)h.target=h.target||a;else{var O=h;h=new Pe(_,a),b(h,O)}if(O=!0,m)for(var L=m.length-1;0<=L;L--){var z=h.g=m[L];O=tl(z,_,!0,h)&&O}if(z=h.g=a,O=tl(z,_,!0,h)&&O,O=tl(z,_,!1,h)&&O,m)for(L=0;L<m.length;L++)z=h.g=m[L],O=tl(z,_,!1,h)&&O}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],_=0;_<m.length;_++)Za(m[_]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,m,_){return this.i.add(String(a),h,!1,m,_)},rt.prototype.L=function(a,h,m,_){return this.i.add(String(a),h,!0,m,_)};function tl(a,h,m,_){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var z=h[L];if(z&&!z.da&&z.capture==m){var fe=z.listener,We=z.ha||z.src;z.fa&&Zc(a.i,z),O=fe.call(We,_)!==!1&&O}}return O&&!_.defaultPrevented}function lg(a,h,m){if(typeof a=="function")m&&(a=p(a,m));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function ug(a){a.g=lg(()=>{a.g=null,a.i&&(a.i=!1,ug(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class N1 extends he{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ug(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function to(a){he.call(this),this.h=a,this.g={}}N(to,he);var cg=[];function dg(a){V(a.g,function(h,m){this.g.hasOwnProperty(m)&&rd(h)},a),a.g={}}to.prototype.N=function(){to.aa.N.call(this),dg(this)},to.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var od=u.JSON.stringify,S1=u.JSON.parse,A1=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function ad(){}ad.prototype.h=null;function hg(a){return a.h||(a.h=a.i())}function fg(){}var no={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ld(){Pe.call(this,"d")}N(ld,Pe);function ud(){Pe.call(this,"c")}N(ud,Pe);var es={},pg=null;function nl(){return pg=pg||new rt}es.La="serverreachability";function mg(a){Pe.call(this,es.La,a)}N(mg,Pe);function ro(a){const h=nl();_t(h,new mg(h))}es.STAT_EVENT="statevent";function gg(a,h){Pe.call(this,es.STAT_EVENT,a),this.stat=h}N(gg,Pe);function xt(a){const h=nl();_t(h,new gg(h,a))}es.Ma="timingevent";function yg(a,h){Pe.call(this,es.Ma,a),this.size=h}N(yg,Pe);function so(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function io(){this.g=!0}io.prototype.xa=function(){this.g=!1};function P1(a,h,m,_,O,L){a.info(function(){if(a.g)if(L)for(var z="",fe=L.split("&"),We=0;We<fe.length;We++){var oe=fe[We].split("=");if(1<oe.length){var st=oe[0];oe=oe[1];var it=st.split("_");z=2<=it.length&&it[1]=="type"?z+(st+"="+oe+"&"):z+(st+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+_+") [attempt "+O+"]: "+h+`
`+m+`
`+z})}function C1(a,h,m,_,O,L,z){a.info(function(){return"XMLHTTP RESP ("+_+") [ attempt "+O+"]: "+h+`
`+m+`
`+L+" "+z})}function Bs(a,h,m,_){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+R1(a,m)+(_?" "+_:"")})}function k1(a,h){a.info(function(){return"TIMEOUT: "+h})}io.prototype.info=function(){};function R1(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var _=m[a];if(!(2>_.length)){var O=_[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return od(m)}catch{return h}}var rl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},vg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},cd;function sl(){}N(sl,ad),sl.prototype.g=function(){return new XMLHttpRequest},sl.prototype.i=function(){return{}},cd=new sl;function gr(a,h,m,_){this.j=a,this.i=h,this.l=m,this.R=_||1,this.U=new to(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new _g}function _g(){this.i=null,this.g="",this.h=!1}var xg={},dd={};function hd(a,h,m){a.L=1,a.v=ll(zn(h)),a.m=m,a.P=!0,wg(a,null)}function wg(a,h){a.F=Date.now(),il(a),a.A=zn(a.v);var m=a.A,_=a.R;Array.isArray(_)||(_=[String(_)]),Dg(m.i,"t",_),a.C=0,m=a.j.J,a.h=new _g,a.g=Zg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new N1(p(a.Y,a,a.g),a.O)),h=a.U,m=a.g,_=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(cg[0]=O.toString()),O=cg);for(var L=0;L<O.length;L++){var z=sg(m,O[L],_||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=a.H?v(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),ro(),P1(a.i,a.u,a.A,a.l,a.R,a.m)}gr.prototype.ca=function(a){a=a.target;const h=this.M;h&&$n(a)==3?h.j():this.Y(a)},gr.prototype.Y=function(a){try{if(a==this.g)e:{const it=$n(this.g);var h=this.g.Ba();const Ws=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||$g(this.g)))){this.J||it!=4||h==7||(h==8||0>=Ws?ro(3):ro(2)),fd(this);var m=this.g.Z();this.X=m;t:if(Eg(this)){var _=$g(this.g);a="";var O=_.length,L=$n(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),oo(this);var z="";break t}this.h.i=new u.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,a+=this.h.i.decode(_[h],{stream:!(L&&h==O-1)});_.length=0,this.h.g+=a,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=m==200,C1(this.i,this.u,this.A,this.l,this.R,it,m),this.o){if(this.T&&!this.K){t:{if(this.g){var fe,We=this.g;if((fe=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(fe)){var oe=fe;break t}}oe=null}if(m=oe)Bs(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,pd(this,m);else{this.o=!1,this.s=3,xt(12),ts(this),oo(this);break e}}if(this.P){m=!0;let an;for(;!this.J&&this.C<z.length;)if(an=j1(this,z),an==dd){it==4&&(this.s=4,xt(14),m=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(an==xg){this.s=4,xt(15),Bs(this.i,this.l,z,"[Invalid Chunk]"),m=!1;break}else Bs(this.i,this.l,an,null),pd(this,an);if(Eg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||z.length!=0||this.h.h||(this.s=1,xt(16),m=!1),this.o=this.o&&m,!m)Bs(this.i,this.l,z,"[Invalid Chunked Response]"),ts(this),oo(this);else if(0<z.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),xd(st),st.M=!0,xt(11))}}else Bs(this.i,this.l,z,null),pd(this,z);it==4&&ts(this),this.o&&!this.J&&(it==4?Qg(this.j,this):(this.o=!1,il(this)))}else Y1(this.g),m==400&&0<z.indexOf("Unknown SID")?(this.s=3,xt(12)):(this.s=0,xt(13)),ts(this),oo(this)}}}catch{}finally{}};function Eg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function j1(a,h){var m=a.C,_=h.indexOf(`
`,m);return _==-1?dd:(m=Number(h.substring(m,_)),isNaN(m)?xg:(_+=1,_+m>h.length?dd:(h=h.slice(_,_+m),a.C=_+m,h)))}gr.prototype.cancel=function(){this.J=!0,ts(this)};function il(a){a.S=Date.now()+a.I,Tg(a,a.I)}function Tg(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=so(p(a.ba,a),h)}function fd(a){a.B&&(u.clearTimeout(a.B),a.B=null)}gr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(k1(this.i,this.A),this.L!=2&&(ro(),xt(17)),ts(this),this.s=2,oo(this)):Tg(this,this.S-a)};function oo(a){a.j.G==0||a.J||Qg(a.j,a)}function ts(a){fd(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,dg(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function pd(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||md(m.h,a))){if(!a.K&&md(m.h,a)&&m.G==3){try{var _=m.Da.g.parse(h)}catch{_=null}if(Array.isArray(_)&&_.length==3){var O=_;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)pl(m),hl(m);else break e;_d(m),xt(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=so(p(m.Za,m),6e3));if(1>=Ng(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else rs(m,11)}else if((a.K||m.g==a)&&pl(m),!x(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let oe=O[h];if(m.T=oe[0],oe=oe[1],m.G==2)if(oe[0]=="c"){m.K=oe[1],m.ia=oe[2];const st=oe[3];st!=null&&(m.la=st,m.j.info("VER="+m.la));const it=oe[4];it!=null&&(m.Aa=it,m.j.info("SVER="+m.Aa));const Ws=oe[5];Ws!=null&&typeof Ws=="number"&&0<Ws&&(_=1.5*Ws,m.L=_,m.j.info("backChannelRequestTimeoutMs_="+_)),_=m;const an=a.g;if(an){const gl=an.g?an.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(gl){var L=_.h;L.g||gl.indexOf("spdy")==-1&&gl.indexOf("quic")==-1&&gl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(gd(L,L.h),L.h=null))}if(_.D){const wd=an.g?an.g.getResponseHeader("X-HTTP-Session-Id"):null;wd&&(_.ya=wd,ye(_.I,_.D,wd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),_=m;var z=a;if(_.qa=Jg(_,_.J?_.ia:null,_.W),z.K){Sg(_.h,z);var fe=z,We=_.L;We&&(fe.I=We),fe.B&&(fd(fe),il(fe)),_.g=z}else Kg(_);0<m.i.length&&fl(m)}else oe[0]!="stop"&&oe[0]!="close"||rs(m,7);else m.G==3&&(oe[0]=="stop"||oe[0]=="close"?oe[0]=="stop"?rs(m,7):vd(m):oe[0]!="noop"&&m.l&&m.l.ta(oe),m.v=0)}}ro(4)}catch{}}var O1=class{constructor(a,h){this.g=a,this.map=h}};function bg(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ig(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ng(a){return a.h?1:a.g?a.g.size:0}function md(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function gd(a,h){a.g?a.g.add(h):a.h=h}function Sg(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}bg.prototype.cancel=function(){if(this.i=Ag(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ag(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return T(a.i)}function D1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,_=0;_<m;_++)h.push(a[_]);return h}h=[],m=0;for(_ in a)h[m++]=a[_];return h}function L1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const _ in a)h[m++]=_;return h}}}function Pg(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=L1(a),_=D1(a),O=_.length,L=0;L<O;L++)h.call(void 0,_[L],m&&m[L],a)}var Cg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function M1(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var _=a[m].indexOf("="),O=null;if(0<=_){var L=a[m].substring(0,_);O=a[m].substring(_+1)}else L=a[m];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function ns(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ns){this.h=a.h,ol(this,a.j),this.o=a.o,this.g=a.g,al(this,a.s),this.l=a.l;var h=a.i,m=new uo;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),kg(this,m),this.m=a.m}else a&&(h=String(a).match(Cg))?(this.h=!1,ol(this,h[1]||"",!0),this.o=ao(h[2]||""),this.g=ao(h[3]||"",!0),al(this,h[4]),this.l=ao(h[5]||"",!0),kg(this,h[6]||"",!0),this.m=ao(h[7]||"")):(this.h=!1,this.i=new uo(null,this.h))}ns.prototype.toString=function(){var a=[],h=this.j;h&&a.push(lo(h,Rg,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(lo(h,Rg,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(lo(m,m.charAt(0)=="/"?F1:U1,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",lo(m,$1)),a.join("")};function zn(a){return new ns(a)}function ol(a,h,m){a.j=m?ao(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function al(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function kg(a,h,m){h instanceof uo?(a.i=h,B1(a.i,a.h)):(m||(h=lo(h,z1)),a.i=new uo(h,a.h))}function ye(a,h,m){a.i.set(h,m)}function ll(a){return ye(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ao(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function lo(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,V1),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function V1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var Rg=/[#\/\?@]/g,U1=/[#\?:]/g,F1=/[#\?]/g,z1=/[#\?@]/g,$1=/#/g;function uo(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function yr(a){a.g||(a.g=new Map,a.h=0,a.i&&M1(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=uo.prototype,t.add=function(a,h){yr(this),this.i=null,a=qs(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function jg(a,h){yr(a),h=qs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Og(a,h){return yr(a),h=qs(a,h),a.g.has(h)}t.forEach=function(a,h){yr(this),this.g.forEach(function(m,_){m.forEach(function(O){a.call(h,O,_,this)},this)},this)},t.na=function(){yr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let _=0;_<h.length;_++){const O=a[_];for(let L=0;L<O.length;L++)m.push(h[_])}return m},t.V=function(a){yr(this);let h=[];if(typeof a=="string")Og(this,a)&&(h=h.concat(this.g.get(qs(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return yr(this),this.i=null,a=qs(this,a),Og(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Dg(a,h,m){jg(a,h),0<m.length&&(a.i=null,a.g.set(qs(a,h),T(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var _=h[m];const L=encodeURIComponent(String(_)),z=this.V(_);for(_=0;_<z.length;_++){var O=L;z[_]!==""&&(O+="="+encodeURIComponent(String(z[_]))),a.push(O)}}return this.i=a.join("&")};function qs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function B1(a,h){h&&!a.j&&(yr(a),a.i=null,a.g.forEach(function(m,_){var O=_.toLowerCase();_!=O&&(jg(this,_),Dg(this,O,m))},a)),a.j=h}function q1(a,h){const m=new io;if(u.Image){const _=new Image;_.onload=w(vr,m,"TestLoadImage: loaded",!0,h,_),_.onerror=w(vr,m,"TestLoadImage: error",!1,h,_),_.onabort=w(vr,m,"TestLoadImage: abort",!1,h,_),_.ontimeout=w(vr,m,"TestLoadImage: timeout",!1,h,_),u.setTimeout(function(){_.ontimeout&&_.ontimeout()},1e4),_.src=a}else h(!1)}function H1(a,h){const m=new io,_=new AbortController,O=setTimeout(()=>{_.abort(),vr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:_.signal}).then(L=>{clearTimeout(O),L.ok?vr(m,"TestPingServer: ok",!0,h):vr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),vr(m,"TestPingServer: error",!1,h)})}function vr(a,h,m,_,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),_(m)}catch{}}function W1(){this.g=new A1}function K1(a,h,m){const _=m||"";try{Pg(a,function(O,L){let z=O;d(O)&&(z=od(O)),h.push(_+L+"="+encodeURIComponent(z))})}catch(O){throw h.push(_+"type="+encodeURIComponent("_badmap")),O}}function ul(a){this.l=a.Ub||null,this.j=a.eb||!1}N(ul,ad),ul.prototype.g=function(){return new cl(this.l,this.j)},ul.prototype.i=function(a){return function(){return a}}({});function cl(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(cl,rt),t=cl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ho(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,co(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ho(this)),this.g&&(this.readyState=3,ho(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Lg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Lg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?co(this):ho(this),this.readyState==3&&Lg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,co(this))},t.Qa=function(a){this.g&&(this.response=a,co(this))},t.ga=function(){this.g&&co(this)};function co(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ho(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function ho(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(cl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Mg(a){let h="";return V(a,function(m,_){h+=_,h+=":",h+=m,h+=`\r
`}),h}function yd(a,h,m){e:{for(_ in m){var _=!1;break e}_=!0}_||(m=Mg(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):ye(a,h,m))}function Se(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Se,rt);var G1=/^https?$/i,Q1=["POST","PUT"];t=Se.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,_){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():cd.g(),this.v=this.o?hg(this.o):hg(cd),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(L){Vg(this,L);return}if(a=m||"",m=new Map(this.headers),_)if(Object.getPrototypeOf(_)===Object.prototype)for(var O in _)m.set(O,_[O]);else if(typeof _.keys=="function"&&typeof _.get=="function")for(const L of _.keys())m.set(L,_.get(L));else throw Error("Unknown input type for opt_headers: "+String(_));_=Array.from(m.keys()).find(L=>L.toLowerCase()=="content-type"),O=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Q1,h,void 0))||_||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of m)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{zg(this),this.u=!0,this.g.send(a),this.u=!1}catch(L){Vg(this,L)}};function Vg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Ug(a),dl(a)}function Ug(a){a.A||(a.A=!0,_t(a,"complete"),_t(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,_t(this,"complete"),_t(this,"abort"),dl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),dl(this,!0)),Se.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Fg(this):this.bb())},t.bb=function(){Fg(this)};function Fg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||$n(a)!=4||a.Z()!=2)){if(a.u&&$n(a)==4)lg(a.Ea,0,a);else if(_t(a,"readystatechange"),$n(a)==4){a.h=!1;try{const z=a.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var _;if(_=z===0){var O=String(a.D).match(Cg)[1]||null;!O&&u.self&&u.self.location&&(O=u.self.location.protocol.slice(0,-1)),_=!G1.test(O?O.toLowerCase():"")}m=_}if(m)_t(a,"complete"),_t(a,"success");else{a.m=6;try{var L=2<$n(a)?a.g.statusText:""}catch{L=""}a.l=L+" ["+a.Z()+"]",Ug(a)}}finally{dl(a)}}}}function dl(a,h){if(a.g){zg(a);const m=a.g,_=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||_t(a,"ready");try{m.onreadystatechange=_}catch{}}}function zg(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function $n(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<$n(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),S1(h)}};function $g(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Y1(a){const h={};a=(a.g&&2<=$n(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let _=0;_<a.length;_++){if(x(a[_]))continue;var m=k(a[_]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const L=h[O]||[];h[O]=L,L.push(m)}I(h,function(_){return _.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function fo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function Bg(a){this.Aa=0,this.i=[],this.j=new io,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=fo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=fo("baseRetryDelayMs",5e3,a),this.cb=fo("retryDelaySeedMs",1e4,a),this.Wa=fo("forwardChannelMaxRetries",2,a),this.wa=fo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new bg(a&&a.concurrentRequestLimit),this.Da=new W1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=Bg.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,_){xt(0),this.W=a,this.H=h||{},m&&_!==void 0&&(this.H.OSID=m,this.H.OAID=_),this.F=this.X,this.I=Jg(this,null,this.W),fl(this)};function vd(a){if(qg(a),a.G==3){var h=a.U++,m=zn(a.I);if(ye(m,"SID",a.K),ye(m,"RID",h),ye(m,"TYPE","terminate"),po(a,m),h=new gr(a,a.j,h),h.L=2,h.v=ll(zn(m)),m=!1,u.navigator&&u.navigator.sendBeacon)try{m=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&u.Image&&(new Image().src=h.v,m=!0),m||(h.g=Zg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),il(h)}Xg(a)}function hl(a){a.g&&(xd(a),a.g.cancel(),a.g=null)}function qg(a){hl(a),a.u&&(u.clearTimeout(a.u),a.u=null),pl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function fl(a){if(!Ig(a.h)&&!a.s){a.s=!0;var h=a.Ga;Ln||ee(),B||(Ln(),B=!0),Y.add(h,a),a.B=0}}function X1(a,h){return Ng(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=so(p(a.Ga,a,h),Yg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new gr(this,this.j,a);let L=this.o;if(this.S&&(L?(L=v(L),b(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var _=this.i[m];if("__data__"in _.map&&(_=_.map.__data__,typeof _=="string")){_=_.length;break t}_=void 0}if(_===void 0)break;if(h+=_,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Wg(this,O,h),m=zn(this.I),ye(m,"RID",a),ye(m,"CVER",22),this.D&&ye(m,"X-HTTP-Session-Id",this.D),po(this,m),L&&(this.O?h="headers="+encodeURIComponent(String(Mg(L)))+"&"+h:this.m&&yd(m,this.m,L)),gd(this.h,O),this.Ua&&ye(m,"TYPE","init"),this.P?(ye(m,"$req",h),ye(m,"SID","null"),O.T=!0,hd(O,m,null)):hd(O,m,h),this.G=2}}else this.G==3&&(a?Hg(this,a):this.i.length==0||Ig(this.h)||Hg(this))};function Hg(a,h){var m;h?m=h.l:m=a.U++;const _=zn(a.I);ye(_,"SID",a.K),ye(_,"RID",m),ye(_,"AID",a.T),po(a,_),a.m&&a.o&&yd(_,a.m,a.o),m=new gr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Wg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),gd(a.h,m),hd(m,_,h)}function po(a,h){a.H&&V(a.H,function(m,_){ye(h,_,m)}),a.l&&Pg({},function(m,_){ye(h,_,m)})}function Wg(a,h,m){m=Math.min(a.i.length,m);var _=a.l?p(a.l.Na,a.l,a):null;e:{var O=a.i;let L=-1;for(;;){const z=["count="+m];L==-1?0<m?(L=O[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let fe=!0;for(let We=0;We<m;We++){let oe=O[We].g;const st=O[We].map;if(oe-=L,0>oe)L=Math.max(0,O[We].g-100),fe=!1;else try{K1(st,z,"req"+oe+"_")}catch{_&&_(st)}}if(fe){_=z.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,_}function Kg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;Ln||ee(),B||(Ln(),B=!0),Y.add(h,a),a.v=0}}function _d(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=so(p(a.Fa,a),Yg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Gg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=so(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,xt(10),hl(this),Gg(this))};function xd(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Gg(a){a.g=new gr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=zn(a.qa);ye(h,"RID","rpc"),ye(h,"SID",a.K),ye(h,"AID",a.T),ye(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ye(h,"TO",a.ja),ye(h,"TYPE","xmlhttp"),po(a,h),a.m&&a.o&&yd(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=ll(zn(h)),m.m=null,m.P=!0,wg(m,a)}t.Za=function(){this.C!=null&&(this.C=null,hl(this),_d(this),xt(19))};function pl(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Qg(a,h){var m=null;if(a.g==h){pl(a),xd(a),a.g=null;var _=2}else if(md(a.h,h))m=h.D,Sg(a.h,h),_=1;else return;if(a.G!=0){if(h.o)if(_==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=a.B;_=nl(),_t(_,new yg(_,m)),fl(a)}else Kg(a);else if(O=h.s,O==3||O==0&&0<h.X||!(_==1&&X1(a,h)||_==2&&_d(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),O){case 1:rs(a,5);break;case 4:rs(a,10);break;case 3:rs(a,6);break;default:rs(a,2)}}}function Yg(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function rs(a,h){if(a.j.info("Error code "+h),h==2){var m=p(a.fb,a),_=a.Xa;const O=!_;_=new ns(_||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||ol(_,"https"),ll(_),O?q1(_.toString(),m):H1(_.toString(),m)}else xt(2);a.G=0,a.l&&a.l.sa(h),Xg(a),qg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),xt(2)):(this.j.info("Failed to ping google.com"),xt(1))};function Xg(a){if(a.G=0,a.ka=[],a.l){const h=Ag(a.h);(h.length!=0||a.i.length!=0)&&(C(a.ka,h),C(a.ka,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.ra()}}function Jg(a,h,m){var _=m instanceof ns?zn(m):new ns(m);if(_.g!="")h&&(_.g=h+"."+_.g),al(_,_.s);else{var O=u.location;_=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new ns(null);_&&ol(L,_),h&&(L.g=h),O&&al(L,O),m&&(L.l=m),_=L}return m=a.D,h=a.ya,m&&h&&ye(_,m,h),ye(_,"VER",a.la),po(a,_),_}function Zg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Se(new ul({eb:m})):new Se(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function ey(){}t=ey.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function ml(){}ml.prototype.g=function(a,h){return new Ut(a,h)};function Ut(a,h){rt.call(this),this.g=new Bg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!x(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Hs(this)}N(Ut,rt),Ut.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ut.prototype.close=function(){vd(this.g)},Ut.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=od(a),a=m);h.i.push(new O1(h.Ya++,a)),h.G==3&&fl(h)},Ut.prototype.N=function(){this.g.l=null,delete this.j,vd(this.g),delete this.g,Ut.aa.N.call(this)};function ty(a){ld.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(ty,ld);function ny(){ud.call(this),this.status=1}N(ny,ud);function Hs(a){this.g=a}N(Hs,ey),Hs.prototype.ua=function(){_t(this.g,"a")},Hs.prototype.ta=function(a){_t(this.g,new ty(a))},Hs.prototype.sa=function(a){_t(this.g,new ny)},Hs.prototype.ra=function(){_t(this.g,"b")},ml.prototype.createWebChannel=ml.prototype.g,Ut.prototype.send=Ut.prototype.o,Ut.prototype.open=Ut.prototype.m,Ut.prototype.close=Ut.prototype.close,PE=function(){return new ml},AE=function(){return nl()},SE=es,bf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},rl.NO_ERROR=0,rl.TIMEOUT=8,rl.HTTP_ERROR=6,nu=rl,vg.COMPLETE="complete",NE=vg,fg.EventType=no,no.OPEN="a",no.CLOSE="b",no.ERROR="c",no.MESSAGE="d",rt.prototype.listen=rt.prototype.K,jo=fg,Se.prototype.listenOnce=Se.prototype.L,Se.prototype.getLastError=Se.prototype.Ka,Se.prototype.getLastErrorCode=Se.prototype.Ba,Se.prototype.getStatus=Se.prototype.Z,Se.prototype.getResponseJson=Se.prototype.Oa,Se.prototype.getResponseText=Se.prototype.oa,Se.prototype.send=Se.prototype.ea,Se.prototype.setWithCredentials=Se.prototype.Ha,IE=Se}).apply(typeof Dl<"u"?Dl:typeof self<"u"?self:typeof window<"u"?window:{});const Yv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ss=new Hp("@firebase/firestore");function To(){return Ss.logLevel}function H(t,...e){if(Ss.logLevel<=re.DEBUG){const n=e.map(sm);Ss.debug(`Firestore (${Yi}): ${t}`,...n)}}function ur(t,...e){if(Ss.logLevel<=re.ERROR){const n=e.map(sm);Ss.error(`Firestore (${Yi}): ${t}`,...n)}}function Ri(t,...e){if(Ss.logLevel<=re.WARN){const n=e.map(sm);Ss.warn(`Firestore (${Yi}): ${t}`,...n)}}function sm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+t;throw ur(e),new Error(e)}function ce(t,e){t||Q()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class $ extends En{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class N2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class S2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class A2{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){ce(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new tr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new tr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ce(typeof r.accessToken=="string"),new CE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return ce(e===null||typeof e=="string"),new dt(e)}}class P2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class C2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new P2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class k2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class R2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){ce(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(ce(typeof n.token=="string"),this.R=n.token,new k2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=j2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ae(t,e){return t<e?-1:t>e?1:0}function ji(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new $(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new $(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ae(this.nanoseconds,e.nanoseconds):ae(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new ze(0,0))}static max(){return new X(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return xa.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof xa?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class me extends xa{construct(e,n,r){return new me(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new $(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new me(n)}static emptyPath(){return new me([])}}const O2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends xa{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return O2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new $(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new $(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new $(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(me.fromString(e))}static fromName(e){return new W(me.fromString(e).popFirst(5))}static empty(){return new W(me.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&me.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return me.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new me(e.slice()))}}function D2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Wr(s,W.empty(),e)}function L2(t){return new Wr(t.readTime,t.key,-1)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(X.min(),W.empty(),-1)}static max(){return new Wr(X.max(),W.empty(),-1)}}function M2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ae(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class U2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $a(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==V2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++u,u===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function F2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ba(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}im.oe=-1;function Nc(t){return t==null}function $u(t){return t===0&&1/t==-1/0}function z2(t){return typeof t=="number"&&Number.isInteger(t)&&!$u(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function RE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ne{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new Ne(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new Ne(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ll(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ll(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ll(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ll(this.root,e,this.comparator,!0)}}class Ll{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=s??Ye.EMPTY,this.right=i??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ye(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new Ne(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Jv(this.data.getIterator())}getIteratorFrom(e){return new Jv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Jv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new et(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ji(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new jE("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ae(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const $2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(ce(!!t),typeof t=="string"){let e=0;const n=$2.exec(t);if(ce(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function As(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function om(t){const e=t.mapValue.fields.__previous_value__;return Sc(e)?om(e):e}function wa(t){const e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class Ea{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new Ea("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof Ea&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml={mapValue:{}};function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Sc(t)?4:H2(t)?9007199254740991:q2(t)?10:11:Q()}function kn(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return wa(t).isEqual(wa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Kr(s.timestampValue),u=Kr(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return As(s.bytesValue).isEqual(As(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),u=Re(i.doubleValue);return o===u?$u(o)===$u(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return ji(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Xv(o)!==Xv(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!kn(o[c],u[c])))return!1;return!0}(t,e);default:return Q()}}function Ta(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Oi(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return ae(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ae(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Re(i.integerValue||i.doubleValue),c=Re(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Zv(t.timestampValue,e.timestampValue);case 4:return Zv(wa(t),wa(e));case 5:return ae(t.stringValue,e.stringValue);case 6:return function(i,o){const u=As(i),c=As(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=ae(u[d],c[d]);if(f!==0)return f}return ae(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=ae(Re(i.latitude),Re(o.latitude));return u!==0?u:ae(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return e0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,f;const g=i.fields||{},p=o.fields||{},w=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=ae(((d=w==null?void 0:w.values)===null||d===void 0?void 0:d.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:e0(w,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ml.mapValue&&o===Ml.mapValue)return 0;if(i===Ml.mapValue)return 1;if(o===Ml.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const p=ae(c[g],f[g]);if(p!==0)return p;const w=Oi(u[c[g]],d[f[g]]);if(w!==0)return w}return ae(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Zv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ae(t,e);const n=Kr(t),r=Kr(e),s=ae(n.seconds,r.seconds);return s!==0?s:ae(n.nanos,r.nanos)}function e0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Oi(n[s],r[s]);if(i)return i}return ae(n.length,r.length)}function Di(t){return If(t)}function If(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return As(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=If(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${If(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function Bu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Nf(t){return!!t&&"integerValue"in t}function am(t){return!!t&&"arrayValue"in t}function t0(t){return!!t&&"nullValue"in t}function n0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function ru(t){return!!t&&"mapValue"in t}function q2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Go(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Go(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Go(t.arrayValue.values[n]);return e}return Object.assign({},t)}function H2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.value=e}static empty(){return new kt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!ru(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Go(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=Go(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());ru(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];ru(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Us(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new kt(Go(this.value))}}function OE(t){const e=[];return Us(t.fields,(n,r)=>{const s=new Xe([n]);if(ru(r)){const i=OE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ft(e,0,X.min(),X.min(),X.min(),kt.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,X.min(),X.min(),kt.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,X.min(),X.min(),kt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=kt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=kt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e,n){this.position=e,this.inclusive=n}}function r0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Oi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function s0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ba{constructor(e,n="asc"){this.field=e,this.dir=n}}function W2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE{}class Me extends DE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new G2(e,n,r):n==="array-contains"?new X2(e,r):n==="in"?new J2(e,r):n==="not-in"?new Z2(e,r):n==="array-contains-any"?new eR(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new Q2(e,r):new Y2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Oi(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison(Oi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class xn extends DE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new xn(e,n)}matches(e){return LE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function LE(t){return t.op==="and"}function ME(t){return K2(t)&&LE(t)}function K2(t){for(const e of t.filters)if(e instanceof xn)return!1;return!0}function Sf(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Di(t.value);if(ME(t))return t.filters.map(e=>Sf(e)).join(",");{const e=t.filters.map(n=>Sf(n)).join(",");return`${t.op}(${e})`}}function VE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof xn?function(r,s){return s instanceof xn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&VE(o,s.filters[u]),!0):!1}(t,e):void Q()}function UE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Di(n.value)}`}(t):t instanceof xn?function(n){return n.op.toString()+" {"+n.getFilters().map(UE).join(" ,")+"}"}(t):"Filter"}class G2 extends Me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class Q2 extends Me{constructor(e,n){super(e,"in",n),this.keys=FE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Y2 extends Me{constructor(e,n){super(e,"not-in",n),this.keys=FE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function FE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class X2 extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return am(n)&&Ta(n.arrayValue,this.value)}}class J2 extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Ta(this.value.arrayValue,n)}}class Z2 extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(Ta(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Ta(this.value.arrayValue,n)}}class eR extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!am(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Ta(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function i0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new tR(t,e,n,r,s,i,o)}function lm(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Sf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Nc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Di(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Di(r)).join(",")),e.ue=n}return e.ue}function um(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!W2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!VE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!s0(t.startAt,e.startAt)&&s0(t.endAt,e.endAt)}function Af(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function nR(t,e,n,r,s,i,o,u){return new Fs(t,e,n,r,s,i,o,u)}function cm(t){return new Fs(t)}function o0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function dm(t){return t.collectionGroup!==null}function Ei(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new et(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ba(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new ba(Xe.keyField(),r))}return e.ce}function Pn(t){const e=J(t);return e.le||(e.le=rR(e,Ei(t))),e.le}function rR(t,e){if(t.limitType==="F")return i0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ba(s.field,i)});const n=t.endAt?new Li(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Li(t.startAt.position,t.startAt.inclusive):null;return i0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Pf(t,e){const n=t.filters.concat([e]);return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function qu(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ac(t,e){return um(Pn(t),Pn(e))&&t.limitType===e.limitType}function zE(t){return`${lm(Pn(t))}|lt:${t.limitType}`}function Ys(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>UE(s)).join(", ")}]`),Nc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Di(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Di(s)).join(",")),`Target(${r})`}(Pn(t))}; limitType=${t.limitType})`}function Pc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ei(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=r0(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,Ei(r),s)||r.endAt&&!function(o,u,c){const d=r0(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,Ei(r),s))}(t,e)}function sR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function $E(t){return(e,n)=>{let r=!1;for(const s of Ei(t)){const i=iR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function iR(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Oi(c,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return RE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=new Ne(W.comparator);function cr(){return oR}const BE=new Ne(W.comparator);function Oo(...t){let e=BE;for(const n of t)e=e.insert(n.key,n);return e}function qE(t){let e=BE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return Qo()}function HE(){return Qo()}function Qo(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const aR=new Ne(W.comparator),lR=new et(W.comparator);function ne(...t){let e=lR;for(const n of t)e=e.add(n);return e}const uR=new et(ae);function cR(){return uR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:$u(e)?"-0":e}}function WE(t){return{integerValue:""+t}}function dR(t,e){return z2(e)?WE(e):hm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cc{constructor(){this._=void 0}}function hR(t,e,n){return t instanceof Ia?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Sc(i)&&(i=om(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Mi?GE(t,e):t instanceof Na?QE(t,e):function(s,i){const o=KE(s,i),u=a0(o)+a0(s.Pe);return Nf(o)&&Nf(s.Pe)?WE(u):hm(s.serializer,u)}(t,e)}function fR(t,e,n){return t instanceof Mi?GE(t,e):t instanceof Na?QE(t,e):n}function KE(t,e){return t instanceof Hu?function(r){return Nf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ia extends Cc{}class Mi extends Cc{constructor(e){super(),this.elements=e}}function GE(t,e){const n=YE(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Na extends Cc{constructor(e){super(),this.elements=e}}function QE(t,e){let n=YE(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class Hu extends Cc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function a0(t){return Re(t.integerValue||t.doubleValue)}function YE(t){return am(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XE{constructor(e,n){this.field=e,this.transform=n}}function pR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Mi&&s instanceof Mi||r instanceof Na&&s instanceof Na?ji(r.elements,s.elements,kn):r instanceof Hu&&s instanceof Hu?kn(r.Pe,s.Pe):r instanceof Ia&&s instanceof Ia}(t.transform,e.transform)}class mR{constructor(e,n){this.version=e,this.transformResults=n}}class Jt{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Jt}static exists(e){return new Jt(void 0,e)}static updateTime(e){return new Jt(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function su(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class kc{}function JE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new fm(t.key,Jt.none()):new qa(t.key,t.data,Jt.none());{const n=t.data,r=kt.empty();let s=new et(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zr(t.key,r,new Bt(s.toArray()),Jt.none())}}function gR(t,e,n){t instanceof qa?function(s,i,o){const u=s.value.clone(),c=u0(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(s,i,o){if(!su(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=u0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(ZE(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Yo(t,e,n,r){return t instanceof qa?function(i,o,u,c){if(!su(i.precondition,o))return u;const d=i.value.clone(),f=c0(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(i,o,u,c){if(!su(i.precondition,o))return u;const d=c0(i.fieldTransforms,c,o),f=o.data;return f.setAll(ZE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,u){return su(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function yR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=KE(r.transform,s||null);i!=null&&(n===null&&(n=kt.empty()),n.set(r.field,i))}return n||null}function l0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&ji(r,s,(i,o)=>pR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class qa extends kc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zr extends kc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function ZE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function u0(t,e,n){const r=new Map;ce(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,fR(o,u,n[s]))}return r}function c0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,hR(i,o,e))}return r}class fm extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class vR extends kc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _R{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&gR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Yo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=HE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=JE(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ne())}isEqual(e){return this.batchId===e.batchId&&ji(this.mutations,e.mutations,(n,r)=>l0(n,r))&&ji(this.baseMutations,e.baseMutations,(n,r)=>l0(n,r))}}class pm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){ce(e.mutations.length===r.length);let s=function(){return aR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new pm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var De,se;function ER(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function eT(t){if(t===void 0)return ur("GRPC error has no .code"),M.UNKNOWN;switch(t){case De.OK:return M.OK;case De.CANCELLED:return M.CANCELLED;case De.UNKNOWN:return M.UNKNOWN;case De.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case De.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case De.INTERNAL:return M.INTERNAL;case De.UNAVAILABLE:return M.UNAVAILABLE;case De.UNAUTHENTICATED:return M.UNAUTHENTICATED;case De.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case De.NOT_FOUND:return M.NOT_FOUND;case De.ALREADY_EXISTS:return M.ALREADY_EXISTS;case De.PERMISSION_DENIED:return M.PERMISSION_DENIED;case De.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case De.ABORTED:return M.ABORTED;case De.OUT_OF_RANGE:return M.OUT_OF_RANGE;case De.UNIMPLEMENTED:return M.UNIMPLEMENTED;case De.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(se=De||(De={}))[se.OK=0]="OK",se[se.CANCELLED=1]="CANCELLED",se[se.UNKNOWN=2]="UNKNOWN",se[se.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",se[se.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",se[se.NOT_FOUND=5]="NOT_FOUND",se[se.ALREADY_EXISTS=6]="ALREADY_EXISTS",se[se.PERMISSION_DENIED=7]="PERMISSION_DENIED",se[se.UNAUTHENTICATED=16]="UNAUTHENTICATED",se[se.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",se[se.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",se[se.ABORTED=10]="ABORTED",se[se.OUT_OF_RANGE=11]="OUT_OF_RANGE",se[se.UNIMPLEMENTED=12]="UNIMPLEMENTED",se[se.INTERNAL=13]="INTERNAL",se[se.UNAVAILABLE=14]="UNAVAILABLE",se[se.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bR=new vs([4294967295,4294967295],0);function d0(t){const e=TR().encode(t),n=new bE;return n.update(e),new Uint8Array(n.digest())}function h0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new vs([n,r],0),new vs([s,i],0)]}class mm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Do(`Invalid padding: ${n}`);if(r<0)throw new Do(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Do(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Do(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=vs.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(vs.fromNumber(r)));return s.compare(bR)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=d0(e),[r,s]=h0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new mm(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=d0(e),[r,s]=h0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Do extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ha.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Rc(X.min(),s,new Ne(ae),cr(),ne())}}class Ha{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ha(r,n,ne(),ne(),ne())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class tT{constructor(e,n){this.targetId=e,this.me=n}}class nT{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class f0{constructor(){this.fe=0,this.ge=m0(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=ne(),n=ne(),r=ne();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new Ha(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=m0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,ce(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class IR{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=p0(),this.Qe=new Ne(ae)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Af(i))if(r===0){const o=new W(i.path);this.Ue(n,o,ft.newNoDocument(o,X.min()))}else ce(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=As(r).toUint8Array()}catch(c){if(c instanceof jE)return Ri("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new mm(o,s,i)}catch(c){return Ri(c instanceof Do?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&Af(u.target)){const c=new W(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ft.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=ne();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Rc(e,n,this.Qe,this.ke,r);return this.ke=cr(),this.qe=p0(),this.Qe=new Ne(ae),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new f0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(ae),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new f0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function p0(){return new Ne(W.comparator)}function m0(){return new Ne(W.comparator)}const NR={asc:"ASCENDING",desc:"DESCENDING"},SR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AR={and:"AND",or:"OR"};class PR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Cf(t,e){return t.useProto3Json||Nc(e)?e:{value:e}}function Wu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function rT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function CR(t,e){return Wu(t,e.toTimestamp())}function Cn(t){return ce(!!t),X.fromTimestamp(function(n){const r=Kr(n);return new ze(r.seconds,r.nanos)}(t))}function gm(t,e){return kf(t,e).canonicalString()}function kf(t,e){const n=function(s){return new me(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function sT(t){const e=me.fromString(t);return ce(uT(e)),e}function Rf(t,e){return gm(t.databaseId,e.path)}function sh(t,e){const n=sT(e);if(n.get(1)!==t.databaseId.projectId)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new $(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(oT(n))}function iT(t,e){return gm(t.databaseId,e)}function kR(t){const e=sT(t);return e.length===4?me.emptyPath():oT(e)}function jf(t){return new me(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function oT(t){return ce(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function g0(t,e,n){return{name:Rf(t,e),fields:n.value.mapValue.fields}}function RR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(ce(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(ce(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const f=d.code===void 0?M.UNKNOWN:eT(d.code);return new $(f,d.message||"")}(o);n=new nT(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=sh(t,r.document.name),i=Cn(r.document.updateTime),o=r.document.createTime?Cn(r.document.createTime):X.min(),u=new kt({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(s,i,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];n=new iu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=sh(t,r.document),i=r.readTime?Cn(r.readTime):X.min(),o=ft.newNoDocument(s,i),u=r.removedTargetIds||[];n=new iu([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=sh(t,r.document),i=r.removedTargetIds||[];n=new iu([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new wR(s,i),u=r.targetId;n=new tT(u,o)}}return n}function jR(t,e){let n;if(e instanceof qa)n={update:g0(t,e.key,e.value)};else if(e instanceof fm)n={delete:Rf(t,e.key)};else if(e instanceof Zr)n={update:g0(t,e.key,e.data),updateMask:$R(e.fieldMask)};else{if(!(e instanceof vR))return Q();n={verify:Rf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof Ia)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Mi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Na)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof Hu)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:CR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function OR(t,e){return t&&t.length>0?(ce(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Cn(s.updateTime):Cn(i);return o.isEqual(X.min())&&(o=Cn(i)),new mR(o,s.transformResults||[])}(n,e))):[]}function DR(t,e){return{documents:[iT(t,e.path)]}}function LR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=iT(t,s);const i=function(d){if(d.length!==0)return lT(xn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:Xs(p.field),direction:UR(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Cf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function MR(t){let e=kR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){ce(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const p=aT(g);return p instanceof xn&&ME(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(p=>function(N){return new ba(Js(N.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(g){let p;return p=typeof g=="object"?g.value:g,Nc(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(g){const p=!!g.before,w=g.values||[];return new Li(w,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,w=g.values||[];return new Li(w,p)}(n.endAt)),nR(e,s,o,i,u,"F",c,d)}function VR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function aT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Js(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Js(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Js(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Js(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Js(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return xn.create(n.compositeFilter.filters.map(r=>aT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function UR(t){return NR[t]}function FR(t){return SR[t]}function zR(t){return AR[t]}function Xs(t){return{fieldPath:t.canonicalString()}}function Js(t){return Xe.fromServerFormat(t.fieldPath)}function lT(t){return t instanceof Me?function(n){if(n.op==="=="){if(n0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NAN"}};if(t0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(n0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NAN"}};if(t0(n.value))return{unaryFilter:{field:Xs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Xs(n.field),op:FR(n.op),value:n.value}}}(t):t instanceof xn?function(n){const r=n.getFilters().map(s=>lT(s));return r.length===1?r[0]:{compositeFilter:{op:zR(n.op),filters:r}}}(t):Q()}function $R(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function uT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=X.min(),o=X.min(),u=nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BR{constructor(e){this.ct=e}}function qR(t){const e=MR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?qu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(){this.un=new WR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Wr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class WR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(me.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(me.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Vi(0)}static kn(){return new Vi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Yo(r.mutation,s,Bt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ne()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ne()){const s=fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Oo();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ne()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=cr();const o=Qo(),u=function(){return Qo()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Zr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Yo(f.mutation,d,f.mutation.getFieldMask(),ze.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return u.set(d,new GR(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Qo();let s=new Ne((o,u)=>o-u),i=ne();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Bt.empty();f=u.applyToLocalView(d,f),r.set(c,f);const g=(s.get(u.batchId)||ne()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,g=HE();f.forEach(p=>{if(!i.has(p)){const w=JE(n.get(p),r.get(p));w!==null&&g.set(p,w),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):dm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(fs());let u=-1,c=i;return o.next(d=>U.forEach(d,(f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{c=c.insert(f,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,ne())).next(f=>({batchId:u,changes:qE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Oo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,i).next(u=>U.forEach(u,c=>{const d=function(g,p){return new Fs(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,p)=>{o=o.insert(g,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let u=Oo();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Yo(f.mutation,d,Bt.empty(),ze.now()),Pc(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Cn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:qR(s.bundledQuery),readTime:Cn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(){this.overlays=new Ne(W.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=fs(),i=n.length+1,o=new W(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ne((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=fs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=fs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=s)););return U.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new xR(n,r));let i=this.Ir.get(n);i===void 0&&(i=ne(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(){this.Tr=new et($e.Er),this.dr=new et($e.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new $e(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new $e(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new me([])),r=new $e(n,e),s=new $e(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new me([])),r=new $e(n,e),s=new $e(n,e+1);let i=ne();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new $e(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class $e{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ae(e.wr,n.wr)}static Ar(e,n){return ae(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et($e.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new _R(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new $e(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new $e(n,0),s=new $e(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(ae);return n.forEach(s=>{const i=new $e(s,0),o=new $e(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new $e(new W(i),0);let u=new et(ae);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),U.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){ce(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new $e(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new $e(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e){this.Mr=e,this.docs=function(){return new Ne(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=cr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=cr();const o=n.path,u=new W(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||M2(L2(f),r)<=0||(s.has(f.key)||Pc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new tj(this)}getSize(e){return U.resolve(this.size)}}class tj extends KR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(e){this.persistence=e,this.Nr=new Xi(n=>lm(n),um),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new ym,this.targetCount=0,this.kr=Vi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Vi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new im(0),this.Kr=!1,this.Kr=!0,this.$r=new JR,this.referenceDelegate=e(this),this.Ur=new nj(this),this.indexManager=new HR,this.remoteDocumentCache=function(s){return new ej(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new BR(n),this.Gr=new YR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new XR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new ZR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new sj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class sj extends U2{constructor(e){super(),this.currentSequenceNumber=e}}class vm{constructor(e){this.persistence=e,this.Jr=new ym,this.Yr=null}static Zr(e){return new vm(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=ne(),s=ne();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new _m(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return qA()?8:F2(vt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new ij;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(To()<=re.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Ys(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(To()<=re.DEBUG&&H("QueryEngine","Query:",Ys(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(To()<=re.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Ys(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Pn(n))):U.resolve())}Yi(e,n){if(o0(n))return U.resolve(null);let r=Pn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=qu(n,null,"F"),r=Pn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=ne(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,qu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return o0(n)||s.isEqual(X.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(To()<=re.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Ys(n)),this.rs(e,o,n,D2(s,-1)).next(u=>u))})}ts(e,n){let r=new et($E(e));return n.forEach((s,i)=>{Pc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return To()<=re.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Ys(n)),this.Ji.getDocumentsMatchingQuery(e,n,Wr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ne(ae),this._s=new Xi(i=>lm(i),um),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function lj(t,e,n,r){return new aj(t,e,n,r)}async function cT(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=ne();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function uj(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const g=d.batch,p=g.keys();let w=U.resolve();return p.forEach(N=>{w=w.next(()=>f.getEntry(c,N)).next(T=>{const C=d.docVersions.get(N);ce(C!==null),T.version.compareTo(C)<0&&(g.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),w.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=ne();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function dT(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function cj(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((f,g)=>{const p=s.get(g);if(!p)return;u.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let w=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?w=w.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(w=w.withResumeToken(f.resumeToken,r)),s=s.insert(g,w),function(T,C,E){return T.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(p,w,f)&&u.push(n.Ur.updateTargetData(i,w))});let c=cr(),d=ne();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(dj(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(f)}return U.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function dj(t,e,n){let r=ne(),s=ne();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=cr();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):H("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function hj(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function fj(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Of(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ba(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function y0(t,e,n){const r=J(t);let s=X.min(),i=ne();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=J(c),p=g._s.get(f);return p!==void 0?U.resolve(g.os.get(p)):g.Ur.getTargetData(d,f)}(r,o,Pn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:ne())).next(u=>(pj(r,sR(e),u),{documents:u,Ts:i})))}function pj(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class v0{constructor(){this.activeTargetIds=cR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mj{constructor(){this.so=new v0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new v0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl=null;function ih(){return Vl===null?Vl=function(){return 268435456+Math.round(2147483648*Math.random())}():Vl++,"0x"+Vl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class _j extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=ih(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${u}: `,f),f),f=>{throw Ri("RestConnection",`RPC '${n}' ${u} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=yj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ih();return new Promise((o,u)=>{const c=new IE;c.setWithCredentials(!0),c.listenOnce(NE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case nu.NO_ERROR:const f=c.getResponseJson();H(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case nu.TIMEOUT:H(lt,`RPC '${e}' ${i} timed out`),u(new $(M.DEADLINE_EXCEEDED,"Request time out"));break;case nu.HTTP_ERROR:const g=c.getStatus();if(H(lt,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const w=p==null?void 0:p.error;if(w&&w.status&&w.message){const N=function(C){const E=C.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(w.status);u(new $(N,w.message))}else u(new $(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new $(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{H(lt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(lt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ih(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=PE(),u=AE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");H(lt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let p=!1,w=!1;const N=new vj({Io:C=>{w?H(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,C):(p||(H(lt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),H(lt,`RPC '${e}' stream ${s} sending:`,C),g.send(C))},To:()=>g.close()}),T=(C,E,x)=>{C.listen(E,y=>{try{x(y)}catch(S){setTimeout(()=>{throw S},0)}})};return T(g,jo.EventType.OPEN,()=>{w||(H(lt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),T(g,jo.EventType.CLOSE,()=>{w||(w=!0,H(lt,`RPC '${e}' stream ${s} transport closed`),N.So())}),T(g,jo.EventType.ERROR,C=>{w||(w=!0,Ri(lt,`RPC '${e}' stream ${s} transport errored:`,C),N.So(new $(M.UNAVAILABLE,"The operation could not be completed")))}),T(g,jo.EventType.MESSAGE,C=>{var E;if(!w){const x=C.data[0];ce(!!x);const y=x,S=y.error||((E=y[0])===null||E===void 0?void 0:E.error);if(S){H(lt,`RPC '${e}' stream ${s} received error:`,S);const D=S.status;let V=function(A){const b=De[A];if(b!==void 0)return eT(b)}(D),I=S.message;V===void 0&&(V=M.INTERNAL,I="Unknown error status: "+D+" with message "+S.message),w=!0,N.So(new $(V,I)),g.close()}else H(lt,`RPC '${e}' stream ${s} received:`,x),N.bo(x)}}),T(u,SE.STAT_EVENT,C=>{C.stat===bf.PROXY?H(lt,`RPC '${e}' stream ${s} detected buffering proxy`):C.stat===bf.NOPROXY&&H(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function oh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jc(t){return new PR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new hT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ur(n.toString()),ur("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new $(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class xj extends fT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=RR(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?Cn(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=jf(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=Af(c)?{documents:DR(i,c)}:{query:LR(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=rT(i,o.resumeToken);const d=Cf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){u.readTime=Wu(i,o.snapshotVersion.toTimestamp());const d=Cf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=VR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=jf(this.serializer),n.removeTarget=e,this.a_(n)}}class wj extends fT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return ce(!!e.streamToken),this.lastStreamToken=e.streamToken,ce(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ce(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=OR(e.writeResults,e.commitTime),r=Cn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=jf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>jR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,kf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new $(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,kf(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new $(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Tj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ur(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{zs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=J(c);d.L_.add(4),await Wa(d),d.q_.set("Unknown"),d.L_.delete(4),await Oc(d)}(this))})}),this.q_=new Tj(r,s)}}async function Oc(t){if(zs(t))for(const e of t.B_)await e(!0)}async function Wa(t){for(const e of t.B_)await e(!1)}function pT(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Tm(n)?Em(n):Ji(n).r_()&&wm(n,e))}function xm(t,e){const n=J(t),r=Ji(n);n.N_.delete(e),r.r_()&&mT(n,e),n.N_.size===0&&(r.r_()?r.o_():zs(n)&&n.q_.set("Unknown"))}function wm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ji(t).A_(e)}function mT(t,e){t.Q_.xe(e),Ji(t).R_(e)}function Em(t){t.Q_=new IR({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ji(t).start(),t.q_.v_()}function Tm(t){return zs(t)&&!Ji(t).n_()&&t.N_.size>0}function zs(t){return J(t).L_.size===0}function gT(t){t.Q_=void 0}async function Ij(t){t.q_.set("Online")}async function Nj(t){t.N_.forEach((e,n)=>{wm(t,e)})}async function Sj(t,e){gT(t),Tm(t)?(t.q_.M_(e),Em(t)):t.q_.set("Unknown")}async function Aj(t,e,n){if(t.q_.set("Online"),e instanceof nT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Ku(t,r)}else if(e instanceof iu?t.Q_.Ke(e):e instanceof tT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await dT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),mT(i,c);const g=new kr(f.target,c,d,f.sequenceNumber);wm(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Ku(t,r)}}async function Ku(t,e,n){if(!Ba(e))throw e;t.L_.add(1),await Wa(t),t.q_.set("Offline"),n||(n=()=>dT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Oc(t)})}function yT(t,e){return e().catch(n=>Ku(t,n,e))}async function Dc(t){const e=J(t),n=Gr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Pj(e);)try{const s=await hj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Cj(e,s)}catch(s){await Ku(e,s)}vT(e)&&_T(e)}function Pj(t){return zs(t)&&t.O_.length<10}function Cj(t,e){t.O_.push(e);const n=Gr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function vT(t){return zs(t)&&!Gr(t).n_()&&t.O_.length>0}function _T(t){Gr(t).start()}async function kj(t){Gr(t).p_()}async function Rj(t){const e=Gr(t);for(const n of t.O_)e.m_(n.mutations)}async function jj(t,e,n){const r=t.O_.shift(),s=pm.from(r,e,n);await yT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Dc(t)}async function Oj(t,e){e&&Gr(t).V_&&await async function(r,s){if(function(o){return ER(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();Gr(r).s_(),await yT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Dc(r)}}(t,e),vT(t)&&_T(t)}async function x0(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=zs(n);n.L_.add(3),await Wa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Oc(n)}async function Dj(t,e){const n=J(t);e?(n.L_.delete(2),await Oc(n)):e||(n.L_.add(2),await Wa(n),n.q_.set("Unknown"))}function Ji(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new xj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Ij.bind(null,t),Ro:Nj.bind(null,t),mo:Sj.bind(null,t),d_:Aj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Tm(t)?Em(t):t.q_.set("Unknown")):(await t.K_.stop(),gT(t))})),t.K_}function Gr(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new wj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:kj.bind(null,t),mo:Oj.bind(null,t),f_:Rj.bind(null,t),g_:jj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Dc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new bm(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new $(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(t,e){if(ur("AsyncQueue",`${e}: ${t}`),Ba(t))return new $(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Oo(),this.sortedSet=new Ne(this.comparator)}static emptySet(e){return new Ti(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ti)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ti;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(){this.W_=new Ne(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ui{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Ui(e,n,Ti.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ac(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Mj{constructor(){this.queries=E0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=E0(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new $(M.ABORTED,"Firestore shutting down"))}}function E0(){return new Xi(t=>zE(t),Ac)}async function xT(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Lj,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Im(o,`Initialization of query '${Ys(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Nm(n)}async function wT(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Vj(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&Nm(n)}function Uj(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Nm(t){t.Y_.forEach(e=>{e.next()})}var Df,T0;(T0=Df||(Df={})).ea="default",T0.Cache="cache";class ET{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ui(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ui.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Df.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e){this.key=e}}class bT{constructor(e){this.key=e}}class Fj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=ne(),this.mutatedKeys=ne(),this.Aa=$E(e),this.Ra=new Ti(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new w0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const p=s.get(f),w=Pc(this.query,g)?g:null,N=!!p&&this.mutatedKeys.has(p.key),T=!!w&&(w.hasLocalMutations||this.mutatedKeys.has(w.key)&&w.hasCommittedMutations);let C=!1;p&&w?p.data.isEqual(w.data)?N!==T&&(r.track({type:3,doc:w}),C=!0):this.ga(p,w)||(r.track({type:2,doc:w}),C=!0,(c&&this.Aa(w,c)>0||d&&this.Aa(w,d)<0)&&(u=!0)):!p&&w?(r.track({type:0,doc:w}),C=!0):p&&!w&&(r.track({type:1,doc:p}),C=!0,(c||d)&&(u=!0)),C&&(w?(o=o.add(w),i=T?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(w,N){const T=C=>{switch(C){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return T(w)-T(N)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Ui(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new w0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=ne(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new bT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new TT(r))}),n}ba(e){this.Ta=e.Ts,this.da=ne();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ui.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class zj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class $j{constructor(e){this.key=e,this.va=!1}}class Bj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xi(u=>zE(u),Ac),this.Ma=new Map,this.xa=new Set,this.Oa=new Ne(W.comparator),this.Na=new Map,this.La=new ym,this.Ba={},this.ka=new Map,this.qa=Vi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function qj(t,e,n=!0){const r=CT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await IT(r,e,n,!0),s}async function Hj(t,e){const n=CT(t);await IT(n,e,!0,!1)}async function IT(t,e,n,r){const s=await fj(t.localStore,Pn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Wj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&pT(t.remoteStore,s),u}async function Wj(t,e,n,r,s){t.Ka=(g,p,w)=>async function(T,C,E,x){let y=C.view.ma(E);y.ns&&(y=await y0(T.localStore,C.query,!1).then(({documents:I})=>C.view.ma(I,y)));const S=x&&x.targetChanges.get(C.targetId),D=x&&x.targetMismatches.get(C.targetId)!=null,V=C.view.applyChanges(y,T.isPrimaryClient,S,D);return I0(T,C.targetId,V.wa),V.snapshot}(t,g,p,w);const i=await y0(t.localStore,e,!0),o=new Fj(e,i.Ts),u=o.ma(i.documents),c=Ha.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);I0(t,n,d.wa);const f=new zj(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Kj(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ac(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Of(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&xm(r.remoteStore,s.targetId),Lf(r,s.targetId)}).catch($a)):(Lf(r,s.targetId),await Of(r.localStore,s.targetId,!0))}async function Gj(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),xm(n.remoteStore,r.targetId))}async function Qj(t,e,n){const r=nO(t);try{const s=await function(o,u){const c=J(o),d=ze.now(),f=u.reduce((w,N)=>w.add(N.key),ne());let g,p;return c.persistence.runTransaction("Locally write mutations","readwrite",w=>{let N=cr(),T=ne();return c.cs.getEntries(w,f).next(C=>{N=C,N.forEach((E,x)=>{x.isValidDocument()||(T=T.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(w,N)).next(C=>{g=C;const E=[];for(const x of u){const y=yR(x,g.get(x.key).overlayedDocument);y!=null&&E.push(new Zr(x.key,y,OE(y.value.mapValue),Jt.exists(!0)))}return c.mutationQueue.addMutationBatch(w,d,E,u)}).next(C=>{p=C;const E=C.applyToLocalDocumentSet(g,T);return c.documentOverlayCache.saveOverlays(w,C.batchId,E)})}).then(()=>({batchId:p.batchId,changes:qE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ne(ae)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ka(r,s.changes),await Dc(r.remoteStore)}catch(s){const i=Im(s,"Failed to persist write");n.reject(i)}}async function NT(t,e){const n=J(t);try{const r=await cj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(ce(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?ce(o.va):s.removedDocuments.size>0&&(ce(o.va),o.va=!1))}),await Ka(n,r,e)}catch(r){await $a(r)}}function b0(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=J(o);c.onlineState=u;let d=!1;c.queries.forEach((f,g)=>{for(const p of g.j_)p.Z_(u)&&(d=!0)}),d&&Nm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Yj(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ne(W.comparator);o=o.insert(i,ft.newNoDocument(i,X.min()));const u=ne().add(i),c=new Rc(X.min(),new Map,new Ne(ae),o,u);await NT(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Sm(r)}else await Of(r.localStore,e,!1).then(()=>Lf(r,e,n)).catch($a)}async function Xj(t,e){const n=J(t),r=e.batch.batchId;try{const s=await uj(n.localStore,e);AT(n,r,null),ST(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ka(n,s)}catch(s){await $a(s)}}async function Jj(t,e,n){const r=J(t);try{const s=await function(o,u){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(ce(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);AT(r,e,n),ST(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ka(r,s)}catch(s){await $a(s)}}function ST(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function AT(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Lf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||PT(t,r)})}function PT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(xm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Sm(t))}function I0(t,e,n){for(const r of n)r instanceof TT?(t.La.addReference(r.key,e),Zj(t,r)):r instanceof bT?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||PT(t,r.key)):Q()}function Zj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Sm(t))}function Sm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(me.fromString(e)),r=t.qa.next();t.Na.set(r,new $j(n)),t.Oa=t.Oa.insert(n,r),pT(t.remoteStore,new kr(Pn(cm(n.path)),r,"TargetPurposeLimboResolution",im.oe))}}async function Ka(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=_m.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=J(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,p=>U.forEach(p.$i,w=>f.persistence.referenceDelegate.addReference(g,p.targetId,w)).next(()=>U.forEach(p.Ui,w=>f.persistence.referenceDelegate.removeReference(g,p.targetId,w)))))}catch(g){if(!Ba(g))throw g;H("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const w=f.os.get(p),N=w.snapshotVersion,T=w.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(p,T)}}}(r.localStore,i))}async function eO(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await cT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new $(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ka(n,r.hs)}}function tO(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return ne().add(r.key);{let s=ne();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function CT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=NT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Yj.bind(null,e),e.Ca.d_=Vj.bind(null,e.eventManager),e.Ca.$a=Uj.bind(null,e.eventManager),e}function nO(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Jj.bind(null,e),e}class Gu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=jc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return lj(this.persistence,new oj,e.initialUser,this.serializer)}Ga(e){return new rj(vm.Zr,this.serializer)}Wa(e){return new mj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Gu.provider={build:()=>new Gu};class Mf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>b0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=eO.bind(null,this.syncEngine),await Dj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Mj}()}createDatastore(e){const n=jc(e.databaseInfo.databaseId),r=function(i){return new _j(i)}(e.databaseInfo);return function(i,o,u,c){return new Ej(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new bj(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>b0(this.syncEngine,n,0),function(){return _0.D()?new _0:new gj}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,f){const g=new Bj(s,i,o,u,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Wa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Mf.provider={build:()=>new Mf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ur("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=kE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Im(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function ah(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await cT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function N0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await sO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>x0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>x0(e.remoteStore,s)),t._onlineComponents=e}async function sO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await ah(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Ri("Error using user provided cache. Falling back to memory cache: "+n),await ah(t,new Gu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await ah(t,new Gu);return t._offlineComponents}async function RT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await N0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await N0(t,new Mf))),t._onlineComponents}function iO(t){return RT(t).then(e=>e.syncEngine)}async function jT(t){const e=await RT(t),n=e.eventManager;return n.onListen=qj.bind(null,e.syncEngine),n.onUnlisten=Kj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Hj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Gj.bind(null,e.syncEngine),n}function oO(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new kT({next:p=>{f.Za(),o.enqueueAndForget(()=>wT(i,g));const w=p.docs.has(u);!w&&p.fromCache?d.reject(new $(M.UNAVAILABLE,"Failed to get document because the client is offline.")):w&&p.fromCache&&c&&c.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new ET(cm(u.path),f,{includeMetadataChanges:!0,_a:!0});return xT(i,g)}(await jT(t),t.asyncQueue,e,n,r)),r.promise}function aO(t,e,n={}){const r=new tr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new kT({next:p=>{f.Za(),o.enqueueAndForget(()=>wT(i,g)),p.fromCache&&c.source==="server"?d.reject(new $(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new ET(u,f,{includeMetadataChanges:!0,_a:!0});return xT(i,g)}(await jT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DT(t,e,n){if(!n)throw new $(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function lO(t,e,n,r){if(e===!0&&r===!0)throw new $(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function A0(t){if(!W.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function P0(t){if(W.isDocumentKey(t))throw new $(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Lc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function wn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new $(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Lc(t);throw new $(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function uO(t,e){if(e<=0)throw new $(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new $(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new $(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}lO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=OT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new $(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Mc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new C0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new $(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new $(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new C0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new N2;switch(r.type){case"firstParty":return new C2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new $(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=S0.get(n);r&&(H("ComponentProvider","Removing Datastore"),S0.delete(n),r.terminate())}(this),Promise.resolve()}}function cO(t,e,n,r={}){var s;const i=(t=wn(t,Mc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Ri("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=dt.MOCK_USER;else{u=Mw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new $(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(d)}t._authCredentials=new S2(new CE(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new mr(this.firestore,e,this._query)}}class It{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $r(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new It(this.firestore,e,this._key)}}class $r extends mr{constructor(e,n,r){super(e,n,cm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new It(this.firestore,null,new W(e))}withConverter(e){return new $r(this.firestore,e,this._path)}}function pt(t,e,...n){if(t=we(t),DT("collection","path",e),t instanceof Mc){const r=me.fromString(e,...n);return P0(r),new $r(t,null,r)}{if(!(t instanceof It||t instanceof $r))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return P0(r),new $r(t.firestore,null,r)}}function de(t,e,...n){if(t=we(t),arguments.length===1&&(e=kE.newId()),DT("doc","path",e),t instanceof Mc){const r=me.fromString(e,...n);return A0(r),new It(t,null,new W(r))}{if(!(t instanceof It||t instanceof $r))throw new $(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(me.fromString(e,...n));return A0(r),new It(t.firestore,t instanceof $r?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new hT(this,"async_queue_retry"),this.Vu=()=>{const r=oh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=oh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=oh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new tr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ba(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw ur("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=bm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class $s extends Mc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new k0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new k0(e),this._firestoreClient=void 0,await e}}}function dO(t,e){const n=typeof t=="object"?t:Ec(),r=typeof t=="string"?t:"(default)",s=Ms(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Ow("firestore");i&&cO(s,...i)}return s}function Am(t){if(t._terminated)throw new $(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||hO(t),t._firestoreClient}function hO(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,f){return new B2(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,OT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new rO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Fi(nt.fromBase64String(e))}catch(n){throw new $(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Fi(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new $(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new $(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new $(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ae(this._lat,e._lat)||ae(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fO=/^__.*__$/;class pO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new qa(e,this.data,n,this.fieldTransforms)}}class LT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function MT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Uc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Uc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Qu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(MT(this.Cu)&&fO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class mO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||jc(e)}Qu(e,n,r,s=!1){return new Uc({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Qa(t){const e=t._freezeSettings(),n=jc(t._databaseId);return new mO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function VT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);jm("Data must be an object, but it was:",o,r);const u=FT(r,o);let c,d;if(i.merge)c=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const p=Vf(e,g,n);if(!o.contains(p))throw new $(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);$T(f,p)||f.push(p)}c=new Bt(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new pO(new kt(u),c,d)}class Fc extends Ga{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Fc}}function gO(t,e,n){return new Uc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class km extends Ga{_toFieldTransform(e){return new XE(e.path,new Ia)}isEqual(e){return e instanceof km}}class Rm extends Ga{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=gO(this,e,!0),r=this.Ku.map(i=>Zi(i,n)),s=new Mi(r);return new XE(e.path,s)}isEqual(e){return e instanceof Rm&&ya(this.Ku,e.Ku)}}function yO(t,e,n,r){const s=t.Qu(1,e,n);jm("Data must be an object, but it was:",s,r);const i=[],o=kt.empty();Us(r,(c,d)=>{const f=Om(e,c,n);d=we(d);const g=s.Nu(f);if(d instanceof Fc)i.push(f);else{const p=Zi(d,g);p!=null&&(i.push(f),o.set(f,p))}});const u=new Bt(i);return new LT(o,u,s.fieldTransforms)}function vO(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[Vf(e,r,n)],c=[s];if(i.length%2!=0)throw new $(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)u.push(Vf(e,i[p])),c.push(i[p+1]);const d=[],f=kt.empty();for(let p=u.length-1;p>=0;--p)if(!$T(d,u[p])){const w=u[p];let N=c[p];N=we(N);const T=o.Nu(w);if(N instanceof Fc)d.push(w);else{const C=Zi(N,T);C!=null&&(d.push(w),f.set(w,C))}}const g=new Bt(d);return new LT(f,g,o.fieldTransforms)}function UT(t,e,n,r=!1){return Zi(n,t.Qu(r?4:3,e))}function Zi(t,e){if(zT(t=we(t)))return jm("Unsupported field value:",e,t),FT(t,e);if(t instanceof Ga)return function(r,s){if(!MT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Zi(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=we(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return dR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Wu(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Wu(s.serializer,i)}}if(r instanceof Pm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fi)return{bytesValue:rT(s.serializer,r._byteString)};if(r instanceof It){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:gm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Cm)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return hm(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Lc(r)}`)}(t,e)}function FT(t,e){const n={};return RE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(t,(r,s)=>{const i=Zi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function zT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Pm||t instanceof Fi||t instanceof It||t instanceof Ga||t instanceof Cm)}function jm(t,e,n){if(!zT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Lc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Vf(t,e,n){if((e=we(e))instanceof Vc)return e._internalPath;if(typeof e=="string")return Om(t,e);throw Qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const _O=new RegExp("[~\\*/\\[\\]]");function Om(t,e,n){if(e.search(_O)>=0)throw Qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vc(...e.split("."))._internalPath}catch{throw Qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Qu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new $(M.INVALID_ARGUMENT,u+t+c)}function $T(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new It(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new xO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(zc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class xO extends Dm{data(){return super.data()}}function zc(t,e){return typeof e=="string"?Om(t,e):e instanceof Vc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new $(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Lm{}class $c extends Lm{}function Br(t,e,...n){let r=[];e instanceof Lm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Mm).length,u=i.filter(c=>c instanceof Bc).length;if(o>1||o>0&&u>0)throw new $(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Bc extends $c{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Bc(e,n,r)}_apply(e){const n=this._parse(e);return BT(e._query,n),new mr(e.firestore,e.converter,Pf(e._query,n))}_parse(e){const n=Qa(e.firestore);return function(i,o,u,c,d,f,g){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new $(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){j0(g,f);const w=[];for(const N of g)w.push(R0(c,i,N));p={arrayValue:{values:w}}}else p=R0(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||j0(g,f),p=UT(u,o,g,f==="in"||f==="not-in");return Me.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Rt(t,e,n){const r=e,s=zc("where",t);return Bc._create(s,r,n)}class Mm extends Lm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Mm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:xn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)BT(o,c),o=Pf(o,c)}(e._query,n),new mr(e.firestore,e.converter,Pf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Vm extends $c{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Vm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new $(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ba(i,o)}(e._query,this._field,this._direction);return new mr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function _s(t,e="asc"){const n=e,r=zc("orderBy",t);return Vm._create(r,n)}class Um extends $c{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Um(e,n,r)}_apply(e){return new mr(e.firestore,e.converter,qu(e._query,this._limit,this._limitType))}}function EO(t){return uO("limit",t),Um._create("limit",t,"F")}class Fm extends $c{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fm(e,n,r)}_apply(e){const n=bO(e,this.type,this._docOrFields,this._inclusive);return new mr(e.firestore,e.converter,function(s,i){return new Fs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function TO(...t){return Fm._create("startAfter",t,!1)}function bO(t,e,n,r){if(n[0]=we(n[0]),n[0]instanceof Dm)return function(i,o,u,c,d){if(!c)throw new $(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const f=[];for(const g of Ei(i))if(g.field.isKeyField())f.push(Bu(o,c.key));else{const p=c.data.field(g.field);if(Sc(p))throw new $(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const w=g.field.canonicalString();throw new $(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${w}' (used as the orderBy) does not exist.`)}f.push(p)}return new Li(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Qa(t.firestore);return function(o,u,c,d,f,g){const p=o.explicitOrderBy;if(f.length>p.length)throw new $(M.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const w=[];for(let N=0;N<f.length;N++){const T=f[N];if(p[N].field.isKeyField()){if(typeof T!="string")throw new $(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!dm(o)&&T.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const C=o.path.child(me.fromString(T));if(!W.isDocumentKey(C))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${C}' is not because it contains an odd number of segments.`);const E=new W(C);w.push(Bu(u,E))}else{const C=UT(c,d,T);w.push(C)}}return new Li(w,g)}(t._query,t.firestore._databaseId,s,e,n,r)}}function R0(t,e,n){if(typeof(n=we(n))=="string"){if(n==="")throw new $(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!dm(e)&&n.indexOf("/")!==-1)throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(me.fromString(n));if(!W.isDocumentKey(r))throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bu(t,new W(r))}if(n instanceof It)return Bu(t,n._key);throw new $(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Lc(n)}.`)}function j0(t,e){if(!Array.isArray(t)||t.length===0)throw new $(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function BT(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new $(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class IO{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(As(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Us(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Re(o.doubleValue));return new Cm(i)}convertGeoPoint(e){return new Pm(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=om(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=me.fromString(e);ce(uT(r));const s=new Ea(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||ur(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class HT extends Dm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new ou(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(zc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class ou extends HT{data(e={}){return super.data(e)}}class NO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Lo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ou(this._firestore,this._userDataWriter,r.key,r,new Lo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new $(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new ou(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Lo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new ou(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Lo(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:SO(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function SO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zt(t){t=wn(t,It);const e=wn(t.firestore,$s);return oO(Am(e),t._key).then(n=>AO(e,t,n))}class WT extends IO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new It(this.firestore,null,n)}}function nr(t){t=wn(t,mr);const e=wn(t.firestore,$s),n=Am(e),r=new WT(e);return wO(t._query),aO(n,t._query).then(s=>new NO(e,r,t,s))}function Yu(t,e,n){t=wn(t,It);const r=wn(t.firestore,$s),s=qT(t.converter,e,n);return qc(r,[VT(Qa(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,Jt.none())])}function en(t,e,n,...r){t=wn(t,It);const s=wn(t.firestore,$s),i=Qa(s);let o;return o=typeof(e=we(e))=="string"||e instanceof Vc?vO(i,"updateDoc",t._key,e,n,r):yO(i,"updateDoc",t._key,e),qc(s,[o.toMutation(t._key,Jt.exists(!0))])}function KT(t){return qc(wn(t.firestore,$s),[new fm(t._key,Jt.none())])}function Cs(t,e){const n=wn(t.firestore,$s),r=de(t),s=qT(t.converter,e);return qc(n,[VT(Qa(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,Jt.exists(!1))]).then(()=>r)}function qc(t,e){return function(r,s){const i=new tr;return r.asyncQueue.enqueueAndForget(async()=>Qj(await iO(r),s,i)),i.promise}(Am(t),e)}function AO(t,e,n){const r=n.docs.get(e._key),s=new WT(t);return new HT(t,s,e._key,r,new Lo(n.hasPendingWrites,n.fromCache),e.converter)}function le(){return new km("serverTimestamp")}function GT(...t){return new Rm("arrayUnion",t)}(function(e,n=!0){(function(s){Yi=s})(Vs),_n(new rn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new $s(new A2(r.getProvider("auth-internal")),new R2(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new $(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ea(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Mt(Yv,"4.7.3",e),Mt(Yv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT="firebasestorage.googleapis.com",PO="storageBucket",CO=2*60*1e3,kO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class On extends En{constructor(e,n,r=0){super(lh(e),`Firebase Storage: ${n} (${lh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,On.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return lh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Rn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Rn||(Rn={}));function lh(t){return"storage/"+t}function RO(){const t="An unknown error occurred, please check the error payload for server response.";return new On(Rn.UNKNOWN,t)}function jO(){return new On(Rn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OO(){return new On(Rn.CANCELED,"User canceled the upload/download.")}function DO(t){return new On(Rn.INVALID_URL,"Invalid URL '"+t+"'.")}function LO(t){return new On(Rn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function O0(t){return new On(Rn.INVALID_ARGUMENT,t)}function YT(){return new On(Rn.APP_DELETED,"The Firebase app was deleted.")}function MO(t){return new On(Rn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=fn.makeFromUrl(e,n)}catch{return new fn(e,"")}if(r.path==="")return r;throw LO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(S){S.path.charAt(S.path.length-1)==="/"&&(S.path_=S.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(S){S.path_=decodeURIComponent(S.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",w=new RegExp(`^https?://${g}/${f}/b/${s}/o${p}`,"i"),N={bucket:1,path:3},T=n===QT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,C="([^?#]*)",E=new RegExp(`^https?://${T}/${s}/${C}`,"i"),y=[{regex:u,indices:c,postModify:i},{regex:w,indices:N,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let S=0;S<y.length;S++){const D=y[S],V=D.regex.exec(e);if(V){const I=V[D.indices.bucket];let v=V[D.indices.path];v||(v=""),r=new fn(I,v),D.postModify(r);break}}if(r==null)throw DO(e);return r}}class VO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UO(t,e,n){let r=1,s=null,i=null,o=!1,u=0;function c(){return u===2}let d=!1;function f(...C){d||(d=!0,e.apply(null,C))}function g(C){s=setTimeout(()=>{s=null,t(w,c())},C)}function p(){i&&clearTimeout(i)}function w(C,...E){if(d){p();return}if(C){p(),f.call(null,C,...E);return}if(c()||o){p(),f.call(null,C,...E);return}r<64&&(r*=2);let y;u===1?(u=2,y=0):y=(r+Math.random())*1e3,g(y)}let N=!1;function T(C){N||(N=!0,p(),!d&&(s!==null?(C||(u=2),clearTimeout(s),g(0)):C||(u=1)))}return g(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function FO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zO(t){return t!==void 0}function D0(t,e,n,r){if(r<e)throw O0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw O0(`Invalid value for '${t}'. Expected ${n} or less.`)}function $O(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Xu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Xu||(Xu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,n,r,s,i,o,u,c,d,f,g,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((w,N)=>{this.resolve_=w,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Ul(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===Xu.NO_ERROR,c=i.getStatus();if(!u||BO(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Xu.ABORT;r(!1,new Ul(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Ul(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());zO(c)?i(c):i()}catch(c){o(c)}else if(u!==null){const c=RO();c.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,c)):o(c)}else if(s.canceled){const c=this.appDelete_?YT():OO();o(c)}else{const c=jO();o(c)}};this.canceled_?n(!1,new Ul(!1,null,!0)):this.backoffId_=UO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&FO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Ul{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function HO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function WO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function KO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function GO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function QO(t,e,n,r,s,i,o=!0){const u=$O(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return KO(d,e),HO(d,n),WO(d,i),GO(d,r),new qO(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function XO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ju{constructor(e,n){this._service=e,n instanceof fn?this._location=n:this._location=fn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ju(e,n)}get root(){const e=new fn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return XO(this._location.path)}get storage(){return this._service}get parent(){const e=YO(this._location.path);if(e===null)return null;const n=new fn(this._location.bucket,e);return new Ju(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw MO(e)}}function L0(t,e){const n=e==null?void 0:e[PO];return n==null?null:fn.makeFromBucketSpec(n,t)}function JO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Mw(s,t.app.options.projectId))}class ZO{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=QT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=CO,this._maxUploadRetryTime=kO,this._requests=new Set,s!=null?this._bucket=fn.makeFromBucketSpec(s,this._host):this._bucket=L0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=fn.makeFromBucketSpec(this._url,e):this._bucket=L0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){D0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){D0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ju(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new VO(YT());{const o=QO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const M0="@firebase/storage",V0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XT="storage";function eD(t=Ec(),e){t=we(t);const r=Ms(t,XT).getImmediate({identifier:e}),s=Ow("storage");return s&&tD(r,...s),r}function tD(t,e,n,r={}){JO(t,e,n,r)}function nD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new ZO(n,r,s,e,Vs)}function rD(){_n(new rn(XT,nD,"PUBLIC").setMultipleInstances(!0)),Mt(M0,V0,""),Mt(M0,V0,"esm2017")}rD();const JT="@firebase/installations",zm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZT=1e4,eb=`w:${zm}`,tb="FIS_v2",sD="https://firebaseinstallations.googleapis.com/v1",iD=60*60*1e3,oD="installations",aD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ks=new Ls(oD,aD,lD);function nb(t){return t instanceof En&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rb({projectId:t}){return`${sD}/projects/${t}/installations`}function sb(t){return{token:t.token,requestStatus:2,expiresIn:cD(t.expiresIn),creationTime:Date.now()}}async function ib(t,e){const r=(await e.json()).error;return ks.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ob({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function uD(t,{refreshToken:e}){const n=ob(t);return n.append("Authorization",dD(e)),n}async function ab(t){const e=await t();return e.status>=500&&e.status<600?t():e}function cD(t){return Number(t.replace("s","000"))}function dD(t){return`${tb} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=rb(t),s=ob(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:tb,appId:t.appId,sdkVersion:eb},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await ab(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:sb(d.authToken)}}else throw await ib("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pD=/^[cdef][\w-]{21}$/,Uf="";function mD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=gD(t);return pD.test(n)?n:Uf}catch{return Uf}}function gD(t){return fD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ub=new Map;function cb(t,e){const n=Hc(t);db(n,e),yD(n,e)}function db(t,e){const n=ub.get(t);if(n)for(const r of n)r(e)}function yD(t,e){const n=vD();n&&n.postMessage({key:t,fid:e}),_D()}let ps=null;function vD(){return!ps&&"BroadcastChannel"in self&&(ps=new BroadcastChannel("[Firebase] FID Change"),ps.onmessage=t=>{db(t.data.key,t.data.fid)}),ps}function _D(){ub.size===0&&ps&&(ps.close(),ps=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xD="firebase-installations-database",wD=1,Rs="firebase-installations-store";let uh=null;function $m(){return uh||(uh=wc(xD,wD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Rs)}}})),uh}async function Zu(t,e){const n=Hc(t),s=(await $m()).transaction(Rs,"readwrite"),i=s.objectStore(Rs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&cb(t,e.fid),e}async function hb(t){const e=Hc(t),r=(await $m()).transaction(Rs,"readwrite");await r.objectStore(Rs).delete(e),await r.done}async function Wc(t,e){const n=Hc(t),s=(await $m()).transaction(Rs,"readwrite"),i=s.objectStore(Rs),o=await i.get(n),u=e(o);return u===void 0?await i.delete(n):await i.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&cb(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t){let e;const n=await Wc(t.appConfig,r=>{const s=ED(r),i=TD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Uf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ED(t){const e=t||{fid:mD(),registrationStatus:0};return fb(e)}function TD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ks.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=bD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ID(t)}:{installationEntry:e}}async function bD(t,e){try{const n=await hD(t,e);return Zu(t.appConfig,n)}catch(n){throw nb(n)&&n.customData.serverCode===409?await hb(t.appConfig):await Zu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ID(t){let e=await U0(t.appConfig);for(;e.registrationStatus===1;)await lb(100),e=await U0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Bm(t);return r||n}return e}function U0(t){return Wc(t,e=>{if(!e)throw ks.create("installation-not-found");return fb(e)})}function fb(t){return ND(t)?{fid:t.fid,registrationStatus:0}:t}function ND(t){return t.registrationStatus===1&&t.registrationTime+ZT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SD({appConfig:t,heartbeatServiceProvider:e},n){const r=AD(t,n),s=uD(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:eb,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await ab(()=>fetch(r,u));if(c.ok){const d=await c.json();return sb(d)}else throw await ib("Generate Auth Token",c)}function AD(t,{fid:e}){return`${rb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t,e=!1){let n;const r=await Wc(t.appConfig,i=>{if(!pb(i))throw ks.create("not-registered");const o=i.authToken;if(!e&&kD(o))return i;if(o.requestStatus===1)return n=PD(t,e),i;{if(!navigator.onLine)throw ks.create("app-offline");const u=jD(i);return n=CD(t,u),u}});return n?await n:r.authToken}async function PD(t,e){let n=await F0(t.appConfig);for(;n.authToken.requestStatus===1;)await lb(100),n=await F0(t.appConfig);const r=n.authToken;return r.requestStatus===0?qm(t,e):r}function F0(t){return Wc(t,e=>{if(!pb(e))throw ks.create("not-registered");const n=e.authToken;return OD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function CD(t,e){try{const n=await SD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Zu(t.appConfig,r),n}catch(n){if(nb(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await hb(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zu(t.appConfig,r)}throw n}}function pb(t){return t!==void 0&&t.registrationStatus===2}function kD(t){return t.requestStatus===2&&!RD(t)}function RD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+iD}function jD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function OD(t){return t.requestStatus===1&&t.requestTime+ZT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DD(t){const e=t,{installationEntry:n,registrationPromise:r}=await Bm(e);return r?r.catch(console.error):qm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LD(t,e=!1){const n=t;return await MD(n),(await qm(n,e)).token}async function MD(t){const{registrationPromise:e}=await Bm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VD(t){if(!t||!t.options)throw ch("App Configuration");if(!t.name)throw ch("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ch(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ch(t){return ks.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mb="installations",UD="installations-internal",FD=t=>{const e=t.getProvider("app").getImmediate(),n=VD(e),r=Ms(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},zD=t=>{const e=t.getProvider("app").getImmediate(),n=Ms(e,mb).getImmediate();return{getId:()=>DD(n),getToken:s=>LD(n,s)}};function $D(){_n(new rn(mb,FD,"PUBLIC")),_n(new rn(UD,zD,"PRIVATE"))}$D();Mt(JT,zm);Mt(JT,zm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BD="/firebase-messaging-sw.js",qD="/firebase-cloud-messaging-push-scope",gb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",HD="https://fcmregistrations.googleapis.com/v1",yb="google.c.a.c_id",WD="google.c.a.c_l",KD="google.c.a.ts",GD="google.c.a.e";var z0;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(z0||(z0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Sa;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Sa||(Sa={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function QD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dh="fcm_token_details_db",YD=5,$0="fcm_token_object_Store";async function XD(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(dh))return null;let e=null;return(await wc(dh,YD,{upgrade:async(r,s,i,o)=>{var u;if(s<2||!r.objectStoreNames.contains($0))return;const c=o.objectStore($0),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(u=f.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:qn(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:qn(f.auth),p256dh:qn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:qn(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:qn(f.auth),p256dh:qn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:qn(f.vapidKey)}}}}}})).close(),await Zd(dh),await Zd("fcm_vapid_details_db"),await Zd("undefined"),JD(e)?e:null}function JD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="firebase-messaging-database",eL=1,Aa="firebase-messaging-store";let hh=null;function vb(){return hh||(hh=wc(ZD,eL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Aa)}}})),hh}async function tL(t){const e=_b(t),r=await(await vb()).transaction(Aa).objectStore(Aa).get(e);if(r)return r;{const s=await XD(t.appConfig.senderId);if(s)return await Hm(t,s),s}}async function Hm(t,e){const n=_b(t),s=(await vb()).transaction(Aa,"readwrite");return await s.objectStore(Aa).put(e,n),await s.done,e}function _b({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},gt=new Ls("messaging","Messaging",nL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rL(t,e){const n=await Km(t),r=xb(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(Wm(t.appConfig),s)).json()}catch(o){throw gt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw gt.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw gt.create("token-subscribe-no-token");return i.token}async function sL(t,e){const n=await Km(t),r=xb(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${Wm(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw gt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw gt.create("token-update-failed",{errorInfo:o})}if(!i.token)throw gt.create("token-update-no-token");return i.token}async function iL(t,e){const r={method:"DELETE",headers:await Km(t)};try{const i=await(await fetch(`${Wm(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw gt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw gt.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function Wm({projectId:t}){return`${HD}/projects/${t}/registrations`}async function Km({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function xb({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==gb&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oL=7*24*60*60*1e3;async function aL(t){const e=await uL(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:qn(e.getKey("auth")),p256dh:qn(e.getKey("p256dh"))},r=await tL(t.firebaseDependencies);if(r){if(cL(r.subscriptionOptions,n))return Date.now()>=r.createTime+oL?lL(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await iL(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return B0(t.firebaseDependencies,n)}else return B0(t.firebaseDependencies,n)}async function lL(t,e){try{const n=await sL(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await Hm(t.firebaseDependencies,r),n}catch(n){throw n}}async function B0(t,e){const r={token:await rL(t,e),createTime:Date.now(),subscriptionOptions:e};return await Hm(t,r),r.token}async function uL(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:QD(e)})}function cL(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function q0(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return dL(e,t),hL(e,t),fL(e,t),e}function dL(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function hL(t,e){e.data&&(t.data=e.data)}function fL(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;u&&(t.fcmOptions.link=u);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pL(t){return typeof t=="object"&&!!t&&yb in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){if(!t||!t.options)throw fh("App Configuration Object");if(!t.name)throw fh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw fh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function fh(t){return gt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gL{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=mL(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t){try{t.swRegistration=await navigator.serviceWorker.register(BD,{scope:qD}),t.swRegistration.update().catch(()=>{})}catch(e){throw gt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vL(t,e){if(!e&&!t.swRegistration&&await yL(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw gt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=gb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wb(t,e){if(!navigator)throw gt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw gt.create("permission-blocked");return await _L(t,e==null?void 0:e.vapidKey),await vL(t,e==null?void 0:e.serviceWorkerRegistration),aL(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xL(t,e,n){const r=wL(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[yb],message_name:n[WD],message_time:n[KD],message_device_time:Math.floor(Date.now()/1e3)})}function wL(t){switch(t){case Sa.NOTIFICATION_CLICKED:return"notification_open";case Sa.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function EL(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Sa.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(q0(n)):t.onMessageHandler.next(q0(n)));const r=n.data;pL(r)&&r[GD]==="1"&&await xL(t,n.messageType,r)}const H0="@firebase/messaging",W0="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TL=t=>{const e=new gL(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>EL(e,n)),e},bL=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>wb(e,r)}};function IL(){_n(new rn("messaging",TL,"PUBLIC")),_n(new rn("messaging-internal",bL,"PRIVATE")),Mt(H0,W0),Mt(H0,W0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NL(){try{await Uw()}catch{return!1}return typeof window<"u"&&Vw()&&HA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SL(t,e){if(!navigator)throw gt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AL(t=Ec()){return NL().then(e=>{if(!e)throw gt.create("unsupported-browser")},e=>{throw gt.create("indexed-db-unsupported")}),Ms(we(t),"messaging").getImmediate()}async function PL(t,e){return t=we(t),wb(t,e)}function CL(t,e){return t=we(t),SL(t,e)}IL();const ls={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:ls.apiKey?"Set":"Missing",authDomain:ls.authDomain?"Set":"Missing",projectId:ls.projectId?"Set":"Missing",storageBucket:ls.storageBucket?"Set":"Missing",messagingSenderId:ls.messagingSenderId?"Set":"Missing",appId:ls.appId?"Set":"Missing"});const Gm=$w(ls),Zs=E2(Gm),Z=dO(Gm);eD(Gm);const Eb=new Wn;Eb.setCustomParameters({prompt:"select_account"});class kL{async register(e,n,r){try{const i=(await sk(Zs,e,n)).user;return await ak(i,{displayName:r}),await Yu(de(Z,"users",i.uid),{uid:i.uid,email:e,displayName:r,role:"student",purchasedCourses:[],createdAt:le(),lastLogin:le(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,n){try{const r=await ik(Zs,e,n);return await en(de(Z,"users",r.user.uid),{lastLogin:le()}),{success:!0,user:r.user}}catch(r){return console.error("Login error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async loginWithGoogle(){try{const n=(await kk(Zs,Eb)).user;return(await Zt(de(Z,"users",n.uid))).exists()?await en(de(Z,"users",n.uid),{lastLogin:le()}):await Yu(de(Z,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,role:"student",purchasedCourses:[],createdAt:le(),lastLogin:le(),progress:{}}),{success:!0,user:n}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await dk(Zs),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await rk(Zs,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(n){return console.error("Password reset error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async getUserData(e){try{const n=await Zt(de(Z,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(n){return console.error("Get user data error:",n),{success:!1,error:n.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const ss=new kL,RL=void 0;class jL{constructor(){this.messaging=null}async initialize(){try{return this.messaging=AL(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const n=await PL(this.messaging,{vapidKey:RL});return n?(console.log(" FCM Token:",n),e&&await en(de(Z,"users",e),{fcmTokens:GT(n),lastTokenUpdate:new Date}),n):(console.log(" Impossible de rcuprer le token"),null)}catch(n){return console.error(" Erreur rcupration token:",n),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const r=await this.getDeviceToken(e);return r?{success:!0,token:r}:{success:!1,error:"Impossible de rcuprer le token"}}catch(n){return console.error(" Erreur souscription:",n),{success:!1,error:n.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}CL(this.messaging,n=>{console.log(" Message reu (foreground):",n),n.notification&&new Notification(n.notification.title,{body:n.notification.body,icon:"/logo.png"}),e&&e(n)})}}const au=new jL,Tb=R.createContext({}),Vt=()=>{const t=R.useContext(Tb);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},OL=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(null),[i,o]=R.useState(!0),[u,c]=R.useState(null),d=async y=>{try{const S=await ss.getUserData(y);if(S.success)return s(S.data),console.log("Loaded userProfile from Firestore:",S.data),S.data}catch(S){console.error("Error loading user profile:",S)}return null};R.useEffect(()=>ck(Zs,async S=>{if(n(S),console.log("Auth state changed - uid:",(S==null?void 0:S.uid)||null),S){const D=await d(S.uid);console.log("After loadUserProfile - userProfile:",D),(D==null?void 0:D.role)!=="admin"?(await au.initialize(),(await au.subscribeToNotifications(S.uid)).success&&console.log(" Notifications actives"),au.onMessageReceived(I=>{console.log(" Nouvelle notification:",I)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(y,S,D)=>{c(null);const V=await ss.register(y,S,D);return V.success||c(V.error),V},g=async(y,S)=>{c(null);const D=await ss.login(y,S);return D.success||c(D.error),D},p=async()=>{c(null);const y=await ss.loginWithGoogle();return y.success||c(y.error),y},w=async()=>{c(null);const y=await ss.logout();return y.success||c(y.error),y},N=async y=>{c(null);const S=await ss.resetPassword(y);return S.success||c(S.error),S},T=async y=>{c(null);const S=await ss.updateUserProfile(y);return S.success?await d(e.uid):c(S.error),S},C=()=>(r==null?void 0:r.role)==="admin",x={currentUser:e,userProfile:r,loading:i,error:u,register:f,login:g,loginWithGoogle:p,logout:w,resetPassword:N,updateProfile:T,isAdmin:C,hasAccessToCourse:y=>{var S;return((S=r==null?void 0:r.purchasedCourses)==null?void 0:S.includes(y))||C()},setError:c};return l.jsx(Tb.Provider,{value:x,children:!i&&t})};function bo({children:t,adminOnly:e=!1}){const{currentUser:n,userProfile:r,loading:s}=Vt();return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!n,"userProfile:",r),n?e&&(r==null?void 0:r.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",r==null?void 0:r.role),l.jsx(hf,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),l.jsx(hf,{to:"/login",replace:!0})))}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},f)=>R.createElement("svg",{ref:f,...DL,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${LL(t)}`,u].join(" "),...d},[...e.map(([g,p])=>R.createElement(g,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zi=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xo=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=G("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=G("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=G("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=G("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=G("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=G("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=G("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $i=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ca=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=G("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=G("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ec=G("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=G("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ab=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pb=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=G("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o4=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K0=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a4=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xm=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kc=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cb=G("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function l4(){var T,C;const[t,e]=R.useState({email:"",password:""}),[n,r]=R.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:u,userProfile:c}=Vt(),d=on(),g=((C=(T=Ds().state)==null?void 0:T.from)==null?void 0:C.pathname)||"/",p=async E=>{E.preventDefault(),r(!0);const x=await s(t.email,t.password);x.success&&setTimeout(()=>{if(x.user){const y=setInterval(()=>{c&&(clearInterval(y),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(y),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},w=async()=>{r(!0);const E=await i();E.success&&setTimeout(()=>{if(E.user){const x=setInterval(()=>{c&&(clearInterval(x),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(x),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},N=E=>{e({...t,[E.target.name]:E.target.value}),o&&u(null)};return l.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(pe,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:l.jsx(Je,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),l.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[l.jsx(Ym,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&l.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[l.jsx(ML,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),l.jsx("p",{className:"text-red-700 text-sm",children:o})]}),l.jsxs("button",{onClick:w,disabled:n,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[l.jsx(Nb,{className:"w-5 h-5 group-hover:rotate-12 transition"}),l.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),l.jsxs("form",{onSubmit:p,className:"space-y-5",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ca,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),l.jsx("input",{type:"email",name:"email",value:t.email,onChange:N,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),l.jsxs("div",{className:"group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),l.jsx(pe,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),l.jsxs("div",{className:"relative",children:[l.jsx($i,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),l.jsx("input",{type:"password",name:"password",value:t.password,onChange:N,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:n?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",l.jsx(pe,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),l.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function u4(){const[t,e]=R.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=R.useState({}),[s,i]=R.useState(!1),{register:o,loginWithGoogle:u}=Vt(),c=on(),d=()=>{const T={};return t.displayName.trim()||(T.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(T.email="Email invalide"):T.email="L'email est requis",t.password?t.password.length<6&&(T.password="Minimum 6 caractres"):T.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(T.confirmPassword="Les mots de passe ne correspondent pas"),r(T),Object.keys(T).length===0},f=async T=>{if(T.preventDefault(),!d())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&c("/"),i(!1)},g=async()=>{i(!0),(await u()).success&&c("/"),i(!1)},p=T=>{e({...t,[T.target.name]:T.target.value}),n[T.target.name]&&r({...n,[T.target.name]:""})},N=(()=>{const T=t.password;if(!T)return{strength:0,label:"",color:""};let C=0;return T.length>=6&&C++,T.length>=8&&C++,/[a-z]/.test(T)&&/[A-Z]/.test(T)&&C++,/\d/.test(T)&&C++,/[^a-zA-Z\d]/.test(T)&&C++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][C-1]||{strength:0,label:"",color:""}})();return l.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(pe,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:l.jsx(Je,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),l.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[l.jsx(Ym,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),l.jsxs("button",{onClick:g,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[l.jsx(Nb,{className:"w-5 h-5 group-hover:rotate-12 transition"}),l.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),l.jsxs("form",{onSubmit:f,className:"space-y-5",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),l.jsxs("div",{className:"relative",children:[l.jsx(Xm,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),n.displayName&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.displayName]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ca,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"email",name:"email",value:t.email,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),n.email&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.email]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx($i,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"password",name:"password",value:t.password,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!n.password&&l.jsx("div",{className:"mt-2",children:l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all duration-300 ${N.color}`,style:{width:`${N.strength/5*100}%`}})}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:N.label})]})}),n.password&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.password]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx($i,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&l.jsx(mt,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),n.confirmPassword&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.confirmPassword]})]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",l.jsx(pe,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),l.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function c4(){const[t,e]=R.useState(""),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,u]=R.useState(""),{resetPassword:c}=Vt(),d=async f=>{if(f.preventDefault(),u(""),!t.trim()){u("Veuillez entrer votre email");return}r(!0);const g=await c(t);g.success?i(!0):u(g.error),r(!1)};return s?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[l.jsx(mt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",l.jsx("strong",{children:t})]}),l.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),l.jsxs(pe,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[l.jsx(zi,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs(pe,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[l.jsx(zi,{className:"w-4 h-4"}),"Retour"]}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&l.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:o})}),l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ca,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:n?"Envoi en cours...":"Envoyer le lien"})]})]})})}const kb="/admin",d4="/dashboard";class h4{constructor(){this.cloudName="dbsemu1xo",this.uploadPreset="course_thumbnails",console.log(" Cloudinary Config:",{cloudName:this.cloudName,uploadPreset:this.uploadPreset}),this.cloudName||console.error(" VITE_CLOUDINARY_CLOUD_NAME is not set! Check your .env file")}async uploadImage(e,n="courses"){var r;try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.uploadPreset),s.append("folder",n);const i=await fetch(`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,{method:"POST",body:s});if(!i.ok){const u=await i.json();throw new Error(((r=u.error)==null?void 0:r.message)||"Upload failed")}const o=await i.json();return console.log(" Image uploaded to Cloudinary:",o.secure_url),{success:!0,url:o.secure_url,publicId:o.public_id}}catch(s){return console.error(" Cloudinary upload error:",s),{success:!1,error:s.message}}}async uploadVideo(e,n="courses/videos",r){try{if(!e.type.startsWith("video/"))throw new Error("File must be a video");const s=new FormData;s.append("file",e),s.append("upload_preset","course_videos"),s.append("folder",n),s.append("resource_type","video"),console.log(" Uploading video to Cloudinary...");const i=await new Promise((o,u)=>{const c=new XMLHttpRequest;c.upload.addEventListener("progress",d=>{if(d.lengthComputable&&r){const f=Math.round(d.loaded/d.total*100);r(f)}}),c.addEventListener("load",()=>{c.status===200?o(JSON.parse(c.responseText)):u(new Error(c.statusText))}),c.addEventListener("error",()=>u(new Error("Upload failed"))),c.open("POST",`https://api.cloudinary.com/v1_1/${this.cloudName}/video/upload`),c.send(s)});return console.log(" Video uploaded to Cloudinary:",i.secure_url),{success:!0,url:i.secure_url,publicId:i.public_id,duration:i.duration,format:i.format}}catch(s){return console.error(" Cloudinary video upload error:",s),{success:!1,error:s.message}}}async deleteImage(e){try{return console.log(" Image deletion not implemented (requires server-side)"),{success:!0}}catch(n){return console.error(" Cloudinary delete error:",n),{success:!1,error:n.message}}}getOptimizedUrl(e,n={}){const{width:r=800,height:s=600,quality:i="auto",format:o="auto"}=n;if(!e||!e.includes("cloudinary.com"))return e;const u=`w_${r},h_${s},c_fill,q_${i},f_${o}`;return e.replace("/upload/",`/upload/${u}/`)}}const f4=new h4;class p4{async createCourse(e,n){try{let r=null;n&&(r=await this.uploadThumbnail(n));const s={...e,thumbnail:r,enrolledCount:0,status:"draft",createdAt:le(),updatedAt:le()},i=await Cs(pt(Z,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(r){return console.error(" Erreur cration cours:",r),{success:!1,error:r.message}}}async updateCourse(e,n,r){try{const s=de(Z,"courses",e);let i={...n};return r&&(i.thumbnail=await this.uploadThumbnail(r)),i.updatedAt=le(),await en(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const n=de(Z,"courses",e);return await en(n,{status:"archived",archivedAt:le()}),console.log(" Cours archiv:",e),{success:!0}}catch(n){return console.error(" Erreur suppression cours:",n),{success:!1,error:n.message}}}async getCourseById(e){try{const n=de(Z,"courses",e),r=await Zt(n);return r.exists()?{success:!0,course:{id:r.id,...r.data()}}:{success:!1,error:"Cours introuvable"}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message}}}async getCourses(e={}){try{let n=pt(Z,"courses");const r=[];return e.category&&r.push(Rt("category","==",e.category)),e.status?r.push(Rt("status","==",e.status)):r.push(Rt("status","!=","archived")),e.level&&r.push(Rt("level","==",e.level)),r.push(_s("createdAt","desc")),e.limit&&r.push(EO(e.limit)),e.startAfter&&r.push(TO(e.startAfter)),n=Br(n,...r),{success:!0,courses:(await nr(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message,courses:[]}}}async publishCourse(e){try{const n=de(Z,"courses",e);return await en(n,{status:"published",publishedAt:le(),updatedAt:le()}),console.log(" Cours publi:",e),{success:!0}}catch(n){return console.error(" Erreur publication cours:",n),{success:!1,error:n.message}}}async uploadThumbnail(e){try{const n=await f4.uploadImage(e,"courses/thumbnails");if(!n.success)throw new Error(n.error||"Upload failed");return console.log(" Thumbnail uploaded:",n.url),n.url}catch(n){throw console.error(" Erreur upload thumbnail:",n),n}}async duplicateCourse(e){try{const{success:n,course:r}=await this.getCourseById(e);if(!n)return{success:!1,error:"Cours introuvable"};const s={...r,title:`${r.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(n){return console.error(" Erreur duplication cours:",n),{success:!1,error:n.message}}}}const pn=new p4;function m4(){const{currentUser:t,userProfile:e}=Vt(),n=on(),[r,s]=R.useState([]),[i,o]=R.useState({totalCourses:0,totalStudents:0,totalHours:0}),[u,c]=R.useState(!0);R.useEffect(()=>{d()},[]);const d=async()=>{try{const p=await pn.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});p.success&&(s(p.courses),o({totalCourses:p.total||p.courses.length,totalStudents:p.courses.reduce((w,N)=>w+(N.enrolledCount||0),0),totalHours:p.courses.reduce((w,N)=>w+(N.duration||0),0)}))}catch(p){console.error("Error loading home data:",p)}finally{c(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],g=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs(pe,{to:"/",className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),l.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[l.jsx(pe,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),l.jsx(pe,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),l.jsx("div",{className:"flex items-center gap-3",children:t?l.jsxs(l.Fragment,{children:[l.jsx(pe,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),l.jsx(pe,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&l.jsx("button",{onClick:()=>n(kb),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):l.jsxs(l.Fragment,{children:[l.jsx(pe,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),l.jsx(pe,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),l.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[l.jsx(Ym,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),l.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",l.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),l.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs(pe,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",l.jsx(Xo,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&l.jsxs(pe,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[l.jsx(Ff,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),l.jsxs("div",{className:"relative hidden md:block",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),l.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[l.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:l.jsx(Ff,{className:"w-20 h-20 text-gray-400"})}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),l.jsx("section",{className:"py-20 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),u?l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(p=>l.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[l.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),l.jsxs("div",{className:"p-6 space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},p))}):r.length>0?l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(p=>l.jsxs(pe,{to:`/courses/${p.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[p.thumbnail?l.jsx("img",{src:p.thumbnail,alt:p.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Je,{className:"w-16 h-16 text-gray-300"})}),l.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:p.price>0?`${p.price} DT`:"Gratuit"})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:p.category||"Gnral"}),l.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:p.level||"Dbutant"})]}),l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:p.title}),l.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:p.shortDescription||p.description}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Kc,{className:"w-4 h-4"}),l.jsxs("span",{children:[p.enrolledCount||0," tudiants"]})]}),p.duration&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Pa,{className:"w-4 h-4"}),l.jsxs("span",{children:[p.duration,"h"]})]})]})]})]},p.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),l.jsx("div",{className:"text-center mt-12",children:l.jsxs(pe,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",l.jsx(Xo,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(p=>l.jsxs(pe,{to:`/courses?category=${p.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[l.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${p.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:p.icon}),l.jsx("h3",{className:"font-semibold text-gray-900",children:p.name})]},p.name))})]})}),l.jsx("section",{className:"py-20 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),l.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),l.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),l.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:g.map((p,w)=>l.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[l.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(p.rating)].map((N,T)=>l.jsx(zf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},T))}),l.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',p.quote,'"']}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:p.photo,alt:p.name,className:"w-12 h-12 rounded-full"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:p.name}),l.jsx("div",{className:"text-sm text-gray-600",children:p.role})]})]})]},w))})]})}),l.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),l.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),l.jsxs(pe,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",l.jsx(Xo,{className:"w-5 h-5"})]})]})}),l.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),l.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx(pe,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),l.jsx("li",{children:l.jsx(pe,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),l.jsx("li",{children:l.jsx(pe,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),l.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),l.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function g4(){var A;const{currentUser:t,userProfile:e,logout:n}=Vt(),r=on(),[s,i]=R.useState(!1),[o,u]=R.useState("personal"),[c,d]=R.useState(!1),[f,g]=R.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[p,w]=R.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[N,T]=R.useState(null),[C,E]=R.useState(!1),[x,y]=R.useState(null),S=async()=>{i(!0),await n(),r("/login")},D=async()=>{try{y(null),await en(de(Z,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),y({type:"success",text:"Profil mis  jour avec succs!"}),d(!1),setTimeout(()=>y(null),3e3)}catch(b){y({type:"error",text:"Erreur: "+b.message})}},V=async()=>{if(!t)return;E(!0),T(null);const b=await au.subscribeToNotifications(t.uid);b.success?(w("enabled"),T({type:"success",text:"Notifications actives"})):T({type:"error",text:b.error||"Impossible d'activer"}),E(!1),setTimeout(()=>T(null),3e3)},I=[{id:"personal",name:"Informations",icon:HL},{id:"security",name:"Scurit",icon:$i},{id:"progress",name:"Progression",icon:K0}],v=[{label:"Cours suivis",value:((A=e==null?void 0:e.purchasedCourses)==null?void 0:A.length)||0,icon:Je,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:Pa,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:bb,color:"text-purple-600 bg-purple-100"}];return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[l.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),l.jsx("div",{className:"px-8 pb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?l.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):l.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:l.jsx(Xm,{className:"w-16 h-16 text-white"})})}),l.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:l.jsx(BL,{className:"w-5 h-5 text-gray-600"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),l.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[l.jsx(Pb,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[l.jsx(Ca,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),l.jsxs("button",{onClick:S,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[l.jsx(ZL,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:v.map((b,k)=>l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b.color}`,children:l.jsx(b.icon,{className:"w-6 h-6"})})}),l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:b.label}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.value})]},k))}),l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[l.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:l.jsx("nav",{className:"flex gap-8",children:I.map(b=>{const k=b.icon;return l.jsxs("button",{onClick:()=>u(b.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===b.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(k,{className:"w-5 h-5"}),b.name]},b.id)})})}),l.jsxs("div",{className:"p-8",children:[o==="personal"&&l.jsxs("div",{className:"space-y-6",children:[x&&l.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${x.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${x.type==="success"?"bg-green-500":"bg-red-500"}`}),x.text]}),l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),c?l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:D,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[l.jsx(Sb,{className:"w-4 h-4"}),"Enregistrer"]}),l.jsxs("button",{onClick:()=>d(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[l.jsx($f,{className:"w-4 h-4"}),"Annuler"]})]}):l.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[l.jsx(n4,{className:"w-4 h-4"}),"Modifier"]})]}),l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),c?l.jsx("input",{type:"text",value:f.displayName,onChange:b=>g({...f,displayName:b.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[l.jsx(Ca,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),l.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),c?l.jsx("input",{type:"tel",value:f.phone,onChange:b=>g({...f,phone:b.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),c?l.jsx("textarea",{value:f.bio,onChange:b=>g({...f,bio:b.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),l.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:l.jsx(FL,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),l.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",l.jsx("span",{className:p==="enabled"?"text-green-600":"text-gray-500",children:p==="enabled"?"Actives ":"Dsactives"})]}),N&&l.jsx("p",{className:`text-sm mt-2 ${N.type==="success"?"text-green-600":"text-red-600"}`,children:N.text})]})]}),l.jsx("button",{onClick:V,disabled:C||p==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:p==="enabled"?"Actives":C?"Activation...":"Activer"})]})}),l.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:l.jsx($i,{className:"w-6 h-6 text-gray-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),l.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),l.jsxs("div",{className:"text-center py-12",children:[l.jsx(K0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),l.jsxs("button",{onClick:()=>r("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[l.jsx(Je,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const y4="https://sandbox.paymee.tn/api/v2",v4="73af59aae675d845db28616e3e9304f2473d7090",_4="https://plateforme-educative.onrender.com";function x4(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),n=new Set(["1","true","yes","paid","success","ok","completed"]),r=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return n.has(e)?"completed":r.has(e)?"pending":s.has(e)?"failed":"unknown"}const w4=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class E4{async initiatePayment(e,n,r,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:n,amount:r});let u;try{u=w4()}catch(T){return console.error(" HTTPS check failed:",T.message),{success:!1,error:T.message}}const c=await Cs(pt(Z,"payments"),{userId:s.uid,courseId:e,courseTitle:n,amount:r,currency:"TND",status:"pending",createdAt:le(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",c.id);const d=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let g=s.phone||"12345678";g=g.replace(/\D/g,""),g.length!==8&&(g="12345678");const p={amount:parseFloat(r),note:`Cours ${n}`,first_name:d,last_name:f,email:s.email,phone:g,return_url:`${u}/payment/success?payment_id=${c.id}`,cancel_url:`${u}/payment/cancel?payment_id=${c.id}`,webhook_url:`${_4}/paymee-webhook`,order_id:c.id};console.log(" Sending to Paymee:",p);const w=await fetch(`${y4}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${v4}`},body:JSON.stringify(p)});console.log(" Response status:",w.status);const N=await w.json();if(console.log(" Paymee response:",N),!N.status){if(console.error(" Paymee error:",N),N.errors&&Array.isArray(N.errors)){const T=N.errors.map(C=>typeof C=="object"?Object.entries(C).map(([E,x])=>`${E}: ${x}`).join(", "):C).join(" | ");throw new Error(`Erreur Paymee: ${T}`)}throw new Error(N.message||"Erreur initialisation paiement")}return await en(de(Z,"payments",c.id),{paymeeToken:N.data.token,paymentUrl:N.data.payment_url,updatedAt:le()}),console.log(" Payment ready:",N.data.payment_url),{success:!0,paymentId:c.id,paymentUrl:N.data.payment_url,token:N.data.token}}catch(u){return console.error(" Payment error:",u),{success:!1,error:u.message}}}async verifyPayment(e){try{const n=await Zt(de(Z,"payments",e));if(!n.exists())return{success:!1,error:"Paiement introuvable"};const r=n.data();return{success:!0,status:x4(r.status),rawStatus:r.status,data:r}}catch(n){return console.error("Verification error:",n),{success:!1,error:n.message}}}}const Rb=new E4;function jb({course:t}){var c;const{currentUser:e,userProfile:n}=Vt(),[r,s]=R.useState(!1),[i,o]=R.useState(null),u=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=n==null?void 0:n.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const d=await Rb.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(n==null?void 0:n.displayName)||e.displayName,phone:(n==null?void 0:n.phone)||"00000000"});d.success?window.location.href=d.paymentUrl:(o(d.error),s(!1))};return(c=n==null?void 0:n.purchasedCourses)!=null&&c.includes(t.id)?l.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?l.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):l.jsxs("div",{children:[i&&l.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),l.jsx("button",{onClick:u,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?l.jsxs(l.Fragment,{children:[l.jsx(Qm,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):l.jsxs(l.Fragment,{children:[l.jsx(GL,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),l.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function T4(){const[t,e]=R.useState([]),[n,r]=R.useState(!0);R.useEffect(()=>{s()},[]);const s=async()=>{r(!0);const i=await pn.getCourses({status:"published"});i.success&&e(i.courses),r(!1)};return n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?l.jsxs("div",{className:"col-span-full text-center py-12",children:[l.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun cours disponible"}),l.jsx("p",{className:"text-gray-600",children:"Revenez bientt pour dcouvrir de nouveaux cours!"})]}):t.map(i=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[l.jsx("img",{src:i.thumbnail||"/assets/images/default-course.png",alt:i.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-100 px-2 py-1 rounded",children:i.category||"General"}),i.price===0&&l.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),l.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),l.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[l.jsx(Kc,{className:"w-4 h-4 mr-1"}),l.jsxs("span",{children:[i.enrolledCount||0," tudiants"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"By Admin"}),l.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.price===0?"Gratuit":`${i.price} TND`})]}),l.jsx(jb,{course:i}),l.jsx(pe,{to:`/course/${i.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition font-medium",children:"Voir les dtails"})]})]})]},i.id))})})]})}function b4(){var d;const{id:t}=Iw(),e=on(),{userProfile:n}=Vt(),[r,s]=R.useState(null),[i,o]=R.useState(!0);R.useEffect(()=>{u()},[t]);const u=async()=>{try{const f=await Zt(de(Z,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},c=((d=n==null?void 0:n.purchasedCourses)==null?void 0:d.includes(t))||(r==null?void 0:r.isFree)||(n==null?void 0:n.role)==="admin";return i?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(Qm,{className:"w-8 h-8 animate-spin text-green-500"})}):r?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(pe,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[l.jsx(zi,{className:"w-5 h-5"}),"Retour aux cours"]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:l.jsx("img",{src:r.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:r.title,className:"w-full h-64 object-cover"})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:r.category}),l.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:r.level}),c&&l.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),l.jsx("p",{className:"text-gray-600 text-lg mb-6",children:r.description}),l.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Pa,{className:"w-5 h-5"}),l.jsx("span",{children:r.duration})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Je,{className:"w-5 h-5"}),l.jsxs("span",{children:[r.totalLessons," leons"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Kc,{className:"w-5 h-5"}),l.jsxs("span",{children:[r.enrolledCount," tudiants"]})]}),r.rating>0&&l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(zf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),l.jsx("span",{children:r.rating.toFixed(1)})]})]}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(mt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(mt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(mt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:r.isFree?"Gratuit":`${r.price} TND`}),!r.isFree&&l.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),c?l.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[l.jsx(ec,{className:"w-5 h-5"}),"Commencer le cours"]}):l.jsx("div",{className:"mb-4",children:l.jsx(jb,{course:r})}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),l.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(ec,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Vidos  la demande"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Je,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Ressources tlchargeables"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(mt,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Accs illimit"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(zf,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Certificat de russite"})]})]})]}),r.instructor&&l.jsxs("div",{className:"border-t pt-6 mt-6",children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),l.jsx("p",{className:"text-gray-600",children:r.instructor})]})]})})]})})]}):null}class I4{async createModule(e,n){try{const r={courseId:e,...n,order:n.order||0,createdAt:le()};return{success:!0,id:(await Cs(pt(Z,"modules"),r)).id}}catch(r){return console.error("Error creating module:",r),{success:!1,error:r.message}}}async createLesson(e,n){try{const r={moduleId:e,...n,order:n.order||0,createdAt:le()};return{success:!0,id:(await Cs(pt(Z,"lessons"),r)).id}}catch(r){return console.error("Error creating lesson:",r),{success:!1,error:r.message}}}async getModulesByCourse(e){try{const n=Br(pt(Z,"modules"),Rt("courseId","==",e),_s("order","asc"));return{success:!0,modules:(await nr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching modules:",n),{success:!1,error:n.message,modules:[]}}}async getLessonsByModule(e){try{const n=Br(pt(Z,"lessons"),Rt("moduleId","==",e),_s("order","asc"));return{success:!0,lessons:(await nr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching lessons:",n),{success:!1,error:n.message,lessons:[]}}}async getLessonById(e){try{const n=de(Z,"lessons",e),r=await Zt(n);return r.exists()?{success:!0,lesson:{id:r.id,...r.data()}}:{success:!1,error:"Leon introuvable"}}catch(n){return console.error("Error fetching lesson:",n),{success:!1,error:n.message}}}}const tc=new I4;class N4{async markLessonComplete(e,n,r){try{const s=de(Z,"progress",`${e}_${n}`);return(await Zt(s)).exists()?await en(s,{completedLessons:GT(r),lastAccessed:le(),updatedAt:le()}):await Yu(s,{userId:e,courseId:n,completedLessons:[r],startedAt:le(),lastAccessed:le(),updatedAt:le()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,n){try{const r=de(Z,"progress",`${e}_${n}`),s=await Zt(r);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(r){return console.error("Error fetching progress:",r),{success:!1,error:r.message}}}calculateProgressPercentage(e,n){return n===0?0:Math.round(e/n*100)}isLessonCompleted(e,n=[]){return n.includes(e)}}const ms=new N4,S4="modulepreload",A4=function(t){return"/"+t},G0={},Pt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=A4(c),c in G0)return;G0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":S4,d||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((p,w)=>{g.addEventListener("load",p),g.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var P4=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&C4(i,n.attrs),n.text&&(i.text=""+n.text);var o="onload"in i?Q0:k4;o(i,r),i.onload||Q0(i,r),s.appendChild(i)};function C4(t,e){for(var n in e)t.setAttribute(n,e[n])}function Q0(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function k4(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var R4=function(e){return j4(e)&&!O4(e)};function j4(t){return!!t&&typeof t=="object"}function O4(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||M4(t)}var D4=typeof Symbol=="function"&&Symbol.for,L4=D4?Symbol.for("react.element"):60103;function M4(t){return t.$$typeof===L4}function V4(t){return Array.isArray(t)?[]:{}}function ka(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Bi(V4(t),t,e):t}function U4(t,e,n){return t.concat(e).map(function(r){return ka(r,n)})}function F4(t,e){if(!e.customMerge)return Bi;var n=e.customMerge(t);return typeof n=="function"?n:Bi}function z4(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Y0(t){return Object.keys(t).concat(z4(t))}function Ob(t,e){try{return e in t}catch{return!1}}function $4(t,e){return Ob(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function B4(t,e,n){var r={};return n.isMergeableObject(t)&&Y0(t).forEach(function(s){r[s]=ka(t[s],n)}),Y0(e).forEach(function(s){$4(t,s)||(Ob(t,s)&&n.isMergeableObject(e[s])?r[s]=F4(s,n)(t[s],e[s],n):r[s]=ka(e[s],n))}),r}function Bi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||U4,n.isMergeableObject=n.isMergeableObject||R4,n.cloneUnlessOtherwiseSpecified=ka;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):B4(t,e,n):ka(e,n)}Bi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Bi(r,s,n)},{})};var q4=Bi,Db=q4,H4=Object.create,Gc=Object.defineProperty,W4=Object.getOwnPropertyDescriptor,K4=Object.getOwnPropertyNames,G4=Object.getPrototypeOf,Q4=Object.prototype.hasOwnProperty,Y4=(t,e)=>{for(var n in e)Gc(t,n,{get:e[n],enumerable:!0})},Lb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of K4(e))!Q4.call(t,s)&&s!==n&&Gc(t,s,{get:()=>e[s],enumerable:!(r=W4(e,s))||r.enumerable});return t},Jm=(t,e,n)=>(n=t!=null?H4(G4(t)):{},Lb(!t||!t.__esModule?Gc(n,"default",{value:t,enumerable:!0}):n,t)),X4=t=>Lb(Gc({},"__esModule",{value:!0}),t),Mb={};Y4(Mb,{callPlayer:()=>fM,getConfig:()=>dM,getSDK:()=>cM,isBlobUrl:()=>mM,isMediaStream:()=>pM,lazy:()=>tM,omit:()=>hM,parseEndTime:()=>aM,parseStartTime:()=>oM,queryString:()=>uM,randomString:()=>lM,supportsWebKitPresentationMode:()=>gM});var Qc=X4(Mb),J4=Jm(R),Z4=Jm(P4),eM=Jm(Db);const tM=t=>J4.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),nM=/[?&#](?:start|t)=([0-9hms]+)/,rM=/[?&#]end=([0-9hms]+)/,Bf=/(\d+)(h|m|s)/g,sM=/^\d+$/;function Vb(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match(Bf))return iM(r);if(sM.test(r))return parseInt(r)}}function iM(t){let e=0,n=Bf.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=Bf.exec(t)}return e}function oM(t){return Vb(t,nM)}function aM(t){return Vb(t,rM)}function lM(){return Math.random().toString(36).substr(2,5)}function uM(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function ph(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const Gs={},cM=function(e,n,r=null,s=()=>!0,i=Z4.default){const o=ph(n);return o&&s(o)?Promise.resolve(o):new Promise((u,c)=>{if(Gs[e]){Gs[e].push({resolve:u,reject:c});return}Gs[e]=[{resolve:u,reject:c}];const d=f=>{Gs[e].forEach(g=>g.resolve(f))};if(r){const f=window[r];window[r]=function(){f&&f(),d(ph(n))}}i(e,f=>{f?(Gs[e].forEach(g=>g.reject(f)),Gs[e]=null):r||d(ph(n))})})};function dM(t,e){return(0,eM.default)(e.config,t.config)}function hM(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function fM(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function pM(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function mM(t){return/^blob:/.test(t)}function gM(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var Zm=Object.defineProperty,yM=Object.getOwnPropertyDescriptor,vM=Object.getOwnPropertyNames,_M=Object.prototype.hasOwnProperty,xM=(t,e)=>{for(var n in e)Zm(t,n,{get:e[n],enumerable:!0})},wM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vM(e))!_M.call(t,s)&&s!==n&&Zm(t,s,{get:()=>e[s],enumerable:!(r=yM(e,s))||r.enumerable});return t},EM=t=>wM(Zm({},"__esModule",{value:!0}),t),Ub={};xM(Ub,{AUDIO_EXTENSIONS:()=>eg,DASH_EXTENSIONS:()=>Zb,FLV_EXTENSIONS:()=>e1,HLS_EXTENSIONS:()=>ng,MATCH_URL_DAILYMOTION:()=>Qb,MATCH_URL_FACEBOOK:()=>Bb,MATCH_URL_FACEBOOK_WATCH:()=>qb,MATCH_URL_KALTURA:()=>Jb,MATCH_URL_MIXCLOUD:()=>Yb,MATCH_URL_MUX:()=>$b,MATCH_URL_SOUNDCLOUD:()=>Fb,MATCH_URL_STREAMABLE:()=>Hb,MATCH_URL_TWITCH_CHANNEL:()=>Gb,MATCH_URL_TWITCH_VIDEO:()=>Kb,MATCH_URL_VIDYARD:()=>Xb,MATCH_URL_VIMEO:()=>zb,MATCH_URL_WISTIA:()=>Wb,MATCH_URL_YOUTUBE:()=>qf,VIDEO_EXTENSIONS:()=>tg,canPlay:()=>bM});var TM=EM(Ub),X0=Qc;const qf=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Fb=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,zb=/vimeo\.com\/(?!progressive_redirect).+/,$b=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Bb=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,qb=/^https?:\/\/fb\.watch\/.+$/,Hb=/streamable\.com\/([a-z0-9]+)$/,Wb=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,Kb=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,Gb=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,Qb=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,Yb=/mixcloud\.com\/([^/]+\/[^/]+)/,Xb=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,Jb=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,eg=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,tg=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,ng=/\.(m3u8)($|\?)/i,Zb=/\.(mpd)($|\?)/i,e1=/\.(flv)($|\?)/i,Hf=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&Hf(e)||Hf(e.src))return!0;return!1}return(0,X0.isMediaStream)(t)||(0,X0.isBlobUrl)(t)?!0:eg.test(t)||tg.test(t)||ng.test(t)||Zb.test(t)||e1.test(t)},bM={youtube:t=>t instanceof Array?t.every(e=>qf.test(e)):qf.test(t),soundcloud:t=>Fb.test(t)&&!eg.test(t),vimeo:t=>zb.test(t)&&!tg.test(t)&&!ng.test(t),mux:t=>$b.test(t),facebook:t=>Bb.test(t)||qb.test(t),streamable:t=>Hb.test(t),wistia:t=>Wb.test(t),twitch:t=>Kb.test(t)||Gb.test(t),dailymotion:t=>Qb.test(t),mixcloud:t=>Yb.test(t),vidyard:t=>Xb.test(t),kaltura:t=>Jb.test(t),file:Hf};var rg=Object.defineProperty,IM=Object.getOwnPropertyDescriptor,NM=Object.getOwnPropertyNames,SM=Object.prototype.hasOwnProperty,AM=(t,e)=>{for(var n in e)rg(t,n,{get:e[n],enumerable:!0})},PM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of NM(e))!SM.call(t,s)&&s!==n&&rg(t,s,{get:()=>e[s],enumerable:!(r=IM(e,s))||r.enumerable});return t},CM=t=>PM(rg({},"__esModule",{value:!0}),t),t1={};AM(t1,{default:()=>RM});var kM=CM(t1),At=Qc,wt=TM,RM=[{key:"youtube",name:"YouTube",canPlay:wt.canPlay.youtube,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./YouTube-BJW-O2fE.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:wt.canPlay.soundcloud,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./SoundCloud-oGTa1Ak6.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:wt.canPlay.vimeo,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Vimeo-ULwkvZVq.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:wt.canPlay.mux,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Mux-C-JNuiAH.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:wt.canPlay.facebook,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Facebook-CJz0o9AG.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:wt.canPlay.streamable,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Streamable-Cse646nR.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:wt.canPlay.wistia,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Wistia-ByiCJhER.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:wt.canPlay.twitch,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Twitch-ylJCRInu.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:wt.canPlay.dailymotion,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./DailyMotion-0IjLRFq5.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:wt.canPlay.mixcloud,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Mixcloud-CGNOyTvs.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:wt.canPlay.vidyard,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Vidyard-DKAogiBJ.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:wt.canPlay.kaltura,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Kaltura-Bdih4TXj.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:wt.canPlay.file,canEnablePIP:t=>wt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,At.supportsWebKitPresentationMode)())&&!wt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./FilePlayer-Dex8UnXs.js").then(t=>t.F),[]))}],J0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function jM(t,e){return!!(t===e||J0(t)&&J0(e))}function OM(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!jM(t[n],e[n]))return!1;return!0}function DM(t,e){e===void 0&&(e=OM);var n,r=[],s,i=!1;function o(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return i&&n===this&&e(u,r)||(s=t.apply(this,u),i=!0,n=this,r=u),s}return o}const LM=Object.freeze(Object.defineProperty({__proto__:null,default:DM},Symbol.toStringTag,{value:"Module"})),MM=Z1(LM);var VM=typeof Element<"u",UM=typeof Map=="function",FM=typeof Set=="function",zM=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function lu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!lu(t[r],e[r]))return!1;return!0}var i;if(UM&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!lu(r.value[1],e.get(r.value[0])))return!1;return!0}if(FM&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(zM&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(VM&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!lu(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var n1=function(e,n){try{return lu(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},r1={exports:{}},$M="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",BM=$M,qM=BM;function s1(){}function i1(){}i1.resetWarningCache=s1;var HM=function(){function t(r,s,i,o,u,c){if(c!==qM){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:i1,resetWarningCache:s1};return n.PropTypes=n,n};r1.exports=HM();var WM=r1.exports,KM=Object.create,Yc=Object.defineProperty,GM=Object.getOwnPropertyDescriptor,QM=Object.getOwnPropertyNames,YM=Object.getPrototypeOf,XM=Object.prototype.hasOwnProperty,JM=(t,e)=>{for(var n in e)Yc(t,n,{get:e[n],enumerable:!0})},o1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of QM(e))!XM.call(t,s)&&s!==n&&Yc(t,s,{get:()=>e[s],enumerable:!(r=GM(e,s))||r.enumerable});return t},ZM=(t,e,n)=>(n=t!=null?KM(YM(t)):{},o1(!t||!t.__esModule?Yc(n,"default",{value:t,enumerable:!0}):n,t)),eV=t=>o1(Yc({},"__esModule",{value:!0}),t),a1={};JM(a1,{defaultProps:()=>rV,propTypes:()=>nV});var l1=eV(a1),tV=ZM(WM);const{string:Ke,bool:Et,number:Qs,array:mh,oneOfType:Io,shape:Ft,object:ut,func:Ve,node:Z0}=tV.default,nV={url:Io([Ke,mh,ut]),playing:Et,loop:Et,controls:Et,volume:Qs,muted:Et,playbackRate:Qs,width:Io([Ke,Qs]),height:Io([Ke,Qs]),style:ut,progressInterval:Qs,playsinline:Et,pip:Et,stopOnUnmount:Et,light:Io([Et,Ke,ut]),playIcon:Z0,previewTabIndex:Qs,previewAriaLabel:Ke,fallback:Z0,oEmbedUrl:Ke,wrapper:Io([Ke,Ve,Ft({render:Ve.isRequired})]),config:Ft({soundcloud:Ft({options:ut}),youtube:Ft({playerVars:ut,embedOptions:ut,onUnstarted:Ve}),facebook:Ft({appId:Ke,version:Ke,playerId:Ke,attributes:ut}),dailymotion:Ft({params:ut}),vimeo:Ft({playerOptions:ut,title:Ke}),mux:Ft({attributes:ut,version:Ke}),file:Ft({attributes:ut,tracks:mh,forceVideo:Et,forceAudio:Et,forceHLS:Et,forceSafariHLS:Et,forceDisableHls:Et,forceDASH:Et,forceFLV:Et,hlsOptions:ut,hlsVersion:Ke,dashVersion:Ke,flvVersion:Ke}),wistia:Ft({options:ut,playerId:Ke,customControls:mh}),mixcloud:Ft({options:ut}),twitch:Ft({options:ut,playerId:Ke}),vidyard:Ft({options:ut})}),onReady:Ve,onStart:Ve,onPlay:Ve,onPause:Ve,onBuffer:Ve,onBufferEnd:Ve,onEnded:Ve,onError:Ve,onDuration:Ve,onSeek:Ve,onPlaybackRateChange:Ve,onPlaybackQualityChange:Ve,onProgress:Ve,onClickPreview:Ve,onEnablePIP:Ve,onDisablePIP:Ve},Ge=()=>{},rV={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Ge},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Ge,onStart:Ge,onPlay:Ge,onPause:Ge,onBuffer:Ge,onBufferEnd:Ge,onEnded:Ge,onError:Ge,onDuration:Ge,onSeek:Ge,onPlaybackRateChange:Ge,onPlaybackQualityChange:Ge,onProgress:Ge,onClickPreview:Ge,onEnablePIP:Ge,onDisablePIP:Ge};var sV=Object.create,Ya=Object.defineProperty,iV=Object.getOwnPropertyDescriptor,oV=Object.getOwnPropertyNames,aV=Object.getPrototypeOf,lV=Object.prototype.hasOwnProperty,uV=(t,e,n)=>e in t?Ya(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,cV=(t,e)=>{for(var n in e)Ya(t,n,{get:e[n],enumerable:!0})},u1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of oV(e))!lV.call(t,s)&&s!==n&&Ya(t,s,{get:()=>e[s],enumerable:!(r=iV(e,s))||r.enumerable});return t},c1=(t,e,n)=>(n=t!=null?sV(aV(t)):{},u1(!t||!t.__esModule?Ya(n,"default",{value:t,enumerable:!0}):n,t)),dV=t=>u1(Ya({},"__esModule",{value:!0}),t),ke=(t,e,n)=>(uV(t,typeof e!="symbol"?e+"":e,n),n),d1={};cV(d1,{default:()=>Xc});var hV=dV(d1),e_=c1(R),fV=c1(n1),h1=l1,pV=Qc;const mV=5e3;class Xc extends e_.Component{constructor(){super(...arguments),ke(this,"mounted",!1),ke(this,"isReady",!1),ke(this,"isPlaying",!1),ke(this,"isLoading",!0),ke(this,"loadOnReady",null),ke(this,"startOnPlay",!0),ke(this,"seekOnPlay",null),ke(this,"onDurationCalled",!1),ke(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),ke(this,"getInternalPlayer",e=>this.player?this.player[e]:null),ke(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),ke(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),ke(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),ke(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),ke(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),ke(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),ke(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),ke(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:o,pip:u,loop:c,activePlayer:d,disableDeferredLoading:f}=this.props;if(!(0,fV.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!f&&!(0,pV.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&u&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!u&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},mV));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?e_.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}ke(Xc,"displayName","Player");ke(Xc,"propTypes",h1.propTypes);ke(Xc,"defaultProps",h1.defaultProps);var gV=Object.create,Xa=Object.defineProperty,yV=Object.getOwnPropertyDescriptor,vV=Object.getOwnPropertyNames,_V=Object.getPrototypeOf,xV=Object.prototype.hasOwnProperty,wV=(t,e,n)=>e in t?Xa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,EV=(t,e)=>{for(var n in e)Xa(t,n,{get:e[n],enumerable:!0})},f1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of vV(e))!xV.call(t,s)&&s!==n&&Xa(t,s,{get:()=>e[s],enumerable:!(r=yV(e,s))||r.enumerable});return t},Ja=(t,e,n)=>(n=t!=null?gV(_V(t)):{},f1(!t||!t.__esModule?Xa(n,"default",{value:t,enumerable:!0}):n,t)),TV=t=>f1(Xa({},"__esModule",{value:!0}),t),Ce=(t,e,n)=>(wV(t,typeof e!="symbol"?e+"":e,n),n),p1={};EV(p1,{createReactPlayer:()=>RV});var bV=TV(p1),ei=Ja(R),IV=Ja(Db),gh=Ja(MM),t_=Ja(n1),Mo=l1,m1=Qc,NV=Ja(hV);const SV=(0,m1.lazy)(()=>Pt(()=>import("./Preview-BUhq4_fe.js").then(t=>t.P),[])),AV=typeof window<"u"&&window.document&&typeof document<"u",PV=typeof Ed<"u"&&Ed.window&&Ed.window.document,CV=Object.keys(Mo.propTypes),kV=AV||PV?ei.Suspense:()=>null,No=[],RV=(t,e)=>{var n;return n=class extends ei.Component{constructor(){super(...arguments),Ce(this,"state",{showPreview:!!this.props.light}),Ce(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),Ce(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),Ce(this,"showPreview",()=>{this.setState({showPreview:!0})}),Ce(this,"getDuration",()=>this.player?this.player.getDuration():null),Ce(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Ce(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Ce(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),Ce(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),Ce(this,"handleReady",()=>{this.props.onReady(this)}),Ce(this,"getActivePlayer",(0,gh.default)(r=>{for(const s of[...No,...t])if(s.canPlay(r))return s;return e||null})),Ce(this,"getConfig",(0,gh.default)((r,s)=>{const{config:i}=this.props;return IV.default.all([Mo.defaultProps.config,Mo.defaultProps.config[s]||{},i,i[s]||{}])})),Ce(this,"getAttributes",(0,gh.default)(r=>(0,m1.omit)(this.props,CV))),Ce(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return ei.default.createElement(NV.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,t_.default)(this.props,r)||!(0,t_.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:u,previewAriaLabel:c}=this.props;return ei.default.createElement(SV,{url:r,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:c,oEmbedUrl:u,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:o,fallback:u,wrapper:c}=this.props,{showPreview:d}=this.state,f=this.getAttributes(r),g=typeof c=="string"?this.references.wrapper:void 0;return ei.default.createElement(c,{ref:g,style:{...s,width:i,height:o},...f},ei.default.createElement(kV,{fallback:u},d?this.renderPreview(r):this.renderActivePlayer(r)))}},Ce(n,"displayName","ReactPlayer"),Ce(n,"propTypes",Mo.propTypes),Ce(n,"defaultProps",Mo.defaultProps),Ce(n,"addCustomPlayer",r=>{No.push(r)}),Ce(n,"removeCustomPlayers",()=>{No.length=0}),Ce(n,"canPlay",r=>{for(const s of[...No,...t])if(s.canPlay(r))return!0;return!1}),Ce(n,"canEnablePIP",r=>{for(const s of[...No,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var jV=Object.create,Jc=Object.defineProperty,OV=Object.getOwnPropertyDescriptor,DV=Object.getOwnPropertyNames,LV=Object.getPrototypeOf,MV=Object.prototype.hasOwnProperty,VV=(t,e)=>{for(var n in e)Jc(t,n,{get:e[n],enumerable:!0})},g1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of DV(e))!MV.call(t,s)&&s!==n&&Jc(t,s,{get:()=>e[s],enumerable:!(r=OV(e,s))||r.enumerable});return t},UV=(t,e,n)=>(n=t!=null?jV(LV(t)):{},g1(!t||!t.__esModule?Jc(n,"default",{value:t,enumerable:!0}):n,t)),FV=t=>g1(Jc({},"__esModule",{value:!0}),t),y1={};VV(y1,{default:()=>qV});var zV=FV(y1),Wf=UV(kM),$V=bV;const BV=Wf.default[Wf.default.length-1];var qV=(0,$V.createReactPlayer)(Wf.default,BV);const HV=i_(zV);function v1({lesson:t,onComplete:e,onNext:n,isCompleted:r}){const{user:s}=Vt(),[i,o]=R.useState(!1),[u,c]=R.useState(0),[d,f]=R.useState(r),g=w=>{c(w.played*100),w.played>.9&&!d&&p()},p=async()=>{if(!t.courseId||!s)return;(await ms.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?l.jsx(HV,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:g,onPlay:()=>o(!0),onPause:()=>o(!1)}):l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-white text-center",children:[l.jsx(ec,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Aucune vido disponible"})]})})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),l.jsx("p",{className:"text-gray-600",children:t.description})]}),d&&l.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[l.jsx(mt,{className:"w-5 h-5 mr-1"}),l.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[l.jsx("span",{children:"Progression"}),l.jsxs("span",{children:[Math.round(u),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})})]}),l.jsxs("div",{className:"flex space-x-3",children:[!d&&l.jsxs("button",{onClick:p,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[l.jsx(mt,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),n&&l.jsxs("button",{onClick:n,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",l.jsx(Xo,{className:"w-5 h-5 ml-2"})]})]}),t.content&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),l.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function WV({courseId:t,currentLessonId:e,onLessonSelect:n,userProgress:r=[],isPurchased:s=!1}){const[i,o]=R.useState([]),[u,c]=R.useState(new Set),[d,f]=R.useState(!0);R.useEffect(()=>{g()},[t]);const g=async()=>{f(!0);const T=await tc.getModulesByCourse(t);if(T.success){const C=await Promise.all(T.modules.map(async E=>{const x=await tc.getLessonsByModule(E.id);return{...E,lessons:x.lessons||[]}}));o(C),C.length>0&&c(new Set([C[0].id]))}f(!1)},p=T=>{c(C=>{const E=new Set(C);return E.has(T)?E.delete(T):E.add(T),E})},w=T=>ms.isLessonCompleted(T,r),N=T=>T.reduce((C,E)=>C+(E.duration||0),0);return d?l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),l.jsx("div",{className:"divide-y divide-gray-200",children:i.map((T,C)=>l.jsxs("div",{children:[l.jsx("button",{onClick:()=>p(T.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-center",children:[u.has(T.id)?l.jsx(qL,{className:"w-5 h-5 text-gray-400 mr-2"}):l.jsx(Ib,{className:"w-5 h-5 text-gray-400 mr-2"}),l.jsxs("div",{className:"text-left",children:[l.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",C+1,": ",T.title]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[T.lessons.length," leon",T.lessons.length>1?"s":"",N(T.lessons)>0&&l.jsxs("span",{children:["  ",N(T.lessons)," min"]})]})]})]})}),u.has(T.id)&&l.jsx("div",{className:"bg-gray-50",children:T.lessons.map((E,x)=>{const y=w(E.id),S=E.id===e,D=s||E.isFree;return l.jsxs("button",{onClick:()=>D&&n(E),disabled:!D,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${S?"bg-green-50 border-l-4 border-green-500":""} ${D?"":"opacity-50 cursor-not-allowed"}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-3",children:D?y?l.jsx(mt,{className:"w-4 h-4 text-green-500"}):l.jsx(ec,{className:"w-4 h-4 text-gray-400"}):l.jsx($i,{className:"w-4 h-4 text-gray-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsxs("p",{className:`text-sm ${S?"font-medium text-green-700":"text-gray-700"}`,children:[x+1,". ",E.title]}),E.duration&&l.jsxs("p",{className:"text-xs text-gray-500",children:[E.duration," min"]})]})]}),E.isFree&&l.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},E.id)})})]},T.id))}),i.length===0&&l.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:l.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}class KV{async createQuiz(e){try{const n={...e,createdAt:le(),updatedAt:le()},r=await Cs(pt(Z,"quizzes"),n);return console.log(" Quiz created:",r.id),{success:!0,id:r.id}}catch(n){return console.error(" Error creating quiz:",n),{success:!1,error:n.message}}}async getQuizzesByCourse(e){try{const n=Br(pt(Z,"quizzes"),Rt("courseId","==",e),_s("order","asc"));return{success:!0,quizzes:(await nr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error(" Error fetching quizzes:",n),{success:!1,error:n.message,quizzes:[]}}}async submitQuizAnswers(e,n,r,s){try{const i=await Zt(de(Z,"quizzes",n));if(!i.exists())return{success:!1,error:"Quiz not found"};const o=i.data();let u=0;const c=o.questions.map((p,w)=>{const N=s[w],T=N===p.correctAnswer;return T&&u++,{questionId:p.id||w,question:p.question,userAnswer:N,correctAnswer:p.correctAnswer,isCorrect:T,explanation:p.explanation}}),d=Math.round(u/o.questions.length*100),f={userId:e,quizId:n,courseId:r,answers:s,results:c,score:d,correctCount:u,totalQuestions:o.questions.length,completedAt:le()},g=await Cs(pt(Z,"quiz-results"),f);return console.log(" Quiz submitted:",g.id,"Score:",d),{success:!0,score:d,results:c,resultId:g.id}}catch(i){return console.error(" Error submitting quiz:",i),{success:!1,error:i.message}}}async getQuizResults(e,n){try{const r=Br(pt(Z,"quiz-results"),Rt("userId","==",e),Rt("quizId","==",n),_s("completedAt","desc"));return{success:!0,results:(await nr(r)).docs.map(o=>({id:o.id,...o.data()}))}}catch(r){return console.error(" Error fetching quiz results:",r),{success:!1,error:r.message,results:[]}}}async getCourseQuizResults(e,n){try{const r=Br(pt(Z,"quiz-results"),Rt("userId","==",e),Rt("courseId","==",n),_s("completedAt","desc"));return{success:!0,results:(await nr(r)).docs.map(o=>({id:o.id,...o.data()}))}}catch(r){return console.error(" Error fetching course quiz results:",r),{success:!1,error:r.message,results:[]}}}async updateQuiz(e,n){try{const r=de(Z,"quizzes",e);return await en(r,{...n,updatedAt:le()}),console.log(" Quiz updated:",e),{success:!0}}catch(r){return console.error(" Error updating quiz:",r),{success:!1,error:r.message}}}async deleteQuiz(e){try{return await KT(de(Z,"quizzes",e)),console.log(" Quiz deleted:",e),{success:!0}}catch(n){return console.error(" Error deleting quiz:",n),{success:!1,error:n.message}}}}const n_=new KV;function GV({quiz:t,courseId:e,onComplete:n}){const{currentUser:r}=Vt(),[s,i]=R.useState({}),[o,u]=R.useState(!1),[c,d]=R.useState(null),[f,g]=R.useState(null);R.useEffect(()=>{r&&t.id&&e&&p()},[t.id,e,r]);const p=async()=>{if(!r)return;const y=await n_.getQuizResults(r.uid,t.id);if(y.success&&y.results.length>0){const S=Math.max(...y.results.map(D=>D.score));g(S)}},w=(y,S)=>{o||i({...s,[y]:S})},N=async()=>{const y=t.questions.map((I,v)=>s[v]??-1);u(!0);let S=0;t.questions.forEach((I,v)=>{y[v]===I.correctAnswer&&S++});const V={score:Math.round(S/t.questions.length*100),correctCount:S,totalQuestions:t.questions.length};d(V),r&&t.id&&e&&await n_.submitQuizAnswers(r.uid,t.id,e,y),n==null||n(V)},T=()=>{i({}),u(!1),d(null)},C=y=>s[y]!==void 0,E=t.questions.every((y,S)=>C(S)),x=y=>{switch(y==null?void 0:y.toLowerCase()){case"beginner":return"bg-green-100 text-green-700";case"intermediate":return"bg-yellow-100 text-yellow-700";case"advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title}),t.difficulty&&l.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${x(t.difficulty)}`,children:t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)})]}),t.description&&l.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("span",{children:[t.questions.length," questions"]}),f&&!o&&l.jsxs("span",{className:"text-green-600 font-medium",children:["Meilleur score: ",f,"%"]})]})]}),l.jsx("div",{className:"space-y-8",children:t.questions.map((y,S)=>l.jsxs("div",{className:"border-2 border-gray-100 rounded-xl p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:S+1}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:y.question})]})}),l.jsx("div",{className:"space-y-3",children:y.options.map((D,V)=>{const I=s[S]===V,v=o&&V===y.correctAnswer,A=o&&I&&V!==y.correctAnswer;return l.jsx("button",{onClick:()=>w(S,V),disabled:o,className:`w-full text-left p-4 rounded-xl border-2 transition-all ${v?"border-green-500 bg-green-50":A?"border-red-500 bg-red-50":I?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${o?"cursor-not-allowed":"cursor-pointer"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${I?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:I&&!o&&l.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),l.jsx("span",{className:"font-medium",children:D})]}),o&&v&&l.jsx(mt,{className:"w-6 h-6 text-green-600"}),o&&A&&l.jsx(Cb,{className:"w-6 h-6 text-red-600"})]})},V)})}),o&&y.explanation&&l.jsx("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-semibold text-blue-700",children:"Explication: "}),y.explanation]})})]},S))}),l.jsx("div",{className:"mt-8",children:o?l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 p-8 rounded-2xl text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsx(bb,{className:"w-16 h-16 mx-auto mb-4"}),l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Termin!"}),l.jsxs("p",{className:"text-5xl font-bold mb-4",children:[c==null?void 0:c.score,"%"]}),l.jsxs("p",{className:"text-lg mb-6",children:[c==null?void 0:c.correctCount," / ",c==null?void 0:c.totalQuestions," rponses correctes"]}),l.jsxs("button",{onClick:T,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-semibold hover:bg-gray-100 transition",children:[l.jsx(s4,{className:"w-5 h-5"}),"Ressayer"]})]})}):l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-6 rounded-xl",children:[l.jsx("div",{className:"text-sm text-gray-600",children:E?l.jsx("span",{className:"text-green-600 font-medium",children:" Toutes les questions rpondues"}):l.jsxs("span",{children:[Object.keys(s).length," / ",t.questions.length," questions rpondues"]})}),l.jsx("button",{onClick:N,disabled:!E,className:`px-8 py-3 rounded-xl font-semibold transition ${E?"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Soumettre le Quiz"})]})})]})}class QV{async createExercise(e){try{const n={...e,createdAt:le(),updatedAt:le()},r=await Cs(pt(Z,"exercises"),n);return console.log(" Exercise created:",r.id),{success:!0,id:r.id}}catch(n){return console.error(" Error creating exercise:",n),{success:!1,error:n.message}}}async getExercisesByCourse(e){try{const n=Br(pt(Z,"exercises"),Rt("courseId","==",e),_s("order","asc"));return{success:!0,exercises:(await nr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error(" Error fetching exercises:",n),{success:!1,error:n.message,exercises:[]}}}async getExerciseById(e){try{const n=de(Z,"exercises",e),r=await Zt(n);return r.exists()?{success:!0,exercise:{id:r.id,...r.data()}}:{success:!1,error:"Exercise not found"}}catch(n){return console.error(" Error fetching exercise:",n),{success:!1,error:n.message}}}async updateExercise(e,n){try{const r=de(Z,"exercises",e);return await en(r,{...n,updatedAt:le()}),console.log(" Exercise updated:",e),{success:!0}}catch(r){return console.error(" Error updating exercise:",r),{success:!1,error:r.message}}}async deleteExercise(e){try{return await KT(de(Z,"exercises",e)),console.log(" Exercise deleted:",e),{success:!0}}catch(n){return console.error(" Error deleting exercise:",n),{success:!1,error:n.message}}}async trackLevelCompletion(e,n,r,s){try{const i=`${e}_${n}`,o=de(Z,"exercise-progress",i),u=await Zt(o);let c=[];return u.exists()&&(c=u.data().completedLevels||[]),c.includes(s)||(c.push(s),c.sort((d,f)=>d-f)),await Yu(o,{userId:e,exerciseId:n,courseId:r,completedLevels:c,currentLevel:Math.max(...c),lastUpdated:le()},{merge:!0}),console.log(" Exercise level completed:",{exerciseId:n,level:s}),{success:!0,completedLevels:c}}catch(i){return console.error(" Error tracking exercise progress:",i),{success:!1,error:i.message}}}async getExerciseProgress(e,n){try{const r=`${e}_${n}`,s=de(Z,"exercise-progress",r),i=await Zt(s);return i.exists()?{success:!0,progress:i.data()}:{success:!0,progress:{completedLevels:[],currentLevel:-1}}}catch(r){return console.error(" Error fetching exercise progress:",r),{success:!1,error:r.message,progress:{completedLevels:[],currentLevel:-1}}}}async getCourseExerciseProgress(e,n){try{const r=Br(pt(Z,"exercise-progress"),Rt("userId","==",e),Rt("courseId","==",n)),s=await nr(r),i={};return s.docs.forEach(o=>{const u=o.data();i[u.exerciseId]=u}),{success:!0,progress:i}}catch(r){return console.error(" Error fetching course exercise progress:",r),{success:!1,error:r.message,progress:{}}}}}const r_=new QV;function YV({exercise:t,courseId:e,onComplete:n}){var y;const{currentUser:r}=Vt(),[s,i]=R.useState(0),[o,u]=R.useState(((y=t.levels[0])==null?void 0:y.starterCode)||""),[c,d]=R.useState(!1),[f,g]=R.useState(!1),[p,w]=R.useState([]);R.useEffect(()=>{r&&t.id&&N()},[t.id,r]);const N=async()=>{if(!r)return;const S=await r_.getExerciseProgress(r.uid,t.id);S.success&&S.progress.completedLevels&&w(S.progress.completedLevels)},T=t.levels[s],C=async()=>{var S;if(!p.includes(s)){const D=[...p,s];w(D),r&&t.id&&e&&await r_.trackLevelCompletion(r.uid,t.id,e,s),n==null||n(s)}s<t.levels.length-1&&(i(s+1),u(((S=t.levels[s+1])==null?void 0:S.starterCode)||""),d(!1),g(!1))},E=S=>{switch(S){case 0:return"bg-green-100 text-green-700 border-green-300";case 1:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 2:return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},x=S=>{switch(S){case 0:return" Niveau 1: Dbutant";case 1:return" Niveau 2: Intermdiaire";case 2:return" Niveau 3: Avanc";default:return`Niveau ${S+1}`}};return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),l.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),l.jsx("div",{className:"flex gap-2 mb-4",children:t.levels.map((S,D)=>l.jsx("div",{className:`flex-1 h-2 rounded-full transition ${D===s?"bg-gradient-to-r from-green-500 to-blue-500":p.includes(D)?"bg-green-500":"bg-gray-200"}`},D))}),l.jsx("div",{className:"flex gap-3",children:t.levels.map((S,D)=>l.jsxs("button",{onClick:()=>{var V;i(D),u(((V=t.levels[D])==null?void 0:V.starterCode)||""),d(!1),g(!1)},className:`px-4 py-2 rounded-xl border-2 font-medium text-sm transition ${D===s?E(D):p.includes(D)?"bg-green-50 text-green-600 border-green-200":"bg-gray-50 text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[p.includes(D)&&l.jsx(mt,{className:"w-4 h-4 inline mr-1"}),"Niveau ",D+1]},D))})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`p-4 rounded-xl border-2 ${E(s)}`,children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:x(s)}),l.jsx("p",{className:"text-sm",children:T==null?void 0:T.title})]}),l.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Objectif:"}),l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:T==null?void 0:T.description})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"font-semibold text-gray-900",children:"Votre Code:"}),l.jsxs("button",{onClick:()=>g(!f),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[l.jsx(JL,{className:"w-4 h-4"}),f?"Masquer les indices":"Afficher les indices"]})]}),f&&(T==null?void 0:T.hints)&&T.hints.length>0&&l.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[l.jsx("p",{className:"font-semibold text-blue-900 mb-2",children:" Indices:"}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:T.hints.map((S,D)=>l.jsx("li",{children:S},D))})]}),l.jsx("textarea",{value:o,onChange:S=>u(S.target.value),className:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 rounded-xl border-2 border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none",placeholder:"crivez votre code ici...",spellCheck:!1})]}),l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:[c?l.jsx(QL,{className:"w-4 h-4"}):l.jsx(YL,{className:"w-4 h-4"}),c?"Masquer la solution":"Voir la solution"]}),c&&(T==null?void 0:T.solution)&&l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded mb-3",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",l.jsx("strong",{children:"Astuce:"})," Essayez de rsoudre l'exercice par vous-mme avant de regarder la solution!"]})}),l.jsxs("div",{className:"p-4 bg-gray-900 rounded-xl",children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Solution:"}),l.jsx("pre",{className:"font-mono text-sm text-green-400 overflow-x-auto",children:T.solution})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4",children:[l.jsx("div",{className:"text-sm text-gray-600",children:p.includes(s)&&l.jsx("span",{className:"text-green-600 font-medium",children:" Niveau termin"})}),l.jsxs("div",{className:"flex gap-3",children:[s>0&&l.jsx("button",{onClick:()=>{var S;i(s-1),u(((S=t.levels[s-1])==null?void 0:S.starterCode)||""),d(!1),g(!1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition",children:"Niveau Prcdent"}),l.jsx("button",{onClick:C,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition flex items-center gap-2",children:s<t.levels.length-1?l.jsxs(l.Fragment,{children:["Niveau Suivant",l.jsx(Ib,{className:"w-5 h-5"})]}):l.jsxs(l.Fragment,{children:[l.jsx(mt,{className:"w-5 h-5"}),"Terminer l'Exercice"]})})]})]})]})]})}function nc({content:t,contentType:e,onComplete:n,onNext:r}){const[s,i]=R.useState(null),o=async c=>{const d=Math.floor(Math.random()*40)+60,f={score:d,correctCount:Math.floor(d/100*c.length),totalQuestions:c.length};return i(f),n==null||n(),f},u=c=>{console.log("Exercise level completed:",c),c===t.levels.length-1&&(n==null||n())};switch(e){case"video":return l.jsx(v1,{lesson:t,onComplete:n,onNext:r,isCompleted:!1});case"text":case"course":return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title})]}),l.jsx("div",{className:"prose prose-lg max-w-none",children:typeof t.content=="string"?l.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:t.content}):t.content}),l.jsx("div",{className:"mt-8 flex justify-end",children:l.jsx("button",{onClick:()=>{n==null||n(),r==null||r()},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition",children:"Marquer comme termin et continuer"})})]});case"quiz":return l.jsx(GV,{quiz:t,onSubmit:o,previousResult:s});case"exercise":return l.jsx(YV,{exercise:t,onComplete:u});default:return l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:l.jsxs("p",{className:"text-gray-600",children:["Type de contenu non support: ",e]})})}}const _1={title:"Quiz React & Hooks",description:"valuez vos connaissances sur React et les Hooks",difficulty:"intermediate",courseId:"demo-react-course",order:1,questions:[{id:"q1",question:"Quel langage est principalement utilis pour dfinir la structure et le contenu d'une page web ?",options:["CSS","JavaScript","HTML","Python"],correctAnswer:2,explanation:"HTML (HyperText Markup Language) est le langage standard pour crer la structure des pages web."},{id:"q2",question:"Que signifie l'acronyme DOM dans le contexte du dveloppement web ?",options:["Document Object Model","Data Order Manager","Design Object Mapping","Direct Output Method"],correctAnswer:0,explanation:"Le DOM (Document Object Model) est une interface de programmation qui reprsente la structure d'un document HTML/XML."},{id:"q3",question:"Dans la programmation, une variable est utilise pour...",options:["Dfinir le style d'un lment","Stocker temporairement une valeur","Crer une fonction","Connecter une base de donnes"],correctAnswer:1,explanation:"Une variable permet de stocker et manipuler des donnes dans un programme."},{id:"q4",question:"Dans React, comment appelle-t-on le composant qui ne fait que recevoir des donnes et n'a pas son propre tat interne ?",options:["Composant de classe","Composant fonctionnel (ou stateless)","Composant parent","Composant d'tat"],correctAnswer:1,explanation:"Un composant fonctionnel sans tat (stateless) reoit des props mais ne gre pas son propre state."},{id:"q5",question:"Laquelle de ces mthodes sert  ajouter un lment  la fin d'un tableau (Array) en JavaScript ?",options:[".get()",".insert()",".pop()",".push()"],correctAnswer:3,explanation:"La mthode .push() ajoute un ou plusieurs lments  la fin d'un tableau."},{id:"q6",question:"Quel est le rle principal du Hook useEffect en React ?",options:["Grer l'tat local","Excuter des effets secondaires (requtes API, abonnements) aprs le rendu","Crer des rfrences","Optimiser le rendu du composant"],correctAnswer:1,explanation:"useEffect permet d'excuter du code aprs le rendu du composant, comme des appels API ou des abonnements."},{id:"q7",question:"Que reprsente le tableau de dpendances pass comme deuxime argument  useEffect ?",options:["La liste des composants  mettre  jour","Les valeurs que l'effet doit surveiller pour se r-excuter","Les donnes initiales du composant","Les props que le composant ne doit pas utiliser"],correctAnswer:1,explanation:"Le tableau de dpendances indique  useEffect quand se r-excuter - seulement quand ces valeurs changent."},{id:"q8",question:"En dveloppement front-end, que signifie l'acronyme API ?",options:["Application Process Interface","Asynchronous Programming Instruction","Application Programming Interface","Advanced Protocol Integration"],correctAnswer:2,explanation:"API (Application Programming Interface) dfinit comment diffrents logiciels communiquent entre eux."},{id:"q9",question:"Qu'est-ce que le concept de 'Lifting State Up' en React ?",options:["Le dplacement de l'tat d'un enfant vers son parent commun","L'utilisation de Hooks  la place de classes","Le dploiement de l'application sur un serveur","L'utilisation du contexte global"],correctAnswer:0,explanation:"Lifting State Up consiste  dplacer l'tat vers un composant parent commun pour le partager entre composants enfants."},{id:"q10",question:"Quelle proprit CSS est utilise pour rendre un lment cliquable sans qu'il ne ragisse aux vnements de la souris ou du toucher ?",options:["visibility: hidden;","cursor: none;","display: none;","pointer-events: none;"],correctAnswer:3,explanation:"pointer-events: none dsactive toutes les interactions de la souris sur un lment."},{id:"q11",question:"Pourquoi utiliserait-on React.memo sur un composant fonctionnel ?",options:["Pour crer un tat global","Pour optimiser les composants qui ne doivent pas se re-rendre si leurs props n'ont pas chang","Pour forcer un re-rendu","Pour grer des effets asynchrones complexes"],correctAnswer:1,explanation:"React.memo est une HOC qui mmorise le composant et vite les re-rendus inutiles quand les props n'ont pas chang."},{id:"q12",question:"Quel est le rle principal de useCallback ?",options:["Mmoriser le rsultat d'une fonction coteuse","Mmoriser la fonction elle-mme (prvenir sa recration inutile)","Excuter un rappel aprs le montage","Grer les transitions d'tat asynchrones"],correctAnswer:1,explanation:"useCallback mmorise une fonction pour viter qu'elle soit recre  chaque rendu, utile pour optimiser les performances."},{id:"q13",question:"Qu'est-ce que le Tree Shaking dans le contexte du bundling JavaScript (Webpack, Rollup) ?",options:["La rduction de la taille des images","L'optimisation des structures de donnes arborescentes","L'limination du code mort ou inutilis dans le bundle final","Le chargement progressif des composants"],correctAnswer:2,explanation:"Tree Shaking analyse et supprime le code JavaScript non utilis pour rduire la taille du bundle final."},{id:"q14",question:"Quel problme le Hook useReducer est-il le mieux adapt  rsoudre par rapport  useState ?",options:["La gestion des formulaires","La gestion d'une logique d'tat complexe qui dpend de l'tat prcdent","La gestion des rfrences DOM","La cration d'un tat global simple"],correctAnswer:1,explanation:"useReducer est idal pour grer un tat complexe avec plusieurs sous-valeurs ou quand le prochain tat dpend du prcdent."},{id:"q15",question:"Dans le contexte de l'API de navigation (fetch), quel statut HTTP indique qu'une ressource a t cre avec succs sur le serveur ?",options:["200 OK","201 Created","204 No Content","202 Accepted"],correctAnswer:1,explanation:"Le code de statut HTTP 201 Created indique qu'une nouvelle ressource a t cre avec succs."}]},x1={title:"Exercice Progressif: To-Do List React",description:"Construisez une application de gestion de tches en 3 tapes progressives",courseId:"demo-react-course",order:1,levels:[{level:0,title:"Affichage Statique",description:`Crez un composant TodoList qui affiche une liste de tches pr-dfinies.

Objectifs:
- Crez un composant fonctionnel TodoList
- Dfinissez un tableau de 3 tches (strings): ['Acheter lait', 'Coder React', 'Faire sport']
- Utilisez map() pour afficher chaque tche dans un <li>
- Ajoutez les lments dans une <ul>`,starterCode:`import React from 'react';

function TodoList() {
  // Dfinissez votre tableau de tches ici
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      {/* Ajoutez votre liste ici */}
    </div>
  );
}

export default TodoList;`,solution:`import React from 'react';

function TodoList() {
  const taches = ['Acheter lait', 'Coder React', 'Faire sport'];
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez un tableau pour stocker les tches","La mthode .map() transforme chaque lment du tableau","N'oubliez pas la prop 'key' pour chaque <li>"]},{level:1,title:"Ajout de l'tat (useState)",description:`Ajoutez la fonctionnalit d'ajout de nouvelles tches.

Objectifs:
- Utilisez useState pour grer le tableau de tches
- Ajoutez un champ <input> et un bouton "Ajouter"
- Utilisez un deuxime useState pour la valeur de l'input
- Implmentez la fonction d'ajout qui met  jour le state`,starterCode:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  // Ajoutez un state pour la nouvelle tche
  
  const ajouterTache = () => {
    // Implmentez la logique d'ajout
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      {/* Ajoutez input et bouton ici */}
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,solution:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez le spread operator [...taches, nouvelleTache] pour ajouter","N'oubliez pas de vider l'input aprs l'ajout","Vrifiez que l'input n'est pas vide avec .trim()"]},{level:2,title:"Suppression et Styles",description:`Ajoutez la suppression de tches et un style conditionnel.

Objectifs:
- Ajoutez un bouton "X"  ct de chaque tche
- Implmentez la fonction de suppression avec .filter()
- Ajoutez un style (texte barr) si la tche contient "Fait"`,starterCode:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  const supprimerTache = (index) => {
    // Implmentez la suppression
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>
            {tache}
            {/* Ajoutez le bouton supprimer et le style conditionnel */}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,solution:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  const supprimerTache = (index) => {
    setTaches(taches.filter((_, i) => i !== index));
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li 
            key={index}
            style={{ 
              textDecoration: tache.includes('Fait') ? 'line-through' : 'none' 
            }}
          >
            {tache}
            <button onClick={() => supprimerTache(index)}>X</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez .filter() pour crer un nouveau tableau sans l'lment supprim","Le style conditionnel peut utiliser l'oprateur ternaire","La mthode .includes() vrifie si une string contient un texte"]}]};function XV(){const{courseId:t}=Iw(),e=on(),{currentUser:n,userProfile:r}=Vt(),[s,i]=R.useState(null),[o,u]=R.useState(null),[c,d]=R.useState([]),[f,g]=R.useState("overview"),[p,w]=R.useState(!0),[N,T]=R.useState(!1),[C,E]=R.useState([]);R.useEffect(()=>{x()},[t,n]);const x=async()=>{var I;if(console.log(" loadCourseData called",{courseId:t,currentUser:!!n,userProfile:!!r}),!t||!n){console.log(" Early return - missing courseId or currentUser");return}try{w(!0),console.log(" Loading course:",t);const v=await pn.getCourseById(t);if(console.log(" Course result:",v),v.success)i(v.course);else{console.error(" Failed to load course"),w(!1);return}const A=(I=r==null?void 0:r.purchasedCourses)==null?void 0:I.includes(t);console.log(" Has purchased:",A),T(A);const b=await ms.getCourseProgress(n.uid,t);b.success&&d(b.progress.completedLessons||[]);const k=await tc.getModulesByCourse(t);if(k.success){const j=[];for(const P of k.modules){const He=await tc.getLessonsByModule(P.id);He.success&&j.push(...He.lessons.map(Dn=>({...Dn,moduleId:P.id,courseId:t})))}if(E(j),j.length>0&&!o){const P=j.find(He=>!ms.isLessonCompleted(He.id,b.progress.completedLessons||[]));u(P||j[0])}}console.log(" Course data loaded successfully"),w(!1)}catch(v){console.error(" Error loading course data:",v),w(!1)}},y=I=>{d(v=>[...v,I])},S=()=>{if(!o||C.length===0)return;const I=C.findIndex(v=>v.id===o.id);I<C.length-1&&u(C[I+1])},D=()=>C.length===0?0:ms.calculateProgressPercentage(c.length,C.length);if(p)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),l.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!N)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),l.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const V=[{id:"overview",name:"Aperu",icon:Je},{id:"quiz",name:"Quiz",icon:zL},{id:"exercise",name:"Exercice",icon:WL},{id:"resources",name:"Ressources",icon:XL},{id:"qna",name:"Q&A",icon:e4}];return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(zi,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",D(),"%"]}),l.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:l.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${D()}%`}})})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&l.jsx(v1,{lesson:o,onComplete:y,onNext:S,isCompleted:ms.isLessonCompleted(o.id,c)}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex -mb-px",children:V.map(I=>{const v=I.icon;return l.jsxs("button",{onClick:()=>g(I.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===I.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(v,{className:"w-4 h-4 mr-2"}),I.name]},I.id)})})}),l.jsxs("div",{className:"p-6",children:[f==="overview"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),l.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),l.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((I,v)=>l.jsx("li",{children:I},v))})]})]}),f==="quiz"&&l.jsx("div",{className:"-m-6",children:l.jsx(nc,{content:_1,contentType:"quiz",onComplete:()=>console.log("Quiz completed"),onNext:S})}),f==="exercise"&&l.jsx("div",{className:"-m-6",children:l.jsx(nc,{content:x1,contentType:"exercise",onComplete:()=>console.log("Exercise completed"),onNext:S})}),f==="resources"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),l.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),l.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx(WV,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:u,userProgress:c,isPurchased:N})})]})})]})}function JV(){const{userProfile:t,currentUser:e}=Vt(),[n,r]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{e&&t&&o()},[e,t]);const o=async()=>{i(!0);const u=(t==null?void 0:t.purchasedCourses)||[];if(u.length===0){i(!1);return}const c=await Promise.all(u.map(async d=>{const f=await pn.getCourseById(d);if(f.success&&f.course.status!=="archived"){const g=await ms.getCourseProgress(e.uid,d);return{...f.course,progress:g.completionPercentage||0,totalLessons:g.totalLessons||0,completedLessons:g.completedLessons||0}}return null}));r(c.filter(d=>d!==null)),i(!1)};return s?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.length===0?l.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[l.jsx(Je,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun cours achet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par explorer nos cours disponibles."}),l.jsxs(pe,{to:"/courses",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[l.jsx(Je,{className:"w-5 h-5 mr-2"}),"Explorer les cours"]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition",children:[l.jsx("img",{src:u.thumbnail||"/assets/images/default-course.png",alt:u.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u.title}),l.jsx("p",{className:"text-gray-600 mb-4",children:u.category||"General"}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{className:"font-medium",children:"Progression"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[u.progress,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${u.progress}%`}})})]}),l.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(mt,{className:"w-4 h-4 mr-1 text-green-500"}),l.jsxs("span",{children:[u.completedLessons,"/",u.totalLessons," leons"]})]})}),l.jsxs(pe,{to:`/course/${u.id}/view`,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-4 rounded-xl hover:shadow-xl transition flex items-center justify-center font-medium",children:[l.jsx(Ff,{className:"w-5 h-5 mr-2"}),u.progress===0?"Commencer":"Continuer"]})]})]},u.id))})})]})}function ZV(){const[t]=PA(),e=on(),[n,r]=R.useState(!0),[s,i]=R.useState(null),[o,u]=R.useState(null),[c,d]=R.useState(0),f=10,g=R.useRef(null),p=R.useRef(!1),w=R.useRef(0),N=t.get("payment_id"),T=N==null?void 0:N.split("?")[0],C=R.useCallback(async()=>{if(p.current)return;if(!T){u("ID de paiement manquant"),r(!1),p.current=!0;return}w.current+=1;const E=w.current;if(console.log(` Tentative ${E}/${f}`),d(E),E>f){console.log(" Limite de tentatives atteinte (dpasse)"),u("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),p.current=!0;return}if(p.current||(await new Promise(y=>setTimeout(y,3e3)),p.current))return;const x=await Rb.verifyPayment(T);if(console.log(" Rsultat vrification:",x),!p.current)if(x.success)if(i(x.data),x.status==="completed")console.log(" Paiement confirm !"),r(!1),p.current=!0,g.current&&clearTimeout(g.current);else if(x.status==="pending")if(w.current>=f)console.log(" Limite de tentatives atteinte (pending)"),u("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),p.current=!0,g.current&&clearTimeout(g.current);else if(w.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let y="https://plateforme-educative.onrender.com";if(y&&y.includes("/"))try{const S=new URL(y);S.pathname!=="/"&&!y.includes("/sync-payment")&&(y=`${S.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",y)}if(y){const S=y.endsWith("/")?y.slice(0,-1):y;let D=`${S}/sync-payment`;const V="https://plateforme-educative.onrender.com";let I=null;if(V&&V.includes("/")&&V!==S)try{const b=new URL(V);if(b.pathname&&b.pathname!=="/"){const k=b.pathname.endsWith("/")?b.pathname.slice(0,-1):b.pathname;I=`${b.origin}${k}/sync-payment`}}catch{}console.log(" URL backend pour sync:",D),I&&console.log(" URL fallback pour sync:",I);const v=b=>fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:T})});(I?v(D).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),v(I))):v(D)).then(b=>b.ok?b.json():(console.error(" Erreur HTTP sync:",b.status,b.statusText),null)).then(b=>{b&&b.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),p.current=!0):(console.warn(" Synchronisation choue:",b),!p.current&&w.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(C,3e3)))}).catch(b=>{console.error(" Erreur synchronisation:",b),console.error("   Type:",b.name),console.error("   Message:",b.message),!p.current&&w.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(C,3e3))})}else!p.current&&w.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(C,3e3))}catch(y){console.warn(" Erreur synchronisation:",y),!p.current&&w.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(C,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(C,3e3);else x.status==="failed"?(u("Le paiement a chou"),r(!1),p.current=!0,g.current&&clearTimeout(g.current)):w.current>=f?(u("Le paiement a un statut inconnu. Veuillez contacter le support."),r(!1),p.current=!0,g.current&&clearTimeout(g.current)):(console.log(" Statut inconnu:",x.status,"- Nouvelle tentative..."),g.current=setTimeout(C,3e3));else console.error(" Erreur vrification:",x.error),u(x.error||"Erreur lors de la vrification du paiement"),r(!1),p.current=!0,g.current&&clearTimeout(g.current)},[T,f]);return R.useEffect(()=>(p.current=!1,w.current=0,d(0),g.current&&(clearTimeout(g.current),g.current=null),T?(console.log(" Vrification du paiement:",T),C()):(u("ID de paiement manquant"),r(!1),p.current=!0),()=>{g.current&&(clearTimeout(g.current),g.current=null),p.current=!0}),[T,C]),n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(Qm,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),l.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),c>0&&l.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",c,"/",f,"..."]})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),l.jsx("p",{className:"text-gray-600 mb-6",children:o}),l.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(mt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",l.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),l.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",l.jsx(Xo,{className:"w-5 h-5"})]}),l.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function e5(){const t=on();return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(Cb,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[l.jsx(zi,{className:"w-5 h-5"}),"Ressayer le paiement"]}),l.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function t5({onCreate:t}){const[e,n]=R.useState(""),[r,s]=R.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const u={id:Date.now().toString(),title:e.trim(),body:r.trim(),time:new Date().toLocaleString()};t&&t(u),n(""),s("")};return l.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),l.jsx("div",{className:"mb-2",children:l.jsx("input",{value:e,onChange:o=>n(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),l.jsx("div",{className:"mb-3",children:l.jsx("textarea",{value:r,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function n5({notification:t}){return l.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),l.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),l.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function r5({items:t=[]}){return t.length?l.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>l.jsx(n5,{notification:e},e.id))}):l.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function s5({onEdit:t,onAddNew:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,u]=R.useState(""),[c,d]=R.useState("all"),[f,g]=R.useState("");R.useEffect(()=>{p()},[c,f]);const p=async()=>{i(!0);const y={};c!=="all"&&(y.category=c),f&&(y.status=f);const S=await pn.getCourses(y);S.success&&r(S.courses),i(!1)},w=async y=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await pn.deleteCourse(y)).success&&p()},N=async y=>{(await pn.duplicateCourse(y)).success&&p()},T=async y=>{(await pn.publishCourse(y)).success&&p()},C=n.filter(y=>{var S,D;return((S=y.title)==null?void 0:S.toLowerCase().includes(o.toLowerCase()))||((D=y.description)==null?void 0:D.toLowerCase().includes(o.toLowerCase()))}),E=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],x=y=>{const S={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},V={draft:Pa,published:mt,archived:VL}[y]||Pa;return l.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${S[y]||S.draft}`,children:[l.jsx(V,{className:"w-3 h-3 mr-1"}),y==="draft"?"Brouillon":y==="published"?"Publi":"Archiv"]})};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),l.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[l.jsx(r4,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),l.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Ab,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:o,onChange:y=>u(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsx("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:E.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))}),l.jsxs("select",{value:f,onChange:y=>g(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"",children:"Tous les statuts"}),l.jsx("option",{value:"draft",children:"Brouillon"}),l.jsx("option",{value:"published",children:"Publi"}),l.jsx("option",{value:"archived",children:"Archiv"})]})]})}),s?l.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):C.length===0?l.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:l.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:C.map(y=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[y.thumbnail&&l.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-12 h-12 rounded object-cover mr-3"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),l.jsx("div",{className:"text-sm text-gray-500",children:y.level==="beginner"?"Dbutant":y.level==="intermediate"?"Intermdiaire":y.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.category}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[y.price," TND"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.enrolledCount||0}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(y.status)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[y.status==="draft"&&l.jsx("button",{onClick:()=>T(y.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:l.jsx(mt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>t(y),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:l.jsx(t4,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>N(y.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:l.jsx(KL,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>w(y.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:l.jsx(o4,{className:"w-5 h-5"})})]})})]},y.id))})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(y=>y.status==="published").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),l.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.filter(y=>y.status==="draft").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.reduce((y,S)=>y+(S.enrolledCount||0),0)})]})]})]})}function i5({courseId:t=null,onSave:e,onCancel:n}){const[r,s]=R.useState(!1),[i,o]=R.useState(null),[u,c]=R.useState(null),[d,f]=R.useState(null),[g,p]=R.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});R.useEffect(()=>{t&&w()},[t]);const w=async()=>{s(!0);const y=await pn.getCourseById(t);y.success?(p(y.course),y.course.thumbnail&&c(y.course.thumbnail)):o(y.error),s(!1)},N=y=>{const{name:S,value:D}=y.target;p(V=>({...V,[S]:D}))},T=y=>{const S=y.target.files[0];if(S){f(S);const D=new FileReader;D.onloadend=()=>{c(D.result)},D.readAsDataURL(S)}},C=async y=>{y.preventDefault(),s(!0),o(null);try{let S;t?S=await pn.updateCourse(t,g,d):S=await pn.createCourse(g,d),S.success?e==null||e(S):o(S.error)}catch(S){o(S.message)}finally{s(!1)}},E=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],x=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return l.jsxs("form",{onSubmit:C,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),l.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:l.jsx($f,{className:"w-6 h-6"})})]}),i&&l.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),l.jsx("input",{type:"text",name:"title",value:g.title,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),l.jsx("input",{type:"text",name:"shortDescription",value:g.shortDescription,onChange:N,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.shortDescription.length,"/150 caractres"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),l.jsx("textarea",{name:"description",value:g.description,onChange:N,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),l.jsx("select",{name:"category",value:g.category,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:E.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),l.jsx("select",{name:"level",value:g.level,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),l.jsx("input",{type:"number",name:"price",value:g.price,onChange:N,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),l.jsx("input",{type:"text",name:"duration",value:g.duration,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),l.jsx("input",{type:"text",name:"instructor",value:g.instructor,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),l.jsxs("select",{name:"language",value:g.language,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"fr",children:"Franais"}),l.jsx("option",{value:"ar",children:"Arabe"}),l.jsx("option",{value:"en",children:"Anglais"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),l.jsxs("div",{className:"flex items-start space-x-4",children:[u&&l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:u,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),l.jsx("button",{type:"button",onClick:()=>{c(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:l.jsx($f,{className:"w-4 h-4"})})]}),l.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[l.jsx(a4,{className:"w-8 h-8 mb-2"}),l.jsx("span",{className:"text-sm",children:"Choisir une image"}),l.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),l.jsx("input",{type:"url",name:"videoUrl",value:g.videoUrl,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),l.jsx("textarea",{name:"requirements",value:g.requirements,onChange:N,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),l.jsx("textarea",{name:"outcomes",value:g.outcomes,onChange:N,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),l.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[l.jsx(Sb,{className:"w-4 h-4 mr-2"}),r?"Enregistrement...":"Enregistrer"]})]})]})}function o5({onSelectDetails:t}){const[e,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(""),[u,c]=R.useState("all");R.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const w=(await nr(pt(Z,"users"))).docs.map(N=>({id:N.id,...N.data()}));n(w)}catch(p){console.error("Error loading users:",p)}finally{s(!1)}},f=async(p,w)=>{try{const N=w==="admin"?"student":"admin",T=de(Z,"users",p);await en(T,{role:N}),d()}catch(N){console.error("Error updating role:",N),alert("Erreur lors de la mise  jour du rle")}},g=e.filter(p=>{var T,C;const w=((T=p.displayName)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((C=p.email)==null?void 0:C.toLowerCase().includes(i.toLowerCase())),N=u==="all"||p.role===u;return w&&N});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),l.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Ab,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("select",{value:u,onChange:p=>c(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"all",children:"Tous les rles"}),l.jsx("option",{value:"student",children:"tudiants"}),l.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),r?l.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):g.length===0?l.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:l.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(p=>{var w,N,T;return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:p.photoURL?l.jsx("img",{src:p.photoURL,alt:p.displayName,className:"h-10 w-10 rounded-full"}):l.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:l.jsx(Xm,{className:"w-6 h-6 text-green-600"})})}),l.jsx("div",{className:"ml-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.displayName||"Sans nom"})})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:p.role==="admin"?l.jsxs(l.Fragment,{children:[l.jsx(Pb,{className:"w-3 h-3 mr-1"}),"Admin"]}):l.jsxs(l.Fragment,{children:[l.jsx(Je,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((w=p.purchasedCourses)==null?void 0:w.length)||0}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx($L,{className:"w-4 h-4 mr-1"}),((T=(N=p.createdAt)==null?void 0:N.toDate)==null?void 0:T.call(N).toLocaleDateString())||"N/A"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsx("button",{onClick:()=>f(p.id,p.role),className:`${p.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:p.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},p.id)})})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(p=>p.role==="student").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(p=>p.role==="admin").length})]})]})]})}function s_(){const{userProfile:t}=Vt(),[e,n]=R.useState("overview"),[r,s]=R.useState(!1),[i,o]=R.useState(null),[u,c]=R.useState([]),d=[{id:"overview",name:"Vue d'ensemble",icon:UL},{id:"courses",name:"Cours",icon:Je},{id:"users",name:"Utilisateurs",icon:Kc},{id:"settings",name:"Paramtres",icon:i4}],f=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],g=()=>{switch(e){case"overview":return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(p=>l.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:p.name}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.value})]}),l.jsx("div",{className:`text-sm font-medium ${p.changeType==="positive"?"text-green-600":"text-red-600"}`,children:p.change})]})},p.name))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx(t5,{onCreate:p=>c(w=>[p,...w])})}),l.jsx("div",{children:l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),l.jsx("div",{className:"p-4",children:l.jsx(r5,{items:u})})]})})]})]});case"courses":return l.jsx("div",{className:"space-y-6",children:r?l.jsx(i5,{courseId:i==null?void 0:i.id,onSave:()=>{s(!1),o(null)},onCancel:()=>{s(!1),o(null)}}):l.jsx(s5,{onEdit:p=>{o(p),s(!0)},onAddNew:()=>{o(null),s(!0)}})});case"users":return l.jsx(o5,{});case"settings":return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),l.jsx("div",{className:"bg-white rounded-lg shadow",children:l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),l.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",t==null?void 0:t.displayName]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"flex space-x-8",children:[l.jsx("div",{className:"w-64",children:l.jsx("nav",{className:"space-y-1",children:d.map(p=>{const w=p.icon;return l.jsxs("button",{onClick:()=>n(p.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${e===p.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[l.jsx(w,{className:"w-5 h-5 mr-3"}),p.name]},p.id)})})}),l.jsx("div",{className:"flex-1",children:g()})]})})]})}function a5(){const t=on(),[e,n]=R.useState("quiz");return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(zi,{className:"w-5 h-5 mr-2"}),"Retour"]}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Demo: Quiz & Exercices React"}),l.jsx("div",{})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex gap-4 mb-8",children:[l.jsx("button",{onClick:()=>n("quiz"),className:`px-6 py-3 rounded-xl font-semibold transition ${e==="quiz"?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" Quiz React (15 questions)"}),l.jsx("button",{onClick:()=>n("exercise"),className:`px-6 py-3 rounded-xl font-semibold transition ${e==="exercise"?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" Exercice To-Do List (3 niveaux)"})]}),e==="quiz"&&l.jsx(nc,{content:_1,contentType:"quiz",onComplete:()=>console.log("Quiz completed!"),onNext:()=>console.log("Next content")}),e==="exercise"&&l.jsx(nc,{content:x1,contentType:"exercise",onComplete:()=>console.log("Exercise completed!"),onNext:()=>console.log("Next content")})]})]})}function l5(){return l.jsx(IA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsx(OL,{children:l.jsxs(yA,{children:[l.jsx(ct,{path:"/login",element:l.jsx(l4,{})}),l.jsx(ct,{path:"/register",element:l.jsx(u4,{})}),l.jsx(ct,{path:"/forgot-password",element:l.jsx(c4,{})}),l.jsx(ct,{path:"/",element:l.jsx(m4,{})}),l.jsx(ct,{path:"/courses",element:l.jsx(T4,{})}),l.jsx(ct,{path:"/courses/:id",element:l.jsx(b4,{})}),l.jsx(ct,{path:"/demo",element:l.jsx(a5,{})}),l.jsx(ct,{path:"/payment/success",element:l.jsx(ZV,{})}),l.jsx(ct,{path:"/payment/cancel",element:l.jsx(e5,{})}),l.jsx(ct,{path:"/profile",element:l.jsx(bo,{children:l.jsx(g4,{})})}),l.jsx(ct,{path:kb,element:l.jsx(bo,{adminOnly:!0,children:l.jsx(s_,{})})}),l.jsx(ct,{path:d4,element:l.jsx(bo,{adminOnly:!0,children:l.jsx(s_,{})})}),l.jsx(ct,{path:"/my-courses",element:l.jsx(bo,{children:l.jsx(JV,{})})}),l.jsx(ct,{path:"/course/:courseId/view",element:l.jsx(bo,{children:l.jsx(XV,{})})}),l.jsx(ct,{path:"*",element:l.jsx(hf,{to:"/",replace:!0})})]})})})}yh.createRoot(document.getElementById("root")).render(l.jsx(g_.StrictMode,{children:l.jsx(l5,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{Pt as _,i_ as g,TM as p,R as r,Qc as u};
