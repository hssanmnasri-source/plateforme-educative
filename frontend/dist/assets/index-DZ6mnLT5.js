function m1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Id=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function p_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function g1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var m_={exports:{}},oc={},g_={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Da=Symbol.for("react.element"),y1=Symbol.for("react.portal"),v1=Symbol.for("react.fragment"),_1=Symbol.for("react.strict_mode"),w1=Symbol.for("react.profiler"),x1=Symbol.for("react.provider"),E1=Symbol.for("react.context"),T1=Symbol.for("react.forward_ref"),I1=Symbol.for("react.suspense"),b1=Symbol.for("react.memo"),N1=Symbol.for("react.lazy"),py=Symbol.iterator;function S1(t){return t===null||typeof t!="object"?null:(t=py&&t[py]||t["@@iterator"],typeof t=="function"?t:null)}var y_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v_=Object.assign,__={};function qi(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||y_}qi.prototype.isReactComponent={};qi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};qi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function w_(){}w_.prototype=qi.prototype;function Zf(t,e,n){this.props=t,this.context=e,this.refs=__,this.updater=n||y_}var ep=Zf.prototype=new w_;ep.constructor=Zf;v_(ep,qi.prototype);ep.isPureReactComponent=!0;var my=Array.isArray,x_=Object.prototype.hasOwnProperty,tp={current:null},E_={key:!0,ref:!0,__self:!0,__source:!0};function T_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)x_.call(e,r)&&!E_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Da,type:t,key:i,ref:o,props:s,_owner:tp.current}}function A1(t,e){return{$$typeof:Da,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function np(t){return typeof t=="object"&&t!==null&&t.$$typeof===Da}function P1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var gy=/\/+/g;function bd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?P1(""+t.key):e.toString(36)}function ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Da:case y1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+bd(o,0):r,my(s)?(n="",t!=null&&(n=t.replace(gy,"$&/")+"/"),ql(s,e,n,"",function(d){return d})):s!=null&&(np(s)&&(s=A1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(gy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",my(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+bd(i,l);o+=ql(i,e,n,c,s)}else if(c=S1(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+bd(i,l++),o+=ql(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function wl(t,e,n){if(t==null)return t;var r=[],s=0;return ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function k1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Nt={current:null},Hl={transition:null},C1={ReactCurrentDispatcher:Nt,ReactCurrentBatchConfig:Hl,ReactCurrentOwner:tp};function I_(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:wl,forEach:function(t,e,n){wl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return wl(t,function(){e++}),e},toArray:function(t){return wl(t,function(e){return e})||[]},only:function(t){if(!np(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=qi;ee.Fragment=v1;ee.Profiler=w1;ee.PureComponent=Zf;ee.StrictMode=_1;ee.Suspense=I1;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=C1;ee.act=I_;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=v_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=tp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)x_.call(e,c)&&!E_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Da,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:E1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:x1,_context:t},t.Consumer=t};ee.createElement=T_;ee.createFactory=function(t){var e=T_.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:T1,render:t}};ee.isValidElement=np;ee.lazy=function(t){return{$$typeof:N1,_payload:{_status:-1,_result:t},_init:k1}};ee.memo=function(t,e){return{$$typeof:b1,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Hl.transition;Hl.transition={};try{t()}finally{Hl.transition=e}};ee.unstable_act=I_;ee.useCallback=function(t,e){return Nt.current.useCallback(t,e)};ee.useContext=function(t){return Nt.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return Nt.current.useDeferredValue(t)};ee.useEffect=function(t,e){return Nt.current.useEffect(t,e)};ee.useId=function(){return Nt.current.useId()};ee.useImperativeHandle=function(t,e,n){return Nt.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return Nt.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return Nt.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return Nt.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return Nt.current.useReducer(t,e,n)};ee.useRef=function(t){return Nt.current.useRef(t)};ee.useState=function(t){return Nt.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return Nt.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return Nt.current.useTransition()};ee.version="18.3.1";g_.exports=ee;var O=g_.exports;const b_=p_(O),R1=m1({__proto__:null,default:b_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j1=O,O1=Symbol.for("react.element"),D1=Symbol.for("react.fragment"),L1=Object.prototype.hasOwnProperty,M1=j1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,V1={key:!0,ref:!0,__self:!0,__source:!0};function N_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)L1.call(e,r)&&!V1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:O1,type:t,key:i,ref:o,props:s,_owner:M1.current}}oc.Fragment=D1;oc.jsx=N_;oc.jsxs=N_;m_.exports=oc;var u=m_.exports,wh={},S_={exports:{}},Kt={},A_={exports:{}},P_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var Z=z.length;z.push(Q);e:for(;0<Z;){var we=Z-1>>>1,ue=z[we];if(0<s(ue,Q))z[we]=Q,z[Z]=ue,Z=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],Z=z.pop();if(Z!==Q){z[0]=Z;e:for(var we=0,ue=z.length,Pe=ue>>>1;we<Pe;){var Dn=2*(we+1)-1,Ln=z[Dn],Mn=Dn+1,Vn=z[Mn];if(0>s(Ln,Z))Mn<ue&&0>s(Vn,Ln)?(z[we]=Vn,z[Mn]=Z,we=Mn):(z[we]=Ln,z[Dn]=Z,we=Dn);else if(Mn<ue&&0>s(Vn,Z))z[we]=Vn,z[Mn]=Z,we=Mn;else break e}}return Q}function s(z,Q){var Z=z.sortIndex-Q.sortIndex;return Z!==0?Z:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,g=null,m=3,x=!1,b=!1,N=!1,P=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(z){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=z)r(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function k(z){if(N=!1,y(z),!b)if(n(c)!==null)b=!0,to(L);else{var Q=n(d);Q!==null&&On(k,Q.startTime-z)}}function L(z,Q){b=!1,N&&(N=!1,E(_),_=-1),x=!0;var Z=m;try{for(y(Q),g=n(c);g!==null&&(!(g.expirationTime>Q)||z&&!C());){var we=g.callback;if(typeof we=="function"){g.callback=null,m=g.priorityLevel;var ue=we(g.expirationTime<=Q);Q=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(c)&&r(c),y(Q)}else r(c);g=n(c)}if(g!==null)var Pe=!0;else{var Dn=n(d);Dn!==null&&On(k,Dn.startTime-Q),Pe=!1}return Pe}finally{g=null,m=Z,x=!1}}var V=!1,I=null,_=-1,S=5,T=-1;function C(){return!(t.unstable_now()-T<S)}function R(){if(I!==null){var z=t.unstable_now();T=z;var Q=!0;try{Q=I(!0,z)}finally{Q?A():(V=!1,I=null)}}else V=!1}var A;if(typeof w=="function")A=function(){w(R)};else if(typeof MessageChannel<"u"){var Ke=new MessageChannel,jn=Ke.port2;Ke.port1.onmessage=R,A=function(){jn.postMessage(null)}}else A=function(){P(R,0)};function to(z){I=z,V||(V=!0,A())}function On(z,Q){_=P(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||x||(b=!0,to(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var Z=m;m=Q;try{return z()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=m;m=z;try{return Q()}finally{m=Z}},t.unstable_scheduleCallback=function(z,Q,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,z={id:f++,callback:Q,priorityLevel:z,startTime:Z,expirationTime:ue,sortIndex:-1},Z>we?(z.sortIndex=Z,e(d,z),n(c)===null&&z===n(d)&&(N?(E(_),_=-1):N=!0,On(k,Z-we))):(z.sortIndex=ue,e(c,z),b||x||(b=!0,to(L))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var Q=m;return function(){var Z=m;m=Q;try{return z.apply(this,arguments)}finally{m=Z}}}})(P_);A_.exports=P_;var U1=A_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var F1=O,Wt=U1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var k_=new Set,ta={};function js(t,e){bi(t,e),bi(t+"Capture",e)}function bi(t,e){for(ta[t]=e,t=0;t<e.length;t++)k_.add(e[t])}var tr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xh=Object.prototype.hasOwnProperty,$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yy={},vy={};function B1(t){return xh.call(vy,t)?!0:xh.call(yy,t)?!1:$1.test(t)?vy[t]=!0:(yy[t]=!0,!1)}function z1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function q1(t,e,n,r){if(e===null||typeof e>"u"||z1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function St(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var nt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){nt[t]=new St(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];nt[e]=new St(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){nt[t]=new St(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){nt[t]=new St(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){nt[t]=new St(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){nt[t]=new St(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){nt[t]=new St(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){nt[t]=new St(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){nt[t]=new St(t,5,!1,t.toLowerCase(),null,!1,!1)});var rp=/[\-:]([a-z])/g;function sp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rp,sp);nt[e]=new St(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rp,sp);nt[e]=new St(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rp,sp);nt[e]=new St(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!1,!1)});nt.xlinkHref=new St("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){nt[t]=new St(t,1,!1,t.toLowerCase(),null,!0,!0)});function ip(t,e,n,r){var s=nt.hasOwnProperty(e)?nt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(q1(e,n,s,r)&&(n=null),r||s===null?B1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ur=F1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,xl=Symbol.for("react.element"),ei=Symbol.for("react.portal"),ti=Symbol.for("react.fragment"),op=Symbol.for("react.strict_mode"),Eh=Symbol.for("react.profiler"),C_=Symbol.for("react.provider"),R_=Symbol.for("react.context"),ap=Symbol.for("react.forward_ref"),Th=Symbol.for("react.suspense"),Ih=Symbol.for("react.suspense_list"),lp=Symbol.for("react.memo"),_r=Symbol.for("react.lazy"),j_=Symbol.for("react.offscreen"),_y=Symbol.iterator;function go(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,Nd;function Po(t){if(Nd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nd=e&&e[1]||""}return`
`+Nd+t}var Sd=!1;function Ad(t,e){if(!t||Sd)return"";Sd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Sd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Po(t):""}function H1(t){switch(t.tag){case 5:return Po(t.type);case 16:return Po("Lazy");case 13:return Po("Suspense");case 19:return Po("SuspenseList");case 0:case 2:case 15:return t=Ad(t.type,!1),t;case 11:return t=Ad(t.type.render,!1),t;case 1:return t=Ad(t.type,!0),t;default:return""}}function bh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ti:return"Fragment";case ei:return"Portal";case Eh:return"Profiler";case op:return"StrictMode";case Th:return"Suspense";case Ih:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case R_:return(t.displayName||"Context")+".Consumer";case C_:return(t._context.displayName||"Context")+".Provider";case ap:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case lp:return e=t.displayName||null,e!==null?e:bh(t.type)||"Memo";case _r:e=t._payload,t=t._init;try{return bh(t(e))}catch{}}return null}function W1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bh(e);case 8:return e===op?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function O_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function K1(t){var e=O_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function El(t){t._valueTracker||(t._valueTracker=K1(t))}function D_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=O_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function fu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nh(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=zr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function L_(t,e){e=e.checked,e!=null&&ip(t,"checked",e,!1)}function Sh(t,e){L_(t,e);var n=zr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Ah(t,e.type,n):e.hasOwnProperty("defaultValue")&&Ah(t,e.type,zr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function xy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Ah(t,e,n){(e!=="number"||fu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ko=Array.isArray;function pi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+zr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(ko(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zr(n)}}function M_(t,e){var n=zr(e.value),r=zr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ty(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function V_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function kh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?V_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Tl,U_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Tl=Tl||document.createElement("div"),Tl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Tl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function na(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Fo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G1=["Webkit","ms","Moz","O"];Object.keys(Fo).forEach(function(t){G1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Fo[e]=Fo[t]})});function F_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Fo.hasOwnProperty(t)&&Fo[t]?(""+e).trim():e+"px"}function $_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=F_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var Q1=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ch(t,e){if(e){if(Q1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Rh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var jh=null;function up(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Oh=null,mi=null,gi=null;function Iy(t){if(t=Va(t)){if(typeof Oh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=dc(e),Oh(t.stateNode,t.type,e))}}function B_(t){mi?gi?gi.push(t):gi=[t]:mi=t}function z_(){if(mi){var t=mi,e=gi;if(gi=mi=null,Iy(t),e)for(t=0;t<e.length;t++)Iy(e[t])}}function q_(t,e){return t(e)}function H_(){}var Pd=!1;function W_(t,e,n){if(Pd)return t(e,n);Pd=!0;try{return q_(t,e,n)}finally{Pd=!1,(mi!==null||gi!==null)&&(H_(),z_())}}function ra(t,e){var n=t.stateNode;if(n===null)return null;var r=dc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Dh=!1;if(tr)try{var yo={};Object.defineProperty(yo,"passive",{get:function(){Dh=!0}}),window.addEventListener("test",yo,yo),window.removeEventListener("test",yo,yo)}catch{Dh=!1}function Y1(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var $o=!1,pu=null,mu=!1,Lh=null,X1={onError:function(t){$o=!0,pu=t}};function J1(t,e,n,r,s,i,o,l,c){$o=!1,pu=null,Y1.apply(X1,arguments)}function Z1(t,e,n,r,s,i,o,l,c){if(J1.apply(this,arguments),$o){if($o){var d=pu;$o=!1,pu=null}else throw Error(F(198));mu||(mu=!0,Lh=d)}}function Os(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function K_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function by(t){if(Os(t)!==t)throw Error(F(188))}function eN(t){var e=t.alternate;if(!e){if(e=Os(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return by(s),t;if(i===r)return by(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function G_(t){return t=eN(t),t!==null?Q_(t):null}function Q_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Q_(t);if(e!==null)return e;t=t.sibling}return null}var Y_=Wt.unstable_scheduleCallback,Ny=Wt.unstable_cancelCallback,tN=Wt.unstable_shouldYield,nN=Wt.unstable_requestPaint,je=Wt.unstable_now,rN=Wt.unstable_getCurrentPriorityLevel,cp=Wt.unstable_ImmediatePriority,X_=Wt.unstable_UserBlockingPriority,gu=Wt.unstable_NormalPriority,sN=Wt.unstable_LowPriority,J_=Wt.unstable_IdlePriority,ac=null,In=null;function iN(t){if(In&&typeof In.onCommitFiberRoot=="function")try{In.onCommitFiberRoot(ac,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:lN,oN=Math.log,aN=Math.LN2;function lN(t){return t>>>=0,t===0?32:31-(oN(t)/aN|0)|0}var Il=64,bl=4194304;function Co(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function yu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=Co(l):(i&=o,i!==0&&(r=Co(i)))}else o=n&~s,o!==0?r=Co(o):i!==0&&(r=Co(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),s=1<<n,r|=t[n],e&=~s;return r}function uN(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function cN(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-dn(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=uN(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Mh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Z_(){var t=Il;return Il<<=1,!(Il&4194240)&&(Il=64),t}function kd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function La(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function dN(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-dn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function dp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function ew(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var tw,hp,nw,rw,sw,Vh=!1,Nl=[],Rr=null,jr=null,Or=null,sa=new Map,ia=new Map,xr=[],hN="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sy(t,e){switch(t){case"focusin":case"focusout":Rr=null;break;case"dragenter":case"dragleave":jr=null;break;case"mouseover":case"mouseout":Or=null;break;case"pointerover":case"pointerout":sa.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ia.delete(e.pointerId)}}function vo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Va(e),e!==null&&hp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function fN(t,e,n,r,s){switch(e){case"focusin":return Rr=vo(Rr,t,e,n,r,s),!0;case"dragenter":return jr=vo(jr,t,e,n,r,s),!0;case"mouseover":return Or=vo(Or,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return sa.set(i,vo(sa.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ia.set(i,vo(ia.get(i)||null,t,e,n,r,s)),!0}return!1}function iw(t){var e=us(t.target);if(e!==null){var n=Os(e);if(n!==null){if(e=n.tag,e===13){if(e=K_(n),e!==null){t.blockedOn=e,sw(t.priority,function(){nw(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Wl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Uh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);jh=r,n.target.dispatchEvent(r),jh=null}else return e=Va(n),e!==null&&hp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){Wl(t)&&n.delete(e)}function pN(){Vh=!1,Rr!==null&&Wl(Rr)&&(Rr=null),jr!==null&&Wl(jr)&&(jr=null),Or!==null&&Wl(Or)&&(Or=null),sa.forEach(Ay),ia.forEach(Ay)}function _o(t,e){t.blockedOn===e&&(t.blockedOn=null,Vh||(Vh=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,pN)))}function oa(t){function e(s){return _o(s,t)}if(0<Nl.length){_o(Nl[0],t);for(var n=1;n<Nl.length;n++){var r=Nl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Rr!==null&&_o(Rr,t),jr!==null&&_o(jr,t),Or!==null&&_o(Or,t),sa.forEach(e),ia.forEach(e),n=0;n<xr.length;n++)r=xr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<xr.length&&(n=xr[0],n.blockedOn===null);)iw(n),n.blockedOn===null&&xr.shift()}var yi=ur.ReactCurrentBatchConfig,vu=!0;function mN(t,e,n,r){var s=ae,i=yi.transition;yi.transition=null;try{ae=1,fp(t,e,n,r)}finally{ae=s,yi.transition=i}}function gN(t,e,n,r){var s=ae,i=yi.transition;yi.transition=null;try{ae=4,fp(t,e,n,r)}finally{ae=s,yi.transition=i}}function fp(t,e,n,r){if(vu){var s=Uh(t,e,n,r);if(s===null)Fd(t,e,r,_u,n),Sy(t,r);else if(fN(s,t,e,n,r))r.stopPropagation();else if(Sy(t,r),e&4&&-1<hN.indexOf(t)){for(;s!==null;){var i=Va(s);if(i!==null&&tw(i),i=Uh(t,e,n,r),i===null&&Fd(t,e,r,_u,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Fd(t,e,r,null,n)}}var _u=null;function Uh(t,e,n,r){if(_u=null,t=up(r),t=us(t),t!==null)if(e=Os(t),e===null)t=null;else if(n=e.tag,n===13){if(t=K_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _u=t,null}function ow(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(rN()){case cp:return 1;case X_:return 4;case gu:case sN:return 16;case J_:return 536870912;default:return 16}default:return 16}}var Sr=null,pp=null,Kl=null;function aw(){if(Kl)return Kl;var t,e=pp,n=e.length,r,s="value"in Sr?Sr.value:Sr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Kl=s.slice(t,1<r?1-r:void 0)}function Gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Sl(){return!0}function Py(){return!1}function Gt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Sl:Py,this.isPropagationStopped=Py,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),e}var Hi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mp=Gt(Hi),Ma=Te({},Hi,{view:0,detail:0}),yN=Gt(Ma),Cd,Rd,wo,lc=Te({},Ma,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==wo&&(wo&&t.type==="mousemove"?(Cd=t.screenX-wo.screenX,Rd=t.screenY-wo.screenY):Rd=Cd=0,wo=t),Cd)},movementY:function(t){return"movementY"in t?t.movementY:Rd}}),ky=Gt(lc),vN=Te({},lc,{dataTransfer:0}),_N=Gt(vN),wN=Te({},Ma,{relatedTarget:0}),jd=Gt(wN),xN=Te({},Hi,{animationName:0,elapsedTime:0,pseudoElement:0}),EN=Gt(xN),TN=Te({},Hi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),IN=Gt(TN),bN=Te({},Hi,{data:0}),Cy=Gt(bN),NN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},SN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},AN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=AN[t])?!!e[t]:!1}function gp(){return PN}var kN=Te({},Ma,{key:function(t){if(t.key){var e=NN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?SN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gp,charCode:function(t){return t.type==="keypress"?Gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),CN=Gt(kN),RN=Te({},lc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=Gt(RN),jN=Te({},Ma,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gp}),ON=Gt(jN),DN=Te({},Hi,{propertyName:0,elapsedTime:0,pseudoElement:0}),LN=Gt(DN),MN=Te({},lc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),VN=Gt(MN),UN=[9,13,27,32],yp=tr&&"CompositionEvent"in window,Bo=null;tr&&"documentMode"in document&&(Bo=document.documentMode);var FN=tr&&"TextEvent"in window&&!Bo,lw=tr&&(!yp||Bo&&8<Bo&&11>=Bo),jy=" ",Oy=!1;function uw(t,e){switch(t){case"keyup":return UN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function cw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ni=!1;function $N(t,e){switch(t){case"compositionend":return cw(e);case"keypress":return e.which!==32?null:(Oy=!0,jy);case"textInput":return t=e.data,t===jy&&Oy?null:t;default:return null}}function BN(t,e){if(ni)return t==="compositionend"||!yp&&uw(t,e)?(t=aw(),Kl=pp=Sr=null,ni=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lw&&e.locale!=="ko"?null:e.data;default:return null}}var zN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zN[t.type]:e==="textarea"}function dw(t,e,n,r){B_(r),e=wu(e,"onChange"),0<e.length&&(n=new mp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var zo=null,aa=null;function qN(t){Ew(t,0)}function uc(t){var e=ii(t);if(D_(e))return t}function HN(t,e){if(t==="change")return e}var hw=!1;if(tr){var Od;if(tr){var Dd="oninput"in document;if(!Dd){var Ly=document.createElement("div");Ly.setAttribute("oninput","return;"),Dd=typeof Ly.oninput=="function"}Od=Dd}else Od=!1;hw=Od&&(!document.documentMode||9<document.documentMode)}function My(){zo&&(zo.detachEvent("onpropertychange",fw),aa=zo=null)}function fw(t){if(t.propertyName==="value"&&uc(aa)){var e=[];dw(e,aa,t,up(t)),W_(qN,e)}}function WN(t,e,n){t==="focusin"?(My(),zo=e,aa=n,zo.attachEvent("onpropertychange",fw)):t==="focusout"&&My()}function KN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return uc(aa)}function GN(t,e){if(t==="click")return uc(e)}function QN(t,e){if(t==="input"||t==="change")return uc(e)}function YN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mn=typeof Object.is=="function"?Object.is:YN;function la(t,e){if(mn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!xh.call(e,s)||!mn(t[s],e[s]))return!1}return!0}function Vy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Uy(t,e){var n=Vy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Vy(n)}}function pw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?pw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function mw(){for(var t=window,e=fu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=fu(t.document)}return e}function vp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function XN(t){var e=mw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&pw(n.ownerDocument.documentElement,n)){if(r!==null&&vp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Uy(n,i);var o=Uy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var JN=tr&&"documentMode"in document&&11>=document.documentMode,ri=null,Fh=null,qo=null,$h=!1;function Fy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;$h||ri==null||ri!==fu(r)||(r=ri,"selectionStart"in r&&vp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qo&&la(qo,r)||(qo=r,r=wu(Fh,"onSelect"),0<r.length&&(e=new mp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ri)))}function Al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var si={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},Ld={},gw={};tr&&(gw=document.createElement("div").style,"AnimationEvent"in window||(delete si.animationend.animation,delete si.animationiteration.animation,delete si.animationstart.animation),"TransitionEvent"in window||delete si.transitionend.transition);function cc(t){if(Ld[t])return Ld[t];if(!si[t])return t;var e=si[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in gw)return Ld[t]=e[n];return t}var yw=cc("animationend"),vw=cc("animationiteration"),_w=cc("animationstart"),ww=cc("transitionend"),xw=new Map,$y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Qr(t,e){xw.set(t,e),js(e,[t])}for(var Md=0;Md<$y.length;Md++){var Vd=$y[Md],ZN=Vd.toLowerCase(),eS=Vd[0].toUpperCase()+Vd.slice(1);Qr(ZN,"on"+eS)}Qr(yw,"onAnimationEnd");Qr(vw,"onAnimationIteration");Qr(_w,"onAnimationStart");Qr("dblclick","onDoubleClick");Qr("focusin","onFocus");Qr("focusout","onBlur");Qr(ww,"onTransitionEnd");bi("onMouseEnter",["mouseout","mouseover"]);bi("onMouseLeave",["mouseout","mouseover"]);bi("onPointerEnter",["pointerout","pointerover"]);bi("onPointerLeave",["pointerout","pointerover"]);js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));js("onBeforeInput",["compositionend","keypress","textInput","paste"]);js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),tS=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ro));function By(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Z1(r,e,void 0,t),t.currentTarget=null}function Ew(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;By(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;By(s,l,d),i=c}}}if(mu)throw t=Lh,mu=!1,Lh=null,t}function ye(t,e){var n=e[Wh];n===void 0&&(n=e[Wh]=new Set);var r=t+"__bubble";n.has(r)||(Tw(e,t,2,!1),n.add(r))}function Ud(t,e,n){var r=0;e&&(r|=4),Tw(n,t,r,e)}var Pl="_reactListening"+Math.random().toString(36).slice(2);function ua(t){if(!t[Pl]){t[Pl]=!0,k_.forEach(function(n){n!=="selectionchange"&&(tS.has(n)||Ud(n,!1,t),Ud(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Pl]||(e[Pl]=!0,Ud("selectionchange",!1,e))}}function Tw(t,e,n,r){switch(ow(e)){case 1:var s=mN;break;case 4:s=gN;break;default:s=fp}n=s.bind(null,e,n,t),s=void 0,!Dh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Fd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=us(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}W_(function(){var d=i,f=up(n),g=[];e:{var m=xw.get(t);if(m!==void 0){var x=mp,b=t;switch(t){case"keypress":if(Gl(n)===0)break e;case"keydown":case"keyup":x=CN;break;case"focusin":b="focus",x=jd;break;case"focusout":b="blur",x=jd;break;case"beforeblur":case"afterblur":x=jd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ky;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=_N;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=ON;break;case yw:case vw:case _w:x=EN;break;case ww:x=LN;break;case"scroll":x=yN;break;case"wheel":x=VN;break;case"copy":case"cut":case"paste":x=IN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=Ry}var N=(e&4)!==0,P=!N&&t==="scroll",E=N?m!==null?m+"Capture":null:m;N=[];for(var w=d,y;w!==null;){y=w;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,E!==null&&(k=ra(w,E),k!=null&&N.push(ca(w,k,y)))),P)break;w=w.return}0<N.length&&(m=new x(m,b,null,n,f),g.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",m&&n!==jh&&(b=n.relatedTarget||n.fromElement)&&(us(b)||b[nr]))break e;if((x||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,x?(b=n.relatedTarget||n.toElement,x=d,b=b?us(b):null,b!==null&&(P=Os(b),b!==P||b.tag!==5&&b.tag!==6)&&(b=null)):(x=null,b=d),x!==b)){if(N=ky,k="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=Ry,k="onPointerLeave",E="onPointerEnter",w="pointer"),P=x==null?m:ii(x),y=b==null?m:ii(b),m=new N(k,w+"leave",x,n,f),m.target=P,m.relatedTarget=y,k=null,us(f)===d&&(N=new N(E,w+"enter",b,n,f),N.target=y,N.relatedTarget=P,k=N),P=k,x&&b)t:{for(N=x,E=b,w=0,y=N;y;y=Ws(y))w++;for(y=0,k=E;k;k=Ws(k))y++;for(;0<w-y;)N=Ws(N),w--;for(;0<y-w;)E=Ws(E),y--;for(;w--;){if(N===E||E!==null&&N===E.alternate)break t;N=Ws(N),E=Ws(E)}N=null}else N=null;x!==null&&zy(g,m,x,N,!1),b!==null&&P!==null&&zy(g,P,b,N,!0)}}e:{if(m=d?ii(d):window,x=m.nodeName&&m.nodeName.toLowerCase(),x==="select"||x==="input"&&m.type==="file")var L=HN;else if(Dy(m))if(hw)L=QN;else{L=KN;var V=WN}else(x=m.nodeName)&&x.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=GN);if(L&&(L=L(t,d))){dw(g,L,n,f);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&Ah(m,"number",m.value)}switch(V=d?ii(d):window,t){case"focusin":(Dy(V)||V.contentEditable==="true")&&(ri=V,Fh=d,qo=null);break;case"focusout":qo=Fh=ri=null;break;case"mousedown":$h=!0;break;case"contextmenu":case"mouseup":case"dragend":$h=!1,Fy(g,n,f);break;case"selectionchange":if(JN)break;case"keydown":case"keyup":Fy(g,n,f)}var I;if(yp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else ni?uw(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(lw&&n.locale!=="ko"&&(ni||_!=="onCompositionStart"?_==="onCompositionEnd"&&ni&&(I=aw()):(Sr=f,pp="value"in Sr?Sr.value:Sr.textContent,ni=!0)),V=wu(d,_),0<V.length&&(_=new Cy(_,t,null,n,f),g.push({event:_,listeners:V}),I?_.data=I:(I=cw(n),I!==null&&(_.data=I)))),(I=FN?$N(t,n):BN(t,n))&&(d=wu(d,"onBeforeInput"),0<d.length&&(f=new Cy("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=I))}Ew(g,e)})}function ca(t,e,n){return{instance:t,listener:e,currentTarget:n}}function wu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=ra(t,n),i!=null&&r.unshift(ca(t,i,s)),i=ra(t,e),i!=null&&r.push(ca(t,i,s))),t=t.return}return r}function Ws(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function zy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=ra(n,i),c!=null&&o.unshift(ca(n,c,l))):s||(c=ra(n,i),c!=null&&o.push(ca(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var nS=/\r\n?/g,rS=/\u0000|\uFFFD/g;function qy(t){return(typeof t=="string"?t:""+t).replace(nS,`
`).replace(rS,"")}function kl(t,e,n){if(e=qy(e),qy(t)!==e&&n)throw Error(F(425))}function xu(){}var Bh=null,zh=null;function qh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Hh=typeof setTimeout=="function"?setTimeout:void 0,sS=typeof clearTimeout=="function"?clearTimeout:void 0,Hy=typeof Promise=="function"?Promise:void 0,iS=typeof queueMicrotask=="function"?queueMicrotask:typeof Hy<"u"?function(t){return Hy.resolve(null).then(t).catch(oS)}:Hh;function oS(t){setTimeout(function(){throw t})}function $d(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),oa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);oa(e)}function Dr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Wy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Wi=Math.random().toString(36).slice(2),En="__reactFiber$"+Wi,da="__reactProps$"+Wi,nr="__reactContainer$"+Wi,Wh="__reactEvents$"+Wi,aS="__reactListeners$"+Wi,lS="__reactHandles$"+Wi;function us(t){var e=t[En];if(e)return e;for(var n=t.parentNode;n;){if(e=n[nr]||n[En]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Wy(t);t!==null;){if(n=t[En])return n;t=Wy(t)}return e}t=n,n=t.parentNode}return null}function Va(t){return t=t[En]||t[nr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ii(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function dc(t){return t[da]||null}var Kh=[],oi=-1;function Yr(t){return{current:t}}function ve(t){0>oi||(t.current=Kh[oi],Kh[oi]=null,oi--)}function me(t,e){oi++,Kh[oi]=t.current,t.current=e}var qr={},mt=Yr(qr),Ot=Yr(!1),_s=qr;function Ni(t,e){var n=t.type.contextTypes;if(!n)return qr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Dt(t){return t=t.childContextTypes,t!=null}function Eu(){ve(Ot),ve(mt)}function Ky(t,e,n){if(mt.current!==qr)throw Error(F(168));me(mt,e),me(Ot,n)}function Iw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,W1(t)||"Unknown",s));return Te({},n,r)}function Tu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qr,_s=mt.current,me(mt,t),me(Ot,Ot.current),!0}function Gy(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=Iw(t,e,_s),r.__reactInternalMemoizedMergedChildContext=t,ve(Ot),ve(mt),me(mt,t)):ve(Ot),me(Ot,n)}var zn=null,hc=!1,Bd=!1;function bw(t){zn===null?zn=[t]:zn.push(t)}function uS(t){hc=!0,bw(t)}function Xr(){if(!Bd&&zn!==null){Bd=!0;var t=0,e=ae;try{var n=zn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,hc=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),Y_(cp,Xr),s}finally{ae=e,Bd=!1}}return null}var ai=[],li=0,Iu=null,bu=0,Qt=[],Yt=0,ws=null,Hn=1,Wn="";function is(t,e){ai[li++]=bu,ai[li++]=Iu,Iu=t,bu=e}function Nw(t,e,n){Qt[Yt++]=Hn,Qt[Yt++]=Wn,Qt[Yt++]=ws,ws=t;var r=Hn;t=Wn;var s=32-dn(r)-1;r&=~(1<<s),n+=1;var i=32-dn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Hn=1<<32-dn(e)+s|n<<s|r,Wn=i+t}else Hn=1<<i|n<<s|r,Wn=t}function _p(t){t.return!==null&&(is(t,1),Nw(t,1,0))}function wp(t){for(;t===Iu;)Iu=ai[--li],ai[li]=null,bu=ai[--li],ai[li]=null;for(;t===ws;)ws=Qt[--Yt],Qt[Yt]=null,Wn=Qt[--Yt],Qt[Yt]=null,Hn=Qt[--Yt],Qt[Yt]=null}var Ht=null,$t=null,_e=!1,un=null;function Sw(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Qy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,$t=Dr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,$t=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ws!==null?{id:Hn,overflow:Wn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,$t=null,!0):!1;default:return!1}}function Gh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Qh(t){if(_e){var e=$t;if(e){var n=e;if(!Qy(t,e)){if(Gh(t))throw Error(F(418));e=Dr(n.nextSibling);var r=Ht;e&&Qy(t,e)?Sw(r,n):(t.flags=t.flags&-4097|2,_e=!1,Ht=t)}}else{if(Gh(t))throw Error(F(418));t.flags=t.flags&-4097|2,_e=!1,Ht=t}}}function Yy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function Cl(t){if(t!==Ht)return!1;if(!_e)return Yy(t),_e=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!qh(t.type,t.memoizedProps)),e&&(e=$t)){if(Gh(t))throw Aw(),Error(F(418));for(;e;)Sw(t,e),e=Dr(e.nextSibling)}if(Yy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$t=Dr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$t=null}}else $t=Ht?Dr(t.stateNode.nextSibling):null;return!0}function Aw(){for(var t=$t;t;)t=Dr(t.nextSibling)}function Si(){$t=Ht=null,_e=!1}function xp(t){un===null?un=[t]:un.push(t)}var cS=ur.ReactCurrentBatchConfig;function xo(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Rl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Xy(t){var e=t._init;return e(t._payload)}function Pw(t){function e(E,w){if(t){var y=E.deletions;y===null?(E.deletions=[w],E.flags|=16):y.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function s(E,w){return E=Ur(E,w),E.index=0,E.sibling=null,E}function i(E,w,y){return E.index=y,t?(y=E.alternate,y!==null?(y=y.index,y<w?(E.flags|=2,w):y):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,y,k){return w===null||w.tag!==6?(w=Qd(y,E.mode,k),w.return=E,w):(w=s(w,y),w.return=E,w)}function c(E,w,y,k){var L=y.type;return L===ti?f(E,w,y.props.children,k,y.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===_r&&Xy(L)===w.type)?(k=s(w,y.props),k.ref=xo(E,w,y),k.return=E,k):(k=tu(y.type,y.key,y.props,null,E.mode,k),k.ref=xo(E,w,y),k.return=E,k)}function d(E,w,y,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=Yd(y,E.mode,k),w.return=E,w):(w=s(w,y.children||[]),w.return=E,w)}function f(E,w,y,k,L){return w===null||w.tag!==7?(w=gs(y,E.mode,k,L),w.return=E,w):(w=s(w,y),w.return=E,w)}function g(E,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Qd(""+w,E.mode,y),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case xl:return y=tu(w.type,w.key,w.props,null,E.mode,y),y.ref=xo(E,null,w),y.return=E,y;case ei:return w=Yd(w,E.mode,y),w.return=E,w;case _r:var k=w._init;return g(E,k(w._payload),y)}if(ko(w)||go(w))return w=gs(w,E.mode,y,null),w.return=E,w;Rl(E,w)}return null}function m(E,w,y,k){var L=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return L!==null?null:l(E,w,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case xl:return y.key===L?c(E,w,y,k):null;case ei:return y.key===L?d(E,w,y,k):null;case _r:return L=y._init,m(E,w,L(y._payload),k)}if(ko(y)||go(y))return L!==null?null:f(E,w,y,k,null);Rl(E,y)}return null}function x(E,w,y,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return E=E.get(y)||null,l(w,E,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case xl:return E=E.get(k.key===null?y:k.key)||null,c(w,E,k,L);case ei:return E=E.get(k.key===null?y:k.key)||null,d(w,E,k,L);case _r:var V=k._init;return x(E,w,y,V(k._payload),L)}if(ko(k)||go(k))return E=E.get(y)||null,f(w,E,k,L,null);Rl(w,k)}return null}function b(E,w,y,k){for(var L=null,V=null,I=w,_=w=0,S=null;I!==null&&_<y.length;_++){I.index>_?(S=I,I=null):S=I.sibling;var T=m(E,I,y[_],k);if(T===null){I===null&&(I=S);break}t&&I&&T.alternate===null&&e(E,I),w=i(T,w,_),V===null?L=T:V.sibling=T,V=T,I=S}if(_===y.length)return n(E,I),_e&&is(E,_),L;if(I===null){for(;_<y.length;_++)I=g(E,y[_],k),I!==null&&(w=i(I,w,_),V===null?L=I:V.sibling=I,V=I);return _e&&is(E,_),L}for(I=r(E,I);_<y.length;_++)S=x(I,E,_,y[_],k),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?_:S.key),w=i(S,w,_),V===null?L=S:V.sibling=S,V=S);return t&&I.forEach(function(C){return e(E,C)}),_e&&is(E,_),L}function N(E,w,y,k){var L=go(y);if(typeof L!="function")throw Error(F(150));if(y=L.call(y),y==null)throw Error(F(151));for(var V=L=null,I=w,_=w=0,S=null,T=y.next();I!==null&&!T.done;_++,T=y.next()){I.index>_?(S=I,I=null):S=I.sibling;var C=m(E,I,T.value,k);if(C===null){I===null&&(I=S);break}t&&I&&C.alternate===null&&e(E,I),w=i(C,w,_),V===null?L=C:V.sibling=C,V=C,I=S}if(T.done)return n(E,I),_e&&is(E,_),L;if(I===null){for(;!T.done;_++,T=y.next())T=g(E,T.value,k),T!==null&&(w=i(T,w,_),V===null?L=T:V.sibling=T,V=T);return _e&&is(E,_),L}for(I=r(E,I);!T.done;_++,T=y.next())T=x(I,E,_,T.value,k),T!==null&&(t&&T.alternate!==null&&I.delete(T.key===null?_:T.key),w=i(T,w,_),V===null?L=T:V.sibling=T,V=T);return t&&I.forEach(function(R){return e(E,R)}),_e&&is(E,_),L}function P(E,w,y,k){if(typeof y=="object"&&y!==null&&y.type===ti&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case xl:e:{for(var L=y.key,V=w;V!==null;){if(V.key===L){if(L=y.type,L===ti){if(V.tag===7){n(E,V.sibling),w=s(V,y.props.children),w.return=E,E=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===_r&&Xy(L)===V.type){n(E,V.sibling),w=s(V,y.props),w.ref=xo(E,V,y),w.return=E,E=w;break e}n(E,V);break}else e(E,V);V=V.sibling}y.type===ti?(w=gs(y.props.children,E.mode,k,y.key),w.return=E,E=w):(k=tu(y.type,y.key,y.props,null,E.mode,k),k.ref=xo(E,w,y),k.return=E,E=k)}return o(E);case ei:e:{for(V=y.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(E,w.sibling),w=s(w,y.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=Yd(y,E.mode,k),w.return=E,E=w}return o(E);case _r:return V=y._init,P(E,w,V(y._payload),k)}if(ko(y))return b(E,w,y,k);if(go(y))return N(E,w,y,k);Rl(E,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(E,w.sibling),w=s(w,y),w.return=E,E=w):(n(E,w),w=Qd(y,E.mode,k),w.return=E,E=w),o(E)):n(E,w)}return P}var Ai=Pw(!0),kw=Pw(!1),Nu=Yr(null),Su=null,ui=null,Ep=null;function Tp(){Ep=ui=Su=null}function Ip(t){var e=Nu.current;ve(Nu),t._currentValue=e}function Yh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function vi(t,e){Su=t,Ep=ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function Zt(t){var e=t._currentValue;if(Ep!==t)if(t={context:t,memoizedValue:e,next:null},ui===null){if(Su===null)throw Error(F(308));ui=t,Su.dependencies={lanes:0,firstContext:t}}else ui=ui.next=t;return e}var cs=null;function bp(t){cs===null?cs=[t]:cs.push(t)}function Cw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,bp(e)):(n.next=s.next,s.next=n),e.interleaved=n,rr(t,r)}function rr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var wr=!1;function Np(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Rw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Xn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,rr(t,n)}return s=r.interleaved,s===null?(e.next=e,bp(r)):(e.next=s.next,s.next=e),r.interleaved=e,rr(t,n)}function Ql(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dp(t,n)}}function Jy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Au(t,e,n,r){var s=t.updateQueue;wr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,l=i;do{var m=l.lane,x=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,N=l;switch(m=e,x=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){g=b.call(x,g,m);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,m=typeof b=="function"?b.call(x,g,m):b,m==null)break e;g=Te({},g,m);break e;case 2:wr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else x={eventTime:x,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=x,c=g):f=f.next=x,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Es|=o,t.lanes=o,t.memoizedState=g}}function Zy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Ua={},bn=Yr(Ua),ha=Yr(Ua),fa=Yr(Ua);function ds(t){if(t===Ua)throw Error(F(174));return t}function Sp(t,e){switch(me(fa,e),me(ha,t),me(bn,Ua),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:kh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=kh(e,t)}ve(bn),me(bn,e)}function Pi(){ve(bn),ve(ha),ve(fa)}function jw(t){ds(fa.current);var e=ds(bn.current),n=kh(e,t.type);e!==n&&(me(ha,t),me(bn,n))}function Ap(t){ha.current===t&&(ve(bn),ve(ha))}var xe=Yr(0);function Pu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function Pp(){for(var t=0;t<zd.length;t++)zd[t]._workInProgressVersionPrimary=null;zd.length=0}var Yl=ur.ReactCurrentDispatcher,qd=ur.ReactCurrentBatchConfig,xs=0,Ee=null,$e=null,He=null,ku=!1,Ho=!1,pa=0,dS=0;function at(){throw Error(F(321))}function kp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mn(t[n],e[n]))return!1;return!0}function Cp(t,e,n,r,s,i){if(xs=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Yl.current=t===null||t.memoizedState===null?mS:gS,t=n(r,s),Ho){i=0;do{if(Ho=!1,pa=0,25<=i)throw Error(F(301));i+=1,He=$e=null,e.updateQueue=null,Yl.current=yS,t=n(r,s)}while(Ho)}if(Yl.current=Cu,e=$e!==null&&$e.next!==null,xs=0,He=$e=Ee=null,ku=!1,e)throw Error(F(300));return t}function Rp(){var t=pa!==0;return pa=0,t}function xn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return He===null?Ee.memoizedState=He=t:He=He.next=t,He}function en(){if($e===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=$e.next;var e=He===null?Ee.memoizedState:He.next;if(e!==null)He=e,$e=t;else{if(t===null)throw Error(F(310));$e=t,t={memoizedState:$e.memoizedState,baseState:$e.baseState,baseQueue:$e.baseQueue,queue:$e.queue,next:null},He===null?Ee.memoizedState=He=t:He=He.next=t}return He}function ma(t,e){return typeof e=="function"?e(t):e}function Hd(t){var e=en(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=$e,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((xs&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Ee.lanes|=f,Es|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,mn(r,e.memoizedState)||(Rt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,Es|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Wd(t){var e=en(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);mn(i,e.memoizedState)||(Rt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ow(){}function Dw(t,e){var n=Ee,r=en(),s=e(),i=!mn(r.memoizedState,s);if(i&&(r.memoizedState=s,Rt=!0),r=r.queue,jp(Vw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||He!==null&&He.memoizedState.tag&1){if(n.flags|=2048,ga(9,Mw.bind(null,n,r,s,e),void 0,null),We===null)throw Error(F(349));xs&30||Lw(n,e,s)}return s}function Lw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Mw(t,e,n,r){e.value=n,e.getSnapshot=r,Uw(e)&&Fw(t)}function Vw(t,e,n){return n(function(){Uw(e)&&Fw(t)})}function Uw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mn(t,n)}catch{return!0}}function Fw(t){var e=rr(t,1);e!==null&&hn(e,t,1,-1)}function ev(t){var e=xn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ma,lastRenderedState:t},e.queue=t,t=t.dispatch=pS.bind(null,Ee,t),[e.memoizedState,t]}function ga(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function $w(){return en().memoizedState}function Xl(t,e,n,r){var s=xn();Ee.flags|=t,s.memoizedState=ga(1|e,n,void 0,r===void 0?null:r)}function fc(t,e,n,r){var s=en();r=r===void 0?null:r;var i=void 0;if($e!==null){var o=$e.memoizedState;if(i=o.destroy,r!==null&&kp(r,o.deps)){s.memoizedState=ga(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=ga(1|e,n,i,r)}function tv(t,e){return Xl(8390656,8,t,e)}function jp(t,e){return fc(2048,8,t,e)}function Bw(t,e){return fc(4,2,t,e)}function zw(t,e){return fc(4,4,t,e)}function qw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Hw(t,e,n){return n=n!=null?n.concat([t]):null,fc(4,4,qw.bind(null,e,t),n)}function Op(){}function Ww(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Kw(t,e){var n=en();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gw(t,e,n){return xs&21?(mn(n,e)||(n=Z_(),Ee.lanes|=n,Es|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=n)}function hS(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=qd.transition;qd.transition={};try{t(!1),e()}finally{ae=n,qd.transition=r}}function Qw(){return en().memoizedState}function fS(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Yw(t))Xw(e,n);else if(n=Cw(t,e,n,r),n!==null){var s=It();hn(n,t,r,s),Jw(n,e,r)}}function pS(t,e,n){var r=Vr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Yw(t))Xw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,mn(l,o)){var c=e.interleaved;c===null?(s.next=s,bp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=Cw(t,e,s,r),n!==null&&(s=It(),hn(n,t,r,s),Jw(n,e,r))}}function Yw(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function Xw(t,e){Ho=ku=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Jw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,dp(t,n)}}var Cu={readContext:Zt,useCallback:at,useContext:at,useEffect:at,useImperativeHandle:at,useInsertionEffect:at,useLayoutEffect:at,useMemo:at,useReducer:at,useRef:at,useState:at,useDebugValue:at,useDeferredValue:at,useTransition:at,useMutableSource:at,useSyncExternalStore:at,useId:at,unstable_isNewReconciler:!1},mS={readContext:Zt,useCallback:function(t,e){return xn().memoizedState=[t,e===void 0?null:e],t},useContext:Zt,useEffect:tv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4194308,4,qw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Xl(4,2,t,e)},useMemo:function(t,e){var n=xn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=xn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=fS.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=xn();return t={current:t},e.memoizedState=t},useState:ev,useDebugValue:Op,useDeferredValue:function(t){return xn().memoizedState=t},useTransition:function(){var t=ev(!1),e=t[0];return t=hS.bind(null,t[1]),xn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=xn();if(_e){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),We===null)throw Error(F(349));xs&30||Lw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,tv(Vw.bind(null,r,i,t),[t]),r.flags|=2048,ga(9,Mw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=xn(),e=We.identifierPrefix;if(_e){var n=Wn,r=Hn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=pa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=dS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},gS={readContext:Zt,useCallback:Ww,useContext:Zt,useEffect:jp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:Kw,useReducer:Hd,useRef:$w,useState:function(){return Hd(ma)},useDebugValue:Op,useDeferredValue:function(t){var e=en();return Gw(e,$e.memoizedState,t)},useTransition:function(){var t=Hd(ma)[0],e=en().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Dw,useId:Qw,unstable_isNewReconciler:!1},yS={readContext:Zt,useCallback:Ww,useContext:Zt,useEffect:jp,useImperativeHandle:Hw,useInsertionEffect:Bw,useLayoutEffect:zw,useMemo:Kw,useReducer:Wd,useRef:$w,useState:function(){return Wd(ma)},useDebugValue:Op,useDeferredValue:function(t){var e=en();return $e===null?e.memoizedState=t:Gw(e,$e.memoizedState,t)},useTransition:function(){var t=Wd(ma)[0],e=en().memoizedState;return[t,e]},useMutableSource:Ow,useSyncExternalStore:Dw,useId:Qw,unstable_isNewReconciler:!1};function an(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Xh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var pc={isMounted:function(t){return(t=t._reactInternals)?Os(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=It(),s=Vr(t),i=Xn(r,s);i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(hn(e,t,s,r),Ql(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=It(),s=Vr(t),i=Xn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Lr(t,i,s),e!==null&&(hn(e,t,s,r),Ql(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=It(),r=Vr(t),s=Xn(n,r);s.tag=2,e!=null&&(s.callback=e),e=Lr(t,s,r),e!==null&&(hn(e,t,r,n),Ql(e,t,r))}};function nv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!la(n,r)||!la(s,i):!0}function Zw(t,e,n){var r=!1,s=qr,i=e.contextType;return typeof i=="object"&&i!==null?i=Zt(i):(s=Dt(e)?_s:mt.current,r=e.contextTypes,i=(r=r!=null)?Ni(t,s):qr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=pc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function rv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&pc.enqueueReplaceState(e,e.state,null)}function Jh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Np(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Zt(i):(i=Dt(e)?_s:mt.current,s.context=Ni(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(Xh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&pc.enqueueReplaceState(s,s.state,null),Au(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function ki(t,e){try{var n="",r=e;do n+=H1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Kd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var vS=typeof WeakMap=="function"?WeakMap:Map;function ex(t,e,n){n=Xn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ju||(ju=!0,cf=r),Zh(t,e)},n}function tx(t,e,n){n=Xn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Zh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Zh(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function sv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new vS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=RS.bind(null,t,e,n),e.then(t,t))}function iv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function ov(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Xn(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var _S=ur.ReactCurrentOwner,Rt=!1;function Tt(t,e,n,r){e.child=t===null?kw(e,null,n,r):Ai(e,t.child,n,r)}function av(t,e,n,r,s){n=n.render;var i=e.ref;return vi(e,s),r=Cp(t,e,n,r,i,s),n=Rp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(_e&&n&&_p(e),e.flags|=1,Tt(t,e,r,s),e.child)}function lv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Bp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,nx(t,e,i,r,s)):(t=tu(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:la,n(o,r)&&t.ref===e.ref)return sr(t,e,s)}return e.flags|=1,t=Ur(i,r),t.ref=e.ref,t.return=e,e.child=t}function nx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(la(i,r)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,sr(t,e,s)}return ef(t,e,n,r,s)}function rx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},me(di,Ft),Ft|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,me(di,Ft),Ft|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,me(di,Ft),Ft|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,me(di,Ft),Ft|=r;return Tt(t,e,s,n),e.child}function sx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ef(t,e,n,r,s){var i=Dt(n)?_s:mt.current;return i=Ni(e,i),vi(e,s),n=Cp(t,e,n,r,i,s),r=Rp(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,sr(t,e,s)):(_e&&r&&_p(e),e.flags|=1,Tt(t,e,n,s),e.child)}function uv(t,e,n,r,s){if(Dt(n)){var i=!0;Tu(e)}else i=!1;if(vi(e,s),e.stateNode===null)Jl(t,e),Zw(e,n,r),Jh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Zt(d):(d=Dt(n)?_s:mt.current,d=Ni(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&rv(e,o,r,d),wr=!1;var m=e.memoizedState;o.state=m,Au(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Ot.current||wr?(typeof f=="function"&&(Xh(e,n,f,r),c=e.memoizedState),(l=wr||nv(e,n,l,r,m,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Rw(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:an(e.type,l),o.props=d,g=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Zt(c):(c=Dt(n)?_s:mt.current,c=Ni(e,c));var x=n.getDerivedStateFromProps;(f=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==c)&&rv(e,o,r,c),wr=!1,m=e.memoizedState,o.state=m,Au(e,r,o,s);var b=e.memoizedState;l!==g||m!==b||Ot.current||wr?(typeof x=="function"&&(Xh(e,n,x,r),b=e.memoizedState),(d=wr||nv(e,n,d,r,m,b,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return tf(t,e,n,r,i,s)}function tf(t,e,n,r,s,i){sx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Gy(e,n,!1),sr(t,e,i);r=e.stateNode,_S.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ai(e,t.child,null,i),e.child=Ai(e,null,l,i)):Tt(t,e,l,i),e.memoizedState=r.state,s&&Gy(e,n,!0),e.child}function ix(t){var e=t.stateNode;e.pendingContext?Ky(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ky(t,e.context,!1),Sp(t,e.containerInfo)}function cv(t,e,n,r,s){return Si(),xp(s),e.flags|=256,Tt(t,e,n,r),e.child}var nf={dehydrated:null,treeContext:null,retryLane:0};function rf(t){return{baseLanes:t,cachePool:null,transitions:null}}function ox(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),me(xe,s&1),t===null)return Qh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=yc(o,r,0,null),t=gs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=rf(n),e.memoizedState=nf,t):Dp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return wS(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Ur(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Ur(l,i):(i=gs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?rf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=nf,r}return i=t.child,t=i.sibling,r=Ur(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Dp(t,e){return e=yc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function jl(t,e,n,r){return r!==null&&xp(r),Ai(e,t.child,null,n),t=Dp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function wS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Kd(Error(F(422))),jl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=yc({mode:"visible",children:r.children},s,0,null),i=gs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ai(e,t.child,null,o),e.child.memoizedState=rf(o),e.memoizedState=nf,i);if(!(e.mode&1))return jl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Kd(i,r,void 0),jl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Rt||l){if(r=We,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,rr(t,s),hn(r,t,s,-1))}return $p(),r=Kd(Error(F(421))),jl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=jS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,$t=Dr(s.nextSibling),Ht=e,_e=!0,un=null,t!==null&&(Qt[Yt++]=Hn,Qt[Yt++]=Wn,Qt[Yt++]=ws,Hn=t.id,Wn=t.overflow,ws=e),e=Dp(e,r.children),e.flags|=4096,e)}function dv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Yh(t.return,e,n)}function Gd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function ax(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Tt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&dv(t,n,e);else if(t.tag===19)dv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(me(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Pu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),Gd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Pu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}Gd(e,!0,n,null,i);break;case"together":Gd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Jl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function sr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Es|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Ur(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Ur(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function xS(t,e,n){switch(e.tag){case 3:ix(e),Si();break;case 5:jw(e);break;case 1:Dt(e.type)&&Tu(e);break;case 4:Sp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;me(Nu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(me(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?ox(t,e,n):(me(xe,xe.current&1),t=sr(t,e,n),t!==null?t.sibling:null);me(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return ax(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),me(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,rx(t,e,n)}return sr(t,e,n)}var lx,sf,ux,cx;lx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};sf=function(){};ux=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ds(bn.current);var i=null;switch(n){case"input":s=Nh(t,s),r=Nh(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=Ph(t,s),r=Ph(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=xu)}Ch(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(ta.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(ta.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ye("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};cx=function(t,e,n,r){n!==r&&(e.flags|=4)};function Eo(t,e){if(!_e)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function lt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function ES(t,e,n){var r=e.pendingProps;switch(wp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return lt(e),null;case 1:return Dt(e.type)&&Eu(),lt(e),null;case 3:return r=e.stateNode,Pi(),ve(Ot),ve(mt),Pp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Cl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,un!==null&&(ff(un),un=null))),sf(t,e),lt(e),null;case 5:Ap(e);var s=ds(fa.current);if(n=e.type,t!==null&&e.stateNode!=null)ux(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return lt(e),null}if(t=ds(bn.current),Cl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[En]=e,r[da]=i,t=(e.mode&1)!==0,n){case"dialog":ye("cancel",r),ye("close",r);break;case"iframe":case"object":case"embed":ye("load",r);break;case"video":case"audio":for(s=0;s<Ro.length;s++)ye(Ro[s],r);break;case"source":ye("error",r);break;case"img":case"image":case"link":ye("error",r),ye("load",r);break;case"details":ye("toggle",r);break;case"input":wy(r,i),ye("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ye("invalid",r);break;case"textarea":Ey(r,i),ye("invalid",r)}Ch(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&kl(r.textContent,l,t),s=["children",""+l]):ta.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ye("scroll",r)}switch(n){case"input":El(r),xy(r,i,!0);break;case"textarea":El(r),Ty(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=xu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=V_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[En]=e,t[da]=r,lx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Rh(n,r),n){case"dialog":ye("cancel",t),ye("close",t),s=r;break;case"iframe":case"object":case"embed":ye("load",t),s=r;break;case"video":case"audio":for(s=0;s<Ro.length;s++)ye(Ro[s],t);s=r;break;case"source":ye("error",t),s=r;break;case"img":case"image":case"link":ye("error",t),ye("load",t),s=r;break;case"details":ye("toggle",t),s=r;break;case"input":wy(t,r),s=Nh(t,r),ye("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),ye("invalid",t);break;case"textarea":Ey(t,r),s=Ph(t,r),ye("invalid",t);break;default:s=r}Ch(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&U_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&na(t,c):typeof c=="number"&&na(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ta.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ye("scroll",t):c!=null&&ip(t,i,c,o))}switch(n){case"input":El(t),xy(t,r,!1);break;case"textarea":El(t),Ty(t);break;case"option":r.value!=null&&t.setAttribute("value",""+zr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?pi(t,!!r.multiple,i,!1):r.defaultValue!=null&&pi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=xu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return lt(e),null;case 6:if(t&&e.stateNode!=null)cx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=ds(fa.current),ds(bn.current),Cl(e)){if(r=e.stateNode,n=e.memoizedProps,r[En]=e,(i=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:kl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&kl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[En]=e,e.stateNode=r}return lt(e),null;case 13:if(ve(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(_e&&$t!==null&&e.mode&1&&!(e.flags&128))Aw(),Si(),e.flags|=98560,i=!1;else if(i=Cl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[En]=e}else Si(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;lt(e),i=!1}else un!==null&&(ff(un),un=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Be===0&&(Be=3):$p())),e.updateQueue!==null&&(e.flags|=4),lt(e),null);case 4:return Pi(),sf(t,e),t===null&&ua(e.stateNode.containerInfo),lt(e),null;case 10:return Ip(e.type._context),lt(e),null;case 17:return Dt(e.type)&&Eu(),lt(e),null;case 19:if(ve(xe),i=e.memoizedState,i===null)return lt(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)Eo(i,!1);else{if(Be!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Pu(t),o!==null){for(e.flags|=128,Eo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return me(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&je()>Ci&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304)}else{if(!r)if(t=Pu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Eo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!_e)return lt(e),null}else 2*je()-i.renderingStartTime>Ci&&n!==1073741824&&(e.flags|=128,r=!0,Eo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=je(),e.sibling=null,n=xe.current,me(xe,r?n&1|2:n&1),e):(lt(e),null);case 22:case 23:return Fp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Ft&1073741824&&(lt(e),e.subtreeFlags&6&&(e.flags|=8192)):lt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function TS(t,e){switch(wp(e),e.tag){case 1:return Dt(e.type)&&Eu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Pi(),ve(Ot),ve(mt),Pp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ap(e),null;case 13:if(ve(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Si()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ve(xe),null;case 4:return Pi(),null;case 10:return Ip(e.type._context),null;case 22:case 23:return Fp(),null;case 24:return null;default:return null}}var Ol=!1,ht=!1,IS=typeof WeakSet=="function"?WeakSet:Set,q=null;function ci(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function of(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var hv=!1;function bS(t,e){if(Bh=vu,t=mw(),vp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,g=t,m=null;t:for(;;){for(var x;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(x=g.firstChild)!==null;)m=g,g=x;for(;;){if(g===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++f===r&&(c=o),(x=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(zh={focusedElem:t,selectionRange:n},vu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,P=b.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?N:an(e.type,N),P);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(k){Ne(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=hv,hv=!1,b}function Wo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&of(e,n,i)}s=s.next}while(s!==r)}}function mc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function af(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function dx(t){var e=t.alternate;e!==null&&(t.alternate=null,dx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[En],delete e[da],delete e[Wh],delete e[aS],delete e[lS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function hx(t){return t.tag===5||t.tag===3||t.tag===4}function fv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||hx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=xu));else if(r!==4&&(t=t.child,t!==null))for(lf(t,e,n),t=t.sibling;t!==null;)lf(t,e,n),t=t.sibling}function uf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(uf(t,e,n),t=t.sibling;t!==null;)uf(t,e,n),t=t.sibling}var Xe=null,ln=!1;function yr(t,e,n){for(n=n.child;n!==null;)fx(t,e,n),n=n.sibling}function fx(t,e,n){if(In&&typeof In.onCommitFiberUnmount=="function")try{In.onCommitFiberUnmount(ac,n)}catch{}switch(n.tag){case 5:ht||ci(n,e);case 6:var r=Xe,s=ln;Xe=null,yr(t,e,n),Xe=r,ln=s,Xe!==null&&(ln?(t=Xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Xe.removeChild(n.stateNode));break;case 18:Xe!==null&&(ln?(t=Xe,n=n.stateNode,t.nodeType===8?$d(t.parentNode,n):t.nodeType===1&&$d(t,n),oa(t)):$d(Xe,n.stateNode));break;case 4:r=Xe,s=ln,Xe=n.stateNode.containerInfo,ln=!0,yr(t,e,n),Xe=r,ln=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&of(n,e,o),s=s.next}while(s!==r)}yr(t,e,n);break;case 1:if(!ht&&(ci(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,yr(t,e,n),ht=r):yr(t,e,n);break;default:yr(t,e,n)}}function pv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new IS),e.forEach(function(r){var s=OS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function on(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Xe=l.stateNode,ln=!1;break e;case 3:Xe=l.stateNode.containerInfo,ln=!0;break e;case 4:Xe=l.stateNode.containerInfo,ln=!0;break e}l=l.return}if(Xe===null)throw Error(F(160));fx(i,o,s),Xe=null,ln=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)px(e,t),e=e.sibling}function px(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(on(e,t),wn(t),r&4){try{Wo(3,t,t.return),mc(3,t)}catch(N){Ne(t,t.return,N)}try{Wo(5,t,t.return)}catch(N){Ne(t,t.return,N)}}break;case 1:on(e,t),wn(t),r&512&&n!==null&&ci(n,n.return);break;case 5:if(on(e,t),wn(t),r&512&&n!==null&&ci(n,n.return),t.flags&32){var s=t.stateNode;try{na(s,"")}catch(N){Ne(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&L_(s,i),Rh(l,o);var d=Rh(l,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?$_(s,g):f==="dangerouslySetInnerHTML"?U_(s,g):f==="children"?na(s,g):ip(s,f,g,d)}switch(l){case"input":Sh(s,i);break;case"textarea":M_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?pi(s,!!i.multiple,x,!1):m!==!!i.multiple&&(i.defaultValue!=null?pi(s,!!i.multiple,i.defaultValue,!0):pi(s,!!i.multiple,i.multiple?[]:"",!1))}s[da]=i}catch(N){Ne(t,t.return,N)}}break;case 6:if(on(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ne(t,t.return,N)}}break;case 3:if(on(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oa(e.containerInfo)}catch(N){Ne(t,t.return,N)}break;case 4:on(e,t),wn(t);break;case 13:on(e,t),wn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(Vp=je())),r&4&&pv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,on(e,t),ht=d):on(e,t),wn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(m=q,x=m.child,m.tag){case 0:case 11:case 14:case 15:Wo(4,m,m.return);break;case 1:ci(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Ne(r,n,N)}}break;case 5:ci(m,m.return);break;case 22:if(m.memoizedState!==null){gv(g);continue}}x!==null?(x.return=m,q=x):gv(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=F_("display",o))}catch(N){Ne(t,t.return,N)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(N){Ne(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:on(e,t),wn(t),r&4&&pv(t);break;case 21:break;default:on(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(hx(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(na(s,""),r.flags&=-33);var i=fv(t);uf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=fv(t);lf(t,l,o);break;default:throw Error(F(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function NS(t,e,n){q=t,mx(t)}function mx(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Ol;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ht;l=Ol;var d=ht;if(Ol=o,(ht=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?yv(s):c!==null?(c.return=o,q=c):yv(s);for(;i!==null;)q=i,mx(i),i=i.sibling;q=s,Ol=l,ht=d}mv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):mv(t)}}function mv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||mc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Zy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&oa(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ht||e.flags&512&&af(e)}catch(m){Ne(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function gv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function yv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{mc(4,e)}catch(c){Ne(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ne(e,s,c)}}var i=e.return;try{af(e)}catch(c){Ne(e,i,c)}break;case 5:var o=e.return;try{af(e)}catch(c){Ne(e,o,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var SS=Math.ceil,Ru=ur.ReactCurrentDispatcher,Lp=ur.ReactCurrentOwner,Jt=ur.ReactCurrentBatchConfig,se=0,We=null,Ve=null,et=0,Ft=0,di=Yr(0),Be=0,ya=null,Es=0,gc=0,Mp=0,Ko=null,kt=null,Vp=0,Ci=1/0,$n=null,ju=!1,cf=null,Mr=null,Dl=!1,Ar=null,Ou=0,Go=0,df=null,Zl=-1,eu=0;function It(){return se&6?je():Zl!==-1?Zl:Zl=je()}function Vr(t){return t.mode&1?se&2&&et!==0?et&-et:cS.transition!==null?(eu===0&&(eu=Z_()),eu):(t=ae,t!==0||(t=window.event,t=t===void 0?16:ow(t.type)),t):1}function hn(t,e,n,r){if(50<Go)throw Go=0,df=null,Error(F(185));La(t,n,r),(!(se&2)||t!==We)&&(t===We&&(!(se&2)&&(gc|=n),Be===4&&Er(t,et)),Lt(t,r),n===1&&se===0&&!(e.mode&1)&&(Ci=je()+500,hc&&Xr()))}function Lt(t,e){var n=t.callbackNode;cN(t,e);var r=yu(t,t===We?et:0);if(r===0)n!==null&&Ny(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ny(n),e===1)t.tag===0?uS(vv.bind(null,t)):bw(vv.bind(null,t)),iS(function(){!(se&6)&&Xr()}),n=null;else{switch(ew(r)){case 1:n=cp;break;case 4:n=X_;break;case 16:n=gu;break;case 536870912:n=J_;break;default:n=gu}n=Tx(n,gx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function gx(t,e){if(Zl=-1,eu=0,se&6)throw Error(F(327));var n=t.callbackNode;if(_i()&&t.callbackNode!==n)return null;var r=yu(t,t===We?et:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Du(t,r);else{e=r;var s=se;se|=2;var i=vx();(We!==t||et!==e)&&($n=null,Ci=je()+500,ms(t,e));do try{kS();break}catch(l){yx(t,l)}while(!0);Tp(),Ru.current=i,se=s,Ve!==null?e=0:(We=null,et=0,e=Be)}if(e!==0){if(e===2&&(s=Mh(t),s!==0&&(r=s,e=hf(t,s))),e===1)throw n=ya,ms(t,0),Er(t,r),Lt(t,je()),n;if(e===6)Er(t,r);else{if(s=t.current.alternate,!(r&30)&&!AS(s)&&(e=Du(t,r),e===2&&(i=Mh(t),i!==0&&(r=i,e=hf(t,i))),e===1))throw n=ya,ms(t,0),Er(t,r),Lt(t,je()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:os(t,kt,$n);break;case 3:if(Er(t,r),(r&130023424)===r&&(e=Vp+500-je(),10<e)){if(yu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){It(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Hh(os.bind(null,t,kt,$n),e);break}os(t,kt,$n);break;case 4:if(Er(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-dn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=je()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*SS(r/1960))-r,10<r){t.timeoutHandle=Hh(os.bind(null,t,kt,$n),r);break}os(t,kt,$n);break;case 5:os(t,kt,$n);break;default:throw Error(F(329))}}}return Lt(t,je()),t.callbackNode===n?gx.bind(null,t):null}function hf(t,e){var n=Ko;return t.current.memoizedState.isDehydrated&&(ms(t,e).flags|=256),t=Du(t,e),t!==2&&(e=kt,kt=n,e!==null&&ff(e)),t}function ff(t){kt===null?kt=t:kt.push.apply(kt,t)}function AS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!mn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Er(t,e){for(e&=~Mp,e&=~gc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function vv(t){if(se&6)throw Error(F(327));_i();var e=yu(t,0);if(!(e&1))return Lt(t,je()),null;var n=Du(t,e);if(t.tag!==0&&n===2){var r=Mh(t);r!==0&&(e=r,n=hf(t,r))}if(n===1)throw n=ya,ms(t,0),Er(t,e),Lt(t,je()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,os(t,kt,$n),Lt(t,je()),null}function Up(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Ci=je()+500,hc&&Xr())}}function Ts(t){Ar!==null&&Ar.tag===0&&!(se&6)&&_i();var e=se;se|=1;var n=Jt.transition,r=ae;try{if(Jt.transition=null,ae=1,t)return t()}finally{ae=r,Jt.transition=n,se=e,!(se&6)&&Xr()}}function Fp(){Ft=di.current,ve(di)}function ms(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,sS(n)),Ve!==null)for(n=Ve.return;n!==null;){var r=n;switch(wp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Eu();break;case 3:Pi(),ve(Ot),ve(mt),Pp();break;case 5:Ap(r);break;case 4:Pi();break;case 13:ve(xe);break;case 19:ve(xe);break;case 10:Ip(r.type._context);break;case 22:case 23:Fp()}n=n.return}if(We=t,Ve=t=Ur(t.current,null),et=Ft=e,Be=0,ya=null,Mp=gc=Es=0,kt=Ko=null,cs!==null){for(e=0;e<cs.length;e++)if(n=cs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}cs=null}return t}function yx(t,e){do{var n=Ve;try{if(Tp(),Yl.current=Cu,ku){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}ku=!1}if(xs=0,He=$e=Ee=null,Ho=!1,pa=0,Lp.current=null,n===null||n.return===null){Be=1,ya=e,Ve=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=et,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var x=iv(o);if(x!==null){x.flags&=-257,ov(x,o,l,i,e),x.mode&1&&sv(i,d,e),e=x,c=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(c),e.updateQueue=N}else b.add(c);break e}else{if(!(e&1)){sv(i,d,e),$p();break e}c=Error(F(426))}}else if(_e&&l.mode&1){var P=iv(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),ov(P,o,l,i,e),xp(ki(c,l));break e}}i=c=ki(c,l),Be!==4&&(Be=2),Ko===null?Ko=[i]:Ko.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var E=ex(i,c,e);Jy(i,E);break e;case 1:l=c;var w=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Mr===null||!Mr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=tx(i,l,e);Jy(i,k);break e}}i=i.return}while(i!==null)}wx(n)}catch(L){e=L,Ve===n&&n!==null&&(Ve=n=n.return);continue}break}while(!0)}function vx(){var t=Ru.current;return Ru.current=Cu,t===null?Cu:t}function $p(){(Be===0||Be===3||Be===2)&&(Be=4),We===null||!(Es&268435455)&&!(gc&268435455)||Er(We,et)}function Du(t,e){var n=se;se|=2;var r=vx();(We!==t||et!==e)&&($n=null,ms(t,e));do try{PS();break}catch(s){yx(t,s)}while(!0);if(Tp(),se=n,Ru.current=r,Ve!==null)throw Error(F(261));return We=null,et=0,Be}function PS(){for(;Ve!==null;)_x(Ve)}function kS(){for(;Ve!==null&&!tN();)_x(Ve)}function _x(t){var e=Ex(t.alternate,t,Ft);t.memoizedProps=t.pendingProps,e===null?wx(t):Ve=e,Lp.current=null}function wx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=TS(n,e),n!==null){n.flags&=32767,Ve=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Be=6,Ve=null;return}}else if(n=ES(n,e,Ft),n!==null){Ve=n;return}if(e=e.sibling,e!==null){Ve=e;return}Ve=e=t}while(e!==null);Be===0&&(Be=5)}function os(t,e,n){var r=ae,s=Jt.transition;try{Jt.transition=null,ae=1,CS(t,e,n,r)}finally{Jt.transition=s,ae=r}return null}function CS(t,e,n,r){do _i();while(Ar!==null);if(se&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(dN(t,i),t===We&&(Ve=We=null,et=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Dl||(Dl=!0,Tx(gu,function(){return _i(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Jt.transition,Jt.transition=null;var o=ae;ae=1;var l=se;se|=4,Lp.current=null,bS(t,n),px(n,t),XN(zh),vu=!!Bh,zh=Bh=null,t.current=n,NS(n),nN(),se=l,ae=o,Jt.transition=i}else t.current=n;if(Dl&&(Dl=!1,Ar=t,Ou=s),i=t.pendingLanes,i===0&&(Mr=null),iN(n.stateNode),Lt(t,je()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(ju)throw ju=!1,t=cf,cf=null,t;return Ou&1&&t.tag!==0&&_i(),i=t.pendingLanes,i&1?t===df?Go++:(Go=0,df=t):Go=0,Xr(),null}function _i(){if(Ar!==null){var t=ew(Ou),e=Jt.transition,n=ae;try{if(Jt.transition=null,ae=16>t?16:t,Ar===null)var r=!1;else{if(t=Ar,Ar=null,Ou=0,se&6)throw Error(F(331));var s=se;for(se|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Wo(8,f,i)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var m=f.sibling,x=f.return;if(dx(f),f===d){q=null;break}if(m!==null){m.return=x,q=m;break}q=x}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var P=N.sibling;N.sibling=null,N=P}while(N!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Wo(9,i,i.return)}var E=i.sibling;if(E!==null){E.return=i.return,q=E;break e}q=i.return}}var w=t.current;for(q=w;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:mc(9,l)}}catch(L){Ne(l,l.return,L)}if(l===o){q=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,q=k;break e}q=l.return}}if(se=s,Xr(),In&&typeof In.onPostCommitFiberRoot=="function")try{In.onPostCommitFiberRoot(ac,t)}catch{}r=!0}return r}finally{ae=n,Jt.transition=e}}return!1}function _v(t,e,n){e=ki(n,e),e=ex(t,e,1),t=Lr(t,e,1),e=It(),t!==null&&(La(t,1,e),Lt(t,e))}function Ne(t,e,n){if(t.tag===3)_v(t,t,n);else for(;e!==null;){if(e.tag===3){_v(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=ki(n,t),t=tx(e,t,1),e=Lr(e,t,1),t=It(),e!==null&&(La(e,1,t),Lt(e,t));break}}e=e.return}}function RS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=It(),t.pingedLanes|=t.suspendedLanes&n,We===t&&(et&n)===n&&(Be===4||Be===3&&(et&130023424)===et&&500>je()-Vp?ms(t,0):Mp|=n),Lt(t,e)}function xx(t,e){e===0&&(t.mode&1?(e=bl,bl<<=1,!(bl&130023424)&&(bl=4194304)):e=1);var n=It();t=rr(t,e),t!==null&&(La(t,e,n),Lt(t,n))}function jS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xx(t,n)}function OS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),xx(t,n)}var Ex;Ex=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ot.current)Rt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Rt=!1,xS(t,e,n);Rt=!!(t.flags&131072)}else Rt=!1,_e&&e.flags&1048576&&Nw(e,bu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Jl(t,e),t=e.pendingProps;var s=Ni(e,mt.current);vi(e,n),s=Cp(null,e,r,t,s,n);var i=Rp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Dt(r)?(i=!0,Tu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Np(e),s.updater=pc,e.stateNode=s,s._reactInternals=e,Jh(e,r,t,n),e=tf(null,e,r,!0,i,n)):(e.tag=0,_e&&i&&_p(e),Tt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Jl(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=LS(r),t=an(r,t),s){case 0:e=ef(null,e,r,t,n);break e;case 1:e=uv(null,e,r,t,n);break e;case 11:e=av(null,e,r,t,n);break e;case 14:e=lv(null,e,r,an(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),ef(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),uv(t,e,r,s,n);case 3:e:{if(ix(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,Rw(t,e),Au(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=ki(Error(F(423)),e),e=cv(t,e,r,n,s);break e}else if(r!==s){s=ki(Error(F(424)),e),e=cv(t,e,r,n,s);break e}else for($t=Dr(e.stateNode.containerInfo.firstChild),Ht=e,_e=!0,un=null,n=kw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Si(),r===s){e=sr(t,e,n);break e}Tt(t,e,r,n)}e=e.child}return e;case 5:return jw(e),t===null&&Qh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,qh(r,s)?o=null:i!==null&&qh(r,i)&&(e.flags|=32),sx(t,e),Tt(t,e,o,n),e.child;case 6:return t===null&&Qh(e),null;case 13:return ox(t,e,n);case 4:return Sp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ai(e,null,r,n):Tt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),av(t,e,r,s,n);case 7:return Tt(t,e,e.pendingProps,n),e.child;case 8:return Tt(t,e,e.pendingProps.children,n),e.child;case 12:return Tt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,me(Nu,r._currentValue),r._currentValue=o,i!==null)if(mn(i.value,o)){if(i.children===s.children&&!Ot.current){e=sr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Xn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Yh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Yh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Tt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,vi(e,n),s=Zt(s),r=r(s),e.flags|=1,Tt(t,e,r,n),e.child;case 14:return r=e.type,s=an(r,e.pendingProps),s=an(r.type,s),lv(t,e,r,s,n);case 15:return nx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:an(r,s),Jl(t,e),e.tag=1,Dt(r)?(t=!0,Tu(e)):t=!1,vi(e,n),Zw(e,r,s),Jh(e,r,s,n),tf(null,e,r,!0,t,n);case 19:return ax(t,e,n);case 22:return rx(t,e,n)}throw Error(F(156,e.tag))};function Tx(t,e){return Y_(t,e)}function DS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,r){return new DS(t,e,n,r)}function Bp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function LS(t){if(typeof t=="function")return Bp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ap)return 11;if(t===lp)return 14}return 2}function Ur(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function tu(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Bp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ti:return gs(n.children,s,i,e);case op:o=8,s|=8;break;case Eh:return t=Xt(12,n,e,s|2),t.elementType=Eh,t.lanes=i,t;case Th:return t=Xt(13,n,e,s),t.elementType=Th,t.lanes=i,t;case Ih:return t=Xt(19,n,e,s),t.elementType=Ih,t.lanes=i,t;case j_:return yc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case C_:o=10;break e;case R_:o=9;break e;case ap:o=11;break e;case lp:o=14;break e;case _r:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function gs(t,e,n,r){return t=Xt(7,t,r,e),t.lanes=n,t}function yc(t,e,n,r){return t=Xt(22,t,r,e),t.elementType=j_,t.lanes=n,t.stateNode={isHidden:!1},t}function Qd(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function Yd(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function MS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kd(0),this.expirationTimes=kd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function zp(t,e,n,r,s,i,o,l,c){return t=new MS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Xt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Np(i),t}function VS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ei,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Ix(t){if(!t)return qr;t=t._reactInternals;e:{if(Os(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Dt(n))return Iw(t,n,e)}return e}function bx(t,e,n,r,s,i,o,l,c){return t=zp(n,r,!0,t,s,i,o,l,c),t.context=Ix(null),n=t.current,r=It(),s=Vr(n),i=Xn(r,s),i.callback=e??null,Lr(n,i,s),t.current.lanes=s,La(t,s,r),Lt(t,r),t}function vc(t,e,n,r){var s=e.current,i=It(),o=Vr(s);return n=Ix(n),e.context===null?e.context=n:e.pendingContext=n,e=Xn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(s,e,o),t!==null&&(hn(t,s,o,i),Ql(t,s,o)),o}function Lu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function qp(t,e){wv(t,e),(t=t.alternate)&&wv(t,e)}function US(){return null}var Nx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Hp(t){this._internalRoot=t}_c.prototype.render=Hp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));vc(t,e,null,null)};_c.prototype.unmount=Hp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ts(function(){vc(null,t,null,null)}),e[nr]=null}};function _c(t){this._internalRoot=t}_c.prototype.unstable_scheduleHydration=function(t){if(t){var e=rw();t={blockedOn:null,target:t,priority:e};for(var n=0;n<xr.length&&e!==0&&e<xr[n].priority;n++);xr.splice(n,0,t),n===0&&iw(t)}};function Wp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function wc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function xv(){}function FS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Lu(o);i.call(d)}}var o=bx(e,r,t,0,null,!1,!1,"",xv);return t._reactRootContainer=o,t[nr]=o.current,ua(t.nodeType===8?t.parentNode:t),Ts(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Lu(c);l.call(d)}}var c=zp(t,0,!1,null,null,!1,!1,"",xv);return t._reactRootContainer=c,t[nr]=c.current,ua(t.nodeType===8?t.parentNode:t),Ts(function(){vc(e,c,n,r)}),c}function xc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Lu(o);l.call(c)}}vc(e,o,t,s)}else o=FS(n,e,t,s,r);return Lu(o)}tw=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Co(e.pendingLanes);n!==0&&(dp(e,n|1),Lt(e,je()),!(se&6)&&(Ci=je()+500,Xr()))}break;case 13:Ts(function(){var r=rr(t,1);if(r!==null){var s=It();hn(r,t,1,s)}}),qp(t,1)}};hp=function(t){if(t.tag===13){var e=rr(t,134217728);if(e!==null){var n=It();hn(e,t,134217728,n)}qp(t,134217728)}};nw=function(t){if(t.tag===13){var e=Vr(t),n=rr(t,e);if(n!==null){var r=It();hn(n,t,e,r)}qp(t,e)}};rw=function(){return ae};sw=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Oh=function(t,e,n){switch(e){case"input":if(Sh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=dc(r);if(!s)throw Error(F(90));D_(r),Sh(r,s)}}}break;case"textarea":M_(t,n);break;case"select":e=n.value,e!=null&&pi(t,!!n.multiple,e,!1)}};q_=Up;H_=Ts;var $S={usingClientEntryPoint:!1,Events:[Va,ii,dc,B_,z_,Up]},To={findFiberByHostInstance:us,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},BS={bundleType:To.bundleType,version:To.version,rendererPackageName:To.rendererPackageName,rendererConfig:To.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ur.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=G_(t),t===null?null:t.stateNode},findFiberByHostInstance:To.findFiberByHostInstance||US,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{ac=Ll.inject(BS),In=Ll}catch{}}Kt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$S;Kt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Wp(e))throw Error(F(200));return VS(t,e,null,n)};Kt.createRoot=function(t,e){if(!Wp(t))throw Error(F(299));var n=!1,r="",s=Nx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=zp(t,1,!1,null,null,n,!1,r,s),t[nr]=e.current,ua(t.nodeType===8?t.parentNode:t),new Hp(e)};Kt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=G_(e),t=t===null?null:t.stateNode,t};Kt.flushSync=function(t){return Ts(t)};Kt.hydrate=function(t,e,n){if(!wc(e))throw Error(F(200));return xc(null,t,e,!0,n)};Kt.hydrateRoot=function(t,e,n){if(!Wp(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=Nx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=bx(e,null,t,1,n??null,s,!1,i,o),t[nr]=e.current,ua(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new _c(e)};Kt.render=function(t,e,n){if(!wc(e))throw Error(F(200));return xc(null,t,e,!1,n)};Kt.unmountComponentAtNode=function(t){if(!wc(t))throw Error(F(40));return t._reactRootContainer?(Ts(function(){xc(null,null,t,!1,function(){t._reactRootContainer=null,t[nr]=null})}),!0):!1};Kt.unstable_batchedUpdates=Up;Kt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!wc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return xc(t,e,n,!1,r)};Kt.version="18.3.1-next-f1338f8080-20240426";function Sx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Sx)}catch(t){console.error(t)}}Sx(),S_.exports=Kt;var zS=S_.exports,Ev=zS;wh.createRoot=Ev.createRoot,wh.hydrateRoot=Ev.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function va(){return va=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},va.apply(this,arguments)}var Pr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Pr||(Pr={}));const Tv="popstate";function qS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return pf("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Mu(s)}return WS(e,n,null,t)}function De(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Ax(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function HS(){return Math.random().toString(36).substr(2,8)}function Iv(t,e){return{usr:t.state,key:t.key,idx:e}}function pf(t,e,n,r){return n===void 0&&(n=null),va({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Ki(e):e,{state:n,key:e&&e.key||r||HS()})}function Mu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Ki(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function WS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Pr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(va({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){l=Pr.Pop;let P=f(),E=P==null?null:P-d;d=P,c&&c({action:l,location:N.location,delta:E})}function m(P,E){l=Pr.Push;let w=pf(N.location,P,E);d=f()+1;let y=Iv(w,d),k=N.createHref(w);try{o.pushState(y,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(k)}i&&c&&c({action:l,location:N.location,delta:1})}function x(P,E){l=Pr.Replace;let w=pf(N.location,P,E);d=f();let y=Iv(w,d),k=N.createHref(w);o.replaceState(y,"",k),i&&c&&c({action:l,location:N.location,delta:0})}function b(P){let E=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof P=="string"?P:Mu(P);return w=w.replace(/ $/,"%20"),De(E,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,E)}let N={get action(){return l},get location(){return t(s,o)},listen(P){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(Tv,g),c=P,()=>{s.removeEventListener(Tv,g),c=null}},createHref(P){return e(s,P)},createURL:b,encodeLocation(P){let E=b(P);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:m,replace:x,go(P){return o.go(P)}};return N}var bv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(bv||(bv={}));function KS(t,e,n){return n===void 0&&(n="/"),GS(t,e,n)}function GS(t,e,n,r){let s=typeof e=="string"?Ki(e):e,i=Kp(s.pathname||"/",n);if(i==null)return null;let o=Px(t);QS(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=aA(i);l=sA(o[c],d)}return l}function Px(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(De(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Fr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(De(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Px(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:nA(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of kx(i.path))s(i,o,c)}),e}function kx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=kx(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function QS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:rA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YS=/^:[\w-]+$/,XS=3,JS=2,ZS=1,eA=10,tA=-2,Nv=t=>t==="*";function nA(t,e){let n=t.split("/"),r=n.length;return n.some(Nv)&&(r+=tA),e&&(r+=JS),n.filter(s=>!Nv(s)).reduce((s,i)=>s+(YS.test(i)?XS:i===""?ZS:eA),r)}function rA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function sA(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=iA({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Fr([i,g.pathname]),pathnameBase:dA(Fr([i,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(i=Fr([i,g.pathnameBase]))}return o}function iA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=oA(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:m,isOptional:x}=f;if(m==="*"){let N=l[g]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const b=l[g];return x&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function oA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),Ax(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function aA(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Ax(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Kp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function lA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Ki(t):t;return{pathname:n?n.startsWith("/")?n:uA(n,e):e,search:hA(r),hash:fA(s)}}function uA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Xd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function cA(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Gp(t,e){let n=cA(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Qp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Ki(t):(s=va({},t),De(!s.pathname||!s.pathname.includes("?"),Xd("?","pathname","search",s)),De(!s.pathname||!s.pathname.includes("#"),Xd("#","pathname","hash",s)),De(!s.search||!s.search.includes("#"),Xd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}l=g>=0?e[g]:"/"}let c=lA(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Fr=t=>t.join("/").replace(/\/\/+/g,"/"),dA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),hA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,fA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function pA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Cx=["post","put","patch","delete"];new Set(Cx);const mA=["get",...Cx];new Set(mA);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _a(){return _a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},_a.apply(this,arguments)}const Yp=O.createContext(null),gA=O.createContext(null),Jr=O.createContext(null),Ec=O.createContext(null),cr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),Rx=O.createContext(null);function yA(t,e){let{relative:n}=e===void 0?{}:e;Gi()||De(!1);let{basename:r,navigator:s}=O.useContext(Jr),{hash:i,pathname:o,search:l}=Dx(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Fr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function Gi(){return O.useContext(Ec)!=null}function Ds(){return Gi()||De(!1),O.useContext(Ec).location}function jx(t){O.useContext(Jr).static||O.useLayoutEffect(t)}function vn(){let{isDataRoute:t}=O.useContext(cr);return t?kA():vA()}function vA(){Gi()||De(!1);let t=O.useContext(Yp),{basename:e,future:n,navigator:r}=O.useContext(Jr),{matches:s}=O.useContext(cr),{pathname:i}=Ds(),o=JSON.stringify(Gp(s,n.v7_relativeSplatPath)),l=O.useRef(!1);return jx(()=>{l.current=!0}),O.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let g=Qp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Fr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,i,t])}function Ox(){let{matches:t}=O.useContext(cr),e=t[t.length-1];return e?e.params:{}}function Dx(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Jr),{matches:s}=O.useContext(cr),{pathname:i}=Ds(),o=JSON.stringify(Gp(s,r.v7_relativeSplatPath));return O.useMemo(()=>Qp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function _A(t,e){return wA(t,e)}function wA(t,e,n,r){Gi()||De(!1);let{navigator:s}=O.useContext(Jr),{matches:i}=O.useContext(cr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Ds(),f;if(e){var g;let P=typeof e=="string"?Ki(e):e;c==="/"||(g=P.pathname)!=null&&g.startsWith(c)||De(!1),f=P}else f=d;let m=f.pathname||"/",x=m;if(c!=="/"){let P=c.replace(/^\//,"").split("/");x="/"+m.replace(/^\//,"").split("/").slice(P.length).join("/")}let b=KS(t,{pathname:x}),N=bA(b&&b.map(P=>Object.assign({},P,{params:Object.assign({},l,P.params),pathname:Fr([c,s.encodeLocation?s.encodeLocation(P.pathname).pathname:P.pathname]),pathnameBase:P.pathnameBase==="/"?c:Fr([c,s.encodeLocation?s.encodeLocation(P.pathnameBase).pathname:P.pathnameBase])})),i,n,r);return e&&N?O.createElement(Ec.Provider,{value:{location:_a({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Pr.Pop}},N):N}function xA(){let t=PA(),e=pA(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const EA=O.createElement(xA,null);class TA extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(cr.Provider,{value:this.props.routeContext},O.createElement(Rx.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IA(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(Yp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(cr.Provider,{value:e},r)}function bA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);f>=0||De(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:x}=n,b=g.route.loader&&m[g.route.id]===void 0&&(!x||x[g.route.id]===void 0);if(g.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,m)=>{let x,b=!1,N=null,P=null;n&&(x=l&&g.route.id?l[g.route.id]:void 0,N=g.route.errorElement||EA,c&&(d<0&&m===0?(CA("route-fallback"),b=!0,P=null):d===m&&(b=!0,P=g.route.hydrateFallbackElement||null)));let E=e.concat(o.slice(0,m+1)),w=()=>{let y;return x?y=N:b?y=P:g.route.Component?y=O.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=f,O.createElement(IA,{match:g,routeContext:{outlet:f,matches:E,isDataRoute:n!=null},children:y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?O.createElement(TA,{location:n.location,revalidation:n.revalidation,component:N,error:x,children:w(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):w()},null)}var Lx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Lx||{}),Mx=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Mx||{});function NA(t){let e=O.useContext(Yp);return e||De(!1),e}function SA(t){let e=O.useContext(gA);return e||De(!1),e}function AA(t){let e=O.useContext(cr);return e||De(!1),e}function Vx(t){let e=AA(),n=e.matches[e.matches.length-1];return n.route.id||De(!1),n.route.id}function PA(){var t;let e=O.useContext(Rx),n=SA(),r=Vx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function kA(){let{router:t}=NA(Lx.UseNavigateStable),e=Vx(Mx.UseNavigateStable),n=O.useRef(!1);return jx(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,_a({fromRouteId:e},i)))},[t,e])}const Sv={};function CA(t,e,n){Sv[t]||(Sv[t]=!0)}function RA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function mf(t){let{to:e,replace:n,state:r,relative:s}=t;Gi()||De(!1);let{future:i,static:o}=O.useContext(Jr),{matches:l}=O.useContext(cr),{pathname:c}=Ds(),d=vn(),f=Qp(e,Gp(l,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(f);return O.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function Et(t){De(!1)}function jA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Pr.Pop,navigator:i,static:o=!1,future:l}=t;Gi()&&De(!1);let c=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:c,navigator:i,static:o,future:_a({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Ki(r));let{pathname:f="/",search:g="",hash:m="",state:x=null,key:b="default"}=r,N=O.useMemo(()=>{let P=Kp(f,c);return P==null?null:{location:{pathname:P,search:g,hash:m,state:x,key:b},navigationType:s}},[c,f,g,m,x,b,s]);return N==null?null:O.createElement(Jr.Provider,{value:d},O.createElement(Ec.Provider,{children:n,value:N}))}function OA(t){let{children:e,location:n}=t;return _A(gf(e),n)}new Promise(()=>{});function gf(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,gf(r.props.children,i));return}r.type!==Et&&De(!1),!r.props.index||!r.props.children||De(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=gf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yf(){return yf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},yf.apply(this,arguments)}function DA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function LA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function MA(t,e){return t.button===0&&(!e||e==="_self")&&!LA(t)}function vf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function VA(t,e){let n=vf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const UA=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],FA="6";try{window.__reactRouterVersion=FA}catch{}const $A="startTransition",Av=R1[$A];function BA(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=qS({window:s,v5Compat:!0}));let o=i.current,[l,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=O.useCallback(g=>{d&&Av?Av(()=>c(g)):c(g)},[c,d]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.useEffect(()=>RA(r),[r]),O.createElement(jA,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const zA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",qA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,de=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:g}=e,m=DA(e,UA),{basename:x}=O.useContext(Jr),b,N=!1;if(typeof d=="string"&&qA.test(d)&&(b=d,zA))try{let y=new URL(window.location.href),k=d.startsWith("//")?new URL(y.protocol+d):new URL(d),L=Kp(k.pathname,x);k.origin===y.origin&&L!=null?d=L+k.search+k.hash:N=!0}catch{}let P=yA(d,{relative:s}),E=HA(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:g});function w(y){r&&r(y),y.defaultPrevented||E(y)}return O.createElement("a",yf({},m,{href:b||P,onClick:N||i?r:w,ref:n,target:c}))});var Pv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(Pv||(Pv={}));var kv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(kv||(kv={}));function HA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=vn(),d=Ds(),f=Dx(t,{relative:o});return O.useCallback(g=>{if(MA(g,n)){g.preventDefault();let m=r!==void 0?r:Mu(d)===Mu(f);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function WA(t){let e=O.useRef(vf(t)),n=O.useRef(!1),r=Ds(),s=O.useMemo(()=>VA(r.search,n.current?null:e.current),[r.search]),i=vn(),o=O.useCallback((l,c)=>{const d=vf(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var Cv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ux=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},KA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Fx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,x=d&63;c||(x=64,o||(m=64)),r.push(n[f],n[g],n[m],n[x])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Ux(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):KA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new GA;const m=i<<2|l>>4;if(r.push(m),d!==64){const x=l<<4&240|d>>2;if(r.push(x),g!==64){const b=d<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class GA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const QA=function(t){const e=Ux(t);return Fx.encodeByteArray(e,!0)},Vu=function(t){return QA(t).replace(/\./g,"")},$x=function(t){try{return Fx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XA=()=>YA().__FIREBASE_DEFAULTS__,JA=()=>{if(typeof process>"u"||typeof Cv>"u")return;const t=Cv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ZA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&$x(t[1]);return e&&JSON.parse(e)},Tc=()=>{try{return XA()||JA()||ZA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Bx=t=>{var e,n;return(n=(e=Tc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},zx=t=>{const e=Bx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},qx=()=>{var t;return(t=Tc())===null||t===void 0?void 0:t.config},Hx=t=>{var e;return(e=Tc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Vu(JSON.stringify(n)),Vu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function tP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(gt())}function nP(){var t;const e=(t=Tc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function rP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function sP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function iP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function oP(){const t=gt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function aP(){return!nP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Kx(){try{return typeof indexedDB=="object"}catch{return!1}}function Gx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function lP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="FirebaseError";class _n extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=uP,Object.setPrototypeOf(this,_n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ls.prototype.create)}}class Ls{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?cP(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new _n(s,l,r)}}function cP(t,e){return t.replace(dP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const dP=/\{\$([^}]+)}/g;function hP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rv(i)&&Rv(o)){if(!wa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function jo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Oo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function fP(t,e){const n=new pP(t,e);return n.subscribe.bind(n)}class pP{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");mP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Jd),s.error===void 0&&(s.error=Jd),s.complete===void 0&&(s.complete=Jd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function mP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Jd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fe(t){return t&&t._delegate?t._delegate:t}class tn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const as="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new eP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(vP(e))try{this.getOrInitializeService({instanceIdentifier:as})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=as){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=as){return this.instances.has(e)}getOptions(e=as){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:yP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=as){return this.component?this.component.multipleInstances?e:as:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function yP(t){return t===as?void 0:t}function vP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _P{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new gP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const wP={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},xP=ne.INFO,EP={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},TP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=EP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Xp{constructor(e){this.name=e,this._logLevel=xP,this._logHandler=TP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const IP=(t,e)=>e.some(n=>t instanceof n);let jv,Ov;function bP(){return jv||(jv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NP(){return Ov||(Ov=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Qx=new WeakMap,_f=new WeakMap,Yx=new WeakMap,Zd=new WeakMap,Jp=new WeakMap;function SP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Jn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Qx.set(n,t)}).catch(()=>{}),Jp.set(e,t),e}function AP(t){if(_f.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});_f.set(t,e)}let wf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return _f.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Yx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Jn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function PP(t){wf=t(wf)}function kP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(eh(this),e,...n);return Yx.set(r,e.sort?e.sort():[e]),Jn(r)}:NP().includes(t)?function(...e){return t.apply(eh(this),e),Jn(Qx.get(this))}:function(...e){return Jn(t.apply(eh(this),e))}}function CP(t){return typeof t=="function"?kP(t):(t instanceof IDBTransaction&&AP(t),IP(t,bP())?new Proxy(t,wf):t)}function Jn(t){if(t instanceof IDBRequest)return SP(t);if(Zd.has(t))return Zd.get(t);const e=CP(t);return e!==t&&(Zd.set(t,e),Jp.set(e,t)),e}const eh=t=>Jp.get(t);function Ic(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Jn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Jn(o.result),c.oldVersion,c.newVersion,Jn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function th(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Jn(n).then(()=>{})}const RP=["get","getKey","getAll","getAllKeys","count"],jP=["put","add","delete","clear"],nh=new Map;function Dv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(nh.get(e))return nh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=jP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||RP.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return nh.set(e,i),i}PP(t=>({...t,get:(e,n,r)=>Dv(e,n)||t.get(e,n,r),has:(e,n)=>!!Dv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(DP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function DP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const xf="@firebase/app",Lv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ir=new Xp("@firebase/app"),LP="@firebase/app-compat",MP="@firebase/analytics-compat",VP="@firebase/analytics",UP="@firebase/app-check-compat",FP="@firebase/app-check",$P="@firebase/auth",BP="@firebase/auth-compat",zP="@firebase/database",qP="@firebase/data-connect",HP="@firebase/database-compat",WP="@firebase/functions",KP="@firebase/functions-compat",GP="@firebase/installations",QP="@firebase/installations-compat",YP="@firebase/messaging",XP="@firebase/messaging-compat",JP="@firebase/performance",ZP="@firebase/performance-compat",ek="@firebase/remote-config",tk="@firebase/remote-config-compat",nk="@firebase/storage",rk="@firebase/storage-compat",sk="@firebase/firestore",ik="@firebase/vertexai-preview",ok="@firebase/firestore-compat",ak="firebase",lk="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ef="[DEFAULT]",uk={[xf]:"fire-core",[LP]:"fire-core-compat",[VP]:"fire-analytics",[MP]:"fire-analytics-compat",[FP]:"fire-app-check",[UP]:"fire-app-check-compat",[$P]:"fire-auth",[BP]:"fire-auth-compat",[zP]:"fire-rtdb",[qP]:"fire-data-connect",[HP]:"fire-rtdb-compat",[WP]:"fire-fn",[KP]:"fire-fn-compat",[GP]:"fire-iid",[QP]:"fire-iid-compat",[YP]:"fire-fcm",[XP]:"fire-fcm-compat",[JP]:"fire-perf",[ZP]:"fire-perf-compat",[ek]:"fire-rc",[tk]:"fire-rc-compat",[nk]:"fire-gcs",[rk]:"fire-gcs-compat",[sk]:"fire-fst",[ok]:"fire-fst-compat",[ik]:"fire-vertex","fire-js":"fire-js",[ak]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uu=new Map,ck=new Map,Tf=new Map;function Mv(t,e){try{t.container.addComponent(e)}catch(n){ir.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function gn(t){const e=t.name;if(Tf.has(e))return ir.debug(`There were multiple attempts to register component ${e}.`),!1;Tf.set(e,t);for(const n of Uu.values())Mv(n,t);for(const n of ck.values())Mv(n,t);return!0}function Ms(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function cn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dk={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},$r=new Ls("app","Firebase",dk);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new tn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=lk;function Xx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ef,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw $r.create("bad-app-name",{appName:String(s)});if(n||(n=qx()),!n)throw $r.create("no-options");const i=Uu.get(s);if(i){if(wa(n,i.options)&&wa(r,i.config))return i;throw $r.create("duplicate-app",{appName:s})}const o=new _P(s);for(const c of Tf.values())o.addComponent(c);const l=new hk(n,r,o);return Uu.set(s,l),l}function bc(t=Ef){const e=Uu.get(t);if(!e&&t===Ef&&qx())return Xx();if(!e)throw $r.create("no-app",{appName:t});return e}function Mt(t,e,n){var r;let s=(r=uk[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ir.warn(l.join(" "));return}gn(new tn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fk="firebase-heartbeat-database",pk=1,xa="firebase-heartbeat-store";let rh=null;function Jx(){return rh||(rh=Ic(fk,pk,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xa)}catch(n){console.warn(n)}}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),rh}async function mk(t){try{const n=(await Jx()).transaction(xa),r=await n.objectStore(xa).get(Zx(t));return await n.done,r}catch(e){if(e instanceof _n)ir.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ir.warn(n.message)}}}async function Vv(t,e){try{const r=(await Jx()).transaction(xa,"readwrite");await r.objectStore(xa).put(e,Zx(t)),await r.done}catch(n){if(n instanceof _n)ir.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ir.warn(r.message)}}}function Zx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gk=1024,yk=30*24*60*60*1e3;class vk{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wk(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Uv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=yk}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ir.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Uv(),{heartbeatsToSend:r,unsentEntries:s}=_k(this._heartbeatsCache.heartbeats),i=Vu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ir.warn(n),""}}}function Uv(){return new Date().toISOString().substring(0,10)}function _k(t,e=gk){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Fv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Fv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wk{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Kx()?Gx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await mk(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Vv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Fv(t){return Vu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xk(t){gn(new tn("platform-logger",e=>new OP(e),"PRIVATE")),gn(new tn("heartbeat",e=>new vk(e),"PRIVATE")),Mt(xf,Lv,t),Mt(xf,Lv,"esm2017"),Mt("fire-js","")}xk("");function Zp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function eE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Ek=eE,tE=new Ls("auth","Firebase",eE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fu=new Xp("@firebase/auth");function Tk(t,...e){Fu.logLevel<=ne.WARN&&Fu.warn(`Auth (${Vs}): ${t}`,...e)}function nu(t,...e){Fu.logLevel<=ne.ERROR&&Fu.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t,...e){throw tm(t,...e)}function fn(t,...e){return tm(t,...e)}function em(t,e,n){const r=Object.assign(Object.assign({},Ek()),{[e]:n});return new Ls("auth","Firebase",r).create(e,{appName:t.name})}function Zn(t){return em(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Ik(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&nn(t,"argument-error"),em(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function tm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return tE.create(t,...e)}function K(t,e,...n){if(!t)throw tm(e,...n)}function Kn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw nu(e),new Error(e)}function or(t,e){t||Kn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function If(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function bk(){return $v()==="http:"||$v()==="https:"}function $v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(bk()||sP()||"connection"in navigator)?navigator.onLine:!0}function Sk(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $a{constructor(e,n){this.shortDelay=e,this.longDelay=n,or(n>e,"Short delay should be less than long delay!"),this.isMobile=tP()||iP()}get(){return Nk()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nm(t,e){or(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Kn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Kn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Kn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk=new $a(3e4,6e4);function dr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Rn(t,e,n,r,s={}){return rE(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=Fa(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return rP()||(d.referrerPolicy="no-referrer"),nE.fetch()(sE(t,t.config.apiHost,n,l),d)})}async function rE(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Ak),e);try{const s=new Ck(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Ml(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Ml(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Ml(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Ml(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw em(t,f,d);nn(t,f)}}catch(s){if(s instanceof _n)throw s;nn(t,"network-request-failed",{message:String(s)})}}async function Ba(t,e,n,r,s={}){const i=await Rn(t,e,n,r,s);return"mfaPendingCredential"in i&&nn(t,"multi-factor-auth-required",{_serverResponse:i}),i}function sE(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?nm(t.config,s):`${t.config.apiScheme}://${s}`}function kk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Ck{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(fn(this.auth,"network-request-failed")),Pk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Ml(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=fn(t,e,r);return s.customData._tokenResponse=n,s}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class Rk{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return kk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function jk(t,e){return Rn(t,"GET","/v2/recaptchaConfig",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ok(t,e){return Rn(t,"POST","/v1/accounts:delete",e)}async function iE(t,e){return Rn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Dk(t,e=!1){const n=fe(t),r=await n.getIdToken(e),s=rm(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Qo(sh(s.auth_time)),issuedAtTime:Qo(sh(s.iat)),expirationTime:Qo(sh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function sh(t){return Number(t)*1e3}function rm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return nu("JWT malformed, contained fewer than 3 sections"),null;try{const s=$x(n);return s?JSON.parse(s):(nu("Failed to decode base64 JWT payload"),null)}catch(s){return nu("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function zv(t){const e=rm(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof _n&&Lk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Lk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mk{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $u(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ri(t,iE(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?oE(i.providerUserInfo):[],l=Uk(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new bf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function Vk(t){const e=fe(t);await $u(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Uk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function oE(t){return t.map(e=>{var{providerId:n}=e,r=Zp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(t,e){const n=await rE(t,{},async()=>{const r=Fa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=sE(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",nE.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function $k(t,e){return Rn(t,"POST","/v2/accounts:revokeToken",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):zv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=zv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await Fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new wi;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new wi,this.toJSON())}_performRefresh(){return Kn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Gn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Zp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Mk(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new bf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ri(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Dk(this,e)}reload(){return Vk(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Gn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await $u(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(cn(this.auth.app))return Promise.reject(Zn(this.auth));const e=await this.getIdToken();return await Ri(this,Ok(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,x=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,P=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,E=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:k,isAnonymous:L,providerData:V,stsTokenManager:I}=n;K(y&&I,e,"internal-error");const _=wi.fromJSON(this.name,I);K(typeof y=="string",e,"internal-error"),vr(g,e.name),vr(m,e.name),K(typeof k=="boolean",e,"internal-error"),K(typeof L=="boolean",e,"internal-error"),vr(x,e.name),vr(b,e.name),vr(N,e.name),vr(P,e.name),vr(E,e.name),vr(w,e.name);const S=new Gn({uid:y,auth:e,email:m,emailVerified:k,displayName:g,isAnonymous:L,photoURL:b,phoneNumber:x,tenantId:N,stsTokenManager:_,createdAt:E,lastLoginAt:w});return V&&Array.isArray(V)&&(S.providerData=V.map(T=>Object.assign({},T))),P&&(S._redirectEventId=P),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new wi;s.updateFromServerResponse(n);const i=new Gn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await $u(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?oE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new wi;l.updateFromIdToken(r);const c=new Gn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new bf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qv=new Map;function Qn(t){or(t instanceof Function,"Expected a class definition");let e=qv.get(t);return e?(or(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,qv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}aE.type="NONE";const Hv=aE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(t,e,n){return`firebase:${t}:${e}:${n}`}class xi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=ru(this.userKey,s.apiKey,i),this.fullPersistenceKey=ru("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Gn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new xi(Qn(Hv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Qn(Hv);const o=ru(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Gn._fromJSON(e,f);d!==i&&(l=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new xi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new xi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(dE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(lE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(fE(e))return"Blackberry";if(pE(e))return"Webos";if(uE(e))return"Safari";if((e.includes("chrome/")||cE(e))&&!e.includes("edge/"))return"Chrome";if(hE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function lE(t=gt()){return/firefox\//i.test(t)}function uE(t=gt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function cE(t=gt()){return/crios\//i.test(t)}function dE(t=gt()){return/iemobile/i.test(t)}function hE(t=gt()){return/android/i.test(t)}function fE(t=gt()){return/blackberry/i.test(t)}function pE(t=gt()){return/webos/i.test(t)}function sm(t=gt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function Bk(t=gt()){var e;return sm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function zk(){return oP()&&document.documentMode===10}function mE(t=gt()){return sm(t)||hE(t)||pE(t)||fE(t)||/windows phone/i.test(t)||dE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gE(t,e=[]){let n;switch(t){case"Browser":n=Wv(gt());break;case"Worker":n=`${Wv(gt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e={}){return Rn(t,"GET","/v2/passwordPolicy",dr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=6;class Kk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:Wk,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Kv(this),this.idTokenSubscription=new Kv(this),this.beforeStateQueue=new qk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=tE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Qn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await xi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await iE(this,{idToken:e}),r=await Gn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(cn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await $u(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Sk()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(cn(this.app))return Promise.reject(Zn(this));const n=e?fe(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return cn(this.app)?Promise.reject(Zn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return cn(this.app)?Promise.reject(Zn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Qn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Hk(this),n=new Kk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Ls("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await $k(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Qn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await xi.create(this,[Qn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=gE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&Tk(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function hr(t){return fe(t)}class Kv{constructor(e){this.auth=e,this.observer=null,this.addObserver=fP(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Nc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Qk(t){Nc=t}function yE(t){return Nc.loadJS(t)}function Yk(){return Nc.recaptchaEnterpriseScript}function Xk(){return Nc.gapiScript}function Jk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Zk="recaptcha-enterprise",eC="NO_RECAPTCHA";class tC{constructor(e){this.type=Zk,this.auth=hr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{jk(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new Rk(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Bv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(eC)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Bv(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Yk();c.length!==0&&(c+=l),yE(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Gv(t,e,n,r=!1){const s=new tC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Bu(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Gv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Gv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e){const n=Ms(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(wa(i,e??{}))return s;nn(s,"already-initialized")}return n.initialize({options:e})}function rC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Qn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function sC(t,e,n){const r=hr(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=vE(e),{host:o,port:l}=iC(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),oC()}function vE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function iC(t){const e=vE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Qv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Qv(o)}}}function Qv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Kn("not implemented")}_getIdTokenResponse(e){return Kn("not implemented")}_linkToIdToken(e,n){return Kn("not implemented")}_getReauthenticationResolver(e){return Kn("not implemented")}}async function aC(t,e){return Rn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e){return Ba(t,"POST","/v1/accounts:signInWithPassword",dr(t,e))}async function uC(t,e){return Rn(t,"POST","/v1/accounts:sendOobCode",dr(t,e))}async function cC(t,e){return uC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dC(t,e){return Ba(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}async function hC(t,e){return Ba(t,"POST","/v1/accounts:signInWithEmailLink",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ea extends im{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Ea(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ea(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bu(e,n,"signInWithPassword",lC);case"emailLink":return dC(e,{email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Bu(e,r,"signUpPassword",aC);case"emailLink":return hC(e,{idToken:n,email:this._email,oobCode:this._password});default:nn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ei(t,e){return Ba(t,"POST","/v1/accounts:signInWithIdp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fC="http://localhost";class Is extends im{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Is(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):nn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Zp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Is(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ei(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ei(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ei(e,n)}buildRequest(){const e={requestUri:fC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function mC(t){const e=jo(Oo(t)).link,n=e?jo(Oo(e)).deep_link_id:null,r=jo(Oo(t)).deep_link_id;return(r?jo(Oo(r)).link:null)||r||n||e||t}class om{constructor(e){var n,r,s,i,o,l;const c=jo(Oo(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=pC((s=c.mode)!==null&&s!==void 0?s:null);K(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=mC(e);try{return new om(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(){this.providerId=Qi.PROVIDER_ID}static credential(e,n){return Ea._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=om.parseLink(n);return K(r,"argument-error"),Ea._fromEmailAndCode(e,r.code,r.tenantId)}}Qi.PROVIDER_ID="password";Qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class am{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class za extends am{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends za{constructor(){super("facebook.com")}static credential(e){return Is._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Tr.credential(e.oauthAccessToken)}catch{return null}}}Tr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Tr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn extends za{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Is._fromParams({providerId:qn.PROVIDER_ID,signInMethod:qn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return qn.credentialFromTaggedObject(e)}static credentialFromError(e){return qn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return qn.credential(n,r)}catch{return null}}}qn.GOOGLE_SIGN_IN_METHOD="google.com";qn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends za{constructor(){super("github.com")}static credential(e){return Is._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ir.credential(e.oauthAccessToken)}catch{return null}}}Ir.GITHUB_SIGN_IN_METHOD="github.com";Ir.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class br extends za{constructor(){super("twitter.com")}static credential(e,n){return Is._fromParams({providerId:br.PROVIDER_ID,signInMethod:br.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return br.credentialFromTaggedObject(e)}static credentialFromError(e){return br.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return br.credential(n,r)}catch{return null}}}br.TWITTER_SIGN_IN_METHOD="twitter.com";br.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e){return Ba(t,"POST","/v1/accounts:signUp",dr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Gn._fromIdTokenResponse(e,r,s),o=Yv(r);return new bs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Yv(r);return new bs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Yv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu extends _n{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,zu.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new zu(e,n,r,s)}}function _E(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?zu._fromErrorAndOperation(t,i,e,r):i})}async function yC(t,e,n=!1){const r=await Ri(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return bs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vC(t,e,n=!1){const{auth:r}=t;if(cn(r.app))return Promise.reject(Zn(r));const s="reauthenticate";try{const i=await Ri(t,_E(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=rm(i.idToken);K(o,r,"internal-error");const{sub:l}=o;return K(t.uid===l,r,"user-mismatch"),bs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&nn(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wE(t,e,n=!1){if(cn(t.app))return Promise.reject(Zn(t));const r="signIn",s=await _E(t,r,e),i=await bs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function _C(t,e){return wE(hr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xE(t){const e=hr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function wC(t,e,n){const r=hr(t);await Bu(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",cC)}async function xC(t,e,n){if(cn(t.app))return Promise.reject(Zn(t));const r=hr(t),o=await Bu(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",gC).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&xE(t),c}),l=await bs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function EC(t,e,n){return cn(t.app)?Promise.reject(Zn(t)):_C(fe(t),Qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,e){return Rn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=fe(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ri(r,TC(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function bC(t,e,n,r){return fe(t).onIdTokenChanged(e,n,r)}function NC(t,e,n){return fe(t).beforeAuthStateChanged(e,n)}function SC(t,e,n,r){return fe(t).onAuthStateChanged(e,n,r)}function AC(t){return fe(t).signOut()}const qu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(qu,"1"),this.storage.removeItem(qu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PC=1e3,kC=10;class TE extends EE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=mE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);zk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,kC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},PC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}TE.type="LOCAL";const CC=TE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE extends EE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}IE.type="SESSION";const bE=IE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Sc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await RC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Sc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=lm("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(){return window}function OC(t){Nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(){return typeof Nn().WorkerGlobalScope<"u"&&typeof Nn().importScripts=="function"}async function DC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function LC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function MC(){return NE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="firebaseLocalStorageDb",VC=1,Hu="firebaseLocalStorage",AE="fbase_key";class qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ac(t,e){return t.transaction([Hu],e?"readwrite":"readonly").objectStore(Hu)}function UC(){const t=indexedDB.deleteDatabase(SE);return new qa(t).toPromise()}function Nf(){const t=indexedDB.open(SE,VC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Hu,{keyPath:AE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Hu)?e(r):(r.close(),await UC(),e(await Nf()))})})}async function Xv(t,e,n){const r=Ac(t,!0).put({[AE]:e,value:n});return new qa(r).toPromise()}async function FC(t,e){const n=Ac(t,!1).get(e),r=await new qa(n).toPromise();return r===void 0?null:r.value}function Jv(t,e){const n=Ac(t,!0).delete(e);return new qa(n).toPromise()}const $C=800,BC=3;class PE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Nf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>BC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return NE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Sc._getInstance(MC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await DC(),!this.activeServiceWorker)return;this.sender=new jC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||LC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Nf();return await Xv(e,qu,"1"),await Jv(e,qu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Xv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>FC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Jv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ac(s,!1).getAll();return new qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),$C)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}PE.type="LOCAL";const zC=PE;new $a(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kE(t,e){return e?Qn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um extends im{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ei(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ei(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ei(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function qC(t){return wE(t.auth,new um(t),t.bypassAuthState)}function HC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),vC(n,new um(t),t.bypassAuthState)}async function WC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),yC(n,new um(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return qC;case"linkViaPopup":case"linkViaRedirect":return WC;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:nn(this.auth,"internal-error")}}resolve(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){or(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC=new $a(2e3,1e4);async function GC(t,e,n){if(cn(t.app))return Promise.reject(fn(t,"operation-not-supported-in-this-environment"));const r=hr(t);Ik(t,e,am);const s=kE(r,n);return new hs(r,"signInViaPopup",e,s).executeNotNull()}class hs extends CE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,hs.currentPopupAction&&hs.currentPopupAction.cancel(),hs.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){or(this.filter.length===1,"Popup operations only handle one event");const e=lm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,hs.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,KC.get())};e()}}hs.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QC="pendingRedirect",su=new Map;class YC extends CE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=su.get(this.auth._key());if(!e){try{const r=await XC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}su.set(this.auth._key(),e)}return this.bypassAuthState||su.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function XC(t,e){const n=eR(e),r=ZC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function JC(t,e){su.set(t._key(),e)}function ZC(t){return Qn(t._redirectPersistence)}function eR(t){return ru(QC,t.config.apiKey,t.name)}async function tR(t,e,n=!1){if(cn(t.app))return Promise.reject(Zn(t));const r=hr(t),s=kE(r,e),o=await new YC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nR=10*60*1e3;class rR{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!sR(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!RE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(fn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=nR&&this.cachedEventUids.clear(),this.cachedEventUids.has(Zv(e))}saveEventToCache(e){this.cachedEventUids.add(Zv(e)),this.lastProcessedEventTime=Date.now()}}function Zv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function RE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function sR(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return RE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e={}){return Rn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oR=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,aR=/^https?/;async function lR(t){if(t.config.emulator)return;const{authorizedDomains:e}=await iR(t);for(const n of e)try{if(uR(n))return}catch{}nn(t,"unauthorized-domain")}function uR(t){const e=If(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!aR.test(n))return!1;if(oR.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cR=new $a(3e4,6e4);function e0(){const t=Nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function dR(t){return new Promise((e,n)=>{var r,s,i;function o(){e0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{e0(),n(fn(t,"network-request-failed"))},timeout:cR.get()})}if(!((s=(r=Nn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Nn().gapi)===null||i===void 0)&&i.load)o();else{const l=Jk("iframefcb");return Nn()[l]=()=>{gapi.load?o():n(fn(t,"network-request-failed"))},yE(`${Xk()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw iu=null,e})}let iu=null;function hR(t){return iu=iu||dR(t),iu}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fR=new $a(5e3,15e3),pR="__/auth/iframe",mR="emulator/auth/iframe",gR={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},yR=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function vR(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?nm(e,mR):`https://${t.config.authDomain}/${pR}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},s=yR.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Fa(r).slice(1)}`}async function _R(t){const e=await hR(t),n=Nn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:vR(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:gR,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=fn(t,"network-request-failed"),l=Nn().setTimeout(()=>{i(o)},fR.get());function c(){Nn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},xR=500,ER=600,TR="_blank",IR="http://localhost";class t0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function bR(t,e,n,r=xR,s=ER){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},wR),{width:r.toString(),height:s.toString(),top:i,left:o}),d=gt().toLowerCase();n&&(l=cE(d)?TR:n),lE(d)&&(e=e||IR,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[x,b])=>`${m}${x}=${b},`,"");if(Bk(d)&&l!=="_self")return NR(e||"",l),new t0(null);const g=window.open(e||"",l,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new t0(g)}function NR(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR="__/auth/handler",AR="emulator/auth/handler",PR=encodeURIComponent("fac");async function n0(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:s};if(e instanceof am){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",hP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof za){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${PR}=${encodeURIComponent(c)}`:"";return`${kR(t)}?${Fa(l).slice(1)}${d}`}function kR({config:t}){return t.emulator?nm(t,AR):`https://${t.authDomain}/${SR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih="webStorageSupport";class CR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=bE,this._completeRedirectFn=tR,this._overrideRedirectResult=JC}async _openPopup(e,n,r,s){var i;or((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await n0(e,n,r,If(),s);return bR(e,o,lm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await n0(e,n,r,If(),s);return OC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(or(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await _R(e),r=new rR(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(ih,{type:ih},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[ih];o!==void 0&&n(!!o),nn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=lR(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return mE()||uE()||sm()}}const RR=CR;var r0="@firebase/auth",s0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function DR(t){gn(new tn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:gE(t)},d=new Gk(r,s,i,c);return rC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),gn(new tn("auth-internal",e=>{const n=hr(e.getProvider("auth").getImmediate());return(r=>new jR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Mt(r0,s0,OR(t)),Mt(r0,s0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LR=5*60,MR=Hx("authIdTokenMaxAge")||LR;let i0=null;const VR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>MR)return;const s=n==null?void 0:n.token;i0!==s&&(i0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function UR(t=bc()){const e=Ms(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nC(t,{popupRedirectResolver:RR,persistence:[zC,CC,bE]}),r=Hx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=VR(i.toString());NC(n,o,()=>o(n.currentUser)),bC(n,l=>o(l))}}const s=Bx("auth");return s&&sC(n,`http://${s}`),n}function FR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Qk({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=fn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",FR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});DR("Browser");var $R="firebase",BR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Mt($R,BR,"app");var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ys,jE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function S(){}S.prototype=_.prototype,I.D=_.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(T,C,R){for(var A=Array(arguments.length-2),Ke=2;Ke<arguments.length;Ke++)A[Ke-2]=arguments[Ke];return _.prototype[C].apply(T,A)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,S){S||(S=0);var T=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)T[C]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(C=0;16>C;++C)T[C]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=I.g[0],S=I.g[1],C=I.g[2];var R=I.g[3],A=_+(R^S&(C^R))+T[0]+3614090360&4294967295;_=S+(A<<7&4294967295|A>>>25),A=R+(C^_&(S^C))+T[1]+3905402710&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(S^R&(_^S))+T[2]+606105819&4294967295,C=R+(A<<17&4294967295|A>>>15),A=S+(_^C&(R^_))+T[3]+3250441966&4294967295,S=C+(A<<22&4294967295|A>>>10),A=_+(R^S&(C^R))+T[4]+4118548399&4294967295,_=S+(A<<7&4294967295|A>>>25),A=R+(C^_&(S^C))+T[5]+1200080426&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(S^R&(_^S))+T[6]+2821735955&4294967295,C=R+(A<<17&4294967295|A>>>15),A=S+(_^C&(R^_))+T[7]+4249261313&4294967295,S=C+(A<<22&4294967295|A>>>10),A=_+(R^S&(C^R))+T[8]+1770035416&4294967295,_=S+(A<<7&4294967295|A>>>25),A=R+(C^_&(S^C))+T[9]+2336552879&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(S^R&(_^S))+T[10]+4294925233&4294967295,C=R+(A<<17&4294967295|A>>>15),A=S+(_^C&(R^_))+T[11]+2304563134&4294967295,S=C+(A<<22&4294967295|A>>>10),A=_+(R^S&(C^R))+T[12]+1804603682&4294967295,_=S+(A<<7&4294967295|A>>>25),A=R+(C^_&(S^C))+T[13]+4254626195&4294967295,R=_+(A<<12&4294967295|A>>>20),A=C+(S^R&(_^S))+T[14]+2792965006&4294967295,C=R+(A<<17&4294967295|A>>>15),A=S+(_^C&(R^_))+T[15]+1236535329&4294967295,S=C+(A<<22&4294967295|A>>>10),A=_+(C^R&(S^C))+T[1]+4129170786&4294967295,_=S+(A<<5&4294967295|A>>>27),A=R+(S^C&(_^S))+T[6]+3225465664&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^S&(R^_))+T[11]+643717713&4294967295,C=R+(A<<14&4294967295|A>>>18),A=S+(R^_&(C^R))+T[0]+3921069994&4294967295,S=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(S^C))+T[5]+3593408605&4294967295,_=S+(A<<5&4294967295|A>>>27),A=R+(S^C&(_^S))+T[10]+38016083&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^S&(R^_))+T[15]+3634488961&4294967295,C=R+(A<<14&4294967295|A>>>18),A=S+(R^_&(C^R))+T[4]+3889429448&4294967295,S=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(S^C))+T[9]+568446438&4294967295,_=S+(A<<5&4294967295|A>>>27),A=R+(S^C&(_^S))+T[14]+3275163606&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^S&(R^_))+T[3]+4107603335&4294967295,C=R+(A<<14&4294967295|A>>>18),A=S+(R^_&(C^R))+T[8]+1163531501&4294967295,S=C+(A<<20&4294967295|A>>>12),A=_+(C^R&(S^C))+T[13]+2850285829&4294967295,_=S+(A<<5&4294967295|A>>>27),A=R+(S^C&(_^S))+T[2]+4243563512&4294967295,R=_+(A<<9&4294967295|A>>>23),A=C+(_^S&(R^_))+T[7]+1735328473&4294967295,C=R+(A<<14&4294967295|A>>>18),A=S+(R^_&(C^R))+T[12]+2368359562&4294967295,S=C+(A<<20&4294967295|A>>>12),A=_+(S^C^R)+T[5]+4294588738&4294967295,_=S+(A<<4&4294967295|A>>>28),A=R+(_^S^C)+T[8]+2272392833&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^S)+T[11]+1839030562&4294967295,C=R+(A<<16&4294967295|A>>>16),A=S+(C^R^_)+T[14]+4259657740&4294967295,S=C+(A<<23&4294967295|A>>>9),A=_+(S^C^R)+T[1]+2763975236&4294967295,_=S+(A<<4&4294967295|A>>>28),A=R+(_^S^C)+T[4]+1272893353&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^S)+T[7]+4139469664&4294967295,C=R+(A<<16&4294967295|A>>>16),A=S+(C^R^_)+T[10]+3200236656&4294967295,S=C+(A<<23&4294967295|A>>>9),A=_+(S^C^R)+T[13]+681279174&4294967295,_=S+(A<<4&4294967295|A>>>28),A=R+(_^S^C)+T[0]+3936430074&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^S)+T[3]+3572445317&4294967295,C=R+(A<<16&4294967295|A>>>16),A=S+(C^R^_)+T[6]+76029189&4294967295,S=C+(A<<23&4294967295|A>>>9),A=_+(S^C^R)+T[9]+3654602809&4294967295,_=S+(A<<4&4294967295|A>>>28),A=R+(_^S^C)+T[12]+3873151461&4294967295,R=_+(A<<11&4294967295|A>>>21),A=C+(R^_^S)+T[15]+530742520&4294967295,C=R+(A<<16&4294967295|A>>>16),A=S+(C^R^_)+T[2]+3299628645&4294967295,S=C+(A<<23&4294967295|A>>>9),A=_+(C^(S|~R))+T[0]+4096336452&4294967295,_=S+(A<<6&4294967295|A>>>26),A=R+(S^(_|~C))+T[7]+1126891415&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~S))+T[14]+2878612391&4294967295,C=R+(A<<15&4294967295|A>>>17),A=S+(R^(C|~_))+T[5]+4237533241&4294967295,S=C+(A<<21&4294967295|A>>>11),A=_+(C^(S|~R))+T[12]+1700485571&4294967295,_=S+(A<<6&4294967295|A>>>26),A=R+(S^(_|~C))+T[3]+2399980690&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~S))+T[10]+4293915773&4294967295,C=R+(A<<15&4294967295|A>>>17),A=S+(R^(C|~_))+T[1]+2240044497&4294967295,S=C+(A<<21&4294967295|A>>>11),A=_+(C^(S|~R))+T[8]+1873313359&4294967295,_=S+(A<<6&4294967295|A>>>26),A=R+(S^(_|~C))+T[15]+4264355552&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~S))+T[6]+2734768916&4294967295,C=R+(A<<15&4294967295|A>>>17),A=S+(R^(C|~_))+T[13]+1309151649&4294967295,S=C+(A<<21&4294967295|A>>>11),A=_+(C^(S|~R))+T[4]+4149444226&4294967295,_=S+(A<<6&4294967295|A>>>26),A=R+(S^(_|~C))+T[11]+3174756917&4294967295,R=_+(A<<10&4294967295|A>>>22),A=C+(_^(R|~S))+T[2]+718787259&4294967295,C=R+(A<<15&4294967295|A>>>17),A=S+(R^(C|~_))+T[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(C+(A<<21&4294967295|A>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var S=_-this.blockSize,T=this.B,C=this.h,R=0;R<_;){if(C==0)for(;R<=S;)s(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<_;)if(T[C++]=I.charCodeAt(R++),C==this.blockSize){s(this,T),C=0;break}}else for(;R<_;)if(T[C++]=I[R++],C==this.blockSize){s(this,T),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var S=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=S&255,S/=256;for(this.u(I),I=Array(16),_=S=0;4>_;++_)for(var T=0;32>T;T+=8)I[S++]=this.g[_]>>>T&255;return I};function i(I,_){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=_(I)}function o(I,_){this.h=_;for(var S=[],T=!0,C=I.length-1;0<=C;C--){var R=I[C]|0;T&&R==_||(S[C]=R,T=!1)}this.g=S}var l={};function c(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return P(d(-I));for(var _=[],S=1,T=0;I>=S;T++)_[T]=I/S|0,S*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return P(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(_,8)),T=g,C=0;C<I.length;C+=8){var R=Math.min(8,I.length-C),A=parseInt(I.substring(C,C+R),_);8>R?(R=d(Math.pow(_,R)),T=T.j(R).add(d(A))):(T=T.j(S),T=T.add(d(A)))}return T}var g=c(0),m=c(1),x=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-P(this).m();for(var I=0,_=1,S=0;S<this.g.length;S++){var T=this.i(S);I+=(0<=T?T:4294967296+T)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(N(this))return"-"+P(this).toString(I);for(var _=d(Math.pow(I,6)),S=this,T="";;){var C=k(S,_).g;S=E(S,C.j(_));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=C,b(S))return R+T;for(;6>R.length;)R="0"+R;T=R+T}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=E(this,I),N(I)?-1:b(I)?0:1};function P(I){for(var _=I.g.length,S=[],T=0;T<_;T++)S[T]=~I.g[T];return new o(S,~I.h).add(m)}t.abs=function(){return N(this)?P(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],T=0,C=0;C<=_;C++){var R=T+(this.i(C)&65535)+(I.i(C)&65535),A=(R>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);T=A>>>16,R&=65535,A&=65535,S[C]=A<<16|R}return new o(S,S[S.length-1]&-2147483648?-1:0)};function E(I,_){return I.add(P(_))}t.j=function(I){if(b(this)||b(I))return g;if(N(this))return N(I)?P(this).j(P(I)):P(P(this).j(I));if(N(I))return P(this.j(P(I)));if(0>this.l(x)&&0>I.l(x))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,S=[],T=0;T<2*_;T++)S[T]=0;for(T=0;T<this.g.length;T++)for(var C=0;C<I.g.length;C++){var R=this.i(T)>>>16,A=this.i(T)&65535,Ke=I.i(C)>>>16,jn=I.i(C)&65535;S[2*T+2*C]+=A*jn,w(S,2*T+2*C),S[2*T+2*C+1]+=R*jn,w(S,2*T+2*C+1),S[2*T+2*C+1]+=A*Ke,w(S,2*T+2*C+1),S[2*T+2*C+2]+=R*Ke,w(S,2*T+2*C+2)}for(T=0;T<_;T++)S[T]=S[2*T+1]<<16|S[2*T];for(T=_;T<2*_;T++)S[T]=0;return new o(S,0)};function w(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function y(I,_){this.g=I,this.h=_}function k(I,_){if(b(_))throw Error("division by zero");if(b(I))return new y(g,g);if(N(I))return _=k(P(I),_),new y(P(_.g),P(_.h));if(N(_))return _=k(I,P(_)),new y(P(_.g),_.h);if(30<I.g.length){if(N(I)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,T=_;0>=T.l(I);)S=L(S),T=L(T);var C=V(S,1),R=V(T,1);for(T=V(T,2),S=V(S,2);!b(T);){var A=R.add(T);0>=A.l(I)&&(C=C.add(S),R=A),T=V(T,1),S=V(S,1)}return _=E(I,C.j(_)),new y(C,_)}for(C=g;0<=I.l(_);){for(S=Math.max(1,Math.floor(I.m()/_.m())),T=Math.ceil(Math.log(S)/Math.LN2),T=48>=T?1:Math.pow(2,T-48),R=d(S),A=R.j(_);N(A)||0<A.l(I);)S-=T,R=d(S),A=R.j(_);b(R)&&(R=m),C=C.add(R),I=E(I,A)}return new y(C,I)}t.A=function(I){return k(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],T=0;T<_;T++)S[T]=this.i(T)&I.i(T);return new o(S,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],T=0;T<_;T++)S[T]=this.i(T)|I.i(T);return new o(S,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],T=0;T<_;T++)S[T]=this.i(T)^I.i(T);return new o(S,this.h^I.h)};function L(I){for(var _=I.g.length+1,S=[],T=0;T<_;T++)S[T]=I.i(T)<<1|I.i(T-1)>>>31;return new o(S,I.h)}function V(I,_){var S=_>>5;_%=32;for(var T=I.g.length-S,C=[],R=0;R<T;R++)C[R]=0<_?I.i(R+S)>>>_|I.i(R+S+1)<<32-_:I.i(R+S);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,jE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ys=o}).apply(typeof o0<"u"?o0:typeof self<"u"?self:typeof window<"u"?window:{});var Vl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var OE,Do,DE,ou,Sf,LE,ME,VE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Vl=="object"&&Vl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in p))break e;p=p[j]}a=a[a.length-1],v=p[a],h=h(v),h!=v&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,v=!1,j={next:function(){if(!v&&p<a.length){var D=p++;return{value:h(D,a[D]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function g(a,h,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function m(a,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function x(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,j,D){for(var $=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)$[ce-2]=arguments[ce];return h.prototype[j].apply(v,$)}}function N(a){const h=a.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=a[v];return p}return[]}function P(a,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(c(v)){const j=a.length||0,D=v.length||0;a.length=j+D;for(let $=0;$<D;$++)a[j+$]=v[$]}else a.push(v)}}class E{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function y(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var L=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function V(a,h,p){for(const v in a)h.call(p,a[v],v,a)}function I(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function _(a){const h={};for(const p in a)h[p]=a[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function T(a,h){let p,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(p in v)a[p]=v[p];for(let D=0;D<S.length;D++)p=S[D],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function C(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function R(a){l.setTimeout(()=>{throw a},0)}function A(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class Ke{constructor(){this.h=this.g=null}add(h,p){const v=jn.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var jn=new E(()=>new to,a=>a.reset());class to{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let On,z=!1,Q=new Ke,Z=()=>{const a=l.Promise.resolve(void 0);On=()=>{a.then(we)}};var we=()=>{for(var a;a=A();){try{a.h.call(a.g)}catch(p){R(p)}var h=jn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Pe(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Pe.prototype.h=function(){this.defaultPrevented=!0};var Dn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function Ln(a,h){if(Pe.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{k(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Mn[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Ln.aa.h.call(this)}}b(Ln,Pe);var Mn={2:"touch",3:"pen",4:"mouse"};Ln.prototype.h=function(){Ln.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Vn="closure_listenable_"+(1e6*Math.random()|0),Vb=0;function Ub(a,h,p,v,j){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=j,this.key=++Vb,this.da=this.fa=!1}function nl(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function rl(a){this.src=a,this.g={},this.h=0}rl.prototype.add=function(a,h,p,v,j){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=nd(a,h,v,j);return-1<$?(h=a[$],p||(h.fa=!1)):(h=new Ub(h,this.src,D,!!v,j),h.fa=p,a.push(h)),h};function td(a,h){var p=h.type;if(p in a.g){var v=a.g[p],j=Array.prototype.indexOf.call(v,h,void 0),D;(D=0<=j)&&Array.prototype.splice.call(v,j,1),D&&(nl(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function nd(a,h,p,v){for(var j=0;j<a.length;++j){var D=a[j];if(!D.da&&D.listener==h&&D.capture==!!p&&D.ha==v)return j}return-1}var rd="closure_lm_"+(1e6*Math.random()|0),sd={};function mg(a,h,p,v,j){if(Array.isArray(h)){for(var D=0;D<h.length;D++)mg(a,h[D],p,v,j);return null}return p=vg(p),a&&a[Vn]?a.K(h,p,d(v)?!!v.capture:!1,j):Fb(a,h,p,!1,v,j)}function Fb(a,h,p,v,j,D){if(!h)throw Error("Invalid event type");var $=d(j)?!!j.capture:!!j,ce=od(a);if(ce||(a[rd]=ce=new rl(a)),p=ce.add(h,p,v,$,D),p.proxy)return p;if(v=$b(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)Dn||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),v,j);else if(a.attachEvent)a.attachEvent(yg(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function $b(){function a(p){return h.call(a.src,a.listener,p)}const h=Bb;return a}function gg(a,h,p,v,j){if(Array.isArray(h))for(var D=0;D<h.length;D++)gg(a,h[D],p,v,j);else v=d(v)?!!v.capture:!!v,p=vg(p),a&&a[Vn]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],p=nd(D,p,v,j),-1<p&&(nl(D[p]),Array.prototype.splice.call(D,p,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=od(a))&&(h=a.g[h.toString()],a=-1,h&&(a=nd(h,p,v,j)),(p=-1<a?h[a]:null)&&id(p))}function id(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Vn])td(h.i,a);else{var p=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(p,v,a.capture):h.detachEvent?h.detachEvent(yg(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=od(h))?(td(p,a),p.h==0&&(p.src=null,h[rd]=null)):nl(a)}}}function yg(a){return a in sd?sd[a]:sd[a]="on"+a}function Bb(a,h){if(a.da)a=!0;else{h=new Ln(h,this);var p=a.listener,v=a.ha||a.src;a.fa&&id(a),a=p.call(v,h)}return a}function od(a){return a=a[rd],a instanceof rl?a:null}var ad="__closure_events_fn_"+(1e9*Math.random()>>>0);function vg(a){return typeof a=="function"?a:(a[ad]||(a[ad]=function(h){return a.handleEvent(h)}),a[ad])}function st(){ue.call(this),this.i=new rl(this),this.M=this,this.F=null}b(st,ue),st.prototype[Vn]=!0,st.prototype.removeEventListener=function(a,h,p,v){gg(this,a,h,p,v)};function yt(a,h){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Pe(h,a);else if(h instanceof Pe)h.target=h.target||a;else{var j=h;h=new Pe(v,a),T(h,j)}if(j=!0,p)for(var D=p.length-1;0<=D;D--){var $=h.g=p[D];j=sl($,v,!0,h)&&j}if($=h.g=a,j=sl($,v,!0,h)&&j,j=sl($,v,!1,h)&&j,p)for(D=0;D<p.length;D++)$=h.g=p[D],j=sl($,v,!1,h)&&j}st.prototype.N=function(){if(st.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],v=0;v<p.length;v++)nl(p[v]);delete a.g[h],a.h--}}this.F=null},st.prototype.K=function(a,h,p,v){return this.i.add(String(a),h,!1,p,v)},st.prototype.L=function(a,h,p,v){return this.i.add(String(a),h,!0,p,v)};function sl(a,h,p,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,D=0;D<h.length;++D){var $=h[D];if($&&!$.da&&$.capture==p){var ce=$.listener,Ge=$.ha||$.src;$.fa&&td(a.i,$),j=ce.call(Ge,v)!==!1&&j}}return j&&!v.defaultPrevented}function _g(a,h,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function wg(a){a.g=_g(()=>{a.g=null,a.i&&(a.i=!1,wg(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class zb extends ue{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wg(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function no(a){ue.call(this),this.h=a,this.g={}}b(no,ue);var xg=[];function Eg(a){V(a.g,function(h,p){this.g.hasOwnProperty(p)&&id(h)},a),a.g={}}no.prototype.N=function(){no.aa.N.call(this),Eg(this)},no.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ld=l.JSON.stringify,qb=l.JSON.parse,Hb=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function ud(){}ud.prototype.h=null;function Tg(a){return a.h||(a.h=a.i())}function Ig(){}var ro={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function cd(){Pe.call(this,"d")}b(cd,Pe);function dd(){Pe.call(this,"c")}b(dd,Pe);var es={},bg=null;function il(){return bg=bg||new st}es.La="serverreachability";function Ng(a){Pe.call(this,es.La,a)}b(Ng,Pe);function so(a){const h=il();yt(h,new Ng(h))}es.STAT_EVENT="statevent";function Sg(a,h){Pe.call(this,es.STAT_EVENT,a),this.stat=h}b(Sg,Pe);function vt(a){const h=il();yt(h,new Sg(h,a))}es.Ma="timingevent";function Ag(a,h){Pe.call(this,es.Ma,a),this.size=h}b(Ag,Pe);function io(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function oo(){this.g=!0}oo.prototype.xa=function(){this.g=!1};function Wb(a,h,p,v,j,D){a.info(function(){if(a.g)if(D)for(var $="",ce=D.split("&"),Ge=0;Ge<ce.length;Ge++){var ie=ce[Ge].split("=");if(1<ie.length){var it=ie[0];ie=ie[1];var ot=it.split("_");$=2<=ot.length&&ot[1]=="type"?$+(it+"="+ie+"&"):$+(it+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+h+`
`+p+`
`+$})}function Kb(a,h,p,v,j,D,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+h+`
`+p+`
`+D+" "+$})}function Bs(a,h,p,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Qb(a,p)+(v?" "+v:"")})}function Gb(a,h){a.info(function(){return"TIMEOUT: "+h})}oo.prototype.info=function(){};function Qb(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var D=j[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return ld(p)}catch{return h}}var ol={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Pg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},hd;function al(){}b(al,ud),al.prototype.g=function(){return new XMLHttpRequest},al.prototype.i=function(){return{}},hd=new al;function pr(a,h,p,v){this.j=a,this.i=h,this.l=p,this.R=v||1,this.U=new no(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new kg}function kg(){this.i=null,this.g="",this.h=!1}var Cg={},fd={};function pd(a,h,p){a.L=1,a.v=dl(Un(h)),a.m=p,a.P=!0,Rg(a,null)}function Rg(a,h){a.F=Date.now(),ll(a),a.A=Un(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Wg(p.i,"t",v),a.C=0,p=a.j.J,a.h=new kg,a.g=cy(a.j,p?h:null,!a.m),0<a.O&&(a.M=new zb(m(a.Y,a,a.g),a.O)),h=a.U,p=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(xg[0]=j.toString()),j=xg);for(var D=0;D<j.length;D++){var $=mg(p,j[D],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),so(),Wb(a.i,a.u,a.A,a.l,a.R,a.m)}pr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Fn(a)==3?h.j():this.Y(a)},pr.prototype.Y=function(a){try{if(a==this.g)e:{const ot=Fn(this.g);var h=this.g.Ba();const Hs=this.g.Z();if(!(3>ot)&&(ot!=3||this.g&&(this.h.h||this.g.oa()||Zg(this.g)))){this.J||ot!=4||h==7||(h==8||0>=Hs?so(3):so(2)),md(this);var p=this.g.Z();this.X=p;t:if(jg(this)){var v=Zg(this.g);a="";var j=v.length,D=Fn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ts(this),ao(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(D&&h==j-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,Kb(this.i,this.u,this.A,this.l,this.R,ot,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,Ge=this.g;if((ce=Ge.g?Ge.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ce)){var ie=ce;break t}}ie=null}if(p=ie)Bs(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,gd(this,p);else{this.o=!1,this.s=3,vt(12),ts(this),ao(this);break e}}if(this.P){p=!0;let sn;for(;!this.J&&this.C<$.length;)if(sn=Yb(this,$),sn==fd){ot==4&&(this.s=4,vt(14),p=!1),Bs(this.i,this.l,null,"[Incomplete Response]");break}else if(sn==Cg){this.s=4,vt(15),Bs(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Bs(this.i,this.l,sn,null),gd(this,sn);if(jg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ot!=4||$.length!=0||this.h.h||(this.s=1,vt(16),p=!1),this.o=this.o&&p,!p)Bs(this.i,this.l,$,"[Invalid Chunked Response]"),ts(this),ao(this);else if(0<$.length&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.ba&&!it.M&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),Ed(it),it.M=!0,vt(11))}}else Bs(this.i,this.l,$,null),gd(this,$);ot==4&&ts(this),this.o&&!this.J&&(ot==4?oy(this.j,this):(this.o=!1,ll(this)))}else f1(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,vt(12)):(this.s=0,vt(13)),ts(this),ao(this)}}}catch{}finally{}};function jg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Yb(a,h){var p=a.C,v=h.indexOf(`
`,p);return v==-1?fd:(p=Number(h.substring(p,v)),isNaN(p)?Cg:(v+=1,v+p>h.length?fd:(h=h.slice(v,v+p),a.C=v+p,h)))}pr.prototype.cancel=function(){this.J=!0,ts(this)};function ll(a){a.S=Date.now()+a.I,Og(a,a.I)}function Og(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=io(m(a.ba,a),h)}function md(a){a.B&&(l.clearTimeout(a.B),a.B=null)}pr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(Gb(this.i,this.A),this.L!=2&&(so(),vt(17)),ts(this),this.s=2,ao(this)):Og(this,this.S-a)};function ao(a){a.j.G==0||a.J||oy(a.j,a)}function ts(a){md(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,Eg(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function gd(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||yd(p.h,a))){if(!a.K&&yd(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)yl(p),ml(p);else break e;xd(p),vt(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=io(m(p.Za,p),6e3));if(1>=Mg(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else rs(p,11)}else if((a.K||p.g==a)&&yl(p),!w(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let ie=j[h];if(p.T=ie[0],ie=ie[1],p.G==2)if(ie[0]=="c"){p.K=ie[1],p.ia=ie[2];const it=ie[3];it!=null&&(p.la=it,p.j.info("VER="+p.la));const ot=ie[4];ot!=null&&(p.Aa=ot,p.j.info("SVER="+p.Aa));const Hs=ie[5];Hs!=null&&typeof Hs=="number"&&0<Hs&&(v=1.5*Hs,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const sn=a.g;if(sn){const _l=sn.g?sn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(_l){var D=v.h;D.g||_l.indexOf("spdy")==-1&&_l.indexOf("quic")==-1&&_l.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(vd(D,D.h),D.h=null))}if(v.D){const Td=sn.g?sn.g.getResponseHeader("X-HTTP-Session-Id"):null;Td&&(v.ya=Td,ge(v.I,v.D,Td))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=a;if(v.qa=uy(v,v.J?v.ia:null,v.W),$.K){Vg(v.h,$);var ce=$,Ge=v.L;Ge&&(ce.I=Ge),ce.B&&(md(ce),ll(ce)),v.g=$}else sy(v);0<p.i.length&&gl(p)}else ie[0]!="stop"&&ie[0]!="close"||rs(p,7);else p.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?rs(p,7):wd(p):ie[0]!="noop"&&p.l&&p.l.ta(ie),p.v=0)}}so(4)}catch{}}var Xb=class{constructor(a,h){this.g=a,this.map=h}};function Dg(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Lg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Mg(a){return a.h?1:a.g?a.g.size:0}function yd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function vd(a,h){a.g?a.g.add(h):a.h=h}function Vg(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Dg.prototype.cancel=function(){if(this.i=Ug(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ug(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return N(a.i)}function Jb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],p=a.length,v=0;v<p;v++)h.push(a[v]);return h}h=[],p=0;for(v in a)h[p++]=a[v];return h}function Zb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const v in a)h[p++]=v;return h}}}function Fg(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=Zb(a),v=Jb(a),j=v.length,D=0;D<j;D++)h.call(void 0,v[D],p&&p[D],a)}var $g=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function e1(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),j=null;if(0<=v){var D=a[p].substring(0,v);j=a[p].substring(v+1)}else D=a[p];h(D,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function ns(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof ns){this.h=a.h,ul(this,a.j),this.o=a.o,this.g=a.g,cl(this,a.s),this.l=a.l;var h=a.i,p=new co;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Bg(this,p),this.m=a.m}else a&&(h=String(a).match($g))?(this.h=!1,ul(this,h[1]||"",!0),this.o=lo(h[2]||""),this.g=lo(h[3]||"",!0),cl(this,h[4]),this.l=lo(h[5]||"",!0),Bg(this,h[6]||"",!0),this.m=lo(h[7]||"")):(this.h=!1,this.i=new co(null,this.h))}ns.prototype.toString=function(){var a=[],h=this.j;h&&a.push(uo(h,zg,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(uo(h,zg,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(uo(p,p.charAt(0)=="/"?r1:n1,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",uo(p,i1)),a.join("")};function Un(a){return new ns(a)}function ul(a,h,p){a.j=p?lo(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function cl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Bg(a,h,p){h instanceof co?(a.i=h,o1(a.i,a.h)):(p||(h=uo(h,s1)),a.i=new co(h,a.h))}function ge(a,h,p){a.i.set(h,p)}function dl(a){return ge(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function lo(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function uo(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,t1),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function t1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var zg=/[#\/\?@]/g,n1=/[#\?:]/g,r1=/[#\?]/g,s1=/[#\?@]/g,i1=/#/g;function co(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function mr(a){a.g||(a.g=new Map,a.h=0,a.i&&e1(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=co.prototype,t.add=function(a,h){mr(this),this.i=null,a=zs(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function qg(a,h){mr(a),h=zs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Hg(a,h){return mr(a),h=zs(a,h),a.g.has(h)}t.forEach=function(a,h){mr(this),this.g.forEach(function(p,v){p.forEach(function(j){a.call(h,j,v,this)},this)},this)},t.na=function(){mr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const j=a[v];for(let D=0;D<j.length;D++)p.push(h[v])}return p},t.V=function(a){mr(this);let h=[];if(typeof a=="string")Hg(this,a)&&(h=h.concat(this.g.get(zs(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return mr(this),this.i=null,a=zs(this,a),Hg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Wg(a,h,p){qg(a,h),0<p.length&&(a.i=null,a.g.set(zs(a,h),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const D=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var j=D;$[v]!==""&&(j+="="+encodeURIComponent(String($[v]))),a.push(j)}}return this.i=a.join("&")};function zs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function o1(a,h){h&&!a.j&&(mr(a),a.i=null,a.g.forEach(function(p,v){var j=v.toLowerCase();v!=j&&(qg(this,v),Wg(this,j,p))},a)),a.j=h}function a1(a,h){const p=new oo;if(l.Image){const v=new Image;v.onload=x(gr,p,"TestLoadImage: loaded",!0,h,v),v.onerror=x(gr,p,"TestLoadImage: error",!1,h,v),v.onabort=x(gr,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=x(gr,p,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function l1(a,h){const p=new oo,v=new AbortController,j=setTimeout(()=>{v.abort(),gr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(j),D.ok?gr(p,"TestPingServer: ok",!0,h):gr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),gr(p,"TestPingServer: error",!1,h)})}function gr(a,h,p,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(p)}catch{}}function u1(){this.g=new Hb}function c1(a,h,p){const v=p||"";try{Fg(a,function(j,D){let $=j;d(j)&&($=ld(j)),h.push(v+D+"="+encodeURIComponent($))})}catch(j){throw h.push(v+"type="+encodeURIComponent("_badmap")),j}}function hl(a){this.l=a.Ub||null,this.j=a.eb||!1}b(hl,ud),hl.prototype.g=function(){return new fl(this.l,this.j)},hl.prototype.i=function(a){return function(){return a}}({});function fl(a,h){st.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(fl,st),t=fl.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,fo(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,ho(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,fo(this)),this.g&&(this.readyState=3,fo(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Kg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Kg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?ho(this):fo(this),this.readyState==3&&Kg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,ho(this))},t.Qa=function(a){this.g&&(this.response=a,ho(this))},t.ga=function(){this.g&&ho(this)};function ho(a){a.readyState=4,a.l=null,a.j=null,a.v=null,fo(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function fo(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(fl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Gg(a){let h="";return V(a,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function _d(a,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Gg(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):ge(a,h,p))}function be(a){st.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(be,st);var d1=/^https?$/i,h1=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():hd.g(),this.v=this.o?Tg(this.o):Tg(hd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Qg(this,D);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)p.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())p.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(h1,h,void 0))||v||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of p)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jg(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Qg(this,D)}};function Qg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Yg(a),pl(a)}function Yg(a){a.A||(a.A=!0,yt(a,"complete"),yt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,yt(this,"complete"),yt(this,"abort"),pl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),pl(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Xg(this):this.bb())},t.bb=function(){Xg(this)};function Xg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Fn(a)!=4||a.Z()!=2)){if(a.u&&Fn(a)==4)_g(a.Ea,0,a);else if(yt(a,"readystatechange"),Fn(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=$===0){var j=String(a.D).match($g)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!d1.test(j?j.toLowerCase():"")}p=v}if(p)yt(a,"complete"),yt(a,"success");else{a.m=6;try{var D=2<Fn(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Yg(a)}}finally{pl(a)}}}}function pl(a,h){if(a.g){Jg(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||yt(a,"ready");try{p.onreadystatechange=v}catch{}}}function Jg(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Fn(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Fn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),qb(h)}};function Zg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function f1(a){const h={};a=(a.g&&2<=Fn(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var p=C(a[v]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=h[j]||[];h[j]=D,D.push(p)}I(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function po(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function ey(a){this.Aa=0,this.i=[],this.j=new oo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=po("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=po("baseRetryDelayMs",5e3,a),this.cb=po("retryDelaySeedMs",1e4,a),this.Wa=po("forwardChannelMaxRetries",2,a),this.wa=po("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Dg(a&&a.concurrentRequestLimit),this.Da=new u1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ey.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,v){vt(0),this.W=a,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=uy(this,null,this.W),gl(this)};function wd(a){if(ty(a),a.G==3){var h=a.U++,p=Un(a.I);if(ge(p,"SID",a.K),ge(p,"RID",h),ge(p,"TYPE","terminate"),mo(a,p),h=new pr(a,a.j,h),h.L=2,h.v=dl(Un(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=cy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),ll(h)}ly(a)}function ml(a){a.g&&(Ed(a),a.g.cancel(),a.g=null)}function ty(a){ml(a),a.u&&(l.clearTimeout(a.u),a.u=null),yl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function gl(a){if(!Lg(a.h)&&!a.s){a.s=!0;var h=a.Ga;On||Z(),z||(On(),z=!0),Q.add(h,a),a.B=0}}function p1(a,h){return Mg(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=io(m(a.Ga,a,h),ay(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new pr(this,this.j,a);let D=this.o;if(this.S&&(D?(D=_(D),T(D,this.S)):D=this.S),this.m!==null||this.O||(j.H=D,D=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=ry(this,j,h),p=Un(this.I),ge(p,"RID",a),ge(p,"CVER",22),this.D&&ge(p,"X-HTTP-Session-Id",this.D),mo(this,p),D&&(this.O?h="headers="+encodeURIComponent(String(Gg(D)))+"&"+h:this.m&&_d(p,this.m,D)),vd(this.h,j),this.Ua&&ge(p,"TYPE","init"),this.P?(ge(p,"$req",h),ge(p,"SID","null"),j.T=!0,pd(j,p,null)):pd(j,p,h),this.G=2}}else this.G==3&&(a?ny(this,a):this.i.length==0||Lg(this.h)||ny(this))};function ny(a,h){var p;h?p=h.l:p=a.U++;const v=Un(a.I);ge(v,"SID",a.K),ge(v,"RID",p),ge(v,"AID",a.T),mo(a,v),a.m&&a.o&&_d(v,a.m,a.o),p=new pr(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=ry(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),vd(a.h,p),pd(p,v,h)}function mo(a,h){a.H&&V(a.H,function(p,v){ge(h,v,p)}),a.l&&Fg({},function(p,v){ge(h,v,p)})}function ry(a,h,p){p=Math.min(a.i.length,p);var v=a.l?m(a.l.Na,a.l,a):null;e:{var j=a.i;let D=-1;for(;;){const $=["count="+p];D==-1?0<p?(D=j[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let ce=!0;for(let Ge=0;Ge<p;Ge++){let ie=j[Ge].g;const it=j[Ge].map;if(ie-=D,0>ie)D=Math.max(0,j[Ge].g-100),ce=!1;else try{c1(it,$,"req"+ie+"_")}catch{v&&v(it)}}if(ce){v=$.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,v}function sy(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;On||Z(),z||(On(),z=!0),Q.add(h,a),a.v=0}}function xd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=io(m(a.Fa,a),ay(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,iy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=io(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,vt(10),ml(this),iy(this))};function Ed(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function iy(a){a.g=new pr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Un(a.qa);ge(h,"RID","rpc"),ge(h,"SID",a.K),ge(h,"AID",a.T),ge(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&ge(h,"TO",a.ja),ge(h,"TYPE","xmlhttp"),mo(a,h),a.m&&a.o&&_d(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=dl(Un(h)),p.m=null,p.P=!0,Rg(p,a)}t.Za=function(){this.C!=null&&(this.C=null,ml(this),xd(this),vt(19))};function yl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function oy(a,h){var p=null;if(a.g==h){yl(a),Ed(a),a.g=null;var v=2}else if(yd(a.h,h))p=h.D,Vg(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;v=il(),yt(v,new Ag(v,p)),gl(a)}else sy(a);else if(j=h.s,j==3||j==0&&0<h.X||!(v==1&&p1(a,h)||v==2&&xd(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),j){case 1:rs(a,5);break;case 4:rs(a,10);break;case 3:rs(a,6);break;default:rs(a,2)}}}function ay(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function rs(a,h){if(a.j.info("Error code "+h),h==2){var p=m(a.fb,a),v=a.Xa;const j=!v;v=new ns(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||ul(v,"https"),dl(v),j?a1(v.toString(),p):l1(v.toString(),p)}else vt(2);a.G=0,a.l&&a.l.sa(h),ly(a),ty(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),vt(2)):(this.j.info("Failed to ping google.com"),vt(1))};function ly(a){if(a.G=0,a.ka=[],a.l){const h=Ug(a.h);(h.length!=0||a.i.length!=0)&&(P(a.ka,h),P(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function uy(a,h,p){var v=p instanceof ns?Un(p):new ns(p);if(v.g!="")h&&(v.g=h+"."+v.g),cl(v,v.s);else{var j=l.location;v=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var D=new ns(null);v&&ul(D,v),h&&(D.g=h),j&&cl(D,j),p&&(D.l=p),v=D}return p=a.D,h=a.ya,p&&h&&ge(v,p,h),ge(v,"VER",a.la),mo(a,v),v}function cy(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new be(new hl({eb:p})):new be(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function dy(){}t=dy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function vl(){}vl.prototype.g=function(a,h){return new Vt(a,h)};function Vt(a,h){st.call(this),this.g=new ey(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new qs(this)}b(Vt,st),Vt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){wd(this.g)},Vt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=ld(a),a=p);h.i.push(new Xb(h.Ya++,a)),h.G==3&&gl(h)},Vt.prototype.N=function(){this.g.l=null,delete this.j,wd(this.g),delete this.g,Vt.aa.N.call(this)};function hy(a){cd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}b(hy,cd);function fy(){dd.call(this),this.status=1}b(fy,dd);function qs(a){this.g=a}b(qs,dy),qs.prototype.ua=function(){yt(this.g,"a")},qs.prototype.ta=function(a){yt(this.g,new hy(a))},qs.prototype.sa=function(a){yt(this.g,new fy)},qs.prototype.ra=function(){yt(this.g,"b")},vl.prototype.createWebChannel=vl.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,VE=function(){return new vl},ME=function(){return il()},LE=es,Sf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ol.NO_ERROR=0,ol.TIMEOUT=8,ol.HTTP_ERROR=6,ou=ol,Pg.COMPLETE="complete",DE=Pg,Ig.EventType=ro,ro.OPEN="a",ro.CLOSE="b",ro.ERROR="c",ro.MESSAGE="d",st.prototype.listen=st.prototype.K,Do=Ig,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,OE=be}).apply(typeof Vl<"u"?Vl:typeof self<"u"?self:typeof window<"u"?window:{});const a0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Yi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ns=new Xp("@firebase/firestore");function Io(){return Ns.logLevel}function H(t,...e){if(Ns.logLevel<=ne.DEBUG){const n=e.map(cm);Ns.debug(`Firestore (${Yi}): ${t}`,...n)}}function ar(t,...e){if(Ns.logLevel<=ne.ERROR){const n=e.map(cm);Ns.error(`Firestore (${Yi}): ${t}`,...n)}}function ji(t,...e){if(Ns.logLevel<=ne.WARN){const n=e.map(cm);Ns.warn(`Firestore (${Yi}): ${t}`,...n)}}function cm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${Yi}) INTERNAL ASSERTION FAILED: `+t;throw ar(e),new Error(e)}function le(t,e){t||G()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends _n{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class zR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class qR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class HR{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new er;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new er,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new er)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new UE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new dt(e)}}class WR{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class KR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new WR(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class GR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class QR{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new GR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=YR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Oi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ze{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ze.fromMillis(Date.now())}static fromDate(e){return ze.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new ze(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new ze(0,0))}static max(){return new Y(new ze(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ta{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ta.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ta?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class pe extends Ta{construct(e,n,r){return new pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new pe(n)}static emptyPath(){return new pe([])}}const XR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ze extends Ta{construct(e,n,r){return new Ze(e,n,r)}static isValidIdentifier(e){return XR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ze.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Ze(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ze(n)}static emptyPath(){return new Ze([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(pe.fromString(e))}static fromName(e){return new W(pe.fromString(e).popFirst(5))}static empty(){return new W(pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new pe(e.slice()))}}function JR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new ze(n+1,0):new ze(n,r));return new Hr(s,W.empty(),e)}function ZR(t){return new Hr(t.readTime,t.key,-1)}class Hr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Hr(Y.min(),W.empty(),-1)}static max(){return new Hr(Y.max(),W.empty(),-1)}}function e2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class n2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==t2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function r2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}dm.oe=-1;function Pc(t){return t==null}function Wu(t){return t===0&&1/t==-1/0}function s2(t){return typeof t=="number"&&Number.isInteger(t)&&!Wu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Us(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function $E(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Je.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Je.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Je.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ul(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ul(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ul(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ul(this.root,e,this.comparator,!0)}}class Ul{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Je{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Je.RED,this.left=s??Je.EMPTY,this.right=i??Je.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Je(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Je.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Je.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Je.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Je.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}Je.EMPTY=null,Je.RED=!0,Je.BLACK=!1;Je.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Je(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof tt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new tt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bt{constructor(e){this.fields=e,e.sort(Ze.comparator)}static empty(){return new Bt([])}unionWith(e){let n=new tt(Ze.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Bt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Oi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new BE("Invalid base64 string: "+i):i}}(e);return new rt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new rt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}rt.EMPTY_BYTE_STRING=new rt("");const i2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Wr(t){if(le(!!t),typeof t=="string"){let e=0;const n=i2.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Re(t.seconds),nanos:Re(t.nanos)}}function Re(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ss(t){return typeof t=="string"?rt.fromBase64String(t):rt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function hm(t){const e=t.mapValue.fields.__previous_value__;return kc(e)?hm(e):e}function Ia(t){const e=Wr(t.mapValue.fields.__local_write_time__.timestampValue);return new ze(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o2{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class ba{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ba("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ba&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fl={mapValue:{}};function As(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?kc(t)?4:l2(t)?9007199254740991:a2(t)?10:11:G()}function kn(t,e){if(t===e)return!0;const n=As(t);if(n!==As(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ia(t).isEqual(Ia(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Wr(s.timestampValue),l=Wr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ss(s.bytesValue).isEqual(Ss(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Re(s.geoPointValue.latitude)===Re(i.geoPointValue.latitude)&&Re(s.geoPointValue.longitude)===Re(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Re(s.integerValue)===Re(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Re(s.doubleValue),l=Re(i.doubleValue);return o===l?Wu(o)===Wu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Oi(t.arrayValue.values||[],e.arrayValue.values||[],kn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(l0(o)!==l0(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!kn(o[c],l[c])))return!1;return!0}(t,e);default:return G()}}function Na(t,e){return(t.values||[]).find(n=>kn(n,e))!==void 0}function Di(t,e){if(t===e)return 0;const n=As(t),r=As(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=Re(i.integerValue||i.doubleValue),c=Re(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return c0(t.timestampValue,e.timestampValue);case 4:return c0(Ia(t),Ia(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ss(i),c=Ss(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=oe(l[d],c[d]);if(f!==0)return f}return oe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(Re(i.latitude),Re(o.latitude));return l!==0?l:oe(Re(i.longitude),Re(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return d0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const g=i.fields||{},m=o.fields||{},x=(l=g.value)===null||l===void 0?void 0:l.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,N=oe(((d=x==null?void 0:x.values)===null||d===void 0?void 0:d.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:d0(x,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Fl.mapValue&&o===Fl.mapValue)return 0;if(i===Fl.mapValue)return 1;if(o===Fl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const m=oe(c[g],f[g]);if(m!==0)return m;const x=Di(l[c[g]],d[f[g]]);if(x!==0)return x}return oe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function c0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Wr(t),r=Wr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function d0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Di(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Li(t){return Af(t)}function Af(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Wr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ss(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Af(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Af(n.fields[o])}`;return s+"}"}(t.mapValue):G()}function Ku(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Pf(t){return!!t&&"integerValue"in t}function fm(t){return!!t&&"arrayValue"in t}function h0(t){return!!t&&"nullValue"in t}function f0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function au(t){return!!t&&"mapValue"in t}function a2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function Yo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Us(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Yo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Yo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function l2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!au(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yo(n)}setAll(e){let n=Ze.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=Yo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());au(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return kn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];au(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Us(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(Yo(this.value))}}function zE(t){const e=[];return Us(t.fields,(n,r)=>{const s=new Ze([n]);if(au(r)){const i=zE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Bt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new ft(e,0,Y.min(),Y.min(),Y.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,Y.min(),Y.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,Y.min(),Y.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mi{constructor(e,n){this.position=e,this.inclusive=n}}function p0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Di(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function m0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!kn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(e,n="asc"){this.field=e,this.dir=n}}function u2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{}class Ue extends qE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new d2(e,n,r):n==="array-contains"?new p2(e,r):n==="in"?new m2(e,r):n==="not-in"?new g2(e,r):n==="array-contains-any"?new y2(e,r):new Ue(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new h2(e,r):new f2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Di(n,this.value)):n!==null&&As(this.value)===As(n)&&this.matchesComparison(Di(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class yn extends qE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new yn(e,n)}matches(e){return HE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function HE(t){return t.op==="and"}function WE(t){return c2(t)&&HE(t)}function c2(t){for(const e of t.filters)if(e instanceof yn)return!1;return!0}function kf(t){if(t instanceof Ue)return t.field.canonicalString()+t.op.toString()+Li(t.value);if(WE(t))return t.filters.map(e=>kf(e)).join(",");{const e=t.filters.map(n=>kf(n)).join(",");return`${t.op}(${e})`}}function KE(t,e){return t instanceof Ue?function(r,s){return s instanceof Ue&&r.op===s.op&&r.field.isEqual(s.field)&&kn(r.value,s.value)}(t,e):t instanceof yn?function(r,s){return s instanceof yn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&KE(o,s.filters[l]),!0):!1}(t,e):void G()}function GE(t){return t instanceof Ue?function(n){return`${n.field.canonicalString()} ${n.op} ${Li(n.value)}`}(t):t instanceof yn?function(n){return n.op.toString()+" {"+n.getFilters().map(GE).join(" ,")+"}"}(t):"Filter"}class d2 extends Ue{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class h2 extends Ue{constructor(e,n){super(e,"in",n),this.keys=QE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class f2 extends Ue{constructor(e,n){super(e,"not-in",n),this.keys=QE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function QE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class p2 extends Ue{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return fm(n)&&Na(n.arrayValue,this.value)}}class m2 extends Ue{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Na(this.value.arrayValue,n)}}class g2 extends Ue{constructor(e,n){super(e,"not-in",n)}matches(e){if(Na(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Na(this.value.arrayValue,n)}}class y2 extends Ue{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!fm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Na(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function g0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new v2(t,e,n,r,s,i,o)}function pm(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>kf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Pc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Li(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Li(r)).join(",")),e.ue=n}return e.ue}function mm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!u2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!KE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!m0(t.startAt,e.startAt)&&m0(t.endAt,e.endAt)}function Cf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function _2(t,e,n,r,s,i,o,l){return new Fs(t,e,n,r,s,i,o,l)}function gm(t){return new Fs(t)}function y0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function ym(t){return t.collectionGroup!==null}function Ti(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new tt(Ze.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new Sa(i,r))}),n.has(Ze.keyField().canonicalString())||e.ce.push(new Sa(Ze.keyField(),r))}return e.ce}function Sn(t){const e=X(t);return e.le||(e.le=w2(e,Ti(t))),e.le}function w2(t,e){if(t.limitType==="F")return g0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Sa(s.field,i)});const n=t.endAt?new Mi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Mi(t.startAt.position,t.startAt.inclusive):null;return g0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rf(t,e){const n=t.filters.concat([e]);return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Gu(t,e,n){return new Fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Cc(t,e){return mm(Sn(t),Sn(e))&&t.limitType===e.limitType}function YE(t){return`${pm(Sn(t))}|lt:${t.limitType}`}function Qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>GE(s)).join(", ")}]`),Pc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Li(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Li(s)).join(",")),`Target(${r})`}(Sn(t))}; limitType=${t.limitType})`}function Rc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Ti(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=p0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,Ti(r),s)||r.endAt&&!function(o,l,c){const d=p0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,Ti(r),s))}(t,e)}function x2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function XE(t){return(e,n)=>{let r=!1;for(const s of Ti(t)){const i=E2(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function E2(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Di(c,d):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Us(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return $E(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Ie(W.comparator);function lr(){return T2}const JE=new Ie(W.comparator);function Lo(...t){let e=JE;for(const n of t)e=e.insert(n.key,n);return e}function ZE(t){let e=JE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function fs(){return Xo()}function eT(){return Xo()}function Xo(){return new Xi(t=>t.toString(),(t,e)=>t.isEqual(e))}const I2=new Ie(W.comparator),b2=new tt(W.comparator);function te(...t){let e=b2;for(const n of t)e=e.add(n);return e}const N2=new tt(oe);function S2(){return N2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wu(e)?"-0":e}}function tT(t){return{integerValue:""+t}}function A2(t,e){return s2(e)?tT(e):vm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(){this._=void 0}}function P2(t,e,n){return t instanceof Aa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&kc(i)&&(i=hm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Vi?rT(t,e):t instanceof Pa?sT(t,e):function(s,i){const o=nT(s,i),l=v0(o)+v0(s.Pe);return Pf(o)&&Pf(s.Pe)?tT(l):vm(s.serializer,l)}(t,e)}function k2(t,e,n){return t instanceof Vi?rT(t,e):t instanceof Pa?sT(t,e):n}function nT(t,e){return t instanceof Qu?function(r){return Pf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Aa extends jc{}class Vi extends jc{constructor(e){super(),this.elements=e}}function rT(t,e){const n=iT(e);for(const r of t.elements)n.some(s=>kn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Pa extends jc{constructor(e){super(),this.elements=e}}function sT(t,e){let n=iT(e);for(const r of t.elements)n=n.filter(s=>!kn(s,r));return{arrayValue:{values:n}}}class Qu extends jc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function v0(t){return Re(t.integerValue||t.doubleValue)}function iT(t){return fm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oT{constructor(e,n){this.field=e,this.transform=n}}function C2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Vi&&s instanceof Vi||r instanceof Pa&&s instanceof Pa?Oi(r.elements,s.elements,kn):r instanceof Qu&&s instanceof Qu?kn(r.Pe,s.Pe):r instanceof Aa&&s instanceof Aa}(t.transform,e.transform)}class R2{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function lu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Oc{}function aT(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new uT(t.key,pn.none()):new Ka(t.key,t.data,pn.none());{const n=t.data,r=Ct.empty();let s=new tt(Ze.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Zr(t.key,r,new Bt(s.toArray()),pn.none())}}function j2(t,e,n){t instanceof Ka?function(s,i,o){const l=s.value.clone(),c=w0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(s,i,o){if(!lu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=w0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(lT(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Jo(t,e,n,r){return t instanceof Ka?function(i,o,l,c){if(!lu(i.precondition,o))return l;const d=i.value.clone(),f=x0(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(i,o,l,c){if(!lu(i.precondition,o))return l;const d=x0(i.fieldTransforms,c,o),f=o.data;return f.setAll(lT(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return lu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function O2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=nT(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function _0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Oi(r,s,(i,o)=>C2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends Oc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Zr extends Oc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function lT(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w0(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,k2(o,l,n[s]))}return r}function x0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,P2(i,o,e))}return r}class uT extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class D2 extends Oc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&j2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Jo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=eT();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=aT(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Oi(this.mutations,e.mutations,(n,r)=>_0(n,r))&&Oi(this.baseMutations,e.baseMutations,(n,r)=>_0(n,r))}}class _m{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return I2}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new _m(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,re;function U2(t){switch(t){default:return G();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function cT(t){if(t===void 0)return ar("GRPC error has no .code"),M.UNKNOWN;switch(t){case Le.OK:return M.OK;case Le.CANCELLED:return M.CANCELLED;case Le.UNKNOWN:return M.UNKNOWN;case Le.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Le.INTERNAL:return M.INTERNAL;case Le.UNAVAILABLE:return M.UNAVAILABLE;case Le.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Le.NOT_FOUND:return M.NOT_FOUND;case Le.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Le.ABORTED:return M.ABORTED;case Le.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Le.DATA_LOSS:return M.DATA_LOSS;default:return G()}}(re=Le||(Le={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function F2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2=new ys([4294967295,4294967295],0);function E0(t){const e=F2().encode(t),n=new jE;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ys([n,r],0),new ys([s,i],0)]}class wm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Mo(`Invalid padding: ${n}`);if(r<0)throw new Mo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Mo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Mo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ys.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ys.fromNumber(r)));return s.compare($2)===1&&(s=new ys([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new wm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=E0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Mo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dc(Y.min(),s,new Ie(oe),lr(),te())}}class Ga{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ga(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class dT{constructor(e,n){this.targetId=e,this.me=n}}class hT{constructor(e,n,r=rt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class I0{constructor(){this.fe=0,this.ge=N0(),this.pe=rt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new Ga(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=N0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class B2{constructor(e){this.Le=e,this.Be=new Map,this.ke=lr(),this.qe=b0(),this.Qe=new Ie(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Cf(i))if(r===0){const o=new W(i.path);this.Ue(n,o,ft.newNoDocument(o,Y.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ss(r).toUint8Array()}catch(c){if(c instanceof BE)return ji("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new wm(o,s,i)}catch(c){return ji(c instanceof Mo?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Cf(l.target)){const c=new W(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ft.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Dc(e,n,this.Qe,this.ke,r);return this.ke=lr(),this.qe=b0(),this.Qe=new Ie(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new I0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new tt(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new I0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function b0(){return new Ie(W.comparator)}function N0(){return new Ie(W.comparator)}const z2={asc:"ASCENDING",desc:"DESCENDING"},q2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H2={and:"AND",or:"OR"};class W2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function jf(t,e){return t.useProto3Json||Pc(e)?e:{value:e}}function Yu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function fT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function K2(t,e){return Yu(t,e.toTimestamp())}function An(t){return le(!!t),Y.fromTimestamp(function(n){const r=Wr(n);return new ze(r.seconds,r.nanos)}(t))}function xm(t,e){return Of(t,e).canonicalString()}function Of(t,e){const n=function(s){return new pe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function pT(t){const e=pe.fromString(t);return le(_T(e)),e}function Df(t,e){return xm(t.databaseId,e.path)}function oh(t,e){const n=pT(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(gT(n))}function mT(t,e){return xm(t.databaseId,e)}function G2(t){const e=pT(t);return e.length===4?pe.emptyPath():gT(e)}function Lf(t){return new pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function gT(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function S0(t,e,n){return{name:Df(t,e),fields:n.value.mapValue.fields}}function Q2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(le(f===void 0||typeof f=="string"),rt.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),rt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?M.UNKNOWN:cT(d.code);return new B(f,d.message||"")}(o);n=new hT(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=oh(t,r.document.name),i=An(r.document.updateTime),o=r.document.createTime?An(r.document.createTime):Y.min(),l=new Ct({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new uu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=oh(t,r.document),i=r.readTime?An(r.readTime):Y.min(),o=ft.newNoDocument(s,i),l=r.removedTargetIds||[];n=new uu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=oh(t,r.document),i=r.removedTargetIds||[];n=new uu([],i,s,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new V2(s,i),l=r.targetId;n=new dT(l,o)}}return n}function Y2(t,e){let n;if(e instanceof Ka)n={update:S0(t,e.key,e.value)};else if(e instanceof uT)n={delete:Df(t,e.key)};else if(e instanceof Zr)n={update:S0(t,e.key,e.data),updateMask:ij(e.fieldMask)};else{if(!(e instanceof D2))return G();n={verify:Df(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof Aa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Vi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Pa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Qu)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:K2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(t,e.precondition)),n}function X2(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?An(s.updateTime):An(i);return o.isEqual(Y.min())&&(o=An(i)),new R2(o,s.transformResults||[])}(n,e))):[]}function J2(t,e){return{documents:[mT(t,e.path)]}}function Z2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=mT(t,s);const i=function(d){if(d.length!==0)return vT(yn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:Ys(m.field),direction:nj(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=jf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function ej(t){let e=G2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const m=yT(g);return m instanceof yn&&WE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(b){return new Sa(Xs(b.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Pc(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(g){const m=!!g.before,x=g.values||[];return new Mi(x,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,x=g.values||[];return new Mi(x,m)}(n.endAt)),_2(e,s,o,i,l,"F",c,d)}function tj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function yT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Xs(n.unaryFilter.field);return Ue.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Xs(n.unaryFilter.field);return Ue.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xs(n.unaryFilter.field);return Ue.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Xs(n.unaryFilter.field);return Ue.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Ue.create(Xs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return yn.create(n.compositeFilter.filters.map(r=>yT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function nj(t){return z2[t]}function rj(t){return q2[t]}function sj(t){return H2[t]}function Ys(t){return{fieldPath:t.canonicalString()}}function Xs(t){return Ze.fromServerFormat(t.fieldPath)}function vT(t){return t instanceof Ue?function(n){if(n.op==="=="){if(f0(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NAN"}};if(h0(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(f0(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NAN"}};if(h0(n.value))return{unaryFilter:{field:Ys(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ys(n.field),op:rj(n.op),value:n.value}}}(t):t instanceof yn?function(n){const r=n.getFilters().map(s=>vT(s));return r.length===1?r[0]:{compositeFilter:{op:sj(n.op),filters:r}}}(t):G()}function ij(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function _T(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr{constructor(e,n,r,s,i=Y.min(),o=Y.min(),l=rt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new kr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new kr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{constructor(e){this.ct=e}}function aj(t){const e=ej({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Gu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(){this.un=new uj}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Hr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Hr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class uj{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new tt(pe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new tt(pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Ui(0)}static kn(){return new Ui(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cj{constructor(){this.changes=new Xi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Jo(r.mutation,s,Bt.empty(),ze.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=fs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Lo();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=fs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=lr();const o=Xo(),l=function(){return Xo()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Zr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Jo(f.mutation,d,f.mutation.getFieldMask(),ze.now())):o.set(d.key,Bt.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return l.set(d,new dj(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Xo();let s=new Ie((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Bt.empty();f=l.applyToLocalView(d,f),r.set(c,f);const g=(s.get(l.batchId)||te()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,g=eT();f.forEach(m=>{if(!i.has(m)){const x=aT(n.get(m),r.get(m));x!==null&&g.set(m,x),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ym(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(fs());let l=-1,c=i;return o.next(d=>U.forEach(d,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,te())).next(f=>({batchId:l,changes:ZE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Lo();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Lo();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(g,m){return new Fs(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let l=Lo();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Jo(f.mutation,d,Bt.empty(),ze.now()),Rc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:An(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:aj(s.bundledQuery),readTime:An(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(){this.overlays=new Ie(W.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=fs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=fs(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=fs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=fs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new M2(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.sessionToken=rt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(){this.Tr=new tt(qe.Er),this.dr=new tt(qe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new qe(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new qe(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new pe([])),r=new qe(n,e),s=new qe(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new qe(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class qe{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gj{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new tt(qe.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new qe(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new qe(n,0),s=new qe(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new tt(oe);return n.forEach(s=>{const i=new qe(s,0),o=new qe(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new qe(new W(i),0);let l=new tt(oe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new qe(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new qe(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yj{constructor(e){this.Mr=e,this.docs=function(){return new Ie(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=lr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=lr();const o=n.path,l=new W(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||e2(ZR(f),r)<=0||(s.has(f.key)||Rc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new vj(this)}getSize(e){return U.resolve(this.size)}}class vj extends cj{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j{constructor(e){this.persistence=e,this.Nr=new Xi(n=>pm(n),mm),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Em,this.targetCount=0,this.kr=Ui.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Ui(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n){this.qr={},this.overlays={},this.Qr=new dm(0),this.Kr=!1,this.Kr=!0,this.$r=new mj,this.referenceDelegate=e(this),this.Ur=new _j(this),this.indexManager=new lj,this.remoteDocumentCache=function(s){return new yj(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new oj(n),this.Gr=new fj(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new pj,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new gj(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new xj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class xj extends n2{constructor(e){super(),this.currentSequenceNumber=e}}class Tm{constructor(e){this.persistence=e,this.Jr=new Em,this.Yr=null}static Zr(e){return new Tm(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Im(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ej{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return aP()?8:r2(gt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Ej;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(Io()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",Qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(Io()<=ne.DEBUG&&H("QueryEngine","Query:",Qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(Io()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",Qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Sn(n))):U.resolve())}Yi(e,n){if(y0(n))return U.resolve(null);let r=Sn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Gu(n,null,"F"),r=Sn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,Gu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return y0(n)||s.isEqual(Y.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(Io()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),Qs(n)),this.rs(e,o,n,JR(s,-1)).next(l=>l))})}ts(e,n){let r=new tt(XE(e));return n.forEach((s,i)=>{Rc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return Io()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",Qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Hr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ij{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ie(oe),this._s=new Xi(i=>pm(i),mm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hj(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function bj(t,e,n,r){return new Ij(t,e,n,r)}async function wT(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=te();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Nj(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const g=d.batch,m=g.keys();let x=U.resolve();return m.forEach(b=>{x=x.next(()=>f.getEntry(c,b)).next(N=>{const P=d.docVersions.get(b);le(P!==null),N.version.compareTo(P)<0&&(g.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),x.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function xT(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function Sj(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const m=s.get(g);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let x=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?x=x.withResumeToken(rt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(x=x.withResumeToken(f.resumeToken,r)),s=s.insert(g,x),function(N,P,E){return N.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(m,x,f)&&l.push(n.Ur.updateTargetData(i,x))});let c=lr(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(Aj(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function Aj(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=lr();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function Pj(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function kj(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new kr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Mf(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Wa(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function A0(t,e,n){const r=X(t);let s=Y.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=X(c),m=g._s.get(f);return m!==void 0?U.resolve(g.os.get(m)):g.Ur.getTargetData(d,f)}(r,o,Sn(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:te())).next(l=>(Cj(r,x2(e),l),{documents:l,Ts:i})))}function Cj(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class P0{constructor(){this.activeTargetIds=S2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Rj{constructor(){this.so=new P0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new P0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $l=null;function ah(){return $l===null?$l=function(){return 268435456+Math.round(2147483648*Math.random())}():$l++,"0x"+$l.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ut="WebChannelConnection";class Lj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=ah(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw ji("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=Oj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ah();return new Promise((o,l)=>{const c=new OE;c.setWithCredentials(!0),c.listenOnce(DE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case ou.NO_ERROR:const f=c.getResponseJson();H(ut,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case ou.TIMEOUT:H(ut,`RPC '${e}' ${i} timed out`),l(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case ou.HTTP_ERROR:const g=c.getStatus();if(H(ut,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const x=m==null?void 0:m.error;if(x&&x.status&&x.message){const b=function(P){const E=P.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(E)>=0?E:M.UNKNOWN}(x.status);l(new B(b,x.message))}else l(new B(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new B(M.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{H(ut,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(ut,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ah(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=VE(),l=ME(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");H(ut,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let m=!1,x=!1;const b=new Dj({Io:P=>{x?H(ut,`Not sending because RPC '${e}' stream ${s} is closed:`,P):(m||(H(ut,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),H(ut,`RPC '${e}' stream ${s} sending:`,P),g.send(P))},To:()=>g.close()}),N=(P,E,w)=>{P.listen(E,y=>{try{w(y)}catch(k){setTimeout(()=>{throw k},0)}})};return N(g,Do.EventType.OPEN,()=>{x||(H(ut,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),N(g,Do.EventType.CLOSE,()=>{x||(x=!0,H(ut,`RPC '${e}' stream ${s} transport closed`),b.So())}),N(g,Do.EventType.ERROR,P=>{x||(x=!0,ji(ut,`RPC '${e}' stream ${s} transport errored:`,P),b.So(new B(M.UNAVAILABLE,"The operation could not be completed")))}),N(g,Do.EventType.MESSAGE,P=>{var E;if(!x){const w=P.data[0];le(!!w);const y=w,k=y.error||((E=y[0])===null||E===void 0?void 0:E.error);if(k){H(ut,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let V=function(S){const T=Le[S];if(T!==void 0)return cT(T)}(L),I=k.message;V===void 0&&(V=M.INTERNAL,I="Unknown error status: "+L+" with message "+k.message),x=!0,b.So(new B(V,I)),g.close()}else H(ut,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),N(l,LE.STAT_EVENT,P=>{P.stat===Sf.PROXY?H(ut,`RPC '${e}' stream ${s} detected buffering proxy`):P.stat===Sf.NOPROXY&&H(ut,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function lh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lc(t){return new W2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ET{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new ET(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ar(n.toString()),ar("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Mj extends TT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=Q2(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?An(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Lf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Cf(c)?{documents:J2(i,c)}:{query:Z2(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=fT(i,o.resumeToken);const d=jf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=Yu(i,o.snapshotVersion.toTimestamp());const d=jf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=tj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Lf(this.serializer),n.removeTarget=e,this.a_(n)}}class Vj extends TT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=X2(e.writeResults,e.commitTime),r=An(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Lf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Y2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Of(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Of(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class Fj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ar(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $j{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{$s(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=X(c);d.L_.add(4),await Qa(d),d.q_.set("Unknown"),d.L_.delete(4),await Mc(d)}(this))})}),this.q_=new Fj(r,s)}}async function Mc(t){if($s(t))for(const e of t.B_)await e(!0)}async function Qa(t){for(const e of t.B_)await e(!1)}function IT(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Am(n)?Sm(n):Ji(n).r_()&&Nm(n,e))}function bm(t,e){const n=X(t),r=Ji(n);n.N_.delete(e),r.r_()&&bT(n,e),n.N_.size===0&&(r.r_()?r.o_():$s(n)&&n.q_.set("Unknown"))}function Nm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ji(t).A_(e)}function bT(t,e){t.Q_.xe(e),Ji(t).R_(e)}function Sm(t){t.Q_=new B2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ji(t).start(),t.q_.v_()}function Am(t){return $s(t)&&!Ji(t).n_()&&t.N_.size>0}function $s(t){return X(t).L_.size===0}function NT(t){t.Q_=void 0}async function Bj(t){t.q_.set("Online")}async function zj(t){t.N_.forEach((e,n)=>{Nm(t,e)})}async function qj(t,e){NT(t),Am(t)?(t.q_.M_(e),Sm(t)):t.q_.set("Unknown")}async function Hj(t,e,n){if(t.q_.set("Online"),e instanceof hT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Xu(t,r)}else if(e instanceof uu?t.Q_.Ke(e):e instanceof dT?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await xT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(rt.EMPTY_BYTE_STRING,f.snapshotVersion)),bT(i,c);const g=new kr(f.target,c,d,f.sequenceNumber);Nm(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Xu(t,r)}}async function Xu(t,e,n){if(!Wa(e))throw e;t.L_.add(1),await Qa(t),t.q_.set("Offline"),n||(n=()=>xT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Mc(t)})}function ST(t,e){return e().catch(n=>Xu(t,n,e))}async function Vc(t){const e=X(t),n=Kr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Wj(e);)try{const s=await Pj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Kj(e,s)}catch(s){await Xu(e,s)}AT(e)&&PT(e)}function Wj(t){return $s(t)&&t.O_.length<10}function Kj(t,e){t.O_.push(e);const n=Kr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function AT(t){return $s(t)&&!Kr(t).n_()&&t.O_.length>0}function PT(t){Kr(t).start()}async function Gj(t){Kr(t).p_()}async function Qj(t){const e=Kr(t);for(const n of t.O_)e.m_(n.mutations)}async function Yj(t,e,n){const r=t.O_.shift(),s=_m.from(r,e,n);await ST(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Vc(t)}async function Xj(t,e){e&&Kr(t).V_&&await async function(r,s){if(function(o){return U2(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();Kr(r).s_(),await ST(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Vc(r)}}(t,e),AT(t)&&PT(t)}async function C0(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=$s(n);n.L_.add(3),await Qa(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Mc(n)}async function Jj(t,e){const n=X(t);e?(n.L_.delete(2),await Mc(n)):e||(n.L_.add(2),await Qa(n),n.q_.set("Unknown"))}function Ji(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new Mj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Bj.bind(null,t),Ro:zj.bind(null,t),mo:qj.bind(null,t),d_:Hj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Am(t)?Sm(t):t.q_.set("Unknown")):(await t.K_.stop(),NT(t))})),t.K_}function Kr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new Vj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Gj.bind(null,t),mo:Xj.bind(null,t),f_:Qj.bind(null,t),g_:Yj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Vc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new er,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new Pm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function km(t,e){if(ar("AsyncQueue",`${e}: ${t}`),Wa(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Lo(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new Ii(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ii;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.W_=new Ie(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Fi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Fi(e,n,Ii.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Cc(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class eO{constructor(){this.queries=j0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=j0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function j0(){return new Xi(t=>YE(t),Cc)}async function kT(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Zj,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=km(o,`Initialization of query '${Qs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Cm(n)}async function CT(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tO(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Cm(n)}function nO(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Cm(t){t.Y_.forEach(e=>{e.next()})}var Vf,O0;(O0=Vf||(Vf={})).ea="default",O0.Cache="cache";class RT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Fi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Fi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==Vf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(e){this.key=e}}class OT{constructor(e){this.key=e}}class rO{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=XE(e),this.Ra=new Ii(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new R0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const m=s.get(f),x=Rc(this.query,g)?g:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!x&&(x.hasLocalMutations||this.mutatedKeys.has(x.key)&&x.hasCommittedMutations);let P=!1;m&&x?m.data.isEqual(x.data)?b!==N&&(r.track({type:3,doc:x}),P=!0):this.ga(m,x)||(r.track({type:2,doc:x}),P=!0,(c&&this.Aa(x,c)>0||d&&this.Aa(x,d)<0)&&(l=!0)):!m&&x?(r.track({type:0,doc:x}),P=!0):m&&!x&&(r.track({type:1,doc:m}),P=!0,(c||d)&&(l=!0)),P&&(x?(o=o.add(x),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(x,b){const N=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return N(x)-N(b)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Fi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new R0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new OT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new jT(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Fi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class sO{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class iO{constructor(e){this.key=e,this.va=!1}}class oO{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Xi(l=>YE(l),Cc),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(W.comparator),this.Na=new Map,this.La=new Em,this.Ba={},this.ka=new Map,this.qa=Ui.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function aO(t,e,n=!0){const r=FT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await DT(r,e,n,!0),s}async function lO(t,e){const n=FT(t);await DT(n,e,!0,!1)}async function DT(t,e,n,r){const s=await kj(t.localStore,Sn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await uO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&IT(t.remoteStore,s),l}async function uO(t,e,n,r,s){t.Ka=(g,m,x)=>async function(N,P,E,w){let y=P.view.ma(E);y.ns&&(y=await A0(N.localStore,P.query,!1).then(({documents:I})=>P.view.ma(I,y)));const k=w&&w.targetChanges.get(P.targetId),L=w&&w.targetMismatches.get(P.targetId)!=null,V=P.view.applyChanges(y,N.isPrimaryClient,k,L);return L0(N,P.targetId,V.wa),V.snapshot}(t,g,m,x);const i=await A0(t.localStore,e,!0),o=new rO(e,i.Ts),l=o.ma(i.documents),c=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);L0(t,n,d.wa);const f=new sO(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function cO(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Cc(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Mf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&bm(r.remoteStore,s.targetId),Uf(r,s.targetId)}).catch(Ha)):(Uf(r,s.targetId),await Mf(r.localStore,s.targetId,!0))}async function dO(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),bm(n.remoteStore,r.targetId))}async function hO(t,e,n){const r=_O(t);try{const s=await function(o,l){const c=X(o),d=ze.now(),f=l.reduce((x,b)=>x.add(b.key),te());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",x=>{let b=lr(),N=te();return c.cs.getEntries(x,f).next(P=>{b=P,b.forEach((E,w)=>{w.isValidDocument()||(N=N.add(E))})}).next(()=>c.localDocuments.getOverlayedDocuments(x,b)).next(P=>{g=P;const E=[];for(const w of l){const y=O2(w,g.get(w.key).overlayedDocument);y!=null&&E.push(new Zr(w.key,y,zE(y.value.mapValue),pn.exists(!0)))}return c.mutationQueue.addMutationBatch(x,d,E,l)}).next(P=>{m=P;const E=P.applyToLocalDocumentSet(g,N);return c.documentOverlayCache.saveOverlays(x,P.batchId,E)})}).then(()=>({batchId:m.batchId,changes:ZE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(oe)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ya(r,s.changes),await Vc(r.remoteStore)}catch(s){const i=km(s,"Failed to persist write");n.reject(i)}}async function LT(t,e){const n=X(t);try{const r=await Sj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Ya(n,r,e)}catch(r){await Ha(r)}}function D0(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=X(o);c.onlineState=l;let d=!1;c.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(l)&&(d=!0)}),d&&Cm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function fO(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ie(W.comparator);o=o.insert(i,ft.newNoDocument(i,Y.min()));const l=te().add(i),c=new Dc(Y.min(),new Map,new Ie(oe),o,l);await LT(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Rm(r)}else await Mf(r.localStore,e,!1).then(()=>Uf(r,e,n)).catch(Ha)}async function pO(t,e){const n=X(t),r=e.batch.batchId;try{const s=await Nj(n.localStore,e);VT(n,r,null),MT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ya(n,s)}catch(s){await Ha(s)}}async function mO(t,e,n){const r=X(t);try{const s=await function(o,l){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(le(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);VT(r,e,n),MT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ya(r,s)}catch(s){await Ha(s)}}function MT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function VT(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Uf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||UT(t,r)})}function UT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(bm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Rm(t))}function L0(t,e,n){for(const r of n)r instanceof jT?(t.La.addReference(r.key,e),gO(t,r)):r instanceof OT?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||UT(t,r.key)):G()}function gO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Rm(t))}function Rm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(pe.fromString(e)),r=t.qa.next();t.Na.set(r,new iO(n)),t.Oa=t.Oa.insert(n,r),IT(t.remoteStore,new kr(Sn(gm(n.path)),r,"TargetPurposeLimboResolution",dm.oe))}}async function Ya(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=Im.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=X(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,m=>U.forEach(m.$i,x=>f.persistence.referenceDelegate.addReference(g,m.targetId,x)).next(()=>U.forEach(m.Ui,x=>f.persistence.referenceDelegate.removeReference(g,m.targetId,x)))))}catch(g){if(!Wa(g))throw g;H("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const x=f.os.get(m),b=x.snapshotVersion,N=x.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(m,N)}}}(r.localStore,i))}async function yO(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await wT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ya(n,r.hs)}}function vO(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function FT(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=vO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=fO.bind(null,e),e.Ca.d_=tO.bind(null,e.eventManager),e.Ca.$a=nO.bind(null,e.eventManager),e}function _O(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=pO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=mO.bind(null,e),e}class Ju{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Lc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return bj(this.persistence,new Tj,e.initialUser,this.serializer)}Ga(e){return new wj(Tm.Zr,this.serializer)}Wa(e){return new Rj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Ju.provider={build:()=>new Ju};class Ff{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>D0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yO.bind(null,this.syncEngine),await Jj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new eO}()}createDatastore(e){const n=Lc(e.databaseInfo.databaseId),r=function(i){return new Lj(i)}(e.databaseInfo);return function(i,o,l,c){return new Uj(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new $j(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>D0(this.syncEngine,n,0),function(){return k0.D()?new k0:new jj}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const g=new oO(s,i,o,l,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Qa(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Ff.provider={build:()=>new Ff};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ar("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=FE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new er;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=km(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function uh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await wT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function M0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await xO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>C0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>C0(e.remoteStore,s)),t._onlineComponents=e}async function xO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await uh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;ji("Error using user provided cache. Falling back to memory cache: "+n),await uh(t,new Ju)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await uh(t,new Ju);return t._offlineComponents}async function BT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await M0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await M0(t,new Ff))),t._onlineComponents}function EO(t){return BT(t).then(e=>e.syncEngine)}async function zT(t){const e=await BT(t),n=e.eventManager;return n.onListen=aO.bind(null,e.syncEngine),n.onUnlisten=cO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=lO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=dO.bind(null,e.syncEngine),n}function TO(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new $T({next:m=>{f.Za(),o.enqueueAndForget(()=>CT(i,g));const x=m.docs.has(l);!x&&m.fromCache?d.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):x&&m.fromCache&&c&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new RT(gm(l.path),f,{includeMetadataChanges:!0,_a:!0});return kT(i,g)}(await zT(t),t.asyncQueue,e,n,r)),r.promise}function IO(t,e,n={}){const r=new er;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new $T({next:m=>{f.Za(),o.enqueueAndForget(()=>CT(i,g)),m.fromCache&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new RT(l,f,{includeMetadataChanges:!0,_a:!0});return kT(i,g)}(await zT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HT(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bO(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function U0(t){if(!W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function F0(t){if(W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Uc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Cn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Uc(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function NO(t,e){if(e<=0)throw new B(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Fc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new zR;switch(r.type){case"firstParty":return new KR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=V0.get(n);r&&(H("ComponentProvider","Removing Datastore"),V0.delete(n),r.terminate())}(this),Promise.resolve()}}function SO(t,e,n,r={}){var s;const i=(t=Cn(t,Fc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&ji("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=dt.MOCK_USER;else{l=Wx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(d)}t._authCredentials=new qR(new UE(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new fr(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class Br extends fr{constructor(e,n,r){super(e,n,gm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new W(e))}withConverter(e){return new Br(this.firestore,e,this._path)}}function Cr(t,e,...n){if(t=fe(t),HT("collection","path",e),t instanceof Fc){const r=pe.fromString(e,...n);return F0(r),new Br(t,null,r)}{if(!(t instanceof bt||t instanceof Br))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return F0(r),new Br(t.firestore,null,r)}}function Me(t,e,...n){if(t=fe(t),arguments.length===1&&(e=FE.newId()),HT("doc","path",e),t instanceof Fc){const r=pe.fromString(e,...n);return U0(r),new bt(t,null,new W(r))}{if(!(t instanceof bt||t instanceof Br))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(pe.fromString(e,...n));return U0(r),new bt(t.firestore,t instanceof Br?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new ET(this,"async_queue_retry"),this.Vu=()=>{const r=lh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=lh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=lh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new er;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Wa(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw ar("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Pm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Zi extends Fc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new B0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,await e}}}function AO(t,e){const n=typeof t=="object"?t:bc(),r=typeof t=="string"?t:"(default)",s=Ms(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=zx("firestore");i&&SO(s,...i)}return s}function jm(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||PO(t),t._firestoreClient}function PO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new o2(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,qT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new wO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $i(rt.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new $i(rt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ze(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kO=/^__.*__$/;class CO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}class WT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function KT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Bc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Bc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(KT(this.Cu)&&kO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class RO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Lc(e)}Qu(e,n,r,s=!1){return new Bc({Cu:e,methodName:n,qu:r,path:Ze.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ja(t){const e=t._freezeSettings(),n=Lc(t._databaseId);return new RO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Vm("Data must be an object, but it was:",o,r);const l=YT(r,o);let c,d;if(i.merge)c=new Bt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const m=$f(e,g,n);if(!o.contains(m))throw new B(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);JT(f,m)||f.push(m)}c=new Bt(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new CO(new Ct(l),c,d)}class zc extends Xa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zc}}function jO(t,e,n){return new Bc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Lm extends Xa{_toFieldTransform(e){return new oT(e.path,new Aa)}isEqual(e){return e instanceof Lm}}class Mm extends Xa{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=jO(this,e,!0),r=this.Ku.map(i=>eo(i,n)),s=new Vi(r);return new oT(e.path,s)}isEqual(e){return e instanceof Mm&&wa(this.Ku,e.Ku)}}function OO(t,e,n,r){const s=t.Qu(1,e,n);Vm("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();Us(r,(c,d)=>{const f=Um(e,c,n);d=fe(d);const g=s.Nu(f);if(d instanceof zc)i.push(f);else{const m=eo(d,g);m!=null&&(i.push(f),o.set(f,m))}});const l=new Bt(i);return new WT(o,l,s.fieldTransforms)}function DO(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[$f(e,r,n)],c=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push($f(e,i[m])),c.push(i[m+1]);const d=[],f=Ct.empty();for(let m=l.length-1;m>=0;--m)if(!JT(d,l[m])){const x=l[m];let b=c[m];b=fe(b);const N=o.Nu(x);if(b instanceof zc)d.push(x);else{const P=eo(b,N);P!=null&&(d.push(x),f.set(x,P))}}const g=new Bt(d);return new WT(f,g,o.fieldTransforms)}function QT(t,e,n,r=!1){return eo(n,t.Qu(r?4:3,e))}function eo(t,e){if(XT(t=fe(t)))return Vm("Unsupported field value:",e,t),YT(t,e);if(t instanceof Xa)return function(r,s){if(!KT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=eo(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=fe(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return A2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=ze.fromDate(r);return{timestampValue:Yu(s.serializer,i)}}if(r instanceof ze){const i=new ze(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Yu(s.serializer,i)}}if(r instanceof Om)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof $i)return{bytesValue:fT(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:xm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Dm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return vm(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Uc(r)}`)}(t,e)}function YT(t,e){const n={};return $E(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Us(t,(r,s)=>{const i=eo(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function XT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof ze||t instanceof Om||t instanceof $i||t instanceof bt||t instanceof Xa||t instanceof Dm)}function Vm(t,e,n){if(!XT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Uc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function $f(t,e,n){if((e=fe(e))instanceof $c)return e._internalPath;if(typeof e=="string")return Um(t,e);throw Zu("Field path arguments must be of type string or ",t,!1,void 0,n)}const LO=new RegExp("[~\\*/\\[\\]]");function Um(t,e,n){if(e.search(LO)>=0)throw Zu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new $c(...e.split("."))._internalPath}catch{throw Zu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Zu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new B(M.INVALID_ARGUMENT,l+t+c)}function JT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new MO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(qc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class MO extends Fm{data(){return super.data()}}function qc(t,e){return typeof e=="string"?Um(t,e):e instanceof $c?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class $m{}class Hc extends $m{}function Bf(t,e,...n){let r=[];e instanceof $m&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Bm).length,l=i.filter(c=>c instanceof Wc).length;if(o>1||o>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Wc extends Hc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Wc(e,n,r)}_apply(e){const n=this._parse(e);return ZT(e._query,n),new fr(e.firestore,e.converter,Rf(e._query,n))}_parse(e){const n=Ja(e.firestore);return function(i,o,l,c,d,f,g){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){q0(g,f);const x=[];for(const b of g)x.push(z0(c,i,b));m={arrayValue:{values:x}}}else m=z0(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||q0(g,f),m=QT(l,o,g,f==="in"||f==="not-in");return Ue.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function hi(t,e,n){const r=e,s=qc("where",t);return Wc._create(s,r,n)}class Bm extends $m{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Bm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:yn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)ZT(o,c),o=Rf(o,c)}(e._query,n),new fr(e.firestore,e.converter,Rf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zm extends Hc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new zm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Sa(i,o)}(e._query,this._field,this._direction);return new fr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Fs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function zf(t,e="asc"){const n=e,r=qc("orderBy",t);return zm._create(r,n)}class qm extends Hc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new qm(e,n,r)}_apply(e){return new fr(e.firestore,e.converter,Gu(e._query,this._limit,this._limitType))}}function UO(t){return NO("limit",t),qm._create("limit",t,"F")}class Hm extends Hc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Hm(e,n,r)}_apply(e){const n=$O(e,this.type,this._docOrFields,this._inclusive);return new fr(e.firestore,e.converter,function(s,i){return new Fs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function FO(...t){return Hm._create("startAfter",t,!1)}function $O(t,e,n,r){if(n[0]=fe(n[0]),n[0]instanceof Fm)return function(i,o,l,c,d){if(!c)throw new B(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const g of Ti(i))if(g.field.isKeyField())f.push(Ku(o,c.key));else{const m=c.data.field(g.field);if(kc(m))throw new B(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const x=g.field.canonicalString();throw new B(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${x}' (used as the orderBy) does not exist.`)}f.push(m)}return new Mi(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ja(t.firestore);return function(o,l,c,d,f,g){const m=o.explicitOrderBy;if(f.length>m.length)throw new B(M.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const x=[];for(let b=0;b<f.length;b++){const N=f[b];if(m[b].field.isKeyField()){if(typeof N!="string")throw new B(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof N}`);if(!ym(o)&&N.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${N}' contains a slash.`);const P=o.path.child(pe.fromString(N));if(!W.isDocumentKey(P))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const E=new W(P);x.push(Ku(l,E))}else{const P=QT(c,d,N);x.push(P)}}return new Mi(x,g)}(t._query,t.firestore._databaseId,s,e,n,r)}}function z0(t,e,n){if(typeof(n=fe(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ym(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(pe.fromString(n));if(!W.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Ku(t,new W(r))}if(n instanceof bt)return Ku(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Uc(n)}.`)}function q0(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class BO{convertValue(e,n="none"){switch(As(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Re(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Us(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Re(o.doubleValue));return new Dm(i)}convertGeoPoint(e){return new Om(Re(e.latitude),Re(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=hm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ia(e));default:return null}}convertTimestamp(e){const n=Wr(e);return new ze(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=pe.fromString(e);le(_T(r));const s=new ba(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||ar(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eI(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tI extends Fm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new cu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(qc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class cu extends tI{data(e={}){return super.data(e)}}class zO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Vo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new cu(this._firestore,this._userDataWriter,r.key,r,new Vo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new cu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new cu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Vo(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:qO(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function qO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gr(t){t=Cn(t,bt);const e=Cn(t.firestore,Zi);return TO(jm(e),t._key).then(n=>HO(e,t,n))}class nI extends BO{constructor(e){super(),this.firestore=e}convertBytes(e){return new $i(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function ec(t){t=Cn(t,fr);const e=Cn(t.firestore,Zi),n=jm(e),r=new nI(e);return VO(t._query),IO(n,t._query).then(s=>new zO(e,r,t,s))}function qf(t,e,n){t=Cn(t,bt);const r=Cn(t.firestore,Zi),s=eI(t.converter,e);return Wm(r,[GT(Ja(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,pn.none())])}function Pn(t,e,n,...r){t=Cn(t,bt);const s=Cn(t.firestore,Zi),i=Ja(s);let o;return o=typeof(e=fe(e))=="string"||e instanceof $c?DO(i,"updateDoc",t._key,e,n,r):OO(i,"updateDoc",t._key,e),Wm(s,[o.toMutation(t._key,pn.exists(!0))])}function tc(t,e){const n=Cn(t.firestore,Zi),r=Me(t),s=eI(t.converter,e);return Wm(n,[GT(Ja(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,pn.exists(!1))]).then(()=>r)}function Wm(t,e){return function(r,s){const i=new er;return r.asyncQueue.enqueueAndForget(async()=>hO(await EO(r),s,i)),i.promise}(jm(t),e)}function HO(t,e,n){const r=n.docs.get(e._key),s=new nI(t);return new tI(t,s,e._key,r,new Vo(n.hasPendingWrites,n.fromCache),e.converter)}function Oe(){return new Lm("serverTimestamp")}function rI(...t){return new Mm("arrayUnion",t)}(function(e,n=!0){(function(s){Yi=s})(Vs),gn(new tn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Zi(new HR(r.getProvider("auth-internal")),new QR(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ba(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Mt(a0,"4.7.3",e),Mt(a0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sI="firebasestorage.googleapis.com",iI="storageBucket",WO=2*60*1e3,KO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae extends _n{constructor(e,n,r=0){super(ch(e),`Firebase Storage: ${n} (${ch(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Ae.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ch(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Se;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Se||(Se={}));function ch(t){return"storage/"+t}function Km(){const t="An unknown error occurred, please check the error payload for server response.";return new Ae(Se.UNKNOWN,t)}function GO(t){return new Ae(Se.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function QO(t){return new Ae(Se.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function YO(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Ae(Se.UNAUTHENTICATED,t)}function XO(){return new Ae(Se.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function JO(t){return new Ae(Se.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ZO(){return new Ae(Se.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function eD(){return new Ae(Se.CANCELED,"User canceled the upload/download.")}function tD(t){return new Ae(Se.INVALID_URL,"Invalid URL '"+t+"'.")}function nD(t){return new Ae(Se.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function rD(){return new Ae(Se.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+iI+"' property when initializing the app?")}function sD(){return new Ae(Se.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function iD(){return new Ae(Se.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function oD(t){return new Ae(Se.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Hf(t){return new Ae(Se.INVALID_ARGUMENT,t)}function oI(){return new Ae(Se.APP_DELETED,"The Firebase app was deleted.")}function aD(t){return new Ae(Se.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Zo(t,e){return new Ae(Se.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function bo(t){throw new Ae(Se.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zt{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=zt.makeFromUrl(e,n)}catch{return new zt(e,"")}if(r.path==="")return r;throw nD(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",x=new RegExp(`^https?://${g}/${f}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},N=n===sI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",E=new RegExp(`^https?://${N}/${s}/${P}`,"i"),y=[{regex:l,indices:c,postModify:i},{regex:x,indices:b,postModify:d},{regex:E,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<y.length;k++){const L=y[k],V=L.regex.exec(e);if(V){const I=V[L.indices.bucket];let _=V[L.indices.path];_||(_=""),r=new zt(I,_),L.postModify(r);break}}if(r==null)throw tD(e);return r}}class lD{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uD(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function f(...P){d||(d=!0,e.apply(null,P))}function g(P){s=setTimeout(()=>{s=null,t(x,c())},P)}function m(){i&&clearTimeout(i)}function x(P,...E){if(d){m();return}if(P){m(),f.call(null,P,...E);return}if(c()||o){m(),f.call(null,P,...E);return}r<64&&(r*=2);let y;l===1?(l=2,y=0):y=(r+Math.random())*1e3,g(y)}let b=!1;function N(P){b||(b=!0,m(),!d&&(s!==null?(P||(l=2),clearTimeout(s),g(0)):P||(l=1)))}return g(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function cD(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dD(t){return t!==void 0}function hD(t){return typeof t=="object"&&!Array.isArray(t)}function Gm(t){return typeof t=="string"||t instanceof String}function H0(t){return Qm()&&t instanceof Blob}function Qm(){return typeof Blob<"u"}function W0(t,e,n,r){if(r<e)throw Hf(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Hf(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ym(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function aI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var vs;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(vs||(vs={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fD(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pD{constructor(e,n,r,s,i,o,l,c,d,f,g,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((x,b)=>{this.resolve_=x,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Bl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===vs.NO_ERROR,c=i.getStatus();if(!l||fD(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===vs.ABORT;r(!1,new Bl(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Bl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());dD(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=Km();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?oI():eD();o(c)}else{const c=ZO();o(c)}};this.canceled_?n(!1,new Bl(!1,null,!0)):this.backoffId_=uD(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&cD(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Bl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function mD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function gD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function yD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function vD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function _D(t,e,n,r,s,i,o=!0){const l=aI(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return yD(d,e),mD(d,n),gD(d,i),vD(d,r),new pD(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wD(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function xD(...t){const e=wD();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Qm())return new Blob(t);throw new Ae(Se.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function ED(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TD(t){if(typeof atob>"u")throw oD("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class dh{constructor(e,n){this.data=e,this.contentType=n||null}}function ID(t,e){switch(t){case Tn.RAW:return new dh(lI(e));case Tn.BASE64:case Tn.BASE64URL:return new dh(uI(t,e));case Tn.DATA_URL:return new dh(ND(e),SD(e))}throw Km()}function lI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function bD(t){let e;try{e=decodeURIComponent(t)}catch{throw Zo(Tn.DATA_URL,"Malformed data URL.")}return lI(e)}function uI(t,e){switch(t){case Tn.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw Zo(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case Tn.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw Zo(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=TD(e)}catch(s){throw s.message.includes("polyfill")?s:Zo(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class cI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Zo(Tn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=AD(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function ND(t){const e=new cI(t);return e.base64?uI(Tn.BASE64,e.rest):bD(e.rest)}function SD(t){return new cI(t).contentType}function AD(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nr{constructor(e,n){let r=0,s="";H0(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(H0(this.data_)){const r=this.data_,s=ED(r,e,n);return s===null?null:new Nr(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new Nr(r,!0)}}static getBlob(...e){if(Qm()){const n=e.map(r=>r instanceof Nr?r.data_:r);return new Nr(xD.apply(null,n))}else{const n=e.map(o=>Gm(o)?ID(Tn.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)s[i++]=o[l]}),new Nr(s,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(t){let e;try{e=JSON.parse(t)}catch{return null}return hD(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function kD(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function hI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CD(t,e){return e}class _t{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||CD}}let zl=null;function RD(t){return!Gm(t)||t.length<2?t:hI(t)}function fI(){if(zl)return zl;const t=[];t.push(new _t("bucket")),t.push(new _t("generation")),t.push(new _t("metageneration")),t.push(new _t("name","fullPath",!0));function e(i,o){return RD(o)}const n=new _t("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new _t("size");return s.xform=r,t.push(s),t.push(new _t("timeCreated")),t.push(new _t("updated")),t.push(new _t("md5Hash",null,!0)),t.push(new _t("cacheControl",null,!0)),t.push(new _t("contentDisposition",null,!0)),t.push(new _t("contentEncoding",null,!0)),t.push(new _t("contentLanguage",null,!0)),t.push(new _t("contentType",null,!0)),t.push(new _t("metadata","customMetadata",!0)),zl=t,zl}function jD(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new zt(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function OD(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return jD(r,t),r}function pI(t,e,n){const r=dI(e);return r===null?null:OD(t,r,n)}function DD(t,e,n,r){const s=dI(e);if(s===null||!Gm(s.downloadTokens))return null;const i=s.downloadTokens;if(i.length===0)return null;const o=encodeURIComponent;return i.split(",").map(d=>{const f=t.bucket,g=t.fullPath,m="/b/"+o(f)+"/o/"+o(g),x=Ym(m,n,r),b=aI({alt:"media",token:d});return x+b})[0]}function LD(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class mI{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gI(t){if(!t)throw Km()}function MD(t,e){function n(r,s){const i=pI(t,s,e);return gI(i!==null),i}return n}function VD(t,e){function n(r,s){const i=pI(t,s,e);return gI(i!==null),DD(i,s,t.host,t._protocol)}return n}function yI(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=XO():s=YO():n.getStatus()===402?s=QO(t.bucket):n.getStatus()===403?s=JO(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function UD(t){const e=yI(t);function n(r,s){let i=e(r,s);return r.getStatus()===404&&(i=GO(t.path)),i.serverResponse=s.serverResponse,i}return n}function FD(t,e,n){const r=e.fullServerUrl(),s=Ym(r,t.host,t._protocol),i="GET",o=t.maxOperationRetryTime,l=new mI(s,i,VD(t,n),o);return l.errorHandler=UD(e),l}function $D(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function BD(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=$D(null,e)),r}function zD(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let y="";for(let k=0;k<2;k++)y=y+Math.random().toString().slice(2);return y}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=BD(e,r,s),f=LD(d,n),g="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,m=`\r
--`+c+"--",x=Nr.getBlob(g,r,m);if(x===null)throw sD();const b={name:d.fullPath},N=Ym(i,t.host,t._protocol),P="POST",E=t.maxUploadRetryTime,w=new mI(N,P,MD(t,n),E);return w.urlParams=b,w.headers=o,w.body=x.uploadData(),w.errorHandler=yI(e),w}class qD{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=vs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=vs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=vs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s){if(this.sent_)throw bo("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const i in s)s.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,s[i].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bo("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bo("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw bo("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bo("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class HD extends qD{initXhr(){this.xhr_.responseType="text"}}function vI(){return new HD}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(e,n){this._service=e,n instanceof zt?this._location=n:this._location=zt.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Ps(e,n)}get root(){const e=new zt(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return hI(this._location.path)}get storage(){return this._service}get parent(){const e=PD(this._location.path);if(e===null)return null;const n=new zt(this._location.bucket,e);return new Ps(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw aD(e)}}function WD(t,e,n){t._throwIfRoot("uploadBytes");const r=zD(t.storage,t._location,fI(),new Nr(e,!0),n);return t.storage.makeRequestWithTokens(r,vI).then(s=>({metadata:s,ref:t}))}function KD(t){t._throwIfRoot("getDownloadURL");const e=FD(t.storage,t._location,fI());return t.storage.makeRequestWithTokens(e,vI).then(n=>{if(n===null)throw iD();return n})}function GD(t,e){const n=kD(t._location.path,e),r=new zt(t._location.bucket,n);return new Ps(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QD(t){return/^[A-Za-z]+:\/\//.test(t)}function YD(t,e){return new Ps(t,e)}function _I(t,e){if(t instanceof Xm){const n=t;if(n._bucket==null)throw rD();const r=new Ps(n,n._bucket);return e!=null?_I(r,e):r}else return e!==void 0?GD(t,e):t}function XD(t,e){if(e&&QD(e)){if(t instanceof Xm)return YD(t,e);throw Hf("To use ref(service, url), the first argument must be a Storage instance.")}else return _I(t,e)}function K0(t,e){const n=e==null?void 0:e[iI];return n==null?null:zt.makeFromBucketSpec(n,t)}function JD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Wx(s,t.app.options.projectId))}class Xm{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=sI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=WO,this._maxUploadRetryTime=KO,this._requests=new Set,s!=null?this._bucket=zt.makeFromBucketSpec(s,this._host):this._bucket=K0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=zt.makeFromBucketSpec(this._url,e):this._bucket=K0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){W0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Ps(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new lD(oI());{const o=_D(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const G0="@firebase/storage",Q0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI="storage";function ZD(t,e,n){return t=fe(t),WD(t,e,n)}function eL(t){return t=fe(t),KD(t)}function tL(t,e){return t=fe(t),XD(t,e)}function nL(t=bc(),e){t=fe(t);const r=Ms(t,wI).getImmediate({identifier:e}),s=zx("storage");return s&&rL(r,...s),r}function rL(t,e,n,r={}){JD(t,e,n,r)}function sL(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Xm(n,r,s,e,Vs)}function iL(){gn(new tn(wI,sL,"PUBLIC").setMultipleInstances(!0)),Mt(G0,Q0,""),Mt(G0,Q0,"esm2017")}iL();const xI="@firebase/installations",Jm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EI=1e4,TI=`w:${Jm}`,II="FIS_v2",oL="https://firebaseinstallations.googleapis.com/v1",aL=60*60*1e3,lL="installations",uL="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cL={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ks=new Ls(lL,uL,cL);function bI(t){return t instanceof _n&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NI({projectId:t}){return`${oL}/projects/${t}/installations`}function SI(t){return{token:t.token,requestStatus:2,expiresIn:hL(t.expiresIn),creationTime:Date.now()}}async function AI(t,e){const r=(await e.json()).error;return ks.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function PI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function dL(t,{refreshToken:e}){const n=PI(t);return n.append("Authorization",fL(e)),n}async function kI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function hL(t){return Number(t.replace("s","000"))}function fL(t){return`${II} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=NI(t),s=PI(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:II,appId:t.appId,sdkVersion:TI},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await kI(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:SI(d.authToken)}}else throw await AI("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mL(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gL=/^[cdef][\w-]{21}$/,Wf="";function yL(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=vL(t);return gL.test(n)?n:Wf}catch{return Wf}}function vL(t){return mL(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RI=new Map;function jI(t,e){const n=Kc(t);OI(n,e),_L(n,e)}function OI(t,e){const n=RI.get(t);if(n)for(const r of n)r(e)}function _L(t,e){const n=wL();n&&n.postMessage({key:t,fid:e}),xL()}let ps=null;function wL(){return!ps&&"BroadcastChannel"in self&&(ps=new BroadcastChannel("[Firebase] FID Change"),ps.onmessage=t=>{OI(t.data.key,t.data.fid)}),ps}function xL(){RI.size===0&&ps&&(ps.close(),ps=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL="firebase-installations-database",TL=1,Cs="firebase-installations-store";let hh=null;function Zm(){return hh||(hh=Ic(EL,TL,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Cs)}}})),hh}async function nc(t,e){const n=Kc(t),s=(await Zm()).transaction(Cs,"readwrite"),i=s.objectStore(Cs),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&jI(t,e.fid),e}async function DI(t){const e=Kc(t),r=(await Zm()).transaction(Cs,"readwrite");await r.objectStore(Cs).delete(e),await r.done}async function Gc(t,e){const n=Kc(t),s=(await Zm()).transaction(Cs,"readwrite"),i=s.objectStore(Cs),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&jI(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(t){let e;const n=await Gc(t.appConfig,r=>{const s=IL(r),i=bL(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Wf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function IL(t){const e=t||{fid:yL(),registrationStatus:0};return LI(e)}function bL(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(ks.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=NL(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:SL(t)}:{installationEntry:e}}async function NL(t,e){try{const n=await pL(t,e);return nc(t.appConfig,n)}catch(n){throw bI(n)&&n.customData.serverCode===409?await DI(t.appConfig):await nc(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function SL(t){let e=await Y0(t.appConfig);for(;e.registrationStatus===1;)await CI(100),e=await Y0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await eg(t);return r||n}return e}function Y0(t){return Gc(t,e=>{if(!e)throw ks.create("installation-not-found");return LI(e)})}function LI(t){return AL(t)?{fid:t.fid,registrationStatus:0}:t}function AL(t){return t.registrationStatus===1&&t.registrationTime+EI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PL({appConfig:t,heartbeatServiceProvider:e},n){const r=kL(t,n),s=dL(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:TI,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await kI(()=>fetch(r,l));if(c.ok){const d=await c.json();return SI(d)}else throw await AI("Generate Auth Token",c)}function kL(t,{fid:e}){return`${NI(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tg(t,e=!1){let n;const r=await Gc(t.appConfig,i=>{if(!MI(i))throw ks.create("not-registered");const o=i.authToken;if(!e&&jL(o))return i;if(o.requestStatus===1)return n=CL(t,e),i;{if(!navigator.onLine)throw ks.create("app-offline");const l=DL(i);return n=RL(t,l),l}});return n?await n:r.authToken}async function CL(t,e){let n=await X0(t.appConfig);for(;n.authToken.requestStatus===1;)await CI(100),n=await X0(t.appConfig);const r=n.authToken;return r.requestStatus===0?tg(t,e):r}function X0(t){return Gc(t,e=>{if(!MI(e))throw ks.create("not-registered");const n=e.authToken;return LL(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function RL(t,e){try{const n=await PL(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await nc(t.appConfig,r),n}catch(n){if(bI(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await DI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await nc(t.appConfig,r)}throw n}}function MI(t){return t!==void 0&&t.registrationStatus===2}function jL(t){return t.requestStatus===2&&!OL(t)}function OL(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+aL}function DL(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function LL(t){return t.requestStatus===1&&t.requestTime+EI<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ML(t){const e=t,{installationEntry:n,registrationPromise:r}=await eg(e);return r?r.catch(console.error):tg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VL(t,e=!1){const n=t;return await UL(n),(await tg(n,e)).token}async function UL(t){const{registrationPromise:e}=await eg(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FL(t){if(!t||!t.options)throw fh("App Configuration");if(!t.name)throw fh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw fh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function fh(t){return ks.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VI="installations",$L="installations-internal",BL=t=>{const e=t.getProvider("app").getImmediate(),n=FL(e),r=Ms(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},zL=t=>{const e=t.getProvider("app").getImmediate(),n=Ms(e,VI).getImmediate();return{getId:()=>ML(n),getToken:s=>VL(n,s)}};function qL(){gn(new tn(VI,BL,"PUBLIC")),gn(new tn($L,zL,"PRIVATE"))}qL();Mt(xI,Jm);Mt(xI,Jm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HL="/firebase-messaging-sw.js",WL="/firebase-cloud-messaging-push-scope",UI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",KL="https://fcmregistrations.googleapis.com/v1",FI="google.c.a.c_id",GL="google.c.a.c_l",QL="google.c.a.ts",YL="google.c.a.e";var J0;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(J0||(J0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var ka;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(ka||(ka={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function XL(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ph="fcm_token_details_db",JL=5,Z0="fcm_token_object_Store";async function ZL(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(ph))return null;let e=null;return(await Ic(ph,JL,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(Z0))return;const c=o.objectStore(Z0),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(l=f.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:Bn(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Bn(f.auth),p256dh:Bn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Bn(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Bn(f.auth),p256dh:Bn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Bn(f.vapidKey)}}}}}})).close(),await th(ph),await th("fcm_vapid_details_db"),await th("undefined"),e4(e)?e:null}function e4(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t4="firebase-messaging-database",n4=1,Ca="firebase-messaging-store";let mh=null;function $I(){return mh||(mh=Ic(t4,n4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ca)}}})),mh}async function r4(t){const e=BI(t),r=await(await $I()).transaction(Ca).objectStore(Ca).get(e);if(r)return r;{const s=await ZL(t.appConfig.senderId);if(s)return await ng(t,s),s}}async function ng(t,e){const n=BI(t),s=(await $I()).transaction(Ca,"readwrite");return await s.objectStore(Ca).put(e,n),await s.done,e}function BI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},pt=new Ls("messaging","Messaging",s4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i4(t,e){const n=await sg(t),r=zI(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(rg(t.appConfig),s)).json()}catch(o){throw pt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw pt.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw pt.create("token-subscribe-no-token");return i.token}async function o4(t,e){const n=await sg(t),r=zI(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${rg(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw pt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw pt.create("token-update-failed",{errorInfo:o})}if(!i.token)throw pt.create("token-update-no-token");return i.token}async function a4(t,e){const r={method:"DELETE",headers:await sg(t)};try{const i=await(await fetch(`${rg(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw pt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw pt.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function rg({projectId:t}){return`${KL}/projects/${t}/registrations`}async function sg({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function zI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==UI&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4=7*24*60*60*1e3;async function u4(t){const e=await d4(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Bn(e.getKey("auth")),p256dh:Bn(e.getKey("p256dh"))},r=await r4(t.firebaseDependencies);if(r){if(h4(r.subscriptionOptions,n))return Date.now()>=r.createTime+l4?c4(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await a4(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return e_(t.firebaseDependencies,n)}else return e_(t.firebaseDependencies,n)}async function c4(t,e){try{const n=await o4(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await ng(t.firebaseDependencies,r),n}catch(n){throw n}}async function e_(t,e){const r={token:await i4(t,e),createTime:Date.now(),subscriptionOptions:e};return await ng(t,r),r.token}async function d4(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:XL(e)})}function h4(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function t_(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return f4(e,t),p4(e,t),m4(e,t),e}function f4(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function p4(t,e){e.data&&(t.data=e.data)}function m4(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g4(t){return typeof t=="object"&&!!t&&FI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y4(t){if(!t||!t.options)throw gh("App Configuration Object");if(!t.name)throw gh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw gh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function gh(t){return pt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=y4(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _4(t){try{t.swRegistration=await navigator.serviceWorker.register(HL,{scope:WL}),t.swRegistration.update().catch(()=>{})}catch(e){throw pt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w4(t,e){if(!e&&!t.swRegistration&&await _4(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw pt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x4(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=UI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qI(t,e){if(!navigator)throw pt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw pt.create("permission-blocked");return await x4(t,e==null?void 0:e.vapidKey),await w4(t,e==null?void 0:e.serviceWorkerRegistration),u4(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E4(t,e,n){const r=T4(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[FI],message_name:n[GL],message_time:n[QL],message_device_time:Math.floor(Date.now()/1e3)})}function T4(t){switch(t){case ka.NOTIFICATION_CLICKED:return"notification_open";case ka.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I4(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===ka.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(t_(n)):t.onMessageHandler.next(t_(n)));const r=n.data;g4(r)&&r[YL]==="1"&&await E4(t,n.messageType,r)}const n_="@firebase/messaging",r_="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b4=t=>{const e=new v4(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>I4(e,n)),e},N4=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>qI(e,r)}};function S4(){gn(new tn("messaging",b4,"PUBLIC")),gn(new tn("messaging-internal",N4,"PRIVATE")),Mt(n_,r_),Mt(n_,r_,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(){try{await Gx()}catch{return!1}return typeof window<"u"&&Kx()&&lP()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P4(t,e){if(!navigator)throw pt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k4(t=bc()){return A4().then(e=>{if(!e)throw pt.create("unsupported-browser")},e=>{throw pt.create("indexed-db-unsupported")}),Ms(fe(t),"messaging").getImmediate()}async function C4(t,e){return t=fe(t),qI(t,e)}function R4(t,e){return t=fe(t),P4(t,e)}S4();const ls={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:ls.apiKey?"Set":"Missing",authDomain:ls.authDomain?"Set":"Missing",projectId:ls.projectId?"Set":"Missing",storageBucket:ls.storageBucket?"Set":"Missing",messagingSenderId:ls.messagingSenderId?"Set":"Missing",appId:ls.appId?"Set":"Missing"});const ig=Xx(ls),Js=UR(ig),he=AO(ig),j4=nL(ig),HI=new qn;HI.setCustomParameters({prompt:"select_account"});class O4{async register(e,n,r){try{const i=(await xC(Js,e,n)).user;return await IC(i,{displayName:r}),await qf(Me(he,"users",i.uid),{uid:i.uid,email:e,displayName:r,role:"student",purchasedCourses:[],createdAt:Oe(),lastLogin:Oe(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,n){try{const r=await EC(Js,e,n);return await Pn(Me(he,"users",r.user.uid),{lastLogin:Oe()}),{success:!0,user:r.user}}catch(r){return console.error("Login error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async loginWithGoogle(){try{const n=(await GC(Js,HI)).user;return(await Gr(Me(he,"users",n.uid))).exists()?await Pn(Me(he,"users",n.uid),{lastLogin:Oe()}):await qf(Me(he,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,role:"student",purchasedCourses:[],createdAt:Oe(),lastLogin:Oe(),progress:{}}),{success:!0,user:n}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await AC(Js),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await wC(Js,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(n){return console.error("Password reset error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async getUserData(e){try{const n=await Gr(Me(he,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(n){return console.error("Get user data error:",n),{success:!1,error:n.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const ss=new O4,D4=void 0;class L4{constructor(){this.messaging=null}async initialize(){try{return this.messaging=k4(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const n=await C4(this.messaging,{vapidKey:D4});return n?(console.log(" FCM Token:",n),e&&await Pn(Me(he,"users",e),{fcmTokens:rI(n),lastTokenUpdate:new Date}),n):(console.log(" Impossible de rcuprer le token"),null)}catch(n){return console.error(" Erreur rcupration token:",n),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const r=await this.getDeviceToken(e);return r?{success:!0,token:r}:{success:!1,error:"Impossible de rcuprer le token"}}catch(n){return console.error(" Erreur souscription:",n),{success:!1,error:n.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}R4(this.messaging,n=>{console.log(" Message reu (foreground):",n),n.notification&&new Notification(n.notification.title,{body:n.notification.body,icon:"/logo.png"}),e&&e(n)})}}const du=new L4,WI=O.createContext({}),rn=()=>{const t=O.useContext(WI);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},M4=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(null),[i,o]=O.useState(!0),[l,c]=O.useState(null),d=async y=>{try{const k=await ss.getUserData(y);if(k.success)return s(k.data),console.log("Loaded userProfile from Firestore:",k.data),k.data}catch(k){console.error("Error loading user profile:",k)}return null};O.useEffect(()=>SC(Js,async k=>{if(n(k),console.log("Auth state changed - uid:",(k==null?void 0:k.uid)||null),k){const L=await d(k.uid);console.log("After loadUserProfile - userProfile:",L),(L==null?void 0:L.role)!=="admin"?(await du.initialize(),(await du.subscribeToNotifications(k.uid)).success&&console.log(" Notifications actives"),du.onMessageReceived(I=>{console.log(" Nouvelle notification:",I)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(y,k,L)=>{c(null);const V=await ss.register(y,k,L);return V.success||c(V.error),V},g=async(y,k)=>{c(null);const L=await ss.login(y,k);return L.success||c(L.error),L},m=async()=>{c(null);const y=await ss.loginWithGoogle();return y.success||c(y.error),y},x=async()=>{c(null);const y=await ss.logout();return y.success||c(y.error),y},b=async y=>{c(null);const k=await ss.resetPassword(y);return k.success||c(k.error),k},N=async y=>{c(null);const k=await ss.updateUserProfile(y);return k.success?await d(e.uid):c(k.error),k},P=()=>(r==null?void 0:r.role)==="admin",w={currentUser:e,userProfile:r,loading:i,error:l,register:f,login:g,loginWithGoogle:m,logout:x,resetPassword:b,updateProfile:N,isAdmin:P,hasAccessToCourse:y=>{var k;return((k=r==null?void 0:r.purchasedCourses)==null?void 0:k.includes(y))||P()},setError:c};return u.jsx(WI.Provider,{value:w,children:!i&&t})};function No({children:t,adminOnly:e=!1}){const{currentUser:n,userProfile:r,loading:s}=rn();return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!n,"userProfile:",r),n?e&&(r==null?void 0:r.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",r==null?void 0:r.role),u.jsx(mf,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),u.jsx(mf,{to:"/login",replace:!0})))}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var V4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},f)=>O.createElement("svg",{ref:f,...V4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${U4(t)}`,l].join(" "),...d},[...e.map(([g,m])=>O.createElement(g,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F4=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $4=J("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ra=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ea=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B4=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z4=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q4=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jt=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H4=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KI=J("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=J("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rs=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=J("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=J("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bi=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ja=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eM=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tM=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nM=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=J("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rM=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GI=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QI=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sM=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YI=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sc=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iM=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oM=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qc=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aM=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gf=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function lM(){var N,P;const[t,e]=O.useState({email:"",password:""}),[n,r]=O.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:l,userProfile:c}=rn(),d=vn(),g=((P=(N=Ds().state)==null?void 0:N.from)==null?void 0:P.pathname)||"/",m=async E=>{E.preventDefault(),r(!0);const w=await s(t.email,t.password);w.success&&setTimeout(()=>{if(w.user){const y=setInterval(()=>{c&&(clearInterval(y),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(y),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},x=async()=>{r(!0);const E=await i();E.success&&setTimeout(()=>{if(E.user){const w=setInterval(()=>{c&&(clearInterval(w),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(w),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},b=E=>{e({...t,[E.target.name]:E.target.value}),o&&l(null)};return u.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),u.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),u.jsxs("div",{className:"relative w-full max-w-md",children:[u.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:u.jsx(jt,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),u.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[u.jsx(ag,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&u.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[u.jsx(F4,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-700 text-sm",children:o})]}),u.jsxs("button",{onClick:x,disabled:n,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[u.jsx(KI,{className:"w-5 h-5 group-hover:rotate-12 transition"}),u.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),u.jsxs("form",{onSubmit:m,className:"space-y-5",children:[u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"relative",children:[u.jsx(ja,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:b,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),u.jsx(de,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),u.jsx("input",{type:"password",name:"password",value:t.password,onChange:b,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:n?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),u.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",u.jsx(de,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function uM(){const[t,e]=O.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=O.useState({}),[s,i]=O.useState(!1),{register:o,loginWithGoogle:l}=rn(),c=vn(),d=()=>{const N={};return t.displayName.trim()||(N.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(N.email="Email invalide"):N.email="L'email est requis",t.password?t.password.length<6&&(N.password="Minimum 6 caractres"):N.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(N.confirmPassword="Les mots de passe ne correspondent pas"),r(N),Object.keys(N).length===0},f=async N=>{if(N.preventDefault(),!d())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&c("/"),i(!1)},g=async()=>{i(!0),(await l()).success&&c("/"),i(!1)},m=N=>{e({...t,[N.target.name]:N.target.value}),n[N.target.name]&&r({...n,[N.target.name]:""})},b=(()=>{const N=t.password;if(!N)return{strength:0,label:"",color:""};let P=0;return N.length>=6&&P++,N.length>=8&&P++,/[a-z]/.test(N)&&/[A-Z]/.test(N)&&P++,/\d/.test(N)&&P++,/[^a-zA-Z\d]/.test(N)&&P++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][P-1]||{strength:0,label:"",color:""}})();return u.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),u.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),u.jsxs("div",{className:"relative w-full max-w-md",children:[u.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:u.jsx(jt,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),u.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[u.jsx(ag,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),u.jsxs("button",{onClick:g,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[u.jsx(KI,{className:"w-5 h-5 group-hover:rotate-12 transition"}),u.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),u.jsxs("form",{onSubmit:f,className:"space-y-5",children:[u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),u.jsxs("div",{className:"relative",children:[u.jsx(lg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),n.displayName&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.displayName]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"relative",children:[u.jsx(ja,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),n.email&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.email]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),u.jsxs("div",{className:"relative",children:[u.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"password",name:"password",value:t.password,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!n.password&&u.jsx("div",{className:"mt-2",children:u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-300 ${b.color}`,style:{width:`${b.strength/5*100}%`}})}),u.jsx("span",{className:"text-xs font-medium text-gray-600",children:b.label})]})}),n.password&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.password]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),u.jsxs("div",{className:"relative",children:[u.jsx(Bi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&u.jsx(qt,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),n.confirmPassword&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.confirmPassword]})]}),u.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),u.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",u.jsx(de,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function cM(){const[t,e]=O.useState(""),[n,r]=O.useState(!1),[s,i]=O.useState(!1),[o,l]=O.useState(""),{resetPassword:c}=rn(),d=async f=>{if(f.preventDefault(),l(""),!t.trim()){l("Veuillez entrer votre email");return}r(!0);const g=await c(t);g.success?i(!0):l(g.error),r(!1)};return s?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[u.jsx(qt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",u.jsx("strong",{children:t})]}),u.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),u.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[u.jsx(Ra,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[u.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[u.jsx(Ra,{className:"w-4 h-4"}),"Retour"]}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&u.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsx("p",{className:"text-red-700 text-sm",children:o})}),u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(ja,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:n?"Envoi en cours...":"Envoyer le lien"})]})]})})}const XI="/admin",dM="/dashboard";class hM{async createCourse(e,n){try{let r=null;n&&(r=await this.uploadThumbnail(n));const s={...e,thumbnail:r,enrolledCount:0,status:"draft",createdAt:Oe(),updatedAt:Oe()},i=await tc(Cr(he,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(r){return console.error(" Erreur cration cours:",r),{success:!1,error:r.message}}}async updateCourse(e,n,r){try{const s=Me(he,"courses",e);let i={...n};return r&&(i.thumbnail=await this.uploadThumbnail(r)),i.updatedAt=Oe(),await Pn(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const n=Me(he,"courses",e);return await Pn(n,{status:"archived",archivedAt:Oe()}),console.log(" Cours archiv:",e),{success:!0}}catch(n){return console.error(" Erreur suppression cours:",n),{success:!1,error:n.message}}}async getCourseById(e){try{const n=Me(he,"courses",e),r=await Gr(n);return r.exists()?{success:!0,course:{id:r.id,...r.data()}}:{success:!1,error:"Cours introuvable"}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message}}}async getCourses(e={}){try{let n=Cr(he,"courses");const r=[];return e.category&&r.push(hi("category","==",e.category)),e.status?r.push(hi("status","==",e.status)):r.push(hi("status","!=","archived")),e.level&&r.push(hi("level","==",e.level)),r.push(zf("createdAt","desc")),e.limit&&r.push(UO(e.limit)),e.startAfter&&r.push(FO(e.startAfter)),n=Bf(n,...r),{success:!0,courses:(await ec(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message,courses:[]}}}async publishCourse(e){try{const n=Me(he,"courses",e);return await Pn(n,{status:"published",publishedAt:Oe(),updatedAt:Oe()}),console.log(" Cours publi:",e),{success:!0}}catch(n){return console.error(" Erreur publication cours:",n),{success:!1,error:n.message}}}async uploadThumbnail(e){try{const n=`thumbnails/${Date.now()}_${e.name}`,r=tL(j4,n);await ZD(r,e);const s=await eL(r);return console.log(" Thumbnail uploade:",s),s}catch(n){throw console.error(" Erreur upload thumbnail:",n),n}}async duplicateCourse(e){try{const{success:n,course:r}=await this.getCourseById(e);if(!n)return{success:!1,error:"Cours introuvable"};const s={...r,title:`${r.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(n){return console.error(" Erreur duplication cours:",n),{success:!1,error:n.message}}}}const Yn=new hM;function fM(){const{currentUser:t,userProfile:e}=rn(),n=vn(),[r,s]=O.useState([]),[i,o]=O.useState({totalCourses:0,totalStudents:0,totalHours:0}),[l,c]=O.useState(!0);O.useEffect(()=>{d()},[]);const d=async()=>{try{const m=await Yn.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});m.success&&(s(m.courses),o({totalCourses:m.total||m.courses.length,totalStudents:m.courses.reduce((x,b)=>x+(b.enrolledCount||0),0),totalHours:m.courses.reduce((x,b)=>x+(b.duration||0),0)}))}catch(m){console.error("Error loading home data:",m)}finally{c(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],g=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsxs(de,{to:"/",className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-6 h-6 text-white"})}),u.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[u.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),u.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),u.jsx("div",{className:"flex items-center gap-3",children:t?u.jsxs(u.Fragment,{children:[u.jsx(de,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),u.jsx(de,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&u.jsx("button",{onClick:()=>n(XI),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):u.jsxs(u.Fragment,{children:[u.jsx(de,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),u.jsx(de,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),u.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[u.jsx(ag,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),u.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",u.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs(de,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",u.jsx(ea,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&u.jsxs(de,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[u.jsx(Kf,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[u.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:u.jsx(Kf,{className:"w-20 h-20 text-gray-400"})}),u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),u.jsx("section",{className:"py-20 bg-gray-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),u.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),l?u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(m=>u.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[u.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),u.jsxs("div",{className:"p-6 space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},m))}):r.length>0?u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(m=>u.jsxs(de,{to:`/courses/${m.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[u.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[m.thumbnail?u.jsx("img",{src:m.thumbnail,alt:m.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(jt,{className:"w-16 h-16 text-gray-300"})}),u.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:m.price>0?`${m.price} DT`:"Gratuit"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:m.category||"Gnral"}),u.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:m.level||"Dbutant"})]}),u.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:m.title}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.shortDescription||m.description}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Qc,{className:"w-4 h-4"}),u.jsxs("span",{children:[m.enrolledCount||0," tudiants"]})]}),m.duration&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Rs,{className:"w-4 h-4"}),u.jsxs("span",{children:[m.duration,"h"]})]})]})]})]},m.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(jt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),u.jsx("div",{className:"text-center mt-12",children:u.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",u.jsx(ea,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),u.jsx("section",{className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(m=>u.jsxs(de,{to:`/courses?category=${m.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[u.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${m.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:m.icon}),u.jsx("h3",{className:"font-semibold text-gray-900",children:m.name})]},m.name))})]})}),u.jsx("section",{className:"py-20 bg-gray-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),u.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),u.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),u.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),u.jsx("section",{className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:g.map((m,x)=>u.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[u.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(m.rating)].map((b,N)=>u.jsx(sc,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},N))}),u.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',m.quote,'"']}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:m.photo,alt:m.name,className:"w-12 h-12 rounded-full"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-gray-900",children:m.name}),u.jsx("div",{className:"text-sm text-gray-600",children:m.role})]})]})]},x))})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),u.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),u.jsxs(de,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",u.jsx(ea,{className:"w-5 h-5"})]})]})}),u.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:u.jsx(jt,{className:"w-6 h-6 text-white"})}),u.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),u.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),u.jsx("li",{children:u.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),u.jsx("li",{children:u.jsx(de,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),u.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),u.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function pM(){var S;const{currentUser:t,userProfile:e,logout:n}=rn(),r=vn(),[s,i]=O.useState(!1),[o,l]=O.useState("personal"),[c,d]=O.useState(!1),[f,g]=O.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[m,x]=O.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[b,N]=O.useState(null),[P,E]=O.useState(!1),[w,y]=O.useState(null),k=async()=>{i(!0),await n(),r("/login")},L=async()=>{try{y(null),await Pn(Me(he,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),y({type:"success",text:"Profil mis  jour avec succs!"}),d(!1),setTimeout(()=>y(null),3e3)}catch(T){y({type:"error",text:"Erreur: "+T.message})}},V=async()=>{if(!t)return;E(!0),N(null);const T=await du.subscribeToNotifications(t.uid);T.success?(x("enabled"),N({type:"success",text:"Notifications actives"})):N({type:"error",text:T.error||"Impossible d'activer"}),E(!1),setTimeout(()=>N(null),3e3)},I=[{id:"personal",name:"Informations",icon:Q4},{id:"security",name:"Scurit",icon:Bi},{id:"progress",name:"Progression",icon:s_}],_=[{label:"Cours suivis",value:((S=e==null?void 0:e.purchasedCourses)==null?void 0:S.length)||0,icon:jt,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:Rs,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:B4,color:"text-purple-600 bg-purple-100"}];return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[u.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),u.jsx("div",{className:"px-8 pb-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?u.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):u.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:u.jsx(lg,{className:"w-16 h-16 text-white"})})}),u.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:u.jsx(W4,{className:"w-5 h-5 text-gray-600"})})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),u.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[u.jsx(YI,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[u.jsx(ja,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),u.jsxs("button",{onClick:k,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[u.jsx(Z4,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:_.map((T,C)=>u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${T.color}`,children:u.jsx(T.icon,{className:"w-6 h-6"})})}),u.jsx("p",{className:"text-gray-600 text-sm mb-1",children:T.label}),u.jsx("p",{className:"text-3xl font-bold text-gray-900",children:T.value})]},C))}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[u.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:u.jsx("nav",{className:"flex gap-8",children:I.map(T=>{const C=T.icon;return u.jsxs("button",{onClick:()=>l(T.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===T.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[u.jsx(C,{className:"w-5 h-5"}),T.name]},T.id)})})}),u.jsxs("div",{className:"p-8",children:[o==="personal"&&u.jsxs("div",{className:"space-y-6",children:[w&&u.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${w.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${w.type==="success"?"bg-green-500":"bg-red-500"}`}),w.text]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),c?u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[u.jsx(GI,{className:"w-4 h-4"}),"Enregistrer"]}),u.jsxs("button",{onClick:()=>d(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[u.jsx(Gf,{className:"w-4 h-4"}),"Annuler"]})]}):u.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[u.jsx(nM,{className:"w-4 h-4"}),"Modifier"]})]}),u.jsxs("div",{className:"grid gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),c?u.jsx("input",{type:"text",value:f.displayName,onChange:T=>g({...f,displayName:T.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[u.jsx(ja,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),u.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),c?u.jsx("input",{type:"tel",value:f.phone,onChange:T=>g({...f,phone:T.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),c?u.jsx("textarea",{value:f.bio,onChange:T=>g({...f,bio:T.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),u.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:u.jsx(q4,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),u.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",u.jsx("span",{className:m==="enabled"?"text-green-600":"text-gray-500",children:m==="enabled"?"Actives ":"Dsactives"})]}),b&&u.jsx("p",{className:`text-sm mt-2 ${b.type==="success"?"text-green-600":"text-red-600"}`,children:b.text})]})]}),u.jsx("button",{onClick:V,disabled:P||m==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:m==="enabled"?"Actives":P?"Activation...":"Activer"})]})}),u.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:u.jsx(Bi,{className:"w-6 h-6 text-gray-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),u.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),u.jsxs("div",{className:"text-center py-12",children:[u.jsx(s_,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),u.jsxs("button",{onClick:()=>r("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[u.jsx(jt,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const mM="https://sandbox.paymee.tn/api/v2",gM="73af59aae675d845db28616e3e9304f2473d7090",yM="https://plateforme-educative.onrender.com";function vM(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),n=new Set(["1","true","yes","paid","success","ok","completed"]),r=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return n.has(e)?"completed":r.has(e)?"pending":s.has(e)?"failed":"unknown"}const _M=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class wM{async initiatePayment(e,n,r,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:n,amount:r});let l;try{l=_M()}catch(N){return console.error(" HTTPS check failed:",N.message),{success:!1,error:N.message}}const c=await tc(Cr(he,"payments"),{userId:s.uid,courseId:e,courseTitle:n,amount:r,currency:"TND",status:"pending",createdAt:Oe(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",c.id);const d=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let g=s.phone||"12345678";g=g.replace(/\D/g,""),g.length!==8&&(g="12345678");const m={amount:parseFloat(r),note:`Cours ${n}`,first_name:d,last_name:f,email:s.email,phone:g,return_url:`${l}/payment/success?payment_id=${c.id}`,cancel_url:`${l}/payment/cancel?payment_id=${c.id}`,webhook_url:`${yM}/paymee-webhook`,order_id:c.id};console.log(" Sending to Paymee:",m);const x=await fetch(`${mM}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${gM}`},body:JSON.stringify(m)});console.log(" Response status:",x.status);const b=await x.json();if(console.log(" Paymee response:",b),!b.status){if(console.error(" Paymee error:",b),b.errors&&Array.isArray(b.errors)){const N=b.errors.map(P=>typeof P=="object"?Object.entries(P).map(([E,w])=>`${E}: ${w}`).join(", "):P).join(" | ");throw new Error(`Erreur Paymee: ${N}`)}throw new Error(b.message||"Erreur initialisation paiement")}return await Pn(Me(he,"payments",c.id),{paymeeToken:b.data.token,paymentUrl:b.data.payment_url,updatedAt:Oe()}),console.log(" Payment ready:",b.data.payment_url),{success:!0,paymentId:c.id,paymentUrl:b.data.payment_url,token:b.data.token}}catch(l){return console.error(" Payment error:",l),{success:!1,error:l.message}}}async verifyPayment(e){try{const n=await Gr(Me(he,"payments",e));if(!n.exists())return{success:!1,error:"Paiement introuvable"};const r=n.data();return{success:!0,status:vM(r.status),rawStatus:r.status,data:r}}catch(n){return console.error("Verification error:",n),{success:!1,error:n.message}}}}const JI=new wM;function ZI({course:t}){var c;const{currentUser:e,userProfile:n}=rn(),[r,s]=O.useState(!1),[i,o]=O.useState(null),l=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=n==null?void 0:n.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const d=await JI.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(n==null?void 0:n.displayName)||e.displayName,phone:(n==null?void 0:n.phone)||"00000000"});d.success?window.location.href=d.paymentUrl:(o(d.error),s(!1))};return(c=n==null?void 0:n.purchasedCourses)!=null&&c.includes(t.id)?u.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?u.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):u.jsxs("div",{children:[i&&u.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),u.jsx("button",{onClick:l,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?u.jsxs(u.Fragment,{children:[u.jsx(og,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):u.jsxs(u.Fragment,{children:[u.jsx(X4,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function xM(){const[t,e]=O.useState([]),[n,r]=O.useState(!0);return O.useEffect(()=>{setTimeout(()=>{e([{id:"1",title:"Introduction  React",description:"Apprenez les bases de React et crez votre premire application",instructor:"Ahmed Ben Salem",duration:"8 heures",rating:4.8,students:1250,price:99,image:"/assets/images/default-course.png",level:"Dbutant",isFree:!1},{id:"2",title:"JavaScript Avanc",description:"Matrisez les concepts avancs de JavaScript moderne",instructor:"Fatma Aloui",duration:"12 heures",rating:4.9,students:890,price:149,image:"/assets/images/default-course.png",level:"Intermdiaire",isFree:!1},{id:"3",title:"HTML/CSS Gratuit",description:"Apprenez les bases du dveloppement web gratuitement",instructor:"Sara Mohamed",duration:"6 heures",rating:4.7,students:2100,price:0,image:"/assets/images/default-course.png",level:"Dbutant",isFree:!0}]),r(!1)},1e3)},[]),n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(s=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-lg transition-shadow",children:[u.jsx("img",{src:s.image,alt:s.title,className:"w-full h-48 object-cover"}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:s.level}),s.isFree&&u.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:s.title}),u.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[u.jsx(Rs,{className:"w-4 h-4 mr-1"}),u.jsx("span",{className:"mr-4",children:s.duration}),u.jsx(sc,{className:"w-4 h-4 mr-1 text-yellow-400"}),u.jsx("span",{className:"mr-4",children:s.rating}),u.jsx(Qc,{className:"w-4 h-4 mr-1"}),u.jsxs("span",{children:[s.students," tudiants"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("span",{className:"text-sm text-gray-600",children:["Par ",s.instructor]}),u.jsx("span",{className:"text-sm text-gray-500",children:s.isFree?"Gratuit":`${s.price} TND`})]}),u.jsx(ZI,{course:s}),u.jsx(de,{to:`/course/${s.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition",children:"Voir les dtails"})]})]})]},s.id))})})]})}function EM(){var d;const{id:t}=Ox(),e=vn(),{userProfile:n}=rn(),[r,s]=O.useState(null),[i,o]=O.useState(!0);O.useEffect(()=>{l()},[t]);const l=async()=>{try{const f=await Gr(Me(he,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},c=((d=n==null?void 0:n.purchasedCourses)==null?void 0:d.includes(t))||(r==null?void 0:r.isFree)||(n==null?void 0:n.role)==="admin";return i?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(og,{className:"w-8 h-8 animate-spin text-green-500"})}):r?u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[u.jsx(Ra,{className:"w-5 h-5"}),"Retour aux cours"]})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:u.jsx("img",{src:r.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:r.title,className:"w-full h-64 object-cover"})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:r.category}),u.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:r.level}),c&&u.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),u.jsx("p",{className:"text-gray-600 text-lg mb-6",children:r.description}),u.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Rs,{className:"w-5 h-5"}),u.jsx("span",{children:r.duration})]}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(jt,{className:"w-5 h-5"}),u.jsxs("span",{children:[r.totalLessons," leons"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Qc,{className:"w-5 h-5"}),u.jsxs("span",{children:[r.enrolledCount," tudiants"]})]}),r.rating>0&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(sc,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),u.jsx("span",{children:r.rating.toFixed(1)})]})]}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(qt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(qt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(qt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:r.isFree?"Gratuit":`${r.price} TND`}),!r.isFree&&u.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),c?u.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[u.jsx(rc,{className:"w-5 h-5"}),"Commencer le cours"]}):u.jsx("div",{className:"mb-4",children:u.jsx(ZI,{course:r})}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),u.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(rc,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Vidos  la demande"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(jt,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Ressources tlchargeables"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(qt,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Accs illimit"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(sc,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Certificat de russite"})]})]})]}),r.instructor&&u.jsxs("div",{className:"border-t pt-6 mt-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),u.jsx("p",{className:"text-gray-600",children:r.instructor})]})]})})]})})]}):null}class TM{async createModule(e,n){try{const r={courseId:e,...n,order:n.order||0,createdAt:Oe()};return{success:!0,id:(await tc(Cr(he,"modules"),r)).id}}catch(r){return console.error("Error creating module:",r),{success:!1,error:r.message}}}async createLesson(e,n){try{const r={moduleId:e,...n,order:n.order||0,createdAt:Oe()};return{success:!0,id:(await tc(Cr(he,"lessons"),r)).id}}catch(r){return console.error("Error creating lesson:",r),{success:!1,error:r.message}}}async getModulesByCourse(e){try{const n=Bf(Cr(he,"modules"),hi("courseId","==",e),zf("order","asc"));return{success:!0,modules:(await ec(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching modules:",n),{success:!1,error:n.message,modules:[]}}}async getLessonsByModule(e){try{const n=Bf(Cr(he,"lessons"),hi("moduleId","==",e),zf("order","asc"));return{success:!0,lessons:(await ec(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching lessons:",n),{success:!1,error:n.message,lessons:[]}}}async getLessonById(e){try{const n=Me(he,"lessons",e),r=await Gr(n);return r.exists()?{success:!0,lesson:{id:r.id,...r.data()}}:{success:!1,error:"Leon introuvable"}}catch(n){return console.error("Error fetching lesson:",n),{success:!1,error:n.message}}}}const ic=new TM;class IM{async markLessonComplete(e,n,r){try{const s=Me(he,"progress",`${e}_${n}`);return(await Gr(s)).exists()?await Pn(s,{completedLessons:rI(r),lastAccessed:Oe(),updatedAt:Oe()}):await qf(s,{userId:e,courseId:n,completedLessons:[r],startedAt:Oe(),lastAccessed:Oe(),updatedAt:Oe()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,n){try{const r=Me(he,"progress",`${e}_${n}`),s=await Gr(r);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(r){return console.error("Error fetching progress:",r),{success:!1,error:r.message}}}calculateProgressPercentage(e,n){return n===0?0:Math.round(e/n*100)}isLessonCompleted(e,n=[]){return n.includes(e)}}const fi=new IM,bM="modulepreload",NM=function(t){return"/"+t},i_={},Pt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=NM(c),c in i_)return;i_[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":bM,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((m,x)=>{g.addEventListener("load",m),g.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var SM=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&AM(i,n.attrs),n.text&&(i.text=""+n.text);var o="onload"in i?o_:PM;o(i,r),i.onload||o_(i,r),s.appendChild(i)};function AM(t,e){for(var n in e)t.setAttribute(n,e[n])}function o_(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function PM(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var kM=function(e){return CM(e)&&!RM(e)};function CM(t){return!!t&&typeof t=="object"}function RM(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||DM(t)}var jM=typeof Symbol=="function"&&Symbol.for,OM=jM?Symbol.for("react.element"):60103;function DM(t){return t.$$typeof===OM}function LM(t){return Array.isArray(t)?[]:{}}function Oa(t,e){return e.clone!==!1&&e.isMergeableObject(t)?zi(LM(t),t,e):t}function MM(t,e,n){return t.concat(e).map(function(r){return Oa(r,n)})}function VM(t,e){if(!e.customMerge)return zi;var n=e.customMerge(t);return typeof n=="function"?n:zi}function UM(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function a_(t){return Object.keys(t).concat(UM(t))}function eb(t,e){try{return e in t}catch{return!1}}function FM(t,e){return eb(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function $M(t,e,n){var r={};return n.isMergeableObject(t)&&a_(t).forEach(function(s){r[s]=Oa(t[s],n)}),a_(e).forEach(function(s){FM(t,s)||(eb(t,s)&&n.isMergeableObject(e[s])?r[s]=VM(s,n)(t[s],e[s],n):r[s]=Oa(e[s],n))}),r}function zi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||MM,n.isMergeableObject=n.isMergeableObject||kM,n.cloneUnlessOtherwiseSpecified=Oa;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):$M(t,e,n):Oa(e,n)}zi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return zi(r,s,n)},{})};var BM=zi,tb=BM,zM=Object.create,Yc=Object.defineProperty,qM=Object.getOwnPropertyDescriptor,HM=Object.getOwnPropertyNames,WM=Object.getPrototypeOf,KM=Object.prototype.hasOwnProperty,GM=(t,e)=>{for(var n in e)Yc(t,n,{get:e[n],enumerable:!0})},nb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of HM(e))!KM.call(t,s)&&s!==n&&Yc(t,s,{get:()=>e[s],enumerable:!(r=qM(e,s))||r.enumerable});return t},ug=(t,e,n)=>(n=t!=null?zM(WM(t)):{},nb(!t||!t.__esModule?Yc(n,"default",{value:t,enumerable:!0}):n,t)),QM=t=>nb(Yc({},"__esModule",{value:!0}),t),rb={};GM(rb,{callPlayer:()=>dV,getConfig:()=>uV,getSDK:()=>lV,isBlobUrl:()=>fV,isMediaStream:()=>hV,lazy:()=>ZM,omit:()=>cV,parseEndTime:()=>iV,parseStartTime:()=>sV,queryString:()=>aV,randomString:()=>oV,supportsWebKitPresentationMode:()=>pV});var Xc=QM(rb),YM=ug(O),XM=ug(SM),JM=ug(tb);const ZM=t=>YM.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),eV=/[?&#](?:start|t)=([0-9hms]+)/,tV=/[?&#]end=([0-9hms]+)/,Qf=/(\d+)(h|m|s)/g,nV=/^\d+$/;function sb(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match(Qf))return rV(r);if(nV.test(r))return parseInt(r)}}function rV(t){let e=0,n=Qf.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=Qf.exec(t)}return e}function sV(t){return sb(t,eV)}function iV(t){return sb(t,tV)}function oV(){return Math.random().toString(36).substr(2,5)}function aV(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function yh(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const Ks={},lV=function(e,n,r=null,s=()=>!0,i=XM.default){const o=yh(n);return o&&s(o)?Promise.resolve(o):new Promise((l,c)=>{if(Ks[e]){Ks[e].push({resolve:l,reject:c});return}Ks[e]=[{resolve:l,reject:c}];const d=f=>{Ks[e].forEach(g=>g.resolve(f))};if(r){const f=window[r];window[r]=function(){f&&f(),d(yh(n))}}i(e,f=>{f?(Ks[e].forEach(g=>g.reject(f)),Ks[e]=null):r||d(yh(n))})})};function uV(t,e){return(0,JM.default)(e.config,t.config)}function cV(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function dV(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function hV(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function fV(t){return/^blob:/.test(t)}function pV(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var cg=Object.defineProperty,mV=Object.getOwnPropertyDescriptor,gV=Object.getOwnPropertyNames,yV=Object.prototype.hasOwnProperty,vV=(t,e)=>{for(var n in e)cg(t,n,{get:e[n],enumerable:!0})},_V=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of gV(e))!yV.call(t,s)&&s!==n&&cg(t,s,{get:()=>e[s],enumerable:!(r=mV(e,s))||r.enumerable});return t},wV=t=>_V(cg({},"__esModule",{value:!0}),t),ib={};vV(ib,{AUDIO_EXTENSIONS:()=>dg,DASH_EXTENSIONS:()=>_b,FLV_EXTENSIONS:()=>wb,HLS_EXTENSIONS:()=>fg,MATCH_URL_DAILYMOTION:()=>mb,MATCH_URL_FACEBOOK:()=>ub,MATCH_URL_FACEBOOK_WATCH:()=>cb,MATCH_URL_KALTURA:()=>vb,MATCH_URL_MIXCLOUD:()=>gb,MATCH_URL_MUX:()=>lb,MATCH_URL_SOUNDCLOUD:()=>ob,MATCH_URL_STREAMABLE:()=>db,MATCH_URL_TWITCH_CHANNEL:()=>pb,MATCH_URL_TWITCH_VIDEO:()=>fb,MATCH_URL_VIDYARD:()=>yb,MATCH_URL_VIMEO:()=>ab,MATCH_URL_WISTIA:()=>hb,MATCH_URL_YOUTUBE:()=>Yf,VIDEO_EXTENSIONS:()=>hg,canPlay:()=>EV});var xV=wV(ib),l_=Xc;const Yf=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,ob=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,ab=/vimeo\.com\/(?!progressive_redirect).+/,lb=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,ub=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,cb=/^https?:\/\/fb\.watch\/.+$/,db=/streamable\.com\/([a-z0-9]+)$/,hb=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,fb=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,pb=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,mb=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,gb=/mixcloud\.com\/([^/]+\/[^/]+)/,yb=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,vb=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,dg=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,hg=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,fg=/\.(m3u8)($|\?)/i,_b=/\.(mpd)($|\?)/i,wb=/\.(flv)($|\?)/i,Xf=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&Xf(e)||Xf(e.src))return!0;return!1}return(0,l_.isMediaStream)(t)||(0,l_.isBlobUrl)(t)?!0:dg.test(t)||hg.test(t)||fg.test(t)||_b.test(t)||wb.test(t)},EV={youtube:t=>t instanceof Array?t.every(e=>Yf.test(e)):Yf.test(t),soundcloud:t=>ob.test(t)&&!dg.test(t),vimeo:t=>ab.test(t)&&!hg.test(t)&&!fg.test(t),mux:t=>lb.test(t),facebook:t=>ub.test(t)||cb.test(t),streamable:t=>db.test(t),wistia:t=>hb.test(t),twitch:t=>fb.test(t)||pb.test(t),dailymotion:t=>mb.test(t),mixcloud:t=>gb.test(t),vidyard:t=>yb.test(t),kaltura:t=>vb.test(t),file:Xf};var pg=Object.defineProperty,TV=Object.getOwnPropertyDescriptor,IV=Object.getOwnPropertyNames,bV=Object.prototype.hasOwnProperty,NV=(t,e)=>{for(var n in e)pg(t,n,{get:e[n],enumerable:!0})},SV=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of IV(e))!bV.call(t,s)&&s!==n&&pg(t,s,{get:()=>e[s],enumerable:!(r=TV(e,s))||r.enumerable});return t},AV=t=>SV(pg({},"__esModule",{value:!0}),t),xb={};NV(xb,{default:()=>kV});var PV=AV(xb),At=Xc,wt=xV,kV=[{key:"youtube",name:"YouTube",canPlay:wt.canPlay.youtube,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./YouTube-B_xP4BZW.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:wt.canPlay.soundcloud,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./SoundCloud-BtDi2z3X.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:wt.canPlay.vimeo,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Vimeo-wsILmH3r.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:wt.canPlay.mux,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Mux-BL7cKEV3.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:wt.canPlay.facebook,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Facebook-COrH1Cnp.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:wt.canPlay.streamable,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Streamable-BilqvFqj.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:wt.canPlay.wistia,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Wistia-DA-k2r4c.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:wt.canPlay.twitch,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Twitch-CeRUCQ8C.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:wt.canPlay.dailymotion,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./DailyMotion-DF0kbb5k.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:wt.canPlay.mixcloud,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Mixcloud-ByuRVyaV.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:wt.canPlay.vidyard,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Vidyard-BmEUZ7BP.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:wt.canPlay.kaltura,lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./Kaltura-F3EJkKC3.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:wt.canPlay.file,canEnablePIP:t=>wt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,At.supportsWebKitPresentationMode)())&&!wt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,At.lazy)(()=>Pt(()=>import("./FilePlayer-D95iCMYG.js").then(t=>t.F),[]))}],u_=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function CV(t,e){return!!(t===e||u_(t)&&u_(e))}function RV(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!CV(t[n],e[n]))return!1;return!0}function jV(t,e){e===void 0&&(e=RV);var n,r=[],s,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&n===this&&e(l,r)||(s=t.apply(this,l),i=!0,n=this,r=l),s}return o}const OV=Object.freeze(Object.defineProperty({__proto__:null,default:jV},Symbol.toStringTag,{value:"Module"})),DV=g1(OV);var LV=typeof Element<"u",MV=typeof Map=="function",VV=typeof Set=="function",UV=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function hu(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!hu(t[r],e[r]))return!1;return!0}var i;if(MV&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!hu(r.value[1],e.get(r.value[0])))return!1;return!0}if(VV&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(UV&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(LV&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!hu(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var Eb=function(e,n){try{return hu(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},Tb={exports:{}},FV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",$V=FV,BV=$V;function Ib(){}function bb(){}bb.resetWarningCache=Ib;var zV=function(){function t(r,s,i,o,l,c){if(c!==BV){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:bb,resetWarningCache:Ib};return n.PropTypes=n,n};Tb.exports=zV();var qV=Tb.exports,HV=Object.create,Jc=Object.defineProperty,WV=Object.getOwnPropertyDescriptor,KV=Object.getOwnPropertyNames,GV=Object.getPrototypeOf,QV=Object.prototype.hasOwnProperty,YV=(t,e)=>{for(var n in e)Jc(t,n,{get:e[n],enumerable:!0})},Nb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of KV(e))!QV.call(t,s)&&s!==n&&Jc(t,s,{get:()=>e[s],enumerable:!(r=WV(e,s))||r.enumerable});return t},XV=(t,e,n)=>(n=t!=null?HV(GV(t)):{},Nb(!t||!t.__esModule?Jc(n,"default",{value:t,enumerable:!0}):n,t)),JV=t=>Nb(Jc({},"__esModule",{value:!0}),t),Sb={};YV(Sb,{defaultProps:()=>t6,propTypes:()=>e6});var Ab=JV(Sb),ZV=XV(qV);const{string:Qe,bool:xt,number:Gs,array:vh,oneOfType:So,shape:Ut,object:ct,func:Fe,node:c_}=ZV.default,e6={url:So([Qe,vh,ct]),playing:xt,loop:xt,controls:xt,volume:Gs,muted:xt,playbackRate:Gs,width:So([Qe,Gs]),height:So([Qe,Gs]),style:ct,progressInterval:Gs,playsinline:xt,pip:xt,stopOnUnmount:xt,light:So([xt,Qe,ct]),playIcon:c_,previewTabIndex:Gs,previewAriaLabel:Qe,fallback:c_,oEmbedUrl:Qe,wrapper:So([Qe,Fe,Ut({render:Fe.isRequired})]),config:Ut({soundcloud:Ut({options:ct}),youtube:Ut({playerVars:ct,embedOptions:ct,onUnstarted:Fe}),facebook:Ut({appId:Qe,version:Qe,playerId:Qe,attributes:ct}),dailymotion:Ut({params:ct}),vimeo:Ut({playerOptions:ct,title:Qe}),mux:Ut({attributes:ct,version:Qe}),file:Ut({attributes:ct,tracks:vh,forceVideo:xt,forceAudio:xt,forceHLS:xt,forceSafariHLS:xt,forceDisableHls:xt,forceDASH:xt,forceFLV:xt,hlsOptions:ct,hlsVersion:Qe,dashVersion:Qe,flvVersion:Qe}),wistia:Ut({options:ct,playerId:Qe,customControls:vh}),mixcloud:Ut({options:ct}),twitch:Ut({options:ct,playerId:Qe}),vidyard:Ut({options:ct})}),onReady:Fe,onStart:Fe,onPlay:Fe,onPause:Fe,onBuffer:Fe,onBufferEnd:Fe,onEnded:Fe,onError:Fe,onDuration:Fe,onSeek:Fe,onPlaybackRateChange:Fe,onPlaybackQualityChange:Fe,onProgress:Fe,onClickPreview:Fe,onEnablePIP:Fe,onDisablePIP:Fe},Ye=()=>{},t6={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Ye},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Ye,onStart:Ye,onPlay:Ye,onPause:Ye,onBuffer:Ye,onBufferEnd:Ye,onEnded:Ye,onError:Ye,onDuration:Ye,onSeek:Ye,onPlaybackRateChange:Ye,onPlaybackQualityChange:Ye,onProgress:Ye,onClickPreview:Ye,onEnablePIP:Ye,onDisablePIP:Ye};var n6=Object.create,Za=Object.defineProperty,r6=Object.getOwnPropertyDescriptor,s6=Object.getOwnPropertyNames,i6=Object.getPrototypeOf,o6=Object.prototype.hasOwnProperty,a6=(t,e,n)=>e in t?Za(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,l6=(t,e)=>{for(var n in e)Za(t,n,{get:e[n],enumerable:!0})},Pb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of s6(e))!o6.call(t,s)&&s!==n&&Za(t,s,{get:()=>e[s],enumerable:!(r=r6(e,s))||r.enumerable});return t},kb=(t,e,n)=>(n=t!=null?n6(i6(t)):{},Pb(!t||!t.__esModule?Za(n,"default",{value:t,enumerable:!0}):n,t)),u6=t=>Pb(Za({},"__esModule",{value:!0}),t),Ce=(t,e,n)=>(a6(t,typeof e!="symbol"?e+"":e,n),n),Cb={};l6(Cb,{default:()=>Zc});var c6=u6(Cb),d_=kb(O),d6=kb(Eb),Rb=Ab,h6=Xc;const f6=5e3;class Zc extends d_.Component{constructor(){super(...arguments),Ce(this,"mounted",!1),Ce(this,"isReady",!1),Ce(this,"isPlaying",!1),Ce(this,"isLoading",!0),Ce(this,"loadOnReady",null),Ce(this,"startOnPlay",!0),Ce(this,"seekOnPlay",null),Ce(this,"onDurationCalled",!1),Ce(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),Ce(this,"getInternalPlayer",e=>this.player?this.player[e]:null),Ce(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Ce(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),Ce(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Ce(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),Ce(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),Ce(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),Ce(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Ce(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:o,pip:l,loop:c,activePlayer:d,disableDeferredLoading:f}=this.props;if(!(0,d6.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!f&&!(0,h6.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},f6));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?d_.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Ce(Zc,"displayName","Player");Ce(Zc,"propTypes",Rb.propTypes);Ce(Zc,"defaultProps",Rb.defaultProps);var p6=Object.create,el=Object.defineProperty,m6=Object.getOwnPropertyDescriptor,g6=Object.getOwnPropertyNames,y6=Object.getPrototypeOf,v6=Object.prototype.hasOwnProperty,_6=(t,e,n)=>e in t?el(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,w6=(t,e)=>{for(var n in e)el(t,n,{get:e[n],enumerable:!0})},jb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of g6(e))!v6.call(t,s)&&s!==n&&el(t,s,{get:()=>e[s],enumerable:!(r=m6(e,s))||r.enumerable});return t},tl=(t,e,n)=>(n=t!=null?p6(y6(t)):{},jb(!t||!t.__esModule?el(n,"default",{value:t,enumerable:!0}):n,t)),x6=t=>jb(el({},"__esModule",{value:!0}),t),ke=(t,e,n)=>(_6(t,typeof e!="symbol"?e+"":e,n),n),Ob={};w6(Ob,{createReactPlayer:()=>k6});var E6=x6(Ob),Zs=tl(O),T6=tl(tb),_h=tl(DV),h_=tl(Eb),Uo=Ab,Db=Xc,I6=tl(c6);const b6=(0,Db.lazy)(()=>Pt(()=>import("./Preview-BB5pfEJo.js").then(t=>t.P),[])),N6=typeof window<"u"&&window.document&&typeof document<"u",S6=typeof Id<"u"&&Id.window&&Id.window.document,A6=Object.keys(Uo.propTypes),P6=N6||S6?Zs.Suspense:()=>null,Ao=[],k6=(t,e)=>{var n;return n=class extends Zs.Component{constructor(){super(...arguments),ke(this,"state",{showPreview:!!this.props.light}),ke(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),ke(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),ke(this,"showPreview",()=>{this.setState({showPreview:!0})}),ke(this,"getDuration",()=>this.player?this.player.getDuration():null),ke(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),ke(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),ke(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),ke(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),ke(this,"handleReady",()=>{this.props.onReady(this)}),ke(this,"getActivePlayer",(0,_h.default)(r=>{for(const s of[...Ao,...t])if(s.canPlay(r))return s;return e||null})),ke(this,"getConfig",(0,_h.default)((r,s)=>{const{config:i}=this.props;return T6.default.all([Uo.defaultProps.config,Uo.defaultProps.config[s]||{},i,i[s]||{}])})),ke(this,"getAttributes",(0,_h.default)(r=>(0,Db.omit)(this.props,A6))),ke(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return Zs.default.createElement(I6.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,h_.default)(this.props,r)||!(0,h_.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:l,previewAriaLabel:c}=this.props;return Zs.default.createElement(b6,{url:r,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:c,oEmbedUrl:l,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:o,fallback:l,wrapper:c}=this.props,{showPreview:d}=this.state,f=this.getAttributes(r),g=typeof c=="string"?this.references.wrapper:void 0;return Zs.default.createElement(c,{ref:g,style:{...s,width:i,height:o},...f},Zs.default.createElement(P6,{fallback:l},d?this.renderPreview(r):this.renderActivePlayer(r)))}},ke(n,"displayName","ReactPlayer"),ke(n,"propTypes",Uo.propTypes),ke(n,"defaultProps",Uo.defaultProps),ke(n,"addCustomPlayer",r=>{Ao.push(r)}),ke(n,"removeCustomPlayers",()=>{Ao.length=0}),ke(n,"canPlay",r=>{for(const s of[...Ao,...t])if(s.canPlay(r))return!0;return!1}),ke(n,"canEnablePIP",r=>{for(const s of[...Ao,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var C6=Object.create,ed=Object.defineProperty,R6=Object.getOwnPropertyDescriptor,j6=Object.getOwnPropertyNames,O6=Object.getPrototypeOf,D6=Object.prototype.hasOwnProperty,L6=(t,e)=>{for(var n in e)ed(t,n,{get:e[n],enumerable:!0})},Lb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of j6(e))!D6.call(t,s)&&s!==n&&ed(t,s,{get:()=>e[s],enumerable:!(r=R6(e,s))||r.enumerable});return t},M6=(t,e,n)=>(n=t!=null?C6(O6(t)):{},Lb(!t||!t.__esModule?ed(n,"default",{value:t,enumerable:!0}):n,t)),V6=t=>Lb(ed({},"__esModule",{value:!0}),t),Mb={};L6(Mb,{default:()=>B6});var U6=V6(Mb),Jf=M6(PV),F6=E6;const $6=Jf.default[Jf.default.length-1];var B6=(0,F6.createReactPlayer)(Jf.default,$6);const z6=p_(U6);function q6({lesson:t,onComplete:e,onNext:n,isCompleted:r}){const{user:s}=rn(),[i,o]=O.useState(!1),[l,c]=O.useState(0),[d,f]=O.useState(r),g=x=>{c(x.played*100),x.played>.9&&!d&&m()},m=async()=>{if(!t.courseId||!s)return;(await fi.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[u.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?u.jsx(z6,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:g,onPlay:()=>o(!0),onPause:()=>o(!1)}):u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"text-white text-center",children:[u.jsx(rc,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"Aucune vido disponible"})]})})}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),u.jsx("p",{className:"text-gray-600",children:t.description})]}),d&&u.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[u.jsx(qt,{className:"w-5 h-5 mr-1"}),u.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Progression"}),u.jsxs("span",{children:[Math.round(l),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${l}%`}})})]}),u.jsxs("div",{className:"flex space-x-3",children:[!d&&u.jsxs("button",{onClick:m,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[u.jsx(qt,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),n&&u.jsxs("button",{onClick:n,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",u.jsx(ea,{className:"w-5 h-5 ml-2"})]})]}),t.content&&u.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),u.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function H6({courseId:t,currentLessonId:e,onLessonSelect:n,userProgress:r=[],isPurchased:s=!1}){const[i,o]=O.useState([]),[l,c]=O.useState(new Set),[d,f]=O.useState(!0);O.useEffect(()=>{g()},[t]);const g=async()=>{f(!0);const N=await ic.getModulesByCourse(t);if(N.success){const P=await Promise.all(N.modules.map(async E=>{const w=await ic.getLessonsByModule(E.id);return{...E,lessons:w.lessons||[]}}));o(P),P.length>0&&c(new Set([P[0].id]))}f(!1)},m=N=>{c(P=>{const E=new Set(P);return E.has(N)?E.delete(N):E.add(N),E})},x=N=>fi.isLessonCompleted(N,r),b=N=>N.reduce((P,E)=>P+(E.duration||0),0);return d?u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:i.map((N,P)=>u.jsxs("div",{children:[u.jsx("button",{onClick:()=>m(N.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:u.jsxs("div",{className:"flex items-center",children:[l.has(N.id)?u.jsx(K4,{className:"w-5 h-5 text-gray-400 mr-2"}):u.jsx(G4,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsxs("div",{className:"text-left",children:[u.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",P+1,": ",N.title]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[N.lessons.length," leon",N.lessons.length>1?"s":"",b(N.lessons)>0&&u.jsxs("span",{children:["  ",b(N.lessons)," min"]})]})]})]})}),l.has(N.id)&&u.jsx("div",{className:"bg-gray-50",children:N.lessons.map((E,w)=>{const y=x(E.id),k=E.id===e,L=s||E.isFree;return u.jsxs("button",{onClick:()=>L&&n(E),disabled:!L,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${k?"bg-green-50 border-l-4 border-green-500":""} ${L?"":"opacity-50 cursor-not-allowed"}`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"mr-3",children:L?y?u.jsx(qt,{className:"w-4 h-4 text-green-500"}):u.jsx(rc,{className:"w-4 h-4 text-gray-400"}):u.jsx(Bi,{className:"w-4 h-4 text-gray-400"})}),u.jsxs("div",{className:"text-left",children:[u.jsxs("p",{className:`text-sm ${k?"font-medium text-green-700":"text-gray-700"}`,children:[w+1,". ",E.title]}),E.duration&&u.jsxs("p",{className:"text-xs text-gray-500",children:[E.duration," min"]})]})]}),E.isFree&&u.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},E.id)})})]},N.id))}),i.length===0&&u.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:u.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}function W6(){const{courseId:t}=Ox(),e=vn(),{user:n,userProfile:r}=rn(),[s,i]=O.useState(null),[o,l]=O.useState(null),[c,d]=O.useState([]),[f,g]=O.useState("overview"),[m,x]=O.useState(!0),[b,N]=O.useState(!1),[P,E]=O.useState([]);O.useEffect(()=>{w()},[t,n]);const w=async()=>{var C;if(!t||!n)return;x(!0);const I=await Yn.getCourseById(t);I.success&&i(I.course);const _=(C=r==null?void 0:r.purchasedCourses)==null?void 0:C.includes(t);N(_);const S=await fi.getCourseProgress(n.uid,t);S.success&&d(S.progress.completedLessons||[]);const T=await ic.getModulesByCourse(t);if(T.success){const R=[];for(const A of T.modules){const Ke=await ic.getLessonsByModule(A.id);Ke.success&&R.push(...Ke.lessons.map(jn=>({...jn,moduleId:A.id,courseId:t})))}if(E(R),R.length>0&&!o){const A=R.find(Ke=>!fi.isLessonCompleted(Ke.id,S.progress.completedLessons||[]));l(A||R[0])}}x(!1)},y=I=>{d(_=>[..._,I])},k=()=>{if(!o||P.length===0)return;const I=P.findIndex(_=>_.id===o.id);I<P.length-1&&l(P[I+1])},L=()=>P.length===0?0:fi.calculateProgressPercentage(c.length,P.length);if(m)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),u.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!b)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),u.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const V=[{id:"overview",name:"Aperu",icon:jt},{id:"resources",name:"Ressources",icon:J4},{id:"qna",name:"Q&A",icon:eM}];return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(Ra,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",L(),"%"]}),u.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:u.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${L()}%`}})})]})]})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&u.jsx(q6,{lesson:o,onComplete:y,onNext:k,isCompleted:fi.isLessonCompleted(o.id,c)}),u.jsxs("div",{className:"bg-white rounded-lg shadow",children:[u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"flex -mb-px",children:V.map(I=>{const _=I.icon;return u.jsxs("button",{onClick:()=>g(I.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===I.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(_,{className:"w-4 h-4 mr-2"}),I.name]},I.id)})})}),u.jsxs("div",{className:"p-6",children:[f==="overview"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),u.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),u.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((I,_)=>u.jsx("li",{children:I},_))})]})]}),f==="resources"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),u.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),u.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(H6,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:l,userProgress:c,isPurchased:b})})]})})]})}function K6(){const{userProfile:t}=rn(),[e,n]=O.useState([]),[r,s]=O.useState(!0);return O.useEffect(()=>{setTimeout(()=>{n([{id:"1",title:"Introduction  React",instructor:"Ahmed Ben Salem",progress:65,totalLessons:12,completedLessons:8,lastAccessed:"2024-01-15",image:"/assets/images/default-course.png"},{id:"2",title:"JavaScript Avanc",instructor:"Fatma Aloui",progress:30,totalLessons:15,completedLessons:5,lastAccessed:"2024-01-10",image:"/assets/images/default-course.png"}]),s(!1)},1e3)},[]),r?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(jt,{className:"mx-auto h-12 w-12 text-gray-400"}),u.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun cours"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par explorer nos cours disponibles."}),u.jsx("div",{className:"mt-6",children:u.jsx(de,{to:"/courses",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Explorer les cours"})})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[u.jsx("img",{src:i.image,alt:i.title,className:"w-full h-48 object-cover"}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Par ",i.instructor]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Progression"}),u.jsxs("span",{children:[i.progress,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${i.progress}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(qt,{className:"w-4 h-4 mr-1 text-green-500"}),u.jsxs("span",{children:[i.completedLessons,"/",i.totalLessons," leons"]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Rs,{className:"w-4 h-4 mr-1"}),u.jsxs("span",{children:["Dernire fois: ",i.lastAccessed]})]})]}),u.jsxs(de,{to:`/course/${i.id}/learn`,className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center",children:[u.jsx(Kf,{className:"w-4 h-4 mr-2"}),"Continuer"]})]})]},i.id))})})]})}function G6(){const[t]=WA(),e=vn(),[n,r]=O.useState(!0),[s,i]=O.useState(null),[o,l]=O.useState(null),[c,d]=O.useState(0),f=10,g=O.useRef(null),m=O.useRef(!1),x=O.useRef(0),b=t.get("payment_id"),N=b==null?void 0:b.split("?")[0],P=O.useCallback(async()=>{if(m.current)return;if(!N){l("ID de paiement manquant"),r(!1),m.current=!0;return}x.current+=1;const E=x.current;if(console.log(` Tentative ${E}/${f}`),d(E),E>f){console.log(" Limite de tentatives atteinte (dpasse)"),l("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0;return}if(m.current||(await new Promise(y=>setTimeout(y,3e3)),m.current))return;const w=await JI.verifyPayment(N);if(console.log(" Rsultat vrification:",w),!m.current)if(w.success)if(i(w.data),w.status==="completed")console.log(" Paiement confirm !"),r(!1),m.current=!0,g.current&&clearTimeout(g.current);else if(w.status==="pending")if(x.current>=f)console.log(" Limite de tentatives atteinte (pending)"),l("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0,g.current&&clearTimeout(g.current);else if(x.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let y="https://plateforme-educative.onrender.com";if(y&&y.includes("/"))try{const k=new URL(y);k.pathname!=="/"&&!y.includes("/sync-payment")&&(y=`${k.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",y)}if(y){const k=y.endsWith("/")?y.slice(0,-1):y;let L=`${k}/sync-payment`;const V="https://plateforme-educative.onrender.com";let I=null;if(V&&V.includes("/")&&V!==k)try{const T=new URL(V);if(T.pathname&&T.pathname!=="/"){const C=T.pathname.endsWith("/")?T.pathname.slice(0,-1):T.pathname;I=`${T.origin}${C}/sync-payment`}}catch{}console.log(" URL backend pour sync:",L),I&&console.log(" URL fallback pour sync:",I);const _=T=>fetch(T,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:N})});(I?_(L).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),_(I))):_(L)).then(T=>T.ok?T.json():(console.error(" Erreur HTTP sync:",T.status,T.statusText),null)).then(T=>{T&&T.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),m.current=!0):(console.warn(" Synchronisation choue:",T),!m.current&&x.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(P,3e3)))}).catch(T=>{console.error(" Erreur synchronisation:",T),console.error("   Type:",T.name),console.error("   Message:",T.message),!m.current&&x.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(P,3e3))})}else!m.current&&x.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(P,3e3))}catch(y){console.warn(" Erreur synchronisation:",y),!m.current&&x.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(P,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(P,3e3);else w.status==="failed"?(l("Le paiement a chou"),r(!1),m.current=!0,g.current&&clearTimeout(g.current)):x.current>=f?(l("Le paiement a un statut inconnu. Veuillez contacter le support."),r(!1),m.current=!0,g.current&&clearTimeout(g.current)):(console.log(" Statut inconnu:",w.status,"- Nouvelle tentative..."),g.current=setTimeout(P,3e3));else console.error(" Erreur vrification:",w.error),l(w.error||"Erreur lors de la vrification du paiement"),r(!1),m.current=!0,g.current&&clearTimeout(g.current)},[N,f]);return O.useEffect(()=>(m.current=!1,x.current=0,d(0),g.current&&(clearTimeout(g.current),g.current=null),N?(console.log(" Vrification du paiement:",N),P()):(l("ID de paiement manquant"),r(!1),m.current=!0),()=>{g.current&&(clearTimeout(g.current),g.current=null),m.current=!0}),[N,P]),n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(og,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),u.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),c>0&&u.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",c,"/",f,"..."]})]})}):o?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),u.jsx("p",{className:"text-gray-600 mb-6",children:o}),u.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(qt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",u.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),u.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",u.jsx(ea,{className:"w-5 h-5"})]}),u.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function Q6(){const t=vn();return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(aM,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[u.jsx(Ra,{className:"w-5 h-5"}),"Ressayer le paiement"]}),u.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function Y6({onCreate:t}){const[e,n]=O.useState(""),[r,s]=O.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const l={id:Date.now().toString(),title:e.trim(),body:r.trim(),time:new Date().toLocaleString()};t&&t(l),n(""),s("")};return u.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),u.jsx("div",{className:"mb-2",children:u.jsx("input",{value:e,onChange:o=>n(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),u.jsx("div",{className:"mb-3",children:u.jsx("textarea",{value:r,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function X6({notification:t}){return u.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),u.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function J6({items:t=[]}){return t.length?u.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>u.jsx(X6,{notification:e},e.id))}):u.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function Z6({onEdit:t,onAddNew:e}){const[n,r]=O.useState([]),[s,i]=O.useState(!0),[o,l]=O.useState(""),[c,d]=O.useState("all"),[f,g]=O.useState("");O.useEffect(()=>{m()},[c,f]);const m=async()=>{i(!0);const y={};c!=="all"&&(y.category=c),f&&(y.status=f);const k=await Yn.getCourses(y);k.success&&r(k.courses),i(!1)},x=async y=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await Yn.deleteCourse(y)).success&&m()},b=async y=>{(await Yn.duplicateCourse(y)).success&&m()},N=async y=>{(await Yn.publishCourse(y)).success&&m()},P=n.filter(y=>{var k,L;return((k=y.title)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))||((L=y.description)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))}),E=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],w=y=>{const k={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},V={draft:Rs,published:qt,archived:$4}[y]||Rs;return u.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${k[y]||k.draft}`,children:[u.jsx(V,{className:"w-3 h-3 mr-1"}),y==="draft"?"Brouillon":y==="published"?"Publi":"Archiv"]})};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),u.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[u.jsx(rM,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),u.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(QI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:E.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))}),u.jsxs("select",{value:f,onChange:y=>g(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"",children:"Tous les statuts"}),u.jsx("option",{value:"draft",children:"Brouillon"}),u.jsx("option",{value:"published",children:"Publi"}),u.jsx("option",{value:"archived",children:"Archiv"})]})]})}),s?u.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),u.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):P.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(y=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center",children:[y.thumbnail&&u.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-12 h-12 rounded object-cover mr-3"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),u.jsx("div",{className:"text-sm text-gray-500",children:y.level==="beginner"?"Dbutant":y.level==="intermediate"?"Intermdiaire":y.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.category}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[y.price," TND"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.enrolledCount||0}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(y.status)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsxs("div",{className:"flex justify-end space-x-2",children:[y.status==="draft"&&u.jsx("button",{onClick:()=>N(y.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:u.jsx(qt,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>t(y),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:u.jsx(tM,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>b(y.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:u.jsx(Y4,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>x(y.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:u.jsx(iM,{className:"w-5 h-5"})})]})})]},y.id))})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(y=>y.status==="published").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),u.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.filter(y=>y.status==="draft").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.reduce((y,k)=>y+(k.enrolledCount||0),0)})]})]})]})}function eU({courseId:t=null,onSave:e,onCancel:n}){const[r,s]=O.useState(!1),[i,o]=O.useState(null),[l,c]=O.useState(null),[d,f]=O.useState(null),[g,m]=O.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});O.useEffect(()=>{t&&x()},[t]);const x=async()=>{s(!0);const y=await Yn.getCourseById(t);y.success?(m(y.course),y.course.thumbnail&&c(y.course.thumbnail)):o(y.error),s(!1)},b=y=>{const{name:k,value:L}=y.target;m(V=>({...V,[k]:L}))},N=y=>{const k=y.target.files[0];if(k){f(k);const L=new FileReader;L.onloadend=()=>{c(L.result)},L.readAsDataURL(k)}},P=async y=>{y.preventDefault(),s(!0),o(null);try{let k;t?k=await Yn.updateCourse(t,g,d):k=await Yn.createCourse(g,d),k.success?e==null||e(k):o(k.error)}catch(k){o(k.message)}finally{s(!1)}},E=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],w=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return u.jsxs("form",{onSubmit:P,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),u.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Gf,{className:"w-6 h-6"})})]}),i&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),u.jsx("input",{type:"text",name:"title",value:g.title,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),u.jsx("input",{type:"text",name:"shortDescription",value:g.shortDescription,onChange:b,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.shortDescription.length,"/150 caractres"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),u.jsx("textarea",{name:"description",value:g.description,onChange:b,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),u.jsx("select",{name:"category",value:g.category,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:E.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),u.jsx("select",{name:"level",value:g.level,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:w.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),u.jsx("input",{type:"number",name:"price",value:g.price,onChange:b,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),u.jsx("input",{type:"text",name:"duration",value:g.duration,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),u.jsx("input",{type:"text",name:"instructor",value:g.instructor,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),u.jsxs("select",{name:"language",value:g.language,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"fr",children:"Franais"}),u.jsx("option",{value:"ar",children:"Arabe"}),u.jsx("option",{value:"en",children:"Anglais"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),u.jsxs("div",{className:"flex items-start space-x-4",children:[l&&u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:l,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),u.jsx("button",{type:"button",onClick:()=>{c(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:u.jsx(Gf,{className:"w-4 h-4"})})]}),u.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[u.jsx(oM,{className:"w-8 h-8 mb-2"}),u.jsx("span",{className:"text-sm",children:"Choisir une image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),u.jsx("input",{type:"url",name:"videoUrl",value:g.videoUrl,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),u.jsx("textarea",{name:"requirements",value:g.requirements,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),u.jsx("textarea",{name:"outcomes",value:g.outcomes,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),u.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[u.jsx(GI,{className:"w-4 h-4 mr-2"}),r?"Enregistrement...":"Enregistrer"]})]})]})}function tU({onSelectDetails:t}){const[e,n]=O.useState([]),[r,s]=O.useState(!0),[i,o]=O.useState(""),[l,c]=O.useState("all");O.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const x=(await ec(Cr(he,"users"))).docs.map(b=>({id:b.id,...b.data()}));n(x)}catch(m){console.error("Error loading users:",m)}finally{s(!1)}},f=async(m,x)=>{try{const b=x==="admin"?"student":"admin",N=Me(he,"users",m);await Pn(N,{role:b}),d()}catch(b){console.error("Error updating role:",b),alert("Erreur lors de la mise  jour du rle")}},g=e.filter(m=>{var N,P;const x=((N=m.displayName)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))||((P=m.email)==null?void 0:P.toLowerCase().includes(i.toLowerCase())),b=l==="all"||m.role===l;return x&&b});return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),u.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(QI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"all",children:"Tous les rles"}),u.jsx("option",{value:"student",children:"tudiants"}),u.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),r?u.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),u.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):g.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(m=>{var x,b,N;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:m.photoURL?u.jsx("img",{src:m.photoURL,alt:m.displayName,className:"h-10 w-10 rounded-full"}):u.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:u.jsx(lg,{className:"w-6 h-6 text-green-600"})})}),u.jsx("div",{className:"ml-4",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.displayName||"Sans nom"})})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:m.role==="admin"?u.jsxs(u.Fragment,{children:[u.jsx(YI,{className:"w-3 h-3 mr-1"}),"Admin"]}):u.jsxs(u.Fragment,{children:[u.jsx(jt,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((x=m.purchasedCourses)==null?void 0:x.length)||0}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(H4,{className:"w-4 h-4 mr-1"}),((N=(b=m.createdAt)==null?void 0:b.toDate)==null?void 0:N.call(b).toLocaleDateString())||"N/A"]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>f(m.id,m.role),className:`${m.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:m.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},m.id)})})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(m=>m.role==="student").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),u.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(m=>m.role==="admin").length})]})]})]})}function f_(){const{userProfile:t}=rn(),[e,n]=O.useState("overview"),[r,s]=O.useState(!1),[i,o]=O.useState(null),[l,c]=O.useState([]),d=[{id:"overview",name:"Vue d'ensemble",icon:z4},{id:"courses",name:"Cours",icon:jt},{id:"users",name:"Utilisateurs",icon:Qc},{id:"settings",name:"Paramtres",icon:sM}],f=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],g=()=>{switch(e){case"overview":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(m=>u.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.name}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),u.jsx("div",{className:`text-sm font-medium ${m.changeType==="positive"?"text-green-600":"text-red-600"}`,children:m.change})]})},m.name))}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx(Y6,{onCreate:m=>c(x=>[m,...x])})}),u.jsx("div",{children:u.jsxs("div",{className:"bg-white rounded-lg shadow",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),u.jsx("div",{className:"p-4",children:u.jsx(J6,{items:l})})]})})]})]});case"courses":return u.jsx("div",{className:"space-y-6",children:r?u.jsx(eU,{courseId:i==null?void 0:i.id,onSave:()=>{s(!1),o(null)},onCancel:()=>{s(!1),o(null)}}):u.jsx(Z6,{onEdit:m=>{o(m),s(!0)},onAddNew:()=>{o(null),s(!0)}})});case"users":return u.jsx(tU,{});case"settings":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),u.jsx("div",{className:"bg-white rounded-lg shadow",children:u.jsx("div",{className:"p-6",children:u.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),u.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",t==null?void 0:t.displayName]})]})})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"flex space-x-8",children:[u.jsx("div",{className:"w-64",children:u.jsx("nav",{className:"space-y-1",children:d.map(m=>{const x=m.icon;return u.jsxs("button",{onClick:()=>n(m.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${e===m.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[u.jsx(x,{className:"w-5 h-5 mr-3"}),m.name]},m.id)})})}),u.jsx("div",{className:"flex-1",children:g()})]})})]})}function nU(){return u.jsx(BA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:u.jsx(M4,{children:u.jsxs(OA,{children:[u.jsx(Et,{path:"/login",element:u.jsx(lM,{})}),u.jsx(Et,{path:"/register",element:u.jsx(uM,{})}),u.jsx(Et,{path:"/forgot-password",element:u.jsx(cM,{})}),u.jsx(Et,{path:"/",element:u.jsx(fM,{})}),u.jsx(Et,{path:"/courses",element:u.jsx(xM,{})}),u.jsx(Et,{path:"/courses/:id",element:u.jsx(EM,{})}),u.jsx(Et,{path:"/payment/success",element:u.jsx(G6,{})}),u.jsx(Et,{path:"/payment/cancel",element:u.jsx(Q6,{})}),u.jsx(Et,{path:"/profile",element:u.jsx(No,{children:u.jsx(pM,{})})}),u.jsx(Et,{path:XI,element:u.jsx(No,{adminOnly:!0,children:u.jsx(f_,{})})}),u.jsx(Et,{path:dM,element:u.jsx(No,{adminOnly:!0,children:u.jsx(f_,{})})}),u.jsx(Et,{path:"/my-courses",element:u.jsx(No,{children:u.jsx(K6,{})})}),u.jsx(Et,{path:"/course/:courseId/view",element:u.jsx(No,{children:u.jsx(W6,{})})}),u.jsx(Et,{path:"*",element:u.jsx(mf,{to:"/",replace:!0})})]})})})}wh.createRoot(document.getElementById("root")).render(u.jsx(b_.StrictMode,{children:u.jsx(nU,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{Pt as _,p_ as g,xV as p,O as r,Xc as u};
