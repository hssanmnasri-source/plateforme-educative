function c1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var Pd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function u1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var xx={exports:{}},hu={},_x={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fa=Symbol.for("react.element"),d1=Symbol.for("react.portal"),h1=Symbol.for("react.fragment"),f1=Symbol.for("react.strict_mode"),p1=Symbol.for("react.profiler"),m1=Symbol.for("react.provider"),g1=Symbol.for("react.context"),y1=Symbol.for("react.forward_ref"),v1=Symbol.for("react.suspense"),x1=Symbol.for("react.memo"),_1=Symbol.for("react.lazy"),my=Symbol.iterator;function w1(t){return t===null||typeof t!="object"?null:(t=my&&t[my]||t["@@iterator"],typeof t=="function"?t:null)}var wx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},bx=Object.assign,Ex={};function eo(t,e,n){this.props=t,this.context=e,this.refs=Ex,this.updater=n||wx}eo.prototype.isReactComponent={};eo.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};eo.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Tx(){}Tx.prototype=eo.prototype;function np(t,e,n){this.props=t,this.context=e,this.refs=Ex,this.updater=n||wx}var rp=np.prototype=new Tx;rp.constructor=np;bx(rp,eo.prototype);rp.isPureReactComponent=!0;var gy=Array.isArray,Nx=Object.prototype.hasOwnProperty,sp={current:null},Ix={key:!0,ref:!0,__self:!0,__source:!0};function Sx(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Nx.call(e,r)&&!Ix.hasOwnProperty(r)&&(s[r]=e[r]);var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){for(var u=Array(c),d=0;d<c;d++)u[d]=arguments[d+2];s.children=u}if(t&&t.defaultProps)for(r in c=t.defaultProps,c)s[r]===void 0&&(s[r]=c[r]);return{$$typeof:Fa,type:t,key:i,ref:o,props:s,_owner:sp.current}}function b1(t,e){return{$$typeof:Fa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ip(t){return typeof t=="object"&&t!==null&&t.$$typeof===Fa}function E1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var yy=/\/+/g;function jd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?E1(""+t.key):e.toString(36)}function Ql(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Fa:case d1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+jd(o,0):r,gy(s)?(n="",t!=null&&(n=t.replace(yy,"$&/")+"/"),Ql(s,e,n,"",function(d){return d})):s!=null&&(ip(s)&&(s=b1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(yy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",gy(t))for(var c=0;c<t.length;c++){i=t[c];var u=r+jd(i,c);o+=Ql(i,e,n,u,s)}else if(u=w1(t),typeof u=="function")for(t=u.call(t),c=0;!(i=t.next()).done;)i=i.value,u=r+jd(i,c++),o+=Ql(i,e,n,u,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Il(t,e,n){if(t==null)return t;var r=[],s=0;return Ql(t,r,"","",function(i){return e.call(n,i,s++)}),r}function T1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Yl={transition:null},N1={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Yl,ReactCurrentOwner:sp};function Cx(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:Il,forEach:function(t,e,n){Il(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Il(t,function(){e++}),e},toArray:function(t){return Il(t,function(e){return e})||[]},only:function(t){if(!ip(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=eo;re.Fragment=h1;re.Profiler=p1;re.PureComponent=np;re.StrictMode=f1;re.Suspense=v1;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N1;re.act=Cx;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=bx({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=sp.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var c=t.type.defaultProps;for(u in e)Nx.call(e,u)&&!Ix.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&c!==void 0?c[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){c=Array(u);for(var d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}return{$$typeof:Fa,type:t.type,key:s,ref:i,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:g1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:m1,_context:t},t.Consumer=t};re.createElement=Sx;re.createFactory=function(t){var e=Sx.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:y1,render:t}};re.isValidElement=ip;re.lazy=function(t){return{$$typeof:_1,_payload:{_status:-1,_result:t},_init:T1}};re.memo=function(t,e){return{$$typeof:x1,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Yl.transition;Yl.transition={};try{t()}finally{Yl.transition=e}};re.unstable_act=Cx;re.useCallback=function(t,e){return At.current.useCallback(t,e)};re.useContext=function(t){return At.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return At.current.useDeferredValue(t)};re.useEffect=function(t,e){return At.current.useEffect(t,e)};re.useId=function(){return At.current.useId()};re.useImperativeHandle=function(t,e,n){return At.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return At.current.useMemo(t,e)};re.useReducer=function(t,e,n){return At.current.useReducer(t,e,n)};re.useRef=function(t){return At.current.useRef(t)};re.useState=function(t){return At.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return At.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return At.current.useTransition()};re.version="18.3.1";_x.exports=re;var j=_x.exports;const Ax=vx(j),I1=c1({__proto__:null,default:Ax},[j]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S1=j,C1=Symbol.for("react.element"),A1=Symbol.for("react.fragment"),k1=Object.prototype.hasOwnProperty,P1=S1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,j1={key:!0,ref:!0,__self:!0,__source:!0};function kx(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)k1.call(e,r)&&!j1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:C1,type:t,key:i,ref:o,props:s,_owner:P1.current}}hu.Fragment=A1;hu.jsx=kx;hu.jsxs=kx;xx.exports=hu;var a=xx.exports,Ih={},Px={exports:{}},Zt={},jx={exports:{}},Rx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e($,G){var X=$.length;$.push(G);e:for(;0<X;){var _e=X-1>>>1,pe=$[_e];if(0<s(pe,G))$[_e]=G,$[X]=pe,X=_e;else break e}}function n($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var G=$[0],X=$.pop();if(X!==G){$[0]=X;e:for(var _e=0,pe=$.length,Re=pe>>>1;_e<Re;){var Vn=2*(_e+1)-1,Un=$[Vn],Fn=Vn+1,zn=$[Fn];if(0>s(Un,X))Fn<pe&&0>s(zn,Un)?($[_e]=zn,$[Fn]=X,_e=Fn):($[_e]=Un,$[Vn]=X,_e=Vn);else if(Fn<pe&&0>s(zn,X))$[_e]=zn,$[Fn]=X,_e=Fn;else break e}}return G}function s($,G){var X=$.sortIndex-G.sortIndex;return X!==0?X:$.id-G.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var u=[],d=[],f=1,p=null,m=3,_=!1,I=!1,b=!1,N=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y($){for(var G=n(d);G!==null;){if(G.callback===null)r(d);else if(G.startTime<=$)r(d),G.sortIndex=G.expirationTime,e(u,G);else break;G=n(d)}}function T($){if(b=!1,y($),!I)if(n(u)!==null)I=!0,Y(D);else{var G=n(d);G!==null&&xe(T,G.startTime-$)}}function D($,G){I=!1,b&&(b=!1,v(E),E=-1),_=!0;var X=m;try{for(y(G),p=n(u);p!==null&&(!(p.expirationTime>G)||$&&!A());){var _e=p.callback;if(typeof _e=="function"){p.callback=null,m=p.priorityLevel;var pe=_e(p.expirationTime<=G);G=t.unstable_now(),typeof pe=="function"?p.callback=pe:p===n(u)&&r(u),y(G)}else r(u);p=n(u)}if(p!==null)var Re=!0;else{var Vn=n(d);Vn!==null&&xe(T,Vn.startTime-G),Re=!1}return Re}finally{p=null,m=X,_=!1}}var M=!1,C=null,E=-1,P=5,S=-1;function A(){return!(t.unstable_now()-S<P)}function R(){if(C!==null){var $=t.unstable_now();S=$;var G=!0;try{G=C(!0,$)}finally{G?k():(M=!1,C=null)}}else M=!1}var k;if(typeof x=="function")k=function(){x(R)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ke=fe.port2;fe.port1.onmessage=R,k=function(){ke.postMessage(null)}}else k=function(){N(R,0)};function Y($){C=$,M||(M=!0,k())}function xe($,G){E=N(function(){$(t.unstable_now())},G)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function($){$.callback=null},t.unstable_continueExecution=function(){I||_||(I=!0,Y(D))},t.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<$?Math.floor(1e3/$):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function($){switch(m){case 1:case 2:case 3:var G=3;break;default:G=m}var X=m;m=G;try{return $()}finally{m=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function($,G){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=m;m=$;try{return G()}finally{m=X}},t.unstable_scheduleCallback=function($,G,X){var _e=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?_e+X:_e):X=_e,$){case 1:var pe=-1;break;case 2:pe=250;break;case 5:pe=1073741823;break;case 4:pe=1e4;break;default:pe=5e3}return pe=X+pe,$={id:f++,callback:G,priorityLevel:$,startTime:X,expirationTime:pe,sortIndex:-1},X>_e?($.sortIndex=X,e(d,$),n(u)===null&&$===n(d)&&(b?(v(E),E=-1):b=!0,xe(T,X-_e))):($.sortIndex=pe,e(u,$),I||_||(I=!0,Y(D))),$},t.unstable_shouldYield=A,t.unstable_wrapCallback=function($){var G=m;return function(){var X=m;m=G;try{return $.apply(this,arguments)}finally{m=X}}}})(Rx);jx.exports=Rx;var R1=jx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var O1=j,Jt=R1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Ox=new Set,oa={};function Ms(t,e){ji(t,e),ji(t+"Capture",e)}function ji(t,e){for(oa[t]=e,t=0;t<e.length;t++)Ox.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sh=Object.prototype.hasOwnProperty,D1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vy={},xy={};function L1(t){return Sh.call(xy,t)?!0:Sh.call(vy,t)?!1:D1.test(t)?xy[t]=!0:(vy[t]=!0,!1)}function M1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function V1(t,e,n,r){if(e===null||typeof e>"u"||M1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function kt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new kt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new kt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new kt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new kt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new kt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new kt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new kt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new kt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new kt(t,5,!1,t.toLowerCase(),null,!1,!1)});var op=/[\-:]([a-z])/g;function ap(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(op,ap);st[e]=new kt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(op,ap);st[e]=new kt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(op,ap);st[e]=new kt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new kt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new kt(t,1,!1,t.toLowerCase(),null,!0,!0)});function lp(t,e,n,r){var s=st.hasOwnProperty(e)?st[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(V1(e,n,s,r)&&(n=null),r||s===null?L1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var pr=O1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Sl=Symbol.for("react.element"),oi=Symbol.for("react.portal"),ai=Symbol.for("react.fragment"),cp=Symbol.for("react.strict_mode"),Ch=Symbol.for("react.profiler"),Dx=Symbol.for("react.provider"),Lx=Symbol.for("react.context"),up=Symbol.for("react.forward_ref"),Ah=Symbol.for("react.suspense"),kh=Symbol.for("react.suspense_list"),dp=Symbol.for("react.memo"),Tr=Symbol.for("react.lazy"),Mx=Symbol.for("react.offscreen"),_y=Symbol.iterator;function To(t){return t===null||typeof t!="object"?null:(t=_y&&t[_y]||t["@@iterator"],typeof t=="function"?t:null)}var Ce=Object.assign,Rd;function Do(t){if(Rd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Rd=e&&e[1]||""}return`
`+Rd+t}var Od=!1;function Dd(t,e){if(!t||Od)return"";Od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,c=i.length-1;1<=o&&0<=c&&s[o]!==i[c];)c--;for(;1<=o&&0<=c;o--,c--)if(s[o]!==i[c]){if(o!==1||c!==1)do if(o--,c--,0>c||s[o]!==i[c]){var u=`
`+s[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=c);break}}}finally{Od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Do(t):""}function U1(t){switch(t.tag){case 5:return Do(t.type);case 16:return Do("Lazy");case 13:return Do("Suspense");case 19:return Do("SuspenseList");case 0:case 2:case 15:return t=Dd(t.type,!1),t;case 11:return t=Dd(t.type.render,!1),t;case 1:return t=Dd(t.type,!0),t;default:return""}}function Ph(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case ai:return"Fragment";case oi:return"Portal";case Ch:return"Profiler";case cp:return"StrictMode";case Ah:return"Suspense";case kh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Lx:return(t.displayName||"Context")+".Consumer";case Dx:return(t._context.displayName||"Context")+".Provider";case up:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case dp:return e=t.displayName||null,e!==null?e:Ph(t.type)||"Memo";case Tr:e=t._payload,t=t._init;try{return Ph(t(e))}catch{}}return null}function F1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ph(e);case 8:return e===cp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Kr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Vx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function z1(t){var e=Vx(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Cl(t){t._valueTracker||(t._valueTracker=z1(t))}function Ux(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Vx(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function _c(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function jh(t,e){var n=e.checked;return Ce({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function wy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Kr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Fx(t,e){e=e.checked,e!=null&&lp(t,"checked",e,!1)}function Rh(t,e){Fx(t,e);var n=Kr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Oh(t,e.type,n):e.hasOwnProperty("defaultValue")&&Oh(t,e.type,Kr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function by(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Oh(t,e,n){(e!=="number"||_c(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Lo=Array.isArray;function vi(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Kr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Dh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Ce({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Ey(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Lo(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Kr(n)}}function zx(t,e){var n=Kr(e.value),r=Kr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Ty(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function $x(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?$x(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Al,Bx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Al=Al||document.createElement("div"),Al.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Al.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},$1=["Webkit","ms","Moz","O"];Object.keys(Wo).forEach(function(t){$1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Wo[e]=Wo[t]})});function qx(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Wo.hasOwnProperty(t)&&Wo[t]?(""+e).trim():e+"px"}function Hx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=qx(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var B1=Ce({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Mh(t,e){if(e){if(B1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Vh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uh=null;function hp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Fh=null,xi=null,_i=null;function Ny(t){if(t=Ba(t)){if(typeof Fh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=yu(e),Fh(t.stateNode,t.type,e))}}function Wx(t){xi?_i?_i.push(t):_i=[t]:xi=t}function Kx(){if(xi){var t=xi,e=_i;if(_i=xi=null,Ny(t),e)for(t=0;t<e.length;t++)Ny(e[t])}}function Gx(t,e){return t(e)}function Qx(){}var Ld=!1;function Yx(t,e,n){if(Ld)return t(e,n);Ld=!0;try{return Gx(t,e,n)}finally{Ld=!1,(xi!==null||_i!==null)&&(Qx(),Kx())}}function la(t,e){var n=t.stateNode;if(n===null)return null;var r=yu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var zh=!1;if(or)try{var No={};Object.defineProperty(No,"passive",{get:function(){zh=!0}}),window.addEventListener("test",No,No),window.removeEventListener("test",No,No)}catch{zh=!1}function q1(t,e,n,r,s,i,o,c,u){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Ko=!1,wc=null,bc=!1,$h=null,H1={onError:function(t){Ko=!0,wc=t}};function W1(t,e,n,r,s,i,o,c,u){Ko=!1,wc=null,q1.apply(H1,arguments)}function K1(t,e,n,r,s,i,o,c,u){if(W1.apply(this,arguments),Ko){if(Ko){var d=wc;Ko=!1,wc=null}else throw Error(F(198));bc||(bc=!0,$h=d)}}function Vs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Xx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Iy(t){if(Vs(t)!==t)throw Error(F(188))}function G1(t){var e=t.alternate;if(!e){if(e=Vs(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return Iy(s),t;if(i===r)return Iy(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function Jx(t){return t=G1(t),t!==null?Zx(t):null}function Zx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Zx(t);if(e!==null)return e;t=t.sibling}return null}var e_=Jt.unstable_scheduleCallback,Sy=Jt.unstable_cancelCallback,Q1=Jt.unstable_shouldYield,Y1=Jt.unstable_requestPaint,Me=Jt.unstable_now,X1=Jt.unstable_getCurrentPriorityLevel,fp=Jt.unstable_ImmediatePriority,t_=Jt.unstable_UserBlockingPriority,Ec=Jt.unstable_NormalPriority,J1=Jt.unstable_LowPriority,n_=Jt.unstable_IdlePriority,fu=null,An=null;function Z1(t){if(An&&typeof An.onCommitFiberRoot=="function")try{An.onCommitFiberRoot(fu,t,void 0,(t.current.flags&128)===128)}catch{}}var vn=Math.clz32?Math.clz32:nI,eI=Math.log,tI=Math.LN2;function nI(t){return t>>>=0,t===0?32:31-(eI(t)/tI|0)|0}var kl=64,Pl=4194304;function Mo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Tc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var c=o&~s;c!==0?r=Mo(c):(i&=o,i!==0&&(r=Mo(i)))}else o=n&~s,o!==0?r=Mo(o):i!==0&&(r=Mo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-vn(e),s=1<<n,r|=t[n],e&=~s;return r}function rI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-vn(i),c=1<<o,u=s[o];u===-1?(!(c&n)||c&r)&&(s[o]=rI(c,e)):u<=e&&(t.expiredLanes|=c),i&=~c}}function Bh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function r_(){var t=kl;return kl<<=1,!(kl&4194240)&&(kl=64),t}function Md(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function za(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vn(e),t[e]=n}function iI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-vn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function pp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-vn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var de=0;function s_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var i_,mp,o_,a_,l_,qh=!1,jl=[],Dr=null,Lr=null,Mr=null,ca=new Map,ua=new Map,Ir=[],oI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cy(t,e){switch(t){case"focusin":case"focusout":Dr=null;break;case"dragenter":case"dragleave":Lr=null;break;case"mouseover":case"mouseout":Mr=null;break;case"pointerover":case"pointerout":ca.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":ua.delete(e.pointerId)}}function Io(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ba(e),e!==null&&mp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function aI(t,e,n,r,s){switch(e){case"focusin":return Dr=Io(Dr,t,e,n,r,s),!0;case"dragenter":return Lr=Io(Lr,t,e,n,r,s),!0;case"mouseover":return Mr=Io(Mr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return ca.set(i,Io(ca.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,ua.set(i,Io(ua.get(i)||null,t,e,n,r,s)),!0}return!1}function c_(t){var e=hs(t.target);if(e!==null){var n=Vs(e);if(n!==null){if(e=n.tag,e===13){if(e=Xx(n),e!==null){t.blockedOn=e,l_(t.priority,function(){o_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Hh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Uh=r,n.target.dispatchEvent(r),Uh=null}else return e=Ba(n),e!==null&&mp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ay(t,e,n){Xl(t)&&n.delete(e)}function lI(){qh=!1,Dr!==null&&Xl(Dr)&&(Dr=null),Lr!==null&&Xl(Lr)&&(Lr=null),Mr!==null&&Xl(Mr)&&(Mr=null),ca.forEach(Ay),ua.forEach(Ay)}function So(t,e){t.blockedOn===e&&(t.blockedOn=null,qh||(qh=!0,Jt.unstable_scheduleCallback(Jt.unstable_NormalPriority,lI)))}function da(t){function e(s){return So(s,t)}if(0<jl.length){So(jl[0],t);for(var n=1;n<jl.length;n++){var r=jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Dr!==null&&So(Dr,t),Lr!==null&&So(Lr,t),Mr!==null&&So(Mr,t),ca.forEach(e),ua.forEach(e),n=0;n<Ir.length;n++)r=Ir[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ir.length&&(n=Ir[0],n.blockedOn===null);)c_(n),n.blockedOn===null&&Ir.shift()}var wi=pr.ReactCurrentBatchConfig,Nc=!0;function cI(t,e,n,r){var s=de,i=wi.transition;wi.transition=null;try{de=1,gp(t,e,n,r)}finally{de=s,wi.transition=i}}function uI(t,e,n,r){var s=de,i=wi.transition;wi.transition=null;try{de=4,gp(t,e,n,r)}finally{de=s,wi.transition=i}}function gp(t,e,n,r){if(Nc){var s=Hh(t,e,n,r);if(s===null)Kd(t,e,r,Ic,n),Cy(t,r);else if(aI(s,t,e,n,r))r.stopPropagation();else if(Cy(t,r),e&4&&-1<oI.indexOf(t)){for(;s!==null;){var i=Ba(s);if(i!==null&&i_(i),i=Hh(t,e,n,r),i===null&&Kd(t,e,r,Ic,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Kd(t,e,r,null,n)}}var Ic=null;function Hh(t,e,n,r){if(Ic=null,t=hp(r),t=hs(t),t!==null)if(e=Vs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Xx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ic=t,null}function u_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(X1()){case fp:return 1;case t_:return 4;case Ec:case J1:return 16;case n_:return 536870912;default:return 16}default:return 16}}var Pr=null,yp=null,Jl=null;function d_(){if(Jl)return Jl;var t,e=yp,n=e.length,r,s="value"in Pr?Pr.value:Pr.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Jl=s.slice(t,1<r?1-r:void 0)}function Zl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Rl(){return!0}function ky(){return!1}function en(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var c in t)t.hasOwnProperty(c)&&(n=t[c],this[c]=n?n(i):i[c]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Rl:ky,this.isPropagationStopped=ky,this}return Ce(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Rl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Rl)},persist:function(){},isPersistent:Rl}),e}var to={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},vp=en(to),$a=Ce({},to,{view:0,detail:0}),dI=en($a),Vd,Ud,Co,pu=Ce({},$a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Co&&(Co&&t.type==="mousemove"?(Vd=t.screenX-Co.screenX,Ud=t.screenY-Co.screenY):Ud=Vd=0,Co=t),Vd)},movementY:function(t){return"movementY"in t?t.movementY:Ud}}),Py=en(pu),hI=Ce({},pu,{dataTransfer:0}),fI=en(hI),pI=Ce({},$a,{relatedTarget:0}),Fd=en(pI),mI=Ce({},to,{animationName:0,elapsedTime:0,pseudoElement:0}),gI=en(mI),yI=Ce({},to,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),vI=en(yI),xI=Ce({},to,{data:0}),jy=en(xI),_I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wI={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bI={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function EI(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=bI[t])?!!e[t]:!1}function xp(){return EI}var TI=Ce({},$a,{key:function(t){if(t.key){var e=_I[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Zl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?wI[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(t){return t.type==="keypress"?Zl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Zl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),NI=en(TI),II=Ce({},pu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ry=en(II),SI=Ce({},$a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),CI=en(SI),AI=Ce({},to,{propertyName:0,elapsedTime:0,pseudoElement:0}),kI=en(AI),PI=Ce({},pu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),jI=en(PI),RI=[9,13,27,32],_p=or&&"CompositionEvent"in window,Go=null;or&&"documentMode"in document&&(Go=document.documentMode);var OI=or&&"TextEvent"in window&&!Go,h_=or&&(!_p||Go&&8<Go&&11>=Go),Oy=" ",Dy=!1;function f_(t,e){switch(t){case"keyup":return RI.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function p_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var li=!1;function DI(t,e){switch(t){case"compositionend":return p_(e);case"keypress":return e.which!==32?null:(Dy=!0,Oy);case"textInput":return t=e.data,t===Oy&&Dy?null:t;default:return null}}function LI(t,e){if(li)return t==="compositionend"||!_p&&f_(t,e)?(t=d_(),Jl=yp=Pr=null,li=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return h_&&e.locale!=="ko"?null:e.data;default:return null}}var MI={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ly(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!MI[t.type]:e==="textarea"}function m_(t,e,n,r){Wx(r),e=Sc(e,"onChange"),0<e.length&&(n=new vp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Qo=null,ha=null;function VI(t){I_(t,0)}function mu(t){var e=di(t);if(Ux(e))return t}function UI(t,e){if(t==="change")return e}var g_=!1;if(or){var zd;if(or){var $d="oninput"in document;if(!$d){var My=document.createElement("div");My.setAttribute("oninput","return;"),$d=typeof My.oninput=="function"}zd=$d}else zd=!1;g_=zd&&(!document.documentMode||9<document.documentMode)}function Vy(){Qo&&(Qo.detachEvent("onpropertychange",y_),ha=Qo=null)}function y_(t){if(t.propertyName==="value"&&mu(ha)){var e=[];m_(e,ha,t,hp(t)),Yx(VI,e)}}function FI(t,e,n){t==="focusin"?(Vy(),Qo=e,ha=n,Qo.attachEvent("onpropertychange",y_)):t==="focusout"&&Vy()}function zI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return mu(ha)}function $I(t,e){if(t==="click")return mu(e)}function BI(t,e){if(t==="input"||t==="change")return mu(e)}function qI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var wn=typeof Object.is=="function"?Object.is:qI;function fa(t,e){if(wn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!Sh.call(e,s)||!wn(t[s],e[s]))return!1}return!0}function Uy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Fy(t,e){var n=Uy(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Uy(n)}}function v_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?v_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function x_(){for(var t=window,e=_c();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=_c(t.document)}return e}function wp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function HI(t){var e=x_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&v_(n.ownerDocument.documentElement,n)){if(r!==null&&wp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Fy(n,i);var o=Fy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var WI=or&&"documentMode"in document&&11>=document.documentMode,ci=null,Wh=null,Yo=null,Kh=!1;function zy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Kh||ci==null||ci!==_c(r)||(r=ci,"selectionStart"in r&&wp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Yo&&fa(Yo,r)||(Yo=r,r=Sc(Wh,"onSelect"),0<r.length&&(e=new vp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=ci)))}function Ol(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ui={animationend:Ol("Animation","AnimationEnd"),animationiteration:Ol("Animation","AnimationIteration"),animationstart:Ol("Animation","AnimationStart"),transitionend:Ol("Transition","TransitionEnd")},Bd={},__={};or&&(__=document.createElement("div").style,"AnimationEvent"in window||(delete ui.animationend.animation,delete ui.animationiteration.animation,delete ui.animationstart.animation),"TransitionEvent"in window||delete ui.transitionend.transition);function gu(t){if(Bd[t])return Bd[t];if(!ui[t])return t;var e=ui[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in __)return Bd[t]=e[n];return t}var w_=gu("animationend"),b_=gu("animationiteration"),E_=gu("animationstart"),T_=gu("transitionend"),N_=new Map,$y="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){N_.set(t,e),Ms(e,[t])}for(var qd=0;qd<$y.length;qd++){var Hd=$y[qd],KI=Hd.toLowerCase(),GI=Hd[0].toUpperCase()+Hd.slice(1);Jr(KI,"on"+GI)}Jr(w_,"onAnimationEnd");Jr(b_,"onAnimationIteration");Jr(E_,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(T_,"onTransitionEnd");ji("onMouseEnter",["mouseout","mouseover"]);ji("onMouseLeave",["mouseout","mouseover"]);ji("onPointerEnter",["pointerout","pointerover"]);ji("onPointerLeave",["pointerout","pointerover"]);Ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Vo));function By(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,K1(r,e,void 0,t),t.currentTarget=null}function I_(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var c=r[o],u=c.instance,d=c.currentTarget;if(c=c.listener,u!==i&&s.isPropagationStopped())break e;By(s,c,d),i=u}else for(o=0;o<r.length;o++){if(c=r[o],u=c.instance,d=c.currentTarget,c=c.listener,u!==i&&s.isPropagationStopped())break e;By(s,c,d),i=u}}}if(bc)throw t=$h,bc=!1,$h=null,t}function be(t,e){var n=e[Jh];n===void 0&&(n=e[Jh]=new Set);var r=t+"__bubble";n.has(r)||(S_(e,t,2,!1),n.add(r))}function Wd(t,e,n){var r=0;e&&(r|=4),S_(n,t,r,e)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function pa(t){if(!t[Dl]){t[Dl]=!0,Ox.forEach(function(n){n!=="selectionchange"&&(QI.has(n)||Wd(n,!1,t),Wd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Dl]||(e[Dl]=!0,Wd("selectionchange",!1,e))}}function S_(t,e,n,r){switch(u_(e)){case 1:var s=cI;break;case 4:s=uI;break;default:s=gp}n=s.bind(null,e,n,t),s=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Kd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var c=r.stateNode.containerInfo;if(c===s||c.nodeType===8&&c.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===s||u.nodeType===8&&u.parentNode===s))return;o=o.return}for(;c!==null;){if(o=hs(c),o===null)return;if(u=o.tag,u===5||u===6){r=i=o;continue e}c=c.parentNode}}r=r.return}Yx(function(){var d=i,f=hp(n),p=[];e:{var m=N_.get(t);if(m!==void 0){var _=vp,I=t;switch(t){case"keypress":if(Zl(n)===0)break e;case"keydown":case"keyup":_=NI;break;case"focusin":I="focus",_=Fd;break;case"focusout":I="blur",_=Fd;break;case"beforeblur":case"afterblur":_=Fd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_=Py;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_=fI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_=CI;break;case w_:case b_:case E_:_=gI;break;case T_:_=kI;break;case"scroll":_=dI;break;case"wheel":_=jI;break;case"copy":case"cut":case"paste":_=vI;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_=Ry}var b=(e&4)!==0,N=!b&&t==="scroll",v=b?m!==null?m+"Capture":null:m;b=[];for(var x=d,y;x!==null;){y=x;var T=y.stateNode;if(y.tag===5&&T!==null&&(y=T,v!==null&&(T=la(x,v),T!=null&&b.push(ma(x,T,y)))),N)break;x=x.return}0<b.length&&(m=new _(m,I,null,n,f),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",_=t==="mouseout"||t==="pointerout",m&&n!==Uh&&(I=n.relatedTarget||n.fromElement)&&(hs(I)||I[ar]))break e;if((_||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,_?(I=n.relatedTarget||n.toElement,_=d,I=I?hs(I):null,I!==null&&(N=Vs(I),I!==N||I.tag!==5&&I.tag!==6)&&(I=null)):(_=null,I=d),_!==I)){if(b=Py,T="onMouseLeave",v="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ry,T="onPointerLeave",v="onPointerEnter",x="pointer"),N=_==null?m:di(_),y=I==null?m:di(I),m=new b(T,x+"leave",_,n,f),m.target=N,m.relatedTarget=y,T=null,hs(f)===d&&(b=new b(v,x+"enter",I,n,f),b.target=y,b.relatedTarget=N,T=b),N=T,_&&I)t:{for(b=_,v=I,x=0,y=b;y;y=Xs(y))x++;for(y=0,T=v;T;T=Xs(T))y++;for(;0<x-y;)b=Xs(b),x--;for(;0<y-x;)v=Xs(v),y--;for(;x--;){if(b===v||v!==null&&b===v.alternate)break t;b=Xs(b),v=Xs(v)}b=null}else b=null;_!==null&&qy(p,m,_,b,!1),I!==null&&N!==null&&qy(p,N,I,b,!0)}}e:{if(m=d?di(d):window,_=m.nodeName&&m.nodeName.toLowerCase(),_==="select"||_==="input"&&m.type==="file")var D=UI;else if(Ly(m))if(g_)D=BI;else{D=zI;var M=FI}else(_=m.nodeName)&&_.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(D=$I);if(D&&(D=D(t,d))){m_(p,D,n,f);break e}M&&M(t,m,d),t==="focusout"&&(M=m._wrapperState)&&M.controlled&&m.type==="number"&&Oh(m,"number",m.value)}switch(M=d?di(d):window,t){case"focusin":(Ly(M)||M.contentEditable==="true")&&(ci=M,Wh=d,Yo=null);break;case"focusout":Yo=Wh=ci=null;break;case"mousedown":Kh=!0;break;case"contextmenu":case"mouseup":case"dragend":Kh=!1,zy(p,n,f);break;case"selectionchange":if(WI)break;case"keydown":case"keyup":zy(p,n,f)}var C;if(_p)e:{switch(t){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else li?f_(t,n)&&(E="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(E="onCompositionStart");E&&(h_&&n.locale!=="ko"&&(li||E!=="onCompositionStart"?E==="onCompositionEnd"&&li&&(C=d_()):(Pr=f,yp="value"in Pr?Pr.value:Pr.textContent,li=!0)),M=Sc(d,E),0<M.length&&(E=new jy(E,t,null,n,f),p.push({event:E,listeners:M}),C?E.data=C:(C=p_(n),C!==null&&(E.data=C)))),(C=OI?DI(t,n):LI(t,n))&&(d=Sc(d,"onBeforeInput"),0<d.length&&(f=new jy("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=C))}I_(p,e)})}function ma(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=la(t,n),i!=null&&r.unshift(ma(t,i,s)),i=la(t,e),i!=null&&r.push(ma(t,i,s))),t=t.return}return r}function Xs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function qy(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var c=n,u=c.alternate,d=c.stateNode;if(u!==null&&u===r)break;c.tag===5&&d!==null&&(c=d,s?(u=la(n,i),u!=null&&o.unshift(ma(n,u,c))):s||(u=la(n,i),u!=null&&o.push(ma(n,u,c)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var YI=/\r\n?/g,XI=/\u0000|\uFFFD/g;function Hy(t){return(typeof t=="string"?t:""+t).replace(YI,`
`).replace(XI,"")}function Ll(t,e,n){if(e=Hy(e),Hy(t)!==e&&n)throw Error(F(425))}function Cc(){}var Gh=null,Qh=null;function Yh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Xh=typeof setTimeout=="function"?setTimeout:void 0,JI=typeof clearTimeout=="function"?clearTimeout:void 0,Wy=typeof Promise=="function"?Promise:void 0,ZI=typeof queueMicrotask=="function"?queueMicrotask:typeof Wy<"u"?function(t){return Wy.resolve(null).then(t).catch(eS)}:Xh;function eS(t){setTimeout(function(){throw t})}function Gd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);da(e)}function Vr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ky(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var no=Math.random().toString(36).slice(2),Cn="__reactFiber$"+no,ga="__reactProps$"+no,ar="__reactContainer$"+no,Jh="__reactEvents$"+no,tS="__reactListeners$"+no,nS="__reactHandles$"+no;function hs(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ky(t);t!==null;){if(n=t[Cn])return n;t=Ky(t)}return e}t=n,n=t.parentNode}return null}function Ba(t){return t=t[Cn]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function di(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function yu(t){return t[ga]||null}var Zh=[],hi=-1;function Zr(t){return{current:t}}function Ee(t){0>hi||(t.current=Zh[hi],Zh[hi]=null,hi--)}function ve(t,e){hi++,Zh[hi]=t.current,t.current=e}var Gr={},_t=Zr(Gr),Vt=Zr(!1),bs=Gr;function Ri(t,e){var n=t.type.contextTypes;if(!n)return Gr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Ut(t){return t=t.childContextTypes,t!=null}function Ac(){Ee(Vt),Ee(_t)}function Gy(t,e,n){if(_t.current!==Gr)throw Error(F(168));ve(_t,e),ve(Vt,n)}function C_(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,F1(t)||"Unknown",s));return Ce({},n,r)}function kc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Gr,bs=_t.current,ve(_t,t),ve(Vt,Vt.current),!0}function Qy(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=C_(t,e,bs),r.__reactInternalMemoizedMergedChildContext=t,Ee(Vt),Ee(_t),ve(_t,t)):Ee(Vt),ve(Vt,n)}var Wn=null,vu=!1,Qd=!1;function A_(t){Wn===null?Wn=[t]:Wn.push(t)}function rS(t){vu=!0,A_(t)}function es(){if(!Qd&&Wn!==null){Qd=!0;var t=0,e=de;try{var n=Wn;for(de=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Wn=null,vu=!1}catch(s){throw Wn!==null&&(Wn=Wn.slice(t+1)),e_(fp,es),s}finally{de=e,Qd=!1}}return null}var fi=[],pi=0,Pc=null,jc=0,tn=[],nn=0,Es=null,Gn=1,Qn="";function ls(t,e){fi[pi++]=jc,fi[pi++]=Pc,Pc=t,jc=e}function k_(t,e,n){tn[nn++]=Gn,tn[nn++]=Qn,tn[nn++]=Es,Es=t;var r=Gn;t=Qn;var s=32-vn(r)-1;r&=~(1<<s),n+=1;var i=32-vn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,Gn=1<<32-vn(e)+s|n<<s|r,Qn=i+t}else Gn=1<<i|n<<s|r,Qn=t}function bp(t){t.return!==null&&(ls(t,1),k_(t,1,0))}function Ep(t){for(;t===Pc;)Pc=fi[--pi],fi[pi]=null,jc=fi[--pi],fi[pi]=null;for(;t===Es;)Es=tn[--nn],tn[nn]=null,Qn=tn[--nn],tn[nn]=null,Gn=tn[--nn],tn[nn]=null}var Xt=null,Gt=null,Te=!1,mn=null;function P_(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Gt=Vr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Gt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Es!==null?{id:Gn,overflow:Qn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Xt=t,Gt=null,!0):!1;default:return!1}}function ef(t){return(t.mode&1)!==0&&(t.flags&128)===0}function tf(t){if(Te){var e=Gt;if(e){var n=e;if(!Yy(t,e)){if(ef(t))throw Error(F(418));e=Vr(n.nextSibling);var r=Xt;e&&Yy(t,e)?P_(r,n):(t.flags=t.flags&-4097|2,Te=!1,Xt=t)}}else{if(ef(t))throw Error(F(418));t.flags=t.flags&-4097|2,Te=!1,Xt=t}}}function Xy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function Ml(t){if(t!==Xt)return!1;if(!Te)return Xy(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Yh(t.type,t.memoizedProps)),e&&(e=Gt)){if(ef(t))throw j_(),Error(F(418));for(;e;)P_(t,e),e=Vr(e.nextSibling)}if(Xy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Gt=Vr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Gt=null}}else Gt=Xt?Vr(t.stateNode.nextSibling):null;return!0}function j_(){for(var t=Gt;t;)t=Vr(t.nextSibling)}function Oi(){Gt=Xt=null,Te=!1}function Tp(t){mn===null?mn=[t]:mn.push(t)}var sS=pr.ReactCurrentBatchConfig;function Ao(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var c=s.refs;o===null?delete c[i]:c[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Vl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Jy(t){var e=t._init;return e(t._payload)}function R_(t){function e(v,x){if(t){var y=v.deletions;y===null?(v.deletions=[x],v.flags|=16):y.push(x)}}function n(v,x){if(!t)return null;for(;x!==null;)e(v,x),x=x.sibling;return null}function r(v,x){for(v=new Map;x!==null;)x.key!==null?v.set(x.key,x):v.set(x.index,x),x=x.sibling;return v}function s(v,x){return v=$r(v,x),v.index=0,v.sibling=null,v}function i(v,x,y){return v.index=y,t?(y=v.alternate,y!==null?(y=y.index,y<x?(v.flags|=2,x):y):(v.flags|=2,x)):(v.flags|=1048576,x)}function o(v){return t&&v.alternate===null&&(v.flags|=2),v}function c(v,x,y,T){return x===null||x.tag!==6?(x=nh(y,v.mode,T),x.return=v,x):(x=s(x,y),x.return=v,x)}function u(v,x,y,T){var D=y.type;return D===ai?f(v,x,y.props.children,T,y.key):x!==null&&(x.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Tr&&Jy(D)===x.type)?(T=s(x,y.props),T.ref=Ao(v,x,y),T.return=v,T):(T=oc(y.type,y.key,y.props,null,v.mode,T),T.ref=Ao(v,x,y),T.return=v,T)}function d(v,x,y,T){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=rh(y,v.mode,T),x.return=v,x):(x=s(x,y.children||[]),x.return=v,x)}function f(v,x,y,T,D){return x===null||x.tag!==7?(x=xs(y,v.mode,T,D),x.return=v,x):(x=s(x,y),x.return=v,x)}function p(v,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=nh(""+x,v.mode,y),x.return=v,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Sl:return y=oc(x.type,x.key,x.props,null,v.mode,y),y.ref=Ao(v,null,x),y.return=v,y;case oi:return x=rh(x,v.mode,y),x.return=v,x;case Tr:var T=x._init;return p(v,T(x._payload),y)}if(Lo(x)||To(x))return x=xs(x,v.mode,y,null),x.return=v,x;Vl(v,x)}return null}function m(v,x,y,T){var D=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return D!==null?null:c(v,x,""+y,T);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Sl:return y.key===D?u(v,x,y,T):null;case oi:return y.key===D?d(v,x,y,T):null;case Tr:return D=y._init,m(v,x,D(y._payload),T)}if(Lo(y)||To(y))return D!==null?null:f(v,x,y,T,null);Vl(v,y)}return null}function _(v,x,y,T,D){if(typeof T=="string"&&T!==""||typeof T=="number")return v=v.get(y)||null,c(x,v,""+T,D);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Sl:return v=v.get(T.key===null?y:T.key)||null,u(x,v,T,D);case oi:return v=v.get(T.key===null?y:T.key)||null,d(x,v,T,D);case Tr:var M=T._init;return _(v,x,y,M(T._payload),D)}if(Lo(T)||To(T))return v=v.get(y)||null,f(x,v,T,D,null);Vl(x,T)}return null}function I(v,x,y,T){for(var D=null,M=null,C=x,E=x=0,P=null;C!==null&&E<y.length;E++){C.index>E?(P=C,C=null):P=C.sibling;var S=m(v,C,y[E],T);if(S===null){C===null&&(C=P);break}t&&C&&S.alternate===null&&e(v,C),x=i(S,x,E),M===null?D=S:M.sibling=S,M=S,C=P}if(E===y.length)return n(v,C),Te&&ls(v,E),D;if(C===null){for(;E<y.length;E++)C=p(v,y[E],T),C!==null&&(x=i(C,x,E),M===null?D=C:M.sibling=C,M=C);return Te&&ls(v,E),D}for(C=r(v,C);E<y.length;E++)P=_(C,v,E,y[E],T),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?E:P.key),x=i(P,x,E),M===null?D=P:M.sibling=P,M=P);return t&&C.forEach(function(A){return e(v,A)}),Te&&ls(v,E),D}function b(v,x,y,T){var D=To(y);if(typeof D!="function")throw Error(F(150));if(y=D.call(y),y==null)throw Error(F(151));for(var M=D=null,C=x,E=x=0,P=null,S=y.next();C!==null&&!S.done;E++,S=y.next()){C.index>E?(P=C,C=null):P=C.sibling;var A=m(v,C,S.value,T);if(A===null){C===null&&(C=P);break}t&&C&&A.alternate===null&&e(v,C),x=i(A,x,E),M===null?D=A:M.sibling=A,M=A,C=P}if(S.done)return n(v,C),Te&&ls(v,E),D;if(C===null){for(;!S.done;E++,S=y.next())S=p(v,S.value,T),S!==null&&(x=i(S,x,E),M===null?D=S:M.sibling=S,M=S);return Te&&ls(v,E),D}for(C=r(v,C);!S.done;E++,S=y.next())S=_(C,v,E,S.value,T),S!==null&&(t&&S.alternate!==null&&C.delete(S.key===null?E:S.key),x=i(S,x,E),M===null?D=S:M.sibling=S,M=S);return t&&C.forEach(function(R){return e(v,R)}),Te&&ls(v,E),D}function N(v,x,y,T){if(typeof y=="object"&&y!==null&&y.type===ai&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case Sl:e:{for(var D=y.key,M=x;M!==null;){if(M.key===D){if(D=y.type,D===ai){if(M.tag===7){n(v,M.sibling),x=s(M,y.props.children),x.return=v,v=x;break e}}else if(M.elementType===D||typeof D=="object"&&D!==null&&D.$$typeof===Tr&&Jy(D)===M.type){n(v,M.sibling),x=s(M,y.props),x.ref=Ao(v,M,y),x.return=v,v=x;break e}n(v,M);break}else e(v,M);M=M.sibling}y.type===ai?(x=xs(y.props.children,v.mode,T,y.key),x.return=v,v=x):(T=oc(y.type,y.key,y.props,null,v.mode,T),T.ref=Ao(v,x,y),T.return=v,v=T)}return o(v);case oi:e:{for(M=y.key;x!==null;){if(x.key===M)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(v,x.sibling),x=s(x,y.children||[]),x.return=v,v=x;break e}else{n(v,x);break}else e(v,x);x=x.sibling}x=rh(y,v.mode,T),x.return=v,v=x}return o(v);case Tr:return M=y._init,N(v,x,M(y._payload),T)}if(Lo(y))return I(v,x,y,T);if(To(y))return b(v,x,y,T);Vl(v,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(v,x.sibling),x=s(x,y),x.return=v,v=x):(n(v,x),x=nh(y,v.mode,T),x.return=v,v=x),o(v)):n(v,x)}return N}var Di=R_(!0),O_=R_(!1),Rc=Zr(null),Oc=null,mi=null,Np=null;function Ip(){Np=mi=Oc=null}function Sp(t){var e=Rc.current;Ee(Rc),t._currentValue=e}function nf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function bi(t,e){Oc=t,Np=mi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Lt=!0),t.firstContext=null)}function an(t){var e=t._currentValue;if(Np!==t)if(t={context:t,memoizedValue:e,next:null},mi===null){if(Oc===null)throw Error(F(308));mi=t,Oc.dependencies={lanes:0,firstContext:t}}else mi=mi.next=t;return e}var fs=null;function Cp(t){fs===null?fs=[t]:fs.push(t)}function D_(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,Cp(e)):(n.next=s.next,s.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Nr=!1;function Ap(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function L_(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function er(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ur(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ae&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,lr(t,n)}return s=r.interleaved,s===null?(e.next=e,Cp(r)):(e.next=s.next,s.next=e),r.interleaved=e,lr(t,n)}function ec(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}function Zy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Dc(t,e,n,r){var s=t.updateQueue;Nr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,c=s.shared.pending;if(c!==null){s.shared.pending=null;var u=c,d=u.next;u.next=null,o===null?i=d:o.next=d,o=u;var f=t.alternate;f!==null&&(f=f.updateQueue,c=f.lastBaseUpdate,c!==o&&(c===null?f.firstBaseUpdate=d:c.next=d,f.lastBaseUpdate=u))}if(i!==null){var p=s.baseState;o=0,f=d=u=null,c=i;do{var m=c.lane,_=c.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:_,lane:0,tag:c.tag,payload:c.payload,callback:c.callback,next:null});e:{var I=t,b=c;switch(m=e,_=n,b.tag){case 1:if(I=b.payload,typeof I=="function"){p=I.call(_,p,m);break e}p=I;break e;case 3:I.flags=I.flags&-65537|128;case 0:if(I=b.payload,m=typeof I=="function"?I.call(_,p,m):I,m==null)break e;p=Ce({},p,m);break e;case 2:Nr=!0}}c.callback!==null&&c.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[c]:m.push(c))}else _={eventTime:_,lane:m,tag:c.tag,payload:c.payload,callback:c.callback,next:null},f===null?(d=f=_,u=p):f=f.next=_,o|=m;if(c=c.next,c===null){if(c=s.shared.pending,c===null)break;m=c,c=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(u=p),s.baseState=u,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ns|=o,t.lanes=o,t.memoizedState=p}}function ev(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var qa={},kn=Zr(qa),ya=Zr(qa),va=Zr(qa);function ps(t){if(t===qa)throw Error(F(174));return t}function kp(t,e){switch(ve(va,e),ve(ya,t),ve(kn,qa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Lh(e,t)}Ee(kn),ve(kn,e)}function Li(){Ee(kn),Ee(ya),Ee(va)}function M_(t){ps(va.current);var e=ps(kn.current),n=Lh(e,t.type);e!==n&&(ve(ya,t),ve(kn,n))}function Pp(t){ya.current===t&&(Ee(kn),Ee(ya))}var Ie=Zr(0);function Lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Yd=[];function jp(){for(var t=0;t<Yd.length;t++)Yd[t]._workInProgressVersionPrimary=null;Yd.length=0}var tc=pr.ReactCurrentDispatcher,Xd=pr.ReactCurrentBatchConfig,Ts=0,Se=null,Be=null,Ke=null,Mc=!1,Xo=!1,xa=0,iS=0;function ct(){throw Error(F(321))}function Rp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!wn(t[n],e[n]))return!1;return!0}function Op(t,e,n,r,s,i){if(Ts=i,Se=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,tc.current=t===null||t.memoizedState===null?cS:uS,t=n(r,s),Xo){i=0;do{if(Xo=!1,xa=0,25<=i)throw Error(F(301));i+=1,Ke=Be=null,e.updateQueue=null,tc.current=dS,t=n(r,s)}while(Xo)}if(tc.current=Vc,e=Be!==null&&Be.next!==null,Ts=0,Ke=Be=Se=null,Mc=!1,e)throw Error(F(300));return t}function Dp(){var t=xa!==0;return xa=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function ln(){if(Be===null){var t=Se.alternate;t=t!==null?t.memoizedState:null}else t=Be.next;var e=Ke===null?Se.memoizedState:Ke.next;if(e!==null)Ke=e,Be=t;else{if(t===null)throw Error(F(310));Be=t,t={memoizedState:Be.memoizedState,baseState:Be.baseState,baseQueue:Be.baseQueue,queue:Be.queue,next:null},Ke===null?Se.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function _a(t,e){return typeof e=="function"?e(t):e}function Jd(t){var e=ln(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Be,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var c=o=null,u=null,d=i;do{var f=d.lane;if((Ts&f)===f)u!==null&&(u=u.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};u===null?(c=u=p,o=r):u=u.next=p,Se.lanes|=f,Ns|=f}d=d.next}while(d!==null&&d!==i);u===null?o=r:u.next=c,wn(r,e.memoizedState)||(Lt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Se.lanes|=i,Ns|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Zd(t){var e=ln(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);wn(i,e.memoizedState)||(Lt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function V_(){}function U_(t,e){var n=Se,r=ln(),s=e(),i=!wn(r.memoizedState,s);if(i&&(r.memoizedState=s,Lt=!0),r=r.queue,Lp($_.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,wa(9,z_.bind(null,n,r,s,e),void 0,null),Ge===null)throw Error(F(349));Ts&30||F_(n,e,s)}return s}function F_(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function z_(t,e,n,r){e.value=n,e.getSnapshot=r,B_(e)&&q_(t)}function $_(t,e,n){return n(function(){B_(e)&&q_(t)})}function B_(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!wn(t,n)}catch{return!0}}function q_(t){var e=lr(t,1);e!==null&&xn(e,t,1,-1)}function tv(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_a,lastRenderedState:t},e.queue=t,t=t.dispatch=lS.bind(null,Se,t),[e.memoizedState,t]}function wa(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Se.updateQueue,e===null?(e={lastEffect:null,stores:null},Se.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function H_(){return ln().memoizedState}function nc(t,e,n,r){var s=Sn();Se.flags|=t,s.memoizedState=wa(1|e,n,void 0,r===void 0?null:r)}function xu(t,e,n,r){var s=ln();r=r===void 0?null:r;var i=void 0;if(Be!==null){var o=Be.memoizedState;if(i=o.destroy,r!==null&&Rp(r,o.deps)){s.memoizedState=wa(e,n,i,r);return}}Se.flags|=t,s.memoizedState=wa(1|e,n,i,r)}function nv(t,e){return nc(8390656,8,t,e)}function Lp(t,e){return xu(2048,8,t,e)}function W_(t,e){return xu(4,2,t,e)}function K_(t,e){return xu(4,4,t,e)}function G_(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Q_(t,e,n){return n=n!=null?n.concat([t]):null,xu(4,4,G_.bind(null,e,t),n)}function Mp(){}function Y_(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function X_(t,e){var n=ln();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Rp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function J_(t,e,n){return Ts&21?(wn(n,e)||(n=r_(),Se.lanes|=n,Ns|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Lt=!0),t.memoizedState=n)}function oS(t,e){var n=de;de=n!==0&&4>n?n:4,t(!0);var r=Xd.transition;Xd.transition={};try{t(!1),e()}finally{de=n,Xd.transition=r}}function Z_(){return ln().memoizedState}function aS(t,e,n){var r=zr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ew(t))tw(e,n);else if(n=D_(t,e,n,r),n!==null){var s=St();xn(n,t,r,s),nw(n,e,r)}}function lS(t,e,n){var r=zr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ew(t))tw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,c=i(o,n);if(s.hasEagerState=!0,s.eagerState=c,wn(c,o)){var u=e.interleaved;u===null?(s.next=s,Cp(e)):(s.next=u.next,u.next=s),e.interleaved=s;return}}catch{}finally{}n=D_(t,e,s,r),n!==null&&(s=St(),xn(n,t,r,s),nw(n,e,r))}}function ew(t){var e=t.alternate;return t===Se||e!==null&&e===Se}function tw(t,e){Xo=Mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function nw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,pp(t,n)}}var Vc={readContext:an,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},cS={readContext:an,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:an,useEffect:nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,nc(4194308,4,G_.bind(null,e,t),n)},useLayoutEffect:function(t,e){return nc(4194308,4,t,e)},useInsertionEffect:function(t,e){return nc(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Sn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=aS.bind(null,Se,t),[r.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:tv,useDebugValue:Mp,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=tv(!1),e=t[0];return t=oS.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Se,s=Sn();if(Te){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),Ge===null)throw Error(F(349));Ts&30||F_(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,nv($_.bind(null,r,i,t),[t]),r.flags|=2048,wa(9,z_.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=Sn(),e=Ge.identifierPrefix;if(Te){var n=Qn,r=Gn;n=(r&~(1<<32-vn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=xa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=iS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},uS={readContext:an,useCallback:Y_,useContext:an,useEffect:Lp,useImperativeHandle:Q_,useInsertionEffect:W_,useLayoutEffect:K_,useMemo:X_,useReducer:Jd,useRef:H_,useState:function(){return Jd(_a)},useDebugValue:Mp,useDeferredValue:function(t){var e=ln();return J_(e,Be.memoizedState,t)},useTransition:function(){var t=Jd(_a)[0],e=ln().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:U_,useId:Z_,unstable_isNewReconciler:!1},dS={readContext:an,useCallback:Y_,useContext:an,useEffect:Lp,useImperativeHandle:Q_,useInsertionEffect:W_,useLayoutEffect:K_,useMemo:X_,useReducer:Zd,useRef:H_,useState:function(){return Zd(_a)},useDebugValue:Mp,useDeferredValue:function(t){var e=ln();return Be===null?e.memoizedState=t:J_(e,Be.memoizedState,t)},useTransition:function(){var t=Zd(_a)[0],e=ln().memoizedState;return[t,e]},useMutableSource:V_,useSyncExternalStore:U_,useId:Z_,unstable_isNewReconciler:!1};function fn(t,e){if(t&&t.defaultProps){e=Ce({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Ce({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var _u={isMounted:function(t){return(t=t._reactInternals)?Vs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=St(),s=zr(t),i=er(r,s);i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(xn(e,t,s,r),ec(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=St(),s=zr(t),i=er(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ur(t,i,s),e!==null&&(xn(e,t,s,r),ec(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=St(),r=zr(t),s=er(n,r);s.tag=2,e!=null&&(s.callback=e),e=Ur(t,s,r),e!==null&&(xn(e,t,r,n),ec(e,t,r))}};function rv(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!fa(n,r)||!fa(s,i):!0}function rw(t,e,n){var r=!1,s=Gr,i=e.contextType;return typeof i=="object"&&i!==null?i=an(i):(s=Ut(e)?bs:_t.current,r=e.contextTypes,i=(r=r!=null)?Ri(t,s):Gr),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_u,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function sv(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&_u.enqueueReplaceState(e,e.state,null)}function sf(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},Ap(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=an(i):(i=Ut(e)?bs:_t.current,s.context=Ri(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rf(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&_u.enqueueReplaceState(s,s.state,null),Dc(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Mi(t,e){try{var n="",r=e;do n+=U1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function eh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function of(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var hS=typeof WeakMap=="function"?WeakMap:Map;function sw(t,e,n){n=er(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Fc||(Fc=!0,gf=r),of(t,e)},n}function iw(t,e,n){n=er(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){of(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){of(t,e),typeof r!="function"&&(Fr===null?Fr=new Set([this]):Fr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iv(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new hS;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=IS.bind(null,t,e,n),e.then(t,t))}function ov(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function av(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=er(-1,1),e.tag=2,Ur(n,e,1))),n.lanes|=1),t)}var fS=pr.ReactCurrentOwner,Lt=!1;function It(t,e,n,r){e.child=t===null?O_(e,null,n,r):Di(e,t.child,n,r)}function lv(t,e,n,r,s){n=n.render;var i=e.ref;return bi(e,s),r=Op(t,e,n,r,i,s),n=Dp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(Te&&n&&bp(e),e.flags|=1,It(t,e,r,s),e.child)}function cv(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Hp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,ow(t,e,i,r,s)):(t=oc(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:fa,n(o,r)&&t.ref===e.ref)return cr(t,e,s)}return e.flags|=1,t=$r(i,r),t.ref=e.ref,t.return=e,e.child=t}function ow(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(fa(i,r)&&t.ref===e.ref)if(Lt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(Lt=!0);else return e.lanes=t.lanes,cr(t,e,s)}return af(t,e,n,r,s)}function aw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ve(yi,Kt),Kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ve(yi,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,ve(yi,Kt),Kt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,ve(yi,Kt),Kt|=r;return It(t,e,s,n),e.child}function lw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function af(t,e,n,r,s){var i=Ut(n)?bs:_t.current;return i=Ri(e,i),bi(e,s),n=Op(t,e,n,r,i,s),r=Dp(),t!==null&&!Lt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,cr(t,e,s)):(Te&&r&&bp(e),e.flags|=1,It(t,e,n,s),e.child)}function uv(t,e,n,r,s){if(Ut(n)){var i=!0;kc(e)}else i=!1;if(bi(e,s),e.stateNode===null)rc(t,e),rw(e,n,r),sf(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,c=e.memoizedProps;o.props=c;var u=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=an(d):(d=Ut(n)?bs:_t.current,d=Ri(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==r||u!==d)&&sv(e,o,r,d),Nr=!1;var m=e.memoizedState;o.state=m,Dc(e,r,o,s),u=e.memoizedState,c!==r||m!==u||Vt.current||Nr?(typeof f=="function"&&(rf(e,n,f,r),u=e.memoizedState),(c=Nr||rv(e,n,c,r,m,u,d))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=d,r=c):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,L_(t,e),c=e.memoizedProps,d=e.type===e.elementType?c:fn(e.type,c),o.props=d,p=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=an(u):(u=Ut(n)?bs:_t.current,u=Ri(e,u));var _=n.getDerivedStateFromProps;(f=typeof _=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(c!==p||m!==u)&&sv(e,o,r,u),Nr=!1,m=e.memoizedState,o.state=m,Dc(e,r,o,s);var I=e.memoizedState;c!==p||m!==I||Vt.current||Nr?(typeof _=="function"&&(rf(e,n,_,r),I=e.memoizedState),(d=Nr||rv(e,n,d,r,m,I,u)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,I,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,I,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=I),o.props=r,o.state=I,o.context=u,r=d):(typeof o.componentDidUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||c===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return lf(t,e,n,r,i,s)}function lf(t,e,n,r,s,i){lw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Qy(e,n,!1),cr(t,e,i);r=e.stateNode,fS.current=e;var c=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Di(e,t.child,null,i),e.child=Di(e,null,c,i)):It(t,e,c,i),e.memoizedState=r.state,s&&Qy(e,n,!0),e.child}function cw(t){var e=t.stateNode;e.pendingContext?Gy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Gy(t,e.context,!1),kp(t,e.containerInfo)}function dv(t,e,n,r,s){return Oi(),Tp(s),e.flags|=256,It(t,e,n,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(t){return{baseLanes:t,cachePool:null,transitions:null}}function uw(t,e,n){var r=e.pendingProps,s=Ie.current,i=!1,o=(e.flags&128)!==0,c;if((c=o)||(c=t!==null&&t.memoizedState===null?!1:(s&2)!==0),c?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),ve(Ie,s&1),t===null)return tf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Eu(o,r,0,null),t=xs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=uf(n),e.memoizedState=cf,t):Vp(e,o));if(s=t.memoizedState,s!==null&&(c=s.dehydrated,c!==null))return pS(t,e,o,r,c,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,c=s.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=$r(s,u),r.subtreeFlags=s.subtreeFlags&14680064),c!==null?i=$r(c,i):(i=xs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?uf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=cf,r}return i=t.child,t=i.sibling,r=$r(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Vp(t,e){return e=Eu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ul(t,e,n,r){return r!==null&&Tp(r),Di(e,t.child,null,n),t=Vp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function pS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=eh(Error(F(422))),Ul(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=Eu({mode:"visible",children:r.children},s,0,null),i=xs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Di(e,t.child,null,o),e.child.memoizedState=uf(o),e.memoizedState=cf,i);if(!(e.mode&1))return Ul(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;return r=c,i=Error(F(419)),r=eh(i,r,void 0),Ul(t,e,o,r)}if(c=(o&t.childLanes)!==0,Lt||c){if(r=Ge,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,lr(t,s),xn(r,t,s,-1))}return qp(),r=eh(Error(F(421))),Ul(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=SS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Gt=Vr(s.nextSibling),Xt=e,Te=!0,mn=null,t!==null&&(tn[nn++]=Gn,tn[nn++]=Qn,tn[nn++]=Es,Gn=t.id,Qn=t.overflow,Es=e),e=Vp(e,r.children),e.flags|=4096,e)}function hv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),nf(t.return,e,n)}function th(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function dw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(It(t,e,r.children,n),r=Ie.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&hv(t,n,e);else if(t.tag===19)hv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ve(Ie,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&Lc(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),th(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&Lc(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}th(e,!0,n,null,i);break;case"together":th(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ns|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=$r(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=$r(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function mS(t,e,n){switch(e.tag){case 3:cw(e),Oi();break;case 5:M_(e);break;case 1:Ut(e.type)&&kc(e);break;case 4:kp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;ve(Rc,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ve(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?uw(t,e,n):(ve(Ie,Ie.current&1),t=cr(t,e,n),t!==null?t.sibling:null);ve(Ie,Ie.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return dw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),ve(Ie,Ie.current),r)break;return null;case 22:case 23:return e.lanes=0,aw(t,e,n)}return cr(t,e,n)}var hw,df,fw,pw;hw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};df=function(){};fw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ps(kn.current);var i=null;switch(n){case"input":s=jh(t,s),r=jh(t,r),i=[];break;case"select":s=Ce({},s,{value:void 0}),r=Ce({},r,{value:void 0}),i=[];break;case"textarea":s=Dh(t,s),r=Dh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Cc)}Mh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var c=s[d];for(o in c)c.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(oa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var u=r[d];if(c=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&u!==c&&(u!=null||c!=null))if(d==="style")if(c){for(o in c)!c.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&c[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(i||(i=[]),i.push(d,n)),n=u;else d==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,c=c?c.__html:void 0,u!=null&&c!==u&&(i=i||[]).push(d,u)):d==="children"?typeof u!="string"&&typeof u!="number"||(i=i||[]).push(d,""+u):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(oa.hasOwnProperty(d)?(u!=null&&d==="onScroll"&&be("scroll",t),i||c===u||(i=[])):(i=i||[]).push(d,u))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};pw=function(t,e,n,r){n!==r&&(e.flags|=4)};function ko(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function gS(t,e,n){var r=e.pendingProps;switch(Ep(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Ut(e.type)&&Ac(),ut(e),null;case 3:return r=e.stateNode,Li(),Ee(Vt),Ee(_t),jp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ml(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,mn!==null&&(xf(mn),mn=null))),df(t,e),ut(e),null;case 5:Pp(e);var s=ps(va.current);if(n=e.type,t!==null&&e.stateNode!=null)fw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return ut(e),null}if(t=ps(kn.current),Ml(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[Cn]=e,r[ga]=i,t=(e.mode&1)!==0,n){case"dialog":be("cancel",r),be("close",r);break;case"iframe":case"object":case"embed":be("load",r);break;case"video":case"audio":for(s=0;s<Vo.length;s++)be(Vo[s],r);break;case"source":be("error",r);break;case"img":case"image":case"link":be("error",r),be("load",r);break;case"details":be("toggle",r);break;case"input":wy(r,i),be("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},be("invalid",r);break;case"textarea":Ey(r,i),be("invalid",r)}Mh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var c=i[o];o==="children"?typeof c=="string"?r.textContent!==c&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,c,t),s=["children",c]):typeof c=="number"&&r.textContent!==""+c&&(i.suppressHydrationWarning!==!0&&Ll(r.textContent,c,t),s=["children",""+c]):oa.hasOwnProperty(o)&&c!=null&&o==="onScroll"&&be("scroll",r)}switch(n){case"input":Cl(r),by(r,i,!0);break;case"textarea":Cl(r),Ty(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=Cc)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=$x(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[ga]=r,hw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Vh(n,r),n){case"dialog":be("cancel",t),be("close",t),s=r;break;case"iframe":case"object":case"embed":be("load",t),s=r;break;case"video":case"audio":for(s=0;s<Vo.length;s++)be(Vo[s],t);s=r;break;case"source":be("error",t),s=r;break;case"img":case"image":case"link":be("error",t),be("load",t),s=r;break;case"details":be("toggle",t),s=r;break;case"input":wy(t,r),s=jh(t,r),be("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Ce({},r,{value:void 0}),be("invalid",t);break;case"textarea":Ey(t,r),s=Dh(t,r),be("invalid",t);break;default:s=r}Mh(n,s),c=s;for(i in c)if(c.hasOwnProperty(i)){var u=c[i];i==="style"?Hx(t,u):i==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Bx(t,u)):i==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&aa(t,u):typeof u=="number"&&aa(t,""+u):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(oa.hasOwnProperty(i)?u!=null&&i==="onScroll"&&be("scroll",t):u!=null&&lp(t,i,u,o))}switch(n){case"input":Cl(t),by(t,r,!1);break;case"textarea":Cl(t),Ty(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Kr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?vi(t,!!r.multiple,i,!1):r.defaultValue!=null&&vi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=Cc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)pw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=ps(va.current),ps(kn.current),Ml(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(i=r.nodeValue!==n)&&(t=Xt,t!==null))switch(t.tag){case 3:Ll(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ll(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return ut(e),null;case 13:if(Ee(Ie),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Gt!==null&&e.mode&1&&!(e.flags&128))j_(),Oi(),e.flags|=98560,i=!1;else if(i=Ml(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Cn]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),i=!1}else mn!==null&&(xf(mn),mn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?qe===0&&(qe=3):qp())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return Li(),df(t,e),t===null&&pa(e.stateNode.containerInfo),ut(e),null;case 10:return Sp(e.type._context),ut(e),null;case 17:return Ut(e.type)&&Ac(),ut(e),null;case 19:if(Ee(Ie),i=e.memoizedState,i===null)return ut(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)ko(i,!1);else{if(qe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Lc(t),o!==null){for(e.flags|=128,ko(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ve(Ie,Ie.current&1|2),e.child}t=t.sibling}i.tail!==null&&Me()>Vi&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304)}else{if(!r)if(t=Lc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ko(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Te)return ut(e),null}else 2*Me()-i.renderingStartTime>Vi&&n!==1073741824&&(e.flags|=128,r=!0,ko(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Me(),e.sibling=null,n=Ie.current,ve(Ie,r?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Bp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Kt&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function yS(t,e){switch(Ep(e),e.tag){case 1:return Ut(e.type)&&Ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Li(),Ee(Vt),Ee(_t),jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Pp(e),null;case 13:if(Ee(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ee(Ie),null;case 4:return Li(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return Bp(),null;case 24:return null;default:return null}}var Fl=!1,mt=!1,vS=typeof WeakSet=="function"?WeakSet:Set,q=null;function gi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){je(t,e,r)}else n.current=null}function hf(t,e,n){try{n()}catch(r){je(t,e,r)}}var fv=!1;function xS(t,e){if(Gh=Nc,t=x_(),wp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,c=-1,u=-1,d=0,f=0,p=t,m=null;t:for(;;){for(var _;p!==n||s!==0&&p.nodeType!==3||(c=o+s),p!==i||r!==0&&p.nodeType!==3||(u=o+r),p.nodeType===3&&(o+=p.nodeValue.length),(_=p.firstChild)!==null;)m=p,p=_;for(;;){if(p===t)break t;if(m===n&&++d===s&&(c=o),m===i&&++f===r&&(u=o),(_=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=_}n=c===-1||u===-1?null:{start:c,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Qh={focusedElem:t,selectionRange:n},Nc=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var I=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(I!==null){var b=I.memoizedProps,N=I.memoizedState,v=e.stateNode,x=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:fn(e.type,b),N);v.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(T){je(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return I=fv,fv=!1,I}function Jo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&hf(e,n,i)}s=s.next}while(s!==r)}}function wu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function ff(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function mw(t){var e=t.alternate;e!==null&&(t.alternate=null,mw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[ga],delete e[Jh],delete e[tS],delete e[nS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function gw(t){return t.tag===5||t.tag===3||t.tag===4}function pv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||gw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function pf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Cc));else if(r!==4&&(t=t.child,t!==null))for(pf(t,e,n),t=t.sibling;t!==null;)pf(t,e,n),t=t.sibling}function mf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(mf(t,e,n),t=t.sibling;t!==null;)mf(t,e,n),t=t.sibling}var Je=null,pn=!1;function br(t,e,n){for(n=n.child;n!==null;)yw(t,e,n),n=n.sibling}function yw(t,e,n){if(An&&typeof An.onCommitFiberUnmount=="function")try{An.onCommitFiberUnmount(fu,n)}catch{}switch(n.tag){case 5:mt||gi(n,e);case 6:var r=Je,s=pn;Je=null,br(t,e,n),Je=r,pn=s,Je!==null&&(pn?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(pn?(t=Je,n=n.stateNode,t.nodeType===8?Gd(t.parentNode,n):t.nodeType===1&&Gd(t,n),da(t)):Gd(Je,n.stateNode));break;case 4:r=Je,s=pn,Je=n.stateNode.containerInfo,pn=!0,br(t,e,n),Je=r,pn=s;break;case 0:case 11:case 14:case 15:if(!mt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&hf(n,e,o),s=s.next}while(s!==r)}br(t,e,n);break;case 1:if(!mt&&(gi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(c){je(n,e,c)}br(t,e,n);break;case 21:br(t,e,n);break;case 22:n.mode&1?(mt=(r=mt)||n.memoizedState!==null,br(t,e,n),mt=r):br(t,e,n);break;default:br(t,e,n)}}function mv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new vS),e.forEach(function(r){var s=CS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function hn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,c=o;e:for(;c!==null;){switch(c.tag){case 5:Je=c.stateNode,pn=!1;break e;case 3:Je=c.stateNode.containerInfo,pn=!0;break e;case 4:Je=c.stateNode.containerInfo,pn=!0;break e}c=c.return}if(Je===null)throw Error(F(160));yw(i,o,s),Je=null,pn=!1;var u=s.alternate;u!==null&&(u.return=null),s.return=null}catch(d){je(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vw(e,t),e=e.sibling}function vw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hn(e,t),In(t),r&4){try{Jo(3,t,t.return),wu(3,t)}catch(b){je(t,t.return,b)}try{Jo(5,t,t.return)}catch(b){je(t,t.return,b)}}break;case 1:hn(e,t),In(t),r&512&&n!==null&&gi(n,n.return);break;case 5:if(hn(e,t),In(t),r&512&&n!==null&&gi(n,n.return),t.flags&32){var s=t.stateNode;try{aa(s,"")}catch(b){je(t,t.return,b)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,c=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{c==="input"&&i.type==="radio"&&i.name!=null&&Fx(s,i),Vh(c,o);var d=Vh(c,i);for(o=0;o<u.length;o+=2){var f=u[o],p=u[o+1];f==="style"?Hx(s,p):f==="dangerouslySetInnerHTML"?Bx(s,p):f==="children"?aa(s,p):lp(s,f,p,d)}switch(c){case"input":Rh(s,i);break;case"textarea":zx(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var _=i.value;_!=null?vi(s,!!i.multiple,_,!1):m!==!!i.multiple&&(i.defaultValue!=null?vi(s,!!i.multiple,i.defaultValue,!0):vi(s,!!i.multiple,i.multiple?[]:"",!1))}s[ga]=i}catch(b){je(t,t.return,b)}}break;case 6:if(hn(e,t),In(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){je(t,t.return,b)}}break;case 3:if(hn(e,t),In(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{da(e.containerInfo)}catch(b){je(t,t.return,b)}break;case 4:hn(e,t),In(t);break;case 13:hn(e,t),In(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(zp=Me())),r&4&&mv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(mt=(d=mt)||f,hn(e,t),mt=d):hn(e,t),In(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(p=q=f;q!==null;){switch(m=q,_=m.child,m.tag){case 0:case 11:case 14:case 15:Jo(4,m,m.return);break;case 1:gi(m,m.return);var I=m.stateNode;if(typeof I.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,I.props=e.memoizedProps,I.state=e.memoizedState,I.componentWillUnmount()}catch(b){je(r,n,b)}}break;case 5:gi(m,m.return);break;case 22:if(m.memoizedState!==null){yv(p);continue}}_!==null?(_.return=m,q=_):yv(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{s=p.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(c=p.stateNode,u=p.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,c.style.display=qx("display",o))}catch(b){je(t,t.return,b)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(b){je(t,t.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:hn(e,t),In(t),r&4&&mv(t);break;case 21:break;default:hn(e,t),In(t)}}function In(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(gw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(aa(s,""),r.flags&=-33);var i=pv(t);mf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,c=pv(t);pf(t,c,o);break;default:throw Error(F(161))}}catch(u){je(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function _S(t,e,n){q=t,xw(t)}function xw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Fl;if(!o){var c=s.alternate,u=c!==null&&c.memoizedState!==null||mt;c=Fl;var d=mt;if(Fl=o,(mt=u)&&!d)for(q=s;q!==null;)o=q,u=o.child,o.tag===22&&o.memoizedState!==null?vv(s):u!==null?(u.return=o,q=u):vv(s);for(;i!==null;)q=i,xw(i),i=i.sibling;q=s,Fl=c,mt=d}gv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):gv(t)}}function gv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:mt||wu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!mt)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:fn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&ev(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}ev(e,o,n)}break;case 5:var c=e.stateNode;if(n===null&&e.flags&4){n=c;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&da(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}mt||e.flags&512&&ff(e)}catch(m){je(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function yv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function vv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{wu(4,e)}catch(u){je(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(u){je(e,s,u)}}var i=e.return;try{ff(e)}catch(u){je(e,i,u)}break;case 5:var o=e.return;try{ff(e)}catch(u){je(e,o,u)}}}catch(u){je(e,e.return,u)}if(e===t){q=null;break}var c=e.sibling;if(c!==null){c.return=e.return,q=c;break}q=e.return}}var wS=Math.ceil,Uc=pr.ReactCurrentDispatcher,Up=pr.ReactCurrentOwner,sn=pr.ReactCurrentBatchConfig,ae=0,Ge=null,Fe=null,nt=0,Kt=0,yi=Zr(0),qe=0,ba=null,Ns=0,bu=0,Fp=0,Zo=null,Rt=null,zp=0,Vi=1/0,qn=null,Fc=!1,gf=null,Fr=null,zl=!1,jr=null,zc=0,ea=0,yf=null,sc=-1,ic=0;function St(){return ae&6?Me():sc!==-1?sc:sc=Me()}function zr(t){return t.mode&1?ae&2&&nt!==0?nt&-nt:sS.transition!==null?(ic===0&&(ic=r_()),ic):(t=de,t!==0||(t=window.event,t=t===void 0?16:u_(t.type)),t):1}function xn(t,e,n,r){if(50<ea)throw ea=0,yf=null,Error(F(185));za(t,n,r),(!(ae&2)||t!==Ge)&&(t===Ge&&(!(ae&2)&&(bu|=n),qe===4&&Sr(t,nt)),Ft(t,r),n===1&&ae===0&&!(e.mode&1)&&(Vi=Me()+500,vu&&es()))}function Ft(t,e){var n=t.callbackNode;sI(t,e);var r=Tc(t,t===Ge?nt:0);if(r===0)n!==null&&Sy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Sy(n),e===1)t.tag===0?rS(xv.bind(null,t)):A_(xv.bind(null,t)),ZI(function(){!(ae&6)&&es()}),n=null;else{switch(s_(r)){case 1:n=fp;break;case 4:n=t_;break;case 16:n=Ec;break;case 536870912:n=n_;break;default:n=Ec}n=Sw(n,_w.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function _w(t,e){if(sc=-1,ic=0,ae&6)throw Error(F(327));var n=t.callbackNode;if(Ei()&&t.callbackNode!==n)return null;var r=Tc(t,t===Ge?nt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=$c(t,r);else{e=r;var s=ae;ae|=2;var i=bw();(Ge!==t||nt!==e)&&(qn=null,Vi=Me()+500,vs(t,e));do try{TS();break}catch(c){ww(t,c)}while(!0);Ip(),Uc.current=i,ae=s,Fe!==null?e=0:(Ge=null,nt=0,e=qe)}if(e!==0){if(e===2&&(s=Bh(t),s!==0&&(r=s,e=vf(t,s))),e===1)throw n=ba,vs(t,0),Sr(t,r),Ft(t,Me()),n;if(e===6)Sr(t,r);else{if(s=t.current.alternate,!(r&30)&&!bS(s)&&(e=$c(t,r),e===2&&(i=Bh(t),i!==0&&(r=i,e=vf(t,i))),e===1))throw n=ba,vs(t,0),Sr(t,r),Ft(t,Me()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:cs(t,Rt,qn);break;case 3:if(Sr(t,r),(r&130023424)===r&&(e=zp+500-Me(),10<e)){if(Tc(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){St(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Xh(cs.bind(null,t,Rt,qn),e);break}cs(t,Rt,qn);break;case 4:if(Sr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-vn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Me()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*wS(r/1960))-r,10<r){t.timeoutHandle=Xh(cs.bind(null,t,Rt,qn),r);break}cs(t,Rt,qn);break;case 5:cs(t,Rt,qn);break;default:throw Error(F(329))}}}return Ft(t,Me()),t.callbackNode===n?_w.bind(null,t):null}function vf(t,e){var n=Zo;return t.current.memoizedState.isDehydrated&&(vs(t,e).flags|=256),t=$c(t,e),t!==2&&(e=Rt,Rt=n,e!==null&&xf(e)),t}function xf(t){Rt===null?Rt=t:Rt.push.apply(Rt,t)}function bS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!wn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Sr(t,e){for(e&=~Fp,e&=~bu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-vn(e),r=1<<n;t[n]=-1,e&=~r}}function xv(t){if(ae&6)throw Error(F(327));Ei();var e=Tc(t,0);if(!(e&1))return Ft(t,Me()),null;var n=$c(t,e);if(t.tag!==0&&n===2){var r=Bh(t);r!==0&&(e=r,n=vf(t,r))}if(n===1)throw n=ba,vs(t,0),Sr(t,e),Ft(t,Me()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,cs(t,Rt,qn),Ft(t,Me()),null}function $p(t,e){var n=ae;ae|=1;try{return t(e)}finally{ae=n,ae===0&&(Vi=Me()+500,vu&&es())}}function Is(t){jr!==null&&jr.tag===0&&!(ae&6)&&Ei();var e=ae;ae|=1;var n=sn.transition,r=de;try{if(sn.transition=null,de=1,t)return t()}finally{de=r,sn.transition=n,ae=e,!(ae&6)&&es()}}function Bp(){Kt=yi.current,Ee(yi)}function vs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,JI(n)),Fe!==null)for(n=Fe.return;n!==null;){var r=n;switch(Ep(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Ac();break;case 3:Li(),Ee(Vt),Ee(_t),jp();break;case 5:Pp(r);break;case 4:Li();break;case 13:Ee(Ie);break;case 19:Ee(Ie);break;case 10:Sp(r.type._context);break;case 22:case 23:Bp()}n=n.return}if(Ge=t,Fe=t=$r(t.current,null),nt=Kt=e,qe=0,ba=null,Fp=bu=Ns=0,Rt=Zo=null,fs!==null){for(e=0;e<fs.length;e++)if(n=fs[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}fs=null}return t}function ww(t,e){do{var n=Fe;try{if(Ip(),tc.current=Vc,Mc){for(var r=Se.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Mc=!1}if(Ts=0,Ke=Be=Se=null,Xo=!1,xa=0,Up.current=null,n===null||n.return===null){qe=1,ba=e,Fe=null;break}e:{var i=t,o=n.return,c=n,u=e;if(e=nt,c.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var d=u,f=c,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var _=ov(o);if(_!==null){_.flags&=-257,av(_,o,c,i,e),_.mode&1&&iv(i,d,e),e=_,u=d;var I=e.updateQueue;if(I===null){var b=new Set;b.add(u),e.updateQueue=b}else I.add(u);break e}else{if(!(e&1)){iv(i,d,e),qp();break e}u=Error(F(426))}}else if(Te&&c.mode&1){var N=ov(o);if(N!==null){!(N.flags&65536)&&(N.flags|=256),av(N,o,c,i,e),Tp(Mi(u,c));break e}}i=u=Mi(u,c),qe!==4&&(qe=2),Zo===null?Zo=[i]:Zo.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=sw(i,u,e);Zy(i,v);break e;case 1:c=u;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Fr===null||!Fr.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var T=iw(i,c,e);Zy(i,T);break e}}i=i.return}while(i!==null)}Tw(n)}catch(D){e=D,Fe===n&&n!==null&&(Fe=n=n.return);continue}break}while(!0)}function bw(){var t=Uc.current;return Uc.current=Vc,t===null?Vc:t}function qp(){(qe===0||qe===3||qe===2)&&(qe=4),Ge===null||!(Ns&268435455)&&!(bu&268435455)||Sr(Ge,nt)}function $c(t,e){var n=ae;ae|=2;var r=bw();(Ge!==t||nt!==e)&&(qn=null,vs(t,e));do try{ES();break}catch(s){ww(t,s)}while(!0);if(Ip(),ae=n,Uc.current=r,Fe!==null)throw Error(F(261));return Ge=null,nt=0,qe}function ES(){for(;Fe!==null;)Ew(Fe)}function TS(){for(;Fe!==null&&!Q1();)Ew(Fe)}function Ew(t){var e=Iw(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?Tw(t):Fe=e,Up.current=null}function Tw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=yS(n,e),n!==null){n.flags&=32767,Fe=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{qe=6,Fe=null;return}}else if(n=gS(n,e,Kt),n!==null){Fe=n;return}if(e=e.sibling,e!==null){Fe=e;return}Fe=e=t}while(e!==null);qe===0&&(qe=5)}function cs(t,e,n){var r=de,s=sn.transition;try{sn.transition=null,de=1,NS(t,e,n,r)}finally{sn.transition=s,de=r}return null}function NS(t,e,n,r){do Ei();while(jr!==null);if(ae&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(iI(t,i),t===Ge&&(Fe=Ge=null,nt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||zl||(zl=!0,Sw(Ec,function(){return Ei(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=sn.transition,sn.transition=null;var o=de;de=1;var c=ae;ae|=4,Up.current=null,xS(t,n),vw(n,t),HI(Qh),Nc=!!Gh,Qh=Gh=null,t.current=n,_S(n),Y1(),ae=c,de=o,sn.transition=i}else t.current=n;if(zl&&(zl=!1,jr=t,zc=s),i=t.pendingLanes,i===0&&(Fr=null),Z1(n.stateNode),Ft(t,Me()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Fc)throw Fc=!1,t=gf,gf=null,t;return zc&1&&t.tag!==0&&Ei(),i=t.pendingLanes,i&1?t===yf?ea++:(ea=0,yf=t):ea=0,es(),null}function Ei(){if(jr!==null){var t=s_(zc),e=sn.transition,n=de;try{if(sn.transition=null,de=16>t?16:t,jr===null)var r=!1;else{if(t=jr,jr=null,zc=0,ae&6)throw Error(F(331));var s=ae;for(ae|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var c=i.deletions;if(c!==null){for(var u=0;u<c.length;u++){var d=c[u];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Jo(8,f,i)}var p=f.child;if(p!==null)p.return=f,q=p;else for(;q!==null;){f=q;var m=f.sibling,_=f.return;if(mw(f),f===d){q=null;break}if(m!==null){m.return=_,q=m;break}q=_}}}var I=i.alternate;if(I!==null){var b=I.child;if(b!==null){I.child=null;do{var N=b.sibling;b.sibling=null,b=N}while(b!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Jo(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,q=v;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=x;q!==null;){if(c=q,c.flags&2048)try{switch(c.tag){case 0:case 11:case 15:wu(9,c)}}catch(D){je(c,c.return,D)}if(c===o){q=null;break e}var T=c.sibling;if(T!==null){T.return=c.return,q=T;break e}q=c.return}}if(ae=s,es(),An&&typeof An.onPostCommitFiberRoot=="function")try{An.onPostCommitFiberRoot(fu,t)}catch{}r=!0}return r}finally{de=n,sn.transition=e}}return!1}function _v(t,e,n){e=Mi(n,e),e=sw(t,e,1),t=Ur(t,e,1),e=St(),t!==null&&(za(t,1,e),Ft(t,e))}function je(t,e,n){if(t.tag===3)_v(t,t,n);else for(;e!==null;){if(e.tag===3){_v(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Fr===null||!Fr.has(r))){t=Mi(n,t),t=iw(e,t,1),e=Ur(e,t,1),t=St(),e!==null&&(za(e,1,t),Ft(e,t));break}}e=e.return}}function IS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=St(),t.pingedLanes|=t.suspendedLanes&n,Ge===t&&(nt&n)===n&&(qe===4||qe===3&&(nt&130023424)===nt&&500>Me()-zp?vs(t,0):Fp|=n),Ft(t,e)}function Nw(t,e){e===0&&(t.mode&1?(e=Pl,Pl<<=1,!(Pl&130023424)&&(Pl=4194304)):e=1);var n=St();t=lr(t,e),t!==null&&(za(t,e,n),Ft(t,n))}function SS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Nw(t,n)}function CS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),Nw(t,n)}var Iw;Iw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Vt.current)Lt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Lt=!1,mS(t,e,n);Lt=!!(t.flags&131072)}else Lt=!1,Te&&e.flags&1048576&&k_(e,jc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;rc(t,e),t=e.pendingProps;var s=Ri(e,_t.current);bi(e,n),s=Op(null,e,r,t,s,n);var i=Dp();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ut(r)?(i=!0,kc(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Ap(e),s.updater=_u,e.stateNode=s,s._reactInternals=e,sf(e,r,t,n),e=lf(null,e,r,!0,i,n)):(e.tag=0,Te&&i&&bp(e),It(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(rc(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=kS(r),t=fn(r,t),s){case 0:e=af(null,e,r,t,n);break e;case 1:e=uv(null,e,r,t,n);break e;case 11:e=lv(null,e,r,t,n);break e;case 14:e=cv(null,e,r,fn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),af(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),uv(t,e,r,s,n);case 3:e:{if(cw(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,L_(t,e),Dc(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Mi(Error(F(423)),e),e=dv(t,e,r,n,s);break e}else if(r!==s){s=Mi(Error(F(424)),e),e=dv(t,e,r,n,s);break e}else for(Gt=Vr(e.stateNode.containerInfo.firstChild),Xt=e,Te=!0,mn=null,n=O_(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===s){e=cr(t,e,n);break e}It(t,e,r,n)}e=e.child}return e;case 5:return M_(e),t===null&&tf(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Yh(r,s)?o=null:i!==null&&Yh(r,i)&&(e.flags|=32),lw(t,e),It(t,e,o,n),e.child;case 6:return t===null&&tf(e),null;case 13:return uw(t,e,n);case 4:return kp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Di(e,null,r,n):It(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),lv(t,e,r,s,n);case 7:return It(t,e,e.pendingProps,n),e.child;case 8:return It(t,e,e.pendingProps.children,n),e.child;case 12:return It(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,ve(Rc,r._currentValue),r._currentValue=o,i!==null)if(wn(i.value,o)){if(i.children===s.children&&!Vt.current){e=cr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var c=i.dependencies;if(c!==null){o=i.child;for(var u=c.firstContext;u!==null;){if(u.context===r){if(i.tag===1){u=er(-1,n&-n),u.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?u.next=u:(u.next=f.next,f.next=u),d.pending=u}}i.lanes|=n,u=i.alternate,u!==null&&(u.lanes|=n),nf(i.return,n,e),c.lanes|=n;break}u=u.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,c=o.alternate,c!==null&&(c.lanes|=n),nf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}It(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,bi(e,n),s=an(s),r=r(s),e.flags|=1,It(t,e,r,n),e.child;case 14:return r=e.type,s=fn(r,e.pendingProps),s=fn(r.type,s),cv(t,e,r,s,n);case 15:return ow(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:fn(r,s),rc(t,e),e.tag=1,Ut(r)?(t=!0,kc(e)):t=!1,bi(e,n),rw(e,r,s),sf(e,r,s,n),lf(null,e,r,!0,t,n);case 19:return dw(t,e,n);case 22:return aw(t,e,n)}throw Error(F(156,e.tag))};function Sw(t,e){return e_(t,e)}function AS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new AS(t,e,n,r)}function Hp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function kS(t){if(typeof t=="function")return Hp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===up)return 11;if(t===dp)return 14}return 2}function $r(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function oc(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Hp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case ai:return xs(n.children,s,i,e);case cp:o=8,s|=8;break;case Ch:return t=rn(12,n,e,s|2),t.elementType=Ch,t.lanes=i,t;case Ah:return t=rn(13,n,e,s),t.elementType=Ah,t.lanes=i,t;case kh:return t=rn(19,n,e,s),t.elementType=kh,t.lanes=i,t;case Mx:return Eu(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Dx:o=10;break e;case Lx:o=9;break e;case up:o=11;break e;case dp:o=14;break e;case Tr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=rn(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function xs(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function Eu(t,e,n,r){return t=rn(22,t,r,e),t.elementType=Mx,t.lanes=n,t.stateNode={isHidden:!1},t}function nh(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function rh(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function PS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Md(0),this.expirationTimes=Md(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Md(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Wp(t,e,n,r,s,i,o,c,u){return t=new PS(t,e,n,c,u),e===1?(e=1,i===!0&&(e|=8)):e=0,i=rn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ap(i),t}function jS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:oi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Cw(t){if(!t)return Gr;t=t._reactInternals;e:{if(Vs(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ut(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Ut(n))return C_(t,n,e)}return e}function Aw(t,e,n,r,s,i,o,c,u){return t=Wp(n,r,!0,t,s,i,o,c,u),t.context=Cw(null),n=t.current,r=St(),s=zr(n),i=er(r,s),i.callback=e??null,Ur(n,i,s),t.current.lanes=s,za(t,s,r),Ft(t,r),t}function Tu(t,e,n,r){var s=e.current,i=St(),o=zr(s);return n=Cw(n),e.context===null?e.context=n:e.pendingContext=n,e=er(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Ur(s,e,o),t!==null&&(xn(t,s,o,i),ec(t,s,o)),o}function Bc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function wv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Kp(t,e){wv(t,e),(t=t.alternate)&&wv(t,e)}function RS(){return null}var kw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Gp(t){this._internalRoot=t}Nu.prototype.render=Gp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));Tu(t,e,null,null)};Nu.prototype.unmount=Gp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Is(function(){Tu(null,t,null,null)}),e[ar]=null}};function Nu(t){this._internalRoot=t}Nu.prototype.unstable_scheduleHydration=function(t){if(t){var e=a_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ir.length&&e!==0&&e<Ir[n].priority;n++);Ir.splice(n,0,t),n===0&&c_(t)}};function Qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function bv(){}function OS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Bc(o);i.call(d)}}var o=Aw(e,r,t,0,null,!1,!1,"",bv);return t._reactRootContainer=o,t[ar]=o.current,pa(t.nodeType===8?t.parentNode:t),Is(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var c=r;r=function(){var d=Bc(u);c.call(d)}}var u=Wp(t,0,!1,null,null,!1,!1,"",bv);return t._reactRootContainer=u,t[ar]=u.current,pa(t.nodeType===8?t.parentNode:t),Is(function(){Tu(e,u,n,r)}),u}function Su(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var c=s;s=function(){var u=Bc(o);c.call(u)}}Tu(e,o,t,s)}else o=OS(n,e,t,s,r);return Bc(o)}i_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Mo(e.pendingLanes);n!==0&&(pp(e,n|1),Ft(e,Me()),!(ae&6)&&(Vi=Me()+500,es()))}break;case 13:Is(function(){var r=lr(t,1);if(r!==null){var s=St();xn(r,t,1,s)}}),Kp(t,1)}};mp=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=St();xn(e,t,134217728,n)}Kp(t,134217728)}};o_=function(t){if(t.tag===13){var e=zr(t),n=lr(t,e);if(n!==null){var r=St();xn(n,t,e,r)}Kp(t,e)}};a_=function(){return de};l_=function(t,e){var n=de;try{return de=t,e()}finally{de=n}};Fh=function(t,e,n){switch(e){case"input":if(Rh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=yu(r);if(!s)throw Error(F(90));Ux(r),Rh(r,s)}}}break;case"textarea":zx(t,n);break;case"select":e=n.value,e!=null&&vi(t,!!n.multiple,e,!1)}};Gx=$p;Qx=Is;var DS={usingClientEntryPoint:!1,Events:[Ba,di,yu,Wx,Kx,$p]},Po={findFiberByHostInstance:hs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LS={bundleType:Po.bundleType,version:Po.version,rendererPackageName:Po.rendererPackageName,rendererConfig:Po.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Jx(t),t===null?null:t.stateNode},findFiberByHostInstance:Po.findFiberByHostInstance||RS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var $l=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!$l.isDisabled&&$l.supportsFiber)try{fu=$l.inject(LS),An=$l}catch{}}Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=DS;Zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Qp(e))throw Error(F(200));return jS(t,e,null,n)};Zt.createRoot=function(t,e){if(!Qp(t))throw Error(F(299));var n=!1,r="",s=kw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Wp(t,1,!1,null,null,n,!1,r,s),t[ar]=e.current,pa(t.nodeType===8?t.parentNode:t),new Gp(e)};Zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Jx(e),t=t===null?null:t.stateNode,t};Zt.flushSync=function(t){return Is(t)};Zt.hydrate=function(t,e,n){if(!Iu(e))throw Error(F(200));return Su(null,t,e,!0,n)};Zt.hydrateRoot=function(t,e,n){if(!Qp(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=kw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Aw(e,null,t,1,n??null,s,!1,i,o),t[ar]=e.current,pa(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new Nu(e)};Zt.render=function(t,e,n){if(!Iu(e))throw Error(F(200));return Su(null,t,e,!1,n)};Zt.unmountComponentAtNode=function(t){if(!Iu(t))throw Error(F(40));return t._reactRootContainer?(Is(function(){Su(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Zt.unstable_batchedUpdates=$p;Zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Iu(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return Su(t,e,n,!1,r)};Zt.version="18.3.1-next-f1338f8080-20240426";function Pw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pw)}catch(t){console.error(t)}}Pw(),Px.exports=Zt;var MS=Px.exports,Ev=MS;Ih.createRoot=Ev.createRoot,Ih.hydrateRoot=Ev.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ea(){return Ea=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ea.apply(this,arguments)}var Rr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Rr||(Rr={}));const Tv="popstate";function VS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:c}=r.location;return _f("",{pathname:i,search:o,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:qc(s)}return FS(e,n,null,t)}function Ve(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function jw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function US(){return Math.random().toString(36).substr(2,8)}function Nv(t,e){return{usr:t.state,key:t.key,idx:e}}function _f(t,e,n,r){return n===void 0&&(n=null),Ea({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?ro(e):e,{state:n,key:e&&e.key||r||US()})}function qc(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function ro(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function FS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,c=Rr.Pop,u=null,d=f();d==null&&(d=0,o.replaceState(Ea({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function p(){c=Rr.Pop;let N=f(),v=N==null?null:N-d;d=N,u&&u({action:c,location:b.location,delta:v})}function m(N,v){c=Rr.Push;let x=_f(b.location,N,v);d=f()+1;let y=Nv(x,d),T=b.createHref(x);try{o.pushState(y,"",T)}catch(D){if(D instanceof DOMException&&D.name==="DataCloneError")throw D;s.location.assign(T)}i&&u&&u({action:c,location:b.location,delta:1})}function _(N,v){c=Rr.Replace;let x=_f(b.location,N,v);d=f();let y=Nv(x,d),T=b.createHref(x);o.replaceState(y,"",T),i&&u&&u({action:c,location:b.location,delta:0})}function I(N){let v=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof N=="string"?N:qc(N);return x=x.replace(/ $/,"%20"),Ve(v,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,v)}let b={get action(){return c},get location(){return t(s,o)},listen(N){if(u)throw new Error("A history only accepts one active listener");return s.addEventListener(Tv,p),u=N,()=>{s.removeEventListener(Tv,p),u=null}},createHref(N){return e(s,N)},createURL:I,encodeLocation(N){let v=I(N);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:_,go(N){return o.go(N)}};return b}var Iv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Iv||(Iv={}));function zS(t,e,n){return n===void 0&&(n="/"),$S(t,e,n)}function $S(t,e,n,r){let s=typeof e=="string"?ro(e):e,i=Yp(s.pathname||"/",n);if(i==null)return null;let o=Rw(t);BS(o);let c=null;for(let u=0;c==null&&u<o.length;++u){let d=t2(i);c=JS(o[u],d)}return c}function Rw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,c)=>{let u={relativePath:c===void 0?i.path||"":c,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};u.relativePath.startsWith("/")&&(Ve(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Br([r,u.relativePath]),f=n.concat(u);i.children&&i.children.length>0&&(Ve(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),Rw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:YS(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var c;if(i.path===""||!((c=i.path)!=null&&c.includes("?")))s(i,o);else for(let u of Ow(i.path))s(i,o,u)}),e}function Ow(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=Ow(r.join("/")),c=[];return c.push(...o.map(u=>u===""?i:[i,u].join("/"))),s&&c.push(...o),c.map(u=>t.startsWith("/")&&u===""?"/":u)}function BS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:XS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const qS=/^:[\w-]+$/,HS=3,WS=2,KS=1,GS=10,QS=-2,Sv=t=>t==="*";function YS(t,e){let n=t.split("/"),r=n.length;return n.some(Sv)&&(r+=QS),e&&(r+=WS),n.filter(s=>!Sv(s)).reduce((s,i)=>s+(qS.test(i)?HS:i===""?KS:GS),r)}function XS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function JS(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let c=0;c<r.length;++c){let u=r[c],d=c===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",p=ZS({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},f),m=u.route;if(!p)return null;Object.assign(s,p.params),o.push({params:s,pathname:Br([i,p.pathname]),pathnameBase:i2(Br([i,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(i=Br([i,p.pathnameBase]))}return o}function ZS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=e2(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:r.reduce((d,f,p)=>{let{paramName:m,isOptional:_}=f;if(m==="*"){let b=c[p]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const I=c[p];return _&&!I?d[m]=void 0:d[m]=(I||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function e2(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),jw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,c,u)=>(r.push({paramName:c,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function t2(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return jw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Yp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function n2(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?ro(t):t;return{pathname:n?n.startsWith("/")?n:r2(n,e):e,search:o2(r),hash:a2(s)}}function r2(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function sh(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s2(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Xp(t,e){let n=s2(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function Jp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=ro(t):(s=Ea({},t),Ve(!s.pathname||!s.pathname.includes("?"),sh("?","pathname","search",s)),Ve(!s.pathname||!s.pathname.includes("#"),sh("#","pathname","hash",s)),Ve(!s.search||!s.search.includes("#"),sh("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,c;if(o==null)c=n;else{let p=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;s.pathname=m.join("/")}c=p>=0?e[p]:"/"}let u=n2(s,c),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||f)&&(u.pathname+="/"),u}const Br=t=>t.join("/").replace(/\/\/+/g,"/"),i2=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),o2=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,a2=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function l2(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Dw=["post","put","patch","delete"];new Set(Dw);const c2=["get",...Dw];new Set(c2);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ta(){return Ta=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ta.apply(this,arguments)}const Zp=j.createContext(null),u2=j.createContext(null),ts=j.createContext(null),Cu=j.createContext(null),mr=j.createContext({outlet:null,matches:[],isDataRoute:!1}),Lw=j.createContext(null);function d2(t,e){let{relative:n}=e===void 0?{}:e;so()||Ve(!1);let{basename:r,navigator:s}=j.useContext(ts),{hash:i,pathname:o,search:c}=Vw(t,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:Br([r,o])),s.createHref({pathname:u,search:c,hash:i})}function so(){return j.useContext(Cu)!=null}function Us(){return so()||Ve(!1),j.useContext(Cu).location}function Mw(t){j.useContext(ts).static||j.useLayoutEffect(t)}function Bt(){let{isDataRoute:t}=j.useContext(mr);return t?T2():h2()}function h2(){so()||Ve(!1);let t=j.useContext(Zp),{basename:e,future:n,navigator:r}=j.useContext(ts),{matches:s}=j.useContext(mr),{pathname:i}=Us(),o=JSON.stringify(Xp(s,n.v7_relativeSplatPath)),c=j.useRef(!1);return Mw(()=>{c.current=!0}),j.useCallback(function(d,f){if(f===void 0&&(f={}),!c.current)return;if(typeof d=="number"){r.go(d);return}let p=Jp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Br([e,p.pathname])),(f.replace?r.replace:r.push)(p,f.state,f)},[e,r,o,i,t])}function em(){let{matches:t}=j.useContext(mr),e=t[t.length-1];return e?e.params:{}}function Vw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=j.useContext(ts),{matches:s}=j.useContext(mr),{pathname:i}=Us(),o=JSON.stringify(Xp(s,r.v7_relativeSplatPath));return j.useMemo(()=>Jp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function f2(t,e){return p2(t,e)}function p2(t,e,n,r){so()||Ve(!1);let{navigator:s}=j.useContext(ts),{matches:i}=j.useContext(mr),o=i[i.length-1],c=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=Us(),f;if(e){var p;let N=typeof e=="string"?ro(e):e;u==="/"||(p=N.pathname)!=null&&p.startsWith(u)||Ve(!1),f=N}else f=d;let m=f.pathname||"/",_=m;if(u!=="/"){let N=u.replace(/^\//,"").split("/");_="/"+m.replace(/^\//,"").split("/").slice(N.length).join("/")}let I=zS(t,{pathname:_}),b=x2(I&&I.map(N=>Object.assign({},N,{params:Object.assign({},c,N.params),pathname:Br([u,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?u:Br([u,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),i,n,r);return e&&b?j.createElement(Cu.Provider,{value:{location:Ta({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Rr.Pop}},b):b}function m2(){let t=E2(),e=l2(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return j.createElement(j.Fragment,null,j.createElement("h2",null,"Unexpected Application Error!"),j.createElement("h3",{style:{fontStyle:"italic"}},e),n?j.createElement("pre",{style:s},n):null,null)}const g2=j.createElement(m2,null);class y2 extends j.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?j.createElement(mr.Provider,{value:this.props.routeContext},j.createElement(Lw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function v2(t){let{routeContext:e,match:n,children:r}=t,s=j.useContext(Zp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),j.createElement(mr.Provider,{value:e},r)}function x2(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,c=(s=n)==null?void 0:s.errors;if(c!=null){let f=o.findIndex(p=>p.route.id&&(c==null?void 0:c[p.route.id])!==void 0);f>=0||Ve(!1),o=o.slice(0,Math.min(o.length,f+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let p=o[f];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=f),p.route.id){let{loaderData:m,errors:_}=n,I=p.route.loader&&m[p.route.id]===void 0&&(!_||_[p.route.id]===void 0);if(p.route.lazy||I){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,p,m)=>{let _,I=!1,b=null,N=null;n&&(_=c&&p.route.id?c[p.route.id]:void 0,b=p.route.errorElement||g2,u&&(d<0&&m===0?(N2("route-fallback"),I=!0,N=null):d===m&&(I=!0,N=p.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),x=()=>{let y;return _?y=b:I?y=N:p.route.Component?y=j.createElement(p.route.Component,null):p.route.element?y=p.route.element:y=f,j.createElement(v2,{match:p,routeContext:{outlet:f,matches:v,isDataRoute:n!=null},children:y})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?j.createElement(y2,{location:n.location,revalidation:n.revalidation,component:b,error:_,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}var Uw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Uw||{}),Fw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Fw||{});function _2(t){let e=j.useContext(Zp);return e||Ve(!1),e}function w2(t){let e=j.useContext(u2);return e||Ve(!1),e}function b2(t){let e=j.useContext(mr);return e||Ve(!1),e}function zw(t){let e=b2(),n=e.matches[e.matches.length-1];return n.route.id||Ve(!1),n.route.id}function E2(){var t;let e=j.useContext(Lw),n=w2(),r=zw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function T2(){let{router:t}=_2(Uw.UseNavigateStable),e=zw(Fw.UseNavigateStable),n=j.useRef(!1);return Mw(()=>{n.current=!0}),j.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Ta({fromRouteId:e},i)))},[t,e])}const Cv={};function N2(t,e,n){Cv[t]||(Cv[t]=!0)}function I2(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function wf(t){let{to:e,replace:n,state:r,relative:s}=t;so()||Ve(!1);let{future:i,static:o}=j.useContext(ts),{matches:c}=j.useContext(mr),{pathname:u}=Us(),d=Bt(),f=Jp(e,Xp(c,i.v7_relativeSplatPath),u,s==="path"),p=JSON.stringify(f);return j.useEffect(()=>d(JSON.parse(p),{replace:n,state:r,relative:s}),[d,p,s,n,r]),null}function ft(t){Ve(!1)}function S2(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Rr.Pop,navigator:i,static:o=!1,future:c}=t;so()&&Ve(!1);let u=e.replace(/^\/*/,"/"),d=j.useMemo(()=>({basename:u,navigator:i,static:o,future:Ta({v7_relativeSplatPath:!1},c)}),[u,c,i,o]);typeof r=="string"&&(r=ro(r));let{pathname:f="/",search:p="",hash:m="",state:_=null,key:I="default"}=r,b=j.useMemo(()=>{let N=Yp(f,u);return N==null?null:{location:{pathname:N,search:p,hash:m,state:_,key:I},navigationType:s}},[u,f,p,m,_,I,s]);return b==null?null:j.createElement(ts.Provider,{value:d},j.createElement(Cu.Provider,{children:n,value:b}))}function C2(t){let{children:e,location:n}=t;return f2(bf(e),n)}new Promise(()=>{});function bf(t,e){e===void 0&&(e=[]);let n=[];return j.Children.forEach(t,(r,s)=>{if(!j.isValidElement(r))return;let i=[...e,s];if(r.type===j.Fragment){n.push.apply(n,bf(r.props.children,i));return}r.type!==ft&&Ve(!1),!r.props.index||!r.props.children||Ve(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=bf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ef(){return Ef=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ef.apply(this,arguments)}function A2(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function k2(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function P2(t,e){return t.button===0&&(!e||e==="_self")&&!k2(t)}function Tf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function j2(t,e){let n=Tf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const R2=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],O2="6";try{window.__reactRouterVersion=O2}catch{}const D2="startTransition",Av=I1[D2];function L2(t){let{basename:e,children:n,future:r,window:s}=t,i=j.useRef();i.current==null&&(i.current=VS({window:s,v5Compat:!0}));let o=i.current,[c,u]=j.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=j.useCallback(p=>{d&&Av?Av(()=>u(p)):u(p)},[u,d]);return j.useLayoutEffect(()=>o.listen(f),[o,f]),j.useEffect(()=>I2(r),[r]),j.createElement(S2,{basename:e,children:n,location:c.location,navigationType:c.action,navigator:o,future:r})}const M2=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",V2=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ge=j.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,m=A2(e,R2),{basename:_}=j.useContext(ts),I,b=!1;if(typeof d=="string"&&V2.test(d)&&(I=d,M2))try{let y=new URL(window.location.href),T=d.startsWith("//")?new URL(y.protocol+d):new URL(d),D=Yp(T.pathname,_);T.origin===y.origin&&D!=null?d=D+T.search+T.hash:b=!0}catch{}let N=d2(d,{relative:s}),v=U2(d,{replace:o,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});function x(y){r&&r(y),y.defaultPrevented||v(y)}return j.createElement("a",Ef({},m,{href:I||N,onClick:b||i?r:x,ref:n,target:u}))});var kv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(kv||(kv={}));var Pv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(Pv||(Pv={}));function U2(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:c}=e===void 0?{}:e,u=Bt(),d=Us(),f=Vw(t,{relative:o});return j.useCallback(p=>{if(P2(p,n)){p.preventDefault();let m=r!==void 0?r:qc(d)===qc(f);u(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:c})}},[d,u,f,r,s,n,t,i,o,c])}function $w(t){let e=j.useRef(Tf(t)),n=j.useRef(!1),r=Us(),s=j.useMemo(()=>j2(r.search,n.current?null:e.current),[r.search]),i=Bt(),o=j.useCallback((c,u)=>{const d=Tf(typeof c=="function"?c(s):c);n.current=!0,i("?"+d,u)},[i,s]);return[s,o]}var jv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},F2=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],u=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},qw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,u=s+2<t.length,d=u?t[s+2]:0,f=i>>2,p=(i&3)<<4|c>>4;let m=(c&15)<<2|d>>6,_=d&63;u||(_=64,o||(m=64)),r.push(n[f],n[p],n[m],n[_])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Bw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):F2(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const p=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||d==null||p==null)throw new z2;const m=i<<2|c>>4;if(r.push(m),d!==64){const _=c<<4&240|d>>2;if(r.push(_),p!==64){const I=d<<6&192|p;r.push(I)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class z2 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const $2=function(t){const e=Bw(t);return qw.encodeByteArray(e,!0)},Hc=function(t){return $2(t).replace(/\./g,"")},Hw=function(t){try{return qw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=()=>B2().__FIREBASE_DEFAULTS__,H2=()=>{if(typeof process>"u"||typeof jv>"u")return;const t=jv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},W2=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Hw(t[1]);return e&&JSON.parse(e)},Au=()=>{try{return q2()||H2()||W2()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ww=t=>{var e,n;return(n=(e=Au())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Kw=t=>{const e=Ww(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Gw=()=>{var t;return(t=Au())===null||t===void 0?void 0:t.config},Qw=t=>{var e;return(e=Au())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Hc(JSON.stringify(n)),Hc(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function G2(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(wt())}function Q2(){var t;const e=(t=Au())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Y2(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function X2(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function J2(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Z2(){const t=wt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function eC(){return!Q2()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Xw(){try{return typeof indexedDB=="object"}catch{return!1}}function Jw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function tC(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="FirebaseError";class Nn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=nC,Object.setPrototypeOf(this,Nn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fs.prototype.create)}}class Fs{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?rC(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new Nn(s,c,r)}}function rC(t,e){return t.replace(sC,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const sC=/\{\$([^}]+)}/g;function iC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Na(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Rv(i)&&Rv(o)){if(!Na(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Rv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ha(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function Uo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Fo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function oC(t,e){const n=new aC(t,e);return n.subscribe.bind(n)}class aC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");lC(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=ih),s.error===void 0&&(s.error=ih),s.complete===void 0&&(s.complete=ih);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function lC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function ih(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ne(t){return t&&t._delegate?t._delegate:t}class cn{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const us="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new K2;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(dC(e))try{this.getOrInitializeService({instanceIdentifier:us})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=us){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=us){return this.instances.has(e)}getOptions(e=us){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=us){return this.component?this.component.multipleInstances?e:us:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uC(t){return t===us?void 0:t}function dC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new cC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ie;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ie||(ie={}));const fC={debug:ie.DEBUG,verbose:ie.VERBOSE,info:ie.INFO,warn:ie.WARN,error:ie.ERROR,silent:ie.SILENT},pC=ie.INFO,mC={[ie.DEBUG]:"log",[ie.VERBOSE]:"log",[ie.INFO]:"info",[ie.WARN]:"warn",[ie.ERROR]:"error"},gC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=mC[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class tm{constructor(e){this.name=e,this._logLevel=pC,this._logHandler=gC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ie))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?fC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ie.DEBUG,...e),this._logHandler(this,ie.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ie.VERBOSE,...e),this._logHandler(this,ie.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ie.INFO,...e),this._logHandler(this,ie.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ie.WARN,...e),this._logHandler(this,ie.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ie.ERROR,...e),this._logHandler(this,ie.ERROR,...e)}}const yC=(t,e)=>e.some(n=>t instanceof n);let Ov,Dv;function vC(){return Ov||(Ov=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function xC(){return Dv||(Dv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zw=new WeakMap,Nf=new WeakMap,eb=new WeakMap,oh=new WeakMap,nm=new WeakMap;function _C(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(tr(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Zw.set(n,t)}).catch(()=>{}),nm.set(e,t),e}function wC(t){if(Nf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Nf.set(t,e)}let If={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Nf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||eb.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function bC(t){If=t(If)}function EC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(ah(this),e,...n);return eb.set(r,e.sort?e.sort():[e]),tr(r)}:xC().includes(t)?function(...e){return t.apply(ah(this),e),tr(Zw.get(this))}:function(...e){return tr(t.apply(ah(this),e))}}function TC(t){return typeof t=="function"?EC(t):(t instanceof IDBTransaction&&wC(t),yC(t,vC())?new Proxy(t,If):t)}function tr(t){if(t instanceof IDBRequest)return _C(t);if(oh.has(t))return oh.get(t);const e=TC(t);return e!==t&&(oh.set(t,e),nm.set(e,t)),e}const ah=t=>nm.get(t);function ku(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=tr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tr(o.result),u.oldVersion,u.newVersion,tr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{i&&u.addEventListener("close",()=>i()),s&&u.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}function lh(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),tr(n).then(()=>{})}const NC=["get","getKey","getAll","getAllKeys","count"],IC=["put","add","delete","clear"],ch=new Map;function Lv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ch.get(e))return ch.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=IC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||NC.includes(n)))return;const i=async function(o,...c){const u=this.transaction(o,s?"readwrite":"readonly");let d=u.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),s&&u.done]))[0]};return ch.set(e,i),i}bC(t=>({...t,get:(e,n,r)=>Lv(e,n)||t.get(e,n,r),has:(e,n)=>!!Lv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Sf="@firebase/app",Mv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ur=new tm("@firebase/app"),AC="@firebase/app-compat",kC="@firebase/analytics-compat",PC="@firebase/analytics",jC="@firebase/app-check-compat",RC="@firebase/app-check",OC="@firebase/auth",DC="@firebase/auth-compat",LC="@firebase/database",MC="@firebase/data-connect",VC="@firebase/database-compat",UC="@firebase/functions",FC="@firebase/functions-compat",zC="@firebase/installations",$C="@firebase/installations-compat",BC="@firebase/messaging",qC="@firebase/messaging-compat",HC="@firebase/performance",WC="@firebase/performance-compat",KC="@firebase/remote-config",GC="@firebase/remote-config-compat",QC="@firebase/storage",YC="@firebase/storage-compat",XC="@firebase/firestore",JC="@firebase/vertexai-preview",ZC="@firebase/firestore-compat",eA="firebase",tA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cf="[DEFAULT]",nA={[Sf]:"fire-core",[AC]:"fire-core-compat",[PC]:"fire-analytics",[kC]:"fire-analytics-compat",[RC]:"fire-app-check",[jC]:"fire-app-check-compat",[OC]:"fire-auth",[DC]:"fire-auth-compat",[LC]:"fire-rtdb",[MC]:"fire-data-connect",[VC]:"fire-rtdb-compat",[UC]:"fire-fn",[FC]:"fire-fn-compat",[zC]:"fire-iid",[$C]:"fire-iid-compat",[BC]:"fire-fcm",[qC]:"fire-fcm-compat",[HC]:"fire-perf",[WC]:"fire-perf-compat",[KC]:"fire-rc",[GC]:"fire-rc-compat",[QC]:"fire-gcs",[YC]:"fire-gcs-compat",[XC]:"fire-fst",[ZC]:"fire-fst-compat",[JC]:"fire-vertex","fire-js":"fire-js",[eA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wc=new Map,rA=new Map,Af=new Map;function Vv(t,e){try{t.container.addComponent(e)}catch(n){ur.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function bn(t){const e=t.name;if(Af.has(e))return ur.debug(`There were multiple attempts to register component ${e}.`),!1;Af.set(e,t);for(const n of Wc.values())Vv(n,t);for(const n of rA.values())Vv(n,t);return!0}function zs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function gn(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},qr=new Fs("app","Firebase",sA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cn("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw qr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $s=tA;function tb(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Cf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw qr.create("bad-app-name",{appName:String(s)});if(n||(n=Gw()),!n)throw qr.create("no-options");const i=Wc.get(s);if(i){if(Na(n,i.options)&&Na(r,i.config))return i;throw qr.create("duplicate-app",{appName:s})}const o=new hC(s);for(const u of Af.values())o.addComponent(u);const c=new iA(n,r,o);return Wc.set(s,c),c}function Pu(t=Cf){const e=Wc.get(t);if(!e&&t===Cf&&Gw())return tb();if(!e)throw qr.create("no-app",{appName:t});return e}function zt(t,e,n){var r;let s=(r=nA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const c=[`Unable to register library "${s}" with version "${e}":`];i&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&c.push("and"),o&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ur.warn(c.join(" "));return}bn(new cn(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oA="firebase-heartbeat-database",aA=1,Ia="firebase-heartbeat-store";let uh=null;function nb(){return uh||(uh=ku(oA,aA,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ia)}catch(n){console.warn(n)}}}}).catch(t=>{throw qr.create("idb-open",{originalErrorMessage:t.message})})),uh}async function lA(t){try{const n=(await nb()).transaction(Ia),r=await n.objectStore(Ia).get(rb(t));return await n.done,r}catch(e){if(e instanceof Nn)ur.warn(e.message);else{const n=qr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});ur.warn(n.message)}}}async function Uv(t,e){try{const r=(await nb()).transaction(Ia,"readwrite");await r.objectStore(Ia).put(e,rb(t)),await r.done}catch(n){if(n instanceof Nn)ur.warn(n.message);else{const r=qr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});ur.warn(r.message)}}}function rb(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cA=1024,uA=30*24*60*60*1e3;class dA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new fA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Fv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const c=new Date(o.date).valueOf();return Date.now()-c<=uA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ur.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Fv(),{heartbeatsToSend:r,unsentEntries:s}=hA(this._heartbeatsCache.heartbeats),i=Hc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return ur.warn(n),""}}}function Fv(){return new Date().toISOString().substring(0,10)}function hA(t,e=cA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),zv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),zv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class fA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Xw()?Jw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await lA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Uv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function zv(t){return Hc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pA(t){bn(new cn("platform-logger",e=>new SC(e),"PRIVATE")),bn(new cn("heartbeat",e=>new dA(e),"PRIVATE")),zt(Sf,Mv,t),zt(Sf,Mv,"esm2017"),zt("fire-js","")}pA("");function rm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function sb(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const mA=sb,ib=new Fs("auth","Firebase",sb());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kc=new tm("@firebase/auth");function gA(t,...e){Kc.logLevel<=ie.WARN&&Kc.warn(`Auth (${$s}): ${t}`,...e)}function ac(t,...e){Kc.logLevel<=ie.ERROR&&Kc.error(`Auth (${$s}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t,...e){throw im(t,...e)}function _n(t,...e){return im(t,...e)}function sm(t,e,n){const r=Object.assign(Object.assign({},mA()),{[e]:n});return new Fs("auth","Firebase",r).create(e,{appName:t.name})}function nr(t){return sm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function yA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&un(t,"argument-error"),sm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function im(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return ib.create(t,...e)}function Q(t,e,...n){if(!t)throw im(e,...n)}function Yn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw ac(e),new Error(e)}function dr(t,e){t||Yn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function vA(){return $v()==="http:"||$v()==="https:"}function $v(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vA()||X2()||"connection"in navigator)?navigator.onLine:!0}function _A(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,n){this.shortDelay=e,this.longDelay=n,dr(n>e,"Short delay should be less than long delay!"),this.isMobile=G2()||J2()}get(){return xA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function om(t,e){dr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ob{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bA=new Wa(3e4,6e4);function gr(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Ln(t,e,n,r,s={}){return ab(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const c=Ha(Object.assign({key:t.config.apiKey},o)).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:u},i);return Y2()||(d.referrerPolicy="no-referrer"),ob.fetch()(lb(t,t.config.apiHost,n,c),d)})}async function ab(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},wA),e);try{const s=new TA(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Bl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const c=i.ok?o.errorMessage:o.error.message,[u,d]=c.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Bl(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Bl(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Bl(t,"user-disabled",o);const f=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw sm(t,f,d);un(t,f)}}catch(s){if(s instanceof Nn)throw s;un(t,"network-request-failed",{message:String(s)})}}async function Ka(t,e,n,r,s={}){const i=await Ln(t,e,n,r,s);return"mfaPendingCredential"in i&&un(t,"multi-factor-auth-required",{_serverResponse:i}),i}function lb(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?om(t.config,s):`${t.config.apiScheme}://${s}`}function EA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class TA{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_n(this.auth,"network-request-failed")),bA.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Bl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_n(t,e,r);return s.customData._tokenResponse=n,s}function Bv(t){return t!==void 0&&t.enterprise!==void 0}class NA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return EA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function IA(t,e){return Ln(t,"GET","/v2/recaptchaConfig",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SA(t,e){return Ln(t,"POST","/v1/accounts:delete",e)}async function cb(t,e){return Ln(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ta(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CA(t,e=!1){const n=Ne(t),r=await n.getIdToken(e),s=am(r);Q(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:ta(dh(s.auth_time)),issuedAtTime:ta(dh(s.iat)),expirationTime:ta(dh(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function dh(t){return Number(t)*1e3}function am(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return ac("JWT malformed, contained fewer than 3 sections"),null;try{const s=Hw(n);return s?JSON.parse(s):(ac("Failed to decode base64 JWT payload"),null)}catch(s){return ac("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function qv(t){const e=am(t);return Q(e,"internal-error"),Q(typeof e.exp<"u","internal-error"),Q(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ui(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Nn&&AA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function AA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ta(this.lastLoginAt),this.creationTime=ta(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Gc(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ui(t,cb(n,{idToken:r}));Q(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ub(i.providerUserInfo):[],c=jA(t.providerData,o),u=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(c!=null&&c.length),f=u?d:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:c,metadata:new Pf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,p)}async function PA(t){const e=Ne(t);await Gc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function jA(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function ub(t){return t.map(e=>{var{providerId:n}=e,r=rm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RA(t,e){const n=await ab(t,{},async()=>{const r=Ha({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=lb(t,s,"/v1/token",`key=${i}`),c=await t._getAdditionalHeaders();return c["Content-Type"]="application/x-www-form-urlencoded",ob.fetch()(o,{method:"POST",headers:c,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function OA(t,e){return Ln(t,"POST","/v2/accounts:revokeToken",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ti{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Q(e.idToken,"internal-error"),Q(typeof e.idToken<"u","internal-error"),Q(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):qv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Q(e.length!==0,"internal-error");const n=qv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Q(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await RA(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new Ti;return r&&(Q(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(Q(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(Q(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ti,this.toJSON())}_performRefresh(){return Yn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Er(t,e){Q(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Xn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=rm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new kA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Pf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ui(this,this.stsTokenManager.getToken(this.auth,e));return Q(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CA(this,e)}reload(){return PA(this)}_assign(e){this!==e&&(Q(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Xn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Q(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Gc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(gn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Ui(this,SA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,c,u,d,f;const p=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,_=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,I=(o=n.photoURL)!==null&&o!==void 0?o:void 0,b=(c=n.tenantId)!==null&&c!==void 0?c:void 0,N=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,v=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:T,isAnonymous:D,providerData:M,stsTokenManager:C}=n;Q(y&&C,e,"internal-error");const E=Ti.fromJSON(this.name,C);Q(typeof y=="string",e,"internal-error"),Er(p,e.name),Er(m,e.name),Q(typeof T=="boolean",e,"internal-error"),Q(typeof D=="boolean",e,"internal-error"),Er(_,e.name),Er(I,e.name),Er(b,e.name),Er(N,e.name),Er(v,e.name),Er(x,e.name);const P=new Xn({uid:y,auth:e,email:m,emailVerified:T,displayName:p,isAnonymous:D,photoURL:I,phoneNumber:_,tenantId:b,stsTokenManager:E,createdAt:v,lastLoginAt:x});return M&&Array.isArray(M)&&(P.providerData=M.map(S=>Object.assign({},S))),N&&(P._redirectEventId=N),P}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ti;s.updateFromServerResponse(n);const i=new Xn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Gc(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];Q(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ub(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),c=new Ti;c.updateFromIdToken(r);const u=new Xn({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new Pf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(u,d),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv=new Map;function Jn(t){dr(t instanceof Function,"Expected a class definition");let e=Hv.get(t);return e?(dr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Hv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class db{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}db.type="NONE";const Wv=db;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ni{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=lc(this.userKey,s.apiKey,i),this.fullPersistenceKey=lc("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Xn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ni(Jn(Wv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Jn(Wv);const o=lc(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const f=await d._get(o);if(f){const p=Xn._fromJSON(e,f);d!==i&&(c=p),i=d;break}}catch{}const u=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!u.length?new Ni(i,e,r):(i=u[0],c&&await i._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new Ni(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Kv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(mb(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(hb(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(yb(e))return"Blackberry";if(vb(e))return"Webos";if(fb(e))return"Safari";if((e.includes("chrome/")||pb(e))&&!e.includes("edge/"))return"Chrome";if(gb(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function hb(t=wt()){return/firefox\//i.test(t)}function fb(t=wt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function pb(t=wt()){return/crios\//i.test(t)}function mb(t=wt()){return/iemobile/i.test(t)}function gb(t=wt()){return/android/i.test(t)}function yb(t=wt()){return/blackberry/i.test(t)}function vb(t=wt()){return/webos/i.test(t)}function lm(t=wt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function DA(t=wt()){var e;return lm(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function LA(){return Z2()&&document.documentMode===10}function xb(t=wt()){return lm(t)||gb(t)||vb(t)||yb(t)||/windows phone/i.test(t)||mb(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _b(t,e=[]){let n;switch(t){case"Browser":n=Kv(wt());break;case"Worker":n=`${Kv(wt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${$s}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,c)=>{try{const u=e(i);o(u)}catch(u){c(u)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function VA(t,e={}){return Ln(t,"GET","/v2/passwordPolicy",gr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UA=6;class FA{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:UA,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,c;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,u),this.validatePasswordCharacterOptions(e,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(s=u.containsLowercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(i=u.containsUppercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(c=u.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),u}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Gv(this),this.idTokenSubscription=new Gv(this),this.beforeStateQueue=new MA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=ib,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Jn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await Ni.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await cb(this,{idToken:e}),r=await Xn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(gn(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s==null?void 0:s._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===c)&&(u!=null&&u.user)&&(s=u.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return Q(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Gc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=_A()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(gn(this.app))return Promise.reject(nr(this));const n=e?Ne(e):null;return n&&Q(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Q(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return gn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return gn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Jn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await VA(this),n=new FA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fs("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await OA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Jn(e)||this._popupRedirectResolver;Q(n,this,"argument-error"),this.redirectPersistenceManager=await Ni.create(this,[Jn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(Q(c,this,"internal-error"),c.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,s);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Q(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=_b(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&gA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function yr(t){return Ne(t)}class Gv{constructor(e){this.auth=e,this.observer=null,this.addObserver=oC(n=>this.observer=n)}get next(){return Q(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ju={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function $A(t){ju=t}function wb(t){return ju.loadJS(t)}function BA(){return ju.recaptchaEnterpriseScript}function qA(){return ju.gapiScript}function HA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const WA="recaptcha-enterprise",KA="NO_RECAPTCHA";class GA{constructor(e){this.type=WA,this.auth=yr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,c)=>{IA(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)c(new Error("recaptcha Enterprise site key undefined"));else{const d=new NA(u);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(u=>{c(u)})})}function s(i,o,c){const u=window.grecaptcha;Bv(u)?u.enterprise.ready(()=>{u.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(KA)})}):c(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(c=>{if(!n&&Bv(window.grecaptcha))s(c,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=BA();u.length!==0&&(u+=c),wb(u).then(()=>{s(c,i,o)}).catch(d=>{o(d)})}}).catch(c=>{o(c)})})}}async function Qv(t,e,n,r=!1){const s=new GA(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Qc(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Qv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Qv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QA(t,e){const n=zs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(Na(i,e??{}))return s;un(s,"already-initialized")}return n.initialize({options:e})}function YA(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Jn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function XA(t,e,n){const r=yr(t);Q(r._canInitEmulator,r,"emulator-config-failed"),Q(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=bb(e),{host:o,port:c}=JA(e),u=c===null?"":`:${c}`;r.config.emulator={url:`${i}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:c,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),ZA()}function bb(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function JA(t){const e=bb(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Yv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Yv(o)}}}function Yv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function ZA(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Yn("not implemented")}_getIdTokenResponse(e){return Yn("not implemented")}_linkToIdToken(e,n){return Yn("not implemented")}_getReauthenticationResolver(e){return Yn("not implemented")}}async function ek(t,e){return Ln(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tk(t,e){return Ka(t,"POST","/v1/accounts:signInWithPassword",gr(t,e))}async function nk(t,e){return Ln(t,"POST","/v1/accounts:sendOobCode",gr(t,e))}async function rk(t,e){return nk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}async function ik(t,e){return Ka(t,"POST","/v1/accounts:signInWithEmailLink",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa extends cm{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new Sa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Sa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,n,"signInWithPassword",tk);case"emailLink":return sk(e,{email:this._email,oobCode:this._password});default:un(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Qc(e,r,"signUpPassword",ek);case"emailLink":return ik(e,{idToken:n,email:this._email,oobCode:this._password});default:un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ii(t,e){return Ka(t,"POST","/v1/accounts:signInWithIdp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="http://localhost";class Ss extends cm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ss(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):un("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=rm(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new Ss(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ii(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ii(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ii(e,n)}buildRequest(){const e={requestUri:ok,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Ha(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ak(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function lk(t){const e=Uo(Fo(t)).link,n=e?Uo(Fo(e)).deep_link_id:null,r=Uo(Fo(t)).deep_link_id;return(r?Uo(Fo(r)).link:null)||r||n||e||t}class um{constructor(e){var n,r,s,i,o,c;const u=Uo(Fo(e)),d=(n=u.apiKey)!==null&&n!==void 0?n:null,f=(r=u.oobCode)!==null&&r!==void 0?r:null,p=ak((s=u.mode)!==null&&s!==void 0?s:null);Q(d&&f&&p,"argument-error"),this.apiKey=d,this.operation=p,this.code=f,this.continueUrl=(i=u.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=u.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(c=u.tenantId)!==null&&c!==void 0?c:null}static parseLink(e){const n=lk(e);try{return new um(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class io{constructor(){this.providerId=io.PROVIDER_ID}static credential(e,n){return Sa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=um.parseLink(n);return Q(r,"argument-error"),Sa._fromEmailAndCode(e,r.code,r.tenantId)}}io.PROVIDER_ID="password";io.EMAIL_PASSWORD_SIGN_IN_METHOD="password";io.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga extends dm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cr extends Ga{constructor(){super("facebook.com")}static credential(e){return Ss._fromParams({providerId:Cr.PROVIDER_ID,signInMethod:Cr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cr.credentialFromTaggedObject(e)}static credentialFromError(e){return Cr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Cr.credential(e.oauthAccessToken)}catch{return null}}}Cr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Cr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn extends Ga{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ss._fromParams({providerId:Kn.PROVIDER_ID,signInMethod:Kn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Kn.credentialFromTaggedObject(e)}static credentialFromError(e){return Kn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Kn.credential(n,r)}catch{return null}}}Kn.GOOGLE_SIGN_IN_METHOD="google.com";Kn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar extends Ga{constructor(){super("github.com")}static credential(e){return Ss._fromParams({providerId:Ar.PROVIDER_ID,signInMethod:Ar.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ar.credentialFromTaggedObject(e)}static credentialFromError(e){return Ar.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ar.credential(e.oauthAccessToken)}catch{return null}}}Ar.GITHUB_SIGN_IN_METHOD="github.com";Ar.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Ga{constructor(){super("twitter.com")}static credential(e,n){return Ss._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return kr.credential(n,r)}catch{return null}}}kr.TWITTER_SIGN_IN_METHOD="twitter.com";kr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ck(t,e){return Ka(t,"POST","/v1/accounts:signUp",gr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Xn._fromIdTokenResponse(e,r,s),o=Xv(r);return new Cs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Xv(r);return new Cs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Xv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc extends Nn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Yc.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Yc(e,n,r,s)}}function Eb(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Yc._fromErrorAndOperation(t,i,e,r):i})}async function uk(t,e,n=!1){const r=await Ui(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Cs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dk(t,e,n=!1){const{auth:r}=t;if(gn(r.app))return Promise.reject(nr(r));const s="reauthenticate";try{const i=await Ui(t,Eb(r,s,e,t),n);Q(i.idToken,r,"internal-error");const o=am(i.idToken);Q(o,r,"internal-error");const{sub:c}=o;return Q(t.uid===c,r,"user-mismatch"),Cs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&un(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tb(t,e,n=!1){if(gn(t.app))return Promise.reject(nr(t));const r="signIn",s=await Eb(t,r,e),i=await Cs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function hk(t,e){return Tb(yr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nb(t){const e=yr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function fk(t,e,n){const r=yr(t);await Qc(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",rk)}async function pk(t,e,n){if(gn(t.app))return Promise.reject(nr(t));const r=yr(t),o=await Qc(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ck).catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Nb(t),u}),c=await Cs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(c.user),c}function mk(t,e,n){return gn(t.app)?Promise.reject(nr(t)):hk(Ne(t),io.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Nb(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gk(t,e){return Ln(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Ne(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ui(r,gk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const c=r.providerData.find(({providerId:u})=>u==="password");c&&(c.displayName=r.displayName,c.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function vk(t,e,n,r){return Ne(t).onIdTokenChanged(e,n,r)}function xk(t,e,n){return Ne(t).beforeAuthStateChanged(e,n)}function _k(t,e,n,r){return Ne(t).onAuthStateChanged(e,n,r)}function wk(t){return Ne(t).signOut()}const Xc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ib{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xc,"1"),this.storage.removeItem(Xc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bk=1e3,Ek=10;class Sb extends Ib{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=xb(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);LA()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Ek):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},bk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Sb.type="LOCAL";const Tk=Sb;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cb extends Ib{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Cb.type="SESSION";const Ab=Cb;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ru{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new Ru(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(o).map(async d=>d(n.origin,i)),u=await Nk(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ru.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ik{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((c,u)=>{const d=hm("",20);s.port1.start();const f=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(p){const m=p;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),c(m.data.response);break;default:clearTimeout(f),clearTimeout(i),u(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(){return window}function Sk(t){Pn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kb(){return typeof Pn().WorkerGlobalScope<"u"&&typeof Pn().importScripts=="function"}async function Ck(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ak(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kk(){return kb()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pb="firebaseLocalStorageDb",Pk=1,Jc="firebaseLocalStorage",jb="fbase_key";class Qa{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ou(t,e){return t.transaction([Jc],e?"readwrite":"readonly").objectStore(Jc)}function jk(){const t=indexedDB.deleteDatabase(Pb);return new Qa(t).toPromise()}function jf(){const t=indexedDB.open(Pb,Pk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Jc,{keyPath:jb})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Jc)?e(r):(r.close(),await jk(),e(await jf()))})})}async function Jv(t,e,n){const r=Ou(t,!0).put({[jb]:e,value:n});return new Qa(r).toPromise()}async function Rk(t,e){const n=Ou(t,!1).get(e),r=await new Qa(n).toPromise();return r===void 0?null:r.value}function Zv(t,e){const n=Ou(t,!0).delete(e);return new Qa(n).toPromise()}const Ok=800,Dk=3;class Rb{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await jf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Dk)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return kb()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ru._getInstance(kk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Ck(),!this.activeServiceWorker)return;this.sender=new Ik(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ak()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await jf();return await Jv(e,Xc,"1"),await Zv(e,Xc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Jv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Rk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Zv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ou(s,!1).getAll();return new Qa(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Ok)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Rb.type="LOCAL";const Lk=Rb;new Wa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ob(t,e){return e?Jn(e):(Q(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fm extends cm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ii(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ii(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ii(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mk(t){return Tb(t.auth,new fm(t),t.bypassAuthState)}function Vk(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),dk(n,new fm(t),t.bypassAuthState)}async function Uk(t){const{auth:e,user:n}=t;return Q(n,e,"internal-error"),uk(n,new fm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Db{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:c}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(u))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mk;case"linkViaPopup":case"linkViaRedirect":return Uk;case"reauthViaPopup":case"reauthViaRedirect":return Vk;default:un(this.auth,"internal-error")}}resolve(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){dr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=new Wa(2e3,1e4);async function zk(t,e,n){if(gn(t.app))return Promise.reject(_n(t,"operation-not-supported-in-this-environment"));const r=yr(t);yA(t,e,dm);const s=Ob(r,n);return new ms(r,"signInViaPopup",e,s).executeNotNull()}class ms extends Db{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,ms.currentPopupAction&&ms.currentPopupAction.cancel(),ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Q(e,this.auth,"internal-error"),e}async onExecution(){dr(this.filter.length===1,"Popup operations only handle one event");const e=hm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(_n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Fk.get())};e()}}ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $k="pendingRedirect",cc=new Map;class Bk extends Db{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=cc.get(this.auth._key());if(!e){try{const r=await qk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}cc.set(this.auth._key(),e)}return this.bypassAuthState||cc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function qk(t,e){const n=Kk(e),r=Wk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Hk(t,e){cc.set(t._key(),e)}function Wk(t){return Jn(t._redirectPersistence)}function Kk(t){return lc($k,t.config.apiKey,t.name)}async function Gk(t,e,n=!1){if(gn(t.app))return Promise.reject(nr(t));const r=yr(t),s=Ob(r,e),o=await new Bk(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qk=10*60*1e3;class Yk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!Lb(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_n(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Qk&&this.cachedEventUids.clear(),this.cachedEventUids.has(e0(e))}saveEventToCache(e){this.cachedEventUids.add(e0(e)),this.lastProcessedEventTime=Date.now()}}function e0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function Lb({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Xk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Lb(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jk(t,e={}){return Ln(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,eP=/^https?/;async function tP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Jk(t);for(const n of e)try{if(nP(n))return}catch{}un(t,"unauthorized-domain")}function nP(t){const e=kf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!eP.test(n))return!1;if(Zk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rP=new Wa(3e4,6e4);function t0(){const t=Pn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sP(t){return new Promise((e,n)=>{var r,s,i;function o(){t0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t0(),n(_n(t,"network-request-failed"))},timeout:rP.get()})}if(!((s=(r=Pn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Pn().gapi)===null||i===void 0)&&i.load)o();else{const c=HA("iframefcb");return Pn()[c]=()=>{gapi.load?o():n(_n(t,"network-request-failed"))},wb(`${qA()}?onload=${c}`).catch(u=>n(u))}}).catch(e=>{throw uc=null,e})}let uc=null;function iP(t){return uc=uc||sP(t),uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oP=new Wa(5e3,15e3),aP="__/auth/iframe",lP="emulator/auth/iframe",cP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dP(t){const e=t.config;Q(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?om(e,lP):`https://${t.config.authDomain}/${aP}`,r={apiKey:e.apiKey,appName:t.name,v:$s},s=uP.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${Ha(r).slice(1)}`}async function hP(t){const e=await iP(t),n=Pn().gapi;return Q(n,t,"internal-error"),e.open({where:document.body,url:dP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:cP,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=_n(t,"network-request-failed"),c=Pn().setTimeout(()=>{i(o)},oP.get());function u(){Pn().clearTimeout(c),s(r)}r.ping(u).then(u,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},pP=500,mP=600,gP="_blank",yP="http://localhost";class n0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vP(t,e,n,r=pP,s=mP){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const u=Object.assign(Object.assign({},fP),{width:r.toString(),height:s.toString(),top:i,left:o}),d=wt().toLowerCase();n&&(c=pb(d)?gP:n),hb(d)&&(e=e||yP,u.scrollbars="yes");const f=Object.entries(u).reduce((m,[_,I])=>`${m}${_}=${I},`,"");if(DA(d)&&c!=="_self")return xP(e||"",c),new n0(null);const p=window.open(e||"",c,f);Q(p,t,"popup-blocked");try{p.focus()}catch{}return new n0(p)}function xP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _P="__/auth/handler",wP="emulator/auth/handler",bP=encodeURIComponent("fac");async function r0(t,e,n,r,s,i){Q(t.config.authDomain,t,"auth-domain-config-required"),Q(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:$s,eventId:s};if(e instanceof dm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",iC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,p]of Object.entries({}))o[f]=p}if(e instanceof Ga){const f=e.getScopes().filter(p=>p!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const u=await t._getAppCheckToken(),d=u?`#${bP}=${encodeURIComponent(u)}`:"";return`${EP(t)}?${Ha(c).slice(1)}${d}`}function EP({config:t}){return t.emulator?om(t,wP):`https://${t.authDomain}/${_P}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hh="webStorageSupport";class TP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ab,this._completeRedirectFn=Gk,this._overrideRedirectResult=Hk}async _openPopup(e,n,r,s){var i;dr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await r0(e,n,r,kf(),s);return vP(e,o,hm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await r0(e,n,r,kf(),s);return Sk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(dr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await hP(e),r=new Yk(e);return n.register("authEvent",s=>(Q(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(hh,{type:hh},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[hh];o!==void 0&&n(!!o),un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=tP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return xb()||fb()||lm()}}const NP=TP;var s0="@firebase/auth",i0="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Q(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function CP(t){bn(new cn("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;Q(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:_b(t)},d=new zA(r,s,i,u);return YA(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),bn(new cn("auth-internal",e=>{const n=yr(e.getProvider("auth").getImmediate());return(r=>new IP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),zt(s0,i0,SP(t)),zt(s0,i0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AP=5*60,kP=Qw("authIdTokenMaxAge")||AP;let o0=null;const PP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>kP)return;const s=n==null?void 0:n.token;o0!==s&&(o0=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function jP(t=Pu()){const e=zs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=QA(t,{popupRedirectResolver:NP,persistence:[Lk,Tk,Ab]}),r=Qw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=PP(i.toString());xk(n,o,()=>o(n.currentUser)),vk(n,c=>o(c))}}const s=Ww("auth");return s&&XA(n,`http://${s}`),n}function RP(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}$A({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=_n("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",RP().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});CP("Browser");var OP="firebase",DP="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zt(OP,DP,"app");var a0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var _s,Mb;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,E){function P(){}P.prototype=E.prototype,C.D=E.prototype,C.prototype=new P,C.prototype.constructor=C,C.C=function(S,A,R){for(var k=Array(arguments.length-2),fe=2;fe<arguments.length;fe++)k[fe-2]=arguments[fe];return E.prototype[A].apply(S,k)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(C,E,P){P||(P=0);var S=Array(16);if(typeof E=="string")for(var A=0;16>A;++A)S[A]=E.charCodeAt(P++)|E.charCodeAt(P++)<<8|E.charCodeAt(P++)<<16|E.charCodeAt(P++)<<24;else for(A=0;16>A;++A)S[A]=E[P++]|E[P++]<<8|E[P++]<<16|E[P++]<<24;E=C.g[0],P=C.g[1],A=C.g[2];var R=C.g[3],k=E+(R^P&(A^R))+S[0]+3614090360&4294967295;E=P+(k<<7&4294967295|k>>>25),k=R+(A^E&(P^A))+S[1]+3905402710&4294967295,R=E+(k<<12&4294967295|k>>>20),k=A+(P^R&(E^P))+S[2]+606105819&4294967295,A=R+(k<<17&4294967295|k>>>15),k=P+(E^A&(R^E))+S[3]+3250441966&4294967295,P=A+(k<<22&4294967295|k>>>10),k=E+(R^P&(A^R))+S[4]+4118548399&4294967295,E=P+(k<<7&4294967295|k>>>25),k=R+(A^E&(P^A))+S[5]+1200080426&4294967295,R=E+(k<<12&4294967295|k>>>20),k=A+(P^R&(E^P))+S[6]+2821735955&4294967295,A=R+(k<<17&4294967295|k>>>15),k=P+(E^A&(R^E))+S[7]+4249261313&4294967295,P=A+(k<<22&4294967295|k>>>10),k=E+(R^P&(A^R))+S[8]+1770035416&4294967295,E=P+(k<<7&4294967295|k>>>25),k=R+(A^E&(P^A))+S[9]+2336552879&4294967295,R=E+(k<<12&4294967295|k>>>20),k=A+(P^R&(E^P))+S[10]+4294925233&4294967295,A=R+(k<<17&4294967295|k>>>15),k=P+(E^A&(R^E))+S[11]+2304563134&4294967295,P=A+(k<<22&4294967295|k>>>10),k=E+(R^P&(A^R))+S[12]+1804603682&4294967295,E=P+(k<<7&4294967295|k>>>25),k=R+(A^E&(P^A))+S[13]+4254626195&4294967295,R=E+(k<<12&4294967295|k>>>20),k=A+(P^R&(E^P))+S[14]+2792965006&4294967295,A=R+(k<<17&4294967295|k>>>15),k=P+(E^A&(R^E))+S[15]+1236535329&4294967295,P=A+(k<<22&4294967295|k>>>10),k=E+(A^R&(P^A))+S[1]+4129170786&4294967295,E=P+(k<<5&4294967295|k>>>27),k=R+(P^A&(E^P))+S[6]+3225465664&4294967295,R=E+(k<<9&4294967295|k>>>23),k=A+(E^P&(R^E))+S[11]+643717713&4294967295,A=R+(k<<14&4294967295|k>>>18),k=P+(R^E&(A^R))+S[0]+3921069994&4294967295,P=A+(k<<20&4294967295|k>>>12),k=E+(A^R&(P^A))+S[5]+3593408605&4294967295,E=P+(k<<5&4294967295|k>>>27),k=R+(P^A&(E^P))+S[10]+38016083&4294967295,R=E+(k<<9&4294967295|k>>>23),k=A+(E^P&(R^E))+S[15]+3634488961&4294967295,A=R+(k<<14&4294967295|k>>>18),k=P+(R^E&(A^R))+S[4]+3889429448&4294967295,P=A+(k<<20&4294967295|k>>>12),k=E+(A^R&(P^A))+S[9]+568446438&4294967295,E=P+(k<<5&4294967295|k>>>27),k=R+(P^A&(E^P))+S[14]+3275163606&4294967295,R=E+(k<<9&4294967295|k>>>23),k=A+(E^P&(R^E))+S[3]+4107603335&4294967295,A=R+(k<<14&4294967295|k>>>18),k=P+(R^E&(A^R))+S[8]+1163531501&4294967295,P=A+(k<<20&4294967295|k>>>12),k=E+(A^R&(P^A))+S[13]+2850285829&4294967295,E=P+(k<<5&4294967295|k>>>27),k=R+(P^A&(E^P))+S[2]+4243563512&4294967295,R=E+(k<<9&4294967295|k>>>23),k=A+(E^P&(R^E))+S[7]+1735328473&4294967295,A=R+(k<<14&4294967295|k>>>18),k=P+(R^E&(A^R))+S[12]+2368359562&4294967295,P=A+(k<<20&4294967295|k>>>12),k=E+(P^A^R)+S[5]+4294588738&4294967295,E=P+(k<<4&4294967295|k>>>28),k=R+(E^P^A)+S[8]+2272392833&4294967295,R=E+(k<<11&4294967295|k>>>21),k=A+(R^E^P)+S[11]+1839030562&4294967295,A=R+(k<<16&4294967295|k>>>16),k=P+(A^R^E)+S[14]+4259657740&4294967295,P=A+(k<<23&4294967295|k>>>9),k=E+(P^A^R)+S[1]+2763975236&4294967295,E=P+(k<<4&4294967295|k>>>28),k=R+(E^P^A)+S[4]+1272893353&4294967295,R=E+(k<<11&4294967295|k>>>21),k=A+(R^E^P)+S[7]+4139469664&4294967295,A=R+(k<<16&4294967295|k>>>16),k=P+(A^R^E)+S[10]+3200236656&4294967295,P=A+(k<<23&4294967295|k>>>9),k=E+(P^A^R)+S[13]+681279174&4294967295,E=P+(k<<4&4294967295|k>>>28),k=R+(E^P^A)+S[0]+3936430074&4294967295,R=E+(k<<11&4294967295|k>>>21),k=A+(R^E^P)+S[3]+3572445317&4294967295,A=R+(k<<16&4294967295|k>>>16),k=P+(A^R^E)+S[6]+76029189&4294967295,P=A+(k<<23&4294967295|k>>>9),k=E+(P^A^R)+S[9]+3654602809&4294967295,E=P+(k<<4&4294967295|k>>>28),k=R+(E^P^A)+S[12]+3873151461&4294967295,R=E+(k<<11&4294967295|k>>>21),k=A+(R^E^P)+S[15]+530742520&4294967295,A=R+(k<<16&4294967295|k>>>16),k=P+(A^R^E)+S[2]+3299628645&4294967295,P=A+(k<<23&4294967295|k>>>9),k=E+(A^(P|~R))+S[0]+4096336452&4294967295,E=P+(k<<6&4294967295|k>>>26),k=R+(P^(E|~A))+S[7]+1126891415&4294967295,R=E+(k<<10&4294967295|k>>>22),k=A+(E^(R|~P))+S[14]+2878612391&4294967295,A=R+(k<<15&4294967295|k>>>17),k=P+(R^(A|~E))+S[5]+4237533241&4294967295,P=A+(k<<21&4294967295|k>>>11),k=E+(A^(P|~R))+S[12]+1700485571&4294967295,E=P+(k<<6&4294967295|k>>>26),k=R+(P^(E|~A))+S[3]+2399980690&4294967295,R=E+(k<<10&4294967295|k>>>22),k=A+(E^(R|~P))+S[10]+4293915773&4294967295,A=R+(k<<15&4294967295|k>>>17),k=P+(R^(A|~E))+S[1]+2240044497&4294967295,P=A+(k<<21&4294967295|k>>>11),k=E+(A^(P|~R))+S[8]+1873313359&4294967295,E=P+(k<<6&4294967295|k>>>26),k=R+(P^(E|~A))+S[15]+4264355552&4294967295,R=E+(k<<10&4294967295|k>>>22),k=A+(E^(R|~P))+S[6]+2734768916&4294967295,A=R+(k<<15&4294967295|k>>>17),k=P+(R^(A|~E))+S[13]+1309151649&4294967295,P=A+(k<<21&4294967295|k>>>11),k=E+(A^(P|~R))+S[4]+4149444226&4294967295,E=P+(k<<6&4294967295|k>>>26),k=R+(P^(E|~A))+S[11]+3174756917&4294967295,R=E+(k<<10&4294967295|k>>>22),k=A+(E^(R|~P))+S[2]+718787259&4294967295,A=R+(k<<15&4294967295|k>>>17),k=P+(R^(A|~E))+S[9]+3951481745&4294967295,C.g[0]=C.g[0]+E&4294967295,C.g[1]=C.g[1]+(A+(k<<21&4294967295|k>>>11))&4294967295,C.g[2]=C.g[2]+A&4294967295,C.g[3]=C.g[3]+R&4294967295}r.prototype.u=function(C,E){E===void 0&&(E=C.length);for(var P=E-this.blockSize,S=this.B,A=this.h,R=0;R<E;){if(A==0)for(;R<=P;)s(this,C,R),R+=this.blockSize;if(typeof C=="string"){for(;R<E;)if(S[A++]=C.charCodeAt(R++),A==this.blockSize){s(this,S),A=0;break}}else for(;R<E;)if(S[A++]=C[R++],A==this.blockSize){s(this,S),A=0;break}}this.h=A,this.o+=E},r.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var E=1;E<C.length-8;++E)C[E]=0;var P=8*this.o;for(E=C.length-8;E<C.length;++E)C[E]=P&255,P/=256;for(this.u(C),C=Array(16),E=P=0;4>E;++E)for(var S=0;32>S;S+=8)C[P++]=this.g[E]>>>S&255;return C};function i(C,E){var P=c;return Object.prototype.hasOwnProperty.call(P,C)?P[C]:P[C]=E(C)}function o(C,E){this.h=E;for(var P=[],S=!0,A=C.length-1;0<=A;A--){var R=C[A]|0;S&&R==E||(P[A]=R,S=!1)}this.g=P}var c={};function u(C){return-128<=C&&128>C?i(C,function(E){return new o([E|0],0>E?-1:0)}):new o([C|0],0>C?-1:0)}function d(C){if(isNaN(C)||!isFinite(C))return p;if(0>C)return N(d(-C));for(var E=[],P=1,S=0;C>=P;S++)E[S]=C/P|0,P*=4294967296;return new o(E,0)}function f(C,E){if(C.length==0)throw Error("number format error: empty string");if(E=E||10,2>E||36<E)throw Error("radix out of range: "+E);if(C.charAt(0)=="-")return N(f(C.substring(1),E));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var P=d(Math.pow(E,8)),S=p,A=0;A<C.length;A+=8){var R=Math.min(8,C.length-A),k=parseInt(C.substring(A,A+R),E);8>R?(R=d(Math.pow(E,R)),S=S.j(R).add(d(k))):(S=S.j(P),S=S.add(d(k)))}return S}var p=u(0),m=u(1),_=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-N(this).m();for(var C=0,E=1,P=0;P<this.g.length;P++){var S=this.i(P);C+=(0<=S?S:4294967296+S)*E,E*=4294967296}return C},t.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(I(this))return"0";if(b(this))return"-"+N(this).toString(C);for(var E=d(Math.pow(C,6)),P=this,S="";;){var A=T(P,E).g;P=v(P,A.j(E));var R=((0<P.g.length?P.g[0]:P.h)>>>0).toString(C);if(P=A,I(P))return R+S;for(;6>R.length;)R="0"+R;S=R+S}},t.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function I(C){if(C.h!=0)return!1;for(var E=0;E<C.g.length;E++)if(C.g[E]!=0)return!1;return!0}function b(C){return C.h==-1}t.l=function(C){return C=v(this,C),b(C)?-1:I(C)?0:1};function N(C){for(var E=C.g.length,P=[],S=0;S<E;S++)P[S]=~C.g[S];return new o(P,~C.h).add(m)}t.abs=function(){return b(this)?N(this):this},t.add=function(C){for(var E=Math.max(this.g.length,C.g.length),P=[],S=0,A=0;A<=E;A++){var R=S+(this.i(A)&65535)+(C.i(A)&65535),k=(R>>>16)+(this.i(A)>>>16)+(C.i(A)>>>16);S=k>>>16,R&=65535,k&=65535,P[A]=k<<16|R}return new o(P,P[P.length-1]&-2147483648?-1:0)};function v(C,E){return C.add(N(E))}t.j=function(C){if(I(this)||I(C))return p;if(b(this))return b(C)?N(this).j(N(C)):N(N(this).j(C));if(b(C))return N(this.j(N(C)));if(0>this.l(_)&&0>C.l(_))return d(this.m()*C.m());for(var E=this.g.length+C.g.length,P=[],S=0;S<2*E;S++)P[S]=0;for(S=0;S<this.g.length;S++)for(var A=0;A<C.g.length;A++){var R=this.i(S)>>>16,k=this.i(S)&65535,fe=C.i(A)>>>16,ke=C.i(A)&65535;P[2*S+2*A]+=k*ke,x(P,2*S+2*A),P[2*S+2*A+1]+=R*ke,x(P,2*S+2*A+1),P[2*S+2*A+1]+=k*fe,x(P,2*S+2*A+1),P[2*S+2*A+2]+=R*fe,x(P,2*S+2*A+2)}for(S=0;S<E;S++)P[S]=P[2*S+1]<<16|P[2*S];for(S=E;S<2*E;S++)P[S]=0;return new o(P,0)};function x(C,E){for(;(C[E]&65535)!=C[E];)C[E+1]+=C[E]>>>16,C[E]&=65535,E++}function y(C,E){this.g=C,this.h=E}function T(C,E){if(I(E))throw Error("division by zero");if(I(C))return new y(p,p);if(b(C))return E=T(N(C),E),new y(N(E.g),N(E.h));if(b(E))return E=T(C,N(E)),new y(N(E.g),E.h);if(30<C.g.length){if(b(C)||b(E))throw Error("slowDivide_ only works with positive integers.");for(var P=m,S=E;0>=S.l(C);)P=D(P),S=D(S);var A=M(P,1),R=M(S,1);for(S=M(S,2),P=M(P,2);!I(S);){var k=R.add(S);0>=k.l(C)&&(A=A.add(P),R=k),S=M(S,1),P=M(P,1)}return E=v(C,A.j(E)),new y(A,E)}for(A=p;0<=C.l(E);){for(P=Math.max(1,Math.floor(C.m()/E.m())),S=Math.ceil(Math.log(P)/Math.LN2),S=48>=S?1:Math.pow(2,S-48),R=d(P),k=R.j(E);b(k)||0<k.l(C);)P-=S,R=d(P),k=R.j(E);I(R)&&(R=m),A=A.add(R),C=v(C,k)}return new y(A,C)}t.A=function(C){return T(this,C).h},t.and=function(C){for(var E=Math.max(this.g.length,C.g.length),P=[],S=0;S<E;S++)P[S]=this.i(S)&C.i(S);return new o(P,this.h&C.h)},t.or=function(C){for(var E=Math.max(this.g.length,C.g.length),P=[],S=0;S<E;S++)P[S]=this.i(S)|C.i(S);return new o(P,this.h|C.h)},t.xor=function(C){for(var E=Math.max(this.g.length,C.g.length),P=[],S=0;S<E;S++)P[S]=this.i(S)^C.i(S);return new o(P,this.h^C.h)};function D(C){for(var E=C.g.length+1,P=[],S=0;S<E;S++)P[S]=C.i(S)<<1|C.i(S-1)>>>31;return new o(P,C.h)}function M(C,E){var P=E>>5;E%=32;for(var S=C.g.length-P,A=[],R=0;R<S;R++)A[R]=0<E?C.i(R+P)>>>E|C.i(R+P+1)<<32-E:C.i(R+P);return new o(A,C.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,Mb=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,_s=o}).apply(typeof a0<"u"?a0:typeof self<"u"?self:typeof window<"u"?window:{});var ql=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vb,zo,Ub,dc,Rf,Fb,zb,$b;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(l,h,g){return l==Array.prototype||l==Object.prototype||(l[h]=g.value),l};function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof ql=="object"&&ql];for(var h=0;h<l.length;++h){var g=l[h];if(g&&g.Math==Math)return g}throw Error("Cannot find global object")}var r=n(this);function s(l,h){if(h)e:{var g=r;l=l.split(".");for(var w=0;w<l.length-1;w++){var O=l[w];if(!(O in g))break e;g=g[O]}l=l[l.length-1],w=g[l],h=h(w),h!=w&&h!=null&&e(g,l,{configurable:!0,writable:!0,value:h})}}function i(l,h){l instanceof String&&(l+="");var g=0,w=!1,O={next:function(){if(!w&&g<l.length){var L=g++;return{value:h(L,l[L]),done:!1}}return w=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(l){return l||function(){return i(this,function(h,g){return g})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},c=this||self;function u(l){var h=typeof l;return h=h!="object"?h:l?Array.isArray(l)?"array":h:"null",h=="array"||h=="object"&&typeof l.length=="number"}function d(l){var h=typeof l;return h=="object"&&l!=null||h=="function"}function f(l,h,g){return l.call.apply(l.bind,arguments)}function p(l,h,g){if(!l)throw Error();if(2<arguments.length){var w=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,w),l.apply(h,O)}}return function(){return l.apply(h,arguments)}}function m(l,h,g){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:p,m.apply(null,arguments)}function _(l,h){var g=Array.prototype.slice.call(arguments,1);return function(){var w=g.slice();return w.push.apply(w,arguments),l.apply(this,w)}}function I(l,h){function g(){}g.prototype=h.prototype,l.aa=h.prototype,l.prototype=new g,l.prototype.constructor=l,l.Qb=function(w,O,L){for(var z=Array(arguments.length-2),me=2;me<arguments.length;me++)z[me-2]=arguments[me];return h.prototype[O].apply(w,z)}}function b(l){const h=l.length;if(0<h){const g=Array(h);for(let w=0;w<h;w++)g[w]=l[w];return g}return[]}function N(l,h){for(let g=1;g<arguments.length;g++){const w=arguments[g];if(u(w)){const O=l.length||0,L=w.length||0;l.length=O+L;for(let z=0;z<L;z++)l[O+z]=w[z]}else l.push(w)}}class v{constructor(h,g){this.i=h,this.j=g,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(l){return/^[\s\xa0]*$/.test(l)}function y(){var l=c.navigator;return l&&(l=l.userAgent)?l:""}function T(l){return T[" "](l),l}T[" "]=function(){};var D=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function M(l,h,g){for(const w in l)h.call(g,l[w],w,l)}function C(l,h){for(const g in l)h.call(void 0,l[g],g,l)}function E(l){const h={};for(const g in l)h[g]=l[g];return h}const P="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function S(l,h){let g,w;for(let O=1;O<arguments.length;O++){w=arguments[O];for(g in w)l[g]=w[g];for(let L=0;L<P.length;L++)g=P[L],Object.prototype.hasOwnProperty.call(w,g)&&(l[g]=w[g])}}function A(l){var h=1;l=l.split(":");const g=[];for(;0<h&&l.length;)g.push(l.shift()),h--;return l.length&&g.push(l.join(":")),g}function R(l){c.setTimeout(()=>{throw l},0)}function k(){var l=G;let h=null;return l.g&&(h=l.g,l.g=l.g.next,l.g||(l.h=null),h.next=null),h}class fe{constructor(){this.h=this.g=null}add(h,g){const w=ke.get();w.set(h,g),this.h?this.h.next=w:this.g=w,this.h=w}}var ke=new v(()=>new Y,l=>l.reset());class Y{constructor(){this.next=this.g=this.h=null}set(h,g){this.h=h,this.g=g,this.next=null}reset(){this.next=this.g=this.h=null}}let xe,$=!1,G=new fe,X=()=>{const l=c.Promise.resolve(void 0);xe=()=>{l.then(_e)}};var _e=()=>{for(var l;l=k();){try{l.h.call(l.g)}catch(g){R(g)}var h=ke;h.j(l),100>h.h&&(h.h++,l.next=h.g,h.g=l)}$=!1};function pe(){this.s=this.s,this.C=this.C}pe.prototype.s=!1,pe.prototype.ma=function(){this.s||(this.s=!0,this.N())},pe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Re(l,h){this.type=l,this.g=this.target=h,this.defaultPrevented=!1}Re.prototype.h=function(){this.defaultPrevented=!0};var Vn=function(){if(!c.addEventListener||!Object.defineProperty)return!1;var l=!1,h=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const g=()=>{};c.addEventListener("test",g,h),c.removeEventListener("test",g,h)}catch{}return l}();function Un(l,h){if(Re.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l){var g=this.type=l.type,w=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;if(this.target=l.target||l.srcElement,this.g=h,h=l.relatedTarget){if(D){e:{try{T(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else g=="mouseover"?h=l.fromElement:g=="mouseout"&&(h=l.toElement);this.relatedTarget=h,w?(this.clientX=w.clientX!==void 0?w.clientX:w.pageX,this.clientY=w.clientY!==void 0?w.clientY:w.pageY,this.screenX=w.screenX||0,this.screenY=w.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=typeof l.pointerType=="string"?l.pointerType:Fn[l.pointerType]||"",this.state=l.state,this.i=l,l.defaultPrevented&&Un.aa.h.call(this)}}I(Un,Re);var Fn={2:"touch",3:"pen",4:"mouse"};Un.prototype.h=function(){Un.aa.h.call(this);var l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var zn="closure_listenable_"+(1e6*Math.random()|0),jN=0;function RN(l,h,g,w,O){this.listener=l,this.proxy=null,this.src=h,this.type=g,this.capture=!!w,this.ha=O,this.key=++jN,this.da=this.fa=!1}function ll(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function cl(l){this.src=l,this.g={},this.h=0}cl.prototype.add=function(l,h,g,w,O){var L=l.toString();l=this.g[L],l||(l=this.g[L]=[],this.h++);var z=cd(l,h,w,O);return-1<z?(h=l[z],g||(h.fa=!1)):(h=new RN(h,this.src,L,!!w,O),h.fa=g,l.push(h)),h};function ld(l,h){var g=h.type;if(g in l.g){var w=l.g[g],O=Array.prototype.indexOf.call(w,h,void 0),L;(L=0<=O)&&Array.prototype.splice.call(w,O,1),L&&(ll(h),l.g[g].length==0&&(delete l.g[g],l.h--))}}function cd(l,h,g,w){for(var O=0;O<l.length;++O){var L=l[O];if(!L.da&&L.listener==h&&L.capture==!!g&&L.ha==w)return O}return-1}var ud="closure_lm_"+(1e6*Math.random()|0),dd={};function gg(l,h,g,w,O){if(Array.isArray(h)){for(var L=0;L<h.length;L++)gg(l,h[L],g,w,O);return null}return g=xg(g),l&&l[zn]?l.K(h,g,d(w)?!!w.capture:!1,O):ON(l,h,g,!1,w,O)}function ON(l,h,g,w,O,L){if(!h)throw Error("Invalid event type");var z=d(O)?!!O.capture:!!O,me=fd(l);if(me||(l[ud]=me=new cl(l)),g=me.add(h,g,w,z,L),g.proxy)return g;if(w=DN(),g.proxy=w,w.src=l,w.listener=g,l.addEventListener)Vn||(O=z),O===void 0&&(O=!1),l.addEventListener(h.toString(),w,O);else if(l.attachEvent)l.attachEvent(vg(h.toString()),w);else if(l.addListener&&l.removeListener)l.addListener(w);else throw Error("addEventListener and attachEvent are unavailable.");return g}function DN(){function l(g){return h.call(l.src,l.listener,g)}const h=LN;return l}function yg(l,h,g,w,O){if(Array.isArray(h))for(var L=0;L<h.length;L++)yg(l,h[L],g,w,O);else w=d(w)?!!w.capture:!!w,g=xg(g),l&&l[zn]?(l=l.i,h=String(h).toString(),h in l.g&&(L=l.g[h],g=cd(L,g,w,O),-1<g&&(ll(L[g]),Array.prototype.splice.call(L,g,1),L.length==0&&(delete l.g[h],l.h--)))):l&&(l=fd(l))&&(h=l.g[h.toString()],l=-1,h&&(l=cd(h,g,w,O)),(g=-1<l?h[l]:null)&&hd(g))}function hd(l){if(typeof l!="number"&&l&&!l.da){var h=l.src;if(h&&h[zn])ld(h.i,l);else{var g=l.type,w=l.proxy;h.removeEventListener?h.removeEventListener(g,w,l.capture):h.detachEvent?h.detachEvent(vg(g),w):h.addListener&&h.removeListener&&h.removeListener(w),(g=fd(h))?(ld(g,l),g.h==0&&(g.src=null,h[ud]=null)):ll(l)}}}function vg(l){return l in dd?dd[l]:dd[l]="on"+l}function LN(l,h){if(l.da)l=!0;else{h=new Un(h,this);var g=l.listener,w=l.ha||l.src;l.fa&&hd(l),l=g.call(w,h)}return l}function fd(l){return l=l[ud],l instanceof cl?l:null}var pd="__closure_events_fn_"+(1e9*Math.random()>>>0);function xg(l){return typeof l=="function"?l:(l[pd]||(l[pd]=function(h){return l.handleEvent(h)}),l[pd])}function ot(){pe.call(this),this.i=new cl(this),this.M=this,this.F=null}I(ot,pe),ot.prototype[zn]=!0,ot.prototype.removeEventListener=function(l,h,g,w){yg(this,l,h,g,w)};function bt(l,h){var g,w=l.F;if(w)for(g=[];w;w=w.F)g.push(w);if(l=l.M,w=h.type||h,typeof h=="string")h=new Re(h,l);else if(h instanceof Re)h.target=h.target||l;else{var O=h;h=new Re(w,l),S(h,O)}if(O=!0,g)for(var L=g.length-1;0<=L;L--){var z=h.g=g[L];O=ul(z,w,!0,h)&&O}if(z=h.g=l,O=ul(z,w,!0,h)&&O,O=ul(z,w,!1,h)&&O,g)for(L=0;L<g.length;L++)z=h.g=g[L],O=ul(z,w,!1,h)&&O}ot.prototype.N=function(){if(ot.aa.N.call(this),this.i){var l=this.i,h;for(h in l.g){for(var g=l.g[h],w=0;w<g.length;w++)ll(g[w]);delete l.g[h],l.h--}}this.F=null},ot.prototype.K=function(l,h,g,w){return this.i.add(String(l),h,!1,g,w)},ot.prototype.L=function(l,h,g,w){return this.i.add(String(l),h,!0,g,w)};function ul(l,h,g,w){if(h=l.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,L=0;L<h.length;++L){var z=h[L];if(z&&!z.da&&z.capture==g){var me=z.listener,Qe=z.ha||z.src;z.fa&&ld(l.i,z),O=me.call(Qe,w)!==!1&&O}}return O&&!w.defaultPrevented}function _g(l,h,g){if(typeof l=="function")g&&(l=m(l,g));else if(l&&typeof l.handleEvent=="function")l=m(l.handleEvent,l);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:c.setTimeout(l,h||0)}function wg(l){l.g=_g(()=>{l.g=null,l.i&&(l.i=!1,wg(l))},l.l);const h=l.h;l.h=null,l.m.apply(null,h)}class MN extends pe{constructor(h,g){super(),this.m=h,this.l=g,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:wg(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function uo(l){pe.call(this),this.h=l,this.g={}}I(uo,pe);var bg=[];function Eg(l){M(l.g,function(h,g){this.g.hasOwnProperty(g)&&hd(h)},l),l.g={}}uo.prototype.N=function(){uo.aa.N.call(this),Eg(this)},uo.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var md=c.JSON.stringify,VN=c.JSON.parse,UN=class{stringify(l){return c.JSON.stringify(l,void 0)}parse(l){return c.JSON.parse(l,void 0)}};function gd(){}gd.prototype.h=null;function Tg(l){return l.h||(l.h=l.i())}function Ng(){}var ho={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function yd(){Re.call(this,"d")}I(yd,Re);function vd(){Re.call(this,"c")}I(vd,Re);var rs={},Ig=null;function dl(){return Ig=Ig||new ot}rs.La="serverreachability";function Sg(l){Re.call(this,rs.La,l)}I(Sg,Re);function fo(l){const h=dl();bt(h,new Sg(h))}rs.STAT_EVENT="statevent";function Cg(l,h){Re.call(this,rs.STAT_EVENT,l),this.stat=h}I(Cg,Re);function Et(l){const h=dl();bt(h,new Cg(h,l))}rs.Ma="timingevent";function Ag(l,h){Re.call(this,rs.Ma,l),this.size=h}I(Ag,Re);function po(l,h){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){l()},h)}function mo(){this.g=!0}mo.prototype.xa=function(){this.g=!1};function FN(l,h,g,w,O,L){l.info(function(){if(l.g)if(L)for(var z="",me=L.split("&"),Qe=0;Qe<me.length;Qe++){var le=me[Qe].split("=");if(1<le.length){var at=le[0];le=le[1];var lt=at.split("_");z=2<=lt.length&&lt[1]=="type"?z+(at+"="+le+"&"):z+(at+"=redacted&")}}else z=null;else z=L;return"XMLHTTP REQ ("+w+") [attempt "+O+"]: "+h+`
`+g+`
`+z})}function zN(l,h,g,w,O,L,z){l.info(function(){return"XMLHTTP RESP ("+w+") [ attempt "+O+"]: "+h+`
`+g+`
`+L+" "+z})}function Ks(l,h,g,w){l.info(function(){return"XMLHTTP TEXT ("+h+"): "+BN(l,g)+(w?" "+w:"")})}function $N(l,h){l.info(function(){return"TIMEOUT: "+h})}mo.prototype.info=function(){};function BN(l,h){if(!l.g)return h;if(!h)return null;try{var g=JSON.parse(h);if(g){for(l=0;l<g.length;l++)if(Array.isArray(g[l])){var w=g[l];if(!(2>w.length)){var O=w[1];if(Array.isArray(O)&&!(1>O.length)){var L=O[0];if(L!="noop"&&L!="stop"&&L!="close")for(var z=1;z<O.length;z++)O[z]=""}}}}return md(g)}catch{return h}}var hl={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},kg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},xd;function fl(){}I(fl,gd),fl.prototype.g=function(){return new XMLHttpRequest},fl.prototype.i=function(){return{}},xd=new fl;function xr(l,h,g,w){this.j=l,this.i=h,this.l=g,this.R=w||1,this.U=new uo(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Pg}function Pg(){this.i=null,this.g="",this.h=!1}var jg={},_d={};function wd(l,h,g){l.L=1,l.v=yl($n(h)),l.m=g,l.P=!0,Rg(l,null)}function Rg(l,h){l.F=Date.now(),pl(l),l.A=$n(l.v);var g=l.A,w=l.R;Array.isArray(w)||(w=[String(w)]),Kg(g.i,"t",w),l.C=0,g=l.j.J,l.h=new Pg,l.g=dy(l.j,g?h:null,!l.m),0<l.O&&(l.M=new MN(m(l.Y,l,l.g),l.O)),h=l.U,g=l.g,w=l.ca;var O="readystatechange";Array.isArray(O)||(O&&(bg[0]=O.toString()),O=bg);for(var L=0;L<O.length;L++){var z=gg(g,O[L],w||h.handleEvent,!1,h.h||h);if(!z)break;h.g[z.key]=z}h=l.H?E(l.H):{},l.m?(l.u||(l.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.A,l.u,l.m,h)):(l.u="GET",l.g.ea(l.A,l.u,null,h)),fo(),FN(l.i,l.u,l.A,l.l,l.R,l.m)}xr.prototype.ca=function(l){l=l.target;const h=this.M;h&&Bn(l)==3?h.j():this.Y(l)},xr.prototype.Y=function(l){try{if(l==this.g)e:{const lt=Bn(this.g);var h=this.g.Ba();const Ys=this.g.Z();if(!(3>lt)&&(lt!=3||this.g&&(this.h.h||this.g.oa()||ey(this.g)))){this.J||lt!=4||h==7||(h==8||0>=Ys?fo(3):fo(2)),bd(this);var g=this.g.Z();this.X=g;t:if(Og(this)){var w=ey(this.g);l="";var O=w.length,L=Bn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ss(this),go(this);var z="";break t}this.h.i=new c.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,l+=this.h.i.decode(w[h],{stream:!(L&&h==O-1)});w.length=0,this.h.g+=l,this.C=0,z=this.h.g}else z=this.g.oa();if(this.o=g==200,zN(this.i,this.u,this.A,this.l,this.R,lt,g),this.o){if(this.T&&!this.K){t:{if(this.g){var me,Qe=this.g;if((me=Qe.g?Qe.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(me)){var le=me;break t}}le=null}if(g=le)Ks(this.i,this.l,g,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ed(this,g);else{this.o=!1,this.s=3,Et(12),ss(this),go(this);break e}}if(this.P){g=!0;let dn;for(;!this.J&&this.C<z.length;)if(dn=qN(this,z),dn==_d){lt==4&&(this.s=4,Et(14),g=!1),Ks(this.i,this.l,null,"[Incomplete Response]");break}else if(dn==jg){this.s=4,Et(15),Ks(this.i,this.l,z,"[Invalid Chunk]"),g=!1;break}else Ks(this.i,this.l,dn,null),Ed(this,dn);if(Og(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),lt!=4||z.length!=0||this.h.h||(this.s=1,Et(16),g=!1),this.o=this.o&&g,!g)Ks(this.i,this.l,z,"[Invalid Chunked Response]"),ss(this),go(this);else if(0<z.length&&!this.W){this.W=!0;var at=this.j;at.g==this&&at.ba&&!at.M&&(at.j.info("Great, no buffering proxy detected. Bytes received: "+z.length),Ad(at),at.M=!0,Et(11))}}else Ks(this.i,this.l,z,null),Ed(this,z);lt==4&&ss(this),this.o&&!this.J&&(lt==4?ay(this.j,this):(this.o=!1,pl(this)))}else a1(this.g),g==400&&0<z.indexOf("Unknown SID")?(this.s=3,Et(12)):(this.s=0,Et(13)),ss(this),go(this)}}}catch{}finally{}};function Og(l){return l.g?l.u=="GET"&&l.L!=2&&l.j.Ca:!1}function qN(l,h){var g=l.C,w=h.indexOf(`
`,g);return w==-1?_d:(g=Number(h.substring(g,w)),isNaN(g)?jg:(w+=1,w+g>h.length?_d:(h=h.slice(w,w+g),l.C=w+g,h)))}xr.prototype.cancel=function(){this.J=!0,ss(this)};function pl(l){l.S=Date.now()+l.I,Dg(l,l.I)}function Dg(l,h){if(l.B!=null)throw Error("WatchDog timer not null");l.B=po(m(l.ba,l),h)}function bd(l){l.B&&(c.clearTimeout(l.B),l.B=null)}xr.prototype.ba=function(){this.B=null;const l=Date.now();0<=l-this.S?($N(this.i,this.A),this.L!=2&&(fo(),Et(17)),ss(this),this.s=2,go(this)):Dg(this,this.S-l)};function go(l){l.j.G==0||l.J||ay(l.j,l)}function ss(l){bd(l);var h=l.M;h&&typeof h.ma=="function"&&h.ma(),l.M=null,Eg(l.U),l.g&&(h=l.g,l.g=null,h.abort(),h.ma())}function Ed(l,h){try{var g=l.j;if(g.G!=0&&(g.g==l||Td(g.h,l))){if(!l.K&&Td(g.h,l)&&g.G==3){try{var w=g.Da.g.parse(h)}catch{w=null}if(Array.isArray(w)&&w.length==3){var O=w;if(O[0]==0){e:if(!g.u){if(g.g)if(g.g.F+3e3<l.F)El(g),wl(g);else break e;Cd(g),Et(18)}}else g.za=O[1],0<g.za-g.T&&37500>O[2]&&g.F&&g.v==0&&!g.C&&(g.C=po(m(g.Za,g),6e3));if(1>=Vg(g.h)&&g.ca){try{g.ca()}catch{}g.ca=void 0}}else os(g,11)}else if((l.K||g.g==l)&&El(g),!x(h))for(O=g.Da.g.parse(h),h=0;h<O.length;h++){let le=O[h];if(g.T=le[0],le=le[1],g.G==2)if(le[0]=="c"){g.K=le[1],g.ia=le[2];const at=le[3];at!=null&&(g.la=at,g.j.info("VER="+g.la));const lt=le[4];lt!=null&&(g.Aa=lt,g.j.info("SVER="+g.Aa));const Ys=le[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(w=1.5*Ys,g.L=w,g.j.info("backChannelRequestTimeoutMs_="+w)),w=g;const dn=l.g;if(dn){const Nl=dn.g?dn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Nl){var L=w.h;L.g||Nl.indexOf("spdy")==-1&&Nl.indexOf("quic")==-1&&Nl.indexOf("h2")==-1||(L.j=L.l,L.g=new Set,L.h&&(Nd(L,L.h),L.h=null))}if(w.D){const kd=dn.g?dn.g.getResponseHeader("X-HTTP-Session-Id"):null;kd&&(w.ya=kd,we(w.I,w.D,kd))}}g.G=3,g.l&&g.l.ua(),g.ba&&(g.R=Date.now()-l.F,g.j.info("Handshake RTT: "+g.R+"ms")),w=g;var z=l;if(w.qa=uy(w,w.J?w.ia:null,w.W),z.K){Ug(w.h,z);var me=z,Qe=w.L;Qe&&(me.I=Qe),me.B&&(bd(me),pl(me)),w.g=z}else iy(w);0<g.i.length&&bl(g)}else le[0]!="stop"&&le[0]!="close"||os(g,7);else g.G==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?os(g,7):Sd(g):le[0]!="noop"&&g.l&&g.l.ta(le),g.v=0)}}fo(4)}catch{}}var HN=class{constructor(l,h){this.g=l,this.map=h}};function Lg(l){this.l=l||10,c.PerformanceNavigationTiming?(l=c.performance.getEntriesByType("navigation"),l=0<l.length&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Mg(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function Vg(l){return l.h?1:l.g?l.g.size:0}function Td(l,h){return l.h?l.h==h:l.g?l.g.has(h):!1}function Nd(l,h){l.g?l.g.add(h):l.h=h}function Ug(l,h){l.h&&l.h==h?l.h=null:l.g&&l.g.has(h)&&l.g.delete(h)}Lg.prototype.cancel=function(){if(this.i=Fg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function Fg(l){if(l.h!=null)return l.i.concat(l.h.D);if(l.g!=null&&l.g.size!==0){let h=l.i;for(const g of l.g.values())h=h.concat(g.D);return h}return b(l.i)}function WN(l){if(l.V&&typeof l.V=="function")return l.V();if(typeof Map<"u"&&l instanceof Map||typeof Set<"u"&&l instanceof Set)return Array.from(l.values());if(typeof l=="string")return l.split("");if(u(l)){for(var h=[],g=l.length,w=0;w<g;w++)h.push(l[w]);return h}h=[],g=0;for(w in l)h[g++]=l[w];return h}function KN(l){if(l.na&&typeof l.na=="function")return l.na();if(!l.V||typeof l.V!="function"){if(typeof Map<"u"&&l instanceof Map)return Array.from(l.keys());if(!(typeof Set<"u"&&l instanceof Set)){if(u(l)||typeof l=="string"){var h=[];l=l.length;for(var g=0;g<l;g++)h.push(g);return h}h=[],g=0;for(const w in l)h[g++]=w;return h}}}function zg(l,h){if(l.forEach&&typeof l.forEach=="function")l.forEach(h,void 0);else if(u(l)||typeof l=="string")Array.prototype.forEach.call(l,h,void 0);else for(var g=KN(l),w=WN(l),O=w.length,L=0;L<O;L++)h.call(void 0,w[L],g&&g[L],l)}var $g=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function GN(l,h){if(l){l=l.split("&");for(var g=0;g<l.length;g++){var w=l[g].indexOf("="),O=null;if(0<=w){var L=l[g].substring(0,w);O=l[g].substring(w+1)}else L=l[g];h(L,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function is(l){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,l instanceof is){this.h=l.h,ml(this,l.j),this.o=l.o,this.g=l.g,gl(this,l.s),this.l=l.l;var h=l.i,g=new xo;g.i=h.i,h.g&&(g.g=new Map(h.g),g.h=h.h),Bg(this,g),this.m=l.m}else l&&(h=String(l).match($g))?(this.h=!1,ml(this,h[1]||"",!0),this.o=yo(h[2]||""),this.g=yo(h[3]||"",!0),gl(this,h[4]),this.l=yo(h[5]||"",!0),Bg(this,h[6]||"",!0),this.m=yo(h[7]||"")):(this.h=!1,this.i=new xo(null,this.h))}is.prototype.toString=function(){var l=[],h=this.j;h&&l.push(vo(h,qg,!0),":");var g=this.g;return(g||h=="file")&&(l.push("//"),(h=this.o)&&l.push(vo(h,qg,!0),"@"),l.push(encodeURIComponent(String(g)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),g=this.s,g!=null&&l.push(":",String(g))),(g=this.l)&&(this.g&&g.charAt(0)!="/"&&l.push("/"),l.push(vo(g,g.charAt(0)=="/"?XN:YN,!0))),(g=this.i.toString())&&l.push("?",g),(g=this.m)&&l.push("#",vo(g,ZN)),l.join("")};function $n(l){return new is(l)}function ml(l,h,g){l.j=g?yo(h,!0):h,l.j&&(l.j=l.j.replace(/:$/,""))}function gl(l,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);l.s=h}else l.s=null}function Bg(l,h,g){h instanceof xo?(l.i=h,e1(l.i,l.h)):(g||(h=vo(h,JN)),l.i=new xo(h,l.h))}function we(l,h,g){l.i.set(h,g)}function yl(l){return we(l,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),l}function yo(l,h){return l?h?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function vo(l,h,g){return typeof l=="string"?(l=encodeURI(l).replace(h,QN),g&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function QN(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var qg=/[#\/\?@]/g,YN=/[#\?:]/g,XN=/[#\?]/g,JN=/[#\?@]/g,ZN=/#/g;function xo(l,h){this.h=this.g=null,this.i=l||null,this.j=!!h}function _r(l){l.g||(l.g=new Map,l.h=0,l.i&&GN(l.i,function(h,g){l.add(decodeURIComponent(h.replace(/\+/g," ")),g)}))}t=xo.prototype,t.add=function(l,h){_r(this),this.i=null,l=Gs(this,l);var g=this.g.get(l);return g||this.g.set(l,g=[]),g.push(h),this.h+=1,this};function Hg(l,h){_r(l),h=Gs(l,h),l.g.has(h)&&(l.i=null,l.h-=l.g.get(h).length,l.g.delete(h))}function Wg(l,h){return _r(l),h=Gs(l,h),l.g.has(h)}t.forEach=function(l,h){_r(this),this.g.forEach(function(g,w){g.forEach(function(O){l.call(h,O,w,this)},this)},this)},t.na=function(){_r(this);const l=Array.from(this.g.values()),h=Array.from(this.g.keys()),g=[];for(let w=0;w<h.length;w++){const O=l[w];for(let L=0;L<O.length;L++)g.push(h[w])}return g},t.V=function(l){_r(this);let h=[];if(typeof l=="string")Wg(this,l)&&(h=h.concat(this.g.get(Gs(this,l))));else{l=Array.from(this.g.values());for(let g=0;g<l.length;g++)h=h.concat(l[g])}return h},t.set=function(l,h){return _r(this),this.i=null,l=Gs(this,l),Wg(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[h]),this.h+=1,this},t.get=function(l,h){return l?(l=this.V(l),0<l.length?String(l[0]):h):h};function Kg(l,h,g){Hg(l,h),0<g.length&&(l.i=null,l.g.set(Gs(l,h),b(g)),l.h+=g.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],h=Array.from(this.g.keys());for(var g=0;g<h.length;g++){var w=h[g];const L=encodeURIComponent(String(w)),z=this.V(w);for(w=0;w<z.length;w++){var O=L;z[w]!==""&&(O+="="+encodeURIComponent(String(z[w]))),l.push(O)}}return this.i=l.join("&")};function Gs(l,h){return h=String(h),l.j&&(h=h.toLowerCase()),h}function e1(l,h){h&&!l.j&&(_r(l),l.i=null,l.g.forEach(function(g,w){var O=w.toLowerCase();w!=O&&(Hg(this,w),Kg(this,O,g))},l)),l.j=h}function t1(l,h){const g=new mo;if(c.Image){const w=new Image;w.onload=_(wr,g,"TestLoadImage: loaded",!0,h,w),w.onerror=_(wr,g,"TestLoadImage: error",!1,h,w),w.onabort=_(wr,g,"TestLoadImage: abort",!1,h,w),w.ontimeout=_(wr,g,"TestLoadImage: timeout",!1,h,w),c.setTimeout(function(){w.ontimeout&&w.ontimeout()},1e4),w.src=l}else h(!1)}function n1(l,h){const g=new mo,w=new AbortController,O=setTimeout(()=>{w.abort(),wr(g,"TestPingServer: timeout",!1,h)},1e4);fetch(l,{signal:w.signal}).then(L=>{clearTimeout(O),L.ok?wr(g,"TestPingServer: ok",!0,h):wr(g,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),wr(g,"TestPingServer: error",!1,h)})}function wr(l,h,g,w,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),w(g)}catch{}}function r1(){this.g=new UN}function s1(l,h,g){const w=g||"";try{zg(l,function(O,L){let z=O;d(O)&&(z=md(O)),h.push(w+L+"="+encodeURIComponent(z))})}catch(O){throw h.push(w+"type="+encodeURIComponent("_badmap")),O}}function vl(l){this.l=l.Ub||null,this.j=l.eb||!1}I(vl,gd),vl.prototype.g=function(){return new xl(this.l,this.j)},vl.prototype.i=function(l){return function(){return l}}({});function xl(l,h){ot.call(this),this.D=l,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}I(xl,ot),t=xl.prototype,t.open=function(l,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=l,this.A=h,this.readyState=1,wo(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};l&&(h.body=l),(this.D||c).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,_o(this)),this.readyState=0},t.Sa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,wo(this)),this.g&&(this.readyState=3,wo(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gg(this)}else l.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gg(l){l.j.read().then(l.Pa.bind(l)).catch(l.ga.bind(l))}t.Pa=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var h=l.value?l.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!l.done}))&&(this.response=this.responseText+=h)}l.done?_o(this):wo(this),this.readyState==3&&Gg(this)}},t.Ra=function(l){this.g&&(this.response=this.responseText=l,_o(this))},t.Qa=function(l){this.g&&(this.response=l,_o(this))},t.ga=function(){this.g&&_o(this)};function _o(l){l.readyState=4,l.l=null,l.j=null,l.v=null,wo(l)}t.setRequestHeader=function(l,h){this.u.append(l,h)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],h=this.h.entries();for(var g=h.next();!g.done;)g=g.value,l.push(g[0]+": "+g[1]),g=h.next();return l.join(`\r
`)};function wo(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(xl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Qg(l){let h="";return M(l,function(g,w){h+=w,h+=":",h+=g,h+=`\r
`}),h}function Id(l,h,g){e:{for(w in g){var w=!1;break e}w=!0}w||(g=Qg(g),typeof l=="string"?g!=null&&encodeURIComponent(String(g)):we(l,h,g))}function Pe(l){ot.call(this),this.headers=new Map,this.o=l||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}I(Pe,ot);var i1=/^https?$/i,o1=["POST","PUT"];t=Pe.prototype,t.Ha=function(l){this.J=l},t.ea=function(l,h,g,w){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);h=h?h.toUpperCase():"GET",this.D=l,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():xd.g(),this.v=this.o?Tg(this.o):Tg(xd),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(l),!0),this.B=!1}catch(L){Yg(this,L);return}if(l=g||"",g=new Map(this.headers),w)if(Object.getPrototypeOf(w)===Object.prototype)for(var O in w)g.set(O,w[O]);else if(typeof w.keys=="function"&&typeof w.get=="function")for(const L of w.keys())g.set(L,w.get(L));else throw Error("Unknown input type for opt_headers: "+String(w));w=Array.from(g.keys()).find(L=>L.toLowerCase()=="content-type"),O=c.FormData&&l instanceof c.FormData,!(0<=Array.prototype.indexOf.call(o1,h,void 0))||w||O||g.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[L,z]of g)this.g.setRequestHeader(L,z);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Zg(this),this.u=!0,this.g.send(l),this.u=!1}catch(L){Yg(this,L)}};function Yg(l,h){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=h,l.m=5,Xg(l),_l(l)}function Xg(l){l.A||(l.A=!0,bt(l,"complete"),bt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=l||7,bt(this,"complete"),bt(this,"abort"),_l(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),_l(this,!0)),Pe.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Jg(this):this.bb())},t.bb=function(){Jg(this)};function Jg(l){if(l.h&&typeof o<"u"&&(!l.v[1]||Bn(l)!=4||l.Z()!=2)){if(l.u&&Bn(l)==4)_g(l.Ea,0,l);else if(bt(l,"readystatechange"),Bn(l)==4){l.h=!1;try{const z=l.Z();e:switch(z){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var g;if(!(g=h)){var w;if(w=z===0){var O=String(l.D).match($g)[1]||null;!O&&c.self&&c.self.location&&(O=c.self.location.protocol.slice(0,-1)),w=!i1.test(O?O.toLowerCase():"")}g=w}if(g)bt(l,"complete"),bt(l,"success");else{l.m=6;try{var L=2<Bn(l)?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.Z()+"]",Xg(l)}}finally{_l(l)}}}}function _l(l,h){if(l.g){Zg(l);const g=l.g,w=l.v[0]?()=>{}:null;l.g=null,l.v=null,h||bt(l,"ready");try{g.onreadystatechange=w}catch{}}}function Zg(l){l.I&&(c.clearTimeout(l.I),l.I=null)}t.isActive=function(){return!!this.g};function Bn(l){return l.g?l.g.readyState:0}t.Z=function(){try{return 2<Bn(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(l){if(this.g){var h=this.g.responseText;return l&&h.indexOf(l)==0&&(h=h.substring(l.length)),VN(h)}};function ey(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.H){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function a1(l){const h={};l=(l.g&&2<=Bn(l)&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let w=0;w<l.length;w++){if(x(l[w]))continue;var g=A(l[w]);const O=g[0];if(g=g[1],typeof g!="string")continue;g=g.trim();const L=h[O]||[];h[O]=L,L.push(g)}C(h,function(w){return w.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(l,h,g){return g&&g.internalChannelParams&&g.internalChannelParams[l]||h}function ty(l){this.Aa=0,this.i=[],this.j=new mo,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=bo("failFast",!1,l),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=bo("baseRetryDelayMs",5e3,l),this.cb=bo("retryDelaySeedMs",1e4,l),this.Wa=bo("forwardChannelMaxRetries",2,l),this.wa=bo("forwardChannelRequestTimeoutMs",2e4,l),this.pa=l&&l.xmlHttpFactory||void 0,this.Xa=l&&l.Tb||void 0,this.Ca=l&&l.useFetchStreams||!1,this.L=void 0,this.J=l&&l.supportsCrossDomainXhr||!1,this.K="",this.h=new Lg(l&&l.concurrentRequestLimit),this.Da=new r1,this.P=l&&l.fastHandshake||!1,this.O=l&&l.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=l&&l.Rb||!1,l&&l.xa&&this.j.xa(),l&&l.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&l&&l.detectBufferingProxy||!1,this.ja=void 0,l&&l.longPollingTimeout&&0<l.longPollingTimeout&&(this.ja=l.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=ty.prototype,t.la=8,t.G=1,t.connect=function(l,h,g,w){Et(0),this.W=l,this.H=h||{},g&&w!==void 0&&(this.H.OSID=g,this.H.OAID=w),this.F=this.X,this.I=uy(this,null,this.W),bl(this)};function Sd(l){if(ny(l),l.G==3){var h=l.U++,g=$n(l.I);if(we(g,"SID",l.K),we(g,"RID",h),we(g,"TYPE","terminate"),Eo(l,g),h=new xr(l,l.j,h),h.L=2,h.v=yl($n(g)),g=!1,c.navigator&&c.navigator.sendBeacon)try{g=c.navigator.sendBeacon(h.v.toString(),"")}catch{}!g&&c.Image&&(new Image().src=h.v,g=!0),g||(h.g=dy(h.j,null),h.g.ea(h.v)),h.F=Date.now(),pl(h)}cy(l)}function wl(l){l.g&&(Ad(l),l.g.cancel(),l.g=null)}function ny(l){wl(l),l.u&&(c.clearTimeout(l.u),l.u=null),El(l),l.h.cancel(),l.s&&(typeof l.s=="number"&&c.clearTimeout(l.s),l.s=null)}function bl(l){if(!Mg(l.h)&&!l.s){l.s=!0;var h=l.Ga;xe||X(),$||(xe(),$=!0),G.add(h,l),l.B=0}}function l1(l,h){return Vg(l.h)>=l.h.j-(l.s?1:0)?!1:l.s?(l.i=h.D.concat(l.i),!0):l.G==1||l.G==2||l.B>=(l.Va?0:l.Wa)?!1:(l.s=po(m(l.Ga,l,h),ly(l,l.B)),l.B++,!0)}t.Ga=function(l){if(this.s)if(this.s=null,this.G==1){if(!l){this.U=Math.floor(1e5*Math.random()),l=this.U++;const O=new xr(this,this.j,l);let L=this.o;if(this.S&&(L?(L=E(L),S(L,this.S)):L=this.S),this.m!==null||this.O||(O.H=L,L=null),this.P)e:{for(var h=0,g=0;g<this.i.length;g++){t:{var w=this.i[g];if("__data__"in w.map&&(w=w.map.__data__,typeof w=="string")){w=w.length;break t}w=void 0}if(w===void 0)break;if(h+=w,4096<h){h=g;break e}if(h===4096||g===this.i.length-1){h=g+1;break e}}h=1e3}else h=1e3;h=sy(this,O,h),g=$n(this.I),we(g,"RID",l),we(g,"CVER",22),this.D&&we(g,"X-HTTP-Session-Id",this.D),Eo(this,g),L&&(this.O?h="headers="+encodeURIComponent(String(Qg(L)))+"&"+h:this.m&&Id(g,this.m,L)),Nd(this.h,O),this.Ua&&we(g,"TYPE","init"),this.P?(we(g,"$req",h),we(g,"SID","null"),O.T=!0,wd(O,g,null)):wd(O,g,h),this.G=2}}else this.G==3&&(l?ry(this,l):this.i.length==0||Mg(this.h)||ry(this))};function ry(l,h){var g;h?g=h.l:g=l.U++;const w=$n(l.I);we(w,"SID",l.K),we(w,"RID",g),we(w,"AID",l.T),Eo(l,w),l.m&&l.o&&Id(w,l.m,l.o),g=new xr(l,l.j,g,l.B+1),l.m===null&&(g.H=l.o),h&&(l.i=h.D.concat(l.i)),h=sy(l,g,1e3),g.I=Math.round(.5*l.wa)+Math.round(.5*l.wa*Math.random()),Nd(l.h,g),wd(g,w,h)}function Eo(l,h){l.H&&M(l.H,function(g,w){we(h,w,g)}),l.l&&zg({},function(g,w){we(h,w,g)})}function sy(l,h,g){g=Math.min(l.i.length,g);var w=l.l?m(l.l.Na,l.l,l):null;e:{var O=l.i;let L=-1;for(;;){const z=["count="+g];L==-1?0<g?(L=O[0].g,z.push("ofs="+L)):L=0:z.push("ofs="+L);let me=!0;for(let Qe=0;Qe<g;Qe++){let le=O[Qe].g;const at=O[Qe].map;if(le-=L,0>le)L=Math.max(0,O[Qe].g-100),me=!1;else try{s1(at,z,"req"+le+"_")}catch{w&&w(at)}}if(me){w=z.join("&");break e}}}return l=l.i.splice(0,g),h.D=l,w}function iy(l){if(!l.g&&!l.u){l.Y=1;var h=l.Fa;xe||X(),$||(xe(),$=!0),G.add(h,l),l.v=0}}function Cd(l){return l.g||l.u||3<=l.v?!1:(l.Y++,l.u=po(m(l.Fa,l),ly(l,l.v)),l.v++,!0)}t.Fa=function(){if(this.u=null,oy(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var l=2*this.R;this.j.info("BP detection timer enabled: "+l),this.A=po(m(this.ab,this),l)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Et(10),wl(this),oy(this))};function Ad(l){l.A!=null&&(c.clearTimeout(l.A),l.A=null)}function oy(l){l.g=new xr(l,l.j,"rpc",l.Y),l.m===null&&(l.g.H=l.o),l.g.O=0;var h=$n(l.qa);we(h,"RID","rpc"),we(h,"SID",l.K),we(h,"AID",l.T),we(h,"CI",l.F?"0":"1"),!l.F&&l.ja&&we(h,"TO",l.ja),we(h,"TYPE","xmlhttp"),Eo(l,h),l.m&&l.o&&Id(h,l.m,l.o),l.L&&(l.g.I=l.L);var g=l.g;l=l.ia,g.L=1,g.v=yl($n(h)),g.m=null,g.P=!0,Rg(g,l)}t.Za=function(){this.C!=null&&(this.C=null,wl(this),Cd(this),Et(19))};function El(l){l.C!=null&&(c.clearTimeout(l.C),l.C=null)}function ay(l,h){var g=null;if(l.g==h){El(l),Ad(l),l.g=null;var w=2}else if(Td(l.h,h))g=h.D,Ug(l.h,h),w=1;else return;if(l.G!=0){if(h.o)if(w==1){g=h.m?h.m.length:0,h=Date.now()-h.F;var O=l.B;w=dl(),bt(w,new Ag(w,g)),bl(l)}else iy(l);else if(O=h.s,O==3||O==0&&0<h.X||!(w==1&&l1(l,h)||w==2&&Cd(l)))switch(g&&0<g.length&&(h=l.h,h.i=h.i.concat(g)),O){case 1:os(l,5);break;case 4:os(l,10);break;case 3:os(l,6);break;default:os(l,2)}}}function ly(l,h){let g=l.Ta+Math.floor(Math.random()*l.cb);return l.isActive()||(g*=2),g*h}function os(l,h){if(l.j.info("Error code "+h),h==2){var g=m(l.fb,l),w=l.Xa;const O=!w;w=new is(w||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||ml(w,"https"),yl(w),O?t1(w.toString(),g):n1(w.toString(),g)}else Et(2);l.G=0,l.l&&l.l.sa(h),cy(l),ny(l)}t.fb=function(l){l?(this.j.info("Successfully pinged google.com"),Et(2)):(this.j.info("Failed to ping google.com"),Et(1))};function cy(l){if(l.G=0,l.ka=[],l.l){const h=Fg(l.h);(h.length!=0||l.i.length!=0)&&(N(l.ka,h),N(l.ka,l.i),l.h.i.length=0,b(l.i),l.i.length=0),l.l.ra()}}function uy(l,h,g){var w=g instanceof is?$n(g):new is(g);if(w.g!="")h&&(w.g=h+"."+w.g),gl(w,w.s);else{var O=c.location;w=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var L=new is(null);w&&ml(L,w),h&&(L.g=h),O&&gl(L,O),g&&(L.l=g),w=L}return g=l.D,h=l.ya,g&&h&&we(w,g,h),we(w,"VER",l.la),Eo(l,w),w}function dy(l,h,g){if(h&&!l.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=l.Ca&&!l.pa?new Pe(new vl({eb:g})):new Pe(l.pa),h.Ha(l.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function hy(){}t=hy.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function Tl(){}Tl.prototype.g=function(l,h){return new Ht(l,h)};function Ht(l,h){ot.call(this),this.g=new ty(h),this.l=l,this.h=h&&h.messageUrlParams||null,l=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(l?l["X-WebChannel-Content-Type"]=h.messageContentType:l={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(l?l["X-WebChannel-Client-Profile"]=h.va:l={"X-WebChannel-Client-Profile":h.va}),this.g.S=l,(l=h&&h.Sb)&&!x(l)&&(this.g.m=l),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,l=this.h,l!==null&&h in l&&(l=this.h,h in l&&delete l[h])),this.j=new Qs(this)}I(Ht,ot),Ht.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Ht.prototype.close=function(){Sd(this.g)},Ht.prototype.o=function(l){var h=this.g;if(typeof l=="string"){var g={};g.__data__=l,l=g}else this.u&&(g={},g.__data__=md(l),l=g);h.i.push(new HN(h.Ya++,l)),h.G==3&&bl(h)},Ht.prototype.N=function(){this.g.l=null,delete this.j,Sd(this.g),delete this.g,Ht.aa.N.call(this)};function fy(l){yd.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var h=l.__sm__;if(h){e:{for(const g in h){l=g;break e}l=void 0}(this.i=l)&&(l=this.i,h=h!==null&&l in h?h[l]:void 0),this.data=h}else this.data=l}I(fy,yd);function py(){vd.call(this),this.status=1}I(py,vd);function Qs(l){this.g=l}I(Qs,hy),Qs.prototype.ua=function(){bt(this.g,"a")},Qs.prototype.ta=function(l){bt(this.g,new fy(l))},Qs.prototype.sa=function(l){bt(this.g,new py)},Qs.prototype.ra=function(){bt(this.g,"b")},Tl.prototype.createWebChannel=Tl.prototype.g,Ht.prototype.send=Ht.prototype.o,Ht.prototype.open=Ht.prototype.m,Ht.prototype.close=Ht.prototype.close,$b=function(){return new Tl},zb=function(){return dl()},Fb=rs,Rf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},hl.NO_ERROR=0,hl.TIMEOUT=8,hl.HTTP_ERROR=6,dc=hl,kg.COMPLETE="complete",Ub=kg,Ng.EventType=ho,ho.OPEN="a",ho.CLOSE="b",ho.ERROR="c",ho.MESSAGE="d",ot.prototype.listen=ot.prototype.K,zo=Ng,Pe.prototype.listenOnce=Pe.prototype.L,Pe.prototype.getLastError=Pe.prototype.Ka,Pe.prototype.getLastErrorCode=Pe.prototype.Ba,Pe.prototype.getStatus=Pe.prototype.Z,Pe.prototype.getResponseJson=Pe.prototype.Oa,Pe.prototype.getResponseText=Pe.prototype.oa,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Ha,Vb=Pe}).apply(typeof ql<"u"?ql:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pt.UNAUTHENTICATED=new pt(null),pt.GOOGLE_CREDENTIALS=new pt("google-credentials-uid"),pt.FIRST_PARTY=new pt("first-party-uid"),pt.MOCK_USER=new pt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oo="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const As=new tm("@firebase/firestore");function jo(){return As.logLevel}function H(t,...e){if(As.logLevel<=ie.DEBUG){const n=e.map(pm);As.debug(`Firestore (${oo}): ${t}`,...n)}}function hr(t,...e){if(As.logLevel<=ie.ERROR){const n=e.map(pm);As.error(`Firestore (${oo}): ${t}`,...n)}}function Fi(t,...e){if(As.logLevel<=ie.WARN){const n=e.map(pm);As.warn(`Firestore (${oo}): ${t}`,...n)}}function pm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function J(t="Unexpected state"){const e=`FIRESTORE (${oo}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function he(t,e){t||J()}function te(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends Nn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bb{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class LP{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(pt.UNAUTHENTICATED))}shutdown(){}}class MP{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class VP{constructor(e){this.t=e,this.currentUser=pt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){he(this.o===void 0);let r=this.i;const s=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let i=new rr;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new rr,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const u=i;e.enqueueRetryable(async()=>{await u.promise,await s(this.currentUser)})},c=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?c(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new rr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(he(typeof r.accessToken=="string"),new Bb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return he(e===null||typeof e=="string"),new pt(e)}}class UP{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=pt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class FP{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new UP(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(pt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class zP{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class $P{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){he(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(he(typeof n.token=="string"),this.R=n.token,new zP(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BP(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qb{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=BP(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function ce(t,e){return t<e?-1:t>e?1:0}function zi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class He{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(V.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(V.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return He.fromMillis(Date.now())}static fromDate(e){return He.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new He(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new He(0,0))}static max(){return new ee(new He(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ca{constructor(e,n,r){n===void 0?n=0:n>e.length&&J(),r===void 0?r=e.length-n:r>e.length-n&&J(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ca.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ca?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class ye extends Ca{construct(e,n,r){return new ye(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(V.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new ye(n)}static emptyPath(){return new ye([])}}const qP=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class et extends Ca{construct(e,n,r){return new et(e,n,r)}static isValidIdentifier(e){return qP.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),et.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new et(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const c=e[s];if(c==="\\"){if(s+1===e.length)throw new B(V.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[s+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new B(V.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,s+=2}else c==="`"?(o=!o,s++):c!=="."||o?(r+=c,s++):(i(),s++)}if(i(),o)throw new B(V.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new et(n)}static emptyPath(){return new et([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(ye.fromString(e))}static fromName(e){return new W(ye.fromString(e).popFirst(5))}static empty(){return new W(ye.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ye.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ye.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new ye(e.slice()))}}function HP(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=ee.fromTimestamp(r===1e9?new He(n+1,0):new He(n,r));return new Qr(s,W.empty(),e)}function WP(t){return new Qr(t.readTime,t.key,-1)}class Qr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Qr(ee.min(),W.empty(),-1)}static max(){return new Qr(ee.max(),W.empty(),-1)}}function KP(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GP="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class QP{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ya(t){if(t.code!==V.FAILED_PRECONDITION||t.message!==GP)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&J(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(c=>{++s,c.next(()=>{++i,o&&i===s&&n()},u=>r(u))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let c=0;for(let u=0;u<i;u++){const d=u;n(e[d]).next(f=>{o[d]=f,++c,c===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function YP(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Xa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}mm.oe=-1;function Du(t){return t==null}function Zc(t){return t===0&&1/t==-1/0}function XP(t){return typeof t=="number"&&Number.isInteger(t)&&!Zc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Bs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Hb(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e,n){this.comparator=e,this.root=n||Ze.EMPTY}insert(e,n){return new Ae(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ze.BLACK,null,null))}remove(e){return new Ae(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ze.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hl(this.root,e,this.comparator,!0)}}class Hl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ze{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ze.RED,this.left=s??Ze.EMPTY,this.right=i??Ze.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ze(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ze.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ze.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ze.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ze.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw J();const e=this.left.check();if(e!==this.right.check())throw J();return e+(this.isRed()?0:1)}}Ze.EMPTY=null,Ze.RED=!0,Ze.BLACK=!1;Ze.EMPTY=new class{constructor(){this.size=0}get key(){throw J()}get value(){throw J()}get color(){throw J()}get left(){throw J()}get right(){throw J()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ze(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(e){this.comparator=e,this.data=new Ae(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new u0(this.data.getIterator())}getIteratorFrom(e){return new u0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof rt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new rt(this.comparator);return n.data=e,n}}class u0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(e){this.fields=e,e.sort(et.comparator)}static empty(){return new Qt([])}unionWith(e){let n=new rt(et.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Qt(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return zi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wb extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Wb("Invalid base64 string: "+i):i}}(e);return new it(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new it(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}it.EMPTY_BYTE_STRING=new it("");const JP=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t){if(he(!!t),typeof t=="string"){let e=0;const n=JP.exec(t);if(he(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Le(t.seconds),nanos:Le(t.nanos)}}function Le(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ks(t){return typeof t=="string"?it.fromBase64String(t):it.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function gm(t){const e=t.mapValue.fields.__previous_value__;return Lu(e)?gm(e):e}function Aa(t){const e=Yr(t.mapValue.fields.__local_write_time__.timestampValue);return new He(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZP{constructor(e,n,r,s,i,o,c,u,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=d}}class ka{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ka("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ka&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wl={mapValue:{}};function Ps(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lu(t)?4:tj(t)?9007199254740991:ej(t)?10:11:J()}function On(t,e){if(t===e)return!0;const n=Ps(t);if(n!==Ps(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Aa(t).isEqual(Aa(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Yr(s.timestampValue),c=Yr(i.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return ks(s.bytesValue).isEqual(ks(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Le(s.geoPointValue.latitude)===Le(i.geoPointValue.latitude)&&Le(s.geoPointValue.longitude)===Le(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Le(s.integerValue)===Le(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Le(s.doubleValue),c=Le(i.doubleValue);return o===c?Zc(o)===Zc(c):isNaN(o)&&isNaN(c)}return!1}(t,e);case 9:return zi(t.arrayValue.values||[],e.arrayValue.values||[],On);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},c=i.mapValue.fields||{};if(c0(o)!==c0(c))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(c[u]===void 0||!On(o[u],c[u])))return!1;return!0}(t,e);default:return J()}}function Pa(t,e){return(t.values||[]).find(n=>On(n,e))!==void 0}function $i(t,e){if(t===e)return 0;const n=Ps(t),r=Ps(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return function(i,o){const c=Le(i.integerValue||i.doubleValue),u=Le(o.integerValue||o.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1}(t,e);case 3:return d0(t.timestampValue,e.timestampValue);case 4:return d0(Aa(t),Aa(e));case 5:return ce(t.stringValue,e.stringValue);case 6:return function(i,o){const c=ks(i),u=ks(o);return c.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const c=i.split("/"),u=o.split("/");for(let d=0;d<c.length&&d<u.length;d++){const f=ce(c[d],u[d]);if(f!==0)return f}return ce(c.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const c=ce(Le(i.latitude),Le(o.latitude));return c!==0?c:ce(Le(i.longitude),Le(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return h0(t.arrayValue,e.arrayValue);case 10:return function(i,o){var c,u,d,f;const p=i.fields||{},m=o.fields||{},_=(c=p.value)===null||c===void 0?void 0:c.arrayValue,I=(u=m.value)===null||u===void 0?void 0:u.arrayValue,b=ce(((d=_==null?void 0:_.values)===null||d===void 0?void 0:d.length)||0,((f=I==null?void 0:I.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:h0(_,I)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Wl.mapValue&&o===Wl.mapValue)return 0;if(i===Wl.mapValue)return 1;if(o===Wl.mapValue)return-1;const c=i.fields||{},u=Object.keys(c),d=o.fields||{},f=Object.keys(d);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){const m=ce(u[p],f[p]);if(m!==0)return m;const _=$i(c[u[p]],d[f[p]]);if(_!==0)return _}return ce(u.length,f.length)}(t.mapValue,e.mapValue);default:throw J()}}function d0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);const n=Yr(t),r=Yr(e),s=ce(n.seconds,r.seconds);return s!==0?s:ce(n.nanos,r.nanos)}function h0(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=$i(n[s],r[s]);if(i)return i}return ce(n.length,r.length)}function Bi(t){return Of(t)}function Of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Yr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ks(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=Of(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${Of(n.fields[o])}`;return s+"}"}(t.mapValue):J()}function eu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Df(t){return!!t&&"integerValue"in t}function ym(t){return!!t&&"arrayValue"in t}function f0(t){return!!t&&"nullValue"in t}function p0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function hc(t){return!!t&&"mapValue"in t}function ej(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function na(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=na(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=na(t.arrayValue.values[n]);return e}return Object.assign({},t)}function tj(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ot{constructor(e){this.value=e}static empty(){return new Ot({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!hc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=na(n)}setAll(e){let n=et.emptyPath(),r={},s=[];e.forEach((o,c)=>{if(!n.isImmediateParentOf(c)){const u=this.getFieldsMap(n);this.applyChanges(u,r,s),r={},s=[],n=c.popLast()}o?r[c.lastSegment()]=na(o):s.push(c.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());hc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return On(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];hc(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Bs(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ot(na(this.value))}}function Kb(t){const e=[];return Bs(t.fields,(n,r)=>{const s=new et([n]);if(hc(r)){const i=Kb(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Qt(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gt{constructor(e,n,r,s,i,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=c}static newInvalidDocument(e){return new gt(e,0,ee.min(),ee.min(),ee.min(),Ot.empty(),0)}static newFoundDocument(e,n,r,s){return new gt(e,1,n,ee.min(),r,s,0)}static newNoDocument(e,n){return new gt(e,2,n,ee.min(),ee.min(),Ot.empty(),0)}static newUnknownDocument(e,n){return new gt(e,3,n,ee.min(),ee.min(),Ot.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ot.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ot.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e,n){this.position=e,this.inclusive=n}}function m0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=$i(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function g0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!On(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,n="asc"){this.field=e,this.dir=n}}function nj(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gb{}class ze extends Gb{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new sj(e,n,r):n==="array-contains"?new aj(e,r):n==="in"?new lj(e,r):n==="not-in"?new cj(e,r):n==="array-contains-any"?new uj(e,r):new ze(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new ij(e,r):new oj(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison($i(n,this.value)):n!==null&&Ps(this.value)===Ps(n)&&this.matchesComparison($i(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return J()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class En extends Gb{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new En(e,n)}matches(e){return Qb(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Qb(t){return t.op==="and"}function Yb(t){return rj(t)&&Qb(t)}function rj(t){for(const e of t.filters)if(e instanceof En)return!1;return!0}function Lf(t){if(t instanceof ze)return t.field.canonicalString()+t.op.toString()+Bi(t.value);if(Yb(t))return t.filters.map(e=>Lf(e)).join(",");{const e=t.filters.map(n=>Lf(n)).join(",");return`${t.op}(${e})`}}function Xb(t,e){return t instanceof ze?function(r,s){return s instanceof ze&&r.op===s.op&&r.field.isEqual(s.field)&&On(r.value,s.value)}(t,e):t instanceof En?function(r,s){return s instanceof En&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,c)=>i&&Xb(o,s.filters[c]),!0):!1}(t,e):void J()}function Jb(t){return t instanceof ze?function(n){return`${n.field.canonicalString()} ${n.op} ${Bi(n.value)}`}(t):t instanceof En?function(n){return n.op.toString()+" {"+n.getFilters().map(Jb).join(" ,")+"}"}(t):"Filter"}class sj extends ze{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class ij extends ze{constructor(e,n){super(e,"in",n),this.keys=Zb("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class oj extends ze{constructor(e,n){super(e,"not-in",n),this.keys=Zb("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Zb(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class aj extends ze{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return ym(n)&&Pa(n.arrayValue,this.value)}}class lj extends ze{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Pa(this.value.arrayValue,n)}}class cj extends ze{constructor(e,n){super(e,"not-in",n)}matches(e){if(Pa(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!Pa(this.value.arrayValue,n)}}class uj extends ze{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!ym(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Pa(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dj{constructor(e,n=null,r=[],s=[],i=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=c,this.ue=null}}function y0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new dj(t,e,n,r,s,i,o)}function vm(t){const e=te(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Lf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Du(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Bi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Bi(r)).join(",")),e.ue=n}return e.ue}function xm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!nj(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xb(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!g0(t.startAt,e.startAt)&&g0(t.endAt,e.endAt)}function Mf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n=null,r=[],s=[],i=null,o="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=c,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function hj(t,e,n,r,s,i,o,c){return new qs(t,e,n,r,s,i,o,c)}function _m(t){return new qs(t)}function v0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function wm(t){return t.collectionGroup!==null}function Si(t){const e=te(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new rt(et.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(d=>{d.isInequality()&&(c=c.add(d.field))})}),c})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new ja(i,r))}),n.has(et.keyField().canonicalString())||e.ce.push(new ja(et.keyField(),r))}return e.ce}function jn(t){const e=te(t);return e.le||(e.le=fj(e,Si(t))),e.le}function fj(t,e){if(t.limitType==="F")return y0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new ja(s.field,i)});const n=t.endAt?new qi(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new qi(t.startAt.position,t.startAt.inclusive):null;return y0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Vf(t,e){const n=t.filters.concat([e]);return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function tu(t,e,n){return new qs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Mu(t,e){return xm(jn(t),jn(e))&&t.limitType===e.limitType}function eE(t){return`${vm(jn(t))}|lt:${t.limitType}`}function ti(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Jb(s)).join(", ")}]`),Du(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Bi(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Bi(s)).join(",")),`Target(${r})`}(jn(t))}; limitType=${t.limitType})`}function Vu(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of Si(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,c,u){const d=m0(o,c,u);return o.inclusive?d<=0:d<0}(r.startAt,Si(r),s)||r.endAt&&!function(o,c,u){const d=m0(o,c,u);return o.inclusive?d>=0:d>0}(r.endAt,Si(r),s))}(t,e)}function pj(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function tE(t){return(e,n)=>{let r=!1;for(const s of Si(t)){const i=mj(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function mj(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,c){const u=o.data.field(i),d=c.data.field(i);return u!==null&&d!==null?$i(u,d):J()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return J()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bs(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return Hb(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=new Ae(W.comparator);function fr(){return gj}const nE=new Ae(W.comparator);function $o(...t){let e=nE;for(const n of t)e=e.insert(n.key,n);return e}function rE(t){let e=nE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function gs(){return ra()}function sE(){return ra()}function ra(){return new ao(t=>t.toString(),(t,e)=>t.isEqual(e))}const yj=new Ae(W.comparator),vj=new rt(W.comparator);function se(...t){let e=vj;for(const n of t)e=e.add(n);return e}const xj=new rt(ce);function _j(){return xj}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Zc(e)?"-0":e}}function iE(t){return{integerValue:""+t}}function wj(t,e){return XP(e)?iE(e):bm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uu{constructor(){this._=void 0}}function bj(t,e,n){return t instanceof Ra?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lu(i)&&(i=gm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Hi?aE(t,e):t instanceof Oa?lE(t,e):function(s,i){const o=oE(s,i),c=x0(o)+x0(s.Pe);return Df(o)&&Df(s.Pe)?iE(c):bm(s.serializer,c)}(t,e)}function Ej(t,e,n){return t instanceof Hi?aE(t,e):t instanceof Oa?lE(t,e):n}function oE(t,e){return t instanceof nu?function(r){return Df(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class Ra extends Uu{}class Hi extends Uu{constructor(e){super(),this.elements=e}}function aE(t,e){const n=cE(e);for(const r of t.elements)n.some(s=>On(s,r))||n.push(r);return{arrayValue:{values:n}}}class Oa extends Uu{constructor(e){super(),this.elements=e}}function lE(t,e){let n=cE(e);for(const r of t.elements)n=n.filter(s=>!On(s,r));return{arrayValue:{values:n}}}class nu extends Uu{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function x0(t){return Le(t.integerValue||t.doubleValue)}function cE(t){return ym(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.field=e,this.transform=n}}function Tj(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Hi&&s instanceof Hi||r instanceof Oa&&s instanceof Oa?zi(r.elements,s.elements,On):r instanceof nu&&s instanceof nu?On(r.Pe,s.Pe):r instanceof Ra&&s instanceof Ra}(t.transform,e.transform)}class Nj{constructor(e,n){this.version=e,this.transformResults=n}}class on{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new on}static exists(e){return new on(void 0,e)}static updateTime(e){return new on(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function fc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Fu{}function dE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Em(t.key,on.none()):new Ja(t.key,t.data,on.none());{const n=t.data,r=Ot.empty();let s=new rt(et.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new ns(t.key,r,new Qt(s.toArray()),on.none())}}function Ij(t,e,n){t instanceof Ja?function(s,i,o){const c=s.value.clone(),u=w0(s.fieldTransforms,i,o.transformResults);c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):t instanceof ns?function(s,i,o){if(!fc(s.precondition,i))return void i.convertToUnknownDocument(o.version);const c=w0(s.fieldTransforms,i,o.transformResults),u=i.data;u.setAll(hE(s)),u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function sa(t,e,n,r){return t instanceof Ja?function(i,o,c,u){if(!fc(i.precondition,o))return c;const d=i.value.clone(),f=b0(i.fieldTransforms,u,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof ns?function(i,o,c,u){if(!fc(i.precondition,o))return c;const d=b0(i.fieldTransforms,u,o),f=o.data;return f.setAll(hE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),c===null?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(t,e,n,r):function(i,o,c){return fc(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c}(t,e,n)}function Sj(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=oE(r.transform,s||null);i!=null&&(n===null&&(n=Ot.empty()),n.set(r.field,i))}return n||null}function _0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&zi(r,s,(i,o)=>Tj(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ja extends Fu{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class ns extends Fu{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function hE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function w0(t,e,n){const r=new Map;he(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,c=e.data.field(i.field);r.set(i.field,Ej(o,c,n[s]))}return r}function b0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,bj(i,o,e))}return r}class Em extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cj extends Fu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aj{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&Ij(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=sa(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=sE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let c=this.applyToLocalView(o,i.mutatedFields);c=n.has(s.key)?null:c;const u=dE(o,c);u!==null&&r.set(s.key,u),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),se())}isEqual(e){return this.batchId===e.batchId&&zi(this.mutations,e.mutations,(n,r)=>_0(n,r))&&zi(this.baseMutations,e.baseMutations,(n,r)=>_0(n,r))}}class Tm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){he(e.mutations.length===r.length);let s=function(){return yj}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new Tm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kj{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pj{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ue,oe;function jj(t){switch(t){default:return J();case V.CANCELLED:case V.UNKNOWN:case V.DEADLINE_EXCEEDED:case V.RESOURCE_EXHAUSTED:case V.INTERNAL:case V.UNAVAILABLE:case V.UNAUTHENTICATED:return!1;case V.INVALID_ARGUMENT:case V.NOT_FOUND:case V.ALREADY_EXISTS:case V.PERMISSION_DENIED:case V.FAILED_PRECONDITION:case V.ABORTED:case V.OUT_OF_RANGE:case V.UNIMPLEMENTED:case V.DATA_LOSS:return!0}}function fE(t){if(t===void 0)return hr("GRPC error has no .code"),V.UNKNOWN;switch(t){case Ue.OK:return V.OK;case Ue.CANCELLED:return V.CANCELLED;case Ue.UNKNOWN:return V.UNKNOWN;case Ue.DEADLINE_EXCEEDED:return V.DEADLINE_EXCEEDED;case Ue.RESOURCE_EXHAUSTED:return V.RESOURCE_EXHAUSTED;case Ue.INTERNAL:return V.INTERNAL;case Ue.UNAVAILABLE:return V.UNAVAILABLE;case Ue.UNAUTHENTICATED:return V.UNAUTHENTICATED;case Ue.INVALID_ARGUMENT:return V.INVALID_ARGUMENT;case Ue.NOT_FOUND:return V.NOT_FOUND;case Ue.ALREADY_EXISTS:return V.ALREADY_EXISTS;case Ue.PERMISSION_DENIED:return V.PERMISSION_DENIED;case Ue.FAILED_PRECONDITION:return V.FAILED_PRECONDITION;case Ue.ABORTED:return V.ABORTED;case Ue.OUT_OF_RANGE:return V.OUT_OF_RANGE;case Ue.UNIMPLEMENTED:return V.UNIMPLEMENTED;case Ue.DATA_LOSS:return V.DATA_LOSS;default:return J()}}(oe=Ue||(Ue={}))[oe.OK=0]="OK",oe[oe.CANCELLED=1]="CANCELLED",oe[oe.UNKNOWN=2]="UNKNOWN",oe[oe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",oe[oe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",oe[oe.NOT_FOUND=5]="NOT_FOUND",oe[oe.ALREADY_EXISTS=6]="ALREADY_EXISTS",oe[oe.PERMISSION_DENIED=7]="PERMISSION_DENIED",oe[oe.UNAUTHENTICATED=16]="UNAUTHENTICATED",oe[oe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",oe[oe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",oe[oe.ABORTED=10]="ABORTED",oe[oe.OUT_OF_RANGE=11]="OUT_OF_RANGE",oe[oe.UNIMPLEMENTED=12]="UNIMPLEMENTED",oe[oe.INTERNAL=13]="INTERNAL",oe[oe.UNAVAILABLE=14]="UNAVAILABLE",oe[oe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rj(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oj=new _s([4294967295,4294967295],0);function E0(t){const e=Rj().encode(t),n=new Mb;return n.update(e),new Uint8Array(n.digest())}function T0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new _s([n,r],0),new _s([s,i],0)]}class Nm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Bo(`Invalid padding: ${n}`);if(r<0)throw new Bo(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Bo(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Bo(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=_s.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(_s.fromNumber(r)));return s.compare(Oj)===1&&(s=new _s([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=E0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Nm(i,s,n);return r.forEach(c=>o.insert(c)),o}insert(e){if(this.Ie===0)return;const n=E0(e),[r,s]=T0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Bo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zu{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,Za.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new zu(ee.min(),s,new Ae(ce),fr(),se())}}class Za{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Za(r,n,se(),se(),se())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pc{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class pE{constructor(e,n){this.targetId=e,this.me=n}}class mE{constructor(e,n,r=it.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class N0{constructor(){this.fe=0,this.ge=S0(),this.pe=it.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=se(),n=se(),r=se();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:J()}}),new Za(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=S0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,he(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Dj{constructor(e){this.Le=e,this.Be=new Map,this.ke=fr(),this.qe=I0(),this.Qe=new Ae(ce)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:J()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Mf(i))if(r===0){const o=new W(i.path);this.Ue(n,o,gt.newNoDocument(o,ee.min()))}else he(r===1);else{const o=this.Ye(n);if(o!==r){const c=this.Ze(e),u=c?this.Xe(c,e,o):1;if(u!==0){this.je(n);const d=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,c;try{o=ks(r).toUint8Array()}catch(u){if(u instanceof Wb)return Fi("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Nm(o,s,i)}catch(u){return Fi(u instanceof Bo?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.Ie===0?null:c}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),c=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(c)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const c=this.Je(o);if(c){if(i.current&&Mf(c.target)){const u=new W(c.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,gt.newNoDocument(u,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=se();this.qe.forEach((i,o)=>{let c=!0;o.forEachWhile(u=>{const d=this.Je(u);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new zu(e,n,this.Qe,this.ke,r);return this.ke=fr(),this.qe=I0(),this.Qe=new Ae(ce),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new N0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new rt(ce),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new N0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function I0(){return new Ae(W.comparator)}function S0(){return new Ae(W.comparator)}const Lj={asc:"ASCENDING",desc:"DESCENDING"},Mj={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Vj={and:"AND",or:"OR"};class Uj{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Uf(t,e){return t.useProto3Json||Du(e)?e:{value:e}}function ru(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function gE(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function Fj(t,e){return ru(t,e.toTimestamp())}function Rn(t){return he(!!t),ee.fromTimestamp(function(n){const r=Yr(n);return new He(r.seconds,r.nanos)}(t))}function Im(t,e){return Ff(t,e).canonicalString()}function Ff(t,e){const n=function(s){return new ye(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function yE(t){const e=ye.fromString(t);return he(bE(e)),e}function zf(t,e){return Im(t.databaseId,e.path)}function fh(t,e){const n=yE(e);if(n.get(1)!==t.databaseId.projectId)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(V.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(xE(n))}function vE(t,e){return Im(t.databaseId,e)}function zj(t){const e=yE(t);return e.length===4?ye.emptyPath():xE(e)}function $f(t){return new ye(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function xE(t){return he(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function C0(t,e,n){return{name:zf(t,e),fields:n.value.mapValue.fields}}function $j(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:J()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(he(f===void 0||typeof f=="string"),it.fromBase64String(f||"")):(he(f===void 0||f instanceof Buffer||f instanceof Uint8Array),it.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&function(d){const f=d.code===void 0?V.UNKNOWN:fE(d.code);return new B(f,d.message||"")}(o);n=new mE(r,s,i,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=fh(t,r.document.name),i=Rn(r.document.updateTime),o=r.document.createTime?Rn(r.document.createTime):ee.min(),c=new Ot({mapValue:{fields:r.document.fields}}),u=gt.newFoundDocument(s,i,o,c),d=r.targetIds||[],f=r.removedTargetIds||[];n=new pc(d,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=fh(t,r.document),i=r.readTime?Rn(r.readTime):ee.min(),o=gt.newNoDocument(s,i),c=r.removedTargetIds||[];n=new pc([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=fh(t,r.document),i=r.removedTargetIds||[];n=new pc([],i,s,null)}else{if(!("filter"in e))return J();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new Pj(s,i),c=r.targetId;n=new pE(c,o)}}return n}function Bj(t,e){let n;if(e instanceof Ja)n={update:C0(t,e.key,e.value)};else if(e instanceof Em)n={delete:zf(t,e.key)};else if(e instanceof ns)n={update:C0(t,e.key,e.data),updateMask:Jj(e.fieldMask)};else{if(!(e instanceof Cj))return J();n={verify:zf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const c=o.transform;if(c instanceof Ra)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Hi)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof nu)return{fieldPath:o.field.canonicalString(),increment:c.Pe};throw J()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:Fj(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:J()}(t,e.precondition)),n}function qj(t,e){return t&&t.length>0?(he(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?Rn(s.updateTime):Rn(i);return o.isEqual(ee.min())&&(o=Rn(i)),new Nj(o,s.transformResults||[])}(n,e))):[]}function Hj(t,e){return{documents:[vE(t,e.path)]}}function Wj(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=vE(t,s);const i=function(d){if(d.length!==0)return wE(En.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:ni(m.field),direction:Qj(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=Uf(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function Kj(t){let e=zj(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){he(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(p){const m=_E(p);return m instanceof En&&Yb(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(p){return p.map(m=>function(I){return new ja(ri(I.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(I.direction))}(m))}(n.orderBy));let c=null;n.limit&&(c=function(p){let m;return m=typeof p=="object"?p.value:p,Du(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(p){const m=!!p.before,_=p.values||[];return new qi(_,m)}(n.startAt));let d=null;return n.endAt&&(d=function(p){const m=!p.before,_=p.values||[];return new qi(_,m)}(n.endAt)),hj(e,s,o,i,c,"F",u,d)}function Gj(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return J()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function _E(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ri(n.unaryFilter.field);return ze.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ri(n.unaryFilter.field);return ze.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ri(n.unaryFilter.field);return ze.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ri(n.unaryFilter.field);return ze.create(o,"!=",{nullValue:"NULL_VALUE"});default:return J()}}(t):t.fieldFilter!==void 0?function(n){return ze.create(ri(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return J()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return En.create(n.compositeFilter.filters.map(r=>_E(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return J()}}(n.compositeFilter.op))}(t):J()}function Qj(t){return Lj[t]}function Yj(t){return Mj[t]}function Xj(t){return Vj[t]}function ni(t){return{fieldPath:t.canonicalString()}}function ri(t){return et.fromServerFormat(t.fieldPath)}function wE(t){return t instanceof ze?function(n){if(n.op==="=="){if(p0(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NAN"}};if(f0(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(p0(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NAN"}};if(f0(n.value))return{unaryFilter:{field:ni(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ni(n.field),op:Yj(n.op),value:n.value}}}(t):t instanceof En?function(n){const r=n.getFilters().map(s=>wE(s));return r.length===1?r[0]:{compositeFilter:{op:Xj(n.op),filters:r}}}(t):J()}function Jj(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function bE(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Or{constructor(e,n,r,s,i=ee.min(),o=ee.min(),c=it.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new Or(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Or(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.ct=e}}function eR(t){const e=Kj({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?tu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tR{constructor(){this.un=new nR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Qr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Qr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class nR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new rt(ye.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new rt(ye.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new Wi(0)}static kn(){return new Wi(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(){this.changes=new ao(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&sa(r.mutation,s,Qt.empty(),He.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,se()).next(()=>r))}getLocalViewOfDocuments(e,n,r=se()){const s=gs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=$o();return i.forEach((c,u)=>{o=o.insert(c,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=gs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,se()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,c)=>{n.set(o,c)})})}computeViews(e,n,r,s){let i=fr();const o=ra(),c=function(){return ra()}();return n.forEach((u,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof ns)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),sa(f.mutation,d,f.mutation.getFieldMask(),He.now())):o.set(d.key,Qt.empty())}),this.recalculateAndSaveOverlays(e,i).next(u=>(u.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var p;return c.set(d,new sR(f,(p=o.get(d))!==null&&p!==void 0?p:null))}),c))}recalculateAndSaveOverlays(e,n){const r=ra();let s=new Ae((o,c)=>o-c),i=se();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const c of o)c.keys().forEach(u=>{const d=n.get(u);if(d===null)return;let f=r.get(u)||Qt.empty();f=c.applyToLocalView(d,f),r.set(u,f);const p=(s.get(c.batchId)||se()).add(u);s=s.insert(c.batchId,p)})}).next(()=>{const o=[],c=s.getReverseIterator();for(;c.hasNext();){const u=c.getNext(),d=u.key,f=u.value,p=sE();f.forEach(m=>{if(!i.has(m)){const _=dE(n.get(m),r.get(m));_!==null&&p.set(m,_),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,p))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):wm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(gs());let c=-1,u=i;return o.next(d=>U.forEach(d,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,u,d,se())).next(f=>({batchId:c,changes:rE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=$o();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=$o();return this.indexManager.getCollectionParents(e,i).next(c=>U.forEach(c,u=>{const d=function(p,m){return new qs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,u.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((u,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,gt.newInvalidDocument(f)))});let c=$o();return o.forEach((u,d)=>{const f=i.get(u);f!==void 0&&sa(f.mutation,d,Qt.empty(),He.now()),Vu(n,d)&&(c=c.insert(u,d))}),c})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:Rn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:eR(s.bundledQuery),readTime:Rn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(){this.overlays=new Ae(W.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=gs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=gs(),i=n.length+1,o=new W(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const u=c.getNext().value,d=u.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&u.largestBatchId>r&&s.set(u.getKey(),u)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ae((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=gs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const c=gs(),u=i.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((d,f)=>c.set(d,f)),!(c.size()>=s)););return U.resolve(c)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new kj(n,r));let i=this.Ir.get(n);i===void 0&&(i=se(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lR{constructor(){this.sessionToken=it.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(){this.Tr=new rt(We.Er),this.dr=new rt(We.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new We(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new We(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new ye([])),r=new We(n,e),s=new We(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new ye([])),r=new We(n,e),s=new We(n,e+1);let i=se();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new We(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class We{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||ce(e.wr,n.wr)}static Ar(e,n){return ce(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new rt(We.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Aj(i,n,r,s);this.mutationQueue.push(o);for(const c of s)this.br=this.br.add(new We(c.key,i)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new We(n,0),s=new We(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const c=this.Dr(o.wr);i.push(c)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new rt(ce);return n.forEach(s=>{const i=new We(s,0),o=new We(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],c=>{r=r.add(c.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new We(new W(i),0);let c=new rt(ce);return this.br.forEachWhile(u=>{const d=u.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(c=c.add(u.wr)),!0)},o),U.resolve(this.Cr(c))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){he(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new We(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new We(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.Mr=e,this.docs=function(){return new Ae(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():gt.newInvalidDocument(n))}getEntries(e,n){let r=fr();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():gt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=fr();const o=n.path,c=new W(o.child("")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){const{key:d,value:{document:f}}=u.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||KP(WP(f),r)<=0||(s.has(f.key)||Vu(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){J()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new dR(this)}getSize(e){return U.resolve(this.size)}}class dR extends rR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{constructor(e){this.persistence=e,this.Nr=new ao(n=>vm(n),xm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Sm,this.targetCount=0,this.kr=Wi.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new Wi(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,c.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n){this.qr={},this.overlays={},this.Qr=new mm(0),this.Kr=!1,this.Kr=!0,this.$r=new lR,this.referenceDelegate=e(this),this.Ur=new hR(this),this.indexManager=new tR,this.remoteDocumentCache=function(s){return new uR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new Zj(n),this.Gr=new oR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new aR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new cR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new pR(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class pR extends QP{constructor(e){super(),this.currentSequenceNumber=e}}class Cm{constructor(e){this.persistence=e,this.Jr=new Sm,this.Yr=null}static Zr(e){return new Cm(e)}get Xr(){if(this.Yr)return this.Yr;throw J()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,ee.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=se(),s=se();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Am(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mR{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return eC()?8:YP(wt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new mR;return this.Xi(e,n,o).next(c=>{if(i.result=c,this.zi)return this.es(e,n,o,c.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(jo()<=ie.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ti(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(jo()<=ie.DEBUG&&H("QueryEngine","Query:",ti(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(jo()<=ie.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ti(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,jn(n))):U.resolve())}Yi(e,n){if(v0(n))return U.resolve(null);let r=jn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=tu(n,null,"F"),r=jn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=se(...i);return this.Ji.getDocuments(e,o).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{const d=this.ts(n,c);return this.ns(n,d,o,u.readTime)?this.Yi(e,tu(n,null,"F")):this.rs(e,d,n,u)}))})))}Zi(e,n,r,s){return v0(n)||s.isEqual(ee.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(jo()<=ie.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),ti(n)),this.rs(e,o,n,HP(s,-1)).next(c=>c))})}ts(e,n){let r=new rt(tE(e));return n.forEach((s,i)=>{Vu(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return jo()<=ie.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ti(n)),this.Ji.getDocumentsMatchingQuery(e,n,Qr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ae(ce),this._s=new ao(i=>vm(i),xm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new iR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function vR(t,e,n,r){return new yR(t,e,n,r)}async function EE(t,e){const n=te(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],c=[];let u=se();for(const d of s){o.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}for(const d of i){c.push(d.batchId);for(const f of d.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:c}))})})}function xR(t,e){const n=te(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(c,u,d,f){const p=d.batch,m=p.keys();let _=U.resolve();return m.forEach(I=>{_=_.next(()=>f.getEntry(u,I)).next(b=>{const N=d.docVersions.get(I);he(N!==null),b.version.compareTo(N)<0&&(p.applyToRemoteDocument(b,d),b.isValidDocument()&&(b.setReadTime(d.commitVersion),f.addEntry(b)))})}),_.next(()=>c.mutationQueue.removeMutationBatch(u,p))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let u=se();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(u=u.add(c.batch.mutations[d].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function TE(t){const e=te(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function _R(t,e){const n=te(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const c=[];e.targetChanges.forEach((f,p)=>{const m=s.get(p);if(!m)return;c.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,p).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,p)));let _=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(it.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):f.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(f.resumeToken,r)),s=s.insert(p,_),function(b,N,v){return b.resumeToken.approximateByteSize()===0||N.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,_,f)&&c.push(n.Ur.updateTargetData(i,_))});let u=fr(),d=se();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),c.push(wR(i,o,e.documentUpdates).next(f=>{u=f.Ps,d=f.Is})),!r.isEqual(ee.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(p=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));c.push(f)}return U.waitFor(c).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,u,d)).next(()=>u)}).then(i=>(n.os=s,i))}function wR(t,e,n){let r=se(),s=se();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=fr();return n.forEach((c,u)=>{const d=i.get(c);u.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(c)),u.isNoDocument()&&u.version.isEqual(ee.min())?(e.removeEntry(c,u.readTime),o=o.insert(c,u)):!d.isValidDocument()||u.version.compareTo(d.version)>0||u.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(u),o=o.insert(c,u)):H("LocalStore","Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",u.version)}),{Ps:o,Is:s}})}function bR(t,e){const n=te(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ER(t,e){const n=te(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Or(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Bf(t,e,n){const r=te(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Xa(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function A0(t,e,n){const r=te(t);let s=ee.min(),i=se();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,d,f){const p=te(u),m=p._s.get(f);return m!==void 0?U.resolve(p.os.get(m)):p.Ur.getTargetData(d,f)}(r,o,jn(e)).next(c=>{if(c)return s=c.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,c.targetId).next(u=>{i=u})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:ee.min(),n?i:se())).next(c=>(TR(r,pj(e),c),{documents:c,Ts:i})))}function TR(t,e,n){let r=t.us.get(e)||ee.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class k0{constructor(){this.activeTargetIds=_j()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NR{constructor(){this.so=new k0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new k0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl=null;function ph(){return Kl===null?Kl=function(){return 268435456+Math.round(2147483648*Math.random())}():Kl++,"0x"+Kl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dt="WebChannelConnection";class AR extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const c=ph(),u=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${c}:`,u,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,u,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${c}: `,f),f),f=>{throw Fi("RestConnection",`RPC '${n}' ${c} failed with error: `,f,"url: ",u,"request:",s),f})}Lo(n,r,s,i,o,c){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+oo}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=SR[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=ph();return new Promise((o,c)=>{const u=new Vb;u.setWithCredentials(!0),u.listenOnce(Ub.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case dc.NO_ERROR:const f=u.getResponseJson();H(dt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case dc.TIMEOUT:H(dt,`RPC '${e}' ${i} timed out`),c(new B(V.DEADLINE_EXCEEDED,"Request time out"));break;case dc.HTTP_ERROR:const p=u.getStatus();if(H(dt,`RPC '${e}' ${i} failed with status:`,p,"response text:",u.getResponseText()),p>0){let m=u.getResponseJson();Array.isArray(m)&&(m=m[0]);const _=m==null?void 0:m.error;if(_&&_.status&&_.message){const I=function(N){const v=N.toLowerCase().replace(/_/g,"-");return Object.values(V).indexOf(v)>=0?v:V.UNKNOWN}(_.status);c(new B(I,_.message))}else c(new B(V.UNKNOWN,"Server responded with status "+u.getStatus()))}else c(new B(V.UNAVAILABLE,"Connection failed."));break;default:J()}}finally{H(dt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(dt,`RPC '${e}' ${i} sending request:`,s),u.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=ph(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=$b(),c=zb(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(u.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Oo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const f=i.join("");H(dt,`Creating RPC '${e}' stream ${s}: ${f}`,u);const p=o.createWebChannel(f,u);let m=!1,_=!1;const I=new CR({Io:N=>{_?H(dt,`Not sending because RPC '${e}' stream ${s} is closed:`,N):(m||(H(dt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),m=!0),H(dt,`RPC '${e}' stream ${s} sending:`,N),p.send(N))},To:()=>p.close()}),b=(N,v,x)=>{N.listen(v,y=>{try{x(y)}catch(T){setTimeout(()=>{throw T},0)}})};return b(p,zo.EventType.OPEN,()=>{_||(H(dt,`RPC '${e}' stream ${s} transport opened.`),I.yo())}),b(p,zo.EventType.CLOSE,()=>{_||(_=!0,H(dt,`RPC '${e}' stream ${s} transport closed`),I.So())}),b(p,zo.EventType.ERROR,N=>{_||(_=!0,Fi(dt,`RPC '${e}' stream ${s} transport errored:`,N),I.So(new B(V.UNAVAILABLE,"The operation could not be completed")))}),b(p,zo.EventType.MESSAGE,N=>{var v;if(!_){const x=N.data[0];he(!!x);const y=x,T=y.error||((v=y[0])===null||v===void 0?void 0:v.error);if(T){H(dt,`RPC '${e}' stream ${s} received error:`,T);const D=T.status;let M=function(P){const S=Ue[P];if(S!==void 0)return fE(S)}(D),C=T.message;M===void 0&&(M=V.INTERNAL,C="Unknown error status: "+D+" with message "+T.message),_=!0,I.So(new B(M,C)),p.close()}else H(dt,`RPC '${e}' stream ${s} received:`,x),I.bo(x)}}),b(c,Fb.STAT_EVENT,N=>{N.stat===Rf.PROXY?H(dt,`RPC '${e}' stream ${s} detected buffering proxy`):N.stat===Rf.NOPROXY&&H(dt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{I.wo()},0),I}}function mh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $u(t){return new Uj(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IE{constructor(e,n,r,s,i,o,c,u){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new NE(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===V.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===V.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new B(V.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class kR extends IE{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=$j(this.serializer,e),r=function(i){if(!("targetChange"in i))return ee.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?Rn(o.readTime):ee.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(i,o){let c;const u=o.target;if(c=Mf(u)?{documents:Hj(i,u)}:{query:Wj(i,u)._t},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=gE(i,o.resumeToken);const d=Uf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(ee.min())>0){c.readTime=ru(i,o.snapshotVersion.toTimestamp());const d=Uf(i,o.expectedCount);d!==null&&(c.expectedCount=d)}return c}(this.serializer,e);const r=Gj(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.a_(n)}}class PR extends IE{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return he(!!e.streamToken),this.lastStreamToken=e.streamToken,he(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){he(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=qj(e.writeResults,e.commitTime),r=Rn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=$f(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>Bj(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Ff(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(V.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,c])=>this.connection.Lo(e,Ff(n,r),s,o,c,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===V.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(V.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class RR{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(hr(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OR{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Hs(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(u){const d=te(u);d.L_.add(4),await el(d),d.q_.set("Unknown"),d.L_.delete(4),await Bu(d)}(this))})}),this.q_=new RR(r,s)}}async function Bu(t){if(Hs(t))for(const e of t.B_)await e(!0)}async function el(t){for(const e of t.B_)await e(!1)}function SE(t,e){const n=te(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),Rm(n)?jm(n):lo(n).r_()&&Pm(n,e))}function km(t,e){const n=te(t),r=lo(n);n.N_.delete(e),r.r_()&&CE(n,e),n.N_.size===0&&(r.r_()?r.o_():Hs(n)&&n.q_.set("Unknown"))}function Pm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}lo(t).A_(e)}function CE(t,e){t.Q_.xe(e),lo(t).R_(e)}function jm(t){t.Q_=new Dj({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),lo(t).start(),t.q_.v_()}function Rm(t){return Hs(t)&&!lo(t).n_()&&t.N_.size>0}function Hs(t){return te(t).L_.size===0}function AE(t){t.Q_=void 0}async function DR(t){t.q_.set("Online")}async function LR(t){t.N_.forEach((e,n)=>{Pm(t,e)})}async function MR(t,e){AE(t),Rm(t)?(t.q_.M_(e),jm(t)):t.q_.set("Unknown")}async function VR(t,e,n){if(t.q_.set("Online"),e instanceof mE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const c of i.targetIds)s.N_.has(c)&&(await s.remoteSyncer.rejectListen(c,o),s.N_.delete(c),s.Q_.removeTarget(c))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await su(t,r)}else if(e instanceof pc?t.Q_.Ke(e):e instanceof pE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(ee.min()))try{const r=await TE(t.localStore);n.compareTo(r)>=0&&await function(i,o){const c=i.Q_.rt(o);return c.targetChanges.forEach((u,d)=>{if(u.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(u.resumeToken,o))}}),c.targetMismatches.forEach((u,d)=>{const f=i.N_.get(u);if(!f)return;i.N_.set(u,f.withResumeToken(it.EMPTY_BYTE_STRING,f.snapshotVersion)),CE(i,u);const p=new Or(f.target,u,d,f.sequenceNumber);Pm(i,p)}),i.remoteSyncer.applyRemoteEvent(c)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await su(t,r)}}async function su(t,e,n){if(!Xa(e))throw e;t.L_.add(1),await el(t),t.q_.set("Offline"),n||(n=()=>TE(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await Bu(t)})}function kE(t,e){return e().catch(n=>su(t,n,e))}async function qu(t){const e=te(t),n=Xr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;UR(e);)try{const s=await bR(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,FR(e,s)}catch(s){await su(e,s)}PE(e)&&jE(e)}function UR(t){return Hs(t)&&t.O_.length<10}function FR(t,e){t.O_.push(e);const n=Xr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function PE(t){return Hs(t)&&!Xr(t).n_()&&t.O_.length>0}function jE(t){Xr(t).start()}async function zR(t){Xr(t).p_()}async function $R(t){const e=Xr(t);for(const n of t.O_)e.m_(n.mutations)}async function BR(t,e,n){const r=t.O_.shift(),s=Tm.from(r,e,n);await kE(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await qu(t)}async function qR(t,e){e&&Xr(t).V_&&await async function(r,s){if(function(o){return jj(o)&&o!==V.ABORTED}(s.code)){const i=r.O_.shift();Xr(r).s_(),await kE(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await qu(r)}}(t,e),PE(t)&&jE(t)}async function j0(t,e){const n=te(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Hs(n);n.L_.add(3),await el(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await Bu(n)}async function HR(t,e){const n=te(t);e?(n.L_.delete(2),await Bu(n)):e||(n.L_.add(2),await el(n),n.q_.set("Unknown"))}function lo(t){return t.K_||(t.K_=function(n,r,s){const i=te(n);return i.w_(),new kR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:DR.bind(null,t),Ro:LR.bind(null,t),mo:MR.bind(null,t),d_:VR.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),Rm(t)?jm(t):t.q_.set("Unknown")):(await t.K_.stop(),AE(t))})),t.K_}function Xr(t){return t.U_||(t.U_=function(n,r,s){const i=te(n);return i.w_(),new PR(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:zR.bind(null,t),mo:qR.bind(null,t),f_:$R.bind(null,t),g_:BR.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await qu(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Om{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new rr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,c=new Om(e,n,o,s,i);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(V.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dm(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Xa(t))return new B(V.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=$o(),this.sortedSet=new Ae(this.comparator)}static emptySet(e){return new Ci(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(){this.W_=new Ae(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):J():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Ki{constructor(e,n,r,s,i,o,c,u,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(c=>{o.push({type:0,doc:c})}),new Ki(e,n,Ci.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Mu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class KR{constructor(){this.queries=O0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=te(n),i=s.queries;s.queries=O0(),i.forEach((o,c)=>{for(const u of c.j_)u.onError(r)})})(this,new B(V.ABORTED,"Firestore shutting down"))}}function O0(){return new ao(t=>eE(t),Mu)}async function RE(t,e){const n=te(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new WR,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const c=Dm(o,`Initialization of query '${ti(e.query)}' failed`);return void e.onError(c)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Lm(n)}async function OE(t,e){const n=te(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function GR(t,e){const n=te(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const c of o.j_)c.X_(s)&&(r=!0);o.z_=s}}r&&Lm(n)}function QR(t,e,n){const r=te(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Lm(t){t.Y_.forEach(e=>{e.next()})}var qf,D0;(D0=qf||(qf={})).ea="default",D0.Cache="cache";class DE{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Ki(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Ki.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==qf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{constructor(e){this.key=e}}class ME{constructor(e){this.key=e}}class YR{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=se(),this.mutatedKeys=se(),this.Aa=tE(e),this.Ra=new Ci(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new R0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,c=!1;const u=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,p)=>{const m=s.get(f),_=Vu(this.query,p)?p:null,I=!!m&&this.mutatedKeys.has(m.key),b=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let N=!1;m&&_?m.data.isEqual(_.data)?I!==b&&(r.track({type:3,doc:_}),N=!0):this.ga(m,_)||(r.track({type:2,doc:_}),N=!0,(u&&this.Aa(_,u)>0||d&&this.Aa(_,d)<0)&&(c=!0)):!m&&_?(r.track({type:0,doc:_}),N=!0):m&&!_&&(r.track({type:1,doc:m}),N=!0,(u||d)&&(c=!0)),N&&(_?(o=o.add(_),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:c,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,p)=>function(_,I){const b=N=>{switch(N){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return J()}};return b(_)-b(I)}(f.type,p.type)||this.Aa(f.doc,p.doc)),this.pa(r),s=s!=null&&s;const c=n&&!s?this.ya():[],u=this.da.size===0&&this.current&&!s?1:0,d=u!==this.Ea;return this.Ea=u,o.length!==0||d?{snapshot:new Ki(this.query,e.Ra,i,o,e.mutatedKeys,u===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:c}:{wa:c}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new R0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=se(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ME(r))}),this.da.forEach(r=>{e.has(r)||n.push(new LE(r))}),n}ba(e){this.Ta=e.Ts,this.da=se();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Ki.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class XR{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class JR{constructor(e){this.key=e,this.va=!1}}class ZR{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new ao(c=>eE(c),Mu),this.Ma=new Map,this.xa=new Set,this.Oa=new Ae(W.comparator),this.Na=new Map,this.La=new Sm,this.Ba={},this.ka=new Map,this.qa=Wi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function eO(t,e,n=!0){const r=BE(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await VE(r,e,n,!0),s}async function tO(t,e){const n=BE(t);await VE(n,e,!0,!1)}async function VE(t,e,n,r){const s=await ER(t.localStore,jn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let c;return r&&(c=await nO(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&SE(t.remoteStore,s),c}async function nO(t,e,n,r,s){t.Ka=(p,m,_)=>async function(b,N,v,x){let y=N.view.ma(v);y.ns&&(y=await A0(b.localStore,N.query,!1).then(({documents:C})=>N.view.ma(C,y)));const T=x&&x.targetChanges.get(N.targetId),D=x&&x.targetMismatches.get(N.targetId)!=null,M=N.view.applyChanges(y,b.isPrimaryClient,T,D);return M0(b,N.targetId,M.wa),M.snapshot}(t,p,m,_);const i=await A0(t.localStore,e,!0),o=new YR(e,i.Ts),c=o.ma(i.documents),u=Za.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(c,t.isPrimaryClient,u);M0(t,n,d.wa);const f=new XR(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function rO(t,e,n){const r=te(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Mu(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Bf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&km(r.remoteStore,s.targetId),Hf(r,s.targetId)}).catch(Ya)):(Hf(r,s.targetId),await Bf(r.localStore,s.targetId,!0))}async function sO(t,e){const n=te(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),km(n.remoteStore,r.targetId))}async function iO(t,e,n){const r=hO(t);try{const s=await function(o,c){const u=te(o),d=He.now(),f=c.reduce((_,I)=>_.add(I.key),se());let p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",_=>{let I=fr(),b=se();return u.cs.getEntries(_,f).next(N=>{I=N,I.forEach((v,x)=>{x.isValidDocument()||(b=b.add(v))})}).next(()=>u.localDocuments.getOverlayedDocuments(_,I)).next(N=>{p=N;const v=[];for(const x of c){const y=Sj(x,p.get(x.key).overlayedDocument);y!=null&&v.push(new ns(x.key,y,Kb(y.value.mapValue),on.exists(!0)))}return u.mutationQueue.addMutationBatch(_,d,v,c)}).next(N=>{m=N;const v=N.applyToLocalDocumentSet(p,b);return u.documentOverlayCache.saveOverlays(_,N.batchId,v)})}).then(()=>({batchId:m.batchId,changes:rE(p)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,c,u){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ae(ce)),d=d.insert(c,u),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await tl(r,s.changes),await qu(r.remoteStore)}catch(s){const i=Dm(s,"Failed to persist write");n.reject(i)}}async function UE(t,e){const n=te(t);try{const r=await _R(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(he(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?he(o.va):s.removedDocuments.size>0&&(he(o.va),o.va=!1))}),await tl(n,r,e)}catch(r){await Ya(r)}}function L0(t,e,n){const r=te(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const c=o.view.Z_(e);c.snapshot&&s.push(c.snapshot)}),function(o,c){const u=te(o);u.onlineState=c;let d=!1;u.queries.forEach((f,p)=>{for(const m of p.j_)m.Z_(c)&&(d=!0)}),d&&Lm(u)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function oO(t,e,n){const r=te(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ae(W.comparator);o=o.insert(i,gt.newNoDocument(i,ee.min()));const c=se().add(i),u=new zu(ee.min(),new Map,new Ae(ce),o,c);await UE(r,u),r.Oa=r.Oa.remove(i),r.Na.delete(e),Mm(r)}else await Bf(r.localStore,e,!1).then(()=>Hf(r,e,n)).catch(Ya)}async function aO(t,e){const n=te(t),r=e.batch.batchId;try{const s=await xR(n.localStore,e);zE(n,r,null),FE(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await tl(n,s)}catch(s){await Ya(s)}}async function lO(t,e,n){const r=te(t);try{const s=await function(o,c){const u=te(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return u.mutationQueue.lookupMutationBatch(d,c).next(p=>(he(p!==null),f=p.keys(),u.mutationQueue.removeMutationBatch(d,p))).next(()=>u.mutationQueue.performConsistencyCheck(d)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(d,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>u.localDocuments.getDocuments(d,f))})}(r.localStore,e);zE(r,e,n),FE(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await tl(r,s)}catch(s){await Ya(s)}}function FE(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function zE(t,e,n){const r=te(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Hf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||$E(t,r)})}function $E(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(km(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Mm(t))}function M0(t,e,n){for(const r of n)r instanceof LE?(t.La.addReference(r.key,e),cO(t,r)):r instanceof ME?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||$E(t,r.key)):J()}function cO(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Mm(t))}function Mm(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(ye.fromString(e)),r=t.qa.next();t.Na.set(r,new JR(n)),t.Oa=t.Oa.insert(n,r),SE(t.remoteStore,new Or(jn(_m(n.path)),r,"TargetPurposeLimboResolution",mm.oe))}}async function tl(t,e,n){const r=te(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((c,u)=>{o.push(r.Ka(u,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const p=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(u.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(u.targetId,p?"current":"not-current")}if(d){s.push(d);const p=Am.Wi(u.targetId,d);i.push(p)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(u,d){const f=te(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>U.forEach(d,m=>U.forEach(m.$i,_=>f.persistence.referenceDelegate.addReference(p,m.targetId,_)).next(()=>U.forEach(m.Ui,_=>f.persistence.referenceDelegate.removeReference(p,m.targetId,_)))))}catch(p){if(!Xa(p))throw p;H("LocalStore","Failed to update sequence numbers: "+p)}for(const p of d){const m=p.targetId;if(!p.fromCache){const _=f.os.get(m),I=_.snapshotVersion,b=_.withLastLimboFreeSnapshotVersion(I);f.os=f.os.insert(m,b)}}}(r.localStore,i))}async function uO(t,e){const n=te(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await EE(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(c=>{c.forEach(u=>{u.reject(new B(V.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await tl(n,r.hs)}}function dO(t,e){const n=te(t),r=n.Na.get(e);if(r&&r.va)return se().add(r.key);{let s=se();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const c=n.Fa.get(o);s=s.unionWith(c.view.Va)}return s}}function BE(t){const e=te(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=UE.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=dO.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=oO.bind(null,e),e.Ca.d_=GR.bind(null,e.eventManager),e.Ca.$a=QR.bind(null,e.eventManager),e}function hO(t){const e=te(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=aO.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=lO.bind(null,e),e}class iu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=$u(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return vR(this.persistence,new gR,e.initialUser,this.serializer)}Ga(e){return new fR(Cm.Zr,this.serializer)}Wa(e){return new NR}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}iu.provider={build:()=>new iu};class Wf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>L0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=uO.bind(null,this.syncEngine),await HR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new KR}()}createDatastore(e){const n=$u(e.databaseInfo.databaseId),r=function(i){return new AR(i)}(e.databaseInfo);return function(i,o,c,u){return new jR(i,o,c,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,c){return new OR(r,s,i,o,c)}(this.localStore,this.datastore,e.asyncQueue,n=>L0(this.syncEngine,n,0),function(){return P0.D()?new P0:new IR}())}createSyncEngine(e,n){return function(s,i,o,c,u,d,f){const p=new ZR(s,i,o,c,u,d);return f&&(p.Qa=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=te(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await el(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Wf.provider={build:()=>new Wf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=pt.UNAUTHENTICATED,this.clientId=qb.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new rr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Dm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function gh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await EE(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function V0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await pO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>j0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>j0(e.remoteStore,s)),t._onlineComponents=e}async function pO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await gh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===V.FAILED_PRECONDITION||s.code===V.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Fi("Error using user provided cache. Falling back to memory cache: "+n),await gh(t,new iu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await gh(t,new iu);return t._offlineComponents}async function HE(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await V0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await V0(t,new Wf))),t._onlineComponents}function mO(t){return HE(t).then(e=>e.syncEngine)}async function WE(t){const e=await HE(t),n=e.eventManager;return n.onListen=eO.bind(null,e.syncEngine),n.onUnlisten=rO.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=tO.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=sO.bind(null,e.syncEngine),n}function gO(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new qE({next:m=>{f.Za(),o.enqueueAndForget(()=>OE(i,p));const _=m.docs.has(c);!_&&m.fromCache?d.reject(new B(V.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&m.fromCache&&u&&u.source==="server"?d.reject(new B(V.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new DE(_m(c.path),f,{includeMetadataChanges:!0,_a:!0});return RE(i,p)}(await WE(t),t.asyncQueue,e,n,r)),r.promise}function yO(t,e,n={}){const r=new rr;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,c,u,d){const f=new qE({next:m=>{f.Za(),o.enqueueAndForget(()=>OE(i,p)),m.fromCache&&u.source==="server"?d.reject(new B(V.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),p=new DE(c,f,{includeMetadataChanges:!0,_a:!0});return RE(i,p)}(await WE(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KE(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e,n){if(!n)throw new B(V.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function vO(t,e,n,r){if(e===!0&&r===!0)throw new B(V.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function F0(t){if(!W.isDocumentKey(t))throw new B(V.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function z0(t){if(W.isDocumentKey(t))throw new B(V.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Hu(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":J()}function Tn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(V.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Hu(t);throw new B(V.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function xO(t,e){if(e<=0)throw new B(V.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(V.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(V.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}vO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=KE((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(V.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Wu{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new $0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(V.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(V.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new LP;switch(r.type){case"firstParty":return new FP(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(V.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=U0.get(n);r&&(H("ComponentProvider","Removing Datastore"),U0.delete(n),r.terminate())}(this),Promise.resolve()}}function _O(t,e,n,r={}){var s;const i=(t=Tn(t,Wu))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Fi("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let c,u;if(typeof r.mockUserToken=="string")c=r.mockUserToken,u=pt.MOCK_USER;else{c=Yw(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new B(V.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new pt(d)}t._authCredentials=new MP(new Bb(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new vr(this.firestore,e,this._query)}}class Ct{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Hr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ct(this.firestore,e,this._key)}}class Hr extends vr{constructor(e,n,r){super(e,n,_m(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ct(this.firestore,null,new W(e))}withConverter(e){return new Hr(this.firestore,e,this._path)}}function yt(t,e,...n){if(t=Ne(t),GE("collection","path",e),t instanceof Wu){const r=ye.fromString(e,...n);return z0(r),new Hr(t,null,r)}{if(!(t instanceof Ct||t instanceof Hr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return z0(r),new Hr(t.firestore,null,r)}}function ue(t,e,...n){if(t=Ne(t),arguments.length===1&&(e=qb.newId()),GE("doc","path",e),t instanceof Wu){const r=ye.fromString(e,...n);return F0(r),new Ct(t,null,new W(r))}{if(!(t instanceof Ct||t instanceof Hr))throw new B(V.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ye.fromString(e,...n));return F0(r),new Ct(t.firestore,t instanceof Hr?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new NE(this,"async_queue_retry"),this.Vu=()=>{const r=mh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=mh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=mh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new rr;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Xa(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let c=o.message||"";return o.stack&&(c=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),c}(r);throw hr("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Om.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&J()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Ws extends Wu{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new B0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new B0(e),this._firestoreClient=void 0,await e}}}function wO(t,e){const n=typeof t=="object"?t:Pu(),r=typeof t=="string"?t:"(default)",s=zs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=Kw("firestore");i&&_O(s,...i)}return s}function Vm(t){if(t._terminated)throw new B(V.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||bO(t),t._firestoreClient}function bO(t){var e,n,r;const s=t._freezeSettings(),i=function(c,u,d,f){return new ZP(c,u,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,KE(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new fO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(c){const u=c==null?void 0:c._online.build();return{_offline:c==null?void 0:c._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Gi(it.fromBase64String(e))}catch(n){throw new B(V.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Gi(it.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(V.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new et(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Um{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(V.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(V.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EO=/^__.*__$/;class TO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ns(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ja(e,this.data,n,this.fieldTransforms)}}class QE{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ns(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function YE(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw J()}}class Gu{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Gu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return ou(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(YE(this.Cu)&&EO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class NO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||$u(e)}Qu(e,n,r,s=!1){return new Gu({Cu:e,methodName:n,qu:r,path:et.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function rl(t){const e=t._freezeSettings(),n=$u(t._databaseId);return new NO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function XE(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);Bm("Data must be an object, but it was:",o,r);const c=ZE(r,o);let u,d;if(i.merge)u=new Qt(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const p of i.mergeFields){const m=Kf(e,p,n);if(!o.contains(m))throw new B(V.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);tT(f,m)||f.push(m)}u=new Qt(f),d=o.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,d=o.fieldTransforms;return new TO(new Ot(c),u,d)}class Qu extends nl{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Qu}}function IO(t,e,n){return new Gu({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class zm extends nl{_toFieldTransform(e){return new uE(e.path,new Ra)}isEqual(e){return e instanceof zm}}class $m extends nl{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=IO(this,e,!0),r=this.Ku.map(i=>co(i,n)),s=new Hi(r);return new uE(e.path,s)}isEqual(e){return e instanceof $m&&Na(this.Ku,e.Ku)}}function SO(t,e,n,r){const s=t.Qu(1,e,n);Bm("Data must be an object, but it was:",s,r);const i=[],o=Ot.empty();Bs(r,(u,d)=>{const f=qm(e,u,n);d=Ne(d);const p=s.Nu(f);if(d instanceof Qu)i.push(f);else{const m=co(d,p);m!=null&&(i.push(f),o.set(f,m))}});const c=new Qt(i);return new QE(o,c,s.fieldTransforms)}function CO(t,e,n,r,s,i){const o=t.Qu(1,e,n),c=[Kf(e,r,n)],u=[s];if(i.length%2!=0)throw new B(V.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)c.push(Kf(e,i[m])),u.push(i[m+1]);const d=[],f=Ot.empty();for(let m=c.length-1;m>=0;--m)if(!tT(d,c[m])){const _=c[m];let I=u[m];I=Ne(I);const b=o.Nu(_);if(I instanceof Qu)d.push(_);else{const N=co(I,b);N!=null&&(d.push(_),f.set(_,N))}}const p=new Qt(d);return new QE(f,p,o.fieldTransforms)}function JE(t,e,n,r=!1){return co(n,t.Qu(r?4:3,e))}function co(t,e){if(eT(t=Ne(t)))return Bm("Unsupported field value:",e,t),ZE(t,e);if(t instanceof nl)return function(r,s){if(!YE(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const c of r){let u=co(c,s.Lu(o));u==null&&(u={nullValue:"NULL_VALUE"}),i.push(u),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=Ne(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return wj(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=He.fromDate(r);return{timestampValue:ru(s.serializer,i)}}if(r instanceof He){const i=new He(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:ru(s.serializer,i)}}if(r instanceof Um)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Gi)return{bytesValue:gE(s.serializer,r._byteString)};if(r instanceof Ct){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Im(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Fm)return function(o,c){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw c.Bu("VectorValues must only contain numeric values.");return bm(c.serializer,u)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Hu(r)}`)}(t,e)}function ZE(t,e){const n={};return Hb(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bs(t,(r,s)=>{const i=co(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function eT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof He||t instanceof Um||t instanceof Gi||t instanceof Ct||t instanceof nl||t instanceof Fm)}function Bm(t,e,n){if(!eT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Hu(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Kf(t,e,n){if((e=Ne(e))instanceof Ku)return e._internalPath;if(typeof e=="string")return qm(t,e);throw ou("Field path arguments must be of type string or ",t,!1,void 0,n)}const AO=new RegExp("[~\\*/\\[\\]]");function qm(t,e,n){if(e.search(AO)>=0)throw ou(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ku(...e.split("."))._internalPath}catch{throw ou(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ou(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(i||o)&&(u+=" (found",i&&(u+=` in field ${r}`),o&&(u+=` in document ${s}`),u+=")"),new B(V.INVALID_ARGUMENT,c+t+u)}function tT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ct(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new kO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Yu("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class kO extends Hm{data(){return super.data()}}function Yu(t,e){return typeof e=="string"?qm(t,e):e instanceof Ku?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(V.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Wm{}class Xu extends Wm{}function Wr(t,e,...n){let r=[];e instanceof Wm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(u=>u instanceof Km).length,c=i.filter(u=>u instanceof Ju).length;if(o>1||o>0&&c>0)throw new B(V.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Ju extends Xu{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ju(e,n,r)}_apply(e){const n=this._parse(e);return nT(e._query,n),new vr(e.firestore,e.converter,Vf(e._query,n))}_parse(e){const n=rl(e.firestore);return function(i,o,c,u,d,f,p){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(V.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){H0(p,f);const _=[];for(const I of p)_.push(q0(u,i,I));m={arrayValue:{values:_}}}else m=q0(u,i,p)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||H0(p,f),m=JE(c,o,p,f==="in"||f==="not-in");return ze.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function Dt(t,e,n){const r=e,s=Yu("where",t);return Ju._create(s,r,n)}class Km extends Wm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Km(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:En.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const c=i.getFlattenedFilters();for(const u of c)nT(o,u),o=Vf(o,u)}(e._query,n),new vr(e.firestore,e.converter,Vf(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Gm extends Xu{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Gm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(V.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ja(i,o)}(e._query,this._field,this._direction);return new vr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new qs(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function ws(t,e="asc"){const n=e,r=Yu("orderBy",t);return Gm._create(r,n)}class Qm extends Xu{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Qm(e,n,r)}_apply(e){return new vr(e.firestore,e.converter,tu(e._query,this._limit,this._limitType))}}function jO(t){return xO("limit",t),Qm._create("limit",t,"F")}class Ym extends Xu{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Ym(e,n,r)}_apply(e){const n=OO(e,this.type,this._docOrFields,this._inclusive);return new vr(e.firestore,e.converter,function(s,i){return new qs(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function RO(...t){return Ym._create("startAfter",t,!1)}function OO(t,e,n,r){if(n[0]=Ne(n[0]),n[0]instanceof Hm)return function(i,o,c,u,d){if(!u)throw new B(V.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const f=[];for(const p of Si(i))if(p.field.isKeyField())f.push(eu(o,u.key));else{const m=u.data.field(p.field);if(Lu(m))throw new B(V.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+p.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const _=p.field.canonicalString();throw new B(V.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${_}' (used as the orderBy) does not exist.`)}f.push(m)}return new qi(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=rl(t.firestore);return function(o,c,u,d,f,p){const m=o.explicitOrderBy;if(f.length>m.length)throw new B(V.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const _=[];for(let I=0;I<f.length;I++){const b=f[I];if(m[I].field.isKeyField()){if(typeof b!="string")throw new B(V.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof b}`);if(!wm(o)&&b.indexOf("/")!==-1)throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${b}' contains a slash.`);const N=o.path.child(ye.fromString(b));if(!W.isDocumentKey(N))throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${N}' is not because it contains an odd number of segments.`);const v=new W(N);_.push(eu(c,v))}else{const N=JE(u,d,b);_.push(N)}}return new qi(_,p)}(t._query,t.firestore._databaseId,s,e,n,r)}}function q0(t,e,n){if(typeof(n=Ne(n))=="string"){if(n==="")throw new B(V.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!wm(e)&&n.indexOf("/")!==-1)throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(ye.fromString(n));if(!W.isDocumentKey(r))throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return eu(t,new W(r))}if(n instanceof Ct)return eu(t,n._key);throw new B(V.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Hu(n)}.`)}function H0(t,e){if(!Array.isArray(t)||t.length===0)throw new B(V.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function nT(t,e){const n=function(s,i){for(const o of s)for(const c of o.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(V.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class DO{convertValue(e,n="none"){switch(Ps(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Le(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw J()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Bs(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Le(o.doubleValue));return new Fm(i)}convertGeoPoint(e){return new Um(Le(e.latitude),Le(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=gm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Aa(e));default:return null}}convertTimestamp(e){const n=Yr(e);return new He(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ye.fromString(e);he(bE(r));const s=new ka(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||hr(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qo{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class sT extends Hm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new mc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Yu("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class mc extends sT{data(e={}){return super.data(e)}}class LO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new qo(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new mc(this._firestore,this._userDataWriter,r.key,r,new qo(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(V.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(c=>i||c.type!==3).map(c=>{const u=new mc(s._firestore,s._userDataWriter,c.doc.key,c.doc,new qo(s._snapshot.mutatedKeys.has(c.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),f=o.indexOf(c.doc.key)),{type:MO(c.type),doc:u,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function MO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return J()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mt(t){t=Tn(t,Ct);const e=Tn(t.firestore,Ws);return gO(Vm(e),t._key).then(n=>VO(e,t,n))}class iT extends DO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Gi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Ct(this.firestore,null,n)}}function sr(t){t=Tn(t,vr);const e=Tn(t.firestore,Ws),n=Vm(e),r=new iT(e);return PO(t._query),yO(n,t._query).then(s=>new LO(e,r,t,s))}function Ai(t,e,n){t=Tn(t,Ct);const r=Tn(t.firestore,Ws),s=rT(t.converter,e,n);return Zu(r,[XE(rl(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,on.none())])}function $t(t,e,n,...r){t=Tn(t,Ct);const s=Tn(t.firestore,Ws),i=rl(s);let o;return o=typeof(e=Ne(e))=="string"||e instanceof Ku?CO(i,"updateDoc",t._key,e,n,r):SO(i,"updateDoc",t._key,e),Zu(s,[o.toMutation(t._key,on.exists(!0))])}function oT(t){return Zu(Tn(t.firestore,Ws),[new Em(t._key,on.none())])}function js(t,e){const n=Tn(t.firestore,Ws),r=ue(t),s=rT(t.converter,e);return Zu(n,[XE(rl(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,on.exists(!1))]).then(()=>r)}function Zu(t,e){return function(r,s){const i=new rr;return r.asyncQueue.enqueueAndForget(async()=>iO(await mO(r),s,i)),i.promise}(Vm(t),e)}function VO(t,e,n){const r=n.docs.get(e._key),s=new iT(t);return new sT(t,s,e._key,r,new qo(n.hasPendingWrites,n.fromCache),e.converter)}function ne(){return new zm("serverTimestamp")}function gc(...t){return new $m("arrayUnion",t)}(function(e,n=!0){(function(s){oo=s})($s),bn(new cn("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),c=new Ws(new VP(r.getProvider("auth-internal")),new $P(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(V.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ka(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),zt(l0,"4.7.3",e),zt(l0,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aT="firebasestorage.googleapis.com",UO="storageBucket",FO=2*60*1e3,zO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn extends Nn{constructor(e,n,r=0){super(yh(e),`Firebase Storage: ${n} (${yh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Mn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return yh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Dn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Dn||(Dn={}));function yh(t){return"storage/"+t}function $O(){const t="An unknown error occurred, please check the error payload for server response.";return new Mn(Dn.UNKNOWN,t)}function BO(){return new Mn(Dn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function qO(){return new Mn(Dn.CANCELED,"User canceled the upload/download.")}function HO(t){return new Mn(Dn.INVALID_URL,"Invalid URL '"+t+"'.")}function WO(t){return new Mn(Dn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function W0(t){return new Mn(Dn.INVALID_ARGUMENT,t)}function lT(){return new Mn(Dn.APP_DELETED,"The Firebase app was deleted.")}function KO(t){return new Mn(Dn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=yn.makeFromUrl(e,n)}catch{return new yn(e,"")}if(r.path==="")return r;throw WO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(T){T.path.charAt(T.path.length-1)==="/"&&(T.path_=T.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),u={bucket:1,path:3};function d(T){T.path_=decodeURIComponent(T.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${f}/b/${s}/o${m}`,"i"),I={bucket:1,path:3},b=n===aT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,N="([^?#]*)",v=new RegExp(`^https?://${b}/${s}/${N}`,"i"),y=[{regex:c,indices:u,postModify:i},{regex:_,indices:I,postModify:d},{regex:v,indices:{bucket:1,path:2},postModify:d}];for(let T=0;T<y.length;T++){const D=y[T],M=D.regex.exec(e);if(M){const C=M[D.indices.bucket];let E=M[D.indices.path];E||(E=""),r=new yn(C,E),D.postModify(r);break}}if(r==null)throw HO(e);return r}}class GO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QO(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function u(){return c===2}let d=!1;function f(...N){d||(d=!0,e.apply(null,N))}function p(N){s=setTimeout(()=>{s=null,t(_,u())},N)}function m(){i&&clearTimeout(i)}function _(N,...v){if(d){m();return}if(N){m(),f.call(null,N,...v);return}if(u()||o){m(),f.call(null,N,...v);return}r<64&&(r*=2);let y;c===1?(c=2,y=0):y=(r+Math.random())*1e3,p(y)}let I=!1;function b(N){I||(I=!0,m(),!d&&(s!==null?(N||(c=2),clearTimeout(s),p(0)):N||(c=1)))}return p(0),i=setTimeout(()=>{o=!0,b(!0)},n),b}function YO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XO(t){return t!==void 0}function K0(t,e,n,r){if(r<e)throw W0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw W0(`Invalid value for '${t}'. Expected ${n} or less.`)}function JO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var au;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(au||(au={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e,n,r,s,i,o,c,u,d,f,p,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=u,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,I)=>{this.resolve_=_,this.reject_=I,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Gl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const u=c.loaded,d=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===au.NO_ERROR,u=i.getStatus();if(!c||ZO(u,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===au.ABORT;r(!1,new Gl(!1,null,f));return}const d=this.successCodes_.indexOf(u)!==-1;r(!0,new Gl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const u=this.callback_(c,c.getResponse());XO(u)?i(u):i()}catch(u){o(u)}else if(c!==null){const u=$O();u.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,u)):o(u)}else if(s.canceled){const u=this.appDelete_?lT():qO();o(u)}else{const u=BO();o(u)}};this.canceled_?n(!1,new Gl(!1,null,!0)):this.backoffId_=QO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&YO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Gl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function tD(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function nD(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function rD(t,e){e&&(t["X-Firebase-GMPID"]=e)}function sD(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function iD(t,e,n,r,s,i,o=!0){const c=JO(t.urlParams),u=t.url+c,d=Object.assign({},t.headers);return rD(d,e),tD(d,n),nD(d,i),sD(d,r),new eD(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oD(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function aD(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this._service=e,n instanceof yn?this._location=n:this._location=yn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new lu(e,n)}get root(){const e=new yn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return aD(this._location.path)}get storage(){return this._service}get parent(){const e=oD(this._location.path);if(e===null)return null;const n=new yn(this._location.bucket,e);return new lu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw KO(e)}}function G0(t,e){const n=e==null?void 0:e[UO];return n==null?null:yn.makeFromBucketSpec(n,t)}function lD(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Yw(s,t.app.options.projectId))}class cD{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=aT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=FO,this._maxUploadRetryTime=zO,this._requests=new Set,s!=null?this._bucket=yn.makeFromBucketSpec(s,this._host):this._bucket=G0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=yn.makeFromBucketSpec(this._url,e):this._bucket=G0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){K0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){K0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new lu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new GO(lT());{const o=iD(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Q0="@firebase/storage",Y0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cT="storage";function uD(t=Pu(),e){t=Ne(t);const r=zs(t,cT).getImmediate({identifier:e}),s=Kw("storage");return s&&dD(r,...s),r}function dD(t,e,n,r={}){lD(t,e,n,r)}function hD(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new cD(n,r,s,e,$s)}function fD(){bn(new cn(cT,hD,"PUBLIC").setMultipleInstances(!0)),zt(Q0,Y0,""),zt(Q0,Y0,"esm2017")}fD();const uT="@firebase/installations",Xm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dT=1e4,hT=`w:${Xm}`,fT="FIS_v2",pD="https://firebaseinstallations.googleapis.com/v1",mD=60*60*1e3,gD="installations",yD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Rs=new Fs(gD,yD,vD);function pT(t){return t instanceof Nn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mT({projectId:t}){return`${pD}/projects/${t}/installations`}function gT(t){return{token:t.token,requestStatus:2,expiresIn:_D(t.expiresIn),creationTime:Date.now()}}async function yT(t,e){const r=(await e.json()).error;return Rs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function vT({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function xD(t,{refreshToken:e}){const n=vT(t);return n.append("Authorization",wD(e)),n}async function xT(t){const e=await t();return e.status>=500&&e.status<600?t():e}function _D(t){return Number(t.replace("s","000"))}function wD(t){return`${fT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=mT(t),s=vT(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:fT,appId:t.appId,sdkVersion:hT},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await xT(()=>fetch(r,c));if(u.ok){const d=await u.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:gT(d.authToken)}}else throw await yT("Create Installation",u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _T(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ED(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TD=/^[cdef][\w-]{21}$/,Gf="";function ND(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=ID(t);return TD.test(n)?n:Gf}catch{return Gf}}function ID(t){return ED(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ed(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wT=new Map;function bT(t,e){const n=ed(t);ET(n,e),SD(n,e)}function ET(t,e){const n=wT.get(t);if(n)for(const r of n)r(e)}function SD(t,e){const n=CD();n&&n.postMessage({key:t,fid:e}),AD()}let ys=null;function CD(){return!ys&&"BroadcastChannel"in self&&(ys=new BroadcastChannel("[Firebase] FID Change"),ys.onmessage=t=>{ET(t.data.key,t.data.fid)}),ys}function AD(){wT.size===0&&ys&&(ys.close(),ys=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kD="firebase-installations-database",PD=1,Os="firebase-installations-store";let vh=null;function Jm(){return vh||(vh=ku(kD,PD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Os)}}})),vh}async function cu(t,e){const n=ed(t),s=(await Jm()).transaction(Os,"readwrite"),i=s.objectStore(Os),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&bT(t,e.fid),e}async function TT(t){const e=ed(t),r=(await Jm()).transaction(Os,"readwrite");await r.objectStore(Os).delete(e),await r.done}async function td(t,e){const n=ed(t),s=(await Jm()).transaction(Os,"readwrite"),i=s.objectStore(Os),o=await i.get(n),c=e(o);return c===void 0?await i.delete(n):await i.put(c,n),await s.done,c&&(!o||o.fid!==c.fid)&&bT(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zm(t){let e;const n=await td(t.appConfig,r=>{const s=jD(r),i=RD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Gf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function jD(t){const e=t||{fid:ND(),registrationStatus:0};return NT(e)}function RD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Rs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=OD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:DD(t)}:{installationEntry:e}}async function OD(t,e){try{const n=await bD(t,e);return cu(t.appConfig,n)}catch(n){throw pT(n)&&n.customData.serverCode===409?await TT(t.appConfig):await cu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function DD(t){let e=await X0(t.appConfig);for(;e.registrationStatus===1;)await _T(100),e=await X0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await Zm(t);return r||n}return e}function X0(t){return td(t,e=>{if(!e)throw Rs.create("installation-not-found");return NT(e)})}function NT(t){return LD(t)?{fid:t.fid,registrationStatus:0}:t}function LD(t){return t.registrationStatus===1&&t.registrationTime+dT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MD({appConfig:t,heartbeatServiceProvider:e},n){const r=VD(t,n),s=xD(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:hT,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(o)},u=await xT(()=>fetch(r,c));if(u.ok){const d=await u.json();return gT(d)}else throw await yT("Generate Auth Token",u)}function VD(t,{fid:e}){return`${mT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eg(t,e=!1){let n;const r=await td(t.appConfig,i=>{if(!IT(i))throw Rs.create("not-registered");const o=i.authToken;if(!e&&zD(o))return i;if(o.requestStatus===1)return n=UD(t,e),i;{if(!navigator.onLine)throw Rs.create("app-offline");const c=BD(i);return n=FD(t,c),c}});return n?await n:r.authToken}async function UD(t,e){let n=await J0(t.appConfig);for(;n.authToken.requestStatus===1;)await _T(100),n=await J0(t.appConfig);const r=n.authToken;return r.requestStatus===0?eg(t,e):r}function J0(t){return td(t,e=>{if(!IT(e))throw Rs.create("not-registered");const n=e.authToken;return qD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function FD(t,e){try{const n=await MD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await cu(t.appConfig,r),n}catch(n){if(pT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await TT(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await cu(t.appConfig,r)}throw n}}function IT(t){return t!==void 0&&t.registrationStatus===2}function zD(t){return t.requestStatus===2&&!$D(t)}function $D(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+mD}function BD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function qD(t){return t.requestStatus===1&&t.requestTime+dT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HD(t){const e=t,{installationEntry:n,registrationPromise:r}=await Zm(e);return r?r.catch(console.error):eg(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function WD(t,e=!1){const n=t;return await KD(n),(await eg(n,e)).token}async function KD(t){const{registrationPromise:e}=await Zm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GD(t){if(!t||!t.options)throw xh("App Configuration");if(!t.name)throw xh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw xh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function xh(t){return Rs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ST="installations",QD="installations-internal",YD=t=>{const e=t.getProvider("app").getImmediate(),n=GD(e),r=zs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},XD=t=>{const e=t.getProvider("app").getImmediate(),n=zs(e,ST).getImmediate();return{getId:()=>HD(n),getToken:s=>WD(n,s)}};function JD(){bn(new cn(ST,YD,"PUBLIC")),bn(new cn(QD,XD,"PRIVATE"))}JD();zt(uT,Xm);zt(uT,Xm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD="/firebase-messaging-sw.js",e4="/firebase-cloud-messaging-push-scope",CT="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",t4="https://fcmregistrations.googleapis.com/v1",AT="google.c.a.c_id",n4="google.c.a.c_l",r4="google.c.a.ts",s4="google.c.a.e";var Z0;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(Z0||(Z0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Da;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Da||(Da={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function i4(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="fcm_token_details_db",o4=5,ex="fcm_token_object_Store";async function a4(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(_h))return null;let e=null;return(await ku(_h,o4,{upgrade:async(r,s,i,o)=>{var c;if(s<2||!r.objectStoreNames.contains(ex))return;const u=o.objectStore(ex),d=await u.index("fcmSenderId").get(t);if(await u.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(c=f.createTime)!==null&&c!==void 0?c:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:Hn(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Hn(f.auth),p256dh:Hn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Hn(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:Hn(f.auth),p256dh:Hn(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:Hn(f.vapidKey)}}}}}})).close(),await lh(_h),await lh("fcm_vapid_details_db"),await lh("undefined"),l4(e)?e:null}function l4(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c4="firebase-messaging-database",u4=1,La="firebase-messaging-store";let wh=null;function kT(){return wh||(wh=ku(c4,u4,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(La)}}})),wh}async function d4(t){const e=PT(t),r=await(await kT()).transaction(La).objectStore(La).get(e);if(r)return r;{const s=await a4(t.appConfig.senderId);if(s)return await tg(t,s),s}}async function tg(t,e){const n=PT(t),s=(await kT()).transaction(La,"readwrite");return await s.objectStore(La).put(e,n),await s.done,e}function PT({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h4={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},xt=new Fs("messaging","Messaging",h4);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f4(t,e){const n=await rg(t),r=jT(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(ng(t.appConfig),s)).json()}catch(o){throw xt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw xt.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw xt.create("token-subscribe-no-token");return i.token}async function p4(t,e){const n=await rg(t),r=jT(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${ng(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw xt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw xt.create("token-update-failed",{errorInfo:o})}if(!i.token)throw xt.create("token-update-no-token");return i.token}async function m4(t,e){const r={method:"DELETE",headers:await rg(t)};try{const i=await(await fetch(`${ng(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw xt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw xt.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function ng({projectId:t}){return`${t4}/projects/${t}/registrations`}async function rg({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function jT({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==CT&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g4=7*24*60*60*1e3;async function y4(t){const e=await x4(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:Hn(e.getKey("auth")),p256dh:Hn(e.getKey("p256dh"))},r=await d4(t.firebaseDependencies);if(r){if(_4(r.subscriptionOptions,n))return Date.now()>=r.createTime+g4?v4(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await m4(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return tx(t.firebaseDependencies,n)}else return tx(t.firebaseDependencies,n)}async function v4(t,e){try{const n=await p4(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await tg(t.firebaseDependencies,r),n}catch(n){throw n}}async function tx(t,e){const r={token:await f4(t,e),createTime:Date.now(),subscriptionOptions:e};return await tg(t,r),r.token}async function x4(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:i4(e)})}function _4(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nx(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return w4(e,t),b4(e,t),E4(e,t),e}function w4(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function b4(t,e){e.data&&(t.data=e.data)}function E4(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const c=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;c&&(t.fcmOptions.link=c);const u=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;u&&(t.fcmOptions.analyticsLabel=u)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T4(t){return typeof t=="object"&&!!t&&AT in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(t){if(!t||!t.options)throw bh("App Configuration Object");if(!t.name)throw bh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw bh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function bh(t){return xt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I4{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=N4(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function S4(t){try{t.swRegistration=await navigator.serviceWorker.register(ZD,{scope:e4}),t.swRegistration.update().catch(()=>{})}catch(e){throw xt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function C4(t,e){if(!e&&!t.swRegistration&&await S4(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw xt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A4(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=CT)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RT(t,e){if(!navigator)throw xt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw xt.create("permission-blocked");return await A4(t,e==null?void 0:e.vapidKey),await C4(t,e==null?void 0:e.serviceWorkerRegistration),y4(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k4(t,e,n){const r=P4(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[AT],message_name:n[n4],message_time:n[r4],message_device_time:Math.floor(Date.now()/1e3)})}function P4(t){switch(t){case Da.NOTIFICATION_CLICKED:return"notification_open";case Da.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function j4(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Da.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(nx(n)):t.onMessageHandler.next(nx(n)));const r=n.data;T4(r)&&r[s4]==="1"&&await k4(t,n.messageType,r)}const rx="@firebase/messaging",sx="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R4=t=>{const e=new I4(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>j4(e,n)),e},O4=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>RT(e,r)}};function D4(){bn(new cn("messaging",R4,"PUBLIC")),bn(new cn("messaging-internal",O4,"PRIVATE")),zt(rx,sx),zt(rx,sx,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function L4(){try{await Jw()}catch{return!1}return typeof window<"u"&&Xw()&&tC()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M4(t,e){if(!navigator)throw xt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V4(t=Pu()){return L4().then(e=>{if(!e)throw xt.create("unsupported-browser")},e=>{throw xt.create("indexed-db-unsupported")}),zs(Ne(t),"messaging").getImmediate()}async function U4(t,e){return t=Ne(t),RT(t,e)}function F4(t,e){return t=Ne(t),M4(t,e)}D4();const ds={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:ds.apiKey?"Set":"Missing",authDomain:ds.authDomain?"Set":"Missing",projectId:ds.projectId?"Set":"Missing",storageBucket:ds.storageBucket?"Set":"Missing",messagingSenderId:ds.messagingSenderId?"Set":"Missing",appId:ds.appId?"Set":"Missing"});const sg=tb(ds),si=jP(sg),Z=wO(sg);uD(sg);const OT=new Kn;OT.setCustomParameters({prompt:"select_account"});class z4{async register(e,n,r){try{const i=(await pk(si,e,n)).user;return await yk(i,{displayName:r}),await Ai(ue(Z,"users",i.uid),{uid:i.uid,email:e,displayName:r,role:"student",purchasedCourses:[],createdAt:ne(),lastLogin:ne(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,n){try{const r=await mk(si,e,n);return await $t(ue(Z,"users",r.user.uid),{lastLogin:ne()}),{success:!0,user:r.user}}catch(r){return console.error("Login error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async loginWithGoogle(){try{const n=(await zk(si,OT)).user;return(await Mt(ue(Z,"users",n.uid))).exists()?await $t(ue(Z,"users",n.uid),{lastLogin:ne()}):await Ai(ue(Z,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,role:"student",purchasedCourses:[],createdAt:ne(),lastLogin:ne(),progress:{}}),{success:!0,user:n}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await wk(si),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await fk(si,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(n){return console.error("Password reset error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async getUserData(e){try{const n=await Mt(ue(Z,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(n){return console.error("Get user data error:",n),{success:!1,error:n.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const as=new z4,$4=void 0;class B4{constructor(){this.messaging=null}async initialize(){try{return this.messaging=V4(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const n=await U4(this.messaging,{vapidKey:$4});return n?(console.log(" FCM Token:",n),e&&await $t(ue(Z,"users",e),{fcmTokens:gc(n),lastTokenUpdate:new Date}),n):(console.log(" Impossible de rcuprer le token"),null)}catch(n){return console.error(" Erreur rcupration token:",n),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const r=await this.getDeviceToken(e);return r?{success:!0,token:r}:{success:!1,error:"Impossible de rcuprer le token"}}catch(n){return console.error(" Erreur souscription:",n),{success:!1,error:n.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}F4(this.messaging,n=>{console.log(" Message reu (foreground):",n),n.notification&&new Notification(n.notification.title,{body:n.notification.body,icon:"/logo.png"}),e&&e(n)})}}const yc=new B4,DT=j.createContext({}),qt=()=>{const t=j.useContext(DT);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},q4=({children:t})=>{const[e,n]=j.useState(null),[r,s]=j.useState(null),[i,o]=j.useState(!0),[c,u]=j.useState(null),d=async y=>{try{const T=await as.getUserData(y);if(T.success)return s(T.data),console.log("Loaded userProfile from Firestore:",T.data),T.data}catch(T){console.error("Error loading user profile:",T)}return null};j.useEffect(()=>_k(si,async T=>{if(n(T),console.log("Auth state changed - uid:",(T==null?void 0:T.uid)||null),T){const D=await d(T.uid);console.log("After loadUserProfile - userProfile:",D),(D==null?void 0:D.role)!=="admin"?(await yc.initialize(),(await yc.subscribeToNotifications(T.uid)).success&&console.log(" Notifications actives"),yc.onMessageReceived(C=>{console.log(" Nouvelle notification:",C)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(y,T,D)=>{u(null);const M=await as.register(y,T,D);return M.success||u(M.error),M},p=async(y,T)=>{u(null);const D=await as.login(y,T);return D.success||u(D.error),D},m=async()=>{u(null);const y=await as.loginWithGoogle();return y.success||u(y.error),y},_=async()=>{u(null);const y=await as.logout();return y.success||u(y.error),y},I=async y=>{u(null);const T=await as.resetPassword(y);return T.success||u(T.error),T},b=async y=>{u(null);const T=await as.updateUserProfile(y);return T.success?await d(e.uid):u(T.error),T},N=()=>(r==null?void 0:r.role)==="admin",x={currentUser:e,userProfile:r,loading:i,error:c,register:f,login:p,loginWithGoogle:m,logout:_,resetPassword:I,updateProfile:b,isAdmin:N,hasAccessToCourse:y=>{var T;return((T=r==null?void 0:r.purchasedCourses)==null?void 0:T.includes(y))||N()},setError:u};return a.jsx(DT.Provider,{value:x,children:!i&&t})};function Js({children:t,adminOnly:e=!1}){const{currentUser:n,userProfile:r,loading:s}=qt();return s?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!n,"userProfile:",r),n?e&&(r==null?void 0:r.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",r==null?void 0:r.role),a.jsx(wf,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),a.jsx(wf,{to:"/login",replace:!0})))}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var H4={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W4=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),K=(t,e)=>{const n=j.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:c="",children:u,...d},f)=>j.createElement("svg",{ref:f,...H4,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${W4(t)}`,c].join(" "),...d},[...e.map(([p,m])=>j.createElement(p,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ig=K("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K4=K("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qi=K("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ia=K("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LT=K("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G4=K("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q4=K("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=K("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ki=K("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Y4=K("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X4=K("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vt=K("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vc=K("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const og=K("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ix=K("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MT=K("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J4=K("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yi=K("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pi=K("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z4=K("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eL=K("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tL=K("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nL=K("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rL=K("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sL=K("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iL=K("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oL=K("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ag=K("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xi=K("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aL=K("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ma=K("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lL=K("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cL=K("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qf=K("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uu=K("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yf=K("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=K("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uL=K("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sl=K("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=K("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dL=K("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=K("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lg=K("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=K("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Va=K("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ox=K("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FT=K("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cg=K("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nd=K("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ax=K("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zT=K("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ji=K("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function hL(){var b,N;const[t,e]=j.useState({email:"",password:""}),[n,r]=j.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:c,userProfile:u}=qt(),d=Bt(),p=((N=(b=Us().state)==null?void 0:b.from)==null?void 0:N.pathname)||"/",m=async v=>{v.preventDefault(),r(!0);const x=await s(t.email,t.password);x.success&&setTimeout(()=>{if(x.user){const y=setInterval(()=>{u&&(clearInterval(y),u.role==="admin"?d("/admin",{replace:!0}):d(p,{replace:!0}))},100);setTimeout(()=>{clearInterval(y),d(p,{replace:!0})},3e3)}else d(p,{replace:!0})},500),r(!1)},_=async()=>{r(!0);const v=await i();v.success&&setTimeout(()=>{if(v.user){const x=setInterval(()=>{u&&(clearInterval(x),u.role==="admin"?d("/admin",{replace:!0}):d(p,{replace:!0}))},100);setTimeout(()=>{clearInterval(x),d(p,{replace:!0})},3e3)}else d(p,{replace:!0})},500),r(!1)},I=v=>{e({...t,[v.target.name]:v.target.value}),o&&c(null)};return a.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),a.jsxs("div",{className:"relative w-full max-w-md",children:[a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(ge,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:a.jsx(tt,{className:"w-8 h-8 text-white"})})}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),a.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[a.jsx(lg,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&a.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[a.jsx(ig,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-red-700 text-sm",children:o})]}),a.jsxs("button",{onClick:_,disabled:n,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[a.jsx(MT,{className:"w-5 h-5 group-hover:rotate-12 transition"}),a.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),a.jsxs("form",{onSubmit:m,className:"space-y-5",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),a.jsx("input",{type:"email",name:"email",value:t.email,onChange:I,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),a.jsxs("div",{className:"group",children:[a.jsxs("div",{className:"flex justify-between items-center mb-2",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),a.jsx(ge,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),a.jsx("input",{type:"password",name:"password",value:t.password,onChange:I,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),a.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:n?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),a.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",a.jsx(ge,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function fL(){const[t,e]=j.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=j.useState({}),[s,i]=j.useState(!1),{register:o,loginWithGoogle:c}=qt(),u=Bt(),d=()=>{const b={};return t.displayName.trim()||(b.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(b.email="Email invalide"):b.email="L'email est requis",t.password?t.password.length<6&&(b.password="Minimum 6 caractres"):b.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(b.confirmPassword="Les mots de passe ne correspondent pas"),r(b),Object.keys(b).length===0},f=async b=>{if(b.preventDefault(),!d())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&u("/"),i(!1)},p=async()=>{i(!0),(await c()).success&&u("/"),i(!1)},m=b=>{e({...t,[b.target.name]:b.target.value}),n[b.target.name]&&r({...n,[b.target.name]:""})},I=(()=>{const b=t.password;if(!b)return{strength:0,label:"",color:""};let N=0;return b.length>=6&&N++,b.length>=8&&N++,/[a-z]/.test(b)&&/[A-Z]/.test(b)&&N++,/\d/.test(b)&&N++,/[^a-zA-Z\d]/.test(b)&&N++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][N-1]||{strength:0,label:"",color:""}})();return a.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[a.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[a.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),a.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),a.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),a.jsxs("div",{className:"relative w-full max-w-md",children:[a.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx(ge,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:a.jsx(tt,{className:"w-8 h-8 text-white"})})}),a.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),a.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[a.jsx(lg,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),a.jsxs("button",{onClick:p,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[a.jsx(MT,{className:"w-5 h-5 group-hover:rotate-12 transition"}),a.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),a.jsxs("div",{className:"relative mb-6",children:[a.jsx("div",{className:"absolute inset-0 flex items-center",children:a.jsx("div",{className:"w-full border-t border-gray-300"})}),a.jsx("div",{className:"relative flex justify-center text-sm",children:a.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),a.jsxs("form",{onSubmit:f,className:"space-y-5",children:[a.jsxs("div",{className:"group",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),a.jsxs("div",{className:"relative",children:[a.jsx(cg,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),a.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),n.displayName&&a.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[a.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.displayName]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),a.jsx("input",{type:"email",name:"email",value:t.email,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),n.email&&a.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[a.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.email]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),a.jsx("input",{type:"password",name:"password",value:t.password,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!n.password&&a.jsx("div",{className:"mt-2",children:a.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[a.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:a.jsx("div",{className:`h-full transition-all duration-300 ${I.color}`,style:{width:`${I.strength/5*100}%`}})}),a.jsx("span",{className:"text-xs font-medium text-gray-600",children:I.label})]})}),n.password&&a.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[a.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.password]})]}),a.jsxs("div",{className:"group",children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),a.jsxs("div",{className:"relative",children:[a.jsx(Xi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),a.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&a.jsx(vt,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),n.confirmPassword&&a.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[a.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.confirmPassword]})]}),a.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?a.jsxs("span",{className:"flex items-center justify-center gap-2",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),a.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",a.jsx(ge,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),a.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function pL(){const[t,e]=j.useState(""),[n,r]=j.useState(!1),[s,i]=j.useState(!1),[o,c]=j.useState(""),{resetPassword:u}=qt(),d=async f=>{if(f.preventDefault(),c(""),!t.trim()){c("Veuillez entrer votre email");return}r(!0);const p=await u(t);p.success?i(!0):c(p.error),r(!1)};return s?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[a.jsx(vt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",a.jsx("strong",{children:t})]}),a.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),a.jsxs(ge,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[a.jsx(Qi,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[a.jsxs(ge,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[a.jsx(Qi,{className:"w-4 h-4"}),"Retour"]}),a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&a.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:a.jsx("p",{className:"text-red-700 text-sm",children:o})}),a.jsxs("form",{onSubmit:d,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Ma,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),a.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),a.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:n?"Envoi en cours...":"Envoyer le lien"})]})]})})}const $T="/admin",mL="/dashboard";class gL{constructor(){this.cloudName="dbsemu1xo",this.uploadPreset="course_thumbnails",console.log(" Cloudinary Config:",{cloudName:this.cloudName,uploadPreset:this.uploadPreset}),this.cloudName||console.error(" VITE_CLOUDINARY_CLOUD_NAME is not set! Check your .env file")}async uploadImage(e,n="courses"){var r;try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.uploadPreset),s.append("folder",n);const i=await fetch(`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,{method:"POST",body:s});if(!i.ok){const c=await i.json();throw new Error(((r=c.error)==null?void 0:r.message)||"Upload failed")}const o=await i.json();return console.log(" Image uploaded to Cloudinary:",o.secure_url),{success:!0,url:o.secure_url,publicId:o.public_id}}catch(s){return console.error(" Cloudinary upload error:",s),{success:!1,error:s.message}}}async uploadVideo(e,n="courses/videos",r){try{if(!e.type.startsWith("video/"))throw new Error("File must be a video");const s=new FormData;s.append("file",e),s.append("upload_preset","course_videos"),s.append("folder",n),s.append("resource_type","video"),console.log(" Uploading video to Cloudinary...");const i=await new Promise((o,c)=>{const u=new XMLHttpRequest;u.upload.addEventListener("progress",d=>{if(d.lengthComputable&&r){const f=Math.round(d.loaded/d.total*100);r(f)}}),u.addEventListener("load",()=>{u.status===200?o(JSON.parse(u.responseText)):c(new Error(u.statusText))}),u.addEventListener("error",()=>c(new Error("Upload failed"))),u.open("POST",`https://api.cloudinary.com/v1_1/${this.cloudName}/video/upload`),u.send(s)});return console.log(" Video uploaded to Cloudinary:",i.secure_url),{success:!0,url:i.secure_url,publicId:i.public_id,duration:i.duration,format:i.format}}catch(s){return console.error(" Cloudinary video upload error:",s),{success:!1,error:s.message}}}async deleteImage(e){try{return console.log(" Image deletion not implemented (requires server-side)"),{success:!0}}catch(n){return console.error(" Cloudinary delete error:",n),{success:!1,error:n.message}}}getOptimizedUrl(e,n={}){const{width:r=800,height:s=600,quality:i="auto",format:o="auto"}=n;if(!e||!e.includes("cloudinary.com"))return e;const c=`w_${r},h_${s},c_fill,q_${i},f_${o}`;return e.replace("/upload/",`/upload/${c}/`)}}const BT=new gL;class yL{async createCourse(e,n){try{let r=null;n&&(r=await this.uploadThumbnail(n));const s={...e,thumbnail:r,enrolledCount:0,status:"draft",createdAt:ne(),updatedAt:ne()},i=await js(yt(Z,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(r){return console.error(" Erreur cration cours:",r),{success:!1,error:r.message}}}async updateCourse(e,n,r){try{const s=ue(Z,"courses",e);let i={...n};return r&&(i.thumbnail=await this.uploadThumbnail(r)),i.updatedAt=ne(),await $t(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const n=ue(Z,"courses",e);return await $t(n,{status:"archived",archivedAt:ne()}),console.log(" Cours archiv:",e),{success:!0}}catch(n){return console.error(" Erreur suppression cours:",n),{success:!1,error:n.message}}}async getCourseById(e){try{const n=ue(Z,"courses",e),r=await Mt(n);return r.exists()?{success:!0,course:{id:r.id,...r.data()}}:{success:!1,error:"Cours introuvable"}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message}}}async getCourses(e={}){try{let n=yt(Z,"courses");const r=[];return e.category&&r.push(Dt("category","==",e.category)),e.status?r.push(Dt("status","==",e.status)):r.push(Dt("status","!=","archived")),e.level&&r.push(Dt("level","==",e.level)),r.push(ws("createdAt","desc")),e.limit&&r.push(jO(e.limit)),e.startAfter&&r.push(RO(e.startAfter)),n=Wr(n,...r),{success:!0,courses:(await sr(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message,courses:[]}}}async publishCourse(e){try{const n=ue(Z,"courses",e);return await $t(n,{status:"published",publishedAt:ne(),updatedAt:ne()}),console.log(" Cours publi:",e),{success:!0}}catch(n){return console.error(" Erreur publication cours:",n),{success:!1,error:n.message}}}async uploadThumbnail(e){try{const n=await BT.uploadImage(e,"courses/thumbnails");if(!n.success)throw new Error(n.error||"Upload failed");return console.log(" Thumbnail uploaded:",n.url),n.url}catch(n){throw console.error(" Erreur upload thumbnail:",n),n}}async duplicateCourse(e){try{const{success:n,course:r}=await this.getCourseById(e);if(!n)return{success:!1,error:"Cours introuvable"};const s={...r,title:`${r.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(n){return console.error(" Erreur duplication cours:",n),{success:!1,error:n.message}}}}const Yt=new yL;function vL(){const{currentUser:t,userProfile:e}=qt(),n=Bt(),[r,s]=j.useState([]),[i,o]=j.useState({totalCourses:0,totalStudents:0,totalHours:0}),[c,u]=j.useState(!0);j.useEffect(()=>{d()},[]);const d=async()=>{try{const m=await Yt.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});m.success&&(s(m.courses),o({totalCourses:m.total||m.courses.length,totalStudents:m.courses.reduce((_,I)=>_+(I.enrolledCount||0),0),totalHours:m.courses.reduce((_,I)=>_+(I.duration||0),0)}))}catch(m){console.error("Error loading home data:",m)}finally{u(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],p=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return a.jsxs("div",{className:"min-h-screen bg-white",children:[a.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"flex justify-between items-center h-16",children:[a.jsxs(ge,{to:"/",className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:a.jsx(tt,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),a.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[a.jsx(ge,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),a.jsx(ge,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),a.jsx("div",{className:"flex items-center gap-3",children:t?a.jsxs(a.Fragment,{children:[a.jsx(ge,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),a.jsx(ge,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&a.jsx("button",{onClick:()=>n($T),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):a.jsxs(a.Fragment,{children:[a.jsx(ge,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),a.jsx(ge,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),a.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[a.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:a.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[a.jsx(lg,{className:"w-4 h-4"}),a.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),a.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",a.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),a.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),a.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[a.jsxs(ge,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",a.jsx(ia,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&a.jsxs(ge,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[a.jsx(Yf,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),a.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),a.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),a.jsxs("div",{className:"relative hidden md:block",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),a.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[a.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:a.jsx(Yf,{className:"w-20 h-20 text-gray-400"})}),a.jsxs("div",{className:"mt-4 space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),a.jsx("section",{className:"py-20 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),a.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),c?a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(m=>a.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[a.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),a.jsxs("div",{className:"p-6 space-y-3",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},m))}):r.length>0?a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(m=>a.jsxs(ge,{to:`/courses/${m.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[a.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[m.thumbnail?a.jsx("img",{src:m.thumbnail,alt:m.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(tt,{className:"w-16 h-16 text-gray-300"})}),a.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:m.price>0?`${m.price} DT`:"Gratuit"})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:m.category||"Gnral"}),a.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:m.level||"Dbutant"})]}),a.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:m.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.shortDescription||m.description}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(nd,{className:"w-4 h-4"}),a.jsxs("span",{children:[m.enrolledCount||0," tudiants"]})]}),m.duration&&a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx(Yi,{className:"w-4 h-4"}),a.jsxs("span",{children:[m.duration,"h"]})]})]})]})]},m.id))}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(tt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),a.jsx("div",{className:"text-center mt-12",children:a.jsxs(ge,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",a.jsx(ia,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),a.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(m=>a.jsxs(ge,{to:`/courses?category=${m.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[a.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${m.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:m.icon}),a.jsx("h3",{className:"font-semibold text-gray-900",children:m.name})]},m.name))})]})}),a.jsx("section",{className:"py-20 bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),a.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),a.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),a.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),a.jsx("div",{className:"relative",children:a.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[a.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),a.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),a.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),a.jsx("section",{className:"py-20 bg-white",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"text-center mb-12",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),a.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),a.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:p.map((m,_)=>a.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[a.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(m.rating)].map((I,b)=>a.jsx(Xf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},b))}),a.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',m.quote,'"']}),a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("img",{src:m.photo,alt:m.name,className:"w-12 h-12 rounded-full"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-semibold text-gray-900",children:m.name}),a.jsx("div",{className:"text-sm text-gray-600",children:m.role})]})]})]},_))})]})}),a.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:a.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[a.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),a.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),a.jsxs(ge,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",a.jsx(ia,{className:"w-5 h-5"})]})]})}),a.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:a.jsx(tt,{className:"w-6 h-6 text-white"})}),a.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),a.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx(ge,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),a.jsx("li",{children:a.jsx(ge,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),a.jsx("li",{children:a.jsx(ge,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),a.jsxs("ul",{className:"space-y-2 text-sm",children:[a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),a.jsx("li",{children:a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),a.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[a.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),a.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),a.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),a.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function xL(){var P;const{currentUser:t,userProfile:e,logout:n}=qt(),r=Bt(),[s,i]=j.useState(!1),[o,c]=j.useState("personal"),[u,d]=j.useState(!1),[f,p]=j.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[m,_]=j.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[I,b]=j.useState(null),[N,v]=j.useState(!1),[x,y]=j.useState(null),T=async()=>{i(!0),await n(),r("/login")},D=async()=>{try{y(null),await $t(ue(Z,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),y({type:"success",text:"Profil mis  jour avec succs!"}),d(!1),setTimeout(()=>y(null),3e3)}catch(S){y({type:"error",text:"Erreur: "+S.message})}},M=async()=>{if(!t)return;v(!0),b(null);const S=await yc.subscribeToNotifications(t.uid);S.success?(_("enabled"),b({type:"success",text:"Notifications actives"})):b({type:"error",text:S.error||"Impossible d'activer"}),v(!1),setTimeout(()=>b(null),3e3)},C=[{id:"personal",name:"Informations",icon:J4},{id:"security",name:"Scurit",icon:Xi},{id:"progress",name:"Progression",icon:ox}],E=[{label:"Cours suivis",value:((P=e==null?void 0:e.purchasedCourses)==null?void 0:P.length)||0,icon:tt,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:Yi,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:LT,color:"text-purple-600 bg-purple-100"}];return a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[a.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),a.jsx("div",{className:"px-8 pb-8",children:a.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?a.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):a.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:a.jsx(cg,{className:"w-16 h-16 text-white"})})}),a.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:a.jsx(X4,{className:"w-5 h-5 text-gray-600"})})]}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),a.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[a.jsx(UT,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),a.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[a.jsx(Ma,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),a.jsxs("button",{onClick:T,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[a.jsx(aL,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:E.map((S,A)=>a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[a.jsx("div",{className:"flex items-center justify-between mb-4",children:a.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${S.color}`,children:a.jsx(S.icon,{className:"w-6 h-6"})})}),a.jsx("p",{className:"text-gray-600 text-sm mb-1",children:S.label}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:S.value})]},A))}),a.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:a.jsx("nav",{className:"flex gap-8",children:C.map(S=>{const A=S.icon;return a.jsxs("button",{onClick:()=>c(S.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===S.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[a.jsx(A,{className:"w-5 h-5"}),S.name]},S.id)})})}),a.jsxs("div",{className:"p-8",children:[o==="personal"&&a.jsxs("div",{className:"space-y-6",children:[x&&a.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${x.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${x.type==="success"?"bg-green-500":"bg-red-500"}`}),x.text]}),a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),u?a.jsxs("div",{className:"flex gap-2",children:[a.jsxs("button",{onClick:D,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[a.jsx(sl,{className:"w-4 h-4"}),"Enregistrer"]}),a.jsxs("button",{onClick:()=>d(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[a.jsx(Ji,{className:"w-4 h-4"}),"Annuler"]})]}):a.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[a.jsx(Qf,{className:"w-4 h-4"}),"Modifier"]})]}),a.jsxs("div",{className:"grid gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),u?a.jsx("input",{type:"text",value:f.displayName,onChange:S=>p({...f,displayName:S.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):a.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),a.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[a.jsx(Ma,{className:"w-5 h-5 text-gray-400"}),a.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),a.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),u?a.jsx("input",{type:"tel",value:f.phone,onChange:S=>p({...f,phone:S.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):a.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),u?a.jsx("textarea",{value:f.bio,onChange:S=>p({...f,bio:S.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):a.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),a.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:a.jsx(Q4,{className:"w-6 h-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),a.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),a.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",a.jsx("span",{className:m==="enabled"?"text-green-600":"text-gray-500",children:m==="enabled"?"Actives ":"Dsactives"})]}),I&&a.jsx("p",{className:`text-sm mt-2 ${I.type==="success"?"text-green-600":"text-red-600"}`,children:I.text})]})]}),a.jsx("button",{onClick:M,disabled:N||m==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:m==="enabled"?"Actives":N?"Activation...":"Activer"})]})}),a.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:a.jsx(Xi,{className:"w-6 h-6 text-gray-600"})}),a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),a.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ox,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),a.jsxs("button",{onClick:()=>r("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[a.jsx(tt,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const _L="https://sandbox.paymee.tn/api/v2",wL="73af59aae675d845db28616e3e9304f2473d7090",bL="https://plateforme-educative.onrender.com";function EL(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),n=new Set(["1","true","yes","paid","success","ok","completed"]),r=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return n.has(e)?"completed":r.has(e)?"pending":s.has(e)?"failed":"unknown"}const TL=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class NL{async initiatePayment(e,n,r,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:n,amount:r});let c;try{c=TL()}catch(b){return console.error(" HTTPS check failed:",b.message),{success:!1,error:b.message}}const u=await js(yt(Z,"payments"),{userId:s.uid,courseId:e,courseTitle:n,amount:r,currency:"TND",status:"pending",createdAt:ne(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",u.id);const d=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let p=s.phone||"12345678";p=p.replace(/\D/g,""),p.length!==8&&(p="12345678");const m={amount:parseFloat(r),note:`Cours ${n}`,first_name:d,last_name:f,email:s.email,phone:p,return_url:`${c}/payment/success?payment_id=${u.id}`,cancel_url:`${c}/payment/cancel?payment_id=${u.id}`,webhook_url:`${bL}/paymee-webhook`,order_id:u.id};console.log(" Sending to Paymee:",m);const _=await fetch(`${_L}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${wL}`},body:JSON.stringify(m)});console.log(" Response status:",_.status);const I=await _.json();if(console.log(" Paymee response:",I),!I.status){if(console.error(" Paymee error:",I),I.errors&&Array.isArray(I.errors)){const b=I.errors.map(N=>typeof N=="object"?Object.entries(N).map(([v,x])=>`${v}: ${x}`).join(", "):N).join(" | ");throw new Error(`Erreur Paymee: ${b}`)}throw new Error(I.message||"Erreur initialisation paiement")}return await $t(ue(Z,"payments",u.id),{paymeeToken:I.data.token,paymentUrl:I.data.payment_url,updatedAt:ne()}),console.log(" Payment ready:",I.data.payment_url),{success:!0,paymentId:u.id,paymentUrl:I.data.payment_url,token:I.data.token}}catch(c){return console.error(" Payment error:",c),{success:!1,error:c.message}}}async verifyPayment(e){try{const n=await Mt(ue(Z,"payments",e));if(!n.exists())return{success:!1,error:"Paiement introuvable"};const r=n.data();return{success:!0,status:EL(r.status),rawStatus:r.status,data:r}}catch(n){return console.error("Verification error:",n),{success:!1,error:n.message}}}}const qT=new NL;function HT({course:t}){var u;const{currentUser:e,userProfile:n}=qt(),[r,s]=j.useState(!1),[i,o]=j.useState(null),c=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=n==null?void 0:n.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const d=await qT.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(n==null?void 0:n.displayName)||e.displayName,phone:(n==null?void 0:n.phone)||"00000000"});d.success?window.location.href=d.paymentUrl:(o(d.error),s(!1))};return(u=n==null?void 0:n.purchasedCourses)!=null&&u.includes(t.id)?a.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?a.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):a.jsxs("div",{children:[i&&a.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),a.jsx("button",{onClick:c,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?a.jsxs(a.Fragment,{children:[a.jsx(ag,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):a.jsxs(a.Fragment,{children:[a.jsx(eL,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),a.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function IL(){const[t,e]=j.useState([]),[n,r]=j.useState(!0);j.useEffect(()=>{s()},[]);const s=async()=>{r(!0);const i=await Yt.getCourses({status:"published"});i.success&&e(i.courses),r(!1)};return n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?a.jsxs("div",{className:"col-span-full text-center py-12",children:[a.jsx(tt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun cours disponible"}),a.jsx("p",{className:"text-gray-600",children:"Revenez bientt pour dcouvrir de nouveaux cours!"})]}):t.map(i=>a.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[a.jsx("img",{src:i.thumbnail||"/assets/images/default-course.png",alt:i.title,className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-100 px-2 py-1 rounded",children:i.category||"General"}),i.price===0&&a.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),a.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[a.jsx(nd,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{children:[i.enrolledCount||0," tudiants"]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"By Admin"}),a.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.price===0?"Gratuit":`${i.price} TND`})]}),a.jsx(HT,{course:i}),a.jsx(ge,{to:`/course/${i.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition font-medium",children:"Voir les dtails"})]})]})]},i.id))})})]})}function SL(){var d;const{id:t}=em(),e=Bt(),{userProfile:n}=qt(),[r,s]=j.useState(null),[i,o]=j.useState(!0);j.useEffect(()=>{c()},[t]);const c=async()=>{try{const f=await Mt(ue(Z,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},u=((d=n==null?void 0:n.purchasedCourses)==null?void 0:d.includes(t))||(r==null?void 0:r.isFree)||(n==null?void 0:n.role)==="admin";return i?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx(ag,{className:"w-8 h-8 animate-spin text-green-500"})}):r?a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsxs(ge,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[a.jsx(Qi,{className:"w-5 h-5"}),"Retour aux cours"]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[a.jsxs("div",{className:"lg:col-span-2",children:[a.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:a.jsx("img",{src:r.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:r.title,className:"w-full h-64 object-cover"})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:r.category}),a.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:r.level}),u&&a.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),a.jsx("p",{className:"text-gray-600 text-lg mb-6",children:r.description}),a.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Yi,{className:"w-5 h-5"}),a.jsx("span",{children:r.duration})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(tt,{className:"w-5 h-5"}),a.jsxs("span",{children:[r.totalLessons," leons"]})]}),a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(nd,{className:"w-5 h-5"}),a.jsxs("span",{children:[r.enrolledCount," tudiants"]})]}),r.rating>0&&a.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[a.jsx(Xf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),a.jsx("span",{children:r.rating.toFixed(1)})]})]}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),a.jsxs("ul",{className:"space-y-3",children:[a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(vt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(vt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),a.jsxs("li",{className:"flex items-start gap-3",children:[a.jsx(vt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),a.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:r.isFree?"Gratuit":`${r.price} TND`}),!r.isFree&&a.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),u?a.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[a.jsx(uu,{className:"w-5 h-5"}),"Commencer le cours"]}):a.jsx("div",{className:"mb-4",children:a.jsx(HT,{course:r})}),a.jsxs("div",{className:"border-t pt-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),a.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(uu,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Vidos  la demande"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(tt,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Ressources tlchargeables"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(vt,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Accs illimit"})]}),a.jsxs("li",{className:"flex items-center gap-3",children:[a.jsx(Xf,{className:"w-4 h-4 text-green-500"}),a.jsx("span",{children:"Certificat de russite"})]})]})]}),r.instructor&&a.jsxs("div",{className:"border-t pt-6 mt-6",children:[a.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),a.jsx("p",{className:"text-gray-600",children:r.instructor})]})]})})]})})]}):null}class CL{async createModule(e,n){try{const r={courseId:e,...n,order:n.order||0,createdAt:ne()};return{success:!0,id:(await js(yt(Z,"modules"),r)).id}}catch(r){return console.error("Error creating module:",r),{success:!1,error:r.message}}}async createLesson(e,n){try{const r={moduleId:e,...n,order:n.order||0,createdAt:ne()};return{success:!0,id:(await js(yt(Z,"lessons"),r)).id}}catch(r){return console.error("Error creating lesson:",r),{success:!1,error:r.message}}}async getModulesByCourse(e){try{const n=Wr(yt(Z,"modules"),Dt("courseId","==",e),ws("order","asc"));return{success:!0,modules:(await sr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching modules:",n),{success:!1,error:n.message,modules:[]}}}async getLessonsByModule(e){try{const n=Wr(yt(Z,"lessons"),Dt("moduleId","==",e),ws("order","asc"));return{success:!0,lessons:(await sr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching lessons:",n),{success:!1,error:n.message,lessons:[]}}}async getLessonById(e){try{const n=ue(Z,"lessons",e),r=await Mt(n);return r.exists()?{success:!0,lesson:{id:r.id,...r.data()}}:{success:!1,error:"Leon introuvable"}}catch(n){return console.error("Error fetching lesson:",n),{success:!1,error:n.message}}}}const du=new CL;class AL{async markLessonComplete(e,n,r){try{const s=ue(Z,"progress",`${e}_${n}`);return(await Mt(s)).exists()?await $t(s,{completedLessons:gc(r),lastAccessed:ne(),updatedAt:ne()}):await Ai(s,{userId:e,courseId:n,completedLessons:[r],startedAt:ne(),lastAccessed:ne(),updatedAt:ne()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,n){try{const r=ue(Z,"progress",`${e}_${n}`),s=await Mt(r);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(r){return console.error("Error fetching progress:",r),{success:!1,error:r.message}}}calculateProgressPercentage(e,n){return n===0?0:Math.round(e/n*100)}async markQuizCompleted(e,n,r,s){try{const i=ue(Z,"progress",`${e}_${n}`),o=await Mt(i),c=o.exists()?o.data().quizScores||{}:{};return(!c[r]||s>c[r])&&(c[r]=s),o.exists()?await $t(i,{completedQuizzes:gc(r),quizScores:c,lastAccessed:ne(),updatedAt:ne()}):await Ai(i,{userId:e,courseId:n,completedLessons:[],completedQuizzes:[r],completedExercises:[],quizScores:c,startedAt:ne(),lastAccessed:ne(),updatedAt:ne()}),console.log(" Quiz marked complete:",{quizId:r,score:s}),{success:!0}}catch(i){return console.error(" Error marking quiz complete:",i),{success:!1,error:i.message}}}async markExerciseCompleted(e,n,r){try{const s=ue(Z,"progress",`${e}_${n}`);return(await Mt(s)).exists()?await $t(s,{completedExercises:gc(r),lastAccessed:ne(),updatedAt:ne()}):await Ai(s,{userId:e,courseId:n,completedLessons:[],completedQuizzes:[],completedExercises:[r],quizScores:{},startedAt:ne(),lastAccessed:ne(),updatedAt:ne()}),console.log(" Exercise marked complete:",r),{success:!0}}catch(s){return console.error(" Error marking exercise complete:",s),{success:!1,error:s.message}}}isLessonCompleted(e,n=[]){return n.includes(e)}}const Zn=new AL;class kL{async createQuiz(e){try{const n={...e,createdAt:ne(),updatedAt:ne()},r=await js(yt(Z,"quizzes"),n);return console.log(" Quiz created:",r.id),{success:!0,id:r.id}}catch(n){return console.error(" Error creating quiz:",n),{success:!1,error:n.message}}}async getQuizzesByCourse(e){try{const n=Wr(yt(Z,"quizzes"),Dt("courseId","==",e),ws("order","asc"));return{success:!0,quizzes:(await sr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error(" Error fetching quizzes:",n),{success:!1,error:n.message,quizzes:[]}}}async submitQuizAnswers(e,n,r,s){try{const i=await Mt(ue(Z,"quizzes",n));if(!i.exists())return{success:!1,error:"Quiz not found"};const o=i.data();let c=0;const u=o.questions.map((m,_)=>{const I=s[_],b=I===m.correctAnswer;return b&&c++,{questionId:m.id||_,question:m.question,userAnswer:I,correctAnswer:m.correctAnswer,isCorrect:b,explanation:m.explanation}}),d=Math.round(c/o.questions.length*100),f={userId:e,quizId:n,courseId:r,answers:s,results:u,score:d,correctCount:c,totalQuestions:o.questions.length,completedAt:ne()},p=await js(yt(Z,"quiz-results"),f);return console.log(" Quiz submitted:",p.id,"Score:",d),{success:!0,score:d,results:u,resultId:p.id}}catch(i){return console.error(" Error submitting quiz:",i),{success:!1,error:i.message}}}async getQuizResults(e,n){try{const r=Wr(yt(Z,"quiz-results"),Dt("userId","==",e),Dt("quizId","==",n),ws("completedAt","desc"));return{success:!0,results:(await sr(r)).docs.map(o=>({id:o.id,...o.data()}))}}catch(r){return console.error(" Error fetching quiz results:",r),{success:!1,error:r.message,results:[]}}}async getCourseQuizResults(e,n){try{const r=Wr(yt(Z,"quiz-results"),Dt("userId","==",e),Dt("courseId","==",n),ws("completedAt","desc"));return{success:!0,results:(await sr(r)).docs.map(o=>({id:o.id,...o.data()}))}}catch(r){return console.error(" Error fetching course quiz results:",r),{success:!1,error:r.message,results:[]}}}async updateQuiz(e,n){try{const r=ue(Z,"quizzes",e);return await $t(r,{...n,updatedAt:ne()}),console.log(" Quiz updated:",e),{success:!0}}catch(r){return console.error(" Error updating quiz:",r),{success:!1,error:r.message}}}async deleteQuiz(e){try{return await oT(ue(Z,"quizzes",e)),console.log(" Quiz deleted:",e),{success:!0}}catch(n){return console.error(" Error deleting quiz:",n),{success:!1,error:n.message}}}}const Ds=new kL;class PL{async createExercise(e){try{const n={...e,createdAt:ne(),updatedAt:ne()},r=await js(yt(Z,"exercises"),n);return console.log(" Exercise created:",r.id),{success:!0,id:r.id}}catch(n){return console.error(" Error creating exercise:",n),{success:!1,error:n.message}}}async getExercisesByCourse(e){try{const n=Wr(yt(Z,"exercises"),Dt("courseId","==",e),ws("order","asc"));return{success:!0,exercises:(await sr(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error(" Error fetching exercises:",n),{success:!1,error:n.message,exercises:[]}}}async getExerciseById(e){try{const n=ue(Z,"exercises",e),r=await Mt(n);return r.exists()?{success:!0,exercise:{id:r.id,...r.data()}}:{success:!1,error:"Exercise not found"}}catch(n){return console.error(" Error fetching exercise:",n),{success:!1,error:n.message}}}async updateExercise(e,n){try{const r=ue(Z,"exercises",e);return await $t(r,{...n,updatedAt:ne()}),console.log(" Exercise updated:",e),{success:!0}}catch(r){return console.error(" Error updating exercise:",r),{success:!1,error:r.message}}}async deleteExercise(e){try{return await oT(ue(Z,"exercises",e)),console.log(" Exercise deleted:",e),{success:!0}}catch(n){return console.error(" Error deleting exercise:",n),{success:!1,error:n.message}}}async trackLevelCompletion(e,n,r,s){try{const i=`${e}_${n}`,o=ue(Z,"exercise-progress",i),c=await Mt(o);let u=[];return c.exists()&&(u=c.data().completedLevels||[]),u.includes(s)||(u.push(s),u.sort((d,f)=>d-f)),await Ai(o,{userId:e,exerciseId:n,courseId:r,completedLevels:u,currentLevel:Math.max(...u),lastUpdated:ne()},{merge:!0}),console.log(" Exercise level completed:",{exerciseId:n,level:s}),{success:!0,completedLevels:u}}catch(i){return console.error(" Error tracking exercise progress:",i),{success:!1,error:i.message}}}async getExerciseProgress(e,n){try{const r=`${e}_${n}`,s=ue(Z,"exercise-progress",r),i=await Mt(s);return i.exists()?{success:!0,progress:i.data()}:{success:!0,progress:{completedLevels:[],currentLevel:-1}}}catch(r){return console.error(" Error fetching exercise progress:",r),{success:!1,error:r.message,progress:{completedLevels:[],currentLevel:-1}}}}async getCourseExerciseProgress(e,n){try{const r=Wr(yt(Z,"exercise-progress"),Dt("userId","==",e),Dt("courseId","==",n)),s=await sr(r),i={};return s.docs.forEach(o=>{const c=o.data();i[c.exerciseId]=c}),{success:!0,progress:i}}catch(r){return console.error(" Error fetching course exercise progress:",r),{success:!1,error:r.message,progress:{}}}}}const Ls=new PL,jL="modulepreload",RL=function(t){return"/"+t},lx={},jt=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),c=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(u=>{if(u=RL(u),u in lx)return;lx[u]=!0;const d=u.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":jL,d||(p.as="script"),p.crossOrigin="",p.href=u,c&&p.setAttribute("nonce",c),document.head.appendChild(p),d)return new Promise((m,_)=>{p.addEventListener("load",m),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${u}`)))})}))}function i(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return s.then(o=>{for(const c of o||[])c.status==="rejected"&&i(c.reason);return e().catch(i)})};var OL=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&DL(i,n.attrs),n.text&&(i.text=""+n.text);var o="onload"in i?cx:LL;o(i,r),i.onload||cx(i,r),s.appendChild(i)};function DL(t,e){for(var n in e)t.setAttribute(n,e[n])}function cx(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function LL(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var ML=function(e){return VL(e)&&!UL(e)};function VL(t){return!!t&&typeof t=="object"}function UL(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||$L(t)}var FL=typeof Symbol=="function"&&Symbol.for,zL=FL?Symbol.for("react.element"):60103;function $L(t){return t.$$typeof===zL}function BL(t){return Array.isArray(t)?[]:{}}function Ua(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Zi(BL(t),t,e):t}function qL(t,e,n){return t.concat(e).map(function(r){return Ua(r,n)})}function HL(t,e){if(!e.customMerge)return Zi;var n=e.customMerge(t);return typeof n=="function"?n:Zi}function WL(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function ux(t){return Object.keys(t).concat(WL(t))}function WT(t,e){try{return e in t}catch{return!1}}function KL(t,e){return WT(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function GL(t,e,n){var r={};return n.isMergeableObject(t)&&ux(t).forEach(function(s){r[s]=Ua(t[s],n)}),ux(e).forEach(function(s){KL(t,s)||(WT(t,s)&&n.isMergeableObject(e[s])?r[s]=HL(s,n)(t[s],e[s],n):r[s]=Ua(e[s],n))}),r}function Zi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||qL,n.isMergeableObject=n.isMergeableObject||ML,n.cloneUnlessOtherwiseSpecified=Ua;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):GL(t,e,n):Ua(e,n)}Zi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Zi(r,s,n)},{})};var QL=Zi,KT=QL,YL=Object.create,rd=Object.defineProperty,XL=Object.getOwnPropertyDescriptor,JL=Object.getOwnPropertyNames,ZL=Object.getPrototypeOf,eM=Object.prototype.hasOwnProperty,tM=(t,e)=>{for(var n in e)rd(t,n,{get:e[n],enumerable:!0})},GT=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of JL(e))!eM.call(t,s)&&s!==n&&rd(t,s,{get:()=>e[s],enumerable:!(r=XL(e,s))||r.enumerable});return t},ug=(t,e,n)=>(n=t!=null?YL(ZL(t)):{},GT(!t||!t.__esModule?rd(n,"default",{value:t,enumerable:!0}):n,t)),nM=t=>GT(rd({},"__esModule",{value:!0}),t),QT={};tM(QT,{callPlayer:()=>vM,getConfig:()=>gM,getSDK:()=>mM,isBlobUrl:()=>_M,isMediaStream:()=>xM,lazy:()=>oM,omit:()=>yM,parseEndTime:()=>hM,parseStartTime:()=>dM,queryString:()=>pM,randomString:()=>fM,supportsWebKitPresentationMode:()=>wM});var sd=nM(QT),rM=ug(j),sM=ug(OL),iM=ug(KT);const oM=t=>rM.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),aM=/[?&#](?:start|t)=([0-9hms]+)/,lM=/[?&#]end=([0-9hms]+)/,Jf=/(\d+)(h|m|s)/g,cM=/^\d+$/;function YT(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match(Jf))return uM(r);if(cM.test(r))return parseInt(r)}}function uM(t){let e=0,n=Jf.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=Jf.exec(t)}return e}function dM(t){return YT(t,aM)}function hM(t){return YT(t,lM)}function fM(){return Math.random().toString(36).substr(2,5)}function pM(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function Eh(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const Zs={},mM=function(e,n,r=null,s=()=>!0,i=sM.default){const o=Eh(n);return o&&s(o)?Promise.resolve(o):new Promise((c,u)=>{if(Zs[e]){Zs[e].push({resolve:c,reject:u});return}Zs[e]=[{resolve:c,reject:u}];const d=f=>{Zs[e].forEach(p=>p.resolve(f))};if(r){const f=window[r];window[r]=function(){f&&f(),d(Eh(n))}}i(e,f=>{f?(Zs[e].forEach(p=>p.reject(f)),Zs[e]=null):r||d(Eh(n))})})};function gM(t,e){return(0,iM.default)(e.config,t.config)}function yM(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function vM(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function xM(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function _M(t){return/^blob:/.test(t)}function wM(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var dg=Object.defineProperty,bM=Object.getOwnPropertyDescriptor,EM=Object.getOwnPropertyNames,TM=Object.prototype.hasOwnProperty,NM=(t,e)=>{for(var n in e)dg(t,n,{get:e[n],enumerable:!0})},IM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of EM(e))!TM.call(t,s)&&s!==n&&dg(t,s,{get:()=>e[s],enumerable:!(r=bM(e,s))||r.enumerable});return t},SM=t=>IM(dg({},"__esModule",{value:!0}),t),XT={};NM(XT,{AUDIO_EXTENSIONS:()=>hg,DASH_EXTENSIONS:()=>dN,FLV_EXTENSIONS:()=>hN,HLS_EXTENSIONS:()=>pg,MATCH_URL_DAILYMOTION:()=>aN,MATCH_URL_FACEBOOK:()=>tN,MATCH_URL_FACEBOOK_WATCH:()=>nN,MATCH_URL_KALTURA:()=>uN,MATCH_URL_MIXCLOUD:()=>lN,MATCH_URL_MUX:()=>eN,MATCH_URL_SOUNDCLOUD:()=>JT,MATCH_URL_STREAMABLE:()=>rN,MATCH_URL_TWITCH_CHANNEL:()=>oN,MATCH_URL_TWITCH_VIDEO:()=>iN,MATCH_URL_VIDYARD:()=>cN,MATCH_URL_VIMEO:()=>ZT,MATCH_URL_WISTIA:()=>sN,MATCH_URL_YOUTUBE:()=>Zf,VIDEO_EXTENSIONS:()=>fg,canPlay:()=>AM});var CM=SM(XT),dx=sd;const Zf=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,JT=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,ZT=/vimeo\.com\/(?!progressive_redirect).+/,eN=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,tN=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,nN=/^https?:\/\/fb\.watch\/.+$/,rN=/streamable\.com\/([a-z0-9]+)$/,sN=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,iN=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,oN=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,aN=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,lN=/mixcloud\.com\/([^/]+\/[^/]+)/,cN=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,uN=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,hg=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,fg=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,pg=/\.(m3u8)($|\?)/i,dN=/\.(mpd)($|\?)/i,hN=/\.(flv)($|\?)/i,ep=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&ep(e)||ep(e.src))return!0;return!1}return(0,dx.isMediaStream)(t)||(0,dx.isBlobUrl)(t)?!0:hg.test(t)||fg.test(t)||pg.test(t)||dN.test(t)||hN.test(t)},AM={youtube:t=>t instanceof Array?t.every(e=>Zf.test(e)):Zf.test(t),soundcloud:t=>JT.test(t)&&!hg.test(t),vimeo:t=>ZT.test(t)&&!fg.test(t)&&!pg.test(t),mux:t=>eN.test(t),facebook:t=>tN.test(t)||nN.test(t),streamable:t=>rN.test(t),wistia:t=>sN.test(t),twitch:t=>iN.test(t)||oN.test(t),dailymotion:t=>aN.test(t),mixcloud:t=>lN.test(t),vidyard:t=>cN.test(t),kaltura:t=>uN.test(t),file:ep};var mg=Object.defineProperty,kM=Object.getOwnPropertyDescriptor,PM=Object.getOwnPropertyNames,jM=Object.prototype.hasOwnProperty,RM=(t,e)=>{for(var n in e)mg(t,n,{get:e[n],enumerable:!0})},OM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of PM(e))!jM.call(t,s)&&s!==n&&mg(t,s,{get:()=>e[s],enumerable:!(r=kM(e,s))||r.enumerable});return t},DM=t=>OM(mg({},"__esModule",{value:!0}),t),fN={};RM(fN,{default:()=>MM});var LM=DM(fN),Pt=sd,Tt=CM,MM=[{key:"youtube",name:"YouTube",canPlay:Tt.canPlay.youtube,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./YouTube-DLR8NO4v.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:Tt.canPlay.soundcloud,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./SoundCloud-e_zuA3eW.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:Tt.canPlay.vimeo,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Vimeo-ChI8FMor.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:Tt.canPlay.mux,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Mux-BOBLHQt3.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:Tt.canPlay.facebook,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Facebook-B-w6aMl1.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:Tt.canPlay.streamable,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Streamable-DiRPbGhx.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:Tt.canPlay.wistia,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Wistia-BGw5yzrt.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:Tt.canPlay.twitch,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Twitch-DDCgN6M3.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:Tt.canPlay.dailymotion,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./DailyMotion-BO0Tdm86.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:Tt.canPlay.mixcloud,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Mixcloud-C23j0vSr.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:Tt.canPlay.vidyard,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Vidyard-CrAhp10p.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:Tt.canPlay.kaltura,lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./Kaltura-B4mtpg5_.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:Tt.canPlay.file,canEnablePIP:t=>Tt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,Pt.supportsWebKitPresentationMode)())&&!Tt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,Pt.lazy)(()=>jt(()=>import("./FilePlayer-ERo2y6Qd.js").then(t=>t.F),[]))}],hx=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function VM(t,e){return!!(t===e||hx(t)&&hx(e))}function UM(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!VM(t[n],e[n]))return!1;return!0}function FM(t,e){e===void 0&&(e=UM);var n,r=[],s,i=!1;function o(){for(var c=[],u=0;u<arguments.length;u++)c[u]=arguments[u];return i&&n===this&&e(c,r)||(s=t.apply(this,c),i=!0,n=this,r=c),s}return o}const zM=Object.freeze(Object.defineProperty({__proto__:null,default:FM},Symbol.toStringTag,{value:"Module"})),$M=u1(zM);var BM=typeof Element<"u",qM=typeof Map=="function",HM=typeof Set=="function",WM=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function xc(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!xc(t[r],e[r]))return!1;return!0}var i;if(qM&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!xc(r.value[1],e.get(r.value[0])))return!1;return!0}if(HM&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(WM&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(BM&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!xc(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var pN=function(e,n){try{return xc(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},mN={exports:{}},KM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",GM=KM,QM=GM;function gN(){}function yN(){}yN.resetWarningCache=gN;var YM=function(){function t(r,s,i,o,c,u){if(u!==QM){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yN,resetWarningCache:gN};return n.PropTypes=n,n};mN.exports=YM();var XM=mN.exports,JM=Object.create,id=Object.defineProperty,ZM=Object.getOwnPropertyDescriptor,e5=Object.getOwnPropertyNames,t5=Object.getPrototypeOf,n5=Object.prototype.hasOwnProperty,r5=(t,e)=>{for(var n in e)id(t,n,{get:e[n],enumerable:!0})},vN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of e5(e))!n5.call(t,s)&&s!==n&&id(t,s,{get:()=>e[s],enumerable:!(r=ZM(e,s))||r.enumerable});return t},s5=(t,e,n)=>(n=t!=null?JM(t5(t)):{},vN(!t||!t.__esModule?id(n,"default",{value:t,enumerable:!0}):n,t)),i5=t=>vN(id({},"__esModule",{value:!0}),t),xN={};r5(xN,{defaultProps:()=>l5,propTypes:()=>a5});var _N=i5(xN),o5=s5(XM);const{string:Ye,bool:Nt,number:ei,array:Th,oneOfType:Ro,shape:Wt,object:ht,func:$e,node:fx}=o5.default,a5={url:Ro([Ye,Th,ht]),playing:Nt,loop:Nt,controls:Nt,volume:ei,muted:Nt,playbackRate:ei,width:Ro([Ye,ei]),height:Ro([Ye,ei]),style:ht,progressInterval:ei,playsinline:Nt,pip:Nt,stopOnUnmount:Nt,light:Ro([Nt,Ye,ht]),playIcon:fx,previewTabIndex:ei,previewAriaLabel:Ye,fallback:fx,oEmbedUrl:Ye,wrapper:Ro([Ye,$e,Wt({render:$e.isRequired})]),config:Wt({soundcloud:Wt({options:ht}),youtube:Wt({playerVars:ht,embedOptions:ht,onUnstarted:$e}),facebook:Wt({appId:Ye,version:Ye,playerId:Ye,attributes:ht}),dailymotion:Wt({params:ht}),vimeo:Wt({playerOptions:ht,title:Ye}),mux:Wt({attributes:ht,version:Ye}),file:Wt({attributes:ht,tracks:Th,forceVideo:Nt,forceAudio:Nt,forceHLS:Nt,forceSafariHLS:Nt,forceDisableHls:Nt,forceDASH:Nt,forceFLV:Nt,hlsOptions:ht,hlsVersion:Ye,dashVersion:Ye,flvVersion:Ye}),wistia:Wt({options:ht,playerId:Ye,customControls:Th}),mixcloud:Wt({options:ht}),twitch:Wt({options:ht,playerId:Ye}),vidyard:Wt({options:ht})}),onReady:$e,onStart:$e,onPlay:$e,onPause:$e,onBuffer:$e,onBufferEnd:$e,onEnded:$e,onError:$e,onDuration:$e,onSeek:$e,onPlaybackRateChange:$e,onPlaybackQualityChange:$e,onProgress:$e,onClickPreview:$e,onEnablePIP:$e,onDisablePIP:$e},Xe=()=>{},l5={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Xe},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Xe,onStart:Xe,onPlay:Xe,onPause:Xe,onBuffer:Xe,onBufferEnd:Xe,onEnded:Xe,onError:Xe,onDuration:Xe,onSeek:Xe,onPlaybackRateChange:Xe,onPlaybackQualityChange:Xe,onProgress:Xe,onClickPreview:Xe,onEnablePIP:Xe,onDisablePIP:Xe};var c5=Object.create,il=Object.defineProperty,u5=Object.getOwnPropertyDescriptor,d5=Object.getOwnPropertyNames,h5=Object.getPrototypeOf,f5=Object.prototype.hasOwnProperty,p5=(t,e,n)=>e in t?il(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,m5=(t,e)=>{for(var n in e)il(t,n,{get:e[n],enumerable:!0})},wN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of d5(e))!f5.call(t,s)&&s!==n&&il(t,s,{get:()=>e[s],enumerable:!(r=u5(e,s))||r.enumerable});return t},bN=(t,e,n)=>(n=t!=null?c5(h5(t)):{},wN(!t||!t.__esModule?il(n,"default",{value:t,enumerable:!0}):n,t)),g5=t=>wN(il({},"__esModule",{value:!0}),t),De=(t,e,n)=>(p5(t,typeof e!="symbol"?e+"":e,n),n),EN={};m5(EN,{default:()=>od});var y5=g5(EN),px=bN(j),v5=bN(pN),TN=_N,x5=sd;const _5=5e3;class od extends px.Component{constructor(){super(...arguments),De(this,"mounted",!1),De(this,"isReady",!1),De(this,"isPlaying",!1),De(this,"isLoading",!0),De(this,"loadOnReady",null),De(this,"startOnPlay",!0),De(this,"seekOnPlay",null),De(this,"onDurationCalled",!1),De(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),De(this,"getInternalPlayer",e=>this.player?this.player[e]:null),De(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),De(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),De(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),De(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),De(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),De(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),De(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),De(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:o,pip:c,loop:u,activePlayer:d,disableDeferredLoading:f}=this.props;if(!(0,v5.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!f&&!(0,x5.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&c&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!c&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==u&&this.player.setLoop&&this.player.setLoop(u)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},_5));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?px.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}De(od,"displayName","Player");De(od,"propTypes",TN.propTypes);De(od,"defaultProps",TN.defaultProps);var w5=Object.create,ol=Object.defineProperty,b5=Object.getOwnPropertyDescriptor,E5=Object.getOwnPropertyNames,T5=Object.getPrototypeOf,N5=Object.prototype.hasOwnProperty,I5=(t,e,n)=>e in t?ol(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,S5=(t,e)=>{for(var n in e)ol(t,n,{get:e[n],enumerable:!0})},NN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of E5(e))!N5.call(t,s)&&s!==n&&ol(t,s,{get:()=>e[s],enumerable:!(r=b5(e,s))||r.enumerable});return t},al=(t,e,n)=>(n=t!=null?w5(T5(t)):{},NN(!t||!t.__esModule?ol(n,"default",{value:t,enumerable:!0}):n,t)),C5=t=>NN(ol({},"__esModule",{value:!0}),t),Oe=(t,e,n)=>(I5(t,typeof e!="symbol"?e+"":e,n),n),IN={};S5(IN,{createReactPlayer:()=>M5});var A5=C5(IN),ii=al(j),k5=al(KT),Nh=al($M),mx=al(pN),Ho=_N,SN=sd,P5=al(y5);const j5=(0,SN.lazy)(()=>jt(()=>import("./Preview-Ne_kzPDd.js").then(t=>t.P),[])),R5=typeof window<"u"&&window.document&&typeof document<"u",O5=typeof Pd<"u"&&Pd.window&&Pd.window.document,D5=Object.keys(Ho.propTypes),L5=R5||O5?ii.Suspense:()=>null,Oo=[],M5=(t,e)=>{var n;return n=class extends ii.Component{constructor(){super(...arguments),Oe(this,"state",{showPreview:!!this.props.light}),Oe(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),Oe(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),Oe(this,"showPreview",()=>{this.setState({showPreview:!0})}),Oe(this,"getDuration",()=>this.player?this.player.getDuration():null),Oe(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Oe(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Oe(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),Oe(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),Oe(this,"handleReady",()=>{this.props.onReady(this)}),Oe(this,"getActivePlayer",(0,Nh.default)(r=>{for(const s of[...Oo,...t])if(s.canPlay(r))return s;return e||null})),Oe(this,"getConfig",(0,Nh.default)((r,s)=>{const{config:i}=this.props;return k5.default.all([Ho.defaultProps.config,Ho.defaultProps.config[s]||{},i,i[s]||{}])})),Oe(this,"getAttributes",(0,Nh.default)(r=>(0,SN.omit)(this.props,D5))),Oe(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return ii.default.createElement(P5.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,mx.default)(this.props,r)||!(0,mx.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:c,previewAriaLabel:u}=this.props;return ii.default.createElement(j5,{url:r,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:u,oEmbedUrl:c,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:o,fallback:c,wrapper:u}=this.props,{showPreview:d}=this.state,f=this.getAttributes(r),p=typeof u=="string"?this.references.wrapper:void 0;return ii.default.createElement(u,{ref:p,style:{...s,width:i,height:o},...f},ii.default.createElement(L5,{fallback:c},d?this.renderPreview(r):this.renderActivePlayer(r)))}},Oe(n,"displayName","ReactPlayer"),Oe(n,"propTypes",Ho.propTypes),Oe(n,"defaultProps",Ho.defaultProps),Oe(n,"addCustomPlayer",r=>{Oo.push(r)}),Oe(n,"removeCustomPlayers",()=>{Oo.length=0}),Oe(n,"canPlay",r=>{for(const s of[...Oo,...t])if(s.canPlay(r))return!0;return!1}),Oe(n,"canEnablePIP",r=>{for(const s of[...Oo,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var V5=Object.create,ad=Object.defineProperty,U5=Object.getOwnPropertyDescriptor,F5=Object.getOwnPropertyNames,z5=Object.getPrototypeOf,$5=Object.prototype.hasOwnProperty,B5=(t,e)=>{for(var n in e)ad(t,n,{get:e[n],enumerable:!0})},CN=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of F5(e))!$5.call(t,s)&&s!==n&&ad(t,s,{get:()=>e[s],enumerable:!(r=U5(e,s))||r.enumerable});return t},q5=(t,e,n)=>(n=t!=null?V5(z5(t)):{},CN(!t||!t.__esModule?ad(n,"default",{value:t,enumerable:!0}):n,t)),H5=t=>CN(ad({},"__esModule",{value:!0}),t),AN={};B5(AN,{default:()=>Q5});var W5=H5(AN),tp=q5(LM),K5=A5;const G5=tp.default[tp.default.length-1];var Q5=(0,K5.createReactPlayer)(tp.default,G5);const Y5=vx(W5);function kN({lesson:t,onComplete:e,onNext:n,isCompleted:r}){const{user:s}=qt(),[i,o]=j.useState(!1),[c,u]=j.useState(0),[d,f]=j.useState(r),p=_=>{u(_.played*100),_.played>.9&&!d&&m()},m=async()=>{if(!t.courseId||!s)return;(await Zn.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?a.jsx(Y5,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:p,onPlay:()=>o(!0),onPause:()=>o(!1)}):a.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:a.jsxs("div",{className:"text-white text-center",children:[a.jsx(uu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),a.jsx("p",{children:"Aucune vido disponible"})]})})}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),a.jsx("p",{className:"text-gray-600",children:t.description})]}),d&&a.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[a.jsx(vt,{className:"w-5 h-5 mr-1"}),a.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"Progression"}),a.jsxs("span",{children:[Math.round(c),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${c}%`}})})]}),a.jsxs("div",{className:"flex space-x-3",children:[!d&&a.jsxs("button",{onClick:m,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[a.jsx(vt,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),n&&a.jsxs("button",{onClick:n,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",a.jsx(ia,{className:"w-5 h-5 ml-2"})]})]}),t.content&&a.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),a.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function X5({courseId:t,currentLessonId:e,onLessonSelect:n,userProgress:r=[],isPurchased:s=!1}){const[i,o]=j.useState([]),[c,u]=j.useState(new Set),[d,f]=j.useState(!0);j.useEffect(()=>{p()},[t]);const p=async()=>{f(!0);const b=await du.getModulesByCourse(t);if(b.success){const N=await Promise.all(b.modules.map(async v=>{const x=await du.getLessonsByModule(v.id);return{...v,lessons:x.lessons||[]}}));o(N),N.length>0&&u(new Set([N[0].id]))}f(!1)},m=b=>{u(N=>{const v=new Set(N);return v.has(b)?v.delete(b):v.add(b),v})},_=b=>Zn.isLessonCompleted(b,r),I=b=>b.reduce((N,v)=>N+(v.duration||0),0);return d?a.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:a.jsxs("div",{className:"animate-pulse space-y-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded"}),a.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),a.jsx("div",{className:"divide-y divide-gray-200",children:i.map((b,N)=>a.jsxs("div",{children:[a.jsx("button",{onClick:()=>m(b.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:a.jsxs("div",{className:"flex items-center",children:[c.has(b.id)?a.jsx(vc,{className:"w-5 h-5 text-gray-400 mr-2"}):a.jsx(og,{className:"w-5 h-5 text-gray-400 mr-2"}),a.jsxs("div",{className:"text-left",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",N+1,": ",b.title]}),a.jsxs("p",{className:"text-sm text-gray-500",children:[b.lessons.length," leon",b.lessons.length>1?"s":"",I(b.lessons)>0&&a.jsxs("span",{children:["  ",I(b.lessons)," min"]})]})]})]})}),c.has(b.id)&&a.jsx("div",{className:"bg-gray-50",children:b.lessons.map((v,x)=>{const y=_(v.id),T=v.id===e,D=s||v.isFree;return a.jsxs("button",{onClick:()=>D&&n(v),disabled:!D,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${T?"bg-green-50 border-l-4 border-green-500":""} ${D?"":"opacity-50 cursor-not-allowed"}`,children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"mr-3",children:D?y?a.jsx(vt,{className:"w-4 h-4 text-green-500"}):a.jsx(uu,{className:"w-4 h-4 text-gray-400"}):a.jsx(Xi,{className:"w-4 h-4 text-gray-400"})}),a.jsxs("div",{className:"text-left",children:[a.jsxs("p",{className:`text-sm ${T?"font-medium text-green-700":"text-gray-700"}`,children:[x+1,". ",v.title]}),v.duration&&a.jsxs("p",{className:"text-xs text-gray-500",children:[v.duration," min"]})]})]}),v.isFree&&a.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},v.id)})})]},b.id))}),i.length===0&&a.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:a.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}function J5({quiz:t,courseId:e,onComplete:n}){const{currentUser:r}=qt(),[s,i]=j.useState({}),[o,c]=j.useState(!1),[u,d]=j.useState(null),[f,p]=j.useState(null);j.useEffect(()=>{r&&t.id&&e&&m()},[t.id,e,r]);const m=async()=>{if(!r)return;const y=await Ds.getQuizResults(r.uid,t.id);if(y.success&&y.results.length>0){const T=Math.max(...y.results.map(D=>D.score));p(T)}},_=(y,T)=>{o||i({...s,[y]:T})},I=async()=>{const y=t.questions.map((C,E)=>s[E]??-1);c(!0);let T=0;t.questions.forEach((C,E)=>{y[E]===C.correctAnswer&&T++});const D=Math.round(T/t.questions.length*100),M={score:D,correctCount:T,totalQuestions:t.questions.length};d(M),r&&t.id&&e&&(await Ds.submitQuizAnswers(r.uid,t.id,e,y),await Zn.markQuizCompleted(r.uid,e,t.id,D)),n==null||n(M)},b=()=>{i({}),c(!1),d(null)},N=y=>s[y]!==void 0,v=t.questions.every((y,T)=>N(T)),x=y=>{switch(y==null?void 0:y.toLowerCase()){case"beginner":return"bg-green-100 text-green-700";case"intermediate":return"bg-yellow-100 text-yellow-700";case"advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title}),t.difficulty&&a.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${x(t.difficulty)}`,children:t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)})]}),t.description&&a.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("span",{children:[t.questions.length," questions"]}),f&&!o&&a.jsxs("span",{className:"text-green-600 font-medium",children:["Meilleur score: ",f,"%"]})]})]}),a.jsx("div",{className:"space-y-8",children:t.questions.map((y,T)=>a.jsxs("div",{className:"border-2 border-gray-100 rounded-xl p-6",children:[a.jsx("div",{className:"mb-4",children:a.jsxs("div",{className:"flex items-start gap-3",children:[a.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:T+1}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:y.question})]})}),a.jsx("div",{className:"space-y-3",children:y.options.map((D,M)=>{const C=s[T]===M,E=o&&M===y.correctAnswer,P=o&&C&&M!==y.correctAnswer;return a.jsx("button",{onClick:()=>_(T,M),disabled:o,className:`w-full text-left p-4 rounded-xl border-2 transition-all ${E?"border-green-500 bg-green-50":P?"border-red-500 bg-red-50":C?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${o?"cursor-not-allowed":"cursor-pointer"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"flex items-center gap-3",children:[a.jsx("span",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${C?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:C&&!o&&a.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),a.jsx("span",{className:"font-medium",children:D})]}),o&&E&&a.jsx(vt,{className:"w-6 h-6 text-green-600"}),o&&P&&a.jsx(zT,{className:"w-6 h-6 text-red-600"})]})},M)})}),o&&y.explanation&&a.jsx("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:a.jsxs("p",{className:"text-sm text-gray-700",children:[a.jsx("span",{className:"font-semibold text-blue-700",children:"Explication: "}),y.explanation]})})]},T))}),a.jsx("div",{className:"mt-8",children:o?a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 p-8 rounded-2xl text-white",children:a.jsxs("div",{className:"text-center",children:[a.jsx(LT,{className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Termin!"}),a.jsxs("p",{className:"text-5xl font-bold mb-4",children:[u==null?void 0:u.score,"%"]}),a.jsxs("p",{className:"text-lg mb-6",children:[u==null?void 0:u.correctCount," / ",u==null?void 0:u.totalQuestions," rponses correctes"]}),a.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-semibold hover:bg-gray-100 transition",children:[a.jsx(uL,{className:"w-5 h-5"}),"Ressayer"]})]})}):a.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-6 rounded-xl",children:[a.jsx("div",{className:"text-sm text-gray-600",children:v?a.jsx("span",{className:"text-green-600 font-medium",children:" Toutes les questions rpondues"}):a.jsxs("span",{children:[Object.keys(s).length," / ",t.questions.length," questions rpondues"]})}),a.jsx("button",{onClick:I,disabled:!v,className:`px-8 py-3 rounded-xl font-semibold transition ${v?"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Soumettre le Quiz"})]})})]})}function Z5({exercise:t,courseId:e,onComplete:n}){var y;const{currentUser:r}=qt(),[s,i]=j.useState(0),[o,c]=j.useState(((y=t.levels[0])==null?void 0:y.starterCode)||""),[u,d]=j.useState(!1),[f,p]=j.useState(!1),[m,_]=j.useState([]);j.useEffect(()=>{r&&t.id&&I()},[t.id,r]);const I=async()=>{if(!r)return;const T=await Ls.getExerciseProgress(r.uid,t.id);T.success&&T.progress.completedLevels&&_(T.progress.completedLevels)},b=t.levels[s],N=async()=>{var T;if(!m.includes(s)){const D=[...m,s];_(D),r&&t.id&&e&&(await Ls.trackLevelCompletion(r.uid,t.id,e,s),D.length===t.levels.length&&(await Zn.markExerciseCompleted(r.uid,e,t.id),console.log(" All exercise levels completed!"))),n==null||n(s)}s<t.levels.length-1&&(i(s+1),c(((T=t.levels[s+1])==null?void 0:T.starterCode)||""),d(!1),p(!1))},v=T=>{switch(T){case 0:return"bg-green-100 text-green-700 border-green-300";case 1:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 2:return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},x=T=>{switch(T){case 0:return" Niveau 1: Dbutant";case 1:return" Niveau 2: Intermdiaire";case 2:return" Niveau 3: Avanc";default:return`Niveau ${T+1}`}};return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),a.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),a.jsx("div",{className:"flex gap-2 mb-4",children:t.levels.map((T,D)=>a.jsx("div",{className:`flex-1 h-2 rounded-full transition ${D===s?"bg-gradient-to-r from-green-500 to-blue-500":m.includes(D)?"bg-green-500":"bg-gray-200"}`},D))}),a.jsx("div",{className:"flex gap-3",children:t.levels.map((T,D)=>a.jsxs("button",{onClick:()=>{var M;i(D),c(((M=t.levels[D])==null?void 0:M.starterCode)||""),d(!1),p(!1)},className:`px-4 py-2 rounded-xl border-2 font-medium text-sm transition ${D===s?v(D):m.includes(D)?"bg-green-50 text-green-600 border-green-200":"bg-gray-50 text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[m.includes(D)&&a.jsx(vt,{className:"w-4 h-4 inline mr-1"}),"Niveau ",D+1]},D))})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:`p-4 rounded-xl border-2 ${v(s)}`,children:[a.jsx("h3",{className:"text-xl font-bold mb-2",children:x(s)}),a.jsx("p",{className:"text-sm",children:b==null?void 0:b.title})]}),a.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[a.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Objectif:"}),a.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:b==null?void 0:b.description})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"font-semibold text-gray-900",children:"Votre Code:"}),a.jsxs("button",{onClick:()=>p(!f),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[a.jsx(iL,{className:"w-4 h-4"}),f?"Masquer les indices":"Afficher les indices"]})]}),f&&(b==null?void 0:b.hints)&&b.hints.length>0&&a.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[a.jsx("p",{className:"font-semibold text-blue-900 mb-2",children:" Indices:"}),a.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:b.hints.map((T,D)=>a.jsx("li",{children:T},D))})]}),a.jsx("textarea",{value:o,onChange:T=>c(T.target.value),className:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 rounded-xl border-2 border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none",placeholder:"crivez votre code ici...",spellCheck:!1})]}),a.jsxs("div",{children:[a.jsxs("button",{onClick:()=>d(!u),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:[u?a.jsx(tL,{className:"w-4 h-4"}):a.jsx(nL,{className:"w-4 h-4"}),u?"Masquer la solution":"Voir la solution"]}),u&&(b==null?void 0:b.solution)&&a.jsxs("div",{className:"mt-4",children:[a.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded mb-3",children:a.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",a.jsx("strong",{children:"Astuce:"})," Essayez de rsoudre l'exercice par vous-mme avant de regarder la solution!"]})}),a.jsxs("div",{className:"p-4 bg-gray-900 rounded-xl",children:[a.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Solution:"}),a.jsx("pre",{className:"font-mono text-sm text-green-400 overflow-x-auto",children:b.solution})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4",children:[a.jsx("div",{className:"text-sm text-gray-600",children:m.includes(s)&&a.jsx("span",{className:"text-green-600 font-medium",children:" Niveau termin"})}),a.jsxs("div",{className:"flex gap-3",children:[s>0&&a.jsx("button",{onClick:()=>{var T;i(s-1),c(((T=t.levels[s-1])==null?void 0:T.starterCode)||""),d(!1),p(!1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition",children:"Niveau Prcdent"}),a.jsx("button",{onClick:N,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition flex items-center gap-2",children:s<t.levels.length-1?a.jsxs(a.Fragment,{children:["Niveau Suivant",a.jsx(og,{className:"w-5 h-5"})]}):a.jsxs(a.Fragment,{children:[a.jsx(vt,{className:"w-5 h-5"}),"Terminer l'Exercice"]})})]})]})]})]})}function gx({content:t,contentType:e,onComplete:n,onNext:r}){const[s,i]=j.useState(null),o=async u=>{const d=Math.floor(Math.random()*40)+60,f={score:d,correctCount:Math.floor(d/100*u.length),totalQuestions:u.length};return i(f),n==null||n(),f},c=u=>{console.log("Exercise level completed:",u),u===t.levels.length-1&&(n==null||n())};switch(e){case"video":return a.jsx(kN,{lesson:t,onComplete:n,onNext:r,isCompleted:!1});case"text":case"course":return a.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[a.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[a.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center",children:a.jsx(tt,{className:"w-6 h-6 text-white"})}),a.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title})]}),a.jsx("div",{className:"prose prose-lg max-w-none",children:typeof t.content=="string"?a.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:t.content}):t.content}),a.jsx("div",{className:"mt-8 flex justify-end",children:a.jsx("button",{onClick:()=>{n==null||n(),r==null||r()},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition",children:"Marquer comme termin et continuer"})})]});case"quiz":return a.jsx(J5,{quiz:t,onSubmit:o,previousResult:s});case"exercise":return a.jsx(Z5,{exercise:t,onComplete:c});default:return a.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:a.jsxs("p",{className:"text-gray-600",children:["Type de contenu non support: ",e]})})}}function eV(){const{courseId:t}=em(),e=Bt(),{currentUser:n,userProfile:r}=qt(),[s,i]=j.useState(null),[o,c]=j.useState(null),[u,d]=j.useState([]),[f,p]=j.useState("overview"),[m,_]=j.useState(!0),[I,b]=j.useState(!1),[N,v]=j.useState([]),[x,y]=j.useState([]),[T,D]=j.useState([]);j.useEffect(()=>{M()},[t,n]);const M=async()=>{var A;if(console.log(" loadCourseData called",{courseId:t,currentUser:!!n,userProfile:!!r}),!t||!n){console.log(" Early return - missing courseId or currentUser");return}try{_(!0),console.log(" Loading course:",t);const R=await Yt.getCourseById(t);if(console.log(" Course result:",R),R.success)i(R.course);else{console.error(" Failed to load course"),_(!1);return}const k=(A=r==null?void 0:r.purchasedCourses)==null?void 0:A.includes(t);console.log(" Has purchased:",k),b(k);const fe=await Zn.getCourseProgress(n.uid,t);fe.success&&d(fe.progress.completedLessons||[]);const ke=await du.getModulesByCourse(t);if(ke.success){const $=[];for(const G of ke.modules){const X=await du.getLessonsByModule(G.id);X.success&&$.push(...X.lessons.map(_e=>({..._e,moduleId:G.id,courseId:t})))}if(v($),$.length>0&&!o){const G=$.find(X=>!Zn.isLessonCompleted(X.id,fe.progress.completedLessons||[]));c(G||$[0])}}const Y=await Ds.getQuizzesByCourse(t);Y.success&&y(Y.quizzes);const xe=await Ls.getExercisesByCourse(t);xe.success&&D(xe.exercises),console.log(" Course data loaded successfully"),_(!1)}catch(R){console.error(" Error loading course data:",R),_(!1)}},C=A=>{d(R=>[...R,A])},E=()=>{if(!o||N.length===0)return;const A=N.findIndex(R=>R.id===o.id);A<N.length-1&&c(N[A+1])},P=()=>N.length===0?0:Zn.calculateProgressPercentage(u.length,N.length);if(m)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),a.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!I)return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),a.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const S=[{id:"overview",name:"Aperu",icon:tt},{id:"quiz",name:"Quiz",icon:ki},{id:"exercise",name:"Exercice",icon:Pi},{id:"resources",name:"Ressources",icon:rL},{id:"qna",name:"Q&A",icon:lL}];return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[a.jsx(Qi,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",P(),"%"]}),a.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:a.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${P()}%`}})})]})]})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&a.jsx(kN,{lesson:o,onComplete:C,onNext:E,isCompleted:Zn.isLessonCompleted(o.id,u)}),a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex -mb-px",children:S.map(A=>{const R=A.icon;return a.jsxs("button",{onClick:()=>p(A.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===A.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(R,{className:"w-4 h-4 mr-2"}),A.name]},A.id)})})}),a.jsxs("div",{className:"p-6",children:[f==="overview"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),a.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&a.jsxs("div",{className:"mb-4",children:[a.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),a.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((A,R)=>a.jsx("li",{children:A},R))})]})]}),f==="quiz"&&a.jsx("div",{className:"-m-6",children:x.length>0?a.jsx(gx,{content:x[0],contentType:"quiz",courseId:t,onComplete:()=>console.log("Quiz completed"),onNext:E}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(ki,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Aucun quiz disponible pour ce cours"})]})}),f==="exercise"&&a.jsx("div",{className:"-m-6",children:T.length>0?a.jsx(gx,{content:T[0],contentType:"exercise",courseId:t,onComplete:()=>console.log("Exercise completed"),onNext:E}):a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Pi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Aucun exercice disponible pour ce cours"})]})}),f==="resources"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),a.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),a.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),a.jsx("div",{className:"lg:col-span-1",children:a.jsx(X5,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:c,userProgress:u,isPurchased:I})})]})})]})}function tV(){const{userProfile:t,currentUser:e}=qt(),[n,r]=j.useState([]),[s,i]=j.useState(!0);j.useEffect(()=>{e&&t&&o()},[e,t]);const o=async()=>{i(!0);const c=(t==null?void 0:t.purchasedCourses)||[];if(c.length===0){i(!1);return}const u=await Promise.all(c.map(async d=>{const f=await Yt.getCourseById(d);if(f.success&&f.course.status!=="archived"){const p=await Zn.getCourseProgress(e.uid,d);return{...f.course,progress:p.completionPercentage||0,totalLessons:p.totalLessons||0,completedLessons:p.completedLessons||0}}return null}));r(u.filter(d=>d!==null)),i(!1)};return s?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.length===0?a.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[a.jsx(tt,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun cours achet"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par explorer nos cours disponibles."}),a.jsxs(ge,{to:"/courses",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[a.jsx(tt,{className:"w-5 h-5 mr-2"}),"Explorer les cours"]})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(c=>a.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition",children:[a.jsx("img",{src:c.thumbnail||"/assets/images/default-course.png",alt:c.title,className:"w-full h-48 object-cover"}),a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:c.title}),a.jsx("p",{className:"text-gray-600 mb-4",children:c.category||"General"}),a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[a.jsx("span",{className:"font-medium",children:"Progression"}),a.jsxs("span",{className:"font-semibold text-green-600",children:[c.progress,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:a.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${c.progress}%`}})})]}),a.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-6",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(vt,{className:"w-4 h-4 mr-1 text-green-500"}),a.jsxs("span",{children:[c.completedLessons,"/",c.totalLessons," leons"]})]})}),a.jsxs(ge,{to:`/course/${c.id}/view`,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-4 rounded-xl hover:shadow-xl transition flex items-center justify-center font-medium",children:[a.jsx(Yf,{className:"w-5 h-5 mr-2"}),c.progress===0?"Commencer":"Continuer"]})]})]},c.id))})})]})}function nV(){const[t]=$w(),e=Bt(),[n,r]=j.useState(!0),[s,i]=j.useState(null),[o,c]=j.useState(null),[u,d]=j.useState(0),f=10,p=j.useRef(null),m=j.useRef(!1),_=j.useRef(0),I=t.get("payment_id"),b=I==null?void 0:I.split("?")[0],N=j.useCallback(async()=>{if(m.current)return;if(!b){c("ID de paiement manquant"),r(!1),m.current=!0;return}_.current+=1;const v=_.current;if(console.log(` Tentative ${v}/${f}`),d(v),v>f){console.log(" Limite de tentatives atteinte (dpasse)"),c("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0;return}if(m.current||(await new Promise(y=>setTimeout(y,3e3)),m.current))return;const x=await qT.verifyPayment(b);if(console.log(" Rsultat vrification:",x),!m.current)if(x.success)if(i(x.data),x.status==="completed")console.log(" Paiement confirm !"),r(!1),m.current=!0,p.current&&clearTimeout(p.current);else if(x.status==="pending")if(_.current>=f)console.log(" Limite de tentatives atteinte (pending)"),c("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0,p.current&&clearTimeout(p.current);else if(_.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let y="https://plateforme-educative.onrender.com";if(y&&y.includes("/"))try{const T=new URL(y);T.pathname!=="/"&&!y.includes("/sync-payment")&&(y=`${T.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",y)}if(y){const T=y.endsWith("/")?y.slice(0,-1):y;let D=`${T}/sync-payment`;const M="https://plateforme-educative.onrender.com";let C=null;if(M&&M.includes("/")&&M!==T)try{const S=new URL(M);if(S.pathname&&S.pathname!=="/"){const A=S.pathname.endsWith("/")?S.pathname.slice(0,-1):S.pathname;C=`${S.origin}${A}/sync-payment`}}catch{}console.log(" URL backend pour sync:",D),C&&console.log(" URL fallback pour sync:",C);const E=S=>fetch(S,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:b})});(C?E(D).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),E(C))):E(D)).then(S=>S.ok?S.json():(console.error(" Erreur HTTP sync:",S.status,S.statusText),null)).then(S=>{S&&S.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),m.current=!0):(console.warn(" Synchronisation choue:",S),!m.current&&_.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),p.current=setTimeout(N,3e3)))}).catch(S=>{console.error(" Erreur synchronisation:",S),console.error("   Type:",S.name),console.error("   Message:",S.message),!m.current&&_.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),p.current=setTimeout(N,3e3))})}else!m.current&&_.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),p.current=setTimeout(N,3e3))}catch(y){console.warn(" Erreur synchronisation:",y),!m.current&&_.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),p.current=setTimeout(N,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),p.current=setTimeout(N,3e3);else x.status==="failed"?(c("Le paiement a chou"),r(!1),m.current=!0,p.current&&clearTimeout(p.current)):_.current>=f?(c("Le paiement a un statut inconnu. Veuillez contacter le support."),r(!1),m.current=!0,p.current&&clearTimeout(p.current)):(console.log(" Statut inconnu:",x.status,"- Nouvelle tentative..."),p.current=setTimeout(N,3e3));else console.error(" Erreur vrification:",x.error),c(x.error||"Erreur lors de la vrification du paiement"),r(!1),m.current=!0,p.current&&clearTimeout(p.current)},[b,f]);return j.useEffect(()=>(m.current=!1,_.current=0,d(0),p.current&&(clearTimeout(p.current),p.current=null),b?(console.log(" Vrification du paiement:",b),N()):(c("ID de paiement manquant"),r(!1),m.current=!0),()=>{p.current&&(clearTimeout(p.current),p.current=null),m.current=!0}),[b,N]),n?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx(ag,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),u>0&&a.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",u,"/",f,"..."]})]})}):o?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx("span",{className:"text-3xl",children:""})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),a.jsx("p",{className:"text-gray-600 mb-6",children:o}),a.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx(vt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",a.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),a.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[a.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),a.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",a.jsx(ia,{className:"w-5 h-5"})]}),a.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function rV(){const t=Bt();return a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[a.jsx(zT,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),a.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[a.jsx(Qi,{className:"w-5 h-5"}),"Ressayer le paiement"]}),a.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function sV({onCreate:t}){const[e,n]=j.useState(""),[r,s]=j.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const c={id:Date.now().toString(),title:e.trim(),body:r.trim(),time:new Date().toLocaleString()};t&&t(c),n(""),s("")};return a.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[a.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),a.jsx("div",{className:"mb-2",children:a.jsx("input",{value:e,onChange:o=>n(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),a.jsx("div",{className:"mb-3",children:a.jsx("textarea",{value:r,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),a.jsx("div",{className:"text-right",children:a.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function iV({notification:t}){return a.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),a.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),a.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function oV({items:t=[]}){return t.length?a.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>a.jsx(iV,{notification:e},e.id))}):a.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function aV({onEdit:t,onAddNew:e}){const n=Bt(),[r,s]=j.useState([]),[i,o]=j.useState(!0),[c,u]=j.useState(""),[d,f]=j.useState("all"),[p,m]=j.useState("");j.useEffect(()=>{_()},[d,p]);const _=async()=>{o(!0);const T={};d!=="all"&&(T.category=d),p&&(T.status=p);const D=await Yt.getCourses(T);D.success&&s(D.courses),o(!1)},I=async T=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await Yt.deleteCourse(T)).success&&_()},b=async T=>{(await Yt.duplicateCourse(T)).success&&_()},N=async T=>{(await Yt.publishCourse(T)).success&&_()},v=r.filter(T=>{var D,M;return((D=T.title)==null?void 0:D.toLowerCase().includes(c.toLowerCase()))||((M=T.description)==null?void 0:M.toLowerCase().includes(c.toLowerCase()))}),x=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],y=T=>{const D={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},C={draft:Yi,published:vt,archived:K4}[T]||Yi;return a.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${D[T]||D.draft}`,children:[a.jsx(C,{className:"w-3 h-3 mr-1"}),T==="draft"?"Brouillon":T==="published"?"Publi":"Archiv"]})};return a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),a.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[a.jsx(ir,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(VT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:c,onChange:T=>u(T.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsx("select",{value:d,onChange:T=>f(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(T=>a.jsx("option",{value:T.value,children:T.label},T.value))}),a.jsxs("select",{value:p,onChange:T=>m(T.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"",children:"Tous les statuts"}),a.jsx("option",{value:"draft",children:"Brouillon"}),a.jsx("option",{value:"published",children:"Publi"}),a.jsx("option",{value:"archived",children:"Archiv"})]})]})}),i?a.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),a.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):v.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:a.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:v.map(T=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[T.thumbnail&&a.jsx("img",{src:T.thumbnail,alt:T.title,className:"w-12 h-12 rounded object-cover mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:T.title}),a.jsx("div",{className:"text-sm text-gray-500",children:T.level==="beginner"?"Dbutant":T.level==="intermediate"?"Intermdiaire":T.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.category}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[T.price," TND"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:T.enrolledCount||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:y(T.status)}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex justify-end space-x-2",children:[T.status==="draft"&&a.jsx("button",{onClick:()=>N(T.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:a.jsx(vt,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>n(`/admin/courses/${T.id}?tab=quizzes`),className:"text-purple-600 hover:text-purple-900",title:"Grer les Quiz",children:a.jsx(ki,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>n(`/admin/courses/${T.id}?tab=exercises`),className:"text-orange-600 hover:text-orange-900",title:"Grer les Exercices",children:a.jsx(Pi,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>t(T),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:a.jsx(cL,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>b(T.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:a.jsx(Z4,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>I(T.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:a.jsx(Va,{className:"w-5 h-5"})})]})})]},T.id))})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r.length})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),a.jsx("p",{className:"text-2xl font-bold text-green-600",children:r.filter(T=>T.status==="published").length})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),a.jsx("p",{className:"text-2xl font-bold text-gray-600",children:r.filter(T=>T.status==="draft").length})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:r.reduce((T,D)=>T+(D.enrolledCount||0),0)})]})]})]})}function lV({courseId:t=null,onSave:e,onCancel:n}){const[r,s]=j.useState(!1),[i,o]=j.useState(null),[c,u]=j.useState(null),[d,f]=j.useState(null),[p,m]=j.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});j.useEffect(()=>{t&&_()},[t]);const _=async()=>{s(!0);const y=await Yt.getCourseById(t);y.success?(m(y.course),y.course.thumbnail&&u(y.course.thumbnail)):o(y.error),s(!1)},I=y=>{const{name:T,value:D}=y.target;m(M=>({...M,[T]:D}))},b=y=>{const T=y.target.files[0];if(T){f(T);const D=new FileReader;D.onloadend=()=>{u(D.result)},D.readAsDataURL(T)}},N=async y=>{y.preventDefault(),s(!0),o(null);try{let T;t?T=await Yt.updateCourse(t,p,d):T=await Yt.createCourse(p,d),T.success?e==null||e(T):o(T.error)}catch(T){o(T.message)}finally{s(!1)}},v=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],x=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return a.jsxs("form",{onSubmit:N,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),a.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:a.jsx(Ji,{className:"w-6 h-6"})})]}),i&&a.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),a.jsx("input",{type:"text",name:"title",value:p.title,onChange:I,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),a.jsx("input",{type:"text",name:"shortDescription",value:p.shortDescription,onChange:I,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),a.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[p.shortDescription.length,"/150 caractres"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),a.jsx("textarea",{name:"description",value:p.description,onChange:I,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),a.jsx("select",{name:"category",value:p.category,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:v.map(y=>a.jsx("option",{value:y.value,children:y.label},y.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),a.jsx("select",{name:"level",value:p.level,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(y=>a.jsx("option",{value:y.value,children:y.label},y.value))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),a.jsx("input",{type:"number",name:"price",value:p.price,onChange:I,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),a.jsx("input",{type:"text",name:"duration",value:p.duration,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),a.jsx("input",{type:"text",name:"instructor",value:p.instructor,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),a.jsxs("select",{name:"language",value:p.language,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"fr",children:"Franais"}),a.jsx("option",{value:"ar",children:"Arabe"}),a.jsx("option",{value:"en",children:"Anglais"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),a.jsxs("div",{className:"flex items-start space-x-4",children:[c&&a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:c,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),a.jsx("button",{type:"button",onClick:()=>{u(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:a.jsx(Ji,{className:"w-4 h-4"})})]}),a.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[a.jsx(FT,{className:"w-8 h-8 mb-2"}),a.jsx("span",{className:"text-sm",children:"Choisir une image"}),a.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),a.jsx("input",{type:"url",name:"videoUrl",value:p.videoUrl,onChange:I,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),a.jsx("textarea",{name:"requirements",value:p.requirements,onChange:I,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),a.jsx("textarea",{name:"outcomes",value:p.outcomes,onChange:I,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[a.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),a.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[a.jsx(sl,{className:"w-4 h-4 mr-2"}),r?"Enregistrement...":"Enregistrer"]})]})]})}function cV({onSelectDetails:t}){const[e,n]=j.useState([]),[r,s]=j.useState(!0),[i,o]=j.useState(""),[c,u]=j.useState("all");j.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const _=(await sr(yt(Z,"users"))).docs.map(I=>({id:I.id,...I.data()}));n(_)}catch(m){console.error("Error loading users:",m)}finally{s(!1)}},f=async(m,_)=>{try{const I=_==="admin"?"student":"admin",b=ue(Z,"users",m);await $t(b,{role:I}),d()}catch(I){console.error("Error updating role:",I),alert("Erreur lors de la mise  jour du rle")}},p=e.filter(m=>{var b,N;const _=((b=m.displayName)==null?void 0:b.toLowerCase().includes(i.toLowerCase()))||((N=m.email)==null?void 0:N.toLowerCase().includes(i.toLowerCase())),I=c==="all"||m.role===c;return _&&I});return a.jsxs("div",{className:"space-y-4",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),a.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx(VT,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),a.jsxs("select",{value:c,onChange:m=>u(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[a.jsx("option",{value:"all",children:"Tous les rles"}),a.jsx("option",{value:"student",children:"tudiants"}),a.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),r?a.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),a.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):p.length===0?a.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:a.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:p.map(m=>{var _,I,b;return a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:m.photoURL?a.jsx("img",{src:m.photoURL,alt:m.displayName,className:"h-10 w-10 rounded-full"}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:a.jsx(cg,{className:"w-6 h-6 text-green-600"})})}),a.jsx("div",{className:"ml-4",children:a.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.displayName||"Sans nom"})})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.email}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:m.role==="admin"?a.jsxs(a.Fragment,{children:[a.jsx(UT,{className:"w-3 h-3 mr-1"}),"Admin"]}):a.jsxs(a.Fragment,{children:[a.jsx(tt,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((_=m.purchasedCourses)==null?void 0:_.length)||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(Y4,{className:"w-4 h-4 mr-1"}),((b=(I=m.createdAt)==null?void 0:I.toDate)==null?void 0:b.call(I).toLocaleDateString())||"N/A"]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>f(m.id,m.role),className:`${m.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:m.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},m.id)})})]})}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),a.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(m=>m.role==="student").length})]}),a.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[a.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),a.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(m=>m.role==="admin").length})]})]})]})}function yx(){const t=Bt(),{userProfile:e}=qt(),[n,r]=j.useState("overview"),[s,i]=j.useState(!1),[o,c]=j.useState(null),[u,d]=j.useState([]),f=[{id:"overview",name:"Vue d'ensemble",icon:G4},{id:"courses",name:"Cours",icon:tt},{id:"users",name:"Utilisateurs",icon:nd},{id:"settings",name:"Paramtres",icon:dL}],p=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],m=()=>{switch(n){case"overview":return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map(_=>a.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:_.name}),a.jsx("p",{className:"text-2xl font-bold text-gray-900",children:_.value})]}),a.jsx("div",{className:`text-sm font-medium ${_.changeType==="positive"?"text-green-600":"text-red-600"}`,children:_.change})]})},_.name))}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"md:col-span-2",children:a.jsx(sV,{onCreate:_=>d(I=>[_,...I])})}),a.jsx("div",{children:a.jsxs("div",{className:"bg-white rounded-lg shadow",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),a.jsx("div",{className:"p-4",children:a.jsx(oV,{items:u})})]})})]})]});case"courses":return a.jsx("div",{className:"space-y-6",children:s?a.jsx(lV,{courseId:o==null?void 0:o.id,onSave:()=>{i(!1),c(null)},onCancel:()=>{i(!1),c(null)}}):a.jsx(aV,{onEdit:_=>{t(`/admin/courses/${_.id}`)},onAddNew:()=>{c(null),i(!0)}})});case"users":return a.jsx(cV,{});case"settings":return a.jsxs("div",{className:"space-y-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),a.jsx("div",{className:"bg-white rounded-lg shadow",children:a.jsx("div",{className:"p-6",children:a.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),a.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",e==null?void 0:e.displayName]})]})})})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:a.jsxs("div",{className:"flex space-x-8",children:[a.jsx("div",{className:"w-64",children:a.jsx("nav",{className:"space-y-1",children:f.map(_=>{const I=_.icon;return a.jsxs("button",{onClick:()=>r(_.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${n===_.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[a.jsx(I,{className:"w-5 h-5 mr-3"}),_.name]},_.id)})})}),a.jsx("div",{className:"flex-1",children:m()})]})})]})}function PN({icon:t,title:e,description:n,actionLabel:r,onAction:s,actionIcon:i}){return a.jsxs("div",{className:"text-center py-12 px-4",children:[t&&a.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-2xl flex items-center justify-center",children:a.jsx(t,{className:"w-8 h-8 text-gray-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),n&&a.jsx("p",{className:"text-gray-600 mb-6 max-w-sm mx-auto",children:n}),r&&s&&a.jsxs("button",{onClick:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[i&&a.jsx(i,{className:"w-5 h-5"}),r]})]})}function uV({module:t,isExpanded:e,isEditing:n,onToggle:r,onUpdate:s,onDelete:i,onMoveUp:o,onMoveDown:c,onStartEdit:u,onEndEdit:d}){const[f,p]=j.useState(null),[m,_]=j.useState(t.title),[I,b]=j.useState(0),[N,v]=j.useState(!1),[x,y]=j.useState({title:"",videoUrl:"",videoType:"youtube",duration:"",description:"",isFree:!1}),T=()=>{s({...t,title:m}),d()},D=()=>{_(t.title),d()},M=()=>{const A={id:`lesson_${Date.now()}`,title:"",videoUrl:"",duration:0,description:"",isFree:!1,order:t.lessons.length+1};s({...t,lessons:[...t.lessons,A]}),p(A.id)},C=(A,R)=>{s({...t,lessons:t.lessons.map(k=>k.id===A?{...k,...R}:k)})},E=A=>{const R=t.lessons.find(k=>k.id===A);if(!R.title||!R.videoUrl){alert("Please fill in title and video URL");return}p(null)},P=A=>{confirm("Delete this lesson?")&&s({...t,lessons:t.lessons.filter(R=>R.id!==A)})},S=(A,R)=>{const k=[...t.lessons],fe=k.findIndex(ke=>ke.id===A);if(R==="up"&&fe>0||R==="down"&&fe<k.length-1){const ke=R==="up"?fe-1:fe+1;[k[fe],k[ke]]=[k[ke],k[fe]],k.forEach((Y,xe)=>Y.order=xe+1),s({...t,lessons:k})}};return a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden bg-white",children:[a.jsx("div",{className:"bg-gray-50 p-4",children:a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("button",{onClick:r,className:"text-gray-600 hover:text-gray-900 transition",children:e?a.jsx(vc,{className:"w-5 h-5"}):a.jsx(og,{className:"w-5 h-5"})}),n?a.jsx("input",{type:"text",value:m,onChange:A=>_(A.target.value),placeholder:"Module title",className:"flex-1 px-3 py-2 border-2 border-green-500 rounded-lg focus:outline-none",autoFocus:!0}):a.jsx("h3",{className:"flex-1 text-lg font-semibold text-gray-900",children:t.title||"Untitled Module"}),a.jsxs("span",{className:"text-sm text-gray-500",children:[t.lessons.length," lesson",t.lessons.length!==1?"s":""]}),a.jsx("div",{className:"flex gap-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:T,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition",title:"Save",children:a.jsx(sl,{className:"w-5 h-5"})}),a.jsx("button",{onClick:D,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Cancel",children:a.jsx(Ji,{className:"w-5 h-5"})})]}):a.jsxs(a.Fragment,{children:[o&&a.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move up",children:a.jsx(ix,{className:"w-5 h-5"})}),c&&a.jsx("button",{onClick:c,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move down",children:a.jsx(vc,{className:"w-5 h-5"})}),a.jsx("button",{onClick:u,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit module",children:a.jsx(Qf,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>confirm("Delete this module and all its lessons?")&&i(),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete module",children:a.jsx(Va,{className:"w-5 h-5"})})]})})]})}),e&&a.jsx("div",{className:"p-4",children:t.lessons.length===0?a.jsx(PN,{icon:ax,title:"No lessons yet",description:"Add your first lesson to this module",actionLabel:"Add Lesson",actionIcon:ir,onAction:M}):a.jsxs("div",{className:"space-y-3",children:[t.lessons.map((A,R)=>a.jsx("div",{className:"border-2 border-gray-100 rounded-lg p-4 hover:border-gray-200 transition",children:f===A.id?a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),a.jsx("input",{type:"text",value:A.title,onChange:k=>C(A.id,{title:k.target.value}),placeholder:"Introduction to...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),a.jsx("input",{type:"number",value:A.duration,onChange:k=>C(A.id,{duration:parseInt(k.target.value)||0}),placeholder:"15",min:"1",max:"300",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source *"}),a.jsxs("div",{className:"flex gap-3 mb-3",children:[a.jsxs("button",{type:"button",onClick:()=>C(A.id,{videoType:"youtube"}),className:`flex-1 px-4 py-2 border-2 rounded-lg font-medium transition ${(A.videoType||"youtube")==="youtube"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`,children:[a.jsx(sL,{className:"w-4 h-4 inline mr-2"}),"YouTube URL"]}),a.jsxs("button",{type:"button",onClick:()=>C(A.id,{videoType:"cloudinary"}),className:`flex-1 px-4 py-2 border-2 rounded-lg font-medium transition ${A.videoType==="cloudinary"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`,children:[a.jsx(FT,{className:"w-4 h-4 inline mr-2"}),"Upload Video"]})]}),(A.videoType||"youtube")==="youtube"?a.jsx("input",{type:"url",value:A.videoUrl,onChange:k=>C(A.id,{videoUrl:k.target.value}),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"}):a.jsxs("div",{children:[a.jsx("input",{type:"file",accept:"video/*",onChange:async k=>{const fe=k.target.files[0];if(!fe)return;v(!0),b(0);const ke=await BT.uploadVideo(fe,"courses/videos",Y=>b(Y));v(!1),ke.success?C(A.id,{videoUrl:ke.url,duration:Math.ceil(ke.duration/60)||A.duration}):alert("Upload failed: "+ke.error)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100",disabled:N}),N&&a.jsxs("div",{className:"mt-2",children:[a.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[a.jsx("span",{children:"Uploading..."}),a.jsxs("span",{children:[I,"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:a.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${I}%`}})})]}),A.videoUrl&&!N&&a.jsx("p",{className:"mt-2 text-sm text-green-600",children:" Video uploaded successfully"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:A.description,onChange:k=>C(A.id,{description:k.target.value}),placeholder:"What will students learn in this lesson?",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]}),a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"checkbox",id:`free-${A.id}`,checked:A.isFree,onChange:k=>C(A.id,{isFree:k.target.checked}),className:"w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),a.jsx("label",{htmlFor:`free-${A.id}`,className:"text-sm text-gray-700",children:"Freemium Preview (available without purchase)"})]}),a.jsxs("div",{className:"flex gap-2 pt-2",children:[a.jsx("button",{onClick:()=>E(A.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Save Lesson"}),a.jsx("button",{onClick:()=>p(null),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"})]})]}):a.jsxs("div",{className:"flex items-start gap-4",children:[a.jsxs("div",{className:"flex-1",children:[a.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[a.jsx("h4",{className:"font-semibold text-gray-900",children:A.title||"Untitled Lesson"}),A.isFree&&a.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Free Preview"})]}),A.description&&a.jsx("p",{className:"text-sm text-gray-600 mb-2",children:A.description}),a.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[A.videoUrl&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(ax,{className:"w-4 h-4"}),"Video"]}),A.duration>0&&a.jsxs("span",{className:"flex items-center gap-1",children:[a.jsx(Yi,{className:"w-4 h-4"}),A.duration," min"]})]})]}),a.jsxs("div",{className:"flex gap-2",children:[R>0&&a.jsx("button",{onClick:()=>S(A.id,"up"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move up",children:a.jsx(ix,{className:"w-4 h-4"})}),R<t.lessons.length-1&&a.jsx("button",{onClick:()=>S(A.id,"down"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move down",children:a.jsx(vc,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>p(A.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit lesson",children:a.jsx(Qf,{className:"w-4 h-4"})}),a.jsx("button",{onClick:()=>P(A.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete lesson",children:a.jsx(Va,{className:"w-4 h-4"})})]})]})},A.id)),a.jsxs("button",{onClick:M,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-green-500 hover:text-green-600 transition font-medium flex items-center justify-center gap-2",children:[a.jsx(ir,{className:"w-4 h-4"}),"Add Lesson"]})]})})]})}function dV({modules:t=[],onChange:e}){const[n,r]=j.useState(new Set),[s,i]=j.useState(null),o=p=>{const m=new Set(n);m.has(p)?m.delete(p):m.add(p),r(m)},c=()=>{const p={id:`module_${Date.now()}`,title:"",order:t.length+1,lessons:[]};e([...t,p]),i(p.id),r(new Set([...n,p.id]))},u=(p,m)=>{e(t.map(_=>_.id===p?m:_))},d=p=>{e(t.filter(m=>m.id!==p))},f=(p,m)=>{const _=t.findIndex(I=>I.id===p);if(m==="up"&&_>0||m==="down"&&_<t.length-1){const I=[...t],b=m==="up"?_-1:_+1;[I[_],I[b]]=[I[b],I[_]],I.forEach((N,v)=>N.order=v+1),e(I)}};return t.length===0?a.jsx(PN,{icon:ir,title:"No modules yet",description:"Start building your course by adding your first module",actionLabel:"Add Module",actionIcon:ir,onAction:c}):a.jsxs("div",{className:"space-y-4",children:[t.map((p,m)=>a.jsx(uV,{module:p,isExpanded:n.has(p.id),isEditing:s===p.id,onToggle:()=>o(p.id),onUpdate:_=>u(p.id,_),onDelete:()=>d(p.id),onMoveUp:m>0?()=>f(p.id,"up"):null,onMoveDown:m<t.length-1?()=>f(p.id,"down"):null,onStartEdit:()=>i(p.id),onEndEdit:()=>i(null)},p.id)),a.jsxs("button",{onClick:c,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-green-500 hover:text-green-600 transition font-medium flex items-center justify-center gap-2",children:[a.jsx(ir,{className:"w-5 h-5"}),"Add Module"]})]})}function hV({courseId:t,quiz:e,onSave:n,onCancel:r}){const[s,i]=j.useState(e||{title:"",description:"",difficulty:"beginner",questions:[]}),[o,c]=j.useState(!1),[u,d]=j.useState(""),f=()=>{const b={question:"",options:["","","",""],correctAnswer:0,explanation:""};i({...s,questions:[...s.questions,b]})},p=(b,N,v)=>{const x=[...s.questions];x[b]={...x[b],[N]:v},i({...s,questions:x})},m=(b,N,v)=>{const x=[...s.questions];x[b].options[N]=v,i({...s,questions:x})},_=b=>{const N=s.questions.filter((v,x)=>x!==b);i({...s,questions:N})},I=async()=>{if(!s.title.trim()){d("Le titre du quiz est requis");return}if(s.questions.length===0){d("Ajoutez au moins une question");return}for(let b=0;b<s.questions.length;b++){const N=s.questions[b];if(!N.question.trim()){d(`Question ${b+1}: Le texte de la question est requis`);return}if(N.options.some(v=>!v.trim())){d(`Question ${b+1}: Toutes les options doivent tre remplies`);return}}c(!0),d("");try{const b={...s,courseId:t,order:(e==null?void 0:e.order)||1};let N;e!=null&&e.id?N=await Ds.updateQuiz(e.id,b):N=await Ds.createQuiz(b),N.success?n==null||n(N):d(N.error||"Erreur lors de l'enregistrement")}catch(b){d(b.message)}finally{c(!1)}};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?"Modifier le Quiz":"Crer un Quiz"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:a.jsx(Ji,{className:"w-5 h-5"})})]}),u&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded flex items-start gap-3",children:[a.jsx(ig,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-800",children:u})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du Quiz *"}),a.jsx("input",{type:"text",value:s.title,onChange:b=>i({...s,title:b.target.value}),placeholder:"Ex: Quiz React - Les Bases",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:b=>i({...s,description:b.target.value}),placeholder:"Testez vos connaissances...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficult"}),a.jsxs("select",{value:s.difficulty,onChange:b=>i({...s,difficulty:b.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none",children:[a.jsx("option",{value:"beginner",children:"Dbutant"}),a.jsx("option",{value:"intermediate",children:"Intermdiaire"}),a.jsx("option",{value:"advanced",children:"Avanc"})]})]})]}),a.jsxs("div",{className:"space-y-6 mb-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Questions (",s.questions.length,")"]}),a.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[a.jsx(ir,{className:"w-4 h-4"}),"Ajouter une question"]})]}),s.questions.map((b,N)=>a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Question ",N+1]}),a.jsx("button",{onClick:()=>_(N),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Supprimer la question",children:a.jsx(Va,{className:"w-4 h-4"})})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Texte de la question *"}),a.jsx("input",{type:"text",value:b.question,onChange:v=>p(N,"question",v.target.value),placeholder:"Qu'est-ce que React?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options (slectionnez la bonne rponse) *"}),a.jsx("div",{className:"space-y-2",children:b.options.map((v,x)=>a.jsxs("div",{className:"flex items-center gap-3",children:[a.jsx("input",{type:"radio",name:`correct-${N}`,checked:b.correctAnswer===x,onChange:()=>p(N,"correctAnswer",x),className:"w-5 h-5 text-green-600 focus:ring-2 focus:ring-green-500"}),a.jsx("input",{type:"text",value:v,onChange:y=>m(N,x,y.target.value),placeholder:`Option ${x+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]},x))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explication (optionnel)"}),a.jsx("textarea",{value:b.explanation,onChange:v=>p(N,"explanation",v.target.value),placeholder:"Pourquoi cette rponse est correcte...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]})]},N)),s.questions.length===0&&a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[a.jsx("p",{className:"text-gray-600 mb-4",children:"Aucune question ajoute"}),a.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[a.jsx(ir,{className:"w-5 h-5"}),"Ajouter la premire question"]})]})]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"Annuler"}),a.jsxs("button",{onClick:I,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(sl,{className:"w-5 h-5"}),o?"Enregistrement...":"Enregistrer le quiz"]})]})]})}function fV({courseId:t,exercise:e,onSave:n,onCancel:r}){const[s,i]=j.useState(e||{title:"",description:"",levels:[{level:0,title:"Niveau 1: Dbutant",description:"",starterCode:"",solution:"",hints:[]},{level:1,title:"Niveau 2: Intermdiaire",description:"",starterCode:"",solution:"",hints:[]},{level:2,title:"Niveau 3: Avanc",description:"",starterCode:"",solution:"",hints:[]}]}),[o,c]=j.useState(!1),[u,d]=j.useState(""),f=(N,v,x)=>{const y=[...s.levels];y[N]={...y[N],[v]:x},i({...s,levels:y})},p=N=>{const v=[...s.levels];v[N].hints.push(""),i({...s,levels:v})},m=(N,v,x)=>{const y=[...s.levels];y[N].hints[v]=x,i({...s,levels:y})},_=(N,v)=>{const x=[...s.levels];x[N].hints.splice(v,1),i({...s,levels:x})},I=async()=>{if(!s.title.trim()){d("Le titre de l'exercice est requis");return}for(let N=0;N<s.levels.length;N++){const v=s.levels[N];if(!v.description.trim()){d(`Niveau ${N+1}: La description est requise`);return}if(!v.solution.trim()){d(`Niveau ${N+1}: La solution est requise`);return}}c(!0),d("");try{const N={...s,courseId:t,order:(e==null?void 0:e.order)||1};let v;e!=null&&e.id?v=await Ls.updateExercise(e.id,N):v=await Ls.createExercise(N),v.success?n==null||n(v):d(v.error||"Erreur lors de l'enregistrement")}catch(N){d(N.message)}finally{c(!1)}},b=N=>{switch(N){case 0:return"border-green-300 bg-green-50";case 1:return"border-yellow-300 bg-yellow-50";case 2:return"border-red-300 bg-red-50";default:return"border-gray-300 bg-gray-50"}};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?"Modifier l'Exercice":"Crer un Exercice"}),a.jsx("button",{onClick:r,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:a.jsx(Ji,{className:"w-5 h-5"})})]}),u&&a.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded flex items-start gap-3",children:[a.jsx(ig,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),a.jsx("p",{className:"text-sm text-red-800",children:u})]}),a.jsxs("div",{className:"space-y-4 mb-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de l'Exercice *"}),a.jsx("input",{type:"text",value:s.title,onChange:N=>i({...s,title:N.target.value}),placeholder:"Ex: Application To-Do List",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),a.jsx("textarea",{value:s.description,onChange:N=>i({...s,description:N.target.value}),placeholder:"Crez une application To-Do List avec React...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]})]}),a.jsxs("div",{className:"space-y-6 mb-6",children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Niveaux (3)"}),s.levels.map((N,v)=>a.jsxs("div",{className:`border-2 rounded-xl p-6 ${b(v)}`,children:[a.jsx("div",{className:"mb-4",children:a.jsx("h5",{className:"text-lg font-bold text-gray-900 mb-2",children:N.title})}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectif du niveau *"}),a.jsx("textarea",{value:N.description,onChange:x=>f(v,"description",x.target.value),placeholder:"Ce que l'tudiant doit accomplir...",rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-white"})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code de dpart (optionnel)"}),a.jsx("textarea",{value:N.starterCode,onChange:x=>f(v,"starterCode",x.target.value),placeholder:"// Code initial que l'tudiant verra...",rows:"6",className:"w-full px-4 py-2 font-mono text-sm border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-gray-900 text-green-400",spellCheck:!1})]}),a.jsxs("div",{className:"mb-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Solution *"}),a.jsx("textarea",{value:N.solution,onChange:x=>f(v,"solution",x.target.value),placeholder:"// Solution complte...",rows:"8",className:"w-full px-4 py-2 font-mono text-sm border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-gray-900 text-green-400",spellCheck:!1})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Indices (optionnel)"}),a.jsxs("button",{onClick:()=>p(v),className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:[a.jsx(ir,{className:"w-4 h-4"}),"Ajouter un indice"]})]}),a.jsx("div",{className:"space-y-2",children:N.hints.map((x,y)=>a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("input",{type:"text",value:x,onChange:T=>m(v,y,T.target.value),placeholder:`Indice ${y+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none bg-white"}),a.jsx("button",{onClick:()=>_(v,y),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:a.jsx(Va,{className:"w-4 h-4"})})]},y))})]})]},v))]}),a.jsxs("div",{className:"flex gap-3 justify-end",children:[a.jsx("button",{onClick:r,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"Annuler"}),a.jsxs("button",{onClick:I,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[a.jsx(sl,{className:"w-5 h-5"}),o?"Enregistrement...":"Enregistrer l'exercice"]})]})]})}function pV(){const{courseId:t}=em(),e=Bt(),[n]=$w(),[r,s]=j.useState(null),[i,o]=j.useState([]),[c,u]=j.useState([]),[d,f]=j.useState([]),p=n.get("tab"),m=p==="quizzes"||p==="exercises"?p:"modules",[_,I]=j.useState(m),[b,N]=j.useState(!1),[v,x]=j.useState(!1),[y,T]=j.useState(null),[D,M]=j.useState(null),[C,E]=j.useState(!0),P=[{id:"modules",name:"Modules & Leons",icon:oL},{id:"quizzes",name:"Quiz",icon:ki},{id:"exercises",name:"Exercices",icon:Pi}];j.useEffect(()=>{t&&S()},[t]);const S=async()=>{E(!0);const Y=await Yt.getCourseById(t);Y.success&&(s(Y.course),o(Y.course.modules||[]));const xe=await Ds.getQuizzesByCourse(t);xe.success&&u(xe.quizzes);const $=await Ls.getExercisesByCourse(t);$.success&&f($.exercises),E(!1)},A=async Y=>{o(Y),await Yt.updateCourse(t,{modules:Y})},R=async Y=>{N(!1),T(null),await S()},k=async Y=>{x(!1),M(null),await S()},fe=async Y=>{confirm("Supprimer ce quiz?")&&(await Ds.deleteQuiz(Y),await S())},ke=async Y=>{confirm("Supprimer cet exercice?")&&(await Ls.deleteExercise(Y),await S())};return C?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[a.jsxs("div",{className:"mb-8",children:[a.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[a.jsx(Qi,{className:"w-5 h-5"}),"Retour au tableau de bord"]}),a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:r==null?void 0:r.title}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Grer le contenu du cours"})]}),a.jsx("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsx("nav",{className:"flex -mb-px",children:P.map(Y=>{const xe=Y.icon;return a.jsxs("button",{onClick:()=>I(Y.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition ${_===Y.id?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[a.jsx(xe,{className:"w-5 h-5"}),Y.name]},Y.id)})})})}),a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[_==="modules"&&a.jsx(dV,{modules:i,onChange:A}),_==="quizzes"&&a.jsx("div",{className:"space-y-6",children:b?a.jsx(hV,{courseId:t,quiz:y,onSave:R,onCancel:()=>{N(!1),T(null)}}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Quiz (",c.length,")"]}),a.jsxs("button",{onClick:()=>N(!0),className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[a.jsx(ki,{className:"w-5 h-5"}),"Crer un quiz"]})]}),c.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[a.jsx(ki,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun quiz pour ce cours"}),a.jsx("button",{onClick:()=>N(!0),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Crer le premier quiz"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:c.map(Y=>{var xe;return a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-green-300 transition",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:Y.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Y.description}),a.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[a.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:[((xe=Y.questions)==null?void 0:xe.length)||0," questions"]}),a.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium capitalize",children:Y.difficulty})]}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{T(Y),N(!0)},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-sm font-medium",children:"Modifier"}),a.jsx("button",{onClick:()=>fe(Y.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium",children:"Supprimer"})]})]},Y.id)})})]})}),_==="exercises"&&a.jsx("div",{className:"space-y-6",children:v?a.jsx(fV,{courseId:t,exercise:D,onSave:k,onCancel:()=>{x(!1),M(null)}}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Exercices (",d.length,")"]}),a.jsxs("button",{onClick:()=>x(!0),className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[a.jsx(Pi,{className:"w-5 h-5"}),"Crer un exercice"]})]}),d.length===0?a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[a.jsx(Pi,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun exercice pour ce cours"}),a.jsx("button",{onClick:()=>x(!0),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Crer le premier exercice"})]}):a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:d.map(Y=>{var xe;return a.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-green-300 transition",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:Y.title}),a.jsx("p",{className:"text-sm text-gray-600 mb-4",children:Y.description}),a.jsx("div",{className:"flex items-center gap-2 mb-4",children:a.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:[((xe=Y.levels)==null?void 0:xe.length)||0," niveaux"]})}),a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>{M(Y),x(!0)},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-sm font-medium",children:"Modifier"}),a.jsx("button",{onClick:()=>ke(Y.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium",children:"Supprimer"})]})]},Y.id)})})]})})]})]})})}function mV(){return a.jsx(L2,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(q4,{children:a.jsxs(C2,{children:[a.jsx(ft,{path:"/login",element:a.jsx(hL,{})}),a.jsx(ft,{path:"/register",element:a.jsx(fL,{})}),a.jsx(ft,{path:"/forgot-password",element:a.jsx(pL,{})}),a.jsx(ft,{path:"/",element:a.jsx(vL,{})}),a.jsx(ft,{path:"/courses",element:a.jsx(IL,{})}),a.jsx(ft,{path:"/courses/:id",element:a.jsx(SL,{})}),a.jsx(ft,{path:"/payment/success",element:a.jsx(nV,{})}),a.jsx(ft,{path:"/payment/cancel",element:a.jsx(rV,{})}),a.jsx(ft,{path:"/profile",element:a.jsx(Js,{children:a.jsx(xL,{})})}),a.jsx(ft,{path:$T,element:a.jsx(Js,{adminOnly:!0,children:a.jsx(yx,{})})}),a.jsx(ft,{path:mL,element:a.jsx(Js,{adminOnly:!0,children:a.jsx(yx,{})})}),a.jsx(ft,{path:"/admin/courses/:courseId",element:a.jsx(Js,{adminOnly:!0,children:a.jsx(pV,{})})}),a.jsx(ft,{path:"/my-courses",element:a.jsx(Js,{children:a.jsx(tV,{})})}),a.jsx(ft,{path:"/course/:courseId/view",element:a.jsx(Js,{children:a.jsx(eV,{})})}),a.jsx(ft,{path:"*",element:a.jsx(wf,{to:"/",replace:!0})})]})})})}Ih.createRoot(document.getElementById("root")).render(a.jsx(Ax.StrictMode,{children:a.jsx(mV,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{jt as _,vx as g,CM as p,j as r,sd as u};
