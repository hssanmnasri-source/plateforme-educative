function Bb(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var yd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function zb(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var n_={exports:{}},Zu={},r_={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pa=Symbol.for("react.element"),qb=Symbol.for("react.portal"),Hb=Symbol.for("react.fragment"),Wb=Symbol.for("react.strict_mode"),Kb=Symbol.for("react.profiler"),Gb=Symbol.for("react.provider"),Qb=Symbol.for("react.context"),Yb=Symbol.for("react.forward_ref"),Xb=Symbol.for("react.suspense"),Jb=Symbol.for("react.memo"),Zb=Symbol.for("react.lazy"),ty=Symbol.iterator;function e1(t){return t===null||typeof t!="object"?null:(t=ty&&t[ty]||t["@@iterator"],typeof t=="function"?t:null)}var s_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i_=Object.assign,o_={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=o_,this.updater=n||s_}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function a_(){}a_.prototype=Ui.prototype;function Hf(t,e,n){this.props=t,this.context=e,this.refs=o_,this.updater=n||s_}var Wf=Hf.prototype=new a_;Wf.constructor=Hf;i_(Wf,Ui.prototype);Wf.isPureReactComponent=!0;var ny=Array.isArray,l_=Object.prototype.hasOwnProperty,Kf={current:null},u_={key:!0,ref:!0,__self:!0,__source:!0};function c_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)l_.call(e,r)&&!u_.hasOwnProperty(r)&&(s[r]=e[r]);var l=arguments.length-2;if(l===1)s.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)s[r]===void 0&&(s[r]=l[r]);return{$$typeof:Pa,type:t,key:i,ref:o,props:s,_owner:Kf.current}}function t1(t,e){return{$$typeof:Pa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Gf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Pa}function n1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ry=/\/+/g;function vd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?n1(""+t.key):e.toString(36)}function Ll(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Pa:case qb:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+vd(o,0):r,ny(s)?(n="",t!=null&&(n=t.replace(ry,"$&/")+"/"),Ll(s,e,n,"",function(d){return d})):s!=null&&(Gf(s)&&(s=t1(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(ry,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ny(t))for(var l=0;l<t.length;l++){i=t[l];var c=r+vd(i,l);o+=Ll(i,e,n,c,s)}else if(c=e1(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=r+vd(i,l++),o+=Ll(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],s=0;return Ll(t,r,"","",function(i){return e.call(n,i,s++)}),r}function r1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Ml={transition:null},s1={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Kf};function d_(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!Gf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ui;ee.Fragment=Hb;ee.Profiler=Kb;ee.PureComponent=Hf;ee.StrictMode=Wb;ee.Suspense=Xb;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=s1;ee.act=d_;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=i_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Kf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)l_.call(e,c)&&!u_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];r.children=l}return{$$typeof:Pa,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:Qb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Gb,_context:t},t.Consumer=t};ee.createElement=c_;ee.createFactory=function(t){var e=c_.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:Yb,render:t}};ee.isValidElement=Gf;ee.lazy=function(t){return{$$typeof:Zb,_payload:{_status:-1,_result:t},_init:r1}};ee.memo=function(t,e){return{$$typeof:Jb,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};ee.unstable_act=d_;ee.useCallback=function(t,e){return It.current.useCallback(t,e)};ee.useContext=function(t){return It.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ee.useEffect=function(t,e){return It.current.useEffect(t,e)};ee.useId=function(){return It.current.useId()};ee.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return It.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ee.useRef=function(t){return It.current.useRef(t)};ee.useState=function(t){return It.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return It.current.useTransition()};ee.version="18.3.1";r_.exports=ee;var O=r_.exports;const h_=t_(O),i1=Bb({__proto__:null,default:h_},[O]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=O,a1=Symbol.for("react.element"),l1=Symbol.for("react.fragment"),u1=Object.prototype.hasOwnProperty,c1=o1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,d1={key:!0,ref:!0,__self:!0,__source:!0};function f_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)u1.call(e,r)&&!d1.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:a1,type:t,key:i,ref:o,props:s,_owner:c1.current}}Zu.Fragment=l1;Zu.jsx=f_;Zu.jsxs=f_;n_.exports=Zu;var u=n_.exports,hh={},p_={exports:{}},zt={},m_={exports:{}},g_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(z,Q){var Z=z.length;z.push(Q);e:for(;0<Z;){var we=Z-1>>>1,ue=z[we];if(0<s(ue,Q))z[we]=Q,z[Z]=ue,Z=we;else break e}}function n(z){return z.length===0?null:z[0]}function r(z){if(z.length===0)return null;var Q=z[0],Z=z.pop();if(Z!==Q){z[0]=Z;e:for(var we=0,ue=z.length,Se=ue>>>1;we<Se;){var On=2*(we+1)-1,Dn=z[On],Ln=On+1,Mn=z[Ln];if(0>s(Dn,Z))Ln<ue&&0>s(Mn,Dn)?(z[we]=Mn,z[Ln]=Z,we=Ln):(z[we]=Dn,z[On]=Z,we=On);else if(Ln<ue&&0>s(Mn,Z))z[we]=Mn,z[Ln]=Z,we=Ln;else break e}}return Q}function s(z,Q){var Z=z.sortIndex-Q.sortIndex;return Z!==0?Z:z.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],f=1,g=null,m=3,T=!1,b=!1,N=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(z){for(var Q=n(d);Q!==null;){if(Q.callback===null)r(d);else if(Q.startTime<=z)r(d),Q.sortIndex=Q.expirationTime,e(c,Q);else break;Q=n(d)}}function k(z){if(N=!1,y(z),!b)if(n(c)!==null)b=!0,Yi(L);else{var Q=n(d);Q!==null&&jn(k,Q.startTime-z)}}function L(z,Q){b=!1,N&&(N=!1,x(_),_=-1),T=!0;var Z=m;try{for(y(Q),g=n(c);g!==null&&(!(g.expirationTime>Q)||z&&!C());){var we=g.callback;if(typeof we=="function"){g.callback=null,m=g.priorityLevel;var ue=we(g.expirationTime<=Q);Q=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(c)&&r(c),y(Q)}else r(c);g=n(c)}if(g!==null)var Se=!0;else{var On=n(d);On!==null&&jn(k,On.startTime-Q),Se=!1}return Se}finally{g=null,m=Z,T=!1}}var V=!1,I=null,_=-1,S=5,E=-1;function C(){return!(t.unstable_now()-E<S)}function R(){if(I!==null){var z=t.unstable_now();E=z;var Q=!0;try{Q=I(!0,z)}finally{Q?P():(V=!1,I=null)}}else V=!1}var P;if(typeof w=="function")P=function(){w(R)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Rn=He.port2;He.port1.onmessage=R,P=function(){Rn.postMessage(null)}}else P=function(){A(R,0)};function Yi(z){I=z,V||(V=!0,P())}function jn(z,Q){_=A(function(){z(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(z){z.callback=null},t.unstable_continueExecution=function(){b||T||(b=!0,Yi(L))},t.unstable_forceFrameRate=function(z){0>z||125<z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<z?Math.floor(1e3/z):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(z){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var Z=m;m=Q;try{return z()}finally{m=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(z,Q){switch(z){case 1:case 2:case 3:case 4:case 5:break;default:z=3}var Z=m;m=z;try{return Q()}finally{m=Z}},t.unstable_scheduleCallback=function(z,Q,Z){var we=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?we+Z:we):Z=we,z){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,z={id:f++,callback:Q,priorityLevel:z,startTime:Z,expirationTime:ue,sortIndex:-1},Z>we?(z.sortIndex=Z,e(d,z),n(c)===null&&z===n(d)&&(N?(x(_),_=-1):N=!0,jn(k,Z-we))):(z.sortIndex=ue,e(c,z),b||T||(b=!0,Yi(L))),z},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(z){var Q=m;return function(){var Z=m;m=Q;try{return z.apply(this,arguments)}finally{m=Z}}}})(g_);m_.exports=g_;var h1=m_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f1=O,Bt=h1;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var y_=new Set,Go={};function Ss(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(Go[t]=e,t=0;t<e.length;t++)y_.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fh=Object.prototype.hasOwnProperty,p1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sy={},iy={};function m1(t){return fh.call(iy,t)?!0:fh.call(sy,t)?!1:p1.test(t)?iy[t]=!0:(sy[t]=!0,!1)}function g1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function y1(t,e,n,r){if(e===null||typeof e>"u"||g1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var et={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){et[t]=new bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];et[e]=new bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){et[t]=new bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){et[t]=new bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){et[t]=new bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){et[t]=new bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){et[t]=new bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){et[t]=new bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){et[t]=new bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Qf=/[\-:]([a-z])/g;function Yf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Qf,Yf);et[e]=new bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Qf,Yf);et[e]=new bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Qf,Yf);et[e]=new bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){et[t]=new bt(t,1,!1,t.toLowerCase(),null,!1,!1)});et.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){et[t]=new bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Xf(t,e,n,r){var s=et.hasOwnProperty(e)?et[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(y1(e,n,s,r)&&(n=null),r||s===null?m1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=f1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Gs=Symbol.for("react.portal"),Qs=Symbol.for("react.fragment"),Jf=Symbol.for("react.strict_mode"),ph=Symbol.for("react.profiler"),v_=Symbol.for("react.provider"),__=Symbol.for("react.context"),Zf=Symbol.for("react.forward_ref"),mh=Symbol.for("react.suspense"),gh=Symbol.for("react.suspense_list"),ep=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),w_=Symbol.for("react.offscreen"),oy=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=oy&&t[oy]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,_d;function To(t){if(_d===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);_d=e&&e[1]||""}return`
`+_d+t}var wd=!1;function xd(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,l=i.length-1;1<=o&&0<=l&&s[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(s[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||s[o]!==i[l]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function v1(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=xd(t.type,!1),t;case 11:return t=xd(t.type.render,!1),t;case 1:return t=xd(t.type,!0),t;default:return""}}function yh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Qs:return"Fragment";case Gs:return"Portal";case ph:return"Profiler";case Jf:return"StrictMode";case mh:return"Suspense";case gh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case __:return(t.displayName||"Context")+".Consumer";case v_:return(t._context.displayName||"Context")+".Provider";case Zf:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ep:return e=t.displayName||null,e!==null?e:yh(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return yh(t(e))}catch{}}return null}function _1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yh(e);case 8:return e===Jf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function x_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function w1(t){var e=x_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=w1(t))}function E_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=x_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function vh(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ay(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function T_(t,e){e=e.checked,e!=null&&Xf(t,"checked",e,!1)}function _h(t,e){T_(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wh(t,e.type,n):e.hasOwnProperty("defaultValue")&&wh(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ly(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wh(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Io=Array.isArray;function li(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function xh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(Io(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function I_(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function cy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function b_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?b_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,N_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},x1=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(t){x1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oo[e]=Oo[t]})});function S_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oo.hasOwnProperty(t)&&Oo[t]?(""+e).trim():e+"px"}function P_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=S_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var E1=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Th(t,e){if(e){if(E1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bh=null;function tp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Nh=null,ui=null,ci=null;function dy(t){if(t=Ca(t)){if(typeof Nh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=sc(e),Nh(t.stateNode,t.type,e))}}function A_(t){ui?ci?ci.push(t):ci=[t]:ui=t}function k_(){if(ui){var t=ui,e=ci;if(ci=ui=null,dy(t),e)for(t=0;t<e.length;t++)dy(e[t])}}function C_(t,e){return t(e)}function R_(){}var Ed=!1;function j_(t,e,n){if(Ed)return t(e,n);Ed=!0;try{return C_(t,e,n)}finally{Ed=!1,(ui!==null||ci!==null)&&(R_(),k_())}}function Yo(t,e){var n=t.stateNode;if(n===null)return null;var r=sc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Sh=!1;if(Zn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Sh=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Sh=!1}function T1(t,e,n,r,s,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Do=!1,ou=null,au=!1,Ph=null,I1={onError:function(t){Do=!0,ou=t}};function b1(t,e,n,r,s,i,o,l,c){Do=!1,ou=null,T1.apply(I1,arguments)}function N1(t,e,n,r,s,i,o,l,c){if(b1.apply(this,arguments),Do){if(Do){var d=ou;Do=!1,ou=null}else throw Error(F(198));au||(au=!0,Ph=d)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function O_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function hy(t){if(Ps(t)!==t)throw Error(F(188))}function S1(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return hy(s),t;if(i===r)return hy(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function D_(t){return t=S1(t),t!==null?L_(t):null}function L_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=L_(t);if(e!==null)return e;t=t.sibling}return null}var M_=Bt.unstable_scheduleCallback,fy=Bt.unstable_cancelCallback,P1=Bt.unstable_shouldYield,A1=Bt.unstable_requestPaint,Ce=Bt.unstable_now,k1=Bt.unstable_getCurrentPriorityLevel,np=Bt.unstable_ImmediatePriority,V_=Bt.unstable_UserBlockingPriority,lu=Bt.unstable_NormalPriority,C1=Bt.unstable_LowPriority,U_=Bt.unstable_IdlePriority,ec=null,xn=null;function R1(t){if(xn&&typeof xn.onCommitFiberRoot=="function")try{xn.onCommitFiberRoot(ec,t,void 0,(t.current.flags&128)===128)}catch{}}var ln=Math.clz32?Math.clz32:D1,j1=Math.log,O1=Math.LN2;function D1(t){return t>>>=0,t===0?32:31-(j1(t)/O1|0)|0}var yl=64,vl=4194304;function bo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~s;l!==0?r=bo(l):(i&=o,i!==0&&(r=bo(i)))}else o=n&~s,o!==0?r=bo(o):i!==0&&(r=bo(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ln(e),s=1<<n,r|=t[n],e&=~s;return r}function L1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function M1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ln(i),l=1<<o,c=s[o];c===-1?(!(l&n)||l&r)&&(s[o]=L1(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Ah(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function F_(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function Td(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Aa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ln(e),t[e]=n}function V1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-ln(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function rp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ln(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function $_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,sp,z_,q_,H_,kh=!1,_l=[],Ar=null,kr=null,Cr=null,Xo=new Map,Jo=new Map,_r=[],U1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function py(t,e){switch(t){case"focusin":case"focusout":Ar=null;break;case"dragenter":case"dragleave":kr=null;break;case"mouseover":case"mouseout":Cr=null;break;case"pointerover":case"pointerout":Xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=Ca(e),e!==null&&sp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function F1(t,e,n,r,s){switch(e){case"focusin":return Ar=fo(Ar,t,e,n,r,s),!0;case"dragenter":return kr=fo(kr,t,e,n,r,s),!0;case"mouseover":return Cr=fo(Cr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xo.set(i,fo(Xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Jo.set(i,fo(Jo.get(i)||null,t,e,n,r,s)),!0}return!1}function W_(t){var e=os(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=O_(n),e!==null){t.blockedOn=e,H_(t.priority,function(){z_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ch(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);bh=r,n.target.dispatchEvent(r),bh=null}else return e=Ca(n),e!==null&&sp(e),t.blockedOn=n,!1;e.shift()}return!0}function my(t,e,n){Vl(t)&&n.delete(e)}function $1(){kh=!1,Ar!==null&&Vl(Ar)&&(Ar=null),kr!==null&&Vl(kr)&&(kr=null),Cr!==null&&Vl(Cr)&&(Cr=null),Xo.forEach(my),Jo.forEach(my)}function po(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,Bt.unstable_scheduleCallback(Bt.unstable_NormalPriority,$1)))}function Zo(t){function e(s){return po(s,t)}if(0<_l.length){po(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Ar!==null&&po(Ar,t),kr!==null&&po(kr,t),Cr!==null&&po(Cr,t),Xo.forEach(e),Jo.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)W_(n),n.blockedOn===null&&_r.shift()}var di=ar.ReactCurrentBatchConfig,cu=!0;function B1(t,e,n,r){var s=ae,i=di.transition;di.transition=null;try{ae=1,ip(t,e,n,r)}finally{ae=s,di.transition=i}}function z1(t,e,n,r){var s=ae,i=di.transition;di.transition=null;try{ae=4,ip(t,e,n,r)}finally{ae=s,di.transition=i}}function ip(t,e,n,r){if(cu){var s=Ch(t,e,n,r);if(s===null)jd(t,e,r,du,n),py(t,r);else if(F1(s,t,e,n,r))r.stopPropagation();else if(py(t,r),e&4&&-1<U1.indexOf(t)){for(;s!==null;){var i=Ca(s);if(i!==null&&B_(i),i=Ch(t,e,n,r),i===null&&jd(t,e,r,du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else jd(t,e,r,null,n)}}var du=null;function Ch(t,e,n,r){if(du=null,t=tp(r),t=os(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=O_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return du=t,null}function K_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(k1()){case np:return 1;case V_:return 4;case lu:case C1:return 16;case U_:return 536870912;default:return 16}default:return 16}}var Ir=null,op=null,Ul=null;function G_(){if(Ul)return Ul;var t,e=op,n=e.length,r,s="value"in Ir?Ir.value:Ir.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ul=s.slice(t,1<r?1-r:void 0)}function Fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function wl(){return!0}function gy(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?wl:gy,this.isPropagationStopped=gy,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=wl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=wl)},persist:function(){},isPersistent:wl}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ap=qt(Fi),ka=Te({},Fi,{view:0,detail:0}),q1=qt(ka),Id,bd,mo,tc=Te({},ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:lp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mo&&(mo&&t.type==="mousemove"?(Id=t.screenX-mo.screenX,bd=t.screenY-mo.screenY):bd=Id=0,mo=t),Id)},movementY:function(t){return"movementY"in t?t.movementY:bd}}),yy=qt(tc),H1=Te({},tc,{dataTransfer:0}),W1=qt(H1),K1=Te({},ka,{relatedTarget:0}),Nd=qt(K1),G1=Te({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),Q1=qt(G1),Y1=Te({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),X1=qt(Y1),J1=Te({},Fi,{data:0}),vy=qt(J1),Z1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},eN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},tN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function nN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=tN[t])?!!e[t]:!1}function lp(){return nN}var rN=Te({},ka,{key:function(t){if(t.key){var e=Z1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?eN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:lp,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),sN=qt(rN),iN=Te({},tc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_y=qt(iN),oN=Te({},ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:lp}),aN=qt(oN),lN=Te({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),uN=qt(lN),cN=Te({},tc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),dN=qt(cN),hN=[9,13,27,32],up=Zn&&"CompositionEvent"in window,Lo=null;Zn&&"documentMode"in document&&(Lo=document.documentMode);var fN=Zn&&"TextEvent"in window&&!Lo,Q_=Zn&&(!up||Lo&&8<Lo&&11>=Lo),wy=" ",xy=!1;function Y_(t,e){switch(t){case"keyup":return hN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function X_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ys=!1;function pN(t,e){switch(t){case"compositionend":return X_(e);case"keypress":return e.which!==32?null:(xy=!0,wy);case"textInput":return t=e.data,t===wy&&xy?null:t;default:return null}}function mN(t,e){if(Ys)return t==="compositionend"||!up&&Y_(t,e)?(t=G_(),Ul=op=Ir=null,Ys=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Q_&&e.locale!=="ko"?null:e.data;default:return null}}var gN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ey(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!gN[t.type]:e==="textarea"}function J_(t,e,n,r){A_(r),e=hu(e,"onChange"),0<e.length&&(n=new ap("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mo=null,ea=null;function yN(t){uw(t,0)}function nc(t){var e=Zs(t);if(E_(e))return t}function vN(t,e){if(t==="change")return e}var Z_=!1;if(Zn){var Sd;if(Zn){var Pd="oninput"in document;if(!Pd){var Ty=document.createElement("div");Ty.setAttribute("oninput","return;"),Pd=typeof Ty.oninput=="function"}Sd=Pd}else Sd=!1;Z_=Sd&&(!document.documentMode||9<document.documentMode)}function Iy(){Mo&&(Mo.detachEvent("onpropertychange",ew),ea=Mo=null)}function ew(t){if(t.propertyName==="value"&&nc(ea)){var e=[];J_(e,ea,t,tp(t)),j_(yN,e)}}function _N(t,e,n){t==="focusin"?(Iy(),Mo=e,ea=n,Mo.attachEvent("onpropertychange",ew)):t==="focusout"&&Iy()}function wN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return nc(ea)}function xN(t,e){if(t==="click")return nc(e)}function EN(t,e){if(t==="input"||t==="change")return nc(e)}function TN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hn=typeof Object.is=="function"?Object.is:TN;function ta(t,e){if(hn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!fh.call(e,s)||!hn(t[s],e[s]))return!1}return!0}function by(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ny(t,e){var n=by(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=by(n)}}function tw(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?tw(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function nw(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function cp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function IN(t){var e=nw(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&tw(n.ownerDocument.documentElement,n)){if(r!==null&&cp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Ny(n,i);var o=Ny(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bN=Zn&&"documentMode"in document&&11>=document.documentMode,Xs=null,Rh=null,Vo=null,jh=!1;function Sy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;jh||Xs==null||Xs!==iu(r)||(r=Xs,"selectionStart"in r&&cp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&ta(Vo,r)||(Vo=r,r=hu(Rh,"onSelect"),0<r.length&&(e=new ap("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Xs)))}function xl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Js={animationend:xl("Animation","AnimationEnd"),animationiteration:xl("Animation","AnimationIteration"),animationstart:xl("Animation","AnimationStart"),transitionend:xl("Transition","TransitionEnd")},Ad={},rw={};Zn&&(rw=document.createElement("div").style,"AnimationEvent"in window||(delete Js.animationend.animation,delete Js.animationiteration.animation,delete Js.animationstart.animation),"TransitionEvent"in window||delete Js.transitionend.transition);function rc(t){if(Ad[t])return Ad[t];if(!Js[t])return t;var e=Js[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in rw)return Ad[t]=e[n];return t}var sw=rc("animationend"),iw=rc("animationiteration"),ow=rc("animationstart"),aw=rc("transitionend"),lw=new Map,Py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){lw.set(t,e),Ss(e,[t])}for(var kd=0;kd<Py.length;kd++){var Cd=Py[kd],NN=Cd.toLowerCase(),SN=Cd[0].toUpperCase()+Cd.slice(1);Wr(NN,"on"+SN)}Wr(sw,"onAnimationEnd");Wr(iw,"onAnimationIteration");Wr(ow,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(aw,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);Ss("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ss("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ss("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ss("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ss("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),PN=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Ay(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,N1(r,e,void 0,t),t.currentTarget=null}function uw(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&s.isPropagationStopped())break e;Ay(s,l,d),i=c}else for(o=0;o<r.length;o++){if(l=r[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&s.isPropagationStopped())break e;Ay(s,l,d),i=c}}}if(au)throw t=Ph,au=!1,Ph=null,t}function ge(t,e){var n=e[Vh];n===void 0&&(n=e[Vh]=new Set);var r=t+"__bubble";n.has(r)||(cw(e,t,2,!1),n.add(r))}function Rd(t,e,n){var r=0;e&&(r|=4),cw(n,t,r,e)}var El="_reactListening"+Math.random().toString(36).slice(2);function na(t){if(!t[El]){t[El]=!0,y_.forEach(function(n){n!=="selectionchange"&&(PN.has(n)||Rd(n,!1,t),Rd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[El]||(e[El]=!0,Rd("selectionchange",!1,e))}}function cw(t,e,n,r){switch(K_(e)){case 1:var s=B1;break;case 4:s=z1;break;default:s=ip}n=s.bind(null,e,n,t),s=void 0,!Sh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function jd(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===s||l.nodeType===8&&l.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;l!==null;){if(o=os(l),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}l=l.parentNode}}r=r.return}j_(function(){var d=i,f=tp(n),g=[];e:{var m=lw.get(t);if(m!==void 0){var T=ap,b=t;switch(t){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":T=sN;break;case"focusin":b="focus",T=Nd;break;case"focusout":b="blur",T=Nd;break;case"beforeblur":case"afterblur":T=Nd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":T=yy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":T=W1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":T=aN;break;case sw:case iw:case ow:T=Q1;break;case aw:T=uN;break;case"scroll":T=q1;break;case"wheel":T=dN;break;case"copy":case"cut":case"paste":T=X1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":T=_y}var N=(e&4)!==0,A=!N&&t==="scroll",x=N?m!==null?m+"Capture":null:m;N=[];for(var w=d,y;w!==null;){y=w;var k=y.stateNode;if(y.tag===5&&k!==null&&(y=k,x!==null&&(k=Yo(w,x),k!=null&&N.push(ra(w,k,y)))),A)break;w=w.return}0<N.length&&(m=new T(m,b,null,n,f),g.push({event:m,listeners:N}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",T=t==="mouseout"||t==="pointerout",m&&n!==bh&&(b=n.relatedTarget||n.fromElement)&&(os(b)||b[er]))break e;if((T||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,T?(b=n.relatedTarget||n.toElement,T=d,b=b?os(b):null,b!==null&&(A=Ps(b),b!==A||b.tag!==5&&b.tag!==6)&&(b=null)):(T=null,b=d),T!==b)){if(N=yy,k="onMouseLeave",x="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(N=_y,k="onPointerLeave",x="onPointerEnter",w="pointer"),A=T==null?m:Zs(T),y=b==null?m:Zs(b),m=new N(k,w+"leave",T,n,f),m.target=A,m.relatedTarget=y,k=null,os(f)===d&&(N=new N(x,w+"enter",b,n,f),N.target=y,N.relatedTarget=A,k=N),A=k,T&&b)t:{for(N=T,x=b,w=0,y=N;y;y=Fs(y))w++;for(y=0,k=x;k;k=Fs(k))y++;for(;0<w-y;)N=Fs(N),w--;for(;0<y-w;)x=Fs(x),y--;for(;w--;){if(N===x||x!==null&&N===x.alternate)break t;N=Fs(N),x=Fs(x)}N=null}else N=null;T!==null&&ky(g,m,T,N,!1),b!==null&&A!==null&&ky(g,A,b,N,!0)}}e:{if(m=d?Zs(d):window,T=m.nodeName&&m.nodeName.toLowerCase(),T==="select"||T==="input"&&m.type==="file")var L=vN;else if(Ey(m))if(Z_)L=EN;else{L=wN;var V=_N}else(T=m.nodeName)&&T.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(L=xN);if(L&&(L=L(t,d))){J_(g,L,n,f);break e}V&&V(t,m,d),t==="focusout"&&(V=m._wrapperState)&&V.controlled&&m.type==="number"&&wh(m,"number",m.value)}switch(V=d?Zs(d):window,t){case"focusin":(Ey(V)||V.contentEditable==="true")&&(Xs=V,Rh=d,Vo=null);break;case"focusout":Vo=Rh=Xs=null;break;case"mousedown":jh=!0;break;case"contextmenu":case"mouseup":case"dragend":jh=!1,Sy(g,n,f);break;case"selectionchange":if(bN)break;case"keydown":case"keyup":Sy(g,n,f)}var I;if(up)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Ys?Y_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Q_&&n.locale!=="ko"&&(Ys||_!=="onCompositionStart"?_==="onCompositionEnd"&&Ys&&(I=G_()):(Ir=f,op="value"in Ir?Ir.value:Ir.textContent,Ys=!0)),V=hu(d,_),0<V.length&&(_=new vy(_,t,null,n,f),g.push({event:_,listeners:V}),I?_.data=I:(I=X_(n),I!==null&&(_.data=I)))),(I=fN?pN(t,n):mN(t,n))&&(d=hu(d,"onBeforeInput"),0<d.length&&(f=new vy("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=I))}uw(g,e)})}function ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yo(t,n),i!=null&&r.unshift(ra(t,i,s)),i=Yo(t,e),i!=null&&r.push(ra(t,i,s))),t=t.return}return r}function Fs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===r)break;l.tag===5&&d!==null&&(l=d,s?(c=Yo(n,i),c!=null&&o.unshift(ra(n,c,l))):s||(c=Yo(n,i),c!=null&&o.push(ra(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var AN=/\r\n?/g,kN=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(AN,`
`).replace(kN,"")}function Tl(t,e,n){if(e=Cy(e),Cy(t)!==e&&n)throw Error(F(425))}function fu(){}var Oh=null,Dh=null;function Lh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Mh=typeof setTimeout=="function"?setTimeout:void 0,CN=typeof clearTimeout=="function"?clearTimeout:void 0,Ry=typeof Promise=="function"?Promise:void 0,RN=typeof queueMicrotask=="function"?queueMicrotask:typeof Ry<"u"?function(t){return Ry.resolve(null).then(t).catch(jN)}:Mh;function jN(t){setTimeout(function(){throw t})}function Od(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zo(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),_n="__reactFiber$"+$i,sa="__reactProps$"+$i,er="__reactContainer$"+$i,Vh="__reactEvents$"+$i,ON="__reactListeners$"+$i,DN="__reactHandles$"+$i;function os(t){var e=t[_n];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[_n]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=jy(t);t!==null;){if(n=t[_n])return n;t=jy(t)}return e}t=n,n=t.parentNode}return null}function Ca(t){return t=t[_n]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Zs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function sc(t){return t[sa]||null}var Uh=[],ei=-1;function Kr(t){return{current:t}}function ye(t){0>ei||(t.current=Uh[ei],Uh[ei]=null,ei--)}function pe(t,e){ei++,Uh[ei]=t.current,t.current=e}var $r={},ft=Kr($r),Ct=Kr(!1),ms=$r;function wi(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Rt(t){return t=t.childContextTypes,t!=null}function pu(){ye(Ct),ye(ft)}function Oy(t,e,n){if(ft.current!==$r)throw Error(F(168));pe(ft,e),pe(Ct,n)}function dw(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,_1(t)||"Unknown",s));return Te({},n,r)}function mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,ms=ft.current,pe(ft,t),pe(Ct,Ct.current),!0}function Dy(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=dw(t,e,ms),r.__reactInternalMemoizedMergedChildContext=t,ye(Ct),ye(ft),pe(ft,t)):ye(Ct),pe(Ct,n)}var Bn=null,ic=!1,Dd=!1;function hw(t){Bn===null?Bn=[t]:Bn.push(t)}function LN(t){ic=!0,hw(t)}function Gr(){if(!Dd&&Bn!==null){Dd=!0;var t=0,e=ae;try{var n=Bn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Bn=null,ic=!1}catch(s){throw Bn!==null&&(Bn=Bn.slice(t+1)),M_(np,Gr),s}finally{ae=e,Dd=!1}}return null}var ti=[],ni=0,gu=null,yu=0,Ht=[],Wt=0,gs=null,qn=1,Hn="";function ns(t,e){ti[ni++]=yu,ti[ni++]=gu,gu=t,yu=e}function fw(t,e,n){Ht[Wt++]=qn,Ht[Wt++]=Hn,Ht[Wt++]=gs,gs=t;var r=qn;t=Hn;var s=32-ln(r)-1;r&=~(1<<s),n+=1;var i=32-ln(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qn=1<<32-ln(e)+s|n<<s|r,Hn=i+t}else qn=1<<i|n<<s|r,Hn=t}function dp(t){t.return!==null&&(ns(t,1),fw(t,1,0))}function hp(t){for(;t===gu;)gu=ti[--ni],ti[ni]=null,yu=ti[--ni],ti[ni]=null;for(;t===gs;)gs=Ht[--Wt],Ht[Wt]=null,Hn=Ht[--Wt],Ht[Wt]=null,qn=Ht[--Wt],Ht[Wt]=null}var $t=null,Vt=null,ve=!1,sn=null;function pw(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ly(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Vt=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=gs!==null?{id:qn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Vt=null,!0):!1;default:return!1}}function Fh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function $h(t){if(ve){var e=Vt;if(e){var n=e;if(!Ly(t,e)){if(Fh(t))throw Error(F(418));e=Rr(n.nextSibling);var r=$t;e&&Ly(t,e)?pw(r,n):(t.flags=t.flags&-4097|2,ve=!1,$t=t)}}else{if(Fh(t))throw Error(F(418));t.flags=t.flags&-4097|2,ve=!1,$t=t}}}function My(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function Il(t){if(t!==$t)return!1;if(!ve)return My(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Lh(t.type,t.memoizedProps)),e&&(e=Vt)){if(Fh(t))throw mw(),Error(F(418));for(;e;)pw(t,e),e=Rr(e.nextSibling)}if(My(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Vt=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Vt=null}}else Vt=$t?Rr(t.stateNode.nextSibling):null;return!0}function mw(){for(var t=Vt;t;)t=Rr(t.nextSibling)}function xi(){Vt=$t=null,ve=!1}function fp(t){sn===null?sn=[t]:sn.push(t)}var MN=ar.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=s.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function bl(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Vy(t){var e=t._init;return e(t._payload)}function gw(t){function e(x,w){if(t){var y=x.deletions;y===null?(x.deletions=[w],x.flags|=16):y.push(w)}}function n(x,w){if(!t)return null;for(;w!==null;)e(x,w),w=w.sibling;return null}function r(x,w){for(x=new Map;w!==null;)w.key!==null?x.set(w.key,w):x.set(w.index,w),w=w.sibling;return x}function s(x,w){return x=Lr(x,w),x.index=0,x.sibling=null,x}function i(x,w,y){return x.index=y,t?(y=x.alternate,y!==null?(y=y.index,y<w?(x.flags|=2,w):y):(x.flags|=2,w)):(x.flags|=1048576,w)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,w,y,k){return w===null||w.tag!==6?(w=Bd(y,x.mode,k),w.return=x,w):(w=s(w,y),w.return=x,w)}function c(x,w,y,k){var L=y.type;return L===Qs?f(x,w,y.props.children,k,y.key):w!==null&&(w.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&Vy(L)===w.type)?(k=s(w,y.props),k.ref=go(x,w,y),k.return=x,k):(k=Kl(y.type,y.key,y.props,null,x.mode,k),k.ref=go(x,w,y),k.return=x,k)}function d(x,w,y,k){return w===null||w.tag!==4||w.stateNode.containerInfo!==y.containerInfo||w.stateNode.implementation!==y.implementation?(w=zd(y,x.mode,k),w.return=x,w):(w=s(w,y.children||[]),w.return=x,w)}function f(x,w,y,k,L){return w===null||w.tag!==7?(w=fs(y,x.mode,k,L),w.return=x,w):(w=s(w,y),w.return=x,w)}function g(x,w,y){if(typeof w=="string"&&w!==""||typeof w=="number")return w=Bd(""+w,x.mode,y),w.return=x,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case pl:return y=Kl(w.type,w.key,w.props,null,x.mode,y),y.ref=go(x,null,w),y.return=x,y;case Gs:return w=zd(w,x.mode,y),w.return=x,w;case yr:var k=w._init;return g(x,k(w._payload),y)}if(Io(w)||co(w))return w=fs(w,x.mode,y,null),w.return=x,w;bl(x,w)}return null}function m(x,w,y,k){var L=w!==null?w.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return L!==null?null:l(x,w,""+y,k);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return y.key===L?c(x,w,y,k):null;case Gs:return y.key===L?d(x,w,y,k):null;case yr:return L=y._init,m(x,w,L(y._payload),k)}if(Io(y)||co(y))return L!==null?null:f(x,w,y,k,null);bl(x,y)}return null}function T(x,w,y,k,L){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(y)||null,l(w,x,""+k,L);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case pl:return x=x.get(k.key===null?y:k.key)||null,c(w,x,k,L);case Gs:return x=x.get(k.key===null?y:k.key)||null,d(w,x,k,L);case yr:var V=k._init;return T(x,w,y,V(k._payload),L)}if(Io(k)||co(k))return x=x.get(y)||null,f(w,x,k,L,null);bl(w,k)}return null}function b(x,w,y,k){for(var L=null,V=null,I=w,_=w=0,S=null;I!==null&&_<y.length;_++){I.index>_?(S=I,I=null):S=I.sibling;var E=m(x,I,y[_],k);if(E===null){I===null&&(I=S);break}t&&I&&E.alternate===null&&e(x,I),w=i(E,w,_),V===null?L=E:V.sibling=E,V=E,I=S}if(_===y.length)return n(x,I),ve&&ns(x,_),L;if(I===null){for(;_<y.length;_++)I=g(x,y[_],k),I!==null&&(w=i(I,w,_),V===null?L=I:V.sibling=I,V=I);return ve&&ns(x,_),L}for(I=r(x,I);_<y.length;_++)S=T(I,x,_,y[_],k),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?_:S.key),w=i(S,w,_),V===null?L=S:V.sibling=S,V=S);return t&&I.forEach(function(C){return e(x,C)}),ve&&ns(x,_),L}function N(x,w,y,k){var L=co(y);if(typeof L!="function")throw Error(F(150));if(y=L.call(y),y==null)throw Error(F(151));for(var V=L=null,I=w,_=w=0,S=null,E=y.next();I!==null&&!E.done;_++,E=y.next()){I.index>_?(S=I,I=null):S=I.sibling;var C=m(x,I,E.value,k);if(C===null){I===null&&(I=S);break}t&&I&&C.alternate===null&&e(x,I),w=i(C,w,_),V===null?L=C:V.sibling=C,V=C,I=S}if(E.done)return n(x,I),ve&&ns(x,_),L;if(I===null){for(;!E.done;_++,E=y.next())E=g(x,E.value,k),E!==null&&(w=i(E,w,_),V===null?L=E:V.sibling=E,V=E);return ve&&ns(x,_),L}for(I=r(x,I);!E.done;_++,E=y.next())E=T(I,x,_,E.value,k),E!==null&&(t&&E.alternate!==null&&I.delete(E.key===null?_:E.key),w=i(E,w,_),V===null?L=E:V.sibling=E,V=E);return t&&I.forEach(function(R){return e(x,R)}),ve&&ns(x,_),L}function A(x,w,y,k){if(typeof y=="object"&&y!==null&&y.type===Qs&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:e:{for(var L=y.key,V=w;V!==null;){if(V.key===L){if(L=y.type,L===Qs){if(V.tag===7){n(x,V.sibling),w=s(V,y.props.children),w.return=x,x=w;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&Vy(L)===V.type){n(x,V.sibling),w=s(V,y.props),w.ref=go(x,V,y),w.return=x,x=w;break e}n(x,V);break}else e(x,V);V=V.sibling}y.type===Qs?(w=fs(y.props.children,x.mode,k,y.key),w.return=x,x=w):(k=Kl(y.type,y.key,y.props,null,x.mode,k),k.ref=go(x,w,y),k.return=x,x=k)}return o(x);case Gs:e:{for(V=y.key;w!==null;){if(w.key===V)if(w.tag===4&&w.stateNode.containerInfo===y.containerInfo&&w.stateNode.implementation===y.implementation){n(x,w.sibling),w=s(w,y.children||[]),w.return=x,x=w;break e}else{n(x,w);break}else e(x,w);w=w.sibling}w=zd(y,x.mode,k),w.return=x,x=w}return o(x);case yr:return V=y._init,A(x,w,V(y._payload),k)}if(Io(y))return b(x,w,y,k);if(co(y))return N(x,w,y,k);bl(x,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,w!==null&&w.tag===6?(n(x,w.sibling),w=s(w,y),w.return=x,x=w):(n(x,w),w=Bd(y,x.mode,k),w.return=x,x=w),o(x)):n(x,w)}return A}var Ei=gw(!0),yw=gw(!1),vu=Kr(null),_u=null,ri=null,pp=null;function mp(){pp=ri=_u=null}function gp(t){var e=vu.current;ye(vu),t._currentValue=e}function Bh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hi(t,e){_u=t,pp=ri=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(pp!==t)if(t={context:t,memoizedValue:e,next:null},ri===null){if(_u===null)throw Error(F(308));ri=t,_u.dependencies={lanes:0,firstContext:t}}else ri=ri.next=t;return e}var as=null;function yp(t){as===null?as=[t]:as.push(t)}function vw(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,yp(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function vp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _w(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,yp(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}function Uy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wu(t,e,n,r){var s=t.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,l=s.shared.pending;if(l!==null){s.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,l=f.lastBaseUpdate,l!==o&&(l===null?f.firstBaseUpdate=d:l.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,l=i;do{var m=l.lane,T=l.eventTime;if((r&m)===m){f!==null&&(f=f.next={eventTime:T,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,N=l;switch(m=e,T=n,N.tag){case 1:if(b=N.payload,typeof b=="function"){g=b.call(T,g,m);break e}g=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=N.payload,m=typeof b=="function"?b.call(T,g,m):b,m==null)break e;g=Te({},g,m);break e;case 2:vr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,m=s.effects,m===null?s.effects=[l]:m.push(l))}else T={eventTime:T,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},f===null?(d=f=T,c=g):f=f.next=T,o|=m;if(l=l.next,l===null){if(l=s.shared.pending,l===null)break;m=l,l=m.next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);vs|=o,t.lanes=o,t.memoizedState=g}}function Fy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Ra={},En=Kr(Ra),ia=Kr(Ra),oa=Kr(Ra);function ls(t){if(t===Ra)throw Error(F(174));return t}function _p(t,e){switch(pe(oa,e),pe(ia,t),pe(En,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eh(e,t)}ye(En),pe(En,e)}function Ti(){ye(En),ye(ia),ye(oa)}function ww(t){ls(oa.current);var e=ls(En.current),n=Eh(e,t.type);e!==n&&(pe(ia,t),pe(En,n))}function wp(t){ia.current===t&&(ye(En),ye(ia))}var xe=Kr(0);function xu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ld=[];function xp(){for(var t=0;t<Ld.length;t++)Ld[t]._workInProgressVersionPrimary=null;Ld.length=0}var Bl=ar.ReactCurrentDispatcher,Md=ar.ReactCurrentBatchConfig,ys=0,Ee=null,Ue=null,ze=null,Eu=!1,Uo=!1,aa=0,VN=0;function it(){throw Error(F(321))}function Ep(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!hn(t[n],e[n]))return!1;return!0}function Tp(t,e,n,r,s,i){if(ys=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bl.current=t===null||t.memoizedState===null?BN:zN,t=n(r,s),Uo){i=0;do{if(Uo=!1,aa=0,25<=i)throw Error(F(301));i+=1,ze=Ue=null,e.updateQueue=null,Bl.current=qN,t=n(r,s)}while(Uo)}if(Bl.current=Tu,e=Ue!==null&&Ue.next!==null,ys=0,ze=Ue=Ee=null,Eu=!1,e)throw Error(F(300));return t}function Ip(){var t=aa!==0;return aa=0,t}function vn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ze===null?Ee.memoizedState=ze=t:ze=ze.next=t,ze}function Yt(){if(Ue===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=ze===null?Ee.memoizedState:ze.next;if(e!==null)ze=e,Ue=t;else{if(t===null)throw Error(F(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},ze===null?Ee.memoizedState=ze=t:ze=ze.next=t}return ze}function la(t,e){return typeof e=="function"?e(t):e}function Vd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var l=o=null,c=null,d=i;do{var f=d.lane;if((ys&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=g,o=r):c=c.next=g,Ee.lanes|=f,vs|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=l,hn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,vs|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Ud(t){var e=Yt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);hn(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function xw(){}function Ew(t,e){var n=Ee,r=Yt(),s=e(),i=!hn(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,bp(bw.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||ze!==null&&ze.memoizedState.tag&1){if(n.flags|=2048,ua(9,Iw.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(F(349));ys&30||Tw(n,e,s)}return s}function Tw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Iw(t,e,n,r){e.value=n,e.getSnapshot=r,Nw(e)&&Sw(t)}function bw(t,e,n){return n(function(){Nw(e)&&Sw(t)})}function Nw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!hn(t,n)}catch{return!0}}function Sw(t){var e=tr(t,1);e!==null&&un(e,t,1,-1)}function $y(t){var e=vn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},e.queue=t,t=t.dispatch=$N.bind(null,Ee,t),[e.memoizedState,t]}function ua(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Pw(){return Yt().memoizedState}function zl(t,e,n,r){var s=vn();Ee.flags|=t,s.memoizedState=ua(1|e,n,void 0,r===void 0?null:r)}function oc(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Ep(r,o.deps)){s.memoizedState=ua(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=ua(1|e,n,i,r)}function By(t,e){return zl(8390656,8,t,e)}function bp(t,e){return oc(2048,8,t,e)}function Aw(t,e){return oc(4,2,t,e)}function kw(t,e){return oc(4,4,t,e)}function Cw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Rw(t,e,n){return n=n!=null?n.concat([t]):null,oc(4,4,Cw.bind(null,e,t),n)}function Np(){}function jw(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ep(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Ow(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ep(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Dw(t,e,n){return ys&21?(hn(n,e)||(n=F_(),Ee.lanes|=n,vs|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function UN(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Md.transition;Md.transition={};try{t(!1),e()}finally{ae=n,Md.transition=r}}function Lw(){return Yt().memoizedState}function FN(t,e,n){var r=Dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mw(t))Vw(e,n);else if(n=vw(t,e,n,r),n!==null){var s=Et();un(n,t,r,s),Uw(n,e,r)}}function $N(t,e,n){var r=Dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mw(t))Vw(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(s.hasEagerState=!0,s.eagerState=l,hn(l,o)){var c=e.interleaved;c===null?(s.next=s,yp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=vw(t,e,s,r),n!==null&&(s=Et(),un(n,t,r,s),Uw(n,e,r))}}function Mw(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function Vw(t,e){Uo=Eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Uw(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,rp(t,n)}}var Tu={readContext:Qt,useCallback:it,useContext:it,useEffect:it,useImperativeHandle:it,useInsertionEffect:it,useLayoutEffect:it,useMemo:it,useReducer:it,useRef:it,useState:it,useDebugValue:it,useDeferredValue:it,useTransition:it,useMutableSource:it,useSyncExternalStore:it,useId:it,unstable_isNewReconciler:!1},BN={readContext:Qt,useCallback:function(t,e){return vn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:By,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zl(4194308,4,Cw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zl(4194308,4,t,e)},useInsertionEffect:function(t,e){return zl(4,2,t,e)},useMemo:function(t,e){var n=vn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=FN.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=vn();return t={current:t},e.memoizedState=t},useState:$y,useDebugValue:Np,useDeferredValue:function(t){return vn().memoizedState=t},useTransition:function(){var t=$y(!1),e=t[0];return t=UN.bind(null,t[1]),vn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=vn();if(ve){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),qe===null)throw Error(F(349));ys&30||Tw(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,By(bw.bind(null,r,i,t),[t]),r.flags|=2048,ua(9,Iw.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=vn(),e=qe.identifierPrefix;if(ve){var n=Hn,r=qn;n=(r&~(1<<32-ln(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=VN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},zN={readContext:Qt,useCallback:jw,useContext:Qt,useEffect:bp,useImperativeHandle:Rw,useInsertionEffect:Aw,useLayoutEffect:kw,useMemo:Ow,useReducer:Vd,useRef:Pw,useState:function(){return Vd(la)},useDebugValue:Np,useDeferredValue:function(t){var e=Yt();return Dw(e,Ue.memoizedState,t)},useTransition:function(){var t=Vd(la)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:xw,useSyncExternalStore:Ew,useId:Lw,unstable_isNewReconciler:!1},qN={readContext:Qt,useCallback:jw,useContext:Qt,useEffect:bp,useImperativeHandle:Rw,useInsertionEffect:Aw,useLayoutEffect:kw,useMemo:Ow,useReducer:Ud,useRef:Pw,useState:function(){return Ud(la)},useDebugValue:Np,useDeferredValue:function(t){var e=Yt();return Ue===null?e.memoizedState=t:Dw(e,Ue.memoizedState,t)},useTransition:function(){var t=Ud(la)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:xw,useSyncExternalStore:Ew,useId:Lw,unstable_isNewReconciler:!1};function nn(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function zh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ac={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Dr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(un(e,t,s,r),$l(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Et(),s=Dr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(un(e,t,s,r),$l(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Et(),r=Dr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(un(e,t,r,n),$l(e,t,r))}};function zy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ta(n,r)||!ta(s,i):!0}function Fw(t,e,n){var r=!1,s=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=Rt(e)?ms:ft.current,r=e.contextTypes,i=(r=r!=null)?wi(t,s):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function qy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function qh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},vp(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=Rt(e)?ms:ft.current,s.context=wi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(zh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&ac.enqueueReplaceState(s,s.state,null),wu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Ii(t,e){try{var n="",r=e;do n+=v1(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function Fd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Hh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var HN=typeof WeakMap=="function"?WeakMap:Map;function $w(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){bu||(bu=!0,tf=r),Hh(t,e)},n}function Bw(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Hh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Hh(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Hy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new HN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=iS.bind(null,t,e,n),e.then(t,t))}function Wy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ky(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var WN=ar.ReactCurrentOwner,kt=!1;function wt(t,e,n,r){e.child=t===null?yw(e,null,n,r):Ei(e,t.child,n,r)}function Gy(t,e,n,r,s){n=n.render;var i=e.ref;return hi(e,s),r=Tp(t,e,n,r,i,s),n=Ip(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ve&&n&&dp(e),e.flags|=1,wt(t,e,r,s),e.child)}function Qy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Op(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,zw(t,e,i,r,s)):(t=Kl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ta,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Lr(i,r),t.ref=e.ref,t.return=e,e.child=t}function zw(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ta(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,nr(t,e,s)}return Wh(t,e,n,r,s)}function qw(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(ii,Mt),Mt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(ii,Mt),Mt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(ii,Mt),Mt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(ii,Mt),Mt|=r;return wt(t,e,s,n),e.child}function Hw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Wh(t,e,n,r,s){var i=Rt(n)?ms:ft.current;return i=wi(e,i),hi(e,s),n=Tp(t,e,n,r,i,s),r=Ip(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ve&&r&&dp(e),e.flags|=1,wt(t,e,n,s),e.child)}function Yy(t,e,n,r,s){if(Rt(n)){var i=!0;mu(e)}else i=!1;if(hi(e,s),e.stateNode===null)ql(t,e),Fw(e,n,r),qh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=Rt(n)?ms:ft.current,d=wi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||c!==d)&&qy(e,o,r,d),vr=!1;var m=e.memoizedState;o.state=m,wu(e,r,o,s),c=e.memoizedState,l!==r||m!==c||Ct.current||vr?(typeof f=="function"&&(zh(e,n,f,r),c=e.memoizedState),(l=vr||zy(e,n,l,r,m,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,_w(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:nn(e.type,l),o.props=d,g=e.pendingProps,m=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=Rt(n)?ms:ft.current,c=wi(e,c));var T=n.getDerivedStateFromProps;(f=typeof T=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==g||m!==c)&&qy(e,o,r,c),vr=!1,m=e.memoizedState,o.state=m,wu(e,r,o,s);var b=e.memoizedState;l!==g||m!==b||Ct.current||vr?(typeof T=="function"&&(zh(e,n,T,r),b=e.memoizedState),(d=vr||zy(e,n,d,r,m,b,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return Kh(t,e,n,r,i,s)}function Kh(t,e,n,r,s,i){Hw(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Dy(e,n,!1),nr(t,e,i);r=e.stateNode,WN.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ei(e,t.child,null,i),e.child=Ei(e,null,l,i)):wt(t,e,l,i),e.memoizedState=r.state,s&&Dy(e,n,!0),e.child}function Ww(t){var e=t.stateNode;e.pendingContext?Oy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Oy(t,e.context,!1),_p(t,e.containerInfo)}function Xy(t,e,n,r,s){return xi(),fp(s),e.flags|=256,wt(t,e,n,r),e.child}var Gh={dehydrated:null,treeContext:null,retryLane:0};function Qh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Kw(t,e,n){var r=e.pendingProps,s=xe.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(s&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(xe,s&1),t===null)return $h(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cc(o,r,0,null),t=fs(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Qh(n),e.memoizedState=Gh,t):Sp(e,o));if(s=t.memoizedState,s!==null&&(l=s.dehydrated,l!==null))return KN(t,e,o,r,l,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,l=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Lr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),l!==null?i=Lr(l,i):(i=fs(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Qh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Gh,r}return i=t.child,t=i.sibling,r=Lr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Sp(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,n,r){return r!==null&&fp(r),Ei(e,t.child,null,n),t=Sp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function KN(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=Fd(Error(F(422))),Nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=cc({mode:"visible",children:r.children},s,0,null),i=fs(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ei(e,t.child,null,o),e.child.memoizedState=Qh(o),e.memoizedState=Gh,i);if(!(e.mode&1))return Nl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var l=r.dgst;return r=l,i=Error(F(419)),r=Fd(i,r,void 0),Nl(t,e,o,r)}if(l=(o&t.childLanes)!==0,kt||l){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),un(r,t,s,-1))}return jp(),r=Fd(Error(F(421))),Nl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=oS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Vt=Rr(s.nextSibling),$t=e,ve=!0,sn=null,t!==null&&(Ht[Wt++]=qn,Ht[Wt++]=Hn,Ht[Wt++]=gs,qn=t.id,Hn=t.overflow,gs=e),e=Sp(e,r.children),e.flags|=4096,e)}function Jy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bh(t.return,e,n)}function $d(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Gw(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(wt(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Jy(t,n,e);else if(t.tag===19)Jy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(xe,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&xu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),$d(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&xu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}$d(e,!0,n,null,i);break;case"together":$d(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),vs|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function GN(t,e,n){switch(e.tag){case 3:Ww(e),xi();break;case 5:ww(e);break;case 1:Rt(e.type)&&mu(e);break;case 4:_p(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(vu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?Kw(t,e,n):(pe(xe,xe.current&1),t=nr(t,e,n),t!==null?t.sibling:null);pe(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Gw(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,qw(t,e,n)}return nr(t,e,n)}var Qw,Yh,Yw,Xw;Qw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Yh=function(){};Yw=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ls(En.current);var i=null;switch(n){case"input":s=vh(t,s),r=vh(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=xh(t,s),r=xh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fu)}Th(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var l=s[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Go.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(l=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Go.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ge("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Xw=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ot(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function QN(t,e,n){var r=e.pendingProps;switch(hp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ot(e),null;case 1:return Rt(e.type)&&pu(),ot(e),null;case 3:return r=e.stateNode,Ti(),ye(Ct),ye(ft),xp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Il(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,sn!==null&&(sf(sn),sn=null))),Yh(t,e),ot(e),null;case 5:wp(e);var s=ls(oa.current);if(n=e.type,t!==null&&e.stateNode!=null)Yw(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return ot(e),null}if(t=ls(En.current),Il(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[_n]=e,r[sa]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)ge(No[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":ay(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":uy(r,i),ge("invalid",r)}Th(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?r.textContent!==l&&(i.suppressHydrationWarning!==!0&&Tl(r.textContent,l,t),s=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Tl(r.textContent,l,t),s=["children",""+l]):Go.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":ml(r),ly(r,i,!0);break;case"textarea":ml(r),cy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=b_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[_n]=e,t[sa]=r,Qw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ih(n,r),n){case"dialog":ge("cancel",t),ge("close",t),s=r;break;case"iframe":case"object":case"embed":ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)ge(No[s],t);s=r;break;case"source":ge("error",t),s=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),s=r;break;case"details":ge("toggle",t),s=r;break;case"input":ay(t,r),s=vh(t,r),ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),ge("invalid",t);break;case"textarea":uy(t,r),s=xh(t,r),ge("invalid",t);break;default:s=r}Th(n,s),l=s;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?P_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&N_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qo(t,c):typeof c=="number"&&Qo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Go.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ge("scroll",t):c!=null&&Xf(t,i,c,o))}switch(n){case"input":ml(t),ly(t,r,!1);break;case"textarea":ml(t),cy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?li(t,!!r.multiple,i,!1):r.defaultValue!=null&&li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ot(e),null;case 6:if(t&&e.stateNode!=null)Xw(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=ls(oa.current),ls(En.current),Il(e)){if(r=e.stateNode,n=e.memoizedProps,r[_n]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Tl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[_n]=e,e.stateNode=r}return ot(e),null;case 13:if(ye(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Vt!==null&&e.mode&1&&!(e.flags&128))mw(),xi(),e.flags|=98560,i=!1;else if(i=Il(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[_n]=e}else xi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ot(e),i=!1}else sn!==null&&(sf(sn),sn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?Fe===0&&(Fe=3):jp())),e.updateQueue!==null&&(e.flags|=4),ot(e),null);case 4:return Ti(),Yh(t,e),t===null&&na(e.stateNode.containerInfo),ot(e),null;case 10:return gp(e.type._context),ot(e),null;case 17:return Rt(e.type)&&pu(),ot(e),null;case 19:if(ye(xe),i=e.memoizedState,i===null)return ot(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yo(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=xu(t),o!==null){for(e.flags|=128,yo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ce()>bi&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=xu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return ot(e),null}else 2*Ce()-i.renderingStartTime>bi&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ce(),e.sibling=null,n=xe.current,pe(xe,r?n&1|2:n&1),e):(ot(e),null);case 22:case 23:return Rp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Mt&1073741824&&(ot(e),e.subtreeFlags&6&&(e.flags|=8192)):ot(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function YN(t,e){switch(hp(e),e.tag){case 1:return Rt(e.type)&&pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),ye(Ct),ye(ft),xp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wp(e),null;case 13:if(ye(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));xi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(xe),null;case 4:return Ti(),null;case 10:return gp(e.type._context),null;case 22:case 23:return Rp(),null;case 24:return null;default:return null}}var Sl=!1,ct=!1,XN=typeof WeakSet=="function"?WeakSet:Set,q=null;function si(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Xh(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var Zy=!1;function JN(t,e){if(Oh=cu,t=nw(),cp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,f=0,g=t,m=null;t:for(;;){for(var T;g!==n||s!==0&&g.nodeType!==3||(l=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(T=g.firstChild)!==null;)m=g,g=T;for(;;){if(g===t)break t;if(m===n&&++d===s&&(l=o),m===i&&++f===r&&(c=o),(T=g.nextSibling)!==null)break;g=m,m=g.parentNode}g=T}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Dh={focusedElem:t,selectionRange:n},cu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var N=b.memoizedProps,A=b.memoizedState,x=e.stateNode,w=x.getSnapshotBeforeUpdate(e.elementType===e.type?N:nn(e.type,N),A);x.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(k){Ne(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return b=Zy,Zy=!1,b}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Xh(e,n,i)}s=s.next}while(s!==r)}}function lc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Jh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Jw(t){var e=t.alternate;e!==null&&(t.alternate=null,Jw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[_n],delete e[sa],delete e[Vh],delete e[ON],delete e[DN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Zw(t){return t.tag===5||t.tag===3||t.tag===4}function ev(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Zw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Zh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fu));else if(r!==4&&(t=t.child,t!==null))for(Zh(t,e,n),t=t.sibling;t!==null;)Zh(t,e,n),t=t.sibling}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}var Qe=null,rn=!1;function mr(t,e,n){for(n=n.child;n!==null;)ex(t,e,n),n=n.sibling}function ex(t,e,n){if(xn&&typeof xn.onCommitFiberUnmount=="function")try{xn.onCommitFiberUnmount(ec,n)}catch{}switch(n.tag){case 5:ct||si(n,e);case 6:var r=Qe,s=rn;Qe=null,mr(t,e,n),Qe=r,rn=s,Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(rn?(t=Qe,n=n.stateNode,t.nodeType===8?Od(t.parentNode,n):t.nodeType===1&&Od(t,n),Zo(t)):Od(Qe,n.stateNode));break;case 4:r=Qe,s=rn,Qe=n.stateNode.containerInfo,rn=!0,mr(t,e,n),Qe=r,rn=s;break;case 0:case 11:case 14:case 15:if(!ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Xh(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!ct&&(si(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ne(n,e,l)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(ct=(r=ct)||n.memoizedState!==null,mr(t,e,n),ct=r):mr(t,e,n);break;default:mr(t,e,n)}}function tv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new XN),e.forEach(function(r){var s=aS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function tn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Qe=l.stateNode,rn=!1;break e;case 3:Qe=l.stateNode.containerInfo,rn=!0;break e;case 4:Qe=l.stateNode.containerInfo,rn=!0;break e}l=l.return}if(Qe===null)throw Error(F(160));ex(i,o,s),Qe=null,rn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)tx(e,t),e=e.sibling}function tx(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(tn(e,t),yn(t),r&4){try{Fo(3,t,t.return),lc(3,t)}catch(N){Ne(t,t.return,N)}try{Fo(5,t,t.return)}catch(N){Ne(t,t.return,N)}}break;case 1:tn(e,t),yn(t),r&512&&n!==null&&si(n,n.return);break;case 5:if(tn(e,t),yn(t),r&512&&n!==null&&si(n,n.return),t.flags&32){var s=t.stateNode;try{Qo(s,"")}catch(N){Ne(t,t.return,N)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&T_(s,i),Ih(l,o);var d=Ih(l,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?P_(s,g):f==="dangerouslySetInnerHTML"?N_(s,g):f==="children"?Qo(s,g):Xf(s,f,g,d)}switch(l){case"input":_h(s,i);break;case"textarea":I_(s,i);break;case"select":var m=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var T=i.value;T!=null?li(s,!!i.multiple,T,!1):m!==!!i.multiple&&(i.defaultValue!=null?li(s,!!i.multiple,i.defaultValue,!0):li(s,!!i.multiple,i.multiple?[]:"",!1))}s[sa]=i}catch(N){Ne(t,t.return,N)}}break;case 6:if(tn(e,t),yn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(N){Ne(t,t.return,N)}}break;case 3:if(tn(e,t),yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(N){Ne(t,t.return,N)}break;case 4:tn(e,t),yn(t);break;case 13:tn(e,t),yn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kp=Ce())),r&4&&tv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ct=(d=ct)||f,tn(e,t),ct=d):tn(e,t),yn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(m=q,T=m.child,m.tag){case 0:case 11:case 14:case 15:Fo(4,m,m.return);break;case 1:si(m,m.return);var b=m.stateNode;if(typeof b.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(N){Ne(r,n,N)}}break;case 5:si(m,m.return);break;case 22:if(m.memoizedState!==null){rv(g);continue}}T!==null?(T.return=m,q=T):rv(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=S_("display",o))}catch(N){Ne(t,t.return,N)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(N){Ne(t,t.return,N)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:tn(e,t),yn(t),r&4&&tv(t);break;case 21:break;default:tn(e,t),yn(t)}}function yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Zw(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qo(s,""),r.flags&=-33);var i=ev(t);ef(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ev(t);Zh(t,l,o);break;default:throw Error(F(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function ZN(t,e,n){q=t,nx(t)}function nx(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sl;if(!o){var l=s.alternate,c=l!==null&&l.memoizedState!==null||ct;l=Sl;var d=ct;if(Sl=o,(ct=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?sv(s):c!==null?(c.return=o,q=c):sv(s);for(;i!==null;)q=i,nx(i),i=i.sibling;q=s,Sl=l,ct=d}nv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):nv(t)}}function nv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ct||lc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ct)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:nn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Fy(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Fy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Zo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ct||e.flags&512&&Jh(e)}catch(m){Ne(e,e.return,m)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function rv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function sv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{lc(4,e)}catch(c){Ne(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ne(e,s,c)}}var i=e.return;try{Jh(e)}catch(c){Ne(e,i,c)}break;case 5:var o=e.return;try{Jh(e)}catch(c){Ne(e,o,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,q=l;break}q=e.return}}var eS=Math.ceil,Iu=ar.ReactCurrentDispatcher,Pp=ar.ReactCurrentOwner,Gt=ar.ReactCurrentBatchConfig,se=0,qe=null,Le=null,Je=0,Mt=0,ii=Kr(0),Fe=0,ca=null,vs=0,uc=0,Ap=0,$o=null,Pt=null,kp=0,bi=1/0,Fn=null,bu=!1,tf=null,Or=null,Pl=!1,br=null,Nu=0,Bo=0,nf=null,Hl=-1,Wl=0;function Et(){return se&6?Ce():Hl!==-1?Hl:Hl=Ce()}function Dr(t){return t.mode&1?se&2&&Je!==0?Je&-Je:MN.transition!==null?(Wl===0&&(Wl=F_()),Wl):(t=ae,t!==0||(t=window.event,t=t===void 0?16:K_(t.type)),t):1}function un(t,e,n,r){if(50<Bo)throw Bo=0,nf=null,Error(F(185));Aa(t,n,r),(!(se&2)||t!==qe)&&(t===qe&&(!(se&2)&&(uc|=n),Fe===4&&wr(t,Je)),jt(t,r),n===1&&se===0&&!(e.mode&1)&&(bi=Ce()+500,ic&&Gr()))}function jt(t,e){var n=t.callbackNode;M1(t,e);var r=uu(t,t===qe?Je:0);if(r===0)n!==null&&fy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&fy(n),e===1)t.tag===0?LN(iv.bind(null,t)):hw(iv.bind(null,t)),RN(function(){!(se&6)&&Gr()}),n=null;else{switch($_(r)){case 1:n=np;break;case 4:n=V_;break;case 16:n=lu;break;case 536870912:n=U_;break;default:n=lu}n=cx(n,rx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function rx(t,e){if(Hl=-1,Wl=0,se&6)throw Error(F(327));var n=t.callbackNode;if(fi()&&t.callbackNode!==n)return null;var r=uu(t,t===qe?Je:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Su(t,r);else{e=r;var s=se;se|=2;var i=ix();(qe!==t||Je!==e)&&(Fn=null,bi=Ce()+500,hs(t,e));do try{rS();break}catch(l){sx(t,l)}while(!0);mp(),Iu.current=i,se=s,Le!==null?e=0:(qe=null,Je=0,e=Fe)}if(e!==0){if(e===2&&(s=Ah(t),s!==0&&(r=s,e=rf(t,s))),e===1)throw n=ca,hs(t,0),wr(t,r),jt(t,Ce()),n;if(e===6)wr(t,r);else{if(s=t.current.alternate,!(r&30)&&!tS(s)&&(e=Su(t,r),e===2&&(i=Ah(t),i!==0&&(r=i,e=rf(t,i))),e===1))throw n=ca,hs(t,0),wr(t,r),jt(t,Ce()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:rs(t,Pt,Fn);break;case 3:if(wr(t,r),(r&130023424)===r&&(e=kp+500-Ce(),10<e)){if(uu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Et(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Mh(rs.bind(null,t,Pt,Fn),e);break}rs(t,Pt,Fn);break;case 4:if(wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-ln(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*eS(r/1960))-r,10<r){t.timeoutHandle=Mh(rs.bind(null,t,Pt,Fn),r);break}rs(t,Pt,Fn);break;case 5:rs(t,Pt,Fn);break;default:throw Error(F(329))}}}return jt(t,Ce()),t.callbackNode===n?rx.bind(null,t):null}function rf(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(hs(t,e).flags|=256),t=Su(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&sf(e)),t}function sf(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function tS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!hn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wr(t,e){for(e&=~Ap,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ln(e),r=1<<n;t[n]=-1,e&=~r}}function iv(t){if(se&6)throw Error(F(327));fi();var e=uu(t,0);if(!(e&1))return jt(t,Ce()),null;var n=Su(t,e);if(t.tag!==0&&n===2){var r=Ah(t);r!==0&&(e=r,n=rf(t,r))}if(n===1)throw n=ca,hs(t,0),wr(t,e),jt(t,Ce()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,Pt,Fn),jt(t,Ce()),null}function Cp(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(bi=Ce()+500,ic&&Gr())}}function _s(t){br!==null&&br.tag===0&&!(se&6)&&fi();var e=se;se|=1;var n=Gt.transition,r=ae;try{if(Gt.transition=null,ae=1,t)return t()}finally{ae=r,Gt.transition=n,se=e,!(se&6)&&Gr()}}function Rp(){Mt=ii.current,ye(ii)}function hs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,CN(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(hp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pu();break;case 3:Ti(),ye(Ct),ye(ft),xp();break;case 5:wp(r);break;case 4:Ti();break;case 13:ye(xe);break;case 19:ye(xe);break;case 10:gp(r.type._context);break;case 22:case 23:Rp()}n=n.return}if(qe=t,Le=t=Lr(t.current,null),Je=Mt=e,Fe=0,ca=null,Ap=uc=vs=0,Pt=$o=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}as=null}return t}function sx(t,e){do{var n=Le;try{if(mp(),Bl.current=Tu,Eu){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Eu=!1}if(ys=0,ze=Ue=Ee=null,Uo=!1,aa=0,Pp.current=null,n===null||n.return===null){Fe=1,ca=e,Le=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=Je,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=l,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var T=Wy(o);if(T!==null){T.flags&=-257,Ky(T,o,l,i,e),T.mode&1&&Hy(i,d,e),e=T,c=d;var b=e.updateQueue;if(b===null){var N=new Set;N.add(c),e.updateQueue=N}else b.add(c);break e}else{if(!(e&1)){Hy(i,d,e),jp();break e}c=Error(F(426))}}else if(ve&&l.mode&1){var A=Wy(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Ky(A,o,l,i,e),fp(Ii(c,l));break e}}i=c=Ii(c,l),Fe!==4&&(Fe=2),$o===null?$o=[i]:$o.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=$w(i,c,e);Uy(i,x);break e;case 1:l=c;var w=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof w.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Bw(i,l,e);Uy(i,k);break e}}i=i.return}while(i!==null)}ax(n)}catch(L){e=L,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function ix(){var t=Iu.current;return Iu.current=Tu,t===null?Tu:t}function jp(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||!(vs&268435455)&&!(uc&268435455)||wr(qe,Je)}function Su(t,e){var n=se;se|=2;var r=ix();(qe!==t||Je!==e)&&(Fn=null,hs(t,e));do try{nS();break}catch(s){sx(t,s)}while(!0);if(mp(),se=n,Iu.current=r,Le!==null)throw Error(F(261));return qe=null,Je=0,Fe}function nS(){for(;Le!==null;)ox(Le)}function rS(){for(;Le!==null&&!P1();)ox(Le)}function ox(t){var e=ux(t.alternate,t,Mt);t.memoizedProps=t.pendingProps,e===null?ax(t):Le=e,Pp.current=null}function ax(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=YN(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Le=null;return}}else if(n=QN(n,e,Mt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);Fe===0&&(Fe=5)}function rs(t,e,n){var r=ae,s=Gt.transition;try{Gt.transition=null,ae=1,sS(t,e,n,r)}finally{Gt.transition=s,ae=r}return null}function sS(t,e,n,r){do fi();while(br!==null);if(se&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(V1(t,i),t===qe&&(Le=qe=null,Je=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Pl||(Pl=!0,cx(lu,function(){return fi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=ae;ae=1;var l=se;se|=4,Pp.current=null,JN(t,n),tx(n,t),IN(Dh),cu=!!Oh,Dh=Oh=null,t.current=n,ZN(n),A1(),se=l,ae=o,Gt.transition=i}else t.current=n;if(Pl&&(Pl=!1,br=t,Nu=s),i=t.pendingLanes,i===0&&(Or=null),R1(n.stateNode),jt(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(bu)throw bu=!1,t=tf,tf=null,t;return Nu&1&&t.tag!==0&&fi(),i=t.pendingLanes,i&1?t===nf?Bo++:(Bo=0,nf=t):Bo=0,Gr(),null}function fi(){if(br!==null){var t=$_(Nu),e=Gt.transition,n=ae;try{if(Gt.transition=null,ae=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,Nu=0,se&6)throw Error(F(331));var s=se;for(se|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Fo(8,f,i)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var m=f.sibling,T=f.return;if(Jw(f),f===d){q=null;break}if(m!==null){m.return=T,q=m;break}q=T}}}var b=i.alternate;if(b!==null){var N=b.child;if(N!==null){b.child=null;do{var A=N.sibling;N.sibling=null,N=A}while(N!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,q=x;break e}q=i.return}}var w=t.current;for(q=w;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=w;q!==null;){if(l=q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:lc(9,l)}}catch(L){Ne(l,l.return,L)}if(l===o){q=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,q=k;break e}q=l.return}}if(se=s,Gr(),xn&&typeof xn.onPostCommitFiberRoot=="function")try{xn.onPostCommitFiberRoot(ec,t)}catch{}r=!0}return r}finally{ae=n,Gt.transition=e}}return!1}function ov(t,e,n){e=Ii(n,e),e=$w(t,e,1),t=jr(t,e,1),e=Et(),t!==null&&(Aa(t,1,e),jt(t,e))}function Ne(t,e,n){if(t.tag===3)ov(t,t,n);else for(;e!==null;){if(e.tag===3){ov(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=Ii(n,t),t=Bw(e,t,1),e=jr(e,t,1),t=Et(),e!==null&&(Aa(e,1,t),jt(e,t));break}}e=e.return}}function iS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Et(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Je&n)===n&&(Fe===4||Fe===3&&(Je&130023424)===Je&&500>Ce()-kp?hs(t,0):Ap|=n),jt(t,e)}function lx(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=Et();t=tr(t,e),t!==null&&(Aa(t,e,n),jt(t,n))}function oS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),lx(t,n)}function aS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),lx(t,n)}var ux;ux=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ct.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,GN(t,e,n);kt=!!(t.flags&131072)}else kt=!1,ve&&e.flags&1048576&&fw(e,yu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var s=wi(e,ft.current);hi(e,n),s=Tp(null,e,r,t,s,n);var i=Ip();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Rt(r)?(i=!0,mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,vp(e),s.updater=ac,e.stateNode=s,s._reactInternals=e,qh(e,r,t,n),e=Kh(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&dp(e),wt(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=uS(r),t=nn(r,t),s){case 0:e=Wh(null,e,r,t,n);break e;case 1:e=Yy(null,e,r,t,n);break e;case 11:e=Gy(null,e,r,t,n);break e;case 14:e=Qy(null,e,r,nn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Wh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Yy(t,e,r,s,n);case 3:e:{if(Ww(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,_w(t,e),wu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Ii(Error(F(423)),e),e=Xy(t,e,r,n,s);break e}else if(r!==s){s=Ii(Error(F(424)),e),e=Xy(t,e,r,n,s);break e}else for(Vt=Rr(e.stateNode.containerInfo.firstChild),$t=e,ve=!0,sn=null,n=yw(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(xi(),r===s){e=nr(t,e,n);break e}wt(t,e,r,n)}e=e.child}return e;case 5:return ww(e),t===null&&$h(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Lh(r,s)?o=null:i!==null&&Lh(r,i)&&(e.flags|=32),Hw(t,e),wt(t,e,o,n),e.child;case 6:return t===null&&$h(e),null;case 13:return Kw(t,e,n);case 4:return _p(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ei(e,null,r,n):wt(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),Gy(t,e,r,s,n);case 7:return wt(t,e,e.pendingProps,n),e.child;case 8:return wt(t,e,e.pendingProps.children,n),e.child;case 12:return wt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(vu,r._currentValue),r._currentValue=o,i!==null)if(hn(i.value,o)){if(i.children===s.children&&!Ct.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bh(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Bh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}wt(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,hi(e,n),s=Qt(s),r=r(s),e.flags|=1,wt(t,e,r,n),e.child;case 14:return r=e.type,s=nn(r,e.pendingProps),s=nn(r.type,s),Qy(t,e,r,s,n);case 15:return zw(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:nn(r,s),ql(t,e),e.tag=1,Rt(r)?(t=!0,mu(e)):t=!1,hi(e,n),Fw(e,r,s),qh(e,r,s,n),Kh(null,e,r,!0,t,n);case 19:return Gw(t,e,n);case 22:return qw(t,e,n)}throw Error(F(156,e.tag))};function cx(t,e){return M_(t,e)}function lS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new lS(t,e,n,r)}function Op(t){return t=t.prototype,!(!t||!t.isReactComponent)}function uS(t){if(typeof t=="function")return Op(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Zf)return 11;if(t===ep)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Op(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Qs:return fs(n.children,s,i,e);case Jf:o=8,s|=8;break;case ph:return t=Kt(12,n,e,s|2),t.elementType=ph,t.lanes=i,t;case mh:return t=Kt(13,n,e,s),t.elementType=mh,t.lanes=i,t;case gh:return t=Kt(19,n,e,s),t.elementType=gh,t.lanes=i,t;case w_:return cc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case v_:o=10;break e;case __:o=9;break e;case Zf:o=11;break e;case ep:o=14;break e;case yr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function fs(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function cc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=w_,t.lanes=n,t.stateNode={isHidden:!1},t}function Bd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function zd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function cS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Td(0),this.expirationTimes=Td(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Td(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Dp(t,e,n,r,s,i,o,l,c){return t=new cS(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},vp(i),t}function dS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function dx(t){if(!t)return $r;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Rt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(Rt(n))return dw(t,n,e)}return e}function hx(t,e,n,r,s,i,o,l,c){return t=Dp(n,r,!0,t,s,i,o,l,c),t.context=dx(null),n=t.current,r=Et(),s=Dr(n),i=Qn(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Aa(t,s,r),jt(t,r),t}function dc(t,e,n,r){var s=e.current,i=Et(),o=Dr(s);return n=dx(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(un(t,s,o,i),$l(t,s,o)),o}function Pu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function av(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Lp(t,e){av(t,e),(t=t.alternate)&&av(t,e)}function hS(){return null}var fx=typeof reportError=="function"?reportError:function(t){console.error(t)};function Mp(t){this._internalRoot=t}hc.prototype.render=Mp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));dc(t,e,null,null)};hc.prototype.unmount=Mp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_s(function(){dc(null,t,null,null)}),e[er]=null}};function hc(t){this._internalRoot=t}hc.prototype.unstable_scheduleHydration=function(t){if(t){var e=q_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&W_(t)}};function Vp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function fc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lv(){}function fS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Pu(o);i.call(d)}}var o=hx(e,r,t,0,null,!1,!1,"",lv);return t._reactRootContainer=o,t[er]=o.current,na(t.nodeType===8?t.parentNode:t),_s(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var l=r;r=function(){var d=Pu(c);l.call(d)}}var c=Dp(t,0,!1,null,null,!1,!1,"",lv);return t._reactRootContainer=c,t[er]=c.current,na(t.nodeType===8?t.parentNode:t),_s(function(){dc(e,c,n,r)}),c}function pc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var l=s;s=function(){var c=Pu(o);l.call(c)}}dc(e,o,t,s)}else o=fS(n,e,t,s,r);return Pu(o)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=bo(e.pendingLanes);n!==0&&(rp(e,n|1),jt(e,Ce()),!(se&6)&&(bi=Ce()+500,Gr()))}break;case 13:_s(function(){var r=tr(t,1);if(r!==null){var s=Et();un(r,t,1,s)}}),Lp(t,1)}};sp=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Et();un(e,t,134217728,n)}Lp(t,134217728)}};z_=function(t){if(t.tag===13){var e=Dr(t),n=tr(t,e);if(n!==null){var r=Et();un(n,t,e,r)}Lp(t,e)}};q_=function(){return ae};H_=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Nh=function(t,e,n){switch(e){case"input":if(_h(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=sc(r);if(!s)throw Error(F(90));E_(r),_h(r,s)}}}break;case"textarea":I_(t,n);break;case"select":e=n.value,e!=null&&li(t,!!n.multiple,e,!1)}};C_=Cp;R_=_s;var pS={usingClientEntryPoint:!1,Events:[Ca,Zs,sc,A_,k_,Cp]},vo={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mS={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=D_(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||hS,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Al=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Al.isDisabled&&Al.supportsFiber)try{ec=Al.inject(mS),xn=Al}catch{}}zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pS;zt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vp(e))throw Error(F(200));return dS(t,e,null,n)};zt.createRoot=function(t,e){if(!Vp(t))throw Error(F(299));var n=!1,r="",s=fx;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Dp(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,na(t.nodeType===8?t.parentNode:t),new Mp(e)};zt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=D_(e),t=t===null?null:t.stateNode,t};zt.flushSync=function(t){return _s(t)};zt.hydrate=function(t,e,n){if(!fc(e))throw Error(F(200));return pc(null,t,e,!0,n)};zt.hydrateRoot=function(t,e,n){if(!Vp(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=fx;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=hx(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,na(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new hc(e)};zt.render=function(t,e,n){if(!fc(e))throw Error(F(200));return pc(null,t,e,!1,n)};zt.unmountComponentAtNode=function(t){if(!fc(t))throw Error(F(40));return t._reactRootContainer?(_s(function(){pc(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};zt.unstable_batchedUpdates=Cp;zt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!fc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return pc(t,e,n,!1,r)};zt.version="18.3.1-next-f1338f8080-20240426";function px(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(px)}catch(t){console.error(t)}}px(),p_.exports=zt;var gS=p_.exports,uv=gS;hh.createRoot=uv.createRoot,hh.hydrateRoot=uv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function da(){return da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},da.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const cv="popstate";function yS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:l}=r.location;return of("",{pathname:i,search:o,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Au(s)}return _S(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function mx(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function vS(){return Math.random().toString(36).substr(2,8)}function dv(t,e){return{usr:t.state,key:t.key,idx:e}}function of(t,e,n,r){return n===void 0&&(n=null),da({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bi(e):e,{state:n,key:e&&e.key||r||vS()})}function Au(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function _S(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,l=Nr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(da({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){l=Nr.Pop;let A=f(),x=A==null?null:A-d;d=A,c&&c({action:l,location:N.location,delta:x})}function m(A,x){l=Nr.Push;let w=of(N.location,A,x);d=f()+1;let y=dv(w,d),k=N.createHref(w);try{o.pushState(y,"",k)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(k)}i&&c&&c({action:l,location:N.location,delta:1})}function T(A,x){l=Nr.Replace;let w=of(N.location,A,x);d=f();let y=dv(w,d),k=N.createHref(w);o.replaceState(y,"",k),i&&c&&c({action:l,location:N.location,delta:0})}function b(A){let x=s.location.origin!=="null"?s.location.origin:s.location.href,w=typeof A=="string"?A:Au(A);return w=w.replace(/ $/,"%20"),je(x,"No window.location.(origin|href) available to create URL for href: "+w),new URL(w,x)}let N={get action(){return l},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(cv,g),c=A,()=>{s.removeEventListener(cv,g),c=null}},createHref(A){return e(s,A)},createURL:b,encodeLocation(A){let x=b(A);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:m,replace:T,go(A){return o.go(A)}};return N}var hv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(hv||(hv={}));function wS(t,e,n){return n===void 0&&(n="/"),xS(t,e,n)}function xS(t,e,n,r){let s=typeof e=="string"?Bi(e):e,i=Up(s.pathname||"/",n);if(i==null)return null;let o=gx(t);ES(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=OS(i);l=CS(o[c],d)}return l}function gx(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Mr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),gx(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:AS(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))s(i,o);else for(let c of yx(i.path))s(i,o,c)}),e}function yx(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=yx(r.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function ES(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:kS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const TS=/^:[\w-]+$/,IS=3,bS=2,NS=1,SS=10,PS=-2,fv=t=>t==="*";function AS(t,e){let n=t.split("/"),r=n.length;return n.some(fv)&&(r+=PS),e&&(r+=bS),n.filter(s=>!fv(s)).reduce((s,i)=>s+(TS.test(i)?IS:i===""?NS:SS),r)}function kS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function CS(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],d=l===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=RS({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),m=c.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Mr([i,g.pathname]),pathnameBase:VS(Mr([i,g.pathnameBase])),route:m}),g.pathnameBase!=="/"&&(i=Mr([i,g.pathnameBase]))}return o}function RS(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=jS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),l=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:m,isOptional:T}=f;if(m==="*"){let N=l[g]||"";o=i.slice(0,i.length-N.length).replace(/(.)\/+$/,"$1")}const b=l[g];return T&&!b?d[m]=void 0:d[m]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function jS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),mx(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function OS(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mx(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Up(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function DS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?Bi(t):t;return{pathname:n?n.startsWith("/")?n:LS(n,e):e,search:US(r),hash:FS(s)}}function LS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function qd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function MS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Fp(t,e){let n=MS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function $p(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=Bi(t):(s=da({},t),je(!s.pathname||!s.pathname.includes("?"),qd("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),qd("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),qd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,l;if(o==null)l=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),g-=1;s.pathname=m.join("/")}l=g>=0?e[g]:"/"}let c=DS(s,l),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),VS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),US=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,FS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function $S(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const vx=["post","put","patch","delete"];new Set(vx);const BS=["get",...vx];new Set(BS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ha.apply(this,arguments)}const Bp=O.createContext(null),zS=O.createContext(null),Qr=O.createContext(null),mc=O.createContext(null),lr=O.createContext({outlet:null,matches:[],isDataRoute:!1}),_x=O.createContext(null);function qS(t,e){let{relative:n}=e===void 0?{}:e;zi()||je(!1);let{basename:r,navigator:s}=O.useContext(Qr),{hash:i,pathname:o,search:l}=Ex(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Mr([r,o])),s.createHref({pathname:c,search:l,hash:i})}function zi(){return O.useContext(mc)!=null}function As(){return zi()||je(!1),O.useContext(mc).location}function wx(t){O.useContext(Qr).static||O.useLayoutEffect(t)}function mn(){let{isDataRoute:t}=O.useContext(lr);return t?rP():HS()}function HS(){zi()||je(!1);let t=O.useContext(Bp),{basename:e,future:n,navigator:r}=O.useContext(Qr),{matches:s}=O.useContext(lr),{pathname:i}=As(),o=JSON.stringify(Fp(s,n.v7_relativeSplatPath)),l=O.useRef(!1);return wx(()=>{l.current=!0}),O.useCallback(function(d,f){if(f===void 0&&(f={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let g=$p(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Mr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,i,t])}function xx(){let{matches:t}=O.useContext(lr),e=t[t.length-1];return e?e.params:{}}function Ex(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=O.useContext(Qr),{matches:s}=O.useContext(lr),{pathname:i}=As(),o=JSON.stringify(Fp(s,r.v7_relativeSplatPath));return O.useMemo(()=>$p(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function WS(t,e){return KS(t,e)}function KS(t,e,n,r){zi()||je(!1);let{navigator:s}=O.useContext(Qr),{matches:i}=O.useContext(lr),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=As(),f;if(e){var g;let A=typeof e=="string"?Bi(e):e;c==="/"||(g=A.pathname)!=null&&g.startsWith(c)||je(!1),f=A}else f=d;let m=f.pathname||"/",T=m;if(c!=="/"){let A=c.replace(/^\//,"").split("/");T="/"+m.replace(/^\//,"").split("/").slice(A.length).join("/")}let b=wS(t,{pathname:T}),N=JS(b&&b.map(A=>Object.assign({},A,{params:Object.assign({},l,A.params),pathname:Mr([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:Mr([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&N?O.createElement(mc.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Nr.Pop}},N):N}function GS(){let t=nP(),e=$S(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},e),n?O.createElement("pre",{style:s},n):null,null)}const QS=O.createElement(GS,null);class YS extends O.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?O.createElement(lr.Provider,{value:this.props.routeContext},O.createElement(_x.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XS(t){let{routeContext:e,match:n,children:r}=t,s=O.useContext(Bp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(lr.Provider,{value:e},r)}function JS(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(s=n)==null?void 0:s.errors;if(l!=null){let f=o.findIndex(g=>g.route.id&&(l==null?void 0:l[g.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:m,errors:T}=n,b=g.route.loader&&m[g.route.id]===void 0&&(!T||T[g.route.id]===void 0);if(g.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,m)=>{let T,b=!1,N=null,A=null;n&&(T=l&&g.route.id?l[g.route.id]:void 0,N=g.route.errorElement||QS,c&&(d<0&&m===0?(sP("route-fallback"),b=!0,A=null):d===m&&(b=!0,A=g.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,m+1)),w=()=>{let y;return T?y=N:b?y=A:g.route.Component?y=O.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=f,O.createElement(XS,{match:g,routeContext:{outlet:f,matches:x,isDataRoute:n!=null},children:y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||m===0)?O.createElement(YS,{location:n.location,revalidation:n.revalidation,component:N,error:T,children:w(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):w()},null)}var Tx=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Tx||{}),Ix=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Ix||{});function ZS(t){let e=O.useContext(Bp);return e||je(!1),e}function eP(t){let e=O.useContext(zS);return e||je(!1),e}function tP(t){let e=O.useContext(lr);return e||je(!1),e}function bx(t){let e=tP(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function nP(){var t;let e=O.useContext(_x),n=eP(),r=bx();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function rP(){let{router:t}=ZS(Tx.UseNavigateStable),e=bx(Ix.UseNavigateStable),n=O.useRef(!1);return wx(()=>{n.current=!0}),O.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ha({fromRouteId:e},i)))},[t,e])}const pv={};function sP(t,e,n){pv[t]||(pv[t]=!0)}function iP(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function af(t){let{to:e,replace:n,state:r,relative:s}=t;zi()||je(!1);let{future:i,static:o}=O.useContext(Qr),{matches:l}=O.useContext(lr),{pathname:c}=As(),d=mn(),f=$p(e,Fp(l,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(f);return O.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function _t(t){je(!1)}function oP(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nr.Pop,navigator:i,static:o=!1,future:l}=t;zi()&&je(!1);let c=e.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:c,navigator:i,static:o,future:ha({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof r=="string"&&(r=Bi(r));let{pathname:f="/",search:g="",hash:m="",state:T=null,key:b="default"}=r,N=O.useMemo(()=>{let A=Up(f,c);return A==null?null:{location:{pathname:A,search:g,hash:m,state:T,key:b},navigationType:s}},[c,f,g,m,T,b,s]);return N==null?null:O.createElement(Qr.Provider,{value:d},O.createElement(mc.Provider,{children:n,value:N}))}function aP(t){let{children:e,location:n}=t;return WS(lf(e),n)}new Promise(()=>{});function lf(t,e){e===void 0&&(e=[]);let n=[];return O.Children.forEach(t,(r,s)=>{if(!O.isValidElement(r))return;let i=[...e,s];if(r.type===O.Fragment){n.push.apply(n,lf(r.props.children,i));return}r.type!==_t&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=lf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uf(){return uf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uf.apply(this,arguments)}function lP(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function uP(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function cP(t,e){return t.button===0&&(!e||e==="_self")&&!uP(t)}function cf(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function dP(t,e){let n=cf(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const hP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],fP="6";try{window.__reactRouterVersion=fP}catch{}const pP="startTransition",mv=i1[pP];function mP(t){let{basename:e,children:n,future:r,window:s}=t,i=O.useRef();i.current==null&&(i.current=yS({window:s,v5Compat:!0}));let o=i.current,[l,c]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=O.useCallback(g=>{d&&mv?mv(()=>c(g)):c(g)},[c,d]);return O.useLayoutEffect(()=>o.listen(f),[o,f]),O.useEffect(()=>iP(r),[r]),O.createElement(oP,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const gP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",yP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,de=O.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:f,viewTransition:g}=e,m=lP(e,hP),{basename:T}=O.useContext(Qr),b,N=!1;if(typeof d=="string"&&yP.test(d)&&(b=d,gP))try{let y=new URL(window.location.href),k=d.startsWith("//")?new URL(y.protocol+d):new URL(d),L=Up(k.pathname,T);k.origin===y.origin&&L!=null?d=L+k.search+k.hash:N=!0}catch{}let A=qS(d,{relative:s}),x=vP(d,{replace:o,state:l,target:c,preventScrollReset:f,relative:s,viewTransition:g});function w(y){r&&r(y),y.defaultPrevented||x(y)}return O.createElement("a",uf({},m,{href:b||A,onClick:N||i?r:w,ref:n,target:c}))});var gv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(gv||(gv={}));var yv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(yv||(yv={}));function vP(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=mn(),d=As(),f=Ex(t,{relative:o});return O.useCallback(g=>{if(cP(g,n)){g.preventDefault();let m=r!==void 0?r:Au(d)===Au(f);c(t,{replace:m,state:s,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,f,r,s,n,t,i,o,l])}function _P(t){let e=O.useRef(cf(t)),n=O.useRef(!1),r=As(),s=O.useMemo(()=>dP(r.search,n.current?null:e.current),[r.search]),i=mn(),o=O.useCallback((l,c)=>{const d=cf(typeof l=="function"?l(s):l);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var vv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},wP=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],l=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Sx={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,l=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|l>>4;let m=(l&15)<<2|d>>6,T=d&63;c||(T=64,o||(m=64)),r.push(n[f],n[g],n[m],n[T])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Nx(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):wP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||l==null||d==null||g==null)throw new xP;const m=i<<2|l>>4;if(r.push(m),d!==64){const T=l<<4&240|d>>2;if(r.push(T),g!==64){const b=d<<6&192|g;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class xP extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const EP=function(t){const e=Nx(t);return Sx.encodeByteArray(e,!0)},ku=function(t){return EP(t).replace(/\./g,"")},Px=function(t){try{return Sx.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TP(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=()=>TP().__FIREBASE_DEFAULTS__,bP=()=>{if(typeof process>"u"||typeof vv>"u")return;const t=vv.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},NP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Px(t[1]);return e&&JSON.parse(e)},gc=()=>{try{return IP()||bP()||NP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Ax=t=>{var e,n;return(n=(e=gc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kx=t=>{const e=Ax(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Cx=()=>{var t;return(t=gc())===null||t===void 0?void 0:t.config},Rx=t=>{var e;return(e=gc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SP{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jx(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[ku(JSON.stringify(n)),ku(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function PP(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(pt())}function AP(){var t;const e=(t=gc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function kP(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function CP(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function RP(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function jP(){const t=pt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function OP(){return!AP()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ox(){try{return typeof indexedDB=="object"}catch{return!1}}function Dx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function DP(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP="FirebaseError";class gn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=LP,Object.setPrototypeOf(this,gn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ks.prototype.create)}}class ks{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?MP(i,r):"Error",l=`${this.serviceName}: ${o} (${s}).`;return new gn(s,l,r)}}function MP(t,e){return t.replace(VP,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const VP=/\{\$([^}]+)}/g;function UP(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(_v(i)&&_v(o)){if(!fa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function _v(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function So(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Po(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function FP(t,e){const n=new $P(t,e);return n.subscribe.bind(n)}class $P{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");BP(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Hd),s.error===void 0&&(s.error=Hd),s.complete===void 0&&(s.complete=Hd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function BP(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Hd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class Xt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zP{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new SP;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(HP(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:qP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function qP(t){return t===ss?void 0:t}function HP(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new zP(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const KP={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},GP=ne.INFO,QP={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},YP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=QP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zp{constructor(e){this.name=e,this._logLevel=GP,this._logHandler=YP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?KP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const XP=(t,e)=>e.some(n=>t instanceof n);let wv,xv;function JP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function ZP(){return xv||(xv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Lx=new WeakMap,df=new WeakMap,Mx=new WeakMap,Wd=new WeakMap,qp=new WeakMap;function eA(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Yn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Lx.set(n,t)}).catch(()=>{}),qp.set(e,t),e}function tA(t){if(df.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});df.set(t,e)}let hf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return df.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Mx.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function nA(t){hf=t(hf)}function rA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Kd(this),e,...n);return Mx.set(r,e.sort?e.sort():[e]),Yn(r)}:ZP().includes(t)?function(...e){return t.apply(Kd(this),e),Yn(Lx.get(this))}:function(...e){return Yn(t.apply(Kd(this),e))}}function sA(t){return typeof t=="function"?rA(t):(t instanceof IDBTransaction&&tA(t),XP(t,JP())?new Proxy(t,hf):t)}function Yn(t){if(t instanceof IDBRequest)return eA(t);if(Wd.has(t))return Wd.get(t);const e=sA(t);return e!==t&&(Wd.set(t,e),qp.set(e,t)),e}const Kd=t=>qp.get(t);function yc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),l=Yn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Yn(o.result),c.oldVersion,c.newVersion,Yn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),l}function Gd(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Yn(n).then(()=>{})}const iA=["get","getKey","getAll","getAllKeys","count"],oA=["put","add","delete","clear"],Qd=new Map;function Ev(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Qd.get(e))return Qd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=oA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||iA.includes(n)))return;const i=async function(o,...l){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(l.shift())),(await Promise.all([d[n](...l),s&&c.done]))[0]};return Qd.set(e,i),i}nA(t=>({...t,get:(e,n,r)=>Ev(e,n)||t.get(e,n,r),has:(e,n)=>!!Ev(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(lA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function lA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ff="@firebase/app",Tv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new zp("@firebase/app"),uA="@firebase/app-compat",cA="@firebase/analytics-compat",dA="@firebase/analytics",hA="@firebase/app-check-compat",fA="@firebase/app-check",pA="@firebase/auth",mA="@firebase/auth-compat",gA="@firebase/database",yA="@firebase/data-connect",vA="@firebase/database-compat",_A="@firebase/functions",wA="@firebase/functions-compat",xA="@firebase/installations",EA="@firebase/installations-compat",TA="@firebase/messaging",IA="@firebase/messaging-compat",bA="@firebase/performance",NA="@firebase/performance-compat",SA="@firebase/remote-config",PA="@firebase/remote-config-compat",AA="@firebase/storage",kA="@firebase/storage-compat",CA="@firebase/firestore",RA="@firebase/vertexai-preview",jA="@firebase/firestore-compat",OA="firebase",DA="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pf="[DEFAULT]",LA={[ff]:"fire-core",[uA]:"fire-core-compat",[dA]:"fire-analytics",[cA]:"fire-analytics-compat",[fA]:"fire-app-check",[hA]:"fire-app-check-compat",[pA]:"fire-auth",[mA]:"fire-auth-compat",[gA]:"fire-rtdb",[yA]:"fire-data-connect",[vA]:"fire-rtdb-compat",[_A]:"fire-fn",[wA]:"fire-fn-compat",[xA]:"fire-iid",[EA]:"fire-iid-compat",[TA]:"fire-fcm",[IA]:"fire-fcm-compat",[bA]:"fire-perf",[NA]:"fire-perf-compat",[SA]:"fire-rc",[PA]:"fire-rc-compat",[AA]:"fire-gcs",[kA]:"fire-gcs-compat",[CA]:"fire-fst",[jA]:"fire-fst-compat",[RA]:"fire-vertex","fire-js":"fire-js",[OA]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map,MA=new Map,mf=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function fn(t){const e=t.name;if(mf.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;mf.set(e,t);for(const n of Cu.values())Iv(n,t);for(const n of MA.values())Iv(n,t);return!0}function Cs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function on(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VA={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new ks("app","Firebase",VA);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UA{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rs=DA;function Vx(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:pf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=Cx()),!n)throw Vr.create("no-options");const i=Cu.get(s);if(i){if(fa(n,i.options)&&fa(r,i.config))return i;throw Vr.create("duplicate-app",{appName:s})}const o=new WP(s);for(const c of mf.values())o.addComponent(c);const l=new UA(n,r,o);return Cu.set(s,l),l}function vc(t=pf){const e=Cu.get(t);if(!e&&t===pf&&Cx())return Vx();if(!e)throw Vr.create("no-app",{appName:t});return e}function Ot(t,e,n){var r;let s=(r=LA[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const l=[`Unable to register library "${s}" with version "${e}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(l.join(" "));return}fn(new Xt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FA="firebase-heartbeat-database",$A=1,pa="firebase-heartbeat-store";let Yd=null;function Ux(){return Yd||(Yd=yc(FA,$A,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),Yd}async function BA(t){try{const n=(await Ux()).transaction(pa),r=await n.objectStore(pa).get(Fx(t));return await n.done,r}catch(e){if(e instanceof gn)rr.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function bv(t,e){try{const r=(await Ux()).transaction(pa,"readwrite");await r.objectStore(pa).put(e,Fx(t)),await r.done}catch(n){if(n instanceof gn)rr.warn(n.message);else{const r=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function Fx(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zA=1024,qA=30*24*60*60*1e3;class HA{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new KA(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Nv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=qA}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nv(),{heartbeatsToSend:r,unsentEntries:s}=WA(this._heartbeatsCache.heartbeats),i=ku(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function Nv(){return new Date().toISOString().substring(0,10)}function WA(t,e=zA){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Sv(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Sv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class KA{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ox()?Dx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await BA(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return bv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Sv(t){return ku(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GA(t){fn(new Xt("platform-logger",e=>new aA(e),"PRIVATE")),fn(new Xt("heartbeat",e=>new HA(e),"PRIVATE")),Ot(ff,Tv,t),Ot(ff,Tv,"esm2017"),Ot("fire-js","")}GA("");function Hp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function $x(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const QA=$x,Bx=new ks("auth","Firebase",$x());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new zp("@firebase/auth");function YA(t,...e){Ru.logLevel<=ne.WARN&&Ru.warn(`Auth (${Rs}): ${t}`,...e)}function Gl(t,...e){Ru.logLevel<=ne.ERROR&&Ru.error(`Auth (${Rs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw Kp(t,...e)}function cn(t,...e){return Kp(t,...e)}function Wp(t,e,n){const r=Object.assign(Object.assign({},QA()),{[e]:n});return new ks("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return Wp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function XA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),Wp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Kp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bx.create(t,...e)}function K(t,e,...n){if(!t)throw Kp(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gl(e),new Error(e)}function sr(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function JA(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(JA()||CP()||"connection"in navigator)?navigator.onLine:!0}function ek(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=PP()||RP()}get(){return ZA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gp(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zx{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tk={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nk=new Oa(3e4,6e4);function ur(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function kn(t,e,n,r,s={}){return qx(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const l=ja(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return kP()||(d.referrerPolicy="no-referrer"),zx.fetch()(Hx(t,t.config.apiHost,n,l),d)})}async function qx(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},tk),e);try{const s=new sk(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw kl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const l=i.ok?o.errorMessage:o.error.message,[c,d]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw kl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw kl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw kl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Wp(t,f,d);Jt(t,f)}}catch(s){if(s instanceof gn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function Da(t,e,n,r,s={}){const i=await kn(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Hx(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Gp(t.config,s):`${t.config.apiScheme}://${s}`}function rk(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class sk{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(cn(this.auth,"network-request-failed")),nk.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function kl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=cn(t,e,r);return s.customData._tokenResponse=n,s}function Av(t){return t!==void 0&&t.enterprise!==void 0}class ik{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return rk(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function ok(t,e){return kn(t,"GET","/v2/recaptchaConfig",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ak(t,e){return kn(t,"POST","/v1/accounts:delete",e)}async function Wx(t,e){return kn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function lk(t,e=!1){const n=_e(t),r=await n.getIdToken(e),s=Qp(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:zo(Xd(s.auth_time)),issuedAtTime:zo(Xd(s.iat)),expirationTime:zo(Xd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Xd(t){return Number(t)*1e3}function Qp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Px(n);return s?JSON.parse(s):(Gl("Failed to decode base64 JWT payload"),null)}catch(s){return Gl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kv(t){const e=Qp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gn&&uk(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function uk({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=zo(this.lastLoginAt),this.creationTime=zo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ni(t,Wx(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Kx(i.providerUserInfo):[],l=hk(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(l!=null&&l.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:l,metadata:new yf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function dk(t){const e=_e(t);await ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function hk(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Kx(t){return t.map(e=>{var{providerId:n}=e,r=Hp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fk(t,e){const n=await qx(t,{},async()=>{const r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Hx(t,s,"/v1/token",`key=${i}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",zx.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function pk(t,e){return kn(t,"POST","/v2/accounts:revokeToken",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await fk(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pi;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Hp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ck(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new yf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ni(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return lk(this,e)}reload(){return dk(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ju(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(on(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Ni(this,ak(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,l,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,m=(s=n.email)!==null&&s!==void 0?s:void 0,T=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,b=(o=n.photoURL)!==null&&o!==void 0?o:void 0,N=(l=n.tenantId)!==null&&l!==void 0?l:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(d=n.createdAt)!==null&&d!==void 0?d:void 0,w=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:k,isAnonymous:L,providerData:V,stsTokenManager:I}=n;K(y&&I,e,"internal-error");const _=pi.fromJSON(this.name,I);K(typeof y=="string",e,"internal-error"),gr(g,e.name),gr(m,e.name),K(typeof k=="boolean",e,"internal-error"),K(typeof L=="boolean",e,"internal-error"),gr(T,e.name),gr(b,e.name),gr(N,e.name),gr(A,e.name),gr(x,e.name),gr(w,e.name);const S=new Kn({uid:y,auth:e,email:m,emailVerified:k,displayName:g,isAnonymous:L,photoURL:b,phoneNumber:T,tenantId:N,stsTokenManager:_,createdAt:x,lastLoginAt:w});return V&&Array.isArray(V)&&(S.providerData=V.map(E=>Object.assign({},E))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new pi;s.updateFromServerResponse(n);const i=new Kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ju(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Kx(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),l=new pi;l.updateFromIdToken(r);const c=new Kn({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new yf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cv=new Map;function Gn(t){sr(t instanceof Function,"Expected a class definition");let e=Cv.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Cv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Gx.type="NONE";const Rv=Gx;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e,n){return`firebase:${t}:${e}:${n}`}class mi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ql(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ql("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mi(Gn(Rv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Gn(Rv);const o=Ql(r,e.config.apiKey,e.name);let l=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Kn._fromJSON(e,f);d!==i&&(l=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new mi(i,e,r):(i=c[0],l&&await i._set(o,l.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new mi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Jx(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Qx(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(eE(e))return"Blackberry";if(tE(e))return"Webos";if(Yx(e))return"Safari";if((e.includes("chrome/")||Xx(e))&&!e.includes("edge/"))return"Chrome";if(Zx(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Qx(t=pt()){return/firefox\//i.test(t)}function Yx(t=pt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Xx(t=pt()){return/crios\//i.test(t)}function Jx(t=pt()){return/iemobile/i.test(t)}function Zx(t=pt()){return/android/i.test(t)}function eE(t=pt()){return/blackberry/i.test(t)}function tE(t=pt()){return/webos/i.test(t)}function Yp(t=pt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function mk(t=pt()){var e;return Yp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function gk(){return jP()&&document.documentMode===10}function nE(t=pt()){return Yp(t)||Zx(t)||tE(t)||eE(t)||/windows phone/i.test(t)||Jx(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rE(t,e=[]){let n;switch(t){case"Browser":n=jv(pt());break;case"Worker":n=`${jv(pt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Rs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yk{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,l)=>{try{const c=e(i);o(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vk(t,e={}){return kn(t,"GET","/v2/passwordPolicy",ur(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _k=6;class wk{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:_k,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xk{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ov(this),this.idTokenSubscription=new Ov(this),this.beforeStateQueue=new yk(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bx,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await mi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Wx(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(on(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===l)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ju(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=ek()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(on(this.app))return Promise.reject(Xn(this));const n=e?_e(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return on(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return on(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await vk(this),n=new wk(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ks("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await pk(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await mi.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=rE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&YA(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cr(t){return _e(t)}class Ov{constructor(e){this.auth=e,this.observer=null,this.addObserver=FP(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _c={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Ek(t){_c=t}function sE(t){return _c.loadJS(t)}function Tk(){return _c.recaptchaEnterpriseScript}function Ik(){return _c.gapiScript}function bk(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const Nk="recaptcha-enterprise",Sk="NO_RECAPTCHA";class Pk{constructor(e){this.type=Nk,this.auth=cr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,l)=>{ok(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const d=new ik(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{l(c)})})}function s(i,o,l){const c=window.grecaptcha;Av(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(Sk)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(l=>{if(!n&&Av(window.grecaptcha))s(l,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=Tk();c.length!==0&&(c+=l),sE(c).then(()=>{s(l,i,o)}).catch(d=>{o(d)})}}).catch(l=>{o(l)})})}}async function Dv(t,e,n,r=!1){const s=new Pk(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ou(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Dv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Dv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ak(t,e){const n=Cs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fa(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function kk(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function Ck(t,e,n){const r=cr(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=iE(e),{host:o,port:l}=Rk(e),c=l===null?"":`:${l}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),jk()}function iE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function Rk(t){const e=iE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Lv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Lv(o)}}}function Lv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function jk(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function Ok(t,e){return kn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dk(t,e){return Da(t,"POST","/v1/accounts:signInWithPassword",ur(t,e))}async function Lk(t,e){return kn(t,"POST","/v1/accounts:sendOobCode",ur(t,e))}async function Mk(t,e){return Lk(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vk(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}async function Uk(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Xp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ma(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ma(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,n,"signInWithPassword",Dk);case"emailLink":return Vk(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,r,"signUpPassword",Ok);case"emailLink":return Uk(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t,e){return Da(t,"POST","/v1/accounts:signInWithIdp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk="http://localhost";class ws extends Xp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Hp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ws(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}buildRequest(){const e={requestUri:Fk,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Bk(t){const e=So(Po(t)).link,n=e?So(Po(e)).deep_link_id:null,r=So(Po(t)).deep_link_id;return(r?So(Po(r)).link:null)||r||n||e||t}class Jp{constructor(e){var n,r,s,i,o,l;const c=So(Po(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=$k((s=c.mode)!==null&&s!==void 0?s:null);K(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=c.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Bk(e);try{return new Jp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.providerId=qi.PROVIDER_ID}static credential(e,n){return ma._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Jp.parseLink(n);return K(r,"argument-error"),ma._fromEmailAndCode(e,r.code,r.tenantId)}}qi.PROVIDER_ID="password";qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends Zp{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr extends La{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:xr.PROVIDER_ID,signInMethod:xr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return xr.credentialFromTaggedObject(e)}static credentialFromError(e){return xr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return xr.credential(e.oauthAccessToken)}catch{return null}}}xr.FACEBOOK_SIGN_IN_METHOD="facebook.com";xr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.GOOGLE_SIGN_IN_METHOD="google.com";zn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends La{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends La{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zk(t,e){return Da(t,"POST","/v1/accounts:signUp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kn._fromIdTokenResponse(e,r,s),o=Mv(r);return new xs({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Mv(r);return new xs({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Mv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends gn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Du.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Du(e,n,r,s)}}function oE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Du._fromErrorAndOperation(t,i,e,r):i})}async function qk(t,e,n=!1){const r=await Ni(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return xs._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hk(t,e,n=!1){const{auth:r}=t;if(on(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const i=await Ni(t,oE(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Qp(i.idToken);K(o,r,"internal-error");const{sub:l}=o;return K(t.uid===l,r,"user-mismatch"),xs._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aE(t,e,n=!1){if(on(t.app))return Promise.reject(Xn(t));const r="signIn",s=await oE(t,r,e),i=await xs._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function Wk(t,e){return aE(cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t){const e=cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Kk(t,e,n){const r=cr(t);await Ou(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",Mk)}async function Gk(t,e,n){if(on(t.app))return Promise.reject(Xn(t));const r=cr(t),o=await Ou(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",zk).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&lE(t),c}),l=await xs._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function Qk(t,e,n){return on(t.app)?Promise.reject(Xn(t)):Wk(_e(t),qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&lE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yk(t,e){return kn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ni(r,Yk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:c})=>c==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Jk(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function Zk(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function eC(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function tC(t){return _e(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC=1e3,rC=10;class cE extends uE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=nE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);gk()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,rC):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}cE.type="LOCAL";const sC=cE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE extends uE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}dE.type="SESSION";const hE=dE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(o).map(async d=>d(n.origin,i)),c=await iC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function em(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((l,c)=>{const d=em("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const m=g;if(m.data.eventId===d)switch(m.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),l(m.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function aC(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fE(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function lC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function uC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function cC(){return fE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pE="firebaseLocalStorageDb",dC=1,Mu="firebaseLocalStorage",mE="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function xc(t,e){return t.transaction([Mu],e?"readwrite":"readonly").objectStore(Mu)}function hC(){const t=indexedDB.deleteDatabase(pE);return new Ma(t).toPromise()}function vf(){const t=indexedDB.open(pE,dC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mu,{keyPath:mE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mu)?e(r):(r.close(),await hC(),e(await vf()))})})}async function Vv(t,e,n){const r=xc(t,!0).put({[mE]:e,value:n});return new Ma(r).toPromise()}async function fC(t,e){const n=xc(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function Uv(t,e){const n=xc(t,!0).delete(e);return new Ma(n).toPromise()}const pC=800,mC=3;class gE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await vf(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return fE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wc._getInstance(cC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await lC(),!this.activeServiceWorker)return;this.sender=new oC(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||uC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await vf();return await Vv(e,Lu,"1"),await Uv(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Vv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>fC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Uv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=xc(s,!1).getAll();return new Ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}gE.type="LOCAL";const gC=gE;new Oa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yE(t,e){return e?Gn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm extends Xp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yC(t){return aE(t.auth,new tm(t),t.bypassAuthState)}function vC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),Hk(n,new tm(t),t.bypassAuthState)}async function _C(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),qk(n,new tm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vE{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:l}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yC;case"linkViaPopup":case"linkViaRedirect":return _C;case"reauthViaPopup":case"reauthViaRedirect":return vC;default:Jt(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=new Oa(2e3,1e4);async function xC(t,e,n){if(on(t.app))return Promise.reject(cn(t,"operation-not-supported-in-this-environment"));const r=cr(t);XA(t,e,Zp);const s=yE(r,n);return new us(r,"signInViaPopup",e,s).executeNotNull()}class us extends vE{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=em();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(cn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(cn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(cn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,wC.get())};e()}}us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EC="pendingRedirect",Yl=new Map;class TC extends vE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yl.get(this.auth._key());if(!e){try{const r=await IC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function IC(t,e){const n=SC(e),r=NC(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function bC(t,e){Yl.set(t._key(),e)}function NC(t){return Gn(t._redirectPersistence)}function SC(t){return Ql(EC,t.config.apiKey,t.name)}async function PC(t,e,n=!1){if(on(t.app))return Promise.reject(Xn(t));const r=cr(t),s=yE(r,e),o=await new TC(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AC=10*60*1e3;class kC{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!CC(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!_E(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(cn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=AC&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function _E({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function CC(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return _E(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RC(t,e={}){return kn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,OC=/^https?/;async function DC(t){if(t.config.emulator)return;const{authorizedDomains:e}=await RC(t);for(const n of e)try{if(LC(n))return}catch{}Jt(t,"unauthorized-domain")}function LC(t){const e=gf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!OC.test(n))return!1;if(jC.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MC=new Oa(3e4,6e4);function $v(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function VC(t){return new Promise((e,n)=>{var r,s,i;function o(){$v(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$v(),n(cn(t,"network-request-failed"))},timeout:MC.get()})}if(!((s=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const l=bk("iframefcb");return Tn()[l]=()=>{gapi.load?o():n(cn(t,"network-request-failed"))},sE(`${Ik()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Xl=null,e})}let Xl=null;function UC(t){return Xl=Xl||VC(t),Xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FC=new Oa(5e3,15e3),$C="__/auth/iframe",BC="emulator/auth/iframe",zC={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qC=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function HC(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Gp(e,BC):`https://${t.config.authDomain}/${$C}`,r={apiKey:e.apiKey,appName:t.name,v:Rs},s=qC.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ja(r).slice(1)}`}async function WC(t){const e=await UC(t),n=Tn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:HC(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:zC,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=cn(t,"network-request-failed"),l=Tn().setTimeout(()=>{i(o)},FC.get());function c(){Tn().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},GC=500,QC=600,YC="_blank",XC="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function JC(t,e,n,r=GC,s=QC){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},KC),{width:r.toString(),height:s.toString(),top:i,left:o}),d=pt().toLowerCase();n&&(l=Xx(d)?YC:n),Qx(d)&&(e=e||XC,c.scrollbars="yes");const f=Object.entries(c).reduce((m,[T,b])=>`${m}${T}=${b},`,"");if(mk(d)&&l!=="_self")return ZC(e||"",l),new Bv(null);const g=window.open(e||"",l,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new Bv(g)}function ZC(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eR="__/auth/handler",tR="emulator/auth/handler",nR=encodeURIComponent("fac");async function zv(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Rs,eventId:s};if(e instanceof Zp){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",UP(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof La){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),d=c?`#${nR}=${encodeURIComponent(c)}`:"";return`${rR(t)}?${ja(l).slice(1)}${d}`}function rR({config:t}){return t.emulator?Gp(t,tR):`https://${t.authDomain}/${eR}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jd="webStorageSupport";class sR{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=hE,this._completeRedirectFn=PC,this._overrideRedirectResult=bC}async _openPopup(e,n,r,s){var i;sr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await zv(e,n,r,gf(),s);return JC(e,o,em())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await zv(e,n,r,gf(),s);return aC(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await WC(e),r=new kC(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jd,{type:Jd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Jd];o!==void 0&&n(!!o),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=DC(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return nE()||Yx()||Yp()}}const iR=sR;var qv="@firebase/auth",Hv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oR{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aR(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function lR(t){fn(new Xt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:rE(t)},d=new xk(r,s,i,c);return kk(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),fn(new Xt("auth-internal",e=>{const n=cr(e.getProvider("auth").getImmediate());return(r=>new oR(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ot(qv,Hv,aR(t)),Ot(qv,Hv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uR=5*60,cR=Rx("authIdTokenMaxAge")||uR;let Wv=null;const dR=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>cR)return;const s=n==null?void 0:n.token;Wv!==s&&(Wv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function hR(t=vc()){const e=Cs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ak(t,{popupRedirectResolver:iR,persistence:[gC,sC,hE]}),r=Rx("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=dR(i.toString());Zk(n,o,()=>o(n.currentUser)),Jk(n,l=>o(l))}}const s=Ax("auth");return s&&Ck(n,`http://${s}`),n}function fR(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Ek({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=cn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",fR().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});lR("Browser");var pR="firebase",mR="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ot(pR,mR,"app");var Kv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ps,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function S(){}S.prototype=_.prototype,I.D=_.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(E,C,R){for(var P=Array(arguments.length-2),He=2;He<arguments.length;He++)P[He-2]=arguments[He];return _.prototype[C].apply(E,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,S){S||(S=0);var E=Array(16);if(typeof _=="string")for(var C=0;16>C;++C)E[C]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(C=0;16>C;++C)E[C]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=I.g[0],S=I.g[1],C=I.g[2];var R=I.g[3],P=_+(R^S&(C^R))+E[0]+3614090360&4294967295;_=S+(P<<7&4294967295|P>>>25),P=R+(C^_&(S^C))+E[1]+3905402710&4294967295,R=_+(P<<12&4294967295|P>>>20),P=C+(S^R&(_^S))+E[2]+606105819&4294967295,C=R+(P<<17&4294967295|P>>>15),P=S+(_^C&(R^_))+E[3]+3250441966&4294967295,S=C+(P<<22&4294967295|P>>>10),P=_+(R^S&(C^R))+E[4]+4118548399&4294967295,_=S+(P<<7&4294967295|P>>>25),P=R+(C^_&(S^C))+E[5]+1200080426&4294967295,R=_+(P<<12&4294967295|P>>>20),P=C+(S^R&(_^S))+E[6]+2821735955&4294967295,C=R+(P<<17&4294967295|P>>>15),P=S+(_^C&(R^_))+E[7]+4249261313&4294967295,S=C+(P<<22&4294967295|P>>>10),P=_+(R^S&(C^R))+E[8]+1770035416&4294967295,_=S+(P<<7&4294967295|P>>>25),P=R+(C^_&(S^C))+E[9]+2336552879&4294967295,R=_+(P<<12&4294967295|P>>>20),P=C+(S^R&(_^S))+E[10]+4294925233&4294967295,C=R+(P<<17&4294967295|P>>>15),P=S+(_^C&(R^_))+E[11]+2304563134&4294967295,S=C+(P<<22&4294967295|P>>>10),P=_+(R^S&(C^R))+E[12]+1804603682&4294967295,_=S+(P<<7&4294967295|P>>>25),P=R+(C^_&(S^C))+E[13]+4254626195&4294967295,R=_+(P<<12&4294967295|P>>>20),P=C+(S^R&(_^S))+E[14]+2792965006&4294967295,C=R+(P<<17&4294967295|P>>>15),P=S+(_^C&(R^_))+E[15]+1236535329&4294967295,S=C+(P<<22&4294967295|P>>>10),P=_+(C^R&(S^C))+E[1]+4129170786&4294967295,_=S+(P<<5&4294967295|P>>>27),P=R+(S^C&(_^S))+E[6]+3225465664&4294967295,R=_+(P<<9&4294967295|P>>>23),P=C+(_^S&(R^_))+E[11]+643717713&4294967295,C=R+(P<<14&4294967295|P>>>18),P=S+(R^_&(C^R))+E[0]+3921069994&4294967295,S=C+(P<<20&4294967295|P>>>12),P=_+(C^R&(S^C))+E[5]+3593408605&4294967295,_=S+(P<<5&4294967295|P>>>27),P=R+(S^C&(_^S))+E[10]+38016083&4294967295,R=_+(P<<9&4294967295|P>>>23),P=C+(_^S&(R^_))+E[15]+3634488961&4294967295,C=R+(P<<14&4294967295|P>>>18),P=S+(R^_&(C^R))+E[4]+3889429448&4294967295,S=C+(P<<20&4294967295|P>>>12),P=_+(C^R&(S^C))+E[9]+568446438&4294967295,_=S+(P<<5&4294967295|P>>>27),P=R+(S^C&(_^S))+E[14]+3275163606&4294967295,R=_+(P<<9&4294967295|P>>>23),P=C+(_^S&(R^_))+E[3]+4107603335&4294967295,C=R+(P<<14&4294967295|P>>>18),P=S+(R^_&(C^R))+E[8]+1163531501&4294967295,S=C+(P<<20&4294967295|P>>>12),P=_+(C^R&(S^C))+E[13]+2850285829&4294967295,_=S+(P<<5&4294967295|P>>>27),P=R+(S^C&(_^S))+E[2]+4243563512&4294967295,R=_+(P<<9&4294967295|P>>>23),P=C+(_^S&(R^_))+E[7]+1735328473&4294967295,C=R+(P<<14&4294967295|P>>>18),P=S+(R^_&(C^R))+E[12]+2368359562&4294967295,S=C+(P<<20&4294967295|P>>>12),P=_+(S^C^R)+E[5]+4294588738&4294967295,_=S+(P<<4&4294967295|P>>>28),P=R+(_^S^C)+E[8]+2272392833&4294967295,R=_+(P<<11&4294967295|P>>>21),P=C+(R^_^S)+E[11]+1839030562&4294967295,C=R+(P<<16&4294967295|P>>>16),P=S+(C^R^_)+E[14]+4259657740&4294967295,S=C+(P<<23&4294967295|P>>>9),P=_+(S^C^R)+E[1]+2763975236&4294967295,_=S+(P<<4&4294967295|P>>>28),P=R+(_^S^C)+E[4]+1272893353&4294967295,R=_+(P<<11&4294967295|P>>>21),P=C+(R^_^S)+E[7]+4139469664&4294967295,C=R+(P<<16&4294967295|P>>>16),P=S+(C^R^_)+E[10]+3200236656&4294967295,S=C+(P<<23&4294967295|P>>>9),P=_+(S^C^R)+E[13]+681279174&4294967295,_=S+(P<<4&4294967295|P>>>28),P=R+(_^S^C)+E[0]+3936430074&4294967295,R=_+(P<<11&4294967295|P>>>21),P=C+(R^_^S)+E[3]+3572445317&4294967295,C=R+(P<<16&4294967295|P>>>16),P=S+(C^R^_)+E[6]+76029189&4294967295,S=C+(P<<23&4294967295|P>>>9),P=_+(S^C^R)+E[9]+3654602809&4294967295,_=S+(P<<4&4294967295|P>>>28),P=R+(_^S^C)+E[12]+3873151461&4294967295,R=_+(P<<11&4294967295|P>>>21),P=C+(R^_^S)+E[15]+530742520&4294967295,C=R+(P<<16&4294967295|P>>>16),P=S+(C^R^_)+E[2]+3299628645&4294967295,S=C+(P<<23&4294967295|P>>>9),P=_+(C^(S|~R))+E[0]+4096336452&4294967295,_=S+(P<<6&4294967295|P>>>26),P=R+(S^(_|~C))+E[7]+1126891415&4294967295,R=_+(P<<10&4294967295|P>>>22),P=C+(_^(R|~S))+E[14]+2878612391&4294967295,C=R+(P<<15&4294967295|P>>>17),P=S+(R^(C|~_))+E[5]+4237533241&4294967295,S=C+(P<<21&4294967295|P>>>11),P=_+(C^(S|~R))+E[12]+1700485571&4294967295,_=S+(P<<6&4294967295|P>>>26),P=R+(S^(_|~C))+E[3]+2399980690&4294967295,R=_+(P<<10&4294967295|P>>>22),P=C+(_^(R|~S))+E[10]+4293915773&4294967295,C=R+(P<<15&4294967295|P>>>17),P=S+(R^(C|~_))+E[1]+2240044497&4294967295,S=C+(P<<21&4294967295|P>>>11),P=_+(C^(S|~R))+E[8]+1873313359&4294967295,_=S+(P<<6&4294967295|P>>>26),P=R+(S^(_|~C))+E[15]+4264355552&4294967295,R=_+(P<<10&4294967295|P>>>22),P=C+(_^(R|~S))+E[6]+2734768916&4294967295,C=R+(P<<15&4294967295|P>>>17),P=S+(R^(C|~_))+E[13]+1309151649&4294967295,S=C+(P<<21&4294967295|P>>>11),P=_+(C^(S|~R))+E[4]+4149444226&4294967295,_=S+(P<<6&4294967295|P>>>26),P=R+(S^(_|~C))+E[11]+3174756917&4294967295,R=_+(P<<10&4294967295|P>>>22),P=C+(_^(R|~S))+E[2]+718787259&4294967295,C=R+(P<<15&4294967295|P>>>17),P=S+(R^(C|~_))+E[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(C+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+C&4294967295,I.g[3]=I.g[3]+R&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var S=_-this.blockSize,E=this.B,C=this.h,R=0;R<_;){if(C==0)for(;R<=S;)s(this,I,R),R+=this.blockSize;if(typeof I=="string"){for(;R<_;)if(E[C++]=I.charCodeAt(R++),C==this.blockSize){s(this,E),C=0;break}}else for(;R<_;)if(E[C++]=I[R++],C==this.blockSize){s(this,E),C=0;break}}this.h=C,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var S=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=S&255,S/=256;for(this.u(I),I=Array(16),_=S=0;4>_;++_)for(var E=0;32>E;E+=8)I[S++]=this.g[_]>>>E&255;return I};function i(I,_){var S=l;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=_(I)}function o(I,_){this.h=_;for(var S=[],E=!0,C=I.length-1;0<=C;C--){var R=I[C]|0;E&&R==_||(S[C]=R,E=!1)}this.g=S}var l={};function c(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return A(d(-I));for(var _=[],S=1,E=0;I>=S;E++)_[E]=I/S|0,S*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return A(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(_,8)),E=g,C=0;C<I.length;C+=8){var R=Math.min(8,I.length-C),P=parseInt(I.substring(C,C+R),_);8>R?(R=d(Math.pow(_,R)),E=E.j(R).add(d(P))):(E=E.j(S),E=E.add(d(P)))}return E}var g=c(0),m=c(1),T=c(16777216);t=o.prototype,t.m=function(){if(N(this))return-A(this).m();for(var I=0,_=1,S=0;S<this.g.length;S++){var E=this.i(S);I+=(0<=E?E:4294967296+E)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(b(this))return"0";if(N(this))return"-"+A(this).toString(I);for(var _=d(Math.pow(I,6)),S=this,E="";;){var C=k(S,_).g;S=x(S,C.j(_));var R=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=C,b(S))return R+E;for(;6>R.length;)R="0"+R;E=R+E}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function b(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function N(I){return I.h==-1}t.l=function(I){return I=x(this,I),N(I)?-1:b(I)?0:1};function A(I){for(var _=I.g.length,S=[],E=0;E<_;E++)S[E]=~I.g[E];return new o(S,~I.h).add(m)}t.abs=function(){return N(this)?A(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],E=0,C=0;C<=_;C++){var R=E+(this.i(C)&65535)+(I.i(C)&65535),P=(R>>>16)+(this.i(C)>>>16)+(I.i(C)>>>16);E=P>>>16,R&=65535,P&=65535,S[C]=P<<16|R}return new o(S,S[S.length-1]&-2147483648?-1:0)};function x(I,_){return I.add(A(_))}t.j=function(I){if(b(this)||b(I))return g;if(N(this))return N(I)?A(this).j(A(I)):A(A(this).j(I));if(N(I))return A(this.j(A(I)));if(0>this.l(T)&&0>I.l(T))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,S=[],E=0;E<2*_;E++)S[E]=0;for(E=0;E<this.g.length;E++)for(var C=0;C<I.g.length;C++){var R=this.i(E)>>>16,P=this.i(E)&65535,He=I.i(C)>>>16,Rn=I.i(C)&65535;S[2*E+2*C]+=P*Rn,w(S,2*E+2*C),S[2*E+2*C+1]+=R*Rn,w(S,2*E+2*C+1),S[2*E+2*C+1]+=P*He,w(S,2*E+2*C+1),S[2*E+2*C+2]+=R*He,w(S,2*E+2*C+2)}for(E=0;E<_;E++)S[E]=S[2*E+1]<<16|S[2*E];for(E=_;E<2*_;E++)S[E]=0;return new o(S,0)};function w(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function y(I,_){this.g=I,this.h=_}function k(I,_){if(b(_))throw Error("division by zero");if(b(I))return new y(g,g);if(N(I))return _=k(A(I),_),new y(A(_.g),A(_.h));if(N(_))return _=k(I,A(_)),new y(A(_.g),_.h);if(30<I.g.length){if(N(I)||N(_))throw Error("slowDivide_ only works with positive integers.");for(var S=m,E=_;0>=E.l(I);)S=L(S),E=L(E);var C=V(S,1),R=V(E,1);for(E=V(E,2),S=V(S,2);!b(E);){var P=R.add(E);0>=P.l(I)&&(C=C.add(S),R=P),E=V(E,1),S=V(S,1)}return _=x(I,C.j(_)),new y(C,_)}for(C=g;0<=I.l(_);){for(S=Math.max(1,Math.floor(I.m()/_.m())),E=Math.ceil(Math.log(S)/Math.LN2),E=48>=E?1:Math.pow(2,E-48),R=d(S),P=R.j(_);N(P)||0<P.l(I);)S-=E,R=d(S),P=R.j(_);b(R)&&(R=m),C=C.add(R),I=x(I,P)}return new y(C,I)}t.A=function(I){return k(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)&I.i(E);return new o(S,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)|I.i(E);return new o(S,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],E=0;E<_;E++)S[E]=this.i(E)^I.i(E);return new o(S,this.h^I.h)};function L(I){for(var _=I.g.length+1,S=[],E=0;E<_;E++)S[E]=I.i(E)<<1|I.i(E-1)>>>31;return new o(S,I.h)}function V(I,_){var S=_>>5;_%=32;for(var E=I.g.length-S,C=[],R=0;R<E;R++)C[R]=0<_?I.i(R+S)>>>_|I.i(R+S+1)<<32-_:I.i(R+S);return new o(C,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ps=o}).apply(typeof Kv<"u"?Kv:typeof self<"u"?self:typeof window<"u"?window:{});var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var xE,Ao,EE,Jl,_f,TE,IE,bE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,p){return a==Array.prototype||a==Object.prototype||(a[h]=p.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cl=="object"&&Cl];for(var h=0;h<a.length;++h){var p=a[h];if(p&&p.Math==Math)return p}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var p=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var j=a[v];if(!(j in p))break e;p=p[j]}a=a[a.length-1],v=p[a],h=h(v),h!=v&&h!=null&&e(p,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var p=0,v=!1,j={next:function(){if(!v&&p<a.length){var D=p++;return{value:h(D,a[D]),done:!1}}return v=!0,{done:!0,value:void 0}}};return j[Symbol.iterator]=function(){return j},j}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,p){return p})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},l=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,p){return a.call.apply(a.bind,arguments)}function g(a,h,p){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var j=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(j,v),a.apply(h,j)}}return function(){return a.apply(h,arguments)}}function m(a,h,p){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,m.apply(null,arguments)}function T(a,h){var p=Array.prototype.slice.call(arguments,1);return function(){var v=p.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function b(a,h){function p(){}p.prototype=h.prototype,a.aa=h.prototype,a.prototype=new p,a.prototype.constructor=a,a.Qb=function(v,j,D){for(var $=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)$[ce-2]=arguments[ce];return h.prototype[j].apply(v,$)}}function N(a){const h=a.length;if(0<h){const p=Array(h);for(let v=0;v<h;v++)p[v]=a[v];return p}return[]}function A(a,h){for(let p=1;p<arguments.length;p++){const v=arguments[p];if(c(v)){const j=a.length||0,D=v.length||0;a.length=j+D;for(let $=0;$<D;$++)a[j+$]=v[$]}else a.push(v)}}class x{constructor(h,p){this.i=h,this.j=p,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function w(a){return/^[\s\xa0]*$/.test(a)}function y(){var a=l.navigator;return a&&(a=a.userAgent)?a:""}function k(a){return k[" "](a),a}k[" "]=function(){};var L=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function V(a,h,p){for(const v in a)h.call(p,a[v],v,a)}function I(a,h){for(const p in a)h.call(void 0,a[p],p,a)}function _(a){const h={};for(const p in a)h[p]=a[p];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function E(a,h){let p,v;for(let j=1;j<arguments.length;j++){v=arguments[j];for(p in v)a[p]=v[p];for(let D=0;D<S.length;D++)p=S[D],Object.prototype.hasOwnProperty.call(v,p)&&(a[p]=v[p])}}function C(a){var h=1;a=a.split(":");const p=[];for(;0<h&&a.length;)p.push(a.shift()),h--;return a.length&&p.push(a.join(":")),p}function R(a){l.setTimeout(()=>{throw a},0)}function P(){var a=Q;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class He{constructor(){this.h=this.g=null}add(h,p){const v=Rn.get();v.set(h,p),this.h?this.h.next=v:this.g=v,this.h=v}}var Rn=new x(()=>new Yi,a=>a.reset());class Yi{constructor(){this.next=this.g=this.h=null}set(h,p){this.h=h,this.g=p,this.next=null}reset(){this.next=this.g=this.h=null}}let jn,z=!1,Q=new He,Z=()=>{const a=l.Promise.resolve(void 0);jn=()=>{a.then(we)}};var we=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(p){R(p)}var h=Rn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}z=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var On=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const p=()=>{};l.addEventListener("test",p,h),l.removeEventListener("test",p,h)}catch{}return a}();function Dn(a,h){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var p=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{k(h.nodeName);var j=!0;break e}catch{}j=!1}j||(h=null)}}else p=="mouseover"?h=a.fromElement:p=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ln[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dn.aa.h.call(this)}}b(Dn,Se);var Ln={2:"touch",3:"pen",4:"mouse"};Dn.prototype.h=function(){Dn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),db=0;function hb(a,h,p,v,j){this.listener=a,this.proxy=null,this.src=h,this.type=p,this.capture=!!v,this.ha=j,this.key=++db,this.da=this.fa=!1}function Qa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ya(a){this.src=a,this.g={},this.h=0}Ya.prototype.add=function(a,h,p,v,j){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=Qc(a,h,v,j);return-1<$?(h=a[$],p||(h.fa=!1)):(h=new hb(h,this.src,D,!!v,j),h.fa=p,a.push(h)),h};function Gc(a,h){var p=h.type;if(p in a.g){var v=a.g[p],j=Array.prototype.indexOf.call(v,h,void 0),D;(D=0<=j)&&Array.prototype.splice.call(v,j,1),D&&(Qa(h),a.g[p].length==0&&(delete a.g[p],a.h--))}}function Qc(a,h,p,v){for(var j=0;j<a.length;++j){var D=a[j];if(!D.da&&D.listener==h&&D.capture==!!p&&D.ha==v)return j}return-1}var Yc="closure_lm_"+(1e6*Math.random()|0),Xc={};function ng(a,h,p,v,j){if(Array.isArray(h)){for(var D=0;D<h.length;D++)ng(a,h[D],p,v,j);return null}return p=ig(p),a&&a[Mn]?a.K(h,p,d(v)?!!v.capture:!1,j):fb(a,h,p,!1,v,j)}function fb(a,h,p,v,j,D){if(!h)throw Error("Invalid event type");var $=d(j)?!!j.capture:!!j,ce=Zc(a);if(ce||(a[Yc]=ce=new Ya(a)),p=ce.add(h,p,v,$,D),p.proxy)return p;if(v=pb(),p.proxy=v,v.src=a,v.listener=p,a.addEventListener)On||(j=$),j===void 0&&(j=!1),a.addEventListener(h.toString(),v,j);else if(a.attachEvent)a.attachEvent(sg(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return p}function pb(){function a(p){return h.call(a.src,a.listener,p)}const h=mb;return a}function rg(a,h,p,v,j){if(Array.isArray(h))for(var D=0;D<h.length;D++)rg(a,h[D],p,v,j);else v=d(v)?!!v.capture:!!v,p=ig(p),a&&a[Mn]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],p=Qc(D,p,v,j),-1<p&&(Qa(D[p]),Array.prototype.splice.call(D,p,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=Zc(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Qc(h,p,v,j)),(p=-1<a?h[a]:null)&&Jc(p))}function Jc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Mn])Gc(h.i,a);else{var p=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(p,v,a.capture):h.detachEvent?h.detachEvent(sg(p),v):h.addListener&&h.removeListener&&h.removeListener(v),(p=Zc(h))?(Gc(p,a),p.h==0&&(p.src=null,h[Yc]=null)):Qa(a)}}}function sg(a){return a in Xc?Xc[a]:Xc[a]="on"+a}function mb(a,h){if(a.da)a=!0;else{h=new Dn(h,this);var p=a.listener,v=a.ha||a.src;a.fa&&Jc(a),a=p.call(v,h)}return a}function Zc(a){return a=a[Yc],a instanceof Ya?a:null}var ed="__closure_events_fn_"+(1e9*Math.random()>>>0);function ig(a){return typeof a=="function"?a:(a[ed]||(a[ed]=function(h){return a.handleEvent(h)}),a[ed])}function nt(){ue.call(this),this.i=new Ya(this),this.M=this,this.F=null}b(nt,ue),nt.prototype[Mn]=!0,nt.prototype.removeEventListener=function(a,h,p,v){rg(this,a,h,p,v)};function mt(a,h){var p,v=a.F;if(v)for(p=[];v;v=v.F)p.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Se(h,a);else if(h instanceof Se)h.target=h.target||a;else{var j=h;h=new Se(v,a),E(h,j)}if(j=!0,p)for(var D=p.length-1;0<=D;D--){var $=h.g=p[D];j=Xa($,v,!0,h)&&j}if($=h.g=a,j=Xa($,v,!0,h)&&j,j=Xa($,v,!1,h)&&j,p)for(D=0;D<p.length;D++)$=h.g=p[D],j=Xa($,v,!1,h)&&j}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var p=a.g[h],v=0;v<p.length;v++)Qa(p[v]);delete a.g[h],a.h--}}this.F=null},nt.prototype.K=function(a,h,p,v){return this.i.add(String(a),h,!1,p,v)},nt.prototype.L=function(a,h,p,v){return this.i.add(String(a),h,!0,p,v)};function Xa(a,h,p,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var j=!0,D=0;D<h.length;++D){var $=h[D];if($&&!$.da&&$.capture==p){var ce=$.listener,We=$.ha||$.src;$.fa&&Gc(a.i,$),j=ce.call(We,v)!==!1&&j}}return j&&!v.defaultPrevented}function og(a,h,p){if(typeof a=="function")p&&(a=m(a,p));else if(a&&typeof a.handleEvent=="function")a=m(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:l.setTimeout(a,h||0)}function ag(a){a.g=og(()=>{a.g=null,a.i&&(a.i=!1,ag(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class gb extends ue{constructor(h,p){super(),this.m=h,this.l=p,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:ag(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(a){ue.call(this),this.h=a,this.g={}}b(Xi,ue);var lg=[];function ug(a){V(a.g,function(h,p){this.g.hasOwnProperty(p)&&Jc(h)},a),a.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),ug(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var td=l.JSON.stringify,yb=l.JSON.parse,vb=class{stringify(a){return l.JSON.stringify(a,void 0)}parse(a){return l.JSON.parse(a,void 0)}};function nd(){}nd.prototype.h=null;function cg(a){return a.h||(a.h=a.i())}function dg(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function rd(){Se.call(this,"d")}b(rd,Se);function sd(){Se.call(this,"c")}b(sd,Se);var Xr={},hg=null;function Ja(){return hg=hg||new nt}Xr.La="serverreachability";function fg(a){Se.call(this,Xr.La,a)}b(fg,Se);function Zi(a){const h=Ja();mt(h,new fg(h))}Xr.STAT_EVENT="statevent";function pg(a,h){Se.call(this,Xr.STAT_EVENT,a),this.stat=h}b(pg,Se);function gt(a){const h=Ja();mt(h,new pg(h,a))}Xr.Ma="timingevent";function mg(a,h){Se.call(this,Xr.Ma,a),this.size=h}b(mg,Se);function eo(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){a()},h)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function _b(a,h,p,v,j,D){a.info(function(){if(a.g)if(D)for(var $="",ce=D.split("&"),We=0;We<ce.length;We++){var ie=ce[We].split("=");if(1<ie.length){var rt=ie[0];ie=ie[1];var st=rt.split("_");$=2<=st.length&&st[1]=="type"?$+(rt+"="+ie+"&"):$+(rt+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+v+") [attempt "+j+"]: "+h+`
`+p+`
`+$})}function wb(a,h,p,v,j,D,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+j+"]: "+h+`
`+p+`
`+D+" "+$})}function Ls(a,h,p,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+Eb(a,p)+(v?" "+v:"")})}function xb(a,h){a.info(function(){return"TIMEOUT: "+h})}to.prototype.info=function(){};function Eb(a,h){if(!a.g)return h;if(!h)return null;try{var p=JSON.parse(h);if(p){for(a=0;a<p.length;a++)if(Array.isArray(p[a])){var v=p[a];if(!(2>v.length)){var j=v[1];if(Array.isArray(j)&&!(1>j.length)){var D=j[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<j.length;$++)j[$]=""}}}}return td(p)}catch{return h}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},gg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},id;function el(){}b(el,nd),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},id=new el;function hr(a,h,p,v){this.j=a,this.i=h,this.l=p,this.R=v||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new yg}function yg(){this.i=null,this.g="",this.h=!1}var vg={},od={};function ad(a,h,p){a.L=1,a.v=sl(Vn(h)),a.m=p,a.P=!0,_g(a,null)}function _g(a,h){a.F=Date.now(),tl(a),a.A=Vn(a.v);var p=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),jg(p.i,"t",v),a.C=0,p=a.j.J,a.h=new yg,a.g=Xg(a.j,p?h:null,!a.m),0<a.O&&(a.M=new gb(m(a.Y,a,a.g),a.O)),h=a.U,p=a.g,v=a.ca;var j="readystatechange";Array.isArray(j)||(j&&(lg[0]=j.toString()),j=lg);for(var D=0;D<j.length;D++){var $=ng(p,j[D],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Zi(),_b(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Un(a)==3?h.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const st=Un(this.g);var h=this.g.Ba();const Us=this.g.Z();if(!(3>st)&&(st!=3||this.g&&(this.h.h||this.g.oa()||Fg(this.g)))){this.J||st!=4||h==7||(h==8||0>=Us?Zi(3):Zi(2)),ld(this);var p=this.g.Z();this.X=p;t:if(wg(this)){var v=Fg(this.g);a="";var j=v.length,D=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),no(this);var $="";break t}this.h.i=new l.TextDecoder}for(h=0;h<j;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(D&&h==j-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=p==200,wb(this.i,this.u,this.A,this.l,this.R,st,p),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,We=this.g;if((ce=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(ce)){var ie=ce;break t}}ie=null}if(p=ie)Ls(this.i,this.l,p,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,ud(this,p);else{this.o=!1,this.s=3,gt(12),Jr(this),no(this);break e}}if(this.P){p=!0;let en;for(;!this.J&&this.C<$.length;)if(en=Tb(this,$),en==od){st==4&&(this.s=4,gt(14),p=!1),Ls(this.i,this.l,null,"[Incomplete Response]");break}else if(en==vg){this.s=4,gt(15),Ls(this.i,this.l,$,"[Invalid Chunk]"),p=!1;break}else Ls(this.i,this.l,en,null),ud(this,en);if(wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),st!=4||$.length!=0||this.h.h||(this.s=1,gt(16),p=!1),this.o=this.o&&p,!p)Ls(this.i,this.l,$,"[Invalid Chunked Response]"),Jr(this),no(this);else if(0<$.length&&!this.W){this.W=!0;var rt=this.j;rt.g==this&&rt.ba&&!rt.M&&(rt.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),md(rt),rt.M=!0,gt(11))}}else Ls(this.i,this.l,$,null),ud(this,$);st==4&&Jr(this),this.o&&!this.J&&(st==4?Kg(this.j,this):(this.o=!1,tl(this)))}else Fb(this.g),p==400&&0<$.indexOf("Unknown SID")?(this.s=3,gt(12)):(this.s=0,gt(13)),Jr(this),no(this)}}}catch{}finally{}};function wg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function Tb(a,h){var p=a.C,v=h.indexOf(`
`,p);return v==-1?od:(p=Number(h.substring(p,v)),isNaN(p)?vg:(v+=1,v+p>h.length?od:(h=h.slice(v,v+p),a.C=v+p,h)))}hr.prototype.cancel=function(){this.J=!0,Jr(this)};function tl(a){a.S=Date.now()+a.I,xg(a,a.I)}function xg(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=eo(m(a.ba,a),h)}function ld(a){a.B&&(l.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(xb(this.i,this.A),this.L!=2&&(Zi(),gt(17)),Jr(this),this.s=2,no(this)):xg(this,this.S-a)};function no(a){a.j.G==0||a.J||Kg(a.j,a)}function Jr(a){ld(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,ug(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function ud(a,h){try{var p=a.j;if(p.G!=0&&(p.g==a||cd(p.h,a))){if(!a.K&&cd(p.h,a)&&p.G==3){try{var v=p.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var j=v;if(j[0]==0){e:if(!p.u){if(p.g)if(p.g.F+3e3<a.F)cl(p),ll(p);else break e;pd(p),gt(18)}}else p.za=j[1],0<p.za-p.T&&37500>j[2]&&p.F&&p.v==0&&!p.C&&(p.C=eo(m(p.Za,p),6e3));if(1>=Ig(p.h)&&p.ca){try{p.ca()}catch{}p.ca=void 0}}else es(p,11)}else if((a.K||p.g==a)&&cl(p),!w(h))for(j=p.Da.g.parse(h),h=0;h<j.length;h++){let ie=j[h];if(p.T=ie[0],ie=ie[1],p.G==2)if(ie[0]=="c"){p.K=ie[1],p.ia=ie[2];const rt=ie[3];rt!=null&&(p.la=rt,p.j.info("VER="+p.la));const st=ie[4];st!=null&&(p.Aa=st,p.j.info("SVER="+p.Aa));const Us=ie[5];Us!=null&&typeof Us=="number"&&0<Us&&(v=1.5*Us,p.L=v,p.j.info("backChannelRequestTimeoutMs_="+v)),v=p;const en=a.g;if(en){const hl=en.g?en.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var D=v.h;D.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(dd(D,D.h),D.h=null))}if(v.D){const gd=en.g?en.g.getResponseHeader("X-HTTP-Session-Id"):null;gd&&(v.ya=gd,me(v.I,v.D,gd))}}p.G=3,p.l&&p.l.ua(),p.ba&&(p.R=Date.now()-a.F,p.j.info("Handshake RTT: "+p.R+"ms")),v=p;var $=a;if(v.qa=Yg(v,v.J?v.ia:null,v.W),$.K){bg(v.h,$);var ce=$,We=v.L;We&&(ce.I=We),ce.B&&(ld(ce),tl(ce)),v.g=$}else Hg(v);0<p.i.length&&ul(p)}else ie[0]!="stop"&&ie[0]!="close"||es(p,7);else p.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?es(p,7):fd(p):ie[0]!="noop"&&p.l&&p.l.ta(ie),p.v=0)}}Zi(4)}catch{}}var Ib=class{constructor(a,h){this.g=a,this.map=h}};function Eg(a){this.l=a||10,l.PerformanceNavigationTiming?(a=l.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Tg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ig(a){return a.h?1:a.g?a.g.size:0}function cd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function dd(a,h){a.g?a.g.add(h):a.h=h}function bg(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Eg.prototype.cancel=function(){if(this.i=Ng(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Ng(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const p of a.g.values())h=h.concat(p.D);return h}return N(a.i)}function bb(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],p=a.length,v=0;v<p;v++)h.push(a[v]);return h}h=[],p=0;for(v in a)h[p++]=a[v];return h}function Nb(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var p=0;p<a;p++)h.push(p);return h}h=[],p=0;for(const v in a)h[p++]=v;return h}}}function Sg(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var p=Nb(a),v=bb(a),j=v.length,D=0;D<j;D++)h.call(void 0,v[D],p&&p[D],a)}var Pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Sb(a,h){if(a){a=a.split("&");for(var p=0;p<a.length;p++){var v=a[p].indexOf("="),j=null;if(0<=v){var D=a[p].substring(0,v);j=a[p].substring(v+1)}else D=a[p];h(D,j?decodeURIComponent(j.replace(/\+/g," ")):"")}}}function Zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zr){this.h=a.h,nl(this,a.j),this.o=a.o,this.g=a.g,rl(this,a.s),this.l=a.l;var h=a.i,p=new io;p.i=h.i,h.g&&(p.g=new Map(h.g),p.h=h.h),Ag(this,p),this.m=a.m}else a&&(h=String(a).match(Pg))?(this.h=!1,nl(this,h[1]||"",!0),this.o=ro(h[2]||""),this.g=ro(h[3]||"",!0),rl(this,h[4]),this.l=ro(h[5]||"",!0),Ag(this,h[6]||"",!0),this.m=ro(h[7]||"")):(this.h=!1,this.i=new io(null,this.h))}Zr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(so(h,kg,!0),":");var p=this.g;return(p||h=="file")&&(a.push("//"),(h=this.o)&&a.push(so(h,kg,!0),"@"),a.push(encodeURIComponent(String(p)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),p=this.s,p!=null&&a.push(":",String(p))),(p=this.l)&&(this.g&&p.charAt(0)!="/"&&a.push("/"),a.push(so(p,p.charAt(0)=="/"?kb:Ab,!0))),(p=this.i.toString())&&a.push("?",p),(p=this.m)&&a.push("#",so(p,Rb)),a.join("")};function Vn(a){return new Zr(a)}function nl(a,h,p){a.j=p?ro(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function rl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Ag(a,h,p){h instanceof io?(a.i=h,jb(a.i,a.h)):(p||(h=so(h,Cb)),a.i=new io(h,a.h))}function me(a,h,p){a.i.set(h,p)}function sl(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ro(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function so(a,h,p){return typeof a=="string"?(a=encodeURI(a).replace(h,Pb),p&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Pb(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kg=/[#\/\?@]/g,Ab=/[#\?:]/g,kb=/[#\?]/g,Cb=/[#\?@]/g,Rb=/#/g;function io(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&Sb(a.i,function(h,p){a.add(decodeURIComponent(h.replace(/\+/g," ")),p)}))}t=io.prototype,t.add=function(a,h){fr(this),this.i=null,a=Ms(this,a);var p=this.g.get(a);return p||this.g.set(a,p=[]),p.push(h),this.h+=1,this};function Cg(a,h){fr(a),h=Ms(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function Rg(a,h){return fr(a),h=Ms(a,h),a.g.has(h)}t.forEach=function(a,h){fr(this),this.g.forEach(function(p,v){p.forEach(function(j){a.call(h,j,v,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),p=[];for(let v=0;v<h.length;v++){const j=a[v];for(let D=0;D<j.length;D++)p.push(h[v])}return p},t.V=function(a){fr(this);let h=[];if(typeof a=="string")Rg(this,a)&&(h=h.concat(this.g.get(Ms(this,a))));else{a=Array.from(this.g.values());for(let p=0;p<a.length;p++)h=h.concat(a[p])}return h},t.set=function(a,h){return fr(this),this.i=null,a=Ms(this,a),Rg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function jg(a,h,p){Cg(a,h),0<p.length&&(a.i=null,a.g.set(Ms(a,h),N(p)),a.h+=p.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var p=0;p<h.length;p++){var v=h[p];const D=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var j=D;$[v]!==""&&(j+="="+encodeURIComponent(String($[v]))),a.push(j)}}return this.i=a.join("&")};function Ms(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function jb(a,h){h&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(p,v){var j=v.toLowerCase();v!=j&&(Cg(this,v),jg(this,j,p))},a)),a.j=h}function Ob(a,h){const p=new to;if(l.Image){const v=new Image;v.onload=T(pr,p,"TestLoadImage: loaded",!0,h,v),v.onerror=T(pr,p,"TestLoadImage: error",!1,h,v),v.onabort=T(pr,p,"TestLoadImage: abort",!1,h,v),v.ontimeout=T(pr,p,"TestLoadImage: timeout",!1,h,v),l.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function Db(a,h){const p=new to,v=new AbortController,j=setTimeout(()=>{v.abort(),pr(p,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(j),D.ok?pr(p,"TestPingServer: ok",!0,h):pr(p,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(j),pr(p,"TestPingServer: error",!1,h)})}function pr(a,h,p,v,j){try{j&&(j.onload=null,j.onerror=null,j.onabort=null,j.ontimeout=null),v(p)}catch{}}function Lb(){this.g=new vb}function Mb(a,h,p){const v=p||"";try{Sg(a,function(j,D){let $=j;d(j)&&($=td(j)),h.push(v+D+"="+encodeURIComponent($))})}catch(j){throw h.push(v+"type="+encodeURIComponent("_badmap")),j}}function il(a){this.l=a.Ub||null,this.j=a.eb||!1}b(il,nd),il.prototype.g=function(){return new ol(this.l,this.j)},il.prototype.i=function(a){return function(){return a}}({});function ol(a,h){nt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}b(ol,nt),t=ol.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ao(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||l).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Og(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Og(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?oo(this):ao(this),this.readyState==3&&Og(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,oo(this))},t.Qa=function(a){this.g&&(this.response=a,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ao(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var p=h.next();!p.done;)p=p.value,a.push(p[0]+": "+p[1]),p=h.next();return a.join(`\r
`)};function ao(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Dg(a){let h="";return V(a,function(p,v){h+=v,h+=":",h+=p,h+=`\r
`}),h}function hd(a,h,p){e:{for(v in p){var v=!1;break e}v=!0}v||(p=Dg(p),typeof a=="string"?p!=null&&encodeURIComponent(String(p)):me(a,h,p))}function be(a){nt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}b(be,nt);var Vb=/^https?$/i,Ub=["POST","PUT"];t=be.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,p,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():id.g(),this.v=this.o?cg(this.o):cg(id),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Lg(this,D);return}if(a=p||"",p=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var j in v)p.set(j,v[j]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())p.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(p.keys()).find(D=>D.toLowerCase()=="content-type"),j=l.FormData&&a instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Ub,h,void 0))||v||j||p.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of p)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ug(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Lg(this,D)}};function Lg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Mg(a),al(a)}function Mg(a){a.A||(a.A=!0,mt(a,"complete"),mt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,mt(this,"complete"),mt(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),be.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Vg(this):this.bb())},t.bb=function(){Vg(this)};function Vg(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)og(a.Ea,0,a);else if(mt(a,"readystatechange"),Un(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var p;if(!(p=h)){var v;if(v=$===0){var j=String(a.D).match(Pg)[1]||null;!j&&l.self&&l.self.location&&(j=l.self.location.protocol.slice(0,-1)),v=!Vb.test(j?j.toLowerCase():"")}p=v}if(p)mt(a,"complete"),mt(a,"success");else{a.m=6;try{var D=2<Un(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Mg(a)}}finally{al(a)}}}}function al(a,h){if(a.g){Ug(a);const p=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||mt(a,"ready");try{p.onreadystatechange=v}catch{}}}function Ug(a){a.I&&(l.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),yb(h)}};function Fg(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function Fb(a){const h={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(w(a[v]))continue;var p=C(a[v]);const j=p[0];if(p=p[1],typeof p!="string")continue;p=p.trim();const D=h[j]||[];h[j]=D,D.push(p)}I(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(a,h,p){return p&&p.internalChannelParams&&p.internalChannelParams[a]||h}function $g(a){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,a),this.cb=lo("retryDelaySeedMs",1e4,a),this.Wa=lo("forwardChannelMaxRetries",2,a),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Eg(a&&a.concurrentRequestLimit),this.Da=new Lb,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=$g.prototype,t.la=8,t.G=1,t.connect=function(a,h,p,v){gt(0),this.W=a,this.H=h||{},p&&v!==void 0&&(this.H.OSID=p,this.H.OAID=v),this.F=this.X,this.I=Yg(this,null,this.W),ul(this)};function fd(a){if(Bg(a),a.G==3){var h=a.U++,p=Vn(a.I);if(me(p,"SID",a.K),me(p,"RID",h),me(p,"TYPE","terminate"),uo(a,p),h=new hr(a,a.j,h),h.L=2,h.v=sl(Vn(p)),p=!1,l.navigator&&l.navigator.sendBeacon)try{p=l.navigator.sendBeacon(h.v.toString(),"")}catch{}!p&&l.Image&&(new Image().src=h.v,p=!0),p||(h.g=Xg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),tl(h)}Qg(a)}function ll(a){a.g&&(md(a),a.g.cancel(),a.g=null)}function Bg(a){ll(a),a.u&&(l.clearTimeout(a.u),a.u=null),cl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&l.clearTimeout(a.s),a.s=null)}function ul(a){if(!Tg(a.h)&&!a.s){a.s=!0;var h=a.Ga;jn||Z(),z||(jn(),z=!0),Q.add(h,a),a.B=0}}function $b(a,h){return Ig(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=eo(m(a.Ga,a,h),Gg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const j=new hr(this,this.j,a);let D=this.o;if(this.S&&(D?(D=_(D),E(D,this.S)):D=this.S),this.m!==null||this.O||(j.H=D,D=null),this.P)e:{for(var h=0,p=0;p<this.i.length;p++){t:{var v=this.i[p];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=p;break e}if(h===4096||p===this.i.length-1){h=p+1;break e}}h=1e3}else h=1e3;h=qg(this,j,h),p=Vn(this.I),me(p,"RID",a),me(p,"CVER",22),this.D&&me(p,"X-HTTP-Session-Id",this.D),uo(this,p),D&&(this.O?h="headers="+encodeURIComponent(String(Dg(D)))+"&"+h:this.m&&hd(p,this.m,D)),dd(this.h,j),this.Ua&&me(p,"TYPE","init"),this.P?(me(p,"$req",h),me(p,"SID","null"),j.T=!0,ad(j,p,null)):ad(j,p,h),this.G=2}}else this.G==3&&(a?zg(this,a):this.i.length==0||Tg(this.h)||zg(this))};function zg(a,h){var p;h?p=h.l:p=a.U++;const v=Vn(a.I);me(v,"SID",a.K),me(v,"RID",p),me(v,"AID",a.T),uo(a,v),a.m&&a.o&&hd(v,a.m,a.o),p=new hr(a,a.j,p,a.B+1),a.m===null&&(p.H=a.o),h&&(a.i=h.D.concat(a.i)),h=qg(a,p,1e3),p.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),dd(a.h,p),ad(p,v,h)}function uo(a,h){a.H&&V(a.H,function(p,v){me(h,v,p)}),a.l&&Sg({},function(p,v){me(h,v,p)})}function qg(a,h,p){p=Math.min(a.i.length,p);var v=a.l?m(a.l.Na,a.l,a):null;e:{var j=a.i;let D=-1;for(;;){const $=["count="+p];D==-1?0<p?(D=j[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let ce=!0;for(let We=0;We<p;We++){let ie=j[We].g;const rt=j[We].map;if(ie-=D,0>ie)D=Math.max(0,j[We].g-100),ce=!1;else try{Mb(rt,$,"req"+ie+"_")}catch{v&&v(rt)}}if(ce){v=$.join("&");break e}}}return a=a.i.splice(0,p),h.D=a,v}function Hg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;jn||Z(),z||(jn(),z=!0),Q.add(h,a),a.v=0}}function pd(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=eo(m(a.Fa,a),Gg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Wg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=eo(m(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,gt(10),ll(this),Wg(this))};function md(a){a.A!=null&&(l.clearTimeout(a.A),a.A=null)}function Wg(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Vn(a.qa);me(h,"RID","rpc"),me(h,"SID",a.K),me(h,"AID",a.T),me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(h,"TO",a.ja),me(h,"TYPE","xmlhttp"),uo(a,h),a.m&&a.o&&hd(h,a.m,a.o),a.L&&(a.g.I=a.L);var p=a.g;a=a.ia,p.L=1,p.v=sl(Vn(h)),p.m=null,p.P=!0,_g(p,a)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),pd(this),gt(19))};function cl(a){a.C!=null&&(l.clearTimeout(a.C),a.C=null)}function Kg(a,h){var p=null;if(a.g==h){cl(a),md(a),a.g=null;var v=2}else if(cd(a.h,h))p=h.D,bg(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){p=h.m?h.m.length:0,h=Date.now()-h.F;var j=a.B;v=Ja(),mt(v,new mg(v,p)),ul(a)}else Hg(a);else if(j=h.s,j==3||j==0&&0<h.X||!(v==1&&$b(a,h)||v==2&&pd(a)))switch(p&&0<p.length&&(h=a.h,h.i=h.i.concat(p)),j){case 1:es(a,5);break;case 4:es(a,10);break;case 3:es(a,6);break;default:es(a,2)}}}function Gg(a,h){let p=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(p*=2),p*h}function es(a,h){if(a.j.info("Error code "+h),h==2){var p=m(a.fb,a),v=a.Xa;const j=!v;v=new Zr(v||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||nl(v,"https"),sl(v),j?Ob(v.toString(),p):Db(v.toString(),p)}else gt(2);a.G=0,a.l&&a.l.sa(h),Qg(a),Bg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),gt(2)):(this.j.info("Failed to ping google.com"),gt(1))};function Qg(a){if(a.G=0,a.ka=[],a.l){const h=Ng(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,N(a.i),a.i.length=0),a.l.ra()}}function Yg(a,h,p){var v=p instanceof Zr?Vn(p):new Zr(p);if(v.g!="")h&&(v.g=h+"."+v.g),rl(v,v.s);else{var j=l.location;v=j.protocol,h=h?h+"."+j.hostname:j.hostname,j=+j.port;var D=new Zr(null);v&&nl(D,v),h&&(D.g=h),j&&rl(D,j),p&&(D.l=p),v=D}return p=a.D,h=a.ya,p&&h&&me(v,p,h),me(v,"VER",a.la),uo(a,v),v}function Xg(a,h,p){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new be(new il({eb:p})):new be(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jg(){}t=Jg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(a,h){return new Dt(a,h)};function Dt(a,h){nt.call(this),this.g=new $g(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!w(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!w(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Vs(this)}b(Dt,nt),Dt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Dt.prototype.close=function(){fd(this.g)},Dt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var p={};p.__data__=a,a=p}else this.u&&(p={},p.__data__=td(a),a=p);h.i.push(new Ib(h.Ya++,a)),h.G==3&&ul(h)},Dt.prototype.N=function(){this.g.l=null,delete this.j,fd(this.g),delete this.g,Dt.aa.N.call(this)};function Zg(a){rd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const p in h){a=p;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}b(Zg,rd);function ey(){sd.call(this),this.status=1}b(ey,sd);function Vs(a){this.g=a}b(Vs,Jg),Vs.prototype.ua=function(){mt(this.g,"a")},Vs.prototype.ta=function(a){mt(this.g,new Zg(a))},Vs.prototype.sa=function(a){mt(this.g,new ey)},Vs.prototype.ra=function(){mt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Dt.prototype.send=Dt.prototype.o,Dt.prototype.open=Dt.prototype.m,Dt.prototype.close=Dt.prototype.close,bE=function(){return new dl},IE=function(){return Ja()},TE=Xr,_f={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Jl=Za,gg.COMPLETE="complete",EE=gg,dg.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Ao=dg,be.prototype.listenOnce=be.prototype.L,be.prototype.getLastError=be.prototype.Ka,be.prototype.getLastErrorCode=be.prototype.Ba,be.prototype.getStatus=be.prototype.Z,be.prototype.getResponseJson=be.prototype.Oa,be.prototype.getResponseText=be.prototype.oa,be.prototype.send=be.prototype.ea,be.prototype.setWithCredentials=be.prototype.Ha,xE=be}).apply(typeof Cl<"u"?Cl:typeof self<"u"?self:typeof window<"u"?window:{});const Gv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ut=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};ut.UNAUTHENTICATED=new ut(null),ut.GOOGLE_CREDENTIALS=new ut("google-credentials-uid"),ut.FIRST_PARTY=new ut("first-party-uid"),ut.MOCK_USER=new ut("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Es=new zp("@firebase/firestore");function _o(){return Es.logLevel}function H(t,...e){if(Es.logLevel<=ne.DEBUG){const n=e.map(nm);Es.debug(`Firestore (${Hi}): ${t}`,...n)}}function ir(t,...e){if(Es.logLevel<=ne.ERROR){const n=e.map(nm);Es.error(`Firestore (${Hi}): ${t}`,...n)}}function Si(t,...e){if(Es.logLevel<=ne.WARN){const n=e.map(nm);Es.warn(`Firestore (${Hi}): ${t}`,...n)}}function nm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t="Unexpected state"){const e=`FIRESTORE (${Hi}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function le(t,e){t||G()}function X(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class B extends gn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class gR{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ut.UNAUTHENTICATED))}shutdown(){}}class yR{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class vR{constructor(e){this.t=e,this.currentUser=ut.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new NE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new ut(e)}}class _R{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=ut.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class wR{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new _R(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(ut.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class xR{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ER{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new xR(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TR(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=TR(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Pi(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new B(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new B(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Y(e)}static min(){return new Y(new $e(0,0))}static max(){return new Y(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(),r===void 0?r=e.length-n:r>e.length-n&&G(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ga.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends ga{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new B(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const IR=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends ga{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return IR.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const l=e[s];if(l==="\\"){if(s+1===e.length)throw new B(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new B(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else l==="`"?(o=!o,s++):l!=="."||o?(r+=l,s++):(i(),s++)}if(i(),o)throw new B(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(fe.fromString(e))}static fromName(e){return new W(fe.fromString(e).popFirst(5))}static empty(){return new W(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new fe(e.slice()))}}function bR(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=Y.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new Br(s,W.empty(),e)}function NR(t){return new Br(t.readTime,t.key,-1)}class Br{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Br(Y.min(),W.empty(),-1)}static max(){return new Br(Y.max(),W.empty(),-1)}}function SR(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PR="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class AR{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==PR)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(l=>{++s,l.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let l=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++l,l===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function kR(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ua(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}rm.oe=-1;function Ec(t){return t==null}function Vu(t){return t===0&&1/t==-1/0}function CR(t){return typeof t=="number"&&Number.isInteger(t)&&!Vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function js(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new Ie(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new Ie(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rl(this.root,e,this.comparator,!0)}}class Rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=s??Ye.EMPTY,this.right=i??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ye(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw G();const e=this.left.check();if(e!==this.right.check())throw G();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw G()}get value(){throw G()}get color(){throw G()}get left(){throw G()}get right(){throw G()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(e){this.comparator=e,this.data=new Ie(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Yv(this.data.getIterator())}getIteratorFrom(e){return new Yv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Ze)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Ze(this.comparator);return n.data=e,n}}class Yv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Ut([])}unionWith(e){let n=new Ze(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ut(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Pi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new AE("Invalid base64 string: "+i):i}}(e);return new tt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new tt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tt.EMPTY_BYTE_STRING=new tt("");const RR=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function zr(t){if(le(!!t),typeof t=="string"){let e=0;const n=RR.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ke(t.seconds),nanos:ke(t.nanos)}}function ke(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ts(t){return typeof t=="string"?tt.fromBase64String(t):tt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function sm(t){const e=t.mapValue.fields.__previous_value__;return Tc(e)?sm(e):e}function ya(t){const e=zr(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jR{constructor(e,n,r,s,i,o,l,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=d}}class va{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new va("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl={mapValue:{}};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Tc(t)?4:DR(t)?9007199254740991:OR(t)?10:11:G()}function Sn(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ya(t).isEqual(ya(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=zr(s.timestampValue),l=zr(i.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return Ts(s.bytesValue).isEqual(Ts(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return ke(s.geoPointValue.latitude)===ke(i.geoPointValue.latitude)&&ke(s.geoPointValue.longitude)===ke(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return ke(s.integerValue)===ke(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=ke(s.doubleValue),l=ke(i.doubleValue);return o===l?Vu(o)===Vu(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Pi(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},l=i.mapValue.fields||{};if(Qv(o)!==Qv(l))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(l[c]===void 0||!Sn(o[c],l[c])))return!1;return!0}(t,e);default:return G()}}function _a(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Ai(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const l=ke(i.integerValue||i.doubleValue),c=ke(o.integerValue||o.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(t,e);case 3:return Xv(t.timestampValue,e.timestampValue);case 4:return Xv(ya(t),ya(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const l=Ts(i),c=Ts(o);return l.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const l=i.split("/"),c=o.split("/");for(let d=0;d<l.length&&d<c.length;d++){const f=oe(l[d],c[d]);if(f!==0)return f}return oe(l.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const l=oe(ke(i.latitude),ke(o.latitude));return l!==0?l:oe(ke(i.longitude),ke(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Jv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var l,c,d,f;const g=i.fields||{},m=o.fields||{},T=(l=g.value)===null||l===void 0?void 0:l.arrayValue,b=(c=m.value)===null||c===void 0?void 0:c.arrayValue,N=oe(((d=T==null?void 0:T.values)===null||d===void 0?void 0:d.length)||0,((f=b==null?void 0:b.values)===null||f===void 0?void 0:f.length)||0);return N!==0?N:Jv(T,b)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===jl.mapValue&&o===jl.mapValue)return 0;if(i===jl.mapValue)return 1;if(o===jl.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const m=oe(c[g],f[g]);if(m!==0)return m;const T=Ai(l[c[g]],d[f[g]]);if(T!==0)return T}return oe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw G()}}function Xv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=zr(t),r=zr(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Jv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Ai(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function ki(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=zr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ts(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wf(n.fields[o])}`;return s+"}"}(t.mapValue):G()}function Uu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function xf(t){return!!t&&"integerValue"in t}function im(t){return!!t&&"arrayValue"in t}function Zv(t){return!!t&&"nullValue"in t}function e0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zl(t){return!!t&&"mapValue"in t}function OR(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return js(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function DR(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.value=e}static empty(){return new At({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}o?r[l.lastSegment()]=qo(o):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){js(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new At(qo(this.value))}}function kE(t){const e=[];return js(t.fields,(n,r)=>{const s=new Xe([n]);if(Zl(r)){const i=kE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ut(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e,n,r,s,i,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=l}static newInvalidDocument(e){return new dt(e,0,Y.min(),Y.min(),Y.min(),At.empty(),0)}static newFoundDocument(e,n,r,s){return new dt(e,1,n,Y.min(),r,s,0)}static newNoDocument(e,n){return new dt(e,2,n,Y.min(),Y.min(),At.empty(),0)}static newUnknownDocument(e,n){return new dt(e,3,n,Y.min(),Y.min(),At.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=At.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=At.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof dt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new dt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{constructor(e,n){this.position=e,this.inclusive=n}}function t0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Ai(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function n0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function LR(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{}class Me extends CE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new VR(e,n,r):n==="array-contains"?new $R(e,r):n==="in"?new BR(e,r):n==="not-in"?new zR(e,r):n==="array-contains-any"?new qR(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new UR(e,r):new FR(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Ai(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Ai(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class pn extends CE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new pn(e,n)}matches(e){return RE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function RE(t){return t.op==="and"}function jE(t){return MR(t)&&RE(t)}function MR(t){for(const e of t.filters)if(e instanceof pn)return!1;return!0}function Ef(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+ki(t.value);if(jE(t))return t.filters.map(e=>Ef(e)).join(",");{const e=t.filters.map(n=>Ef(n)).join(",");return`${t.op}(${e})`}}function OE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof pn?function(r,s){return s instanceof pn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,l)=>i&&OE(o,s.filters[l]),!0):!1}(t,e):void G()}function DE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${ki(n.value)}`}(t):t instanceof pn?function(n){return n.op.toString()+" {"+n.getFilters().map(DE).join(" ,")+"}"}(t):"Filter"}class VR extends Me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class UR extends Me{constructor(e,n){super(e,"in",n),this.keys=LE("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class FR extends Me{constructor(e,n){super(e,"not-in",n),this.keys=LE("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function LE(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class $R extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return im(n)&&_a(n.arrayValue,this.value)}}class BR extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_a(this.value.arrayValue,n)}}class zR extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_a(this.value.arrayValue,n)}}class qR extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!im(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n=null,r=[],s=[],i=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=l,this.ue=null}}function r0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new HR(t,e,n,r,s,i,o)}function om(t){const e=X(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Ef(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Ec(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>ki(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>ki(r)).join(",")),e.ue=n}return e.ue}function am(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!LR(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!OE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!n0(t.startAt,e.startAt)&&n0(t.endAt,e.endAt)}function Tf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os{constructor(e,n=null,r=[],s=[],i=null,o="F",l=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=l,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function WR(t,e,n,r,s,i,o,l){return new Os(t,e,n,r,s,i,o,l)}function lm(t){return new Os(t)}function s0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function um(t){return t.collectionGroup!==null}function yi(t){const e=X(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Ze(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(l=l.add(d.field))})}),l})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new wa(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new wa(Xe.keyField(),r))}return e.ce}function In(t){const e=X(t);return e.le||(e.le=KR(e,yi(t))),e.le}function KR(t,e){if(t.limitType==="F")return r0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new wa(s.field,i)});const n=t.endAt?new Ci(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Ci(t.startAt.position,t.startAt.inclusive):null;return r0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function If(t,e){const n=t.filters.concat([e]);return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fu(t,e,n){return new Os(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ic(t,e){return am(In(t),In(e))&&t.limitType===e.limitType}function ME(t){return`${om(In(t))}|lt:${t.limitType}`}function zs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>DE(s)).join(", ")}]`),Ec(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>ki(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>ki(s)).join(",")),`Target(${r})`}(In(t))}; limitType=${t.limitType})`}function bc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,l,c){const d=t0(o,l,c);return o.inclusive?d<=0:d<0}(r.startAt,yi(r),s)||r.endAt&&!function(o,l,c){const d=t0(o,l,c);return o.inclusive?d>=0:d>0}(r.endAt,yi(r),s))}(t,e)}function GR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function VE(t){return(e,n)=>{let r=!1;for(const s of yi(t)){const i=QR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function QR(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,l){const c=o.data.field(i),d=l.data.field(i);return c!==null&&d!==null?Ai(c,d):G()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){js(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YR=new Ie(W.comparator);function or(){return YR}const UE=new Ie(W.comparator);function ko(...t){let e=UE;for(const n of t)e=e.insert(n.key,n);return e}function FE(t){let e=UE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cs(){return Ho()}function $E(){return Ho()}function Ho(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const XR=new Ie(W.comparator),JR=new Ze(W.comparator);function te(...t){let e=JR;for(const n of t)e=e.add(n);return e}const ZR=new Ze(oe);function e2(){return ZR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function BE(t){return{integerValue:""+t}}function t2(t,e){return CR(e)?BE(e):cm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this._=void 0}}function n2(t,e,n){return t instanceof xa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Tc(i)&&(i=sm(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ri?qE(t,e):t instanceof Ea?HE(t,e):function(s,i){const o=zE(s,i),l=i0(o)+i0(s.Pe);return xf(o)&&xf(s.Pe)?BE(l):cm(s.serializer,l)}(t,e)}function r2(t,e,n){return t instanceof Ri?qE(t,e):t instanceof Ea?HE(t,e):n}function zE(t,e){return t instanceof $u?function(r){return xf(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class xa extends Nc{}class Ri extends Nc{constructor(e){super(),this.elements=e}}function qE(t,e){const n=WE(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Nc{constructor(e){super(),this.elements=e}}function HE(t,e){let n=WE(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class $u extends Nc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function i0(t){return ke(t.integerValue||t.doubleValue)}function WE(t){return im(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KE{constructor(e,n){this.field=e,this.transform=n}}function s2(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ri&&s instanceof Ri||r instanceof Ea&&s instanceof Ea?Pi(r.elements,s.elements,Sn):r instanceof $u&&s instanceof $u?Sn(r.Pe,s.Pe):r instanceof xa&&s instanceof xa}(t.transform,e.transform)}class i2{constructor(e,n){this.version=e,this.transformResults=n}}class dn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new dn}static exists(e){return new dn(void 0,e)}static updateTime(e){return new dn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Sc{}function GE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new YE(t.key,dn.none()):new Fa(t.key,t.data,dn.none());{const n=t.data,r=At.empty();let s=new Ze(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new Ut(s.toArray()),dn.none())}}function o2(t,e,n){t instanceof Fa?function(s,i,o){const l=s.value.clone(),c=a0(s.fieldTransforms,i,o.transformResults);l.setAll(c),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!eu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const l=a0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(QE(s)),c.setAll(l),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Fa?function(i,o,l,c){if(!eu(i.precondition,o))return l;const d=i.value.clone(),f=l0(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,l,c){if(!eu(i.precondition,o))return l;const d=l0(i.fieldTransforms,c,o),f=o.data;return f.setAll(QE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,l){return eu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function a2(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=zE(r.transform,s||null);i!=null&&(n===null&&(n=At.empty()),n.set(r.field,i))}return n||null}function o0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Pi(r,s,(i,o)=>s2(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fa extends Sc{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Sc{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function QE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function a0(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,l=e.data.field(i.field);r.set(i.field,r2(o,l,n[s]))}return r}function l0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,n2(i,o,e))}return r}class YE extends Sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class l2 extends Sc{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&o2(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=$E();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let l=this.applyToLocalView(o,i.mutatedFields);l=n.has(s.key)?null:l;const c=GE(o,l);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Pi(this.mutations,e.mutations,(n,r)=>o0(n,r))&&Pi(this.baseMutations,e.baseMutations,(n,r)=>o0(n,r))}}class dm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return XR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new dm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,re;function h2(t){switch(t){default:return G();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function XE(t){if(t===void 0)return ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return G()}}(re=Oe||(Oe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f2(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=new ps([4294967295,4294967295],0);function u0(t){const e=f2().encode(t),n=new wE;return n.update(e),new Uint8Array(n.digest())}function c0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ps([n,r],0),new ps([s,i],0)]}class hm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Co(`Invalid padding: ${n}`);if(r<0)throw new Co(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Co(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Co(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ps.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ps.fromNumber(r)));return s.compare(p2)===1&&(s=new ps([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=u0(e),[r,s]=c0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new hm(i,s,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ie===0)return;const n=u0(e),[r,s]=c0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Co extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pc(Y.min(),s,new Ie(oe),or(),te())}}class $a{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class JE{constructor(e,n){this.targetId=e,this.me=n}}class ZE{constructor(e,n,r=tt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class d0{constructor(){this.fe=0,this.ge=f0(),this.pe=tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:G()}}),new $a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=f0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class m2{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=h0(),this.Qe=new Ie(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:G()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(Tf(i))if(r===0){const o=new W(i.path);this.Ue(n,o,dt.newNoDocument(o,Y.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const l=this.Ze(e),c=l?this.Xe(l,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,l;try{o=Ts(r).toUint8Array()}catch(c){if(c instanceof AE)return Si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hm(o,s,i)}catch(c){return Si(c instanceof Co?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.Ie===0?null:l}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),l=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(l)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const l=this.Je(o);if(l){if(i.current&&Tf(l.target)){const c=new W(l.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,dt.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let l=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Pc(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=h0(),this.Qe=new Ie(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new d0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new Ze(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new d0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function h0(){return new Ie(W.comparator)}function f0(){return new Ie(W.comparator)}const g2={asc:"ASCENDING",desc:"DESCENDING"},y2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},v2={and:"AND",or:"OR"};class _2{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function bf(t,e){return t.useProto3Json||Ec(e)?e:{value:e}}function Bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function eT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function w2(t,e){return Bu(t,e.toTimestamp())}function bn(t){return le(!!t),Y.fromTimestamp(function(n){const r=zr(n);return new $e(r.seconds,r.nanos)}(t))}function fm(t,e){return Nf(t,e).canonicalString()}function Nf(t,e){const n=function(s){return new fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function tT(t){const e=fe.fromString(t);return le(oT(e)),e}function Sf(t,e){return fm(t.databaseId,e.path)}function Zd(t,e){const n=tT(e);if(n.get(1)!==t.databaseId.projectId)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new B(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(rT(n))}function nT(t,e){return fm(t.databaseId,e)}function x2(t){const e=tT(t);return e.length===4?fe.emptyPath():rT(e)}function Pf(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function rT(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function p0(t,e,n){return{name:Sf(t,e),fields:n.value.mapValue.fields}}function E2(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:G()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(le(f===void 0||typeof f=="string"),tt.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),tt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(d){const f=d.code===void 0?M.UNKNOWN:XE(d.code);return new B(f,d.message||"")}(o);n=new ZE(r,s,i,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=Zd(t,r.document.name),i=bn(r.document.updateTime),o=r.document.createTime?bn(r.document.createTime):Y.min(),l=new At({mapValue:{fields:r.document.fields}}),c=dt.newFoundDocument(s,i,o,l),d=r.targetIds||[],f=r.removedTargetIds||[];n=new tu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=Zd(t,r.document),i=r.readTime?bn(r.readTime):Y.min(),o=dt.newNoDocument(s,i),l=r.removedTargetIds||[];n=new tu([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=Zd(t,r.document),i=r.removedTargetIds||[];n=new tu([],i,s,null)}else{if(!("filter"in e))return G();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new d2(s,i),l=r.targetId;n=new JE(l,o)}}return n}function T2(t,e){let n;if(e instanceof Fa)n={update:p0(t,e.key,e.value)};else if(e instanceof YE)n={delete:Sf(t,e.key)};else if(e instanceof Yr)n={update:p0(t,e.key,e.data),updateMask:R2(e.fieldMask)};else{if(!(e instanceof l2))return G();n={verify:Sf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const l=o.transform;if(l instanceof xa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ri)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $u)return{fieldPath:o.field.canonicalString(),increment:l.Pe};throw G()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:w2(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:G()}(t,e.precondition)),n}function I2(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?bn(s.updateTime):bn(i);return o.isEqual(Y.min())&&(o=bn(i)),new i2(o,s.transformResults||[])}(n,e))):[]}function b2(t,e){return{documents:[nT(t,e.path)]}}function N2(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=nT(t,s);const i=function(d){if(d.length!==0)return iT(pn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(m){return{field:qs(m.field),direction:A2(m.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=bf(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function S2(t){let e=x2(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const m=sT(g);return m instanceof pn&&jE(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(m=>function(b){return new wa(Hs(b.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(g){let m;return m=typeof g=="object"?g.value:g,Ec(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(g){const m=!!g.before,T=g.values||[];return new Ci(T,m)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const m=!g.before,T=g.values||[];return new Ci(T,m)}(n.endAt)),WR(e,s,o,i,l,"F",c,d)}function P2(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function sT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Hs(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Hs(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Hs(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Hs(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return G()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Hs(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return G()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return pn.create(n.compositeFilter.filters.map(r=>sT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return G()}}(n.compositeFilter.op))}(t):G()}function A2(t){return g2[t]}function k2(t){return y2[t]}function C2(t){return v2[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Hs(t){return Xe.fromServerFormat(t.fieldPath)}function iT(t){return t instanceof Me?function(n){if(n.op==="=="){if(e0(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NAN"}};if(Zv(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(e0(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NAN"}};if(Zv(n.value))return{unaryFilter:{field:qs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(n.field),op:k2(n.op),value:n.value}}}(t):t instanceof pn?function(n){const r=n.getFilters().map(s=>iT(s));return r.length===1?r[0]:{compositeFilter:{op:C2(n.op),filters:r}}}(t):G()}function R2(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function oT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=Y.min(),o=Y.min(),l=tt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e){this.ct=e}}function O2(t){const e=S2({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.un=new L2}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(Br.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(Br.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class L2{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new Ze(fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new Ze(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ji(0)}static kn(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,dt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,Ut.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=ko();return i.forEach((l,c)=>{o=o.insert(l,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,s){let i=or();const o=Ho(),l=function(){return Ho()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Yr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Wo(f.mutation,d,f.mutation.getFieldMask(),$e.now())):o.set(d.key,Ut.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return l.set(d,new V2(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Ho();let s=new Ie((o,l)=>o-l),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Ut.empty();f=l.applyToLocalView(d,f),r.set(c,f);const g=(s.get(l.batchId)||te()).add(c);s=s.insert(l.batchId,g)})}).next(()=>{const o=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),d=c.key,f=c.value,g=$E();f.forEach(m=>{if(!i.has(m)){const T=GE(n.get(m),r.get(m));T!==null&&g.set(m,T),i=i.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):um(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(cs());let l=-1,c=i;return o.next(d=>U.forEach(d,(f,g)=>(l<g.largestBatchId&&(l=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{c=c.insert(f,m)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,te())).next(f=>({batchId:l,changes:FE(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=ko();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=ko();return this.indexManager.getCollectionParents(e,i).next(l=>U.forEach(l,c=>{const d=function(g,m){return new Os(m,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,m)=>{o=o.insert(g,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,dt.newInvalidDocument(f)))});let l=ko();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Wo(f.mutation,d,Ut.empty(),$e.now()),bc(n,d)&&(l=l.insert(c,d))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:bn(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:O2(s.bundledQuery),readTime:bn(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(){this.overlays=new Ie(W.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=cs(),i=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const c=l.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new Ie((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=cs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const l=cs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>l.set(d,f)),!(l.size()>=s)););return U.resolve(l)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new c2(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.sessionToken=tt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pm{constructor(){this.Tr=new Ze(Be.Er),this.dr=new Ze(Be.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new Be(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new Be(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new fe([])),r=new Be(n,e),s=new Be(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new fe([])),r=new Be(n,e),s=new Be(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new Be(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Be{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class z2{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new Ze(Be.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new u2(i,n,r,s);this.mutationQueue.push(o);for(const l of s)this.br=this.br.add(new Be(l.key,i)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Be(n,0),s=new Be(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const l=this.Dr(o.wr);i.push(l)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Ze(oe);return n.forEach(s=>{const i=new Be(s,0),o=new Be(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],l=>{r=r.add(l.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new Be(new W(i),0);let l=new Ze(oe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(l=l.add(c.wr)),!0)},o),U.resolve(this.Cr(l))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new Be(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new Be(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q2{constructor(e){this.Mr=e,this.docs=function(){return new Ie(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():dt.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():dt.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,l=new W(o.child("")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||SR(NR(f),r)<=0||(s.has(f.key)||bc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){G()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new H2(this)}getSize(e){return U.resolve(this.size)}}class H2 extends M2{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W2{constructor(e){this.persistence=e,this.Nr=new Wi(n=>om(n),am),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.Lr=0,this.Br=new pm,this.targetCount=0,this.kr=ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,l.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K2{constructor(e,n){this.qr={},this.overlays={},this.Qr=new rm(0),this.Kr=!1,this.Kr=!0,this.$r=new B2,this.referenceDelegate=e(this),this.Ur=new W2(this),this.indexManager=new D2,this.remoteDocumentCache=function(s){return new q2(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new j2(n),this.Gr=new F2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new $2,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new z2(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new G2(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class G2 extends AR{constructor(e){super(),this.currentSequenceNumber=e}}class mm{constructor(e){this.persistence=e,this.Jr=new pm,this.Yr=null}static Zr(e){return new mm(e)}get Xr(){if(this.Yr)return this.Yr;throw G()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,Y.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gm{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new gm(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return OP()?8:kR(pt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new Q2;return this.Xi(e,n,o).next(l=>{if(i.result=l,this.zi)return this.es(e,n,o,l.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(_o()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",zs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(_o()<=ne.DEBUG&&H("QueryEngine","Query:",zs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(_o()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",zs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,In(n))):U.resolve())}Yi(e,n){if(s0(n))return U.resolve(null);let r=In(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fu(n,null,"F"),r=In(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,l);return this.ns(n,d,o,c.readTime)?this.Yi(e,Fu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return s0(n)||s.isEqual(Y.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(_o()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),zs(n)),this.rs(e,o,n,bR(s,-1)).next(l=>l))})}ts(e,n){let r=new Ze(VE(e));return n.forEach((s,i)=>{bc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return _o()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",zs(n)),this.Ji.getDocumentsMatchingQuery(e,n,Br.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new Ie(oe),this._s=new Wi(i=>om(i),am),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new U2(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function J2(t,e,n,r){return new X2(t,e,n,r)}async function aT(t,e){const n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],l=[];let c=te();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){l.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:l}))})})}function Z2(t,e){const n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(l,c,d,f){const g=d.batch,m=g.keys();let T=U.resolve();return m.forEach(b=>{T=T.next(()=>f.getEntry(c,b)).next(N=>{const A=d.docVersions.get(b);le(A!==null),N.version.compareTo(A)<0&&(g.applyToRemoteDocument(N,d),N.isValidDocument()&&(N.setReadTime(d.commitVersion),f.addEntry(N)))})}),T.next(()=>l.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let c=te();for(let d=0;d<l.mutationResults.length;++d)l.mutationResults[d].transformResults.length>0&&(c=c.add(l.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function lT(t){const e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function ej(t,e){const n=X(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const l=[];e.targetChanges.forEach((f,g)=>{const m=s.get(g);if(!m)return;l.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let T=m.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?T=T.withResumeToken(tt.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):f.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(f.resumeToken,r)),s=s.insert(g,T),function(N,A,x){return N.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,T,f)&&l.push(n.Ur.updateTargetData(i,T))});let c=or(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),l.push(tj(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(Y.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(f)}return U.waitFor(l).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function tj(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((l,c)=>{const d=i.get(l);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(Y.min())?(e.removeEntry(l,c.readTime),o=o.insert(l,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(l,c)):H("LocalStore","Ignoring outdated watch update for ",l,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function nj(t,e){const n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function rj(t,e){const n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Af(t,e,n){const r=X(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ua(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function m0(t,e,n){const r=X(t);let s=Y.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=X(c),m=g._s.get(f);return m!==void 0?U.resolve(g.os.get(m)):g.Ur.getTargetData(d,f)}(r,o,In(e)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,l.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:Y.min(),n?i:te())).next(l=>(sj(r,GR(e),l),{documents:l,Ts:i})))}function sj(t,e,n){let r=t.us.get(e)||Y.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class g0{constructor(){this.activeTargetIds=e2()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class ij{constructor(){this.so=new g0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new g0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol=null;function eh(){return Ol===null?Ol=function(){return 268435456+Math.round(2147483648*Math.random())}():Ol++,"0x"+Ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const at="WebChannelConnection";class uj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const l=eh(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${l}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${l}: `,f),f),f=>{throw Si("RestConnection",`RPC '${n}' ${l} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,l){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=aj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=eh();return new Promise((o,l)=>{const c=new xE;c.setWithCredentials(!0),c.listenOnce(EE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jl.NO_ERROR:const f=c.getResponseJson();H(at,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Jl.TIMEOUT:H(at,`RPC '${e}' ${i} timed out`),l(new B(M.DEADLINE_EXCEEDED,"Request time out"));break;case Jl.HTTP_ERROR:const g=c.getStatus();if(H(at,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let m=c.getResponseJson();Array.isArray(m)&&(m=m[0]);const T=m==null?void 0:m.error;if(T&&T.status&&T.message){const b=function(A){const x=A.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(x)>=0?x:M.UNKNOWN}(T.status);l(new B(b,T.message))}else l(new B(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else l(new B(M.UNAVAILABLE,"Connection failed."));break;default:G()}}finally{H(at,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(at,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=eh(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=bE(),l=IE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");H(at,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let m=!1,T=!1;const b=new lj({Io:A=>{T?H(at,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(m||(H(at,`Opening RPC '${e}' stream ${s} transport.`),g.open(),m=!0),H(at,`RPC '${e}' stream ${s} sending:`,A),g.send(A))},To:()=>g.close()}),N=(A,x,w)=>{A.listen(x,y=>{try{w(y)}catch(k){setTimeout(()=>{throw k},0)}})};return N(g,Ao.EventType.OPEN,()=>{T||(H(at,`RPC '${e}' stream ${s} transport opened.`),b.yo())}),N(g,Ao.EventType.CLOSE,()=>{T||(T=!0,H(at,`RPC '${e}' stream ${s} transport closed`),b.So())}),N(g,Ao.EventType.ERROR,A=>{T||(T=!0,Si(at,`RPC '${e}' stream ${s} transport errored:`,A),b.So(new B(M.UNAVAILABLE,"The operation could not be completed")))}),N(g,Ao.EventType.MESSAGE,A=>{var x;if(!T){const w=A.data[0];le(!!w);const y=w,k=y.error||((x=y[0])===null||x===void 0?void 0:x.error);if(k){H(at,`RPC '${e}' stream ${s} received error:`,k);const L=k.status;let V=function(S){const E=Oe[S];if(E!==void 0)return XE(E)}(L),I=k.message;V===void 0&&(V=M.INTERNAL,I="Unknown error status: "+L+" with message "+k.message),T=!0,b.So(new B(V,I)),g.close()}else H(at,`RPC '${e}' stream ${s} received:`,w),b.bo(w)}}),N(l,TE.STAT_EVENT,A=>{A.stat===_f.PROXY?H(at,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===_f.NOPROXY&&H(at,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{b.wo()},0),b}}function th(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ac(t){return new _2(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r,s,i,o,l,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new uT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new B(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class cj extends cT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=E2(this.serializer,e),r=function(i){if(!("targetChange"in i))return Y.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?bn(o.readTime):Y.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pf(this.serializer),n.addTarget=function(i,o){let l;const c=o.target;if(l=Tf(c)?{documents:b2(i,c)}:{query:N2(i,c)._t},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=eT(i,o.resumeToken);const d=bf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=Bu(i,o.snapshotVersion.toTimestamp());const d=bf(i,o.expectedCount);d!==null&&(l.expectedCount=d)}return l}(this.serializer,e);const r=P2(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pf(this.serializer),n.removeTarget=e,this.a_(n)}}class dj extends cT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=I2(e.writeResults,e.commitTime),r=bn(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>T2(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hj extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Nf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new B(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.Lo(e,Nf(n,r),s,o,l,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new B(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class fj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ds(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=X(c);d.L_.add(4),await Ba(d),d.q_.set("Unknown"),d.L_.delete(4),await kc(d)}(this))})}),this.q_=new fj(r,s)}}async function kc(t){if(Ds(t))for(const e of t.B_)await e(!0)}async function Ba(t){for(const e of t.B_)await e(!1)}function dT(t,e){const n=X(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wm(n)?_m(n):Ki(n).r_()&&vm(n,e))}function ym(t,e){const n=X(t),r=Ki(n);n.N_.delete(e),r.r_()&&hT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ds(n)&&n.q_.set("Unknown"))}function vm(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).A_(e)}function hT(t,e){t.Q_.xe(e),Ki(t).R_(e)}function _m(t){t.Q_=new m2({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.q_.v_()}function wm(t){return Ds(t)&&!Ki(t).n_()&&t.N_.size>0}function Ds(t){return X(t).L_.size===0}function fT(t){t.Q_=void 0}async function mj(t){t.q_.set("Online")}async function gj(t){t.N_.forEach((e,n)=>{vm(t,e)})}async function yj(t,e){fT(t),wm(t)?(t.q_.M_(e),_m(t)):t.q_.set("Unknown")}async function vj(t,e,n){if(t.q_.set("Online"),e instanceof ZE&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const l of i.targetIds)s.N_.has(l)&&(await s.remoteSyncer.rejectListen(l,o),s.N_.delete(l),s.Q_.removeTarget(l))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zu(t,r)}else if(e instanceof tu?t.Q_.Ke(e):e instanceof JE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(Y.min()))try{const r=await lT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const l=i.Q_.rt(o);return l.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),l.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(tt.EMPTY_BYTE_STRING,f.snapshotVersion)),hT(i,c);const g=new Sr(f.target,c,d,f.sequenceNumber);vm(i,g)}),i.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await zu(t,r)}}async function zu(t,e,n){if(!Ua(e))throw e;t.L_.add(1),await Ba(t),t.q_.set("Offline"),n||(n=()=>lT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kc(t)})}function pT(t,e){return e().catch(n=>zu(t,n,e))}async function Cc(t){const e=X(t),n=qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;_j(e);)try{const s=await nj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,wj(e,s)}catch(s){await zu(e,s)}mT(e)&&gT(e)}function _j(t){return Ds(t)&&t.O_.length<10}function wj(t,e){t.O_.push(e);const n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function mT(t){return Ds(t)&&!qr(t).n_()&&t.O_.length>0}function gT(t){qr(t).start()}async function xj(t){qr(t).p_()}async function Ej(t){const e=qr(t);for(const n of t.O_)e.m_(n.mutations)}async function Tj(t,e,n){const r=t.O_.shift(),s=dm.from(r,e,n);await pT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Cc(t)}async function Ij(t,e){e&&qr(t).V_&&await async function(r,s){if(function(o){return h2(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();qr(r).s_(),await pT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Cc(r)}}(t,e),mT(t)&&gT(t)}async function v0(t,e){const n=X(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Ds(n);n.L_.add(3),await Ba(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kc(n)}async function bj(t,e){const n=X(t);e?(n.L_.delete(2),await kc(n)):e||(n.L_.add(2),await Ba(n),n.q_.set("Unknown"))}function Ki(t){return t.K_||(t.K_=function(n,r,s){const i=X(n);return i.w_(),new cj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:mj.bind(null,t),Ro:gj.bind(null,t),mo:yj.bind(null,t),d_:vj.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wm(t)?_m(t):t.q_.set("Unknown")):(await t.K_.stop(),fT(t))})),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,s){const i=X(n);return i.w_(),new dj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:xj.bind(null,t),mo:Ij.bind(null,t),f_:Ej.bind(null,t),g_:Tj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Cc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xm{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,l=new xm(e,n,o,s,i);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new B(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Em(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ua(t))return new B(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=ko(),this.sortedSet=new Ie(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(){this.W_=new Ie(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):G():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oi{constructor(e,n,r,s,i,o,l,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Oi(e,n,vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Sj{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=X(n),i=s.queries;s.queries=w0(),i.forEach((o,l)=>{for(const c of l.j_)c.onError(r)})})(this,new B(M.ABORTED,"Firestore shutting down"))}}function w0(){return new Wi(t=>ME(t),Ic)}async function yT(t,e){const n=X(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new Nj,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const l=Em(o,`Initialization of query '${zs(e.query)}' failed`);return void e.onError(l)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&Tm(n)}async function vT(t,e){const n=X(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Pj(t,e){const n=X(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const l of o.j_)l.X_(s)&&(r=!0);o.z_=s}}r&&Tm(n)}function Aj(t,e,n){const r=X(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function Tm(t){t.Y_.forEach(e=>{e.next()})}var kf,x0;(x0=kf||(kf={})).ea="default",x0.Cache="cache";class _T{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class xT{constructor(e){this.key=e}}class kj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=VE(e),this.Ra=new vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new _0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const m=s.get(f),T=bc(this.query,g)?g:null,b=!!m&&this.mutatedKeys.has(m.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let A=!1;m&&T?m.data.isEqual(T.data)?b!==N&&(r.track({type:3,doc:T}),A=!0):this.ga(m,T)||(r.track({type:2,doc:T}),A=!0,(c&&this.Aa(T,c)>0||d&&this.Aa(T,d)<0)&&(l=!0)):!m&&T?(r.track({type:0,doc:T}),A=!0):m&&!T&&(r.track({type:1,doc:m}),A=!0,(c||d)&&(l=!0)),A&&(T?(o=o.add(T),i=N?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:l,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(T,b){const N=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G()}};return N(T)-N(b)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const l=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Oi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:l}:{wa:l}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new _0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new xT(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wT(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Cj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Rj{constructor(e){this.key=e,this.va=!1}}class jj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wi(l=>ME(l),Ic),this.Ma=new Map,this.xa=new Set,this.Oa=new Ie(W.comparator),this.Na=new Map,this.La=new pm,this.Ba={},this.ka=new Map,this.qa=ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function Oj(t,e,n=!0){const r=ST(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await ET(r,e,n,!0),s}async function Dj(t,e){const n=ST(t);await ET(n,e,!0,!1)}async function ET(t,e,n,r){const s=await rj(t.localStore,In(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Lj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&dT(t.remoteStore,s),l}async function Lj(t,e,n,r,s){t.Ka=(g,m,T)=>async function(N,A,x,w){let y=A.view.ma(x);y.ns&&(y=await m0(N.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,y)));const k=w&&w.targetChanges.get(A.targetId),L=w&&w.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(y,N.isPrimaryClient,k,L);return T0(N,A.targetId,V.wa),V.snapshot}(t,g,m,T);const i=await m0(t.localStore,e,!0),o=new kj(e,i.Ts),l=o.ma(i.documents),c=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(l,t.isPrimaryClient,c);T0(t,n,d.wa);const f=new Cj(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function Mj(t,e,n){const r=X(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ic(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Af(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ym(r.remoteStore,s.targetId),Cf(r,s.targetId)}).catch(Va)):(Cf(r,s.targetId),await Af(r.localStore,s.targetId,!0))}async function Vj(t,e){const n=X(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ym(n.remoteStore,r.targetId))}async function Uj(t,e,n){const r=Wj(t);try{const s=await function(o,l){const c=X(o),d=$e.now(),f=l.reduce((T,b)=>T.add(b.key),te());let g,m;return c.persistence.runTransaction("Locally write mutations","readwrite",T=>{let b=or(),N=te();return c.cs.getEntries(T,f).next(A=>{b=A,b.forEach((x,w)=>{w.isValidDocument()||(N=N.add(x))})}).next(()=>c.localDocuments.getOverlayedDocuments(T,b)).next(A=>{g=A;const x=[];for(const w of l){const y=a2(w,g.get(w.key).overlayedDocument);y!=null&&x.push(new Yr(w.key,y,kE(y.value.mapValue),dn.exists(!0)))}return c.mutationQueue.addMutationBatch(T,d,x,l)}).next(A=>{m=A;const x=A.applyToLocalDocumentSet(g,N);return c.documentOverlayCache.saveOverlays(T,A.batchId,x)})}).then(()=>({batchId:m.batchId,changes:FE(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,l,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new Ie(oe)),d=d.insert(l,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await za(r,s.changes),await Cc(r.remoteStore)}catch(s){const i=Em(s,"Failed to persist write");n.reject(i)}}async function TT(t,e){const n=X(t);try{const r=await ej(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await za(n,r,e)}catch(r){await Va(r)}}function E0(t,e,n){const r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const l=o.view.Z_(e);l.snapshot&&s.push(l.snapshot)}),function(o,l){const c=X(o);c.onlineState=l;let d=!1;c.queries.forEach((f,g)=>{for(const m of g.j_)m.Z_(l)&&(d=!0)}),d&&Tm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Fj(t,e,n){const r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new Ie(W.comparator);o=o.insert(i,dt.newNoDocument(i,Y.min()));const l=te().add(i),c=new Pc(Y.min(),new Map,new Ie(oe),o,l);await TT(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Im(r)}else await Af(r.localStore,e,!1).then(()=>Cf(r,e,n)).catch(Va)}async function $j(t,e){const n=X(t),r=e.batch.batchId;try{const s=await Z2(n.localStore,e);bT(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await za(n,s)}catch(s){await Va(s)}}async function Bj(t,e,n){const r=X(t);try{const s=await function(o,l){const c=X(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,l).next(g=>(le(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,l)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);bT(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await za(r,s)}catch(s){await Va(s)}}function IT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function bT(t,e,n){const r=X(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Cf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||NT(t,r)})}function NT(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(ym(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Im(t))}function T0(t,e,n){for(const r of n)r instanceof wT?(t.La.addReference(r.key,e),zj(t,r)):r instanceof xT?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||NT(t,r.key)):G()}function zj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Im(t))}function Im(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(fe.fromString(e)),r=t.qa.next();t.Na.set(r,new Rj(n)),t.Oa=t.Oa.insert(n,r),dT(t.remoteStore,new Sr(In(lm(n.path)),r,"TargetPurposeLimboResolution",rm.oe))}}async function za(t,e,n){const r=X(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((l,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=gm.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=X(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,m=>U.forEach(m.$i,T=>f.persistence.referenceDelegate.addReference(g,m.targetId,T)).next(()=>U.forEach(m.Ui,T=>f.persistence.referenceDelegate.removeReference(g,m.targetId,T)))))}catch(g){if(!Ua(g))throw g;H("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const m=g.targetId;if(!g.fromCache){const T=f.os.get(m),b=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(b);f.os=f.os.insert(m,N)}}}(r.localStore,i))}async function qj(t,e){const n=X(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await aT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(l=>{l.forEach(c=>{c.reject(new B(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await za(n,r.hs)}}function Hj(t,e){const n=X(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const l=n.Fa.get(o);s=s.unionWith(l.view.Va)}return s}}function ST(t){const e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=TT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Hj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Fj.bind(null,e),e.Ca.d_=Pj.bind(null,e.eventManager),e.Ca.$a=Aj.bind(null,e.eventManager),e}function Wj(t){const e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=$j.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Bj.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ac(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return J2(this.persistence,new Y2,e.initialUser,this.serializer)}Ga(e){return new K2(mm.Zr,this.serializer)}Wa(e){return new ij}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class Rf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>E0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=qj.bind(null,this.syncEngine),await bj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Sj}()}createDatastore(e){const n=Ac(e.databaseInfo.databaseId),r=function(i){return new uj(i)}(e.databaseInfo);return function(i,o,l,c){return new hj(i,o,l,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,l){return new pj(r,s,i,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>E0(this.syncEngine,n,0),function(){return y0.D()?new y0:new oj}())}createSyncEngine(e,n){return function(s,i,o,l,c,d,f){const g=new jj(s,i,o,l,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=X(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Ba(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Rf.provider={build:()=>new Rf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kj{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ut.UNAUTHENTICATED,this.clientId=SE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Em(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function nh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await aT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Gj(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>v0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>v0(e.remoteStore,s)),t._onlineComponents=e}async function Gj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await nh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await nh(t,new qu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await nh(t,new qu);return t._offlineComponents}async function AT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new Rf))),t._onlineComponents}function Qj(t){return AT(t).then(e=>e.syncEngine)}async function kT(t){const e=await AT(t),n=e.eventManager;return n.onListen=Oj.bind(null,e.syncEngine),n.onUnlisten=Mj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Dj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Vj.bind(null,e.syncEngine),n}function Yj(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new PT({next:m=>{f.Za(),o.enqueueAndForget(()=>vT(i,g));const T=m.docs.has(l);!T&&m.fromCache?d.reject(new B(M.UNAVAILABLE,"Failed to get document because the client is offline.")):T&&m.fromCache&&c&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new _T(lm(l.path),f,{includeMetadataChanges:!0,_a:!0});return yT(i,g)}(await kT(t),t.asyncQueue,e,n,r)),r.promise}function Xj(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,l,c,d){const f=new PT({next:m=>{f.Za(),o.enqueueAndForget(()=>vT(i,g)),m.fromCache&&c.source==="server"?d.reject(new B(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(m)},error:m=>d.reject(m)}),g=new _T(l,f,{includeMetadataChanges:!0,_a:!0});return yT(i,g)}(await kT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t,e,n){if(!n)throw new B(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Jj(t,e,n,r){if(e===!0&&r===!0)throw new B(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function N0(t){if(!W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function S0(t){if(W.isDocumentKey(t))throw new B(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function Rc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G()}function Pn(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new B(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Rc(t);throw new B(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Zj(t,e){if(e<=0)throw new B(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new B(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new B(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Jj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=CT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new B(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class jc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new B(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new B(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new gR;switch(r.type){case"firstParty":return new wR(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new B(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=b0.get(n);r&&(H("ComponentProvider","Removing Datastore"),b0.delete(n),r.terminate())}(this),Promise.resolve()}}function eO(t,e,n,r={}){var s;const i=(t=Pn(t,jc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let l,c;if(typeof r.mockUserToken=="string")l=r.mockUserToken,c=ut.MOCK_USER;else{l=jx(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new B(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new ut(d)}t._authCredentials=new yR(new NE(l,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dr(this.firestore,e,this._query)}}class Tt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Tt(this.firestore,e,this._key)}}class Ur extends dr{constructor(e,n,r){super(e,n,lm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Tt(this.firestore,null,new W(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function Pr(t,e,...n){if(t=_e(t),RT("collection","path",e),t instanceof jc){const r=fe.fromString(e,...n);return S0(r),new Ur(t,null,r)}{if(!(t instanceof Tt||t instanceof Ur))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return S0(r),new Ur(t.firestore,null,r)}}function De(t,e,...n){if(t=_e(t),arguments.length===1&&(e=SE.newId()),RT("doc","path",e),t instanceof jc){const r=fe.fromString(e,...n);return N0(r),new Tt(t,null,new W(r))}{if(!(t instanceof Tt||t instanceof Ur))throw new B(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return N0(r),new Tt(t.firestore,t instanceof Ur?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new uT(this,"async_queue_retry"),this.Vu=()=>{const r=th();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=th();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=th();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=xm.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&G()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Gi extends jc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new A0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new A0(e),this._firestoreClient=void 0,await e}}}function tO(t,e){const n=typeof t=="object"?t:vc(),r=typeof t=="string"?t:"(default)",s=Cs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kx("firestore");i&&eO(s,...i)}return s}function bm(t){if(t._terminated)throw new B(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||nO(t),t._firestoreClient}function nO(t){var e,n,r;const s=t._freezeSettings(),i=function(l,c,d,f){return new jR(l,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,CT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new Kj(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(tt.fromBase64String(e))}catch(n){throw new B(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new B(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new B(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new B(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rO=/^__.*__$/;class sO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fa(e,this.data,n,this.fieldTransforms)}}class jT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function OT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G()}}class Dc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Dc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(OT(this.Cu)&&rO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class iO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ac(e)}Qu(e,n,r,s=!1){return new Dc({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ha(t){const e=t._freezeSettings(),n=Ac(t._databaseId);return new iO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function DT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);km("Data must be an object, but it was:",o,r);const l=MT(r,o);let c,d;if(i.merge)c=new Ut(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const m=jf(e,g,n);if(!o.contains(m))throw new B(M.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);UT(f,m)||f.push(m)}c=new Ut(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new sO(new At(l),c,d)}class Lc extends qa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lc}}function oO(t,e,n){return new Dc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pm extends qa{_toFieldTransform(e){return new KE(e.path,new xa)}isEqual(e){return e instanceof Pm}}class Am extends qa{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=oO(this,e,!0),r=this.Ku.map(i=>Qi(i,n)),s=new Ri(r);return new KE(e.path,s)}isEqual(e){return e instanceof Am&&fa(this.Ku,e.Ku)}}function aO(t,e,n,r){const s=t.Qu(1,e,n);km("Data must be an object, but it was:",s,r);const i=[],o=At.empty();js(r,(c,d)=>{const f=Cm(e,c,n);d=_e(d);const g=s.Nu(f);if(d instanceof Lc)i.push(f);else{const m=Qi(d,g);m!=null&&(i.push(f),o.set(f,m))}});const l=new Ut(i);return new jT(o,l,s.fieldTransforms)}function lO(t,e,n,r,s,i){const o=t.Qu(1,e,n),l=[jf(e,r,n)],c=[s];if(i.length%2!=0)throw new B(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<i.length;m+=2)l.push(jf(e,i[m])),c.push(i[m+1]);const d=[],f=At.empty();for(let m=l.length-1;m>=0;--m)if(!UT(d,l[m])){const T=l[m];let b=c[m];b=_e(b);const N=o.Nu(T);if(b instanceof Lc)d.push(T);else{const A=Qi(b,N);A!=null&&(d.push(T),f.set(T,A))}}const g=new Ut(d);return new jT(f,g,o.fieldTransforms)}function LT(t,e,n,r=!1){return Qi(n,t.Qu(r?4:3,e))}function Qi(t,e){if(VT(t=_e(t)))return km("Unsupported field value:",e,t),MT(t,e);if(t instanceof qa)return function(r,s){if(!OT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const l of r){let c=Qi(l,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return t2(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:Bu(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bu(s.serializer,i)}}if(r instanceof Nm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:eT(s.serializer,r._byteString)};if(r instanceof Tt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:fm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Sm)return function(o,l){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw l.Bu("VectorValues must only contain numeric values.");return cm(l.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${Rc(r)}`)}(t,e)}function MT(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):js(t,(r,s)=>{const i=Qi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function VT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Nm||t instanceof Di||t instanceof Tt||t instanceof qa||t instanceof Sm)}function km(t,e,n){if(!VT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=Rc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function jf(t,e,n){if((e=_e(e))instanceof Oc)return e._internalPath;if(typeof e=="string")return Cm(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const uO=new RegExp("[~\\*/\\[\\]]");function Cm(t,e,n){if(e.search(uO)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Oc(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new B(M.INVALID_ARGUMENT,l+t+c)}function UT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Tt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new cO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Mc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class cO extends Rm{data(){return super.data()}}function Mc(t,e){return typeof e=="string"?Cm(t,e):e instanceof Oc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new B(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jm{}class Vc extends jm{}function Of(t,e,...n){let r=[];e instanceof jm&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Om).length,l=i.filter(c=>c instanceof Uc).length;if(o>1||o>0&&l>0)throw new B(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Uc extends Vc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Uc(e,n,r)}_apply(e){const n=this._parse(e);return FT(e._query,n),new dr(e.firestore,e.converter,If(e._query,n))}_parse(e){const n=Ha(e.firestore);return function(i,o,l,c,d,f,g){let m;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new B(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){C0(g,f);const T=[];for(const b of g)T.push(k0(c,i,b));m={arrayValue:{values:T}}}else m=k0(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||C0(g,f),m=LT(l,o,g,f==="in"||f==="not-in");return Me.create(d,f,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function oi(t,e,n){const r=e,s=Mc("where",t);return Uc._create(s,r,n)}class Om extends jm{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Om(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:pn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const l=i.getFlattenedFilters();for(const c of l)FT(o,c),o=If(o,c)}(e._query,n),new dr(e.firestore,e.converter,If(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Dm extends Vc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Dm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new B(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new wa(i,o)}(e._query,this._field,this._direction);return new dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Os(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Df(t,e="asc"){const n=e,r=Mc("orderBy",t);return Dm._create(r,n)}class Lm extends Vc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Lm(e,n,r)}_apply(e){return new dr(e.firestore,e.converter,Fu(e._query,this._limit,this._limitType))}}function hO(t){return Zj("limit",t),Lm._create("limit",t,"F")}class Mm extends Vc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Mm(e,n,r)}_apply(e){const n=pO(e,this.type,this._docOrFields,this._inclusive);return new dr(e.firestore,e.converter,function(s,i){return new Os(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function fO(...t){return Mm._create("startAfter",t,!1)}function pO(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof Rm)return function(i,o,l,c,d){if(!c)throw new B(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const f=[];for(const g of yi(i))if(g.field.isKeyField())f.push(Uu(o,c.key));else{const m=c.data.field(g.field);if(Tc(m))throw new B(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const T=g.field.canonicalString();throw new B(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${T}' (used as the orderBy) does not exist.`)}f.push(m)}return new Ci(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ha(t.firestore);return function(o,l,c,d,f,g){const m=o.explicitOrderBy;if(f.length>m.length)throw new B(M.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const T=[];for(let b=0;b<f.length;b++){const N=f[b];if(m[b].field.isKeyField()){if(typeof N!="string")throw new B(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof N}`);if(!um(o)&&N.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${N}' contains a slash.`);const A=o.path.child(fe.fromString(N));if(!W.isDocumentKey(A))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const x=new W(A);T.push(Uu(l,x))}else{const A=LT(c,d,N);T.push(A)}}return new Ci(T,g)}(t._query,t.firestore._databaseId,s,e,n,r)}}function k0(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new B(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!um(e)&&n.indexOf("/")!==-1)throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!W.isDocumentKey(r))throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uu(t,new W(r))}if(n instanceof Tt)return Uu(t,n._key);throw new B(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Rc(n)}.`)}function C0(t,e){if(!Array.isArray(t)||t.length===0)throw new B(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function FT(t,e){const n=function(s,i){for(const o of s)for(const l of o.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new B(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class mO{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ke(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ts(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return js(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>ke(o.doubleValue));return new Sm(i)}convertGeoPoint(e){return new Nm(ke(e.latitude),ke(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=sm(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const n=zr(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);le(oT(r));const s=new va(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $T(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BT extends Rm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Mc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nu extends BT{data(e={}){return super.data(e)}}class gO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nu(this._firestore,this._userDataWriter,r.key,r,new Ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new B(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(l=>{const c=new nu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ro(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new nu(s._firestore,s._userDataWriter,l.doc.key,l.doc,new Ro(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return l.type!==0&&(d=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),f=o.indexOf(l.doc.key)),{type:yO(l.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function yO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){t=Pn(t,Tt);const e=Pn(t.firestore,Gi);return Yj(bm(e),t._key).then(n=>vO(e,t,n))}class zT extends mO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Tt(this.firestore,null,n)}}function Wu(t){t=Pn(t,dr);const e=Pn(t.firestore,Gi),n=bm(e),r=new zT(e);return dO(t._query),Xj(n,t._query).then(s=>new gO(e,r,t,s))}function Lf(t,e,n){t=Pn(t,Tt);const r=Pn(t.firestore,Gi),s=$T(t.converter,e);return Vm(r,[DT(Ha(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,dn.none())])}function Nn(t,e,n,...r){t=Pn(t,Tt);const s=Pn(t.firestore,Gi),i=Ha(s);let o;return o=typeof(e=_e(e))=="string"||e instanceof Oc?lO(i,"updateDoc",t._key,e,n,r):aO(i,"updateDoc",t._key,e),Vm(s,[o.toMutation(t._key,dn.exists(!0))])}function Ku(t,e){const n=Pn(t.firestore,Gi),r=De(t),s=$T(t.converter,e);return Vm(n,[DT(Ha(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,dn.exists(!1))]).then(()=>r)}function Vm(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>Uj(await Qj(r),s,i)),i.promise}(bm(t),e)}function vO(t,e,n){const r=n.docs.get(e._key),s=new zT(t);return new BT(t,s,e._key,r,new Ro(n.hasPendingWrites,n.fromCache),e.converter)}function Re(){return new Pm("serverTimestamp")}function qT(...t){return new Am("arrayUnion",t)}(function(e,n=!0){(function(s){Hi=s})(Rs),fn(new Xt("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),l=new Gi(new vR(r.getProvider("auth-internal")),new ER(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new B(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),Ot(Gv,"4.7.3",e),Ot(Gv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HT="firebasestorage.googleapis.com",_O="storageBucket",wO=2*60*1e3,xO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cn extends gn{constructor(e,n,r=0){super(rh(e),`Firebase Storage: ${n} (${rh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Cn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return rh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var An;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(An||(An={}));function rh(t){return"storage/"+t}function EO(){const t="An unknown error occurred, please check the error payload for server response.";return new Cn(An.UNKNOWN,t)}function TO(){return new Cn(An.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function IO(){return new Cn(An.CANCELED,"User canceled the upload/download.")}function bO(t){return new Cn(An.INVALID_URL,"Invalid URL '"+t+"'.")}function NO(t){return new Cn(An.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function R0(t){return new Cn(An.INVALID_ARGUMENT,t)}function WT(){return new Cn(An.APP_DELETED,"The Firebase app was deleted.")}function SO(t){return new Cn(An.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class an{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=an.makeFromUrl(e,n)}catch{return new an(e,"")}if(r.path==="")return r;throw NO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",T=new RegExp(`^https?://${g}/${f}/b/${s}/o${m}`,"i"),b={bucket:1,path:3},N=n===HT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",x=new RegExp(`^https?://${N}/${s}/${A}`,"i"),y=[{regex:l,indices:c,postModify:i},{regex:T,indices:b,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<y.length;k++){const L=y[k],V=L.regex.exec(e);if(V){const I=V[L.indices.bucket];let _=V[L.indices.path];_||(_=""),r=new an(I,_),L.postModify(r);break}}if(r==null)throw bO(e);return r}}class PO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AO(t,e,n){let r=1,s=null,i=null,o=!1,l=0;function c(){return l===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function g(A){s=setTimeout(()=>{s=null,t(T,c())},A)}function m(){i&&clearTimeout(i)}function T(A,...x){if(d){m();return}if(A){m(),f.call(null,A,...x);return}if(c()||o){m(),f.call(null,A,...x);return}r<64&&(r*=2);let y;l===1?(l=2,y=0):y=(r+Math.random())*1e3,g(y)}let b=!1;function N(A){b||(b=!0,m(),!d&&(s!==null?(A||(l=2),clearTimeout(s),g(0)):A||(l=1)))}return g(0),i=setTimeout(()=>{o=!0,N(!0)},n),N}function kO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CO(t){return t!==void 0}function j0(t,e,n,r){if(r<e)throw R0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw R0(`Invalid value for '${t}'. Expected ${n} or less.`)}function RO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Gu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gu||(Gu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n,r,s,i,o,l,c,d,f,g,m=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((T,b)=>{this.resolve_=T,this.reject_=b,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Dl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const l=i.getErrorCode()===Gu.NO_ERROR,c=i.getStatus();if(!l||jO(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Gu.ABORT;r(!1,new Dl(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Dl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());CO(c)?i(c):i()}catch(c){o(c)}else if(l!==null){const c=EO();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(s.canceled){const c=this.appDelete_?WT():IO();o(c)}else{const c=TO();o(c)}};this.canceled_?n(!1,new Dl(!1,null,!0)):this.backoffId_=AO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&kO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function DO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function LO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function VO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function UO(t,e,n,r,s,i,o=!0){const l=RO(t.urlParams),c=t.url+l,d=Object.assign({},t.headers);return MO(d,e),DO(d,n),LO(d,i),VO(d,r),new OO(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function $O(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this._service=e,n instanceof an?this._location=n:this._location=an.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qu(e,n)}get root(){const e=new an(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return $O(this._location.path)}get storage(){return this._service}get parent(){const e=FO(this._location.path);if(e===null)return null;const n=new an(this._location.bucket,e);return new Qu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw SO(e)}}function O0(t,e){const n=e==null?void 0:e[_O];return n==null?null:an.makeFromBucketSpec(n,t)}function BO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:jx(s,t.app.options.projectId))}class zO{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=HT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=wO,this._maxUploadRetryTime=xO,this._requests=new Set,s!=null?this._bucket=an.makeFromBucketSpec(s,this._host):this._bucket=O0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=an.makeFromBucketSpec(this._url,e):this._bucket=O0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){j0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){j0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new PO(WT());{const o=UO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const D0="@firebase/storage",L0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KT="storage";function qO(t=vc(),e){t=_e(t);const r=Cs(t,KT).getImmediate({identifier:e}),s=kx("storage");return s&&HO(r,...s),r}function HO(t,e,n,r={}){BO(t,e,n,r)}function WO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new zO(n,r,s,e,Rs)}function KO(){fn(new Xt(KT,WO,"PUBLIC").setMultipleInstances(!0)),Ot(D0,L0,""),Ot(D0,L0,"esm2017")}KO();const GT="@firebase/installations",Um="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QT=1e4,YT=`w:${Um}`,XT="FIS_v2",GO="https://firebaseinstallations.googleapis.com/v1",QO=60*60*1e3,YO="installations",XO="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JO={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},bs=new ks(YO,XO,JO);function JT(t){return t instanceof gn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT({projectId:t}){return`${GO}/projects/${t}/installations`}function eI(t){return{token:t.token,requestStatus:2,expiresIn:eD(t.expiresIn),creationTime:Date.now()}}async function tI(t,e){const r=(await e.json()).error;return bs.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function nI({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ZO(t,{refreshToken:e}){const n=nI(t);return n.append("Authorization",tD(e)),n}async function rI(t){const e=await t();return e.status>=500&&e.status<600?t():e}function eD(t){return Number(t.replace("s","000"))}function tD(t){return`${XT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=ZT(t),s=nI(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:XT,appId:t.appId,sdkVersion:YT},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await rI(()=>fetch(r,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:eI(d.authToken)}}else throw await tI("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sD=/^[cdef][\w-]{21}$/,Mf="";function iD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=oD(t);return sD.test(n)?n:Mf}catch{return Mf}}function oD(t){return rD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iI=new Map;function oI(t,e){const n=Fc(t);aI(n,e),aD(n,e)}function aI(t,e){const n=iI.get(t);if(n)for(const r of n)r(e)}function aD(t,e){const n=lD();n&&n.postMessage({key:t,fid:e}),uD()}let ds=null;function lD(){return!ds&&"BroadcastChannel"in self&&(ds=new BroadcastChannel("[Firebase] FID Change"),ds.onmessage=t=>{aI(t.data.key,t.data.fid)}),ds}function uD(){iI.size===0&&ds&&(ds.close(),ds=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="firebase-installations-database",dD=1,Ns="firebase-installations-store";let sh=null;function Fm(){return sh||(sh=yc(cD,dD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ns)}}})),sh}async function Yu(t,e){const n=Fc(t),s=(await Fm()).transaction(Ns,"readwrite"),i=s.objectStore(Ns),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&oI(t,e.fid),e}async function lI(t){const e=Fc(t),r=(await Fm()).transaction(Ns,"readwrite");await r.objectStore(Ns).delete(e),await r.done}async function $c(t,e){const n=Fc(t),s=(await Fm()).transaction(Ns,"readwrite"),i=s.objectStore(Ns),o=await i.get(n),l=e(o);return l===void 0?await i.delete(n):await i.put(l,n),await s.done,l&&(!o||o.fid!==l.fid)&&oI(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $m(t){let e;const n=await $c(t.appConfig,r=>{const s=hD(r),i=fD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Mf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function hD(t){const e=t||{fid:iD(),registrationStatus:0};return uI(e)}function fD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(bs.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=pD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:mD(t)}:{installationEntry:e}}async function pD(t,e){try{const n=await nD(t,e);return Yu(t.appConfig,n)}catch(n){throw JT(n)&&n.customData.serverCode===409?await lI(t.appConfig):await Yu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function mD(t){let e=await M0(t.appConfig);for(;e.registrationStatus===1;)await sI(100),e=await M0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await $m(t);return r||n}return e}function M0(t){return $c(t,e=>{if(!e)throw bs.create("installation-not-found");return uI(e)})}function uI(t){return gD(t)?{fid:t.fid,registrationStatus:0}:t}function gD(t){return t.registrationStatus===1&&t.registrationTime+QT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yD({appConfig:t,heartbeatServiceProvider:e},n){const r=vD(t,n),s=ZO(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:YT,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(o)},c=await rI(()=>fetch(r,l));if(c.ok){const d=await c.json();return eI(d)}else throw await tI("Generate Auth Token",c)}function vD(t,{fid:e}){return`${ZT(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t,e=!1){let n;const r=await $c(t.appConfig,i=>{if(!cI(i))throw bs.create("not-registered");const o=i.authToken;if(!e&&xD(o))return i;if(o.requestStatus===1)return n=_D(t,e),i;{if(!navigator.onLine)throw bs.create("app-offline");const l=TD(i);return n=wD(t,l),l}});return n?await n:r.authToken}async function _D(t,e){let n=await V0(t.appConfig);for(;n.authToken.requestStatus===1;)await sI(100),n=await V0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Bm(t,e):r}function V0(t){return $c(t,e=>{if(!cI(e))throw bs.create("not-registered");const n=e.authToken;return ID(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function wD(t,e){try{const n=await yD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Yu(t.appConfig,r),n}catch(n){if(JT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await lI(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yu(t.appConfig,r)}throw n}}function cI(t){return t!==void 0&&t.registrationStatus===2}function xD(t){return t.requestStatus===2&&!ED(t)}function ED(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+QO}function TD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function ID(t){return t.requestStatus===1&&t.requestTime+QT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD(t){const e=t,{installationEntry:n,registrationPromise:r}=await $m(e);return r?r.catch(console.error):Bm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ND(t,e=!1){const n=t;return await SD(n),(await Bm(n,e)).token}async function SD(t){const{registrationPromise:e}=await $m(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PD(t){if(!t||!t.options)throw ih("App Configuration");if(!t.name)throw ih("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw ih(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function ih(t){return bs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dI="installations",AD="installations-internal",kD=t=>{const e=t.getProvider("app").getImmediate(),n=PD(e),r=Cs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},CD=t=>{const e=t.getProvider("app").getImmediate(),n=Cs(e,dI).getImmediate();return{getId:()=>bD(n),getToken:s=>ND(n,s)}};function RD(){fn(new Xt(dI,kD,"PUBLIC")),fn(new Xt(AD,CD,"PRIVATE"))}RD();Ot(GT,Um);Ot(GT,Um,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD="/firebase-messaging-sw.js",OD="/firebase-cloud-messaging-push-scope",hI="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",DD="https://fcmregistrations.googleapis.com/v1",fI="google.c.a.c_id",LD="google.c.a.c_l",MD="google.c.a.ts",VD="google.c.a.e";var U0;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(U0||(U0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ta;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ta||(Ta={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function UD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oh="fcm_token_details_db",FD=5,F0="fcm_token_object_Store";async function $D(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(oh))return null;let e=null;return(await yc(oh,FD,{upgrade:async(r,s,i,o)=>{var l;if(s<2||!r.objectStoreNames.contains(F0))return;const c=o.objectStore(F0),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(l=f.createTime)!==null&&l!==void 0?l:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:$n(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:$n(f.auth),p256dh:$n(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:$n(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:$n(f.auth),p256dh:$n(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:$n(f.vapidKey)}}}}}})).close(),await Gd(oh),await Gd("fcm_vapid_details_db"),await Gd("undefined"),BD(e)?e:null}function BD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zD="firebase-messaging-database",qD=1,Ia="firebase-messaging-store";let ah=null;function pI(){return ah||(ah=yc(zD,qD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ia)}}})),ah}async function HD(t){const e=mI(t),r=await(await pI()).transaction(Ia).objectStore(Ia).get(e);if(r)return r;{const s=await $D(t.appConfig.senderId);if(s)return await zm(t,s),s}}async function zm(t,e){const n=mI(t),s=(await pI()).transaction(Ia,"readwrite");return await s.objectStore(Ia).put(e,n),await s.done,e}function mI({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},ht=new ks("messaging","Messaging",WD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(t,e){const n=await Hm(t),r=gI(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(qm(t.appConfig),s)).json()}catch(o){throw ht.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw ht.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw ht.create("token-subscribe-no-token");return i.token}async function GD(t,e){const n=await Hm(t),r=gI(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${qm(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw ht.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw ht.create("token-update-failed",{errorInfo:o})}if(!i.token)throw ht.create("token-update-no-token");return i.token}async function QD(t,e){const r={method:"DELETE",headers:await Hm(t)};try{const i=await(await fetch(`${qm(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw ht.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw ht.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function qm({projectId:t}){return`${DD}/projects/${t}/registrations`}async function Hm({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function gI({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==hI&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD=7*24*60*60*1e3;async function XD(t){const e=await ZD(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$n(e.getKey("auth")),p256dh:$n(e.getKey("p256dh"))},r=await HD(t.firebaseDependencies);if(r){if(eL(r.subscriptionOptions,n))return Date.now()>=r.createTime+YD?JD(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await QD(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return $0(t.firebaseDependencies,n)}else return $0(t.firebaseDependencies,n)}async function JD(t,e){try{const n=await GD(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await zm(t.firebaseDependencies,r),n}catch(n){throw n}}async function $0(t,e){const r={token:await KD(t,e),createTime:Date.now(),subscriptionOptions:e};return await zm(t,r),r.token}async function ZD(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:UD(e)})}function eL(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return tL(e,t),nL(e,t),rL(e,t),e}function tL(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function nL(t,e){e.data&&(t.data=e.data)}function rL(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const l=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;l&&(t.fcmOptions.link=l);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t){return typeof t=="object"&&!!t&&fI in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iL(t){if(!t||!t.options)throw lh("App Configuration Object");if(!t.name)throw lh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw lh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function lh(t){return ht.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oL{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=iL(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aL(t){try{t.swRegistration=await navigator.serviceWorker.register(jD,{scope:OD}),t.swRegistration.update().catch(()=>{})}catch(e){throw ht.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lL(t,e){if(!e&&!t.swRegistration&&await aL(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw ht.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uL(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=hI)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yI(t,e){if(!navigator)throw ht.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw ht.create("permission-blocked");return await uL(t,e==null?void 0:e.vapidKey),await lL(t,e==null?void 0:e.serviceWorkerRegistration),XD(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cL(t,e,n){const r=dL(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[fI],message_name:n[LD],message_time:n[MD],message_device_time:Math.floor(Date.now()/1e3)})}function dL(t){switch(t){case Ta.NOTIFICATION_CLICKED:return"notification_open";case Ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hL(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ta.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(B0(n)):t.onMessageHandler.next(B0(n)));const r=n.data;sL(r)&&r[VD]==="1"&&await cL(t,n.messageType,r)}const z0="@firebase/messaging",q0="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fL=t=>{const e=new oL(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>hL(e,n)),e},pL=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>yI(e,r)}};function mL(){fn(new Xt("messaging",fL,"PUBLIC")),fn(new Xt("messaging-internal",pL,"PRIVATE")),Ot(z0,q0),Ot(z0,q0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(){try{await Dx()}catch{return!1}return typeof window<"u"&&Ox()&&DP()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yL(t,e){if(!navigator)throw ht.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vL(t=vc()){return gL().then(e=>{if(!e)throw ht.create("unsupported-browser")},e=>{throw ht.create("indexed-db-unsupported")}),Cs(_e(t),"messaging").getImmediate()}async function _L(t,e){return t=_e(t),yI(t,e)}function wL(t,e){return t=_e(t),yL(t,e)}mL();const is={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:is.apiKey?"Set":"Missing",authDomain:is.authDomain?"Set":"Missing",projectId:is.projectId?"Set":"Missing",storageBucket:is.storageBucket?"Set":"Missing",messagingSenderId:is.messagingSenderId?"Set":"Missing",appId:is.appId?"Set":"Missing"});const Wm=Vx(is),Ws=hR(Wm),he=tO(Wm);qO(Wm);const vI=new zn;vI.setCustomParameters({prompt:"select_account"});class xL{async register(e,n,r){try{const i=(await Gk(Ws,e,n)).user;return await Xk(i,{displayName:r}),await Lf(De(he,"users",i.uid),{uid:i.uid,email:e,displayName:r,role:"student",purchasedCourses:[],createdAt:Re(),lastLogin:Re(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,n){try{const r=await Qk(Ws,e,n);return await Nn(De(he,"users",r.user.uid),{lastLogin:Re()}),{success:!0,user:r.user}}catch(r){return console.error("Login error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async loginWithGoogle(){try{const n=(await xC(Ws,vI)).user;return(await Hr(De(he,"users",n.uid))).exists()?await Nn(De(he,"users",n.uid),{lastLogin:Re()}):await Lf(De(he,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,role:"student",purchasedCourses:[],createdAt:Re(),lastLogin:Re(),progress:{}}),{success:!0,user:n}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await tC(Ws),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await Kk(Ws,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(n){return console.error("Password reset error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async getUserData(e){try{const n=await Hr(De(he,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(n){return console.error("Get user data error:",n),{success:!1,error:n.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const ts=new xL,EL=void 0;class TL{constructor(){this.messaging=null}async initialize(){try{return this.messaging=vL(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const n=await _L(this.messaging,{vapidKey:EL});return n?(console.log(" FCM Token:",n),e&&await Nn(De(he,"users",e),{fcmTokens:qT(n),lastTokenUpdate:new Date}),n):(console.log(" Impossible de rcuprer le token"),null)}catch(n){return console.error(" Erreur rcupration token:",n),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const r=await this.getDeviceToken(e);return r?{success:!0,token:r}:{success:!1,error:"Impossible de rcuprer le token"}}catch(n){return console.error(" Erreur souscription:",n),{success:!1,error:n.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}wL(this.messaging,n=>{console.log(" Message reu (foreground):",n),n.notification&&new Notification(n.notification.title,{body:n.notification.body,icon:"/logo.png"}),e&&e(n)})}}const ru=new TL,_I=O.createContext({}),Zt=()=>{const t=O.useContext(_I);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},IL=({children:t})=>{const[e,n]=O.useState(null),[r,s]=O.useState(null),[i,o]=O.useState(!0),[l,c]=O.useState(null),d=async y=>{try{const k=await ts.getUserData(y);if(k.success)return s(k.data),console.log("Loaded userProfile from Firestore:",k.data),k.data}catch(k){console.error("Error loading user profile:",k)}return null};O.useEffect(()=>eC(Ws,async k=>{if(n(k),console.log("Auth state changed - uid:",(k==null?void 0:k.uid)||null),k){const L=await d(k.uid);console.log("After loadUserProfile - userProfile:",L),(L==null?void 0:L.role)!=="admin"?(await ru.initialize(),(await ru.subscribeToNotifications(k.uid)).success&&console.log(" Notifications actives"),ru.onMessageReceived(I=>{console.log(" Nouvelle notification:",I)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(y,k,L)=>{c(null);const V=await ts.register(y,k,L);return V.success||c(V.error),V},g=async(y,k)=>{c(null);const L=await ts.login(y,k);return L.success||c(L.error),L},m=async()=>{c(null);const y=await ts.loginWithGoogle();return y.success||c(y.error),y},T=async()=>{c(null);const y=await ts.logout();return y.success||c(y.error),y},b=async y=>{c(null);const k=await ts.resetPassword(y);return k.success||c(k.error),k},N=async y=>{c(null);const k=await ts.updateUserProfile(y);return k.success?await d(e.uid):c(k.error),k},A=()=>(r==null?void 0:r.role)==="admin",w={currentUser:e,userProfile:r,loading:i,error:l,register:f,login:g,loginWithGoogle:m,logout:T,resetPassword:b,updateProfile:N,isAdmin:A,hasAccessToCourse:y=>{var k;return((k=r==null?void 0:r.purchasedCourses)==null?void 0:k.includes(y))||A()},setError:c};return u.jsx(_I.Provider,{value:w,children:!i&&t})};function wo({children:t,adminOnly:e=!1}){const{currentUser:n,userProfile:r,loading:s}=Zt();return s?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!n,"userProfile:",r),n?e&&(r==null?void 0:r.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",r==null?void 0:r.role),u.jsx(af,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),u.jsx(af,{to:"/login",replace:!0})))}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var bL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),J=(t,e)=>{const n=O.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:l="",children:c,...d},f)=>O.createElement("svg",{ref:f,...bL,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${NL(t)}`,l].join(" "),...d},[...e.map(([g,m])=>O.createElement(g,m)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SL=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=J("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ba=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=J("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=J("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kL=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CL=J("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xt=J("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RL=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=J("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ft=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wI=J("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=J("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=J("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=J("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Km=J("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=J("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=J("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=J("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vf=J("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xI=J("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EI=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TI=J("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=J("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=J("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H0=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=J("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function QL(){var N,A;const[t,e]=O.useState({email:"",password:""}),[n,r]=O.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:l,userProfile:c}=Zt(),d=mn(),g=((A=(N=As().state)==null?void 0:N.from)==null?void 0:A.pathname)||"/",m=async x=>{x.preventDefault(),r(!0);const w=await s(t.email,t.password);w.success&&setTimeout(()=>{if(w.user){const y=setInterval(()=>{c&&(clearInterval(y),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(y),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},T=async()=>{r(!0);const x=await i();x.success&&setTimeout(()=>{if(x.user){const w=setInterval(()=>{c&&(clearInterval(w),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(w),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},b=x=>{e({...t,[x.target.name]:x.target.value}),o&&l(null)};return u.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),u.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),u.jsxs("div",{className:"relative w-full max-w-md",children:[u.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:u.jsx(xt,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),u.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[u.jsx(Gm,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&u.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[u.jsx(SL,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),u.jsx("p",{className:"text-red-700 text-sm",children:o})]}),u.jsxs("button",{onClick:T,disabled:n,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[u.jsx(wI,{className:"w-5 h-5 group-hover:rotate-12 transition"}),u.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),u.jsxs("form",{onSubmit:m,className:"space-y-5",children:[u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"relative",children:[u.jsx(Na,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:b,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),u.jsxs("div",{className:"group",children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),u.jsx(de,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),u.jsxs("div",{className:"relative",children:[u.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),u.jsx("input",{type:"password",name:"password",value:t.password,onChange:b,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:n?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),u.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",u.jsx(de,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function YL(){const[t,e]=O.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=O.useState({}),[s,i]=O.useState(!1),{register:o,loginWithGoogle:l}=Zt(),c=mn(),d=()=>{const N={};return t.displayName.trim()||(N.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(N.email="Email invalide"):N.email="L'email est requis",t.password?t.password.length<6&&(N.password="Minimum 6 caractres"):N.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(N.confirmPassword="Les mots de passe ne correspondent pas"),r(N),Object.keys(N).length===0},f=async N=>{if(N.preventDefault(),!d())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&c("/"),i(!1)},g=async()=>{i(!0),(await l()).success&&c("/"),i(!1)},m=N=>{e({...t,[N.target.name]:N.target.value}),n[N.target.name]&&r({...n,[N.target.name]:""})},b=(()=>{const N=t.password;if(!N)return{strength:0,label:"",color:""};let A=0;return N.length>=6&&A++,N.length>=8&&A++,/[a-z]/.test(N)&&/[A-Z]/.test(N)&&A++,/\d/.test(N)&&A++,/[^a-zA-Z\d]/.test(N)&&A++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][A-1]||{strength:0,label:"",color:""}})();return u.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[u.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[u.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),u.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),u.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),u.jsxs("div",{className:"relative w-full max-w-md",children:[u.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[u.jsxs("div",{className:"text-center mb-8",children:[u.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:u.jsx(xt,{className:"w-8 h-8 text-white"})})}),u.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),u.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[u.jsx(Gm,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),u.jsxs("button",{onClick:g,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[u.jsx(wI,{className:"w-5 h-5 group-hover:rotate-12 transition"}),u.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),u.jsxs("div",{className:"relative mb-6",children:[u.jsx("div",{className:"absolute inset-0 flex items-center",children:u.jsx("div",{className:"w-full border-t border-gray-300"})}),u.jsx("div",{className:"relative flex justify-center text-sm",children:u.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),u.jsxs("form",{onSubmit:f,className:"space-y-5",children:[u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),u.jsxs("div",{className:"relative",children:[u.jsx(Qm,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),n.displayName&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.displayName]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"relative",children:[u.jsx(Na,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"email",name:"email",value:t.email,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),n.email&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.email]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),u.jsxs("div",{className:"relative",children:[u.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"password",name:"password",value:t.password,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!n.password&&u.jsx("div",{className:"mt-2",children:u.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[u.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:u.jsx("div",{className:`h-full transition-all duration-300 ${b.color}`,style:{width:`${b.strength/5*100}%`}})}),u.jsx("span",{className:"text-xs font-medium text-gray-600",children:b.label})]})}),n.password&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.password]})]}),u.jsxs("div",{className:"group",children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),u.jsxs("div",{className:"relative",children:[u.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),u.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:m,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&u.jsx(Ft,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),n.confirmPassword&&u.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[u.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.confirmPassword]})]}),u.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?u.jsxs("span",{className:"flex items-center justify-center gap-2",children:[u.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),u.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",u.jsx(de,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),u.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function XL(){const[t,e]=O.useState(""),[n,r]=O.useState(!1),[s,i]=O.useState(!1),[o,l]=O.useState(""),{resetPassword:c}=Zt(),d=async f=>{if(f.preventDefault(),l(""),!t.trim()){l("Veuillez entrer votre email");return}r(!0);const g=await c(t);g.success?i(!0):l(g.error),r(!1)};return s?u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[u.jsx(Ft,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",u.jsx("strong",{children:t})]}),u.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),u.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[u.jsx(ba,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[u.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[u.jsx(ba,{className:"w-4 h-4"}),"Retour"]}),u.jsxs("div",{className:"text-center mb-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),u.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&u.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:u.jsx("p",{className:"text-red-700 text-sm",children:o})}),u.jsxs("form",{onSubmit:d,className:"space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),u.jsxs("div",{className:"relative",children:[u.jsx(Na,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),u.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),u.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:n?"Envoi en cours...":"Envoyer le lien"})]})]})})}const II="/admin",JL="/dashboard";class ZL{constructor(){this.cloudName="dbsemu1xo",this.uploadPreset="course_thumbnails",console.log(" Cloudinary Config:",{cloudName:this.cloudName,uploadPreset:this.uploadPreset}),this.cloudName||console.error(" VITE_CLOUDINARY_CLOUD_NAME is not set! Check your .env file")}async uploadImage(e,n="courses"){var r;try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.uploadPreset),s.append("folder",n);const i=await fetch(`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,{method:"POST",body:s});if(!i.ok){const l=await i.json();throw new Error(((r=l.error)==null?void 0:r.message)||"Upload failed")}const o=await i.json();return console.log(" Image uploaded to Cloudinary:",o.secure_url),{success:!0,url:o.secure_url,publicId:o.public_id}}catch(s){return console.error(" Cloudinary upload error:",s),{success:!1,error:s.message}}}async deleteImage(e){try{return console.log(" Image deletion not implemented (requires server-side)"),{success:!0}}catch(n){return console.error(" Cloudinary delete error:",n),{success:!1,error:n.message}}}getOptimizedUrl(e,n={}){const{width:r=800,height:s=600,quality:i="auto",format:o="auto"}=n;if(!e||!e.includes("cloudinary.com"))return e;const l=`w_${r},h_${s},c_fill,q_${i},f_${o}`;return e.replace("/upload/",`/upload/${l}/`)}}const e4=new ZL;class t4{async createCourse(e,n){try{let r=null;n&&(r=await this.uploadThumbnail(n));const s={...e,thumbnail:r,enrolledCount:0,status:"draft",createdAt:Re(),updatedAt:Re()},i=await Ku(Pr(he,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(r){return console.error(" Erreur cration cours:",r),{success:!1,error:r.message}}}async updateCourse(e,n,r){try{const s=De(he,"courses",e);let i={...n};return r&&(i.thumbnail=await this.uploadThumbnail(r)),i.updatedAt=Re(),await Nn(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const n=De(he,"courses",e);return await Nn(n,{status:"archived",archivedAt:Re()}),console.log(" Cours archiv:",e),{success:!0}}catch(n){return console.error(" Erreur suppression cours:",n),{success:!1,error:n.message}}}async getCourseById(e){try{const n=De(he,"courses",e),r=await Hr(n);return r.exists()?{success:!0,course:{id:r.id,...r.data()}}:{success:!1,error:"Cours introuvable"}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message}}}async getCourses(e={}){try{let n=Pr(he,"courses");const r=[];return e.category&&r.push(oi("category","==",e.category)),e.status?r.push(oi("status","==",e.status)):r.push(oi("status","!=","archived")),e.level&&r.push(oi("level","==",e.level)),r.push(Df("createdAt","desc")),e.limit&&r.push(hO(e.limit)),e.startAfter&&r.push(fO(e.startAfter)),n=Of(n,...r),{success:!0,courses:(await Wu(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message,courses:[]}}}async publishCourse(e){try{const n=De(he,"courses",e);return await Nn(n,{status:"published",publishedAt:Re(),updatedAt:Re()}),console.log(" Cours publi:",e),{success:!0}}catch(n){return console.error(" Erreur publication cours:",n),{success:!1,error:n.message}}}async uploadThumbnail(e){try{const n=await e4.uploadImage(e,"courses/thumbnails");if(!n.success)throw new Error(n.error||"Upload failed");return console.log(" Thumbnail uploaded:",n.url),n.url}catch(n){throw console.error(" Erreur upload thumbnail:",n),n}}async duplicateCourse(e){try{const{success:n,course:r}=await this.getCourseById(e);if(!n)return{success:!1,error:"Cours introuvable"};const s={...r,title:`${r.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(n){return console.error(" Erreur duplication cours:",n),{success:!1,error:n.message}}}}const wn=new t4;function n4(){const{currentUser:t,userProfile:e}=Zt(),n=mn(),[r,s]=O.useState([]),[i,o]=O.useState({totalCourses:0,totalStudents:0,totalHours:0}),[l,c]=O.useState(!0);O.useEffect(()=>{d()},[]);const d=async()=>{try{const m=await wn.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});m.success&&(s(m.courses),o({totalCourses:m.total||m.courses.length,totalStudents:m.courses.reduce((T,b)=>T+(b.enrolledCount||0),0),totalHours:m.courses.reduce((T,b)=>T+(b.duration||0),0)}))}catch(m){console.error("Error loading home data:",m)}finally{c(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],g=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return u.jsxs("div",{className:"min-h-screen bg-white",children:[u.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs("div",{className:"flex justify-between items-center h-16",children:[u.jsxs(de,{to:"/",className:"flex items-center space-x-2",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:u.jsx(xt,{className:"w-6 h-6 text-white"})}),u.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),u.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[u.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),u.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),u.jsx("div",{className:"flex items-center gap-3",children:t?u.jsxs(u.Fragment,{children:[u.jsx(de,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),u.jsx(de,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&u.jsx("button",{onClick:()=>n(II),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):u.jsxs(u.Fragment,{children:[u.jsx(de,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),u.jsx(de,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),u.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[u.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:u.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[u.jsx(Gm,{className:"w-4 h-4"}),u.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),u.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",u.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),u.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),u.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[u.jsxs(de,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",u.jsx(Ko,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&u.jsxs(de,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[u.jsx(Vf,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),u.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),u.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),u.jsxs("div",{className:"relative hidden md:block",children:[u.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),u.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[u.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:u.jsx(Vf,{className:"w-20 h-20 text-gray-400"})}),u.jsxs("div",{className:"mt-4 space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),u.jsx("section",{className:"py-20 bg-gray-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),u.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),l?u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(m=>u.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[u.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),u.jsxs("div",{className:"p-6 space-y-3",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},m))}):r.length>0?u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(m=>u.jsxs(de,{to:`/courses/${m.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[u.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[m.thumbnail?u.jsx("img",{src:m.thumbnail,alt:m.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):u.jsx("div",{className:"w-full h-full flex items-center justify-center",children:u.jsx(xt,{className:"w-16 h-16 text-gray-300"})}),u.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:m.price>0?`${m.price} DT`:"Gratuit"})]}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:m.category||"Gnral"}),u.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:m.level||"Dbutant"})]}),u.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:m.title}),u.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:m.shortDescription||m.description}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Bc,{className:"w-4 h-4"}),u.jsxs("span",{children:[m.enrolledCount||0," tudiants"]})]}),m.duration&&u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx(Li,{className:"w-4 h-4"}),u.jsxs("span",{children:[m.duration,"h"]})]})]})]})]},m.id))}):u.jsxs("div",{className:"text-center py-12",children:[u.jsx(xt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),u.jsx("div",{className:"text-center mt-12",children:u.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",u.jsx(Ko,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),u.jsx("section",{className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),u.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(m=>u.jsxs(de,{to:`/courses?category=${m.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[u.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${m.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:m.icon}),u.jsx("h3",{className:"font-semibold text-gray-900",children:m.name})]},m.name))})]})}),u.jsx("section",{className:"py-20 bg-gray-50",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),u.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),u.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),u.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),u.jsx("div",{className:"relative",children:u.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[u.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),u.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),u.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),u.jsx("section",{className:"py-20 bg-white",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"text-center mb-12",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),u.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),u.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:g.map((m,T)=>u.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[u.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(m.rating)].map((b,N)=>u.jsx(Uf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},N))}),u.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',m.quote,'"']}),u.jsxs("div",{className:"flex items-center gap-3",children:[u.jsx("img",{src:m.photo,alt:m.name,className:"w-12 h-12 rounded-full"}),u.jsxs("div",{children:[u.jsx("div",{className:"font-semibold text-gray-900",children:m.name}),u.jsx("div",{className:"text-sm text-gray-600",children:m.role})]})]})]},T))})]})}),u.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:u.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[u.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),u.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),u.jsxs(de,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",u.jsx(Ko,{className:"w-5 h-5"})]})]})}),u.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[u.jsxs("div",{children:[u.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[u.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:u.jsx(xt,{className:"w-6 h-6 text-white"})}),u.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),u.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),u.jsx("li",{children:u.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),u.jsx("li",{children:u.jsx(de,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),u.jsxs("div",{children:[u.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),u.jsxs("ul",{className:"space-y-2 text-sm",children:[u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),u.jsx("li",{children:u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),u.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[u.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),u.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),u.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function r4(){var S;const{currentUser:t,userProfile:e,logout:n}=Zt(),r=mn(),[s,i]=O.useState(!1),[o,l]=O.useState("personal"),[c,d]=O.useState(!1),[f,g]=O.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[m,T]=O.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[b,N]=O.useState(null),[A,x]=O.useState(!1),[w,y]=O.useState(null),k=async()=>{i(!0),await n(),r("/login")},L=async()=>{try{y(null),await Nn(De(he,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),y({type:"success",text:"Profil mis  jour avec succs!"}),d(!1),setTimeout(()=>y(null),3e3)}catch(E){y({type:"error",text:"Erreur: "+E.message})}},V=async()=>{if(!t)return;x(!0),N(null);const E=await ru.subscribeToNotifications(t.uid);E.success?(T("enabled"),N({type:"success",text:"Notifications actives"})):N({type:"error",text:E.error||"Impossible d'activer"}),x(!1),setTimeout(()=>N(null),3e3)},I=[{id:"personal",name:"Informations",icon:LL},{id:"security",name:"Scurit",icon:Mi},{id:"progress",name:"Progression",icon:H0}],_=[{label:"Cours suivis",value:((S=e==null?void 0:e.purchasedCourses)==null?void 0:S.length)||0,icon:xt,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:Li,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:AL,color:"text-purple-600 bg-purple-100"}];return u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:u.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[u.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),u.jsx("div",{className:"px-8 pb-8",children:u.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[u.jsxs("div",{className:"relative group",children:[u.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?u.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):u.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:u.jsx(Qm,{className:"w-16 h-16 text-white"})})}),u.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:u.jsx(jL,{className:"w-5 h-5 text-gray-600"})})]}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),u.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),u.jsxs("div",{className:"flex flex-wrap gap-2",children:[u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[u.jsx(TI,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),u.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[u.jsx(Na,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),u.jsxs("button",{onClick:k,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[u.jsx(FL,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:_.map((E,C)=>u.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[u.jsx("div",{className:"flex items-center justify-between mb-4",children:u.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${E.color}`,children:u.jsx(E.icon,{className:"w-6 h-6"})})}),u.jsx("p",{className:"text-gray-600 text-sm mb-1",children:E.label}),u.jsx("p",{className:"text-3xl font-bold text-gray-900",children:E.value})]},C))}),u.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[u.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:u.jsx("nav",{className:"flex gap-8",children:I.map(E=>{const C=E.icon;return u.jsxs("button",{onClick:()=>l(E.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===E.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[u.jsx(C,{className:"w-5 h-5"}),E.name]},E.id)})})}),u.jsxs("div",{className:"p-8",children:[o==="personal"&&u.jsxs("div",{className:"space-y-6",children:[w&&u.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${w.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[u.jsx("div",{className:`w-2 h-2 rounded-full ${w.type==="success"?"bg-green-500":"bg-red-500"}`}),w.text]}),u.jsxs("div",{className:"flex justify-between items-center mb-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),c?u.jsxs("div",{className:"flex gap-2",children:[u.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[u.jsx(xI,{className:"w-4 h-4"}),"Enregistrer"]}),u.jsxs("button",{onClick:()=>d(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[u.jsx(Ff,{className:"w-4 h-4"}),"Annuler"]})]}):u.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[u.jsx(zL,{className:"w-4 h-4"}),"Modifier"]})]}),u.jsxs("div",{className:"grid gap-6",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),c?u.jsx("input",{type:"text",value:f.displayName,onChange:E=>g({...f,displayName:E.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),u.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[u.jsx(Na,{className:"w-5 h-5 text-gray-400"}),u.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),u.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),c?u.jsx("input",{type:"tel",value:f.phone,onChange:E=>g({...f,phone:E.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),c?u.jsx("textarea",{value:f.bio,onChange:E=>g({...f,bio:E.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):u.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),u.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:u.jsx(CL,{className:"w-6 h-6 text-white"})}),u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),u.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),u.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",u.jsx("span",{className:m==="enabled"?"text-green-600":"text-gray-500",children:m==="enabled"?"Actives ":"Dsactives"})]}),b&&u.jsx("p",{className:`text-sm mt-2 ${b.type==="success"?"text-green-600":"text-red-600"}`,children:b.text})]})]}),u.jsx("button",{onClick:V,disabled:A||m==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:m==="enabled"?"Actives":A?"Activation...":"Activer"})]})}),u.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:u.jsxs("div",{className:"flex items-start gap-4",children:[u.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:u.jsx(Mi,{className:"w-6 h-6 text-gray-600"})}),u.jsxs("div",{className:"flex-1",children:[u.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),u.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),u.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),u.jsxs("div",{className:"text-center py-12",children:[u.jsx(H0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),u.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),u.jsxs("button",{onClick:()=>r("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[u.jsx(xt,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const s4="https://sandbox.paymee.tn/api/v2",i4="73af59aae675d845db28616e3e9304f2473d7090",o4="https://plateforme-educative.onrender.com";function a4(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),n=new Set(["1","true","yes","paid","success","ok","completed"]),r=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return n.has(e)?"completed":r.has(e)?"pending":s.has(e)?"failed":"unknown"}const l4=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class u4{async initiatePayment(e,n,r,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:n,amount:r});let l;try{l=l4()}catch(N){return console.error(" HTTPS check failed:",N.message),{success:!1,error:N.message}}const c=await Ku(Pr(he,"payments"),{userId:s.uid,courseId:e,courseTitle:n,amount:r,currency:"TND",status:"pending",createdAt:Re(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",c.id);const d=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let g=s.phone||"12345678";g=g.replace(/\D/g,""),g.length!==8&&(g="12345678");const m={amount:parseFloat(r),note:`Cours ${n}`,first_name:d,last_name:f,email:s.email,phone:g,return_url:`${l}/payment/success?payment_id=${c.id}`,cancel_url:`${l}/payment/cancel?payment_id=${c.id}`,webhook_url:`${o4}/paymee-webhook`,order_id:c.id};console.log(" Sending to Paymee:",m);const T=await fetch(`${s4}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${i4}`},body:JSON.stringify(m)});console.log(" Response status:",T.status);const b=await T.json();if(console.log(" Paymee response:",b),!b.status){if(console.error(" Paymee error:",b),b.errors&&Array.isArray(b.errors)){const N=b.errors.map(A=>typeof A=="object"?Object.entries(A).map(([x,w])=>`${x}: ${w}`).join(", "):A).join(" | ");throw new Error(`Erreur Paymee: ${N}`)}throw new Error(b.message||"Erreur initialisation paiement")}return await Nn(De(he,"payments",c.id),{paymeeToken:b.data.token,paymentUrl:b.data.payment_url,updatedAt:Re()}),console.log(" Payment ready:",b.data.payment_url),{success:!0,paymentId:c.id,paymentUrl:b.data.payment_url,token:b.data.token}}catch(l){return console.error(" Payment error:",l),{success:!1,error:l.message}}}async verifyPayment(e){try{const n=await Hr(De(he,"payments",e));if(!n.exists())return{success:!1,error:"Paiement introuvable"};const r=n.data();return{success:!0,status:a4(r.status),rawStatus:r.status,data:r}}catch(n){return console.error("Verification error:",n),{success:!1,error:n.message}}}}const bI=new u4;function NI({course:t}){var c;const{currentUser:e,userProfile:n}=Zt(),[r,s]=O.useState(!1),[i,o]=O.useState(null),l=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=n==null?void 0:n.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const d=await bI.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(n==null?void 0:n.displayName)||e.displayName,phone:(n==null?void 0:n.phone)||"00000000"});d.success?window.location.href=d.paymentUrl:(o(d.error),s(!1))};return(c=n==null?void 0:n.purchasedCourses)!=null&&c.includes(t.id)?u.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?u.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):u.jsxs("div",{children:[i&&u.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),u.jsx("button",{onClick:l,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?u.jsxs(u.Fragment,{children:[u.jsx(Km,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):u.jsxs(u.Fragment,{children:[u.jsx(VL,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),u.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function c4(){const[t,e]=O.useState([]),[n,r]=O.useState(!0);O.useEffect(()=>{s()},[]);const s=async()=>{r(!0);const i=await wn.getCourses({status:"published"});i.success&&e(i.courses),r(!1)};return n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?u.jsxs("div",{className:"col-span-full text-center py-12",children:[u.jsx(xt,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),u.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun cours disponible"}),u.jsx("p",{className:"text-gray-600",children:"Revenez bientt pour dcouvrir de nouveaux cours!"})]}):t.map(i=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[u.jsx("img",{src:i.thumbnail||"/assets/images/default-course.png",alt:i.title,className:"w-full h-48 object-cover"}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex items-center justify-between mb-2",children:[u.jsx("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-100 px-2 py-1 rounded",children:i.category||"General"}),i.price===0&&u.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),u.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),u.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[u.jsx(Bc,{className:"w-4 h-4 mr-1"}),u.jsxs("span",{children:[i.enrolledCount||0," tudiants"]})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("span",{className:"text-sm text-gray-600",children:"By Admin"}),u.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.price===0?"Gratuit":`${i.price} TND`})]}),u.jsx(NI,{course:i}),u.jsx(de,{to:`/course/${i.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition font-medium",children:"Voir les dtails"})]})]})]},i.id))})})]})}function d4(){var d;const{id:t}=xx(),e=mn(),{userProfile:n}=Zt(),[r,s]=O.useState(null),[i,o]=O.useState(!0);O.useEffect(()=>{l()},[t]);const l=async()=>{try{const f=await Hr(De(he,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},c=((d=n==null?void 0:n.purchasedCourses)==null?void 0:d.includes(t))||(r==null?void 0:r.isFree)||(n==null?void 0:n.role)==="admin";return i?u.jsx("div",{className:"min-h-screen flex items-center justify-center",children:u.jsx(Km,{className:"w-8 h-8 animate-spin text-green-500"})}):r?u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:u.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[u.jsx(ba,{className:"w-5 h-5"}),"Retour aux cours"]})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[u.jsxs("div",{className:"lg:col-span-2",children:[u.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:u.jsx("img",{src:r.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:r.title,className:"w-full h-64 object-cover"})}),u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[u.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:r.category}),u.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:r.level}),c&&u.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),u.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),u.jsx("p",{className:"text-gray-600 text-lg mb-6",children:r.description}),u.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Li,{className:"w-5 h-5"}),u.jsx("span",{children:r.duration})]}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(xt,{className:"w-5 h-5"}),u.jsxs("span",{children:[r.totalLessons," leons"]})]}),u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Bc,{className:"w-5 h-5"}),u.jsxs("span",{children:[r.enrolledCount," tudiants"]})]}),r.rating>0&&u.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[u.jsx(Uf,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),u.jsx("span",{children:r.rating.toFixed(1)})]})]}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),u.jsxs("ul",{className:"space-y-3",children:[u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(Ft,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(Ft,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),u.jsxs("li",{className:"flex items-start gap-3",children:[u.jsx(Ft,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),u.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[u.jsxs("div",{className:"text-center mb-6",children:[u.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:r.isFree?"Gratuit":`${r.price} TND`}),!r.isFree&&u.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),c?u.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[u.jsx(Xu,{className:"w-5 h-5"}),"Commencer le cours"]}):u.jsx("div",{className:"mb-4",children:u.jsx(NI,{course:r})}),u.jsxs("div",{className:"border-t pt-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),u.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(Xu,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Vidos  la demande"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(xt,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Ressources tlchargeables"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(Ft,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Accs illimit"})]}),u.jsxs("li",{className:"flex items-center gap-3",children:[u.jsx(Uf,{className:"w-4 h-4 text-green-500"}),u.jsx("span",{children:"Certificat de russite"})]})]})]}),r.instructor&&u.jsxs("div",{className:"border-t pt-6 mt-6",children:[u.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),u.jsx("p",{className:"text-gray-600",children:r.instructor})]})]})})]})})]}):null}class h4{async createModule(e,n){try{const r={courseId:e,...n,order:n.order||0,createdAt:Re()};return{success:!0,id:(await Ku(Pr(he,"modules"),r)).id}}catch(r){return console.error("Error creating module:",r),{success:!1,error:r.message}}}async createLesson(e,n){try{const r={moduleId:e,...n,order:n.order||0,createdAt:Re()};return{success:!0,id:(await Ku(Pr(he,"lessons"),r)).id}}catch(r){return console.error("Error creating lesson:",r),{success:!1,error:r.message}}}async getModulesByCourse(e){try{const n=Of(Pr(he,"modules"),oi("courseId","==",e),Df("order","asc"));return{success:!0,modules:(await Wu(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching modules:",n),{success:!1,error:n.message,modules:[]}}}async getLessonsByModule(e){try{const n=Of(Pr(he,"lessons"),oi("moduleId","==",e),Df("order","asc"));return{success:!0,lessons:(await Wu(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching lessons:",n),{success:!1,error:n.message,lessons:[]}}}async getLessonById(e){try{const n=De(he,"lessons",e),r=await Hr(n);return r.exists()?{success:!0,lesson:{id:r.id,...r.data()}}:{success:!1,error:"Leon introuvable"}}catch(n){return console.error("Error fetching lesson:",n),{success:!1,error:n.message}}}}const Ju=new h4;class f4{async markLessonComplete(e,n,r){try{const s=De(he,"progress",`${e}_${n}`);return(await Hr(s)).exists()?await Nn(s,{completedLessons:qT(r),lastAccessed:Re(),updatedAt:Re()}):await Lf(s,{userId:e,courseId:n,completedLessons:[r],startedAt:Re(),lastAccessed:Re(),updatedAt:Re()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,n){try{const r=De(he,"progress",`${e}_${n}`),s=await Hr(r);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(r){return console.error("Error fetching progress:",r),{success:!1,error:r.message}}}calculateProgressPercentage(e,n){return n===0?0:Math.round(e/n*100)}isLessonCompleted(e,n=[]){return n.includes(e)}}const ai=new f4,p4="modulepreload",m4=function(t){return"/"+t},W0={},St=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=m4(c),c in W0)return;W0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":p4,d||(g.as="script"),g.crossOrigin="",g.href=c,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((m,T)=>{g.addEventListener("load",m),g.addEventListener("error",()=>T(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return s.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var g4=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&y4(i,n.attrs),n.text&&(i.text=""+n.text);var o="onload"in i?K0:v4;o(i,r),i.onload||K0(i,r),s.appendChild(i)};function y4(t,e){for(var n in e)t.setAttribute(n,e[n])}function K0(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function v4(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var _4=function(e){return w4(e)&&!x4(e)};function w4(t){return!!t&&typeof t=="object"}function x4(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||I4(t)}var E4=typeof Symbol=="function"&&Symbol.for,T4=E4?Symbol.for("react.element"):60103;function I4(t){return t.$$typeof===T4}function b4(t){return Array.isArray(t)?[]:{}}function Sa(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Vi(b4(t),t,e):t}function N4(t,e,n){return t.concat(e).map(function(r){return Sa(r,n)})}function S4(t,e){if(!e.customMerge)return Vi;var n=e.customMerge(t);return typeof n=="function"?n:Vi}function P4(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function G0(t){return Object.keys(t).concat(P4(t))}function SI(t,e){try{return e in t}catch{return!1}}function A4(t,e){return SI(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function k4(t,e,n){var r={};return n.isMergeableObject(t)&&G0(t).forEach(function(s){r[s]=Sa(t[s],n)}),G0(e).forEach(function(s){A4(t,s)||(SI(t,s)&&n.isMergeableObject(e[s])?r[s]=S4(s,n)(t[s],e[s],n):r[s]=Sa(e[s],n))}),r}function Vi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||N4,n.isMergeableObject=n.isMergeableObject||_4,n.cloneUnlessOtherwiseSpecified=Sa;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):k4(t,e,n):Sa(e,n)}Vi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Vi(r,s,n)},{})};var C4=Vi,PI=C4,R4=Object.create,zc=Object.defineProperty,j4=Object.getOwnPropertyDescriptor,O4=Object.getOwnPropertyNames,D4=Object.getPrototypeOf,L4=Object.prototype.hasOwnProperty,M4=(t,e)=>{for(var n in e)zc(t,n,{get:e[n],enumerable:!0})},AI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of O4(e))!L4.call(t,s)&&s!==n&&zc(t,s,{get:()=>e[s],enumerable:!(r=j4(e,s))||r.enumerable});return t},Ym=(t,e,n)=>(n=t!=null?R4(D4(t)):{},AI(!t||!t.__esModule?zc(n,"default",{value:t,enumerable:!0}):n,t)),V4=t=>AI(zc({},"__esModule",{value:!0}),t),kI={};M4(kI,{callPlayer:()=>eM,getConfig:()=>J4,getSDK:()=>X4,isBlobUrl:()=>nM,isMediaStream:()=>tM,lazy:()=>B4,omit:()=>Z4,parseEndTime:()=>G4,parseStartTime:()=>K4,queryString:()=>Y4,randomString:()=>Q4,supportsWebKitPresentationMode:()=>rM});var qc=V4(kI),U4=Ym(O),F4=Ym(g4),$4=Ym(PI);const B4=t=>U4.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),z4=/[?&#](?:start|t)=([0-9hms]+)/,q4=/[?&#]end=([0-9hms]+)/,$f=/(\d+)(h|m|s)/g,H4=/^\d+$/;function CI(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match($f))return W4(r);if(H4.test(r))return parseInt(r)}}function W4(t){let e=0,n=$f.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=$f.exec(t)}return e}function K4(t){return CI(t,z4)}function G4(t){return CI(t,q4)}function Q4(){return Math.random().toString(36).substr(2,5)}function Y4(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function uh(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const $s={},X4=function(e,n,r=null,s=()=>!0,i=F4.default){const o=uh(n);return o&&s(o)?Promise.resolve(o):new Promise((l,c)=>{if($s[e]){$s[e].push({resolve:l,reject:c});return}$s[e]=[{resolve:l,reject:c}];const d=f=>{$s[e].forEach(g=>g.resolve(f))};if(r){const f=window[r];window[r]=function(){f&&f(),d(uh(n))}}i(e,f=>{f?($s[e].forEach(g=>g.reject(f)),$s[e]=null):r||d(uh(n))})})};function J4(t,e){return(0,$4.default)(e.config,t.config)}function Z4(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function eM(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function tM(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function nM(t){return/^blob:/.test(t)}function rM(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var Xm=Object.defineProperty,sM=Object.getOwnPropertyDescriptor,iM=Object.getOwnPropertyNames,oM=Object.prototype.hasOwnProperty,aM=(t,e)=>{for(var n in e)Xm(t,n,{get:e[n],enumerable:!0})},lM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iM(e))!oM.call(t,s)&&s!==n&&Xm(t,s,{get:()=>e[s],enumerable:!(r=sM(e,s))||r.enumerable});return t},uM=t=>lM(Xm({},"__esModule",{value:!0}),t),RI={};aM(RI,{AUDIO_EXTENSIONS:()=>Jm,DASH_EXTENSIONS:()=>WI,FLV_EXTENSIONS:()=>KI,HLS_EXTENSIONS:()=>eg,MATCH_URL_DAILYMOTION:()=>BI,MATCH_URL_FACEBOOK:()=>LI,MATCH_URL_FACEBOOK_WATCH:()=>MI,MATCH_URL_KALTURA:()=>HI,MATCH_URL_MIXCLOUD:()=>zI,MATCH_URL_MUX:()=>DI,MATCH_URL_SOUNDCLOUD:()=>jI,MATCH_URL_STREAMABLE:()=>VI,MATCH_URL_TWITCH_CHANNEL:()=>$I,MATCH_URL_TWITCH_VIDEO:()=>FI,MATCH_URL_VIDYARD:()=>qI,MATCH_URL_VIMEO:()=>OI,MATCH_URL_WISTIA:()=>UI,MATCH_URL_YOUTUBE:()=>Bf,VIDEO_EXTENSIONS:()=>Zm,canPlay:()=>dM});var cM=uM(RI),Q0=qc;const Bf=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,jI=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,OI=/vimeo\.com\/(?!progressive_redirect).+/,DI=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,LI=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,MI=/^https?:\/\/fb\.watch\/.+$/,VI=/streamable\.com\/([a-z0-9]+)$/,UI=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,FI=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,$I=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,BI=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,zI=/mixcloud\.com\/([^/]+\/[^/]+)/,qI=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,HI=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,Jm=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,Zm=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,eg=/\.(m3u8)($|\?)/i,WI=/\.(mpd)($|\?)/i,KI=/\.(flv)($|\?)/i,zf=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&zf(e)||zf(e.src))return!0;return!1}return(0,Q0.isMediaStream)(t)||(0,Q0.isBlobUrl)(t)?!0:Jm.test(t)||Zm.test(t)||eg.test(t)||WI.test(t)||KI.test(t)},dM={youtube:t=>t instanceof Array?t.every(e=>Bf.test(e)):Bf.test(t),soundcloud:t=>jI.test(t)&&!Jm.test(t),vimeo:t=>OI.test(t)&&!Zm.test(t)&&!eg.test(t),mux:t=>DI.test(t),facebook:t=>LI.test(t)||MI.test(t),streamable:t=>VI.test(t),wistia:t=>UI.test(t),twitch:t=>FI.test(t)||$I.test(t),dailymotion:t=>BI.test(t),mixcloud:t=>zI.test(t),vidyard:t=>qI.test(t),kaltura:t=>HI.test(t),file:zf};var tg=Object.defineProperty,hM=Object.getOwnPropertyDescriptor,fM=Object.getOwnPropertyNames,pM=Object.prototype.hasOwnProperty,mM=(t,e)=>{for(var n in e)tg(t,n,{get:e[n],enumerable:!0})},gM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of fM(e))!pM.call(t,s)&&s!==n&&tg(t,s,{get:()=>e[s],enumerable:!(r=hM(e,s))||r.enumerable});return t},yM=t=>gM(tg({},"__esModule",{value:!0}),t),GI={};mM(GI,{default:()=>_M});var vM=yM(GI),Nt=qc,yt=cM,_M=[{key:"youtube",name:"YouTube",canPlay:yt.canPlay.youtube,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./YouTube-DEpZ85Qr.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:yt.canPlay.soundcloud,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./SoundCloud-CS9IfNoa.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:yt.canPlay.vimeo,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Vimeo-B1QBqrBI.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:yt.canPlay.mux,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Mux-CPlwwT1V.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:yt.canPlay.facebook,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Facebook-DNPwoO8l.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:yt.canPlay.streamable,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Streamable-CG5sXoGW.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:yt.canPlay.wistia,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Wistia-BedLvdIG.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:yt.canPlay.twitch,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Twitch-DZcAFuYN.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:yt.canPlay.dailymotion,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./DailyMotion-CbLk32V5.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:yt.canPlay.mixcloud,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Mixcloud-B_6Mn9RM.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:yt.canPlay.vidyard,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Vidyard-DGlZjcWO.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:yt.canPlay.kaltura,lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./Kaltura-BVhM_JTF.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:yt.canPlay.file,canEnablePIP:t=>yt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,Nt.supportsWebKitPresentationMode)())&&!yt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,Nt.lazy)(()=>St(()=>import("./FilePlayer-D3NqUmN-.js").then(t=>t.F),[]))}],Y0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function wM(t,e){return!!(t===e||Y0(t)&&Y0(e))}function xM(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!wM(t[n],e[n]))return!1;return!0}function EM(t,e){e===void 0&&(e=xM);var n,r=[],s,i=!1;function o(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];return i&&n===this&&e(l,r)||(s=t.apply(this,l),i=!0,n=this,r=l),s}return o}const TM=Object.freeze(Object.defineProperty({__proto__:null,default:EM},Symbol.toStringTag,{value:"Module"})),IM=zb(TM);var bM=typeof Element<"u",NM=typeof Map=="function",SM=typeof Set=="function",PM=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function su(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!su(t[r],e[r]))return!1;return!0}var i;if(NM&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!su(r.value[1],e.get(r.value[0])))return!1;return!0}if(SM&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(PM&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(bM&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!su(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var QI=function(e,n){try{return su(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},YI={exports:{}},AM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",kM=AM,CM=kM;function XI(){}function JI(){}JI.resetWarningCache=XI;var RM=function(){function t(r,s,i,o,l,c){if(c!==CM){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:JI,resetWarningCache:XI};return n.PropTypes=n,n};YI.exports=RM();var jM=YI.exports,OM=Object.create,Hc=Object.defineProperty,DM=Object.getOwnPropertyDescriptor,LM=Object.getOwnPropertyNames,MM=Object.getPrototypeOf,VM=Object.prototype.hasOwnProperty,UM=(t,e)=>{for(var n in e)Hc(t,n,{get:e[n],enumerable:!0})},ZI=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of LM(e))!VM.call(t,s)&&s!==n&&Hc(t,s,{get:()=>e[s],enumerable:!(r=DM(e,s))||r.enumerable});return t},FM=(t,e,n)=>(n=t!=null?OM(MM(t)):{},ZI(!t||!t.__esModule?Hc(n,"default",{value:t,enumerable:!0}):n,t)),$M=t=>ZI(Hc({},"__esModule",{value:!0}),t),eb={};UM(eb,{defaultProps:()=>qM,propTypes:()=>zM});var tb=$M(eb),BM=FM(jM);const{string:Ke,bool:vt,number:Bs,array:ch,oneOfType:xo,shape:Lt,object:lt,func:Ve,node:X0}=BM.default,zM={url:xo([Ke,ch,lt]),playing:vt,loop:vt,controls:vt,volume:Bs,muted:vt,playbackRate:Bs,width:xo([Ke,Bs]),height:xo([Ke,Bs]),style:lt,progressInterval:Bs,playsinline:vt,pip:vt,stopOnUnmount:vt,light:xo([vt,Ke,lt]),playIcon:X0,previewTabIndex:Bs,previewAriaLabel:Ke,fallback:X0,oEmbedUrl:Ke,wrapper:xo([Ke,Ve,Lt({render:Ve.isRequired})]),config:Lt({soundcloud:Lt({options:lt}),youtube:Lt({playerVars:lt,embedOptions:lt,onUnstarted:Ve}),facebook:Lt({appId:Ke,version:Ke,playerId:Ke,attributes:lt}),dailymotion:Lt({params:lt}),vimeo:Lt({playerOptions:lt,title:Ke}),mux:Lt({attributes:lt,version:Ke}),file:Lt({attributes:lt,tracks:ch,forceVideo:vt,forceAudio:vt,forceHLS:vt,forceSafariHLS:vt,forceDisableHls:vt,forceDASH:vt,forceFLV:vt,hlsOptions:lt,hlsVersion:Ke,dashVersion:Ke,flvVersion:Ke}),wistia:Lt({options:lt,playerId:Ke,customControls:ch}),mixcloud:Lt({options:lt}),twitch:Lt({options:lt,playerId:Ke}),vidyard:Lt({options:lt})}),onReady:Ve,onStart:Ve,onPlay:Ve,onPause:Ve,onBuffer:Ve,onBufferEnd:Ve,onEnded:Ve,onError:Ve,onDuration:Ve,onSeek:Ve,onPlaybackRateChange:Ve,onPlaybackQualityChange:Ve,onProgress:Ve,onClickPreview:Ve,onEnablePIP:Ve,onDisablePIP:Ve},Ge=()=>{},qM={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Ge},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Ge,onStart:Ge,onPlay:Ge,onPause:Ge,onBuffer:Ge,onBufferEnd:Ge,onEnded:Ge,onError:Ge,onDuration:Ge,onSeek:Ge,onPlaybackRateChange:Ge,onPlaybackQualityChange:Ge,onProgress:Ge,onClickPreview:Ge,onEnablePIP:Ge,onDisablePIP:Ge};var HM=Object.create,Wa=Object.defineProperty,WM=Object.getOwnPropertyDescriptor,KM=Object.getOwnPropertyNames,GM=Object.getPrototypeOf,QM=Object.prototype.hasOwnProperty,YM=(t,e,n)=>e in t?Wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,XM=(t,e)=>{for(var n in e)Wa(t,n,{get:e[n],enumerable:!0})},nb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of KM(e))!QM.call(t,s)&&s!==n&&Wa(t,s,{get:()=>e[s],enumerable:!(r=WM(e,s))||r.enumerable});return t},rb=(t,e,n)=>(n=t!=null?HM(GM(t)):{},nb(!t||!t.__esModule?Wa(n,"default",{value:t,enumerable:!0}):n,t)),JM=t=>nb(Wa({},"__esModule",{value:!0}),t),Ae=(t,e,n)=>(YM(t,typeof e!="symbol"?e+"":e,n),n),sb={};XM(sb,{default:()=>Wc});var ZM=JM(sb),J0=rb(O),eV=rb(QI),ib=tb,tV=qc;const nV=5e3;class Wc extends J0.Component{constructor(){super(...arguments),Ae(this,"mounted",!1),Ae(this,"isReady",!1),Ae(this,"isPlaying",!1),Ae(this,"isLoading",!0),Ae(this,"loadOnReady",null),Ae(this,"startOnPlay",!0),Ae(this,"seekOnPlay",null),Ae(this,"onDurationCalled",!1),Ae(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),Ae(this,"getInternalPlayer",e=>this.player?this.player[e]:null),Ae(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Ae(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),Ae(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Ae(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),Ae(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),Ae(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),Ae(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Ae(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:o,pip:l,loop:c,activePlayer:d,disableDeferredLoading:f}=this.props;if(!(0,eV.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!f&&!(0,tV.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&l&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!l&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},nV));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?J0.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Ae(Wc,"displayName","Player");Ae(Wc,"propTypes",ib.propTypes);Ae(Wc,"defaultProps",ib.defaultProps);var rV=Object.create,Ka=Object.defineProperty,sV=Object.getOwnPropertyDescriptor,iV=Object.getOwnPropertyNames,oV=Object.getPrototypeOf,aV=Object.prototype.hasOwnProperty,lV=(t,e,n)=>e in t?Ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,uV=(t,e)=>{for(var n in e)Ka(t,n,{get:e[n],enumerable:!0})},ob=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of iV(e))!aV.call(t,s)&&s!==n&&Ka(t,s,{get:()=>e[s],enumerable:!(r=sV(e,s))||r.enumerable});return t},Ga=(t,e,n)=>(n=t!=null?rV(oV(t)):{},ob(!t||!t.__esModule?Ka(n,"default",{value:t,enumerable:!0}):n,t)),cV=t=>ob(Ka({},"__esModule",{value:!0}),t),Pe=(t,e,n)=>(lV(t,typeof e!="symbol"?e+"":e,n),n),ab={};uV(ab,{createReactPlayer:()=>_V});var dV=cV(ab),Ks=Ga(O),hV=Ga(PI),dh=Ga(IM),Z0=Ga(QI),jo=tb,lb=qc,fV=Ga(ZM);const pV=(0,lb.lazy)(()=>St(()=>import("./Preview-DFLMT4U5.js").then(t=>t.P),[])),mV=typeof window<"u"&&window.document&&typeof document<"u",gV=typeof yd<"u"&&yd.window&&yd.window.document,yV=Object.keys(jo.propTypes),vV=mV||gV?Ks.Suspense:()=>null,Eo=[],_V=(t,e)=>{var n;return n=class extends Ks.Component{constructor(){super(...arguments),Pe(this,"state",{showPreview:!!this.props.light}),Pe(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),Pe(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),Pe(this,"showPreview",()=>{this.setState({showPreview:!0})}),Pe(this,"getDuration",()=>this.player?this.player.getDuration():null),Pe(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Pe(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Pe(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),Pe(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),Pe(this,"handleReady",()=>{this.props.onReady(this)}),Pe(this,"getActivePlayer",(0,dh.default)(r=>{for(const s of[...Eo,...t])if(s.canPlay(r))return s;return e||null})),Pe(this,"getConfig",(0,dh.default)((r,s)=>{const{config:i}=this.props;return hV.default.all([jo.defaultProps.config,jo.defaultProps.config[s]||{},i,i[s]||{}])})),Pe(this,"getAttributes",(0,dh.default)(r=>(0,lb.omit)(this.props,yV))),Pe(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return Ks.default.createElement(fV.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,Z0.default)(this.props,r)||!(0,Z0.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:l,previewAriaLabel:c}=this.props;return Ks.default.createElement(pV,{url:r,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:c,oEmbedUrl:l,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:o,fallback:l,wrapper:c}=this.props,{showPreview:d}=this.state,f=this.getAttributes(r),g=typeof c=="string"?this.references.wrapper:void 0;return Ks.default.createElement(c,{ref:g,style:{...s,width:i,height:o},...f},Ks.default.createElement(vV,{fallback:l},d?this.renderPreview(r):this.renderActivePlayer(r)))}},Pe(n,"displayName","ReactPlayer"),Pe(n,"propTypes",jo.propTypes),Pe(n,"defaultProps",jo.defaultProps),Pe(n,"addCustomPlayer",r=>{Eo.push(r)}),Pe(n,"removeCustomPlayers",()=>{Eo.length=0}),Pe(n,"canPlay",r=>{for(const s of[...Eo,...t])if(s.canPlay(r))return!0;return!1}),Pe(n,"canEnablePIP",r=>{for(const s of[...Eo,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var wV=Object.create,Kc=Object.defineProperty,xV=Object.getOwnPropertyDescriptor,EV=Object.getOwnPropertyNames,TV=Object.getPrototypeOf,IV=Object.prototype.hasOwnProperty,bV=(t,e)=>{for(var n in e)Kc(t,n,{get:e[n],enumerable:!0})},ub=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of EV(e))!IV.call(t,s)&&s!==n&&Kc(t,s,{get:()=>e[s],enumerable:!(r=xV(e,s))||r.enumerable});return t},NV=(t,e,n)=>(n=t!=null?wV(TV(t)):{},ub(!t||!t.__esModule?Kc(n,"default",{value:t,enumerable:!0}):n,t)),SV=t=>ub(Kc({},"__esModule",{value:!0}),t),cb={};bV(cb,{default:()=>CV});var PV=SV(cb),qf=NV(vM),AV=dV;const kV=qf.default[qf.default.length-1];var CV=(0,AV.createReactPlayer)(qf.default,kV);const RV=t_(PV);function jV({lesson:t,onComplete:e,onNext:n,isCompleted:r}){const{user:s}=Zt(),[i,o]=O.useState(!1),[l,c]=O.useState(0),[d,f]=O.useState(r),g=T=>{c(T.played*100),T.played>.9&&!d&&m()},m=async()=>{if(!t.courseId||!s)return;(await ai.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[u.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?u.jsx(RV,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:g,onPlay:()=>o(!0),onPause:()=>o(!1)}):u.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:u.jsxs("div",{className:"text-white text-center",children:[u.jsx(Xu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),u.jsx("p",{children:"Aucune vido disponible"})]})})}),u.jsxs("div",{className:"p-6",children:[u.jsxs("div",{className:"flex justify-between items-start mb-4",children:[u.jsxs("div",{className:"flex-1",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),u.jsx("p",{className:"text-gray-600",children:t.description})]}),d&&u.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[u.jsx(Ft,{className:"w-5 h-5 mr-1"}),u.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Progression"}),u.jsxs("span",{children:[Math.round(l),"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${l}%`}})})]}),u.jsxs("div",{className:"flex space-x-3",children:[!d&&u.jsxs("button",{onClick:m,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[u.jsx(Ft,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),n&&u.jsxs("button",{onClick:n,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",u.jsx(Ko,{className:"w-5 h-5 ml-2"})]})]}),t.content&&u.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),u.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function OV({courseId:t,currentLessonId:e,onLessonSelect:n,userProgress:r=[],isPurchased:s=!1}){const[i,o]=O.useState([]),[l,c]=O.useState(new Set),[d,f]=O.useState(!0);O.useEffect(()=>{g()},[t]);const g=async()=>{f(!0);const N=await Ju.getModulesByCourse(t);if(N.success){const A=await Promise.all(N.modules.map(async x=>{const w=await Ju.getLessonsByModule(x.id);return{...x,lessons:w.lessons||[]}}));o(A),A.length>0&&c(new Set([A[0].id]))}f(!1)},m=N=>{c(A=>{const x=new Set(A);return x.has(N)?x.delete(N):x.add(N),x})},T=N=>ai.isLessonCompleted(N,r),b=N=>N.reduce((A,x)=>A+(x.duration||0),0);return d?u.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:u.jsxs("div",{className:"animate-pulse space-y-4",children:[u.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded"}),u.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):u.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[u.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:u.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),u.jsx("div",{className:"divide-y divide-gray-200",children:i.map((N,A)=>u.jsxs("div",{children:[u.jsx("button",{onClick:()=>m(N.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:u.jsxs("div",{className:"flex items-center",children:[l.has(N.id)?u.jsx(OL,{className:"w-5 h-5 text-gray-400 mr-2"}):u.jsx(DL,{className:"w-5 h-5 text-gray-400 mr-2"}),u.jsxs("div",{className:"text-left",children:[u.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",A+1,": ",N.title]}),u.jsxs("p",{className:"text-sm text-gray-500",children:[N.lessons.length," leon",N.lessons.length>1?"s":"",b(N.lessons)>0&&u.jsxs("span",{children:["  ",b(N.lessons)," min"]})]})]})]})}),l.has(N.id)&&u.jsx("div",{className:"bg-gray-50",children:N.lessons.map((x,w)=>{const y=T(x.id),k=x.id===e,L=s||x.isFree;return u.jsxs("button",{onClick:()=>L&&n(x),disabled:!L,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${k?"bg-green-50 border-l-4 border-green-500":""} ${L?"":"opacity-50 cursor-not-allowed"}`,children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"mr-3",children:L?y?u.jsx(Ft,{className:"w-4 h-4 text-green-500"}):u.jsx(Xu,{className:"w-4 h-4 text-gray-400"}):u.jsx(Mi,{className:"w-4 h-4 text-gray-400"})}),u.jsxs("div",{className:"text-left",children:[u.jsxs("p",{className:`text-sm ${k?"font-medium text-green-700":"text-gray-700"}`,children:[w+1,". ",x.title]}),x.duration&&u.jsxs("p",{className:"text-xs text-gray-500",children:[x.duration," min"]})]})]}),x.isFree&&u.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},x.id)})})]},N.id))}),i.length===0&&u.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:u.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}function DV(){const{courseId:t}=xx(),e=mn(),{user:n,userProfile:r}=Zt(),[s,i]=O.useState(null),[o,l]=O.useState(null),[c,d]=O.useState([]),[f,g]=O.useState("overview"),[m,T]=O.useState(!0),[b,N]=O.useState(!1),[A,x]=O.useState([]);O.useEffect(()=>{w()},[t,n]);const w=async()=>{var C;if(!t||!n)return;T(!0);const I=await wn.getCourseById(t);I.success&&i(I.course);const _=(C=r==null?void 0:r.purchasedCourses)==null?void 0:C.includes(t);N(_);const S=await ai.getCourseProgress(n.uid,t);S.success&&d(S.progress.completedLessons||[]);const E=await Ju.getModulesByCourse(t);if(E.success){const R=[];for(const P of E.modules){const He=await Ju.getLessonsByModule(P.id);He.success&&R.push(...He.lessons.map(Rn=>({...Rn,moduleId:P.id,courseId:t})))}if(x(R),R.length>0&&!o){const P=R.find(He=>!ai.isLessonCompleted(He.id,S.progress.completedLessons||[]));l(P||R[0])}}T(!1)},y=I=>{d(_=>[..._,I])},k=()=>{if(!o||A.length===0)return;const I=A.findIndex(_=>_.id===o.id);I<A.length-1&&l(A[I+1])},L=()=>A.length===0?0:ai.calculateProgressPercentage(c.length,A.length);if(m)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),u.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!b)return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsxs("div",{className:"text-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),u.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),u.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const V=[{id:"overview",name:"Aperu",icon:xt},{id:"resources",name:"Ressources",icon:UL},{id:"qna",name:"Q&A",icon:$L}];return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[u.jsx(ba,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),u.jsxs("div",{className:"flex items-center space-x-4",children:[u.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",L(),"%"]}),u.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:u.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${L()}%`}})})]})]})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&u.jsx(jV,{lesson:o,onComplete:y,onNext:k,isCompleted:ai.isLessonCompleted(o.id,c)}),u.jsxs("div",{className:"bg-white rounded-lg shadow",children:[u.jsx("div",{className:"border-b border-gray-200",children:u.jsx("nav",{className:"flex -mb-px",children:V.map(I=>{const _=I.icon;return u.jsxs("button",{onClick:()=>g(I.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===I.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[u.jsx(_,{className:"w-4 h-4 mr-2"}),I.name]},I.id)})})}),u.jsxs("div",{className:"p-6",children:[f==="overview"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),u.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&u.jsxs("div",{className:"mb-4",children:[u.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),u.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((I,_)=>u.jsx("li",{children:I},_))})]})]}),f==="resources"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),u.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&u.jsxs("div",{children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),u.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),u.jsx("div",{className:"lg:col-span-1",children:u.jsx(OV,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:l,userProgress:c,isPurchased:b})})]})})]})}function LV(){const{userProfile:t}=Zt(),[e,n]=O.useState([]),[r,s]=O.useState(!0);return O.useEffect(()=>{setTimeout(()=>{n([{id:"1",title:"Introduction  React",instructor:"Ahmed Ben Salem",progress:65,totalLessons:12,completedLessons:8,lastAccessed:"2024-01-15",image:"/assets/images/default-course.png"},{id:"2",title:"JavaScript Avanc",instructor:"Fatma Aloui",progress:30,totalLessons:15,completedLessons:5,lastAccessed:"2024-01-10",image:"/assets/images/default-course.png"}]),s(!1)},1e3)},[]),r?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:u.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),u.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.length===0?u.jsxs("div",{className:"text-center py-12",children:[u.jsx(xt,{className:"mx-auto h-12 w-12 text-gray-400"}),u.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"Aucun cours"}),u.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Commencez par explorer nos cours disponibles."}),u.jsx("div",{className:"mt-6",children:u.jsx(de,{to:"/courses",className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-green-600 hover:bg-green-700",children:"Explorer les cours"})})]}):u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(i=>u.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[u.jsx("img",{src:i.image,alt:i.title,className:"w-full h-48 object-cover"}),u.jsxs("div",{className:"p-6",children:[u.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),u.jsxs("p",{className:"text-gray-600 mb-4",children:["Par ",i.instructor]}),u.jsxs("div",{className:"mb-4",children:[u.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[u.jsx("span",{children:"Progression"}),u.jsxs("span",{children:[i.progress,"%"]})]}),u.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:u.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${i.progress}%`}})})]}),u.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-4",children:[u.jsxs("div",{className:"flex items-center",children:[u.jsx(Ft,{className:"w-4 h-4 mr-1 text-green-500"}),u.jsxs("span",{children:[i.completedLessons,"/",i.totalLessons," leons"]})]}),u.jsxs("div",{className:"flex items-center",children:[u.jsx(Li,{className:"w-4 h-4 mr-1"}),u.jsxs("span",{children:["Dernire fois: ",i.lastAccessed]})]})]}),u.jsxs(de,{to:`/course/${i.id}/learn`,className:"w-full bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition flex items-center justify-center",children:[u.jsx(Vf,{className:"w-4 h-4 mr-2"}),"Continuer"]})]})]},i.id))})})]})}function MV(){const[t]=_P(),e=mn(),[n,r]=O.useState(!0),[s,i]=O.useState(null),[o,l]=O.useState(null),[c,d]=O.useState(0),f=10,g=O.useRef(null),m=O.useRef(!1),T=O.useRef(0),b=t.get("payment_id"),N=b==null?void 0:b.split("?")[0],A=O.useCallback(async()=>{if(m.current)return;if(!N){l("ID de paiement manquant"),r(!1),m.current=!0;return}T.current+=1;const x=T.current;if(console.log(` Tentative ${x}/${f}`),d(x),x>f){console.log(" Limite de tentatives atteinte (dpasse)"),l("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0;return}if(m.current||(await new Promise(y=>setTimeout(y,3e3)),m.current))return;const w=await bI.verifyPayment(N);if(console.log(" Rsultat vrification:",w),!m.current)if(w.success)if(i(w.data),w.status==="completed")console.log(" Paiement confirm !"),r(!1),m.current=!0,g.current&&clearTimeout(g.current);else if(w.status==="pending")if(T.current>=f)console.log(" Limite de tentatives atteinte (pending)"),l("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),m.current=!0,g.current&&clearTimeout(g.current);else if(T.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let y="https://plateforme-educative.onrender.com";if(y&&y.includes("/"))try{const k=new URL(y);k.pathname!=="/"&&!y.includes("/sync-payment")&&(y=`${k.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",y)}if(y){const k=y.endsWith("/")?y.slice(0,-1):y;let L=`${k}/sync-payment`;const V="https://plateforme-educative.onrender.com";let I=null;if(V&&V.includes("/")&&V!==k)try{const E=new URL(V);if(E.pathname&&E.pathname!=="/"){const C=E.pathname.endsWith("/")?E.pathname.slice(0,-1):E.pathname;I=`${E.origin}${C}/sync-payment`}}catch{}console.log(" URL backend pour sync:",L),I&&console.log(" URL fallback pour sync:",I);const _=E=>fetch(E,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:N})});(I?_(L).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),_(I))):_(L)).then(E=>E.ok?E.json():(console.error(" Erreur HTTP sync:",E.status,E.statusText),null)).then(E=>{E&&E.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),m.current=!0):(console.warn(" Synchronisation choue:",E),!m.current&&T.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3)))}).catch(E=>{console.error(" Erreur synchronisation:",E),console.error("   Type:",E.name),console.error("   Message:",E.message),!m.current&&T.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))})}else!m.current&&T.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}catch(y){console.warn(" Erreur synchronisation:",y),!m.current&&T.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3);else w.status==="failed"?(l("Le paiement a chou"),r(!1),m.current=!0,g.current&&clearTimeout(g.current)):T.current>=f?(l("Le paiement a un statut inconnu. Veuillez contacter le support."),r(!1),m.current=!0,g.current&&clearTimeout(g.current)):(console.log(" Statut inconnu:",w.status,"- Nouvelle tentative..."),g.current=setTimeout(A,3e3));else console.error(" Erreur vrification:",w.error),l(w.error||"Erreur lors de la vrification du paiement"),r(!1),m.current=!0,g.current&&clearTimeout(g.current)},[N,f]);return O.useEffect(()=>(m.current=!1,T.current=0,d(0),g.current&&(clearTimeout(g.current),g.current=null),N?(console.log(" Vrification du paiement:",N),A()):(l("ID de paiement manquant"),r(!1),m.current=!0),()=>{g.current&&(clearTimeout(g.current),g.current=null),m.current=!0}),[N,A]),n?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(Km,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),u.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),c>0&&u.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",c,"/",f,"..."]})]})}):o?u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:u.jsx("span",{className:"text-3xl",children:""})}),u.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),u.jsx("p",{className:"text-gray-600 mb-6",children:o}),u.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):u.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(Ft,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),u.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",u.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),u.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[u.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),u.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",u.jsx(Ko,{className:"w-5 h-5"})]}),u.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function VV(){const t=mn();return u.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:u.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[u.jsx(GL,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),u.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),u.jsxs("div",{className:"space-y-3",children:[u.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[u.jsx(ba,{className:"w-5 h-5"}),"Ressayer le paiement"]}),u.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function UV({onCreate:t}){const[e,n]=O.useState(""),[r,s]=O.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const l={id:Date.now().toString(),title:e.trim(),body:r.trim(),time:new Date().toLocaleString()};t&&t(l),n(""),s("")};return u.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[u.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),u.jsx("div",{className:"mb-2",children:u.jsx("input",{value:e,onChange:o=>n(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),u.jsx("div",{className:"mb-3",children:u.jsx("textarea",{value:r,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),u.jsx("div",{className:"text-right",children:u.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function FV({notification:t}){return u.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:u.jsxs("div",{className:"flex items-start justify-between",children:[u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),u.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),u.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function $V({items:t=[]}){return t.length?u.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>u.jsx(FV,{notification:e},e.id))}):u.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function BV({onEdit:t,onAddNew:e}){const[n,r]=O.useState([]),[s,i]=O.useState(!0),[o,l]=O.useState(""),[c,d]=O.useState("all"),[f,g]=O.useState("");O.useEffect(()=>{m()},[c,f]);const m=async()=>{i(!0);const y={};c!=="all"&&(y.category=c),f&&(y.status=f);const k=await wn.getCourses(y);k.success&&r(k.courses),i(!1)},T=async y=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await wn.deleteCourse(y)).success&&m()},b=async y=>{(await wn.duplicateCourse(y)).success&&m()},N=async y=>{(await wn.publishCourse(y)).success&&m()},A=n.filter(y=>{var k,L;return((k=y.title)==null?void 0:k.toLowerCase().includes(o.toLowerCase()))||((L=y.description)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))}),x=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],w=y=>{const k={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},V={draft:Li,published:Ft,archived:PL}[y]||Li;return u.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${k[y]||k.draft}`,children:[u.jsx(V,{className:"w-3 h-3 mr-1"}),y==="draft"?"Brouillon":y==="published"?"Publi":"Archiv"]})};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),u.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[u.jsx(qL,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),u.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(EI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:o,onChange:y=>l(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsx("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))}),u.jsxs("select",{value:f,onChange:y=>g(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"",children:"Tous les statuts"}),u.jsx("option",{value:"draft",children:"Brouillon"}),u.jsx("option",{value:"published",children:"Publi"}),u.jsx("option",{value:"archived",children:"Archiv"})]})]})}),s?u.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),u.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):A.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(y=>u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center",children:[y.thumbnail&&u.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-12 h-12 rounded object-cover mr-3"}),u.jsxs("div",{children:[u.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),u.jsx("div",{className:"text-sm text-gray-500",children:y.level==="beginner"?"Dbutant":y.level==="intermediate"?"Intermdiaire":y.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.category}),u.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[y.price," TND"]}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.enrolledCount||0}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:w(y.status)}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsxs("div",{className:"flex justify-end space-x-2",children:[y.status==="draft"&&u.jsx("button",{onClick:()=>N(y.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:u.jsx(Ft,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>t(y),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:u.jsx(BL,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>b(y.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:u.jsx(ML,{className:"w-5 h-5"})}),u.jsx("button",{onClick:()=>T(y.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:u.jsx(WL,{className:"w-5 h-5"})})]})})]},y.id))})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),u.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(y=>y.status==="published").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),u.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.filter(y=>y.status==="draft").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.reduce((y,k)=>y+(k.enrolledCount||0),0)})]})]})]})}function zV({courseId:t=null,onSave:e,onCancel:n}){const[r,s]=O.useState(!1),[i,o]=O.useState(null),[l,c]=O.useState(null),[d,f]=O.useState(null),[g,m]=O.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});O.useEffect(()=>{t&&T()},[t]);const T=async()=>{s(!0);const y=await wn.getCourseById(t);y.success?(m(y.course),y.course.thumbnail&&c(y.course.thumbnail)):o(y.error),s(!1)},b=y=>{const{name:k,value:L}=y.target;m(V=>({...V,[k]:L}))},N=y=>{const k=y.target.files[0];if(k){f(k);const L=new FileReader;L.onloadend=()=>{c(L.result)},L.readAsDataURL(k)}},A=async y=>{y.preventDefault(),s(!0),o(null);try{let k;t?k=await wn.updateCourse(t,g,d):k=await wn.createCourse(g,d),k.success?e==null||e(k):o(k.error)}catch(k){o(k.message)}finally{s(!1)}},x=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],w=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return u.jsxs("form",{onSubmit:A,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),u.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:u.jsx(Ff,{className:"w-6 h-6"})})]}),i&&u.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),u.jsx("input",{type:"text",name:"title",value:g.title,onChange:b,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),u.jsx("input",{type:"text",name:"shortDescription",value:g.shortDescription,onChange:b,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),u.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.shortDescription.length,"/150 caractres"]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),u.jsx("textarea",{name:"description",value:g.description,onChange:b,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),u.jsx("select",{name:"category",value:g.category,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),u.jsx("select",{name:"level",value:g.level,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:w.map(y=>u.jsx("option",{value:y.value,children:y.label},y.value))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),u.jsx("input",{type:"number",name:"price",value:g.price,onChange:b,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),u.jsx("input",{type:"text",name:"duration",value:g.duration,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),u.jsx("input",{type:"text",name:"instructor",value:g.instructor,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),u.jsxs("select",{name:"language",value:g.language,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"fr",children:"Franais"}),u.jsx("option",{value:"ar",children:"Arabe"}),u.jsx("option",{value:"en",children:"Anglais"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),u.jsxs("div",{className:"flex items-start space-x-4",children:[l&&u.jsxs("div",{className:"relative",children:[u.jsx("img",{src:l,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),u.jsx("button",{type:"button",onClick:()=>{c(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:u.jsx(Ff,{className:"w-4 h-4"})})]}),u.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[u.jsx(KL,{className:"w-8 h-8 mb-2"}),u.jsx("span",{className:"text-sm",children:"Choisir une image"}),u.jsx("input",{type:"file",accept:"image/*",onChange:N,className:"hidden"})]})]})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),u.jsx("input",{type:"url",name:"videoUrl",value:g.videoUrl,onChange:b,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),u.jsx("textarea",{name:"requirements",value:g.requirements,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),u.jsx("textarea",{name:"outcomes",value:g.outcomes,onChange:b,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),u.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[u.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),u.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[u.jsx(xI,{className:"w-4 h-4 mr-2"}),r?"Enregistrement...":"Enregistrer"]})]})]})}function qV({onSelectDetails:t}){const[e,n]=O.useState([]),[r,s]=O.useState(!0),[i,o]=O.useState(""),[l,c]=O.useState("all");O.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const T=(await Wu(Pr(he,"users"))).docs.map(b=>({id:b.id,...b.data()}));n(T)}catch(m){console.error("Error loading users:",m)}finally{s(!1)}},f=async(m,T)=>{try{const b=T==="admin"?"student":"admin",N=De(he,"users",m);await Nn(N,{role:b}),d()}catch(b){console.error("Error updating role:",b),alert("Erreur lors de la mise  jour du rle")}},g=e.filter(m=>{var N,A;const T=((N=m.displayName)==null?void 0:N.toLowerCase().includes(i.toLowerCase()))||((A=m.email)==null?void 0:A.toLowerCase().includes(i.toLowerCase())),b=l==="all"||m.role===l;return T&&b});return u.jsxs("div",{className:"space-y-4",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),u.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"relative",children:[u.jsx(EI,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),u.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:m=>o(m.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),u.jsxs("select",{value:l,onChange:m=>c(m.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[u.jsx("option",{value:"all",children:"Tous les rles"}),u.jsx("option",{value:"student",children:"tudiants"}),u.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),r?u.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),u.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):g.length===0?u.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:u.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):u.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:u.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[u.jsx("thead",{className:"bg-gray-50",children:u.jsxs("tr",{children:[u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),u.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),u.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),u.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(m=>{var T,b,N;return u.jsxs("tr",{className:"hover:bg-gray-50",children:[u.jsx("td",{className:"px-6 py-4",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:m.photoURL?u.jsx("img",{src:m.photoURL,alt:m.displayName,className:"h-10 w-10 rounded-full"}):u.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:u.jsx(Qm,{className:"w-6 h-6 text-green-600"})})}),u.jsx("div",{className:"ml-4",children:u.jsx("div",{className:"text-sm font-medium text-gray-900",children:m.displayName||"Sans nom"})})]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:m.email}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:u.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${m.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:m.role==="admin"?u.jsxs(u.Fragment,{children:[u.jsx(TI,{className:"w-3 h-3 mr-1"}),"Admin"]}):u.jsxs(u.Fragment,{children:[u.jsx(xt,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((T=m.purchasedCourses)==null?void 0:T.length)||0}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:u.jsxs("div",{className:"flex items-center",children:[u.jsx(RL,{className:"w-4 h-4 mr-1"}),((N=(b=m.createdAt)==null?void 0:b.toDate)==null?void 0:N.call(b).toLocaleDateString())||"N/A"]})}),u.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:u.jsx("button",{onClick:()=>f(m.id,m.role),className:`${m.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:m.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},m.id)})})]})}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),u.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(m=>m.role==="student").length})]}),u.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[u.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),u.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(m=>m.role==="admin").length})]})]})]})}function e_(){const{userProfile:t}=Zt(),[e,n]=O.useState("overview"),[r,s]=O.useState(!1),[i,o]=O.useState(null),[l,c]=O.useState([]),d=[{id:"overview",name:"Vue d'ensemble",icon:kL},{id:"courses",name:"Cours",icon:xt},{id:"users",name:"Utilisateurs",icon:Bc},{id:"settings",name:"Paramtres",icon:HL}],f=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],g=()=>{switch(e){case"overview":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(m=>u.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:u.jsxs("div",{className:"flex items-center justify-between",children:[u.jsxs("div",{children:[u.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.name}),u.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),u.jsx("div",{className:`text-sm font-medium ${m.changeType==="positive"?"text-green-600":"text-red-600"}`,children:m.change})]})},m.name))}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsx("div",{className:"md:col-span-2",children:u.jsx(UV,{onCreate:m=>c(T=>[m,...T])})}),u.jsx("div",{children:u.jsxs("div",{className:"bg-white rounded-lg shadow",children:[u.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:u.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),u.jsx("div",{className:"p-4",children:u.jsx($V,{items:l})})]})})]})]});case"courses":return u.jsx("div",{className:"space-y-6",children:r?u.jsx(zV,{courseId:i==null?void 0:i.id,onSave:()=>{s(!1),o(null)},onCancel:()=>{s(!1),o(null)}}):u.jsx(BV,{onEdit:m=>{o(m),s(!0)},onAddNew:()=>{o(null),s(!0)}})});case"users":return u.jsx(qV,{});case"settings":return u.jsxs("div",{className:"space-y-6",children:[u.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),u.jsx("div",{className:"bg-white rounded-lg shadow",children:u.jsx("div",{className:"p-6",children:u.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return u.jsxs("div",{className:"min-h-screen bg-gray-50",children:[u.jsx("div",{className:"bg-white shadow-sm",children:u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:u.jsx("div",{className:"flex items-center justify-between",children:u.jsxs("div",{children:[u.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),u.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",t==null?void 0:t.displayName]})]})})})}),u.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:u.jsxs("div",{className:"flex space-x-8",children:[u.jsx("div",{className:"w-64",children:u.jsx("nav",{className:"space-y-1",children:d.map(m=>{const T=m.icon;return u.jsxs("button",{onClick:()=>n(m.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${e===m.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[u.jsx(T,{className:"w-5 h-5 mr-3"}),m.name]},m.id)})})}),u.jsx("div",{className:"flex-1",children:g()})]})})]})}function HV(){return u.jsx(mP,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:u.jsx(IL,{children:u.jsxs(aP,{children:[u.jsx(_t,{path:"/login",element:u.jsx(QL,{})}),u.jsx(_t,{path:"/register",element:u.jsx(YL,{})}),u.jsx(_t,{path:"/forgot-password",element:u.jsx(XL,{})}),u.jsx(_t,{path:"/",element:u.jsx(n4,{})}),u.jsx(_t,{path:"/courses",element:u.jsx(c4,{})}),u.jsx(_t,{path:"/courses/:id",element:u.jsx(d4,{})}),u.jsx(_t,{path:"/payment/success",element:u.jsx(MV,{})}),u.jsx(_t,{path:"/payment/cancel",element:u.jsx(VV,{})}),u.jsx(_t,{path:"/profile",element:u.jsx(wo,{children:u.jsx(r4,{})})}),u.jsx(_t,{path:II,element:u.jsx(wo,{adminOnly:!0,children:u.jsx(e_,{})})}),u.jsx(_t,{path:JL,element:u.jsx(wo,{adminOnly:!0,children:u.jsx(e_,{})})}),u.jsx(_t,{path:"/my-courses",element:u.jsx(wo,{children:u.jsx(LV,{})})}),u.jsx(_t,{path:"/course/:courseId/view",element:u.jsx(wo,{children:u.jsx(DV,{})})}),u.jsx(_t,{path:"*",element:u.jsx(af,{to:"/",replace:!0})})]})})})}hh.createRoot(document.getElementById("root")).render(u.jsx(h_.StrictMode,{children:u.jsx(HV,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{St as _,t_ as g,cM as p,O as r,qc as u};
