var LI=Object.defineProperty;var RI=(t,e,r)=>e in t?LI(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var or=(t,e,r)=>RI(t,typeof e!="symbol"?e+"":e,r);function OI(t,e){for(var r=0;r<e.length;r++){const n=e[r];if(typeof n!="string"&&!Array.isArray(n)){for(const s in n)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(n,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>n[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();var E0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function HN(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function DI(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var r=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};r.prototype=e.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var s=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(r,n,s.get?s:{enumerable:!0,get:function(){return t[n]}})}),r}var WN={exports:{}},cg={},GN={exports:{}},Mt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yf=Symbol.for("react.element"),MI=Symbol.for("react.portal"),FI=Symbol.for("react.fragment"),UI=Symbol.for("react.strict_mode"),VI=Symbol.for("react.profiler"),BI=Symbol.for("react.provider"),zI=Symbol.for("react.context"),qI=Symbol.for("react.forward_ref"),$I=Symbol.for("react.suspense"),HI=Symbol.for("react.memo"),WI=Symbol.for("react.lazy"),Iw=Symbol.iterator;function GI(t){return t===null||typeof t!="object"?null:(t=Iw&&t[Iw]||t["@@iterator"],typeof t=="function"?t:null)}var KN={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},QN=Object.assign,YN={};function gh(t,e,r){this.props=t,this.context=e,this.refs=YN,this.updater=r||KN}gh.prototype.isReactComponent={};gh.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};gh.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function XN(){}XN.prototype=gh.prototype;function S2(t,e,r){this.props=t,this.context=e,this.refs=YN,this.updater=r||KN}var T2=S2.prototype=new XN;T2.constructor=S2;QN(T2,gh.prototype);T2.isPureReactComponent=!0;var kw=Array.isArray,JN=Object.prototype.hasOwnProperty,I2={current:null},ZN={key:!0,ref:!0,__self:!0,__source:!0};function e4(t,e,r){var n,s={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)JN.call(e,n)&&!ZN.hasOwnProperty(n)&&(s[n]=e[n]);var a=arguments.length-2;if(a===1)s.children=r;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];s.children=l}if(t&&t.defaultProps)for(n in a=t.defaultProps,a)s[n]===void 0&&(s[n]=a[n]);return{$$typeof:yf,type:t,key:i,ref:o,props:s,_owner:I2.current}}function KI(t,e){return{$$typeof:yf,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function k2(t){return typeof t=="object"&&t!==null&&t.$$typeof===yf}function QI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(r){return e[r]})}var Pw=/\/+/g;function A0(t,e){return typeof t=="object"&&t!==null&&t.key!=null?QI(""+t.key):e.toString(36)}function Dp(t,e,r,n,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yf:case MI:o=!0}}if(o)return o=t,s=s(o),t=n===""?"."+A0(o,0):n,kw(s)?(r="",t!=null&&(r=t.replace(Pw,"$&/")+"/"),Dp(s,e,r,"",function(u){return u})):s!=null&&(k2(s)&&(s=KI(s,r+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(Pw,"$&/")+"/")+t)),e.push(s)),1;if(o=0,n=n===""?".":n+":",kw(t))for(var a=0;a<t.length;a++){i=t[a];var l=n+A0(i,a);o+=Dp(i,e,r,l,s)}else if(l=GI(t),typeof l=="function")for(t=l.call(t),a=0;!(i=t.next()).done;)i=i.value,l=n+A0(i,a++),o+=Dp(i,e,r,l,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function sp(t,e,r){if(t==null)return t;var n=[],s=0;return Dp(t,n,"","",function(i){return e.call(r,i,s++)}),n}function YI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(r){(t._status===0||t._status===-1)&&(t._status=1,t._result=r)},function(r){(t._status===0||t._status===-1)&&(t._status=2,t._result=r)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Ts={current:null},Mp={transition:null},XI={ReactCurrentDispatcher:Ts,ReactCurrentBatchConfig:Mp,ReactCurrentOwner:I2};function t4(){throw Error("act(...) is not supported in production builds of React.")}Mt.Children={map:sp,forEach:function(t,e,r){sp(t,function(){e.apply(this,arguments)},r)},count:function(t){var e=0;return sp(t,function(){e++}),e},toArray:function(t){return sp(t,function(e){return e})||[]},only:function(t){if(!k2(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Mt.Component=gh;Mt.Fragment=FI;Mt.Profiler=VI;Mt.PureComponent=S2;Mt.StrictMode=UI;Mt.Suspense=$I;Mt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=XI;Mt.act=t4;Mt.cloneElement=function(t,e,r){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=QN({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=I2.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)JN.call(e,l)&&!ZN.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=r;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];n.children=a}return{$$typeof:yf,type:t.type,key:s,ref:i,props:n,_owner:o}};Mt.createContext=function(t){return t={$$typeof:zI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:BI,_context:t},t.Consumer=t};Mt.createElement=e4;Mt.createFactory=function(t){var e=e4.bind(null,t);return e.type=t,e};Mt.createRef=function(){return{current:null}};Mt.forwardRef=function(t){return{$$typeof:qI,render:t}};Mt.isValidElement=k2;Mt.lazy=function(t){return{$$typeof:WI,_payload:{_status:-1,_result:t},_init:YI}};Mt.memo=function(t,e){return{$$typeof:HI,type:t,compare:e===void 0?null:e}};Mt.startTransition=function(t){var e=Mp.transition;Mp.transition={};try{t()}finally{Mp.transition=e}};Mt.unstable_act=t4;Mt.useCallback=function(t,e){return Ts.current.useCallback(t,e)};Mt.useContext=function(t){return Ts.current.useContext(t)};Mt.useDebugValue=function(){};Mt.useDeferredValue=function(t){return Ts.current.useDeferredValue(t)};Mt.useEffect=function(t,e){return Ts.current.useEffect(t,e)};Mt.useId=function(){return Ts.current.useId()};Mt.useImperativeHandle=function(t,e,r){return Ts.current.useImperativeHandle(t,e,r)};Mt.useInsertionEffect=function(t,e){return Ts.current.useInsertionEffect(t,e)};Mt.useLayoutEffect=function(t,e){return Ts.current.useLayoutEffect(t,e)};Mt.useMemo=function(t,e){return Ts.current.useMemo(t,e)};Mt.useReducer=function(t,e,r){return Ts.current.useReducer(t,e,r)};Mt.useRef=function(t){return Ts.current.useRef(t)};Mt.useState=function(t){return Ts.current.useState(t)};Mt.useSyncExternalStore=function(t,e,r){return Ts.current.useSyncExternalStore(t,e,r)};Mt.useTransition=function(){return Ts.current.useTransition()};Mt.version="18.3.1";GN.exports=Mt;var ne=GN.exports;const r4=HN(ne),JI=OI({__proto__:null,default:r4},[ne]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZI=ne,ek=Symbol.for("react.element"),tk=Symbol.for("react.fragment"),rk=Object.prototype.hasOwnProperty,nk=ZI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,sk={key:!0,ref:!0,__self:!0,__source:!0};function n4(t,e,r){var n,s={},i=null,o=null;r!==void 0&&(i=""+r),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)rk.call(e,n)&&!sk.hasOwnProperty(n)&&(s[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)s[n]===void 0&&(s[n]=e[n]);return{$$typeof:ek,type:t,key:i,ref:o,props:s,_owner:nk.current}}cg.Fragment=tk;cg.jsx=n4;cg.jsxs=n4;WN.exports=cg;var c=WN.exports,V1={},s4={exports:{}},fi={},i4={exports:{}},o4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(ee,ue){var _e=ee.length;ee.push(ue);e:for(;0<_e;){var we=_e-1>>>1,U=ee[we];if(0<s(U,ue))ee[we]=ue,ee[_e]=U,_e=we;else break e}}function r(ee){return ee.length===0?null:ee[0]}function n(ee){if(ee.length===0)return null;var ue=ee[0],_e=ee.pop();if(_e!==ue){ee[0]=_e;e:for(var we=0,U=ee.length,G=U>>>1;we<G;){var J=2*(we+1)-1,re=ee[J],ie=J+1,he=ee[ie];if(0>s(re,_e))ie<U&&0>s(he,re)?(ee[we]=he,ee[ie]=_e,we=ie):(ee[we]=re,ee[J]=_e,we=J);else if(ie<U&&0>s(he,_e))ee[we]=he,ee[ie]=_e,we=ie;else break e}}return ue}function s(ee,ue){var _e=ee.sortIndex-ue.sortIndex;return _e!==0?_e:ee.id-ue.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],f=1,g=null,y=3,m=!1,E=!1,b=!1,A=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,T=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(ee){for(var ue=r(u);ue!==null;){if(ue.callback===null)n(u);else if(ue.startTime<=ee)n(u),ue.sortIndex=ue.expirationTime,e(l,ue);else break;ue=r(u)}}function k(ee){if(b=!1,I(ee),!E)if(r(l)!==null)E=!0,le(H);else{var ue=r(u);ue!==null&&ye(k,ue.startTime-ee)}}function H(ee,ue){E=!1,b&&(b=!1,x(P),P=-1),m=!0;var _e=y;try{for(I(ue),g=r(l);g!==null&&(!(g.expirationTime>ue)||ee&&!N());){var we=g.callback;if(typeof we=="function"){g.callback=null,y=g.priorityLevel;var U=we(g.expirationTime<=ue);ue=t.unstable_now(),typeof U=="function"?g.callback=U:g===r(l)&&n(l),I(ue)}else n(l);g=r(l)}if(g!==null)var G=!0;else{var J=r(u);J!==null&&ye(k,J.startTime-ue),G=!1}return G}finally{g=null,y=_e,m=!1}}var Z=!1,F=null,P=-1,C=5,O=-1;function N(){return!(t.unstable_now()-O<C)}function R(){if(F!==null){var ee=t.unstable_now();O=ee;var ue=!0;try{ue=F(!0,ee)}finally{ue?L():(Z=!1,F=null)}}else Z=!1}var L;if(typeof T=="function")L=function(){T(R)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,fe=X.port2;X.port1.onmessage=R,L=function(){fe.postMessage(null)}}else L=function(){A(R,0)};function le(ee){F=ee,Z||(Z=!0,L())}function ye(ee,ue){P=A(function(){ee(t.unstable_now())},ue)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(ee){ee.callback=null},t.unstable_continueExecution=function(){E||m||(E=!0,le(H))},t.unstable_forceFrameRate=function(ee){0>ee||125<ee?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<ee?Math.floor(1e3/ee):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return r(l)},t.unstable_next=function(ee){switch(y){case 1:case 2:case 3:var ue=3;break;default:ue=y}var _e=y;y=ue;try{return ee()}finally{y=_e}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(ee,ue){switch(ee){case 1:case 2:case 3:case 4:case 5:break;default:ee=3}var _e=y;y=ee;try{return ue()}finally{y=_e}},t.unstable_scheduleCallback=function(ee,ue,_e){var we=t.unstable_now();switch(typeof _e=="object"&&_e!==null?(_e=_e.delay,_e=typeof _e=="number"&&0<_e?we+_e:we):_e=we,ee){case 1:var U=-1;break;case 2:U=250;break;case 5:U=1073741823;break;case 4:U=1e4;break;default:U=5e3}return U=_e+U,ee={id:f++,callback:ue,priorityLevel:ee,startTime:_e,expirationTime:U,sortIndex:-1},_e>we?(ee.sortIndex=_e,e(u,ee),r(l)===null&&ee===r(u)&&(b?(x(P),P=-1):b=!0,ye(k,_e-we))):(ee.sortIndex=U,e(l,ee),E||m||(E=!0,le(H))),ee},t.unstable_shouldYield=N,t.unstable_wrapCallback=function(ee){var ue=y;return function(){var _e=y;y=ue;try{return ee.apply(this,arguments)}finally{y=_e}}}})(o4);i4.exports=o4;var ik=i4.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ok=ne,di=ik;function Re(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,r=1;r<arguments.length;r++)e+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a4=new Set,Rd={};function Oc(t,e){Ku(t,e),Ku(t+"Capture",e)}function Ku(t,e){for(Rd[t]=e,t=0;t<e.length;t++)a4.add(e[t])}var xa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),B1=Object.prototype.hasOwnProperty,ak=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Cw={},jw={};function lk(t){return B1.call(jw,t)?!0:B1.call(Cw,t)?!1:ak.test(t)?jw[t]=!0:(Cw[t]=!0,!1)}function ck(t,e,r,n){if(r!==null&&r.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:r!==null?!r.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function uk(t,e,r,n){if(e===null||typeof e>"u"||ck(t,e,r,n))return!0;if(n)return!1;if(r!==null)switch(r.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Is(t,e,r,n,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=s,this.mustUseProperty=r,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var Hn={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Hn[t]=new Is(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Hn[e]=new Is(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Hn[t]=new Is(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Hn[t]=new Is(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Hn[t]=new Is(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Hn[t]=new Is(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Hn[t]=new Is(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Hn[t]=new Is(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Hn[t]=new Is(t,5,!1,t.toLowerCase(),null,!1,!1)});var P2=/[\-:]([a-z])/g;function C2(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(P2,C2);Hn[e]=new Is(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(P2,C2);Hn[e]=new Is(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(P2,C2);Hn[e]=new Is(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Hn[t]=new Is(t,1,!1,t.toLowerCase(),null,!1,!1)});Hn.xlinkHref=new Is("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Hn[t]=new Is(t,1,!1,t.toLowerCase(),null,!0,!0)});function j2(t,e,r,n){var s=Hn.hasOwnProperty(e)?Hn[e]:null;(s!==null?s.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(uk(e,r,s,n)&&(r=null),n||s===null?lk(e)&&(r===null?t.removeAttribute(e):t.setAttribute(e,""+r)):s.mustUseProperty?t[s.propertyName]=r===null?s.type===3?!1:"":r:(e=s.attributeName,n=s.attributeNamespace,r===null?t.removeAttribute(e):(s=s.type,r=s===3||s===4&&r===!0?"":""+r,n?t.setAttributeNS(n,e,r):t.setAttribute(e,r))))}var Ia=ok.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ip=Symbol.for("react.element"),vu=Symbol.for("react.portal"),wu=Symbol.for("react.fragment"),L2=Symbol.for("react.strict_mode"),z1=Symbol.for("react.profiler"),l4=Symbol.for("react.provider"),c4=Symbol.for("react.context"),R2=Symbol.for("react.forward_ref"),q1=Symbol.for("react.suspense"),$1=Symbol.for("react.suspense_list"),O2=Symbol.for("react.memo"),sl=Symbol.for("react.lazy"),u4=Symbol.for("react.offscreen"),Lw=Symbol.iterator;function Kh(t){return t===null||typeof t!="object"?null:(t=Lw&&t[Lw]||t["@@iterator"],typeof t=="function"?t:null)}var Ur=Object.assign,S0;function ad(t){if(S0===void 0)try{throw Error()}catch(r){var e=r.stack.trim().match(/\n( *(at )?)/);S0=e&&e[1]||""}return`
`+S0+t}var T0=!1;function I0(t,e){if(!t||T0)return"";T0=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var s=u.stack.split(`
`),i=n.stack.split(`
`),o=s.length-1,a=i.length-1;1<=o&&0<=a&&s[o]!==i[a];)a--;for(;1<=o&&0<=a;o--,a--)if(s[o]!==i[a]){if(o!==1||a!==1)do if(o--,a--,0>a||s[o]!==i[a]){var l=`
`+s[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{T0=!1,Error.prepareStackTrace=r}return(t=t?t.displayName||t.name:"")?ad(t):""}function hk(t){switch(t.tag){case 5:return ad(t.type);case 16:return ad("Lazy");case 13:return ad("Suspense");case 19:return ad("SuspenseList");case 0:case 2:case 15:return t=I0(t.type,!1),t;case 11:return t=I0(t.type.render,!1),t;case 1:return t=I0(t.type,!0),t;default:return""}}function H1(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case wu:return"Fragment";case vu:return"Portal";case z1:return"Profiler";case L2:return"StrictMode";case q1:return"Suspense";case $1:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c4:return(t.displayName||"Context")+".Consumer";case l4:return(t._context.displayName||"Context")+".Provider";case R2:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case O2:return e=t.displayName||null,e!==null?e:H1(t.type)||"Memo";case sl:e=t._payload,t=t._init;try{return H1(t(e))}catch{}}return null}function dk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H1(e);case 8:return e===L2?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function kl(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h4(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fk(t){var e=h4(t)?"checked":"value",r=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var s=r.get,i=r.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:r.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function op(t){t._valueTracker||(t._valueTracker=fk(t))}function d4(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var r=e.getValue(),n="";return t&&(n=h4(t)?t.checked?"true":"false":t.value),t=n,t!==r?(e.setValue(t),!0):!1}function fm(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function W1(t,e){var r=e.checked;return Ur({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??t._wrapperState.initialChecked})}function Rw(t,e){var r=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;r=kl(e.value!=null?e.value:r),t._wrapperState={initialChecked:n,initialValue:r,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f4(t,e){e=e.checked,e!=null&&j2(t,"checked",e,!1)}function G1(t,e){f4(t,e);var r=kl(e.value),n=e.type;if(r!=null)n==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+r):t.value!==""+r&&(t.value=""+r);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?K1(t,e.type,r):e.hasOwnProperty("defaultValue")&&K1(t,e.type,kl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Ow(t,e,r){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,r||e===t.value||(t.value=e),t.defaultValue=e}r=t.name,r!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,r!==""&&(t.name=r)}function K1(t,e,r){(e!=="number"||fm(t.ownerDocument)!==t)&&(r==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+r&&(t.defaultValue=""+r))}var ld=Array.isArray;function Cu(t,e,r,n){if(t=t.options,e){e={};for(var s=0;s<r.length;s++)e["$"+r[s]]=!0;for(r=0;r<t.length;r++)s=e.hasOwnProperty("$"+t[r].value),t[r].selected!==s&&(t[r].selected=s),s&&n&&(t[r].defaultSelected=!0)}else{for(r=""+kl(r),e=null,s=0;s<t.length;s++){if(t[s].value===r){t[s].selected=!0,n&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Q1(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Re(91));return Ur({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Dw(t,e){var r=e.value;if(r==null){if(r=e.children,e=e.defaultValue,r!=null){if(e!=null)throw Error(Re(92));if(ld(r)){if(1<r.length)throw Error(Re(93));r=r[0]}e=r}e==null&&(e=""),r=e}t._wrapperState={initialValue:kl(r)}}function p4(t,e){var r=kl(e.value),n=kl(e.defaultValue);r!=null&&(r=""+r,r!==t.value&&(t.value=r),e.defaultValue==null&&t.defaultValue!==r&&(t.defaultValue=r)),n!=null&&(t.defaultValue=""+n)}function Mw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m4(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Y1(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m4(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ap,g4=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,r,n,s){MSApp.execUnsafeLocalFunction(function(){return t(e,r,n,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ap=ap||document.createElement("div"),ap.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ap.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Od(t,e){if(e){var r=t.firstChild;if(r&&r===t.lastChild&&r.nodeType===3){r.nodeValue=e;return}}t.textContent=e}var vd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pk=["Webkit","ms","Moz","O"];Object.keys(vd).forEach(function(t){pk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),vd[e]=vd[t]})});function y4(t,e,r){return e==null||typeof e=="boolean"||e===""?"":r||typeof e!="number"||e===0||vd.hasOwnProperty(t)&&vd[t]?(""+e).trim():e+"px"}function v4(t,e){t=t.style;for(var r in e)if(e.hasOwnProperty(r)){var n=r.indexOf("--")===0,s=y4(r,e[r],n);r==="float"&&(r="cssFloat"),n?t.setProperty(r,s):t[r]=s}}var mk=Ur({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function X1(t,e){if(e){if(mk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Re(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Re(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Re(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Re(62))}}function J1(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Z1=null;function D2(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ey=null,ju=null,Lu=null;function Fw(t){if(t=xf(t)){if(typeof ey!="function")throw Error(Re(280));var e=t.stateNode;e&&(e=pg(e),ey(t.stateNode,t.type,e))}}function w4(t){ju?Lu?Lu.push(t):Lu=[t]:ju=t}function x4(){if(ju){var t=ju,e=Lu;if(Lu=ju=null,Fw(t),e)for(t=0;t<e.length;t++)Fw(e[t])}}function _4(t,e){return t(e)}function b4(){}var k0=!1;function N4(t,e,r){if(k0)return t(e,r);k0=!0;try{return _4(t,e,r)}finally{k0=!1,(ju!==null||Lu!==null)&&(b4(),x4())}}function Dd(t,e){var r=t.stateNode;if(r===null)return null;var n=pg(r);if(n===null)return null;r=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(r&&typeof r!="function")throw Error(Re(231,e,typeof r));return r}var ty=!1;if(xa)try{var Qh={};Object.defineProperty(Qh,"passive",{get:function(){ty=!0}}),window.addEventListener("test",Qh,Qh),window.removeEventListener("test",Qh,Qh)}catch{ty=!1}function gk(t,e,r,n,s,i,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(r,u)}catch(f){this.onError(f)}}var wd=!1,pm=null,mm=!1,ry=null,yk={onError:function(t){wd=!0,pm=t}};function vk(t,e,r,n,s,i,o,a,l){wd=!1,pm=null,gk.apply(yk,arguments)}function wk(t,e,r,n,s,i,o,a,l){if(vk.apply(this,arguments),wd){if(wd){var u=pm;wd=!1,pm=null}else throw Error(Re(198));mm||(mm=!0,ry=u)}}function Dc(t){var e=t,r=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(r=e.return),t=e.return;while(t)}return e.tag===3?r:null}function E4(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Uw(t){if(Dc(t)!==t)throw Error(Re(188))}function xk(t){var e=t.alternate;if(!e){if(e=Dc(t),e===null)throw Error(Re(188));return e!==t?null:t}for(var r=t,n=e;;){var s=r.return;if(s===null)break;var i=s.alternate;if(i===null){if(n=s.return,n!==null){r=n;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===r)return Uw(s),t;if(i===n)return Uw(s),e;i=i.sibling}throw Error(Re(188))}if(r.return!==n.return)r=s,n=i;else{for(var o=!1,a=s.child;a;){if(a===r){o=!0,r=s,n=i;break}if(a===n){o=!0,n=s,r=i;break}a=a.sibling}if(!o){for(a=i.child;a;){if(a===r){o=!0,r=i,n=s;break}if(a===n){o=!0,n=i,r=s;break}a=a.sibling}if(!o)throw Error(Re(189))}}if(r.alternate!==n)throw Error(Re(190))}if(r.tag!==3)throw Error(Re(188));return r.stateNode.current===r?t:e}function A4(t){return t=xk(t),t!==null?S4(t):null}function S4(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=S4(t);if(e!==null)return e;t=t.sibling}return null}var T4=di.unstable_scheduleCallback,Vw=di.unstable_cancelCallback,_k=di.unstable_shouldYield,bk=di.unstable_requestPaint,rn=di.unstable_now,Nk=di.unstable_getCurrentPriorityLevel,M2=di.unstable_ImmediatePriority,I4=di.unstable_UserBlockingPriority,gm=di.unstable_NormalPriority,Ek=di.unstable_LowPriority,k4=di.unstable_IdlePriority,ug=null,Co=null;function Ak(t){if(Co&&typeof Co.onCommitFiberRoot=="function")try{Co.onCommitFiberRoot(ug,t,void 0,(t.current.flags&128)===128)}catch{}}var eo=Math.clz32?Math.clz32:Ik,Sk=Math.log,Tk=Math.LN2;function Ik(t){return t>>>=0,t===0?32:31-(Sk(t)/Tk|0)|0}var lp=64,cp=4194304;function cd(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function ym(t,e){var r=t.pendingLanes;if(r===0)return 0;var n=0,s=t.suspendedLanes,i=t.pingedLanes,o=r&268435455;if(o!==0){var a=o&~s;a!==0?n=cd(a):(i&=o,i!==0&&(n=cd(i)))}else o=r&~s,o!==0?n=cd(o):i!==0&&(n=cd(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&s)&&(s=n&-n,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(n&4&&(n|=r&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)r=31-eo(e),s=1<<r,n|=t[r],e&=~s;return n}function kk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Pk(t,e){for(var r=t.suspendedLanes,n=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-eo(i),a=1<<o,l=s[o];l===-1?(!(a&r)||a&n)&&(s[o]=kk(a,e)):l<=e&&(t.expiredLanes|=a),i&=~a}}function ny(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function P4(){var t=lp;return lp<<=1,!(lp&4194240)&&(lp=64),t}function P0(t){for(var e=[],r=0;31>r;r++)e.push(t);return e}function vf(t,e,r){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-eo(e),t[e]=r}function Ck(t,e){var r=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<r;){var s=31-eo(r),i=1<<s;e[s]=0,n[s]=-1,t[s]=-1,r&=~i}}function F2(t,e){var r=t.entangledLanes|=e;for(t=t.entanglements;r;){var n=31-eo(r),s=1<<n;s&e|t[n]&e&&(t[n]|=e),r&=~s}}var lr=0;function C4(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var j4,U2,L4,R4,O4,sy=!1,up=[],gl=null,yl=null,vl=null,Md=new Map,Fd=new Map,ol=[],jk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bw(t,e){switch(t){case"focusin":case"focusout":gl=null;break;case"dragenter":case"dragleave":yl=null;break;case"mouseover":case"mouseout":vl=null;break;case"pointerover":case"pointerout":Md.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fd.delete(e.pointerId)}}function Yh(t,e,r,n,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:r,eventSystemFlags:n,nativeEvent:i,targetContainers:[s]},e!==null&&(e=xf(e),e!==null&&U2(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function Lk(t,e,r,n,s){switch(e){case"focusin":return gl=Yh(gl,t,e,r,n,s),!0;case"dragenter":return yl=Yh(yl,t,e,r,n,s),!0;case"mouseover":return vl=Yh(vl,t,e,r,n,s),!0;case"pointerover":var i=s.pointerId;return Md.set(i,Yh(Md.get(i)||null,t,e,r,n,s)),!0;case"gotpointercapture":return i=s.pointerId,Fd.set(i,Yh(Fd.get(i)||null,t,e,r,n,s)),!0}return!1}function D4(t){var e=hc(t.target);if(e!==null){var r=Dc(e);if(r!==null){if(e=r.tag,e===13){if(e=E4(r),e!==null){t.blockedOn=e,O4(t.priority,function(){L4(r)});return}}else if(e===3&&r.stateNode.current.memoizedState.isDehydrated){t.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Fp(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var r=iy(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(r===null){r=t.nativeEvent;var n=new r.constructor(r.type,r);Z1=n,r.target.dispatchEvent(n),Z1=null}else return e=xf(r),e!==null&&U2(e),t.blockedOn=r,!1;e.shift()}return!0}function zw(t,e,r){Fp(t)&&r.delete(e)}function Rk(){sy=!1,gl!==null&&Fp(gl)&&(gl=null),yl!==null&&Fp(yl)&&(yl=null),vl!==null&&Fp(vl)&&(vl=null),Md.forEach(zw),Fd.forEach(zw)}function Xh(t,e){t.blockedOn===e&&(t.blockedOn=null,sy||(sy=!0,di.unstable_scheduleCallback(di.unstable_NormalPriority,Rk)))}function Ud(t){function e(s){return Xh(s,t)}if(0<up.length){Xh(up[0],t);for(var r=1;r<up.length;r++){var n=up[r];n.blockedOn===t&&(n.blockedOn=null)}}for(gl!==null&&Xh(gl,t),yl!==null&&Xh(yl,t),vl!==null&&Xh(vl,t),Md.forEach(e),Fd.forEach(e),r=0;r<ol.length;r++)n=ol[r],n.blockedOn===t&&(n.blockedOn=null);for(;0<ol.length&&(r=ol[0],r.blockedOn===null);)D4(r),r.blockedOn===null&&ol.shift()}var Ru=Ia.ReactCurrentBatchConfig,vm=!0;function Ok(t,e,r,n){var s=lr,i=Ru.transition;Ru.transition=null;try{lr=1,V2(t,e,r,n)}finally{lr=s,Ru.transition=i}}function Dk(t,e,r,n){var s=lr,i=Ru.transition;Ru.transition=null;try{lr=4,V2(t,e,r,n)}finally{lr=s,Ru.transition=i}}function V2(t,e,r,n){if(vm){var s=iy(t,e,r,n);if(s===null)V0(t,e,n,wm,r),Bw(t,n);else if(Lk(s,t,e,r,n))n.stopPropagation();else if(Bw(t,n),e&4&&-1<jk.indexOf(t)){for(;s!==null;){var i=xf(s);if(i!==null&&j4(i),i=iy(t,e,r,n),i===null&&V0(t,e,n,wm,r),i===s)break;s=i}s!==null&&n.stopPropagation()}else V0(t,e,n,null,r)}}var wm=null;function iy(t,e,r,n){if(wm=null,t=D2(n),t=hc(t),t!==null)if(e=Dc(t),e===null)t=null;else if(r=e.tag,r===13){if(t=E4(e),t!==null)return t;t=null}else if(r===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wm=t,null}function M4(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nk()){case M2:return 1;case I4:return 4;case gm:case Ek:return 16;case k4:return 536870912;default:return 16}default:return 16}}var hl=null,B2=null,Up=null;function F4(){if(Up)return Up;var t,e=B2,r=e.length,n,s="value"in hl?hl.value:hl.textContent,i=s.length;for(t=0;t<r&&e[t]===s[t];t++);var o=r-t;for(n=1;n<=o&&e[r-n]===s[i-n];n++);return Up=s.slice(t,1<n?1-n:void 0)}function Vp(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function hp(){return!0}function qw(){return!1}function pi(t){function e(r,n,s,i,o){this._reactName=r,this._targetInst=s,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(r=t[a],this[a]=r?r(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?hp:qw,this.isPropagationStopped=qw,this}return Ur(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=hp)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=hp)},persist:function(){},isPersistent:hp}),e}var yh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},z2=pi(yh),wf=Ur({},yh,{view:0,detail:0}),Mk=pi(wf),C0,j0,Jh,hg=Ur({},wf,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:q2,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Jh&&(Jh&&t.type==="mousemove"?(C0=t.screenX-Jh.screenX,j0=t.screenY-Jh.screenY):j0=C0=0,Jh=t),C0)},movementY:function(t){return"movementY"in t?t.movementY:j0}}),$w=pi(hg),Fk=Ur({},hg,{dataTransfer:0}),Uk=pi(Fk),Vk=Ur({},wf,{relatedTarget:0}),L0=pi(Vk),Bk=Ur({},yh,{animationName:0,elapsedTime:0,pseudoElement:0}),zk=pi(Bk),qk=Ur({},yh,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),$k=pi(qk),Hk=Ur({},yh,{data:0}),Hw=pi(Hk),Wk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Qk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kk[t])?!!e[t]:!1}function q2(){return Qk}var Yk=Ur({},wf,{key:function(t){if(t.key){var e=Wk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Vp(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:q2,charCode:function(t){return t.type==="keypress"?Vp(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Vp(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Xk=pi(Yk),Jk=Ur({},hg,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ww=pi(Jk),Zk=Ur({},wf,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:q2}),eP=pi(Zk),tP=Ur({},yh,{propertyName:0,elapsedTime:0,pseudoElement:0}),rP=pi(tP),nP=Ur({},hg,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=pi(nP),iP=[9,13,27,32],$2=xa&&"CompositionEvent"in window,xd=null;xa&&"documentMode"in document&&(xd=document.documentMode);var oP=xa&&"TextEvent"in window&&!xd,U4=xa&&(!$2||xd&&8<xd&&11>=xd),Gw=" ",Kw=!1;function V4(t,e){switch(t){case"keyup":return iP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function B4(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var xu=!1;function aP(t,e){switch(t){case"compositionend":return B4(e);case"keypress":return e.which!==32?null:(Kw=!0,Gw);case"textInput":return t=e.data,t===Gw&&Kw?null:t;default:return null}}function lP(t,e){if(xu)return t==="compositionend"||!$2&&V4(t,e)?(t=F4(),Up=B2=hl=null,xu=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U4&&e.locale!=="ko"?null:e.data;default:return null}}var cP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Qw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!cP[t.type]:e==="textarea"}function z4(t,e,r,n){w4(n),e=xm(e,"onChange"),0<e.length&&(r=new z2("onChange","change",null,r,n),t.push({event:r,listeners:e}))}var _d=null,Vd=null;function uP(t){Z4(t,0)}function dg(t){var e=Nu(t);if(d4(e))return t}function hP(t,e){if(t==="change")return e}var q4=!1;if(xa){var R0;if(xa){var O0="oninput"in document;if(!O0){var Yw=document.createElement("div");Yw.setAttribute("oninput","return;"),O0=typeof Yw.oninput=="function"}R0=O0}else R0=!1;q4=R0&&(!document.documentMode||9<document.documentMode)}function Xw(){_d&&(_d.detachEvent("onpropertychange",$4),Vd=_d=null)}function $4(t){if(t.propertyName==="value"&&dg(Vd)){var e=[];z4(e,Vd,t,D2(t)),N4(uP,e)}}function dP(t,e,r){t==="focusin"?(Xw(),_d=e,Vd=r,_d.attachEvent("onpropertychange",$4)):t==="focusout"&&Xw()}function fP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return dg(Vd)}function pP(t,e){if(t==="click")return dg(e)}function mP(t,e){if(t==="input"||t==="change")return dg(e)}function gP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var no=typeof Object.is=="function"?Object.is:gP;function Bd(t,e){if(no(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var r=Object.keys(t),n=Object.keys(e);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!B1.call(e,s)||!no(t[s],e[s]))return!1}return!0}function Jw(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zw(t,e){var r=Jw(t);t=0;for(var n;r;){if(r.nodeType===3){if(n=t+r.textContent.length,t<=e&&n>=e)return{node:r,offset:e-t};t=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jw(r)}}function H4(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H4(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W4(){for(var t=window,e=fm();e instanceof t.HTMLIFrameElement;){try{var r=typeof e.contentWindow.location.href=="string"}catch{r=!1}if(r)t=e.contentWindow;else break;e=fm(t.document)}return e}function H2(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function yP(t){var e=W4(),r=t.focusedElem,n=t.selectionRange;if(e!==r&&r&&r.ownerDocument&&H4(r.ownerDocument.documentElement,r)){if(n!==null&&H2(r)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in r)r.selectionStart=e,r.selectionEnd=Math.min(t,r.value.length);else if(t=(e=r.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=r.textContent.length,i=Math.min(n.start,s);n=n.end===void 0?i:Math.min(n.end,s),!t.extend&&i>n&&(s=n,n=i,i=s),s=Zw(r,i);var o=Zw(r,n);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=r;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<e.length;r++)t=e[r],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var vP=xa&&"documentMode"in document&&11>=document.documentMode,_u=null,oy=null,bd=null,ay=!1;function ex(t,e,r){var n=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;ay||_u==null||_u!==fm(n)||(n=_u,"selectionStart"in n&&H2(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),bd&&Bd(bd,n)||(bd=n,n=xm(oy,"onSelect"),0<n.length&&(e=new z2("onSelect","select",null,e,r),t.push({event:e,listeners:n}),e.target=_u)))}function dp(t,e){var r={};return r[t.toLowerCase()]=e.toLowerCase(),r["Webkit"+t]="webkit"+e,r["Moz"+t]="moz"+e,r}var bu={animationend:dp("Animation","AnimationEnd"),animationiteration:dp("Animation","AnimationIteration"),animationstart:dp("Animation","AnimationStart"),transitionend:dp("Transition","TransitionEnd")},D0={},G4={};xa&&(G4=document.createElement("div").style,"AnimationEvent"in window||(delete bu.animationend.animation,delete bu.animationiteration.animation,delete bu.animationstart.animation),"TransitionEvent"in window||delete bu.transitionend.transition);function fg(t){if(D0[t])return D0[t];if(!bu[t])return t;var e=bu[t],r;for(r in e)if(e.hasOwnProperty(r)&&r in G4)return D0[t]=e[r];return t}var K4=fg("animationend"),Q4=fg("animationiteration"),Y4=fg("animationstart"),X4=fg("transitionend"),J4=new Map,tx="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Fl(t,e){J4.set(t,e),Oc(e,[t])}for(var M0=0;M0<tx.length;M0++){var F0=tx[M0],wP=F0.toLowerCase(),xP=F0[0].toUpperCase()+F0.slice(1);Fl(wP,"on"+xP)}Fl(K4,"onAnimationEnd");Fl(Q4,"onAnimationIteration");Fl(Y4,"onAnimationStart");Fl("dblclick","onDoubleClick");Fl("focusin","onFocus");Fl("focusout","onBlur");Fl(X4,"onTransitionEnd");Ku("onMouseEnter",["mouseout","mouseover"]);Ku("onMouseLeave",["mouseout","mouseover"]);Ku("onPointerEnter",["pointerout","pointerover"]);Ku("onPointerLeave",["pointerout","pointerover"]);Oc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oc("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ud="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_P=new Set("cancel close invalid load scroll toggle".split(" ").concat(ud));function rx(t,e,r){var n=t.type||"unknown-event";t.currentTarget=r,wk(n,e,void 0,t),t.currentTarget=null}function Z4(t,e){e=(e&4)!==0;for(var r=0;r<t.length;r++){var n=t[r],s=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==i&&s.isPropagationStopped())break e;rx(s,a,u),i=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==i&&s.isPropagationStopped())break e;rx(s,a,u),i=l}}}if(mm)throw t=ry,mm=!1,ry=null,t}function Er(t,e){var r=e[dy];r===void 0&&(r=e[dy]=new Set);var n=t+"__bubble";r.has(n)||(e3(e,t,2,!1),r.add(n))}function U0(t,e,r){var n=0;e&&(n|=4),e3(r,t,n,e)}var fp="_reactListening"+Math.random().toString(36).slice(2);function zd(t){if(!t[fp]){t[fp]=!0,a4.forEach(function(r){r!=="selectionchange"&&(_P.has(r)||U0(r,!1,t),U0(r,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fp]||(e[fp]=!0,U0("selectionchange",!1,e))}}function e3(t,e,r,n){switch(M4(e)){case 1:var s=Ok;break;case 4:s=Dk;break;default:s=V2}r=s.bind(null,e,r,t),s=void 0,!ty||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),n?s!==void 0?t.addEventListener(e,r,{capture:!0,passive:s}):t.addEventListener(e,r,!0):s!==void 0?t.addEventListener(e,r,{passive:s}):t.addEventListener(e,r,!1)}function V0(t,e,r,n,s){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===s||a.nodeType===8&&a.parentNode===s)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===s||l.nodeType===8&&l.parentNode===s))return;o=o.return}for(;a!==null;){if(o=hc(a),o===null)return;if(l=o.tag,l===5||l===6){n=i=o;continue e}a=a.parentNode}}n=n.return}N4(function(){var u=i,f=D2(r),g=[];e:{var y=J4.get(t);if(y!==void 0){var m=z2,E=t;switch(t){case"keypress":if(Vp(r)===0)break e;case"keydown":case"keyup":m=Xk;break;case"focusin":E="focus",m=L0;break;case"focusout":E="blur",m=L0;break;case"beforeblur":case"afterblur":m=L0;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=$w;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Uk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=eP;break;case K4:case Q4:case Y4:m=zk;break;case X4:m=rP;break;case"scroll":m=Mk;break;case"wheel":m=sP;break;case"copy":case"cut":case"paste":m=$k;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=Ww}var b=(e&4)!==0,A=!b&&t==="scroll",x=b?y!==null?y+"Capture":null:y;b=[];for(var T=u,I;T!==null;){I=T;var k=I.stateNode;if(I.tag===5&&k!==null&&(I=k,x!==null&&(k=Dd(T,x),k!=null&&b.push(qd(T,k,I)))),A)break;T=T.return}0<b.length&&(y=new m(y,E,null,r,f),g.push({event:y,listeners:b}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",y&&r!==Z1&&(E=r.relatedTarget||r.fromElement)&&(hc(E)||E[_a]))break e;if((m||y)&&(y=f.window===f?f:(y=f.ownerDocument)?y.defaultView||y.parentWindow:window,m?(E=r.relatedTarget||r.toElement,m=u,E=E?hc(E):null,E!==null&&(A=Dc(E),E!==A||E.tag!==5&&E.tag!==6)&&(E=null)):(m=null,E=u),m!==E)){if(b=$w,k="onMouseLeave",x="onMouseEnter",T="mouse",(t==="pointerout"||t==="pointerover")&&(b=Ww,k="onPointerLeave",x="onPointerEnter",T="pointer"),A=m==null?y:Nu(m),I=E==null?y:Nu(E),y=new b(k,T+"leave",m,r,f),y.target=A,y.relatedTarget=I,k=null,hc(f)===u&&(b=new b(x,T+"enter",E,r,f),b.target=I,b.relatedTarget=A,k=b),A=k,m&&E)t:{for(b=m,x=E,T=0,I=b;I;I=su(I))T++;for(I=0,k=x;k;k=su(k))I++;for(;0<T-I;)b=su(b),T--;for(;0<I-T;)x=su(x),I--;for(;T--;){if(b===x||x!==null&&b===x.alternate)break t;b=su(b),x=su(x)}b=null}else b=null;m!==null&&nx(g,y,m,b,!1),E!==null&&A!==null&&nx(g,A,E,b,!0)}}e:{if(y=u?Nu(u):window,m=y.nodeName&&y.nodeName.toLowerCase(),m==="select"||m==="input"&&y.type==="file")var H=hP;else if(Qw(y))if(q4)H=mP;else{H=fP;var Z=dP}else(m=y.nodeName)&&m.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(H=pP);if(H&&(H=H(t,u))){z4(g,H,r,f);break e}Z&&Z(t,y,u),t==="focusout"&&(Z=y._wrapperState)&&Z.controlled&&y.type==="number"&&K1(y,"number",y.value)}switch(Z=u?Nu(u):window,t){case"focusin":(Qw(Z)||Z.contentEditable==="true")&&(_u=Z,oy=u,bd=null);break;case"focusout":bd=oy=_u=null;break;case"mousedown":ay=!0;break;case"contextmenu":case"mouseup":case"dragend":ay=!1,ex(g,r,f);break;case"selectionchange":if(vP)break;case"keydown":case"keyup":ex(g,r,f)}var F;if($2)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else xu?V4(t,r)&&(P="onCompositionEnd"):t==="keydown"&&r.keyCode===229&&(P="onCompositionStart");P&&(U4&&r.locale!=="ko"&&(xu||P!=="onCompositionStart"?P==="onCompositionEnd"&&xu&&(F=F4()):(hl=f,B2="value"in hl?hl.value:hl.textContent,xu=!0)),Z=xm(u,P),0<Z.length&&(P=new Hw(P,t,null,r,f),g.push({event:P,listeners:Z}),F?P.data=F:(F=B4(r),F!==null&&(P.data=F)))),(F=oP?aP(t,r):lP(t,r))&&(u=xm(u,"onBeforeInput"),0<u.length&&(f=new Hw("onBeforeInput","beforeinput",null,r,f),g.push({event:f,listeners:u}),f.data=F))}Z4(g,e)})}function qd(t,e,r){return{instance:t,listener:e,currentTarget:r}}function xm(t,e){for(var r=e+"Capture",n=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Dd(t,r),i!=null&&n.unshift(qd(t,i,s)),i=Dd(t,e),i!=null&&n.push(qd(t,i,s))),t=t.return}return n}function su(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function nx(t,e,r,n,s){for(var i=e._reactName,o=[];r!==null&&r!==n;){var a=r,l=a.alternate,u=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&u!==null&&(a=u,s?(l=Dd(r,i),l!=null&&o.unshift(qd(r,l,a))):s||(l=Dd(r,i),l!=null&&o.push(qd(r,l,a)))),r=r.return}o.length!==0&&t.push({event:e,listeners:o})}var bP=/\r\n?/g,NP=/\u0000|\uFFFD/g;function sx(t){return(typeof t=="string"?t:""+t).replace(bP,`
`).replace(NP,"")}function pp(t,e,r){if(e=sx(e),sx(t)!==e&&r)throw Error(Re(425))}function _m(){}var ly=null,cy=null;function uy(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var hy=typeof setTimeout=="function"?setTimeout:void 0,EP=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,AP=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(t){return ix.resolve(null).then(t).catch(SP)}:hy;function SP(t){setTimeout(function(){throw t})}function B0(t,e){var r=e,n=0;do{var s=r.nextSibling;if(t.removeChild(r),s&&s.nodeType===8)if(r=s.data,r==="/$"){if(n===0){t.removeChild(s),Ud(e);return}n--}else r!=="$"&&r!=="$?"&&r!=="$!"||n++;r=s}while(r);Ud(e)}function wl(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ox(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="$"||r==="$!"||r==="$?"){if(e===0)return t;e--}else r==="/$"&&e++}t=t.previousSibling}return null}var vh=Math.random().toString(36).slice(2),ko="__reactFiber$"+vh,$d="__reactProps$"+vh,_a="__reactContainer$"+vh,dy="__reactEvents$"+vh,TP="__reactListeners$"+vh,IP="__reactHandles$"+vh;function hc(t){var e=t[ko];if(e)return e;for(var r=t.parentNode;r;){if(e=r[_a]||r[ko]){if(r=e.alternate,e.child!==null||r!==null&&r.child!==null)for(t=ox(t);t!==null;){if(r=t[ko])return r;t=ox(t)}return e}t=r,r=t.parentNode}return null}function xf(t){return t=t[ko]||t[_a],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Nu(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Re(33))}function pg(t){return t[$d]||null}var fy=[],Eu=-1;function Ul(t){return{current:t}}function Sr(t){0>Eu||(t.current=fy[Eu],fy[Eu]=null,Eu--)}function _r(t,e){Eu++,fy[Eu]=t.current,t.current=e}var Pl={},ds=Ul(Pl),Us=Ul(!1),_c=Pl;function Qu(t,e){var r=t.type.contextTypes;if(!r)return Pl;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in r)s[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function Vs(t){return t=t.childContextTypes,t!=null}function bm(){Sr(Us),Sr(ds)}function ax(t,e,r){if(ds.current!==Pl)throw Error(Re(168));_r(ds,e),_r(Us,r)}function t3(t,e,r){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return r;n=n.getChildContext();for(var s in n)if(!(s in e))throw Error(Re(108,dk(t)||"Unknown",s));return Ur({},r,n)}function Nm(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pl,_c=ds.current,_r(ds,t),_r(Us,Us.current),!0}function lx(t,e,r){var n=t.stateNode;if(!n)throw Error(Re(169));r?(t=t3(t,e,_c),n.__reactInternalMemoizedMergedChildContext=t,Sr(Us),Sr(ds),_r(ds,t)):Sr(Us),_r(Us,r)}var oa=null,mg=!1,z0=!1;function r3(t){oa===null?oa=[t]:oa.push(t)}function kP(t){mg=!0,r3(t)}function Vl(){if(!z0&&oa!==null){z0=!0;var t=0,e=lr;try{var r=oa;for(lr=1;t<r.length;t++){var n=r[t];do n=n(!0);while(n!==null)}oa=null,mg=!1}catch(s){throw oa!==null&&(oa=oa.slice(t+1)),T4(M2,Vl),s}finally{lr=e,z0=!1}}return null}var Au=[],Su=0,Em=null,Am=0,ki=[],Pi=0,bc=null,ca=1,ua="";function ic(t,e){Au[Su++]=Am,Au[Su++]=Em,Em=t,Am=e}function n3(t,e,r){ki[Pi++]=ca,ki[Pi++]=ua,ki[Pi++]=bc,bc=t;var n=ca;t=ua;var s=32-eo(n)-1;n&=~(1<<s),r+=1;var i=32-eo(e)+s;if(30<i){var o=s-s%5;i=(n&(1<<o)-1).toString(32),n>>=o,s-=o,ca=1<<32-eo(e)+s|r<<s|n,ua=i+t}else ca=1<<i|r<<s|n,ua=t}function W2(t){t.return!==null&&(ic(t,1),n3(t,1,0))}function G2(t){for(;t===Em;)Em=Au[--Su],Au[Su]=null,Am=Au[--Su],Au[Su]=null;for(;t===bc;)bc=ki[--Pi],ki[Pi]=null,ua=ki[--Pi],ki[Pi]=null,ca=ki[--Pi],ki[Pi]=null}var hi=null,li=null,Pr=!1,Yi=null;function s3(t,e){var r=Ci(5,null,null,0);r.elementType="DELETED",r.stateNode=e,r.return=t,e=t.deletions,e===null?(t.deletions=[r],t.flags|=16):e.push(r)}function cx(t,e){switch(t.tag){case 5:var r=t.type;return e=e.nodeType!==1||r.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,hi=t,li=wl(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,hi=t,li=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(r=bc!==null?{id:ca,overflow:ua}:null,t.memoizedState={dehydrated:e,treeContext:r,retryLane:1073741824},r=Ci(18,null,null,0),r.stateNode=e,r.return=t,t.child=r,hi=t,li=null,!0):!1;default:return!1}}function py(t){return(t.mode&1)!==0&&(t.flags&128)===0}function my(t){if(Pr){var e=li;if(e){var r=e;if(!cx(t,e)){if(py(t))throw Error(Re(418));e=wl(r.nextSibling);var n=hi;e&&cx(t,e)?s3(n,r):(t.flags=t.flags&-4097|2,Pr=!1,hi=t)}}else{if(py(t))throw Error(Re(418));t.flags=t.flags&-4097|2,Pr=!1,hi=t}}}function ux(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;hi=t}function mp(t){if(t!==hi)return!1;if(!Pr)return ux(t),Pr=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!uy(t.type,t.memoizedProps)),e&&(e=li)){if(py(t))throw i3(),Error(Re(418));for(;e;)s3(t,e),e=wl(e.nextSibling)}if(ux(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Re(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var r=t.data;if(r==="/$"){if(e===0){li=wl(t.nextSibling);break e}e--}else r!=="$"&&r!=="$!"&&r!=="$?"||e++}t=t.nextSibling}li=null}}else li=hi?wl(t.stateNode.nextSibling):null;return!0}function i3(){for(var t=li;t;)t=wl(t.nextSibling)}function Yu(){li=hi=null,Pr=!1}function K2(t){Yi===null?Yi=[t]:Yi.push(t)}var PP=Ia.ReactCurrentBatchConfig;function Zh(t,e,r){if(t=r.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Re(309));var n=r.stateNode}if(!n)throw Error(Re(147,t));var s=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var a=s.refs;o===null?delete a[i]:a[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Re(284));if(!r._owner)throw Error(Re(290,t))}return t}function gp(t,e){throw t=Object.prototype.toString.call(e),Error(Re(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hx(t){var e=t._init;return e(t._payload)}function o3(t){function e(x,T){if(t){var I=x.deletions;I===null?(x.deletions=[T],x.flags|=16):I.push(T)}}function r(x,T){if(!t)return null;for(;T!==null;)e(x,T),T=T.sibling;return null}function n(x,T){for(x=new Map;T!==null;)T.key!==null?x.set(T.key,T):x.set(T.index,T),T=T.sibling;return x}function s(x,T){return x=Nl(x,T),x.index=0,x.sibling=null,x}function i(x,T,I){return x.index=I,t?(I=x.alternate,I!==null?(I=I.index,I<T?(x.flags|=2,T):I):(x.flags|=2,T)):(x.flags|=1048576,T)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,T,I,k){return T===null||T.tag!==6?(T=Q0(I,x.mode,k),T.return=x,T):(T=s(T,I),T.return=x,T)}function l(x,T,I,k){var H=I.type;return H===wu?f(x,T,I.props.children,k,I.key):T!==null&&(T.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===sl&&hx(H)===T.type)?(k=s(T,I.props),k.ref=Zh(x,T,I),k.return=x,k):(k=Gp(I.type,I.key,I.props,null,x.mode,k),k.ref=Zh(x,T,I),k.return=x,k)}function u(x,T,I,k){return T===null||T.tag!==4||T.stateNode.containerInfo!==I.containerInfo||T.stateNode.implementation!==I.implementation?(T=Y0(I,x.mode,k),T.return=x,T):(T=s(T,I.children||[]),T.return=x,T)}function f(x,T,I,k,H){return T===null||T.tag!==7?(T=vc(I,x.mode,k,H),T.return=x,T):(T=s(T,I),T.return=x,T)}function g(x,T,I){if(typeof T=="string"&&T!==""||typeof T=="number")return T=Q0(""+T,x.mode,I),T.return=x,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case ip:return I=Gp(T.type,T.key,T.props,null,x.mode,I),I.ref=Zh(x,null,T),I.return=x,I;case vu:return T=Y0(T,x.mode,I),T.return=x,T;case sl:var k=T._init;return g(x,k(T._payload),I)}if(ld(T)||Kh(T))return T=vc(T,x.mode,I,null),T.return=x,T;gp(x,T)}return null}function y(x,T,I,k){var H=T!==null?T.key:null;if(typeof I=="string"&&I!==""||typeof I=="number")return H!==null?null:a(x,T,""+I,k);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case ip:return I.key===H?l(x,T,I,k):null;case vu:return I.key===H?u(x,T,I,k):null;case sl:return H=I._init,y(x,T,H(I._payload),k)}if(ld(I)||Kh(I))return H!==null?null:f(x,T,I,k,null);gp(x,I)}return null}function m(x,T,I,k,H){if(typeof k=="string"&&k!==""||typeof k=="number")return x=x.get(I)||null,a(T,x,""+k,H);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case ip:return x=x.get(k.key===null?I:k.key)||null,l(T,x,k,H);case vu:return x=x.get(k.key===null?I:k.key)||null,u(T,x,k,H);case sl:var Z=k._init;return m(x,T,I,Z(k._payload),H)}if(ld(k)||Kh(k))return x=x.get(I)||null,f(T,x,k,H,null);gp(T,k)}return null}function E(x,T,I,k){for(var H=null,Z=null,F=T,P=T=0,C=null;F!==null&&P<I.length;P++){F.index>P?(C=F,F=null):C=F.sibling;var O=y(x,F,I[P],k);if(O===null){F===null&&(F=C);break}t&&F&&O.alternate===null&&e(x,F),T=i(O,T,P),Z===null?H=O:Z.sibling=O,Z=O,F=C}if(P===I.length)return r(x,F),Pr&&ic(x,P),H;if(F===null){for(;P<I.length;P++)F=g(x,I[P],k),F!==null&&(T=i(F,T,P),Z===null?H=F:Z.sibling=F,Z=F);return Pr&&ic(x,P),H}for(F=n(x,F);P<I.length;P++)C=m(F,x,P,I[P],k),C!==null&&(t&&C.alternate!==null&&F.delete(C.key===null?P:C.key),T=i(C,T,P),Z===null?H=C:Z.sibling=C,Z=C);return t&&F.forEach(function(N){return e(x,N)}),Pr&&ic(x,P),H}function b(x,T,I,k){var H=Kh(I);if(typeof H!="function")throw Error(Re(150));if(I=H.call(I),I==null)throw Error(Re(151));for(var Z=H=null,F=T,P=T=0,C=null,O=I.next();F!==null&&!O.done;P++,O=I.next()){F.index>P?(C=F,F=null):C=F.sibling;var N=y(x,F,O.value,k);if(N===null){F===null&&(F=C);break}t&&F&&N.alternate===null&&e(x,F),T=i(N,T,P),Z===null?H=N:Z.sibling=N,Z=N,F=C}if(O.done)return r(x,F),Pr&&ic(x,P),H;if(F===null){for(;!O.done;P++,O=I.next())O=g(x,O.value,k),O!==null&&(T=i(O,T,P),Z===null?H=O:Z.sibling=O,Z=O);return Pr&&ic(x,P),H}for(F=n(x,F);!O.done;P++,O=I.next())O=m(F,x,P,O.value,k),O!==null&&(t&&O.alternate!==null&&F.delete(O.key===null?P:O.key),T=i(O,T,P),Z===null?H=O:Z.sibling=O,Z=O);return t&&F.forEach(function(R){return e(x,R)}),Pr&&ic(x,P),H}function A(x,T,I,k){if(typeof I=="object"&&I!==null&&I.type===wu&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case ip:e:{for(var H=I.key,Z=T;Z!==null;){if(Z.key===H){if(H=I.type,H===wu){if(Z.tag===7){r(x,Z.sibling),T=s(Z,I.props.children),T.return=x,x=T;break e}}else if(Z.elementType===H||typeof H=="object"&&H!==null&&H.$$typeof===sl&&hx(H)===Z.type){r(x,Z.sibling),T=s(Z,I.props),T.ref=Zh(x,Z,I),T.return=x,x=T;break e}r(x,Z);break}else e(x,Z);Z=Z.sibling}I.type===wu?(T=vc(I.props.children,x.mode,k,I.key),T.return=x,x=T):(k=Gp(I.type,I.key,I.props,null,x.mode,k),k.ref=Zh(x,T,I),k.return=x,x=k)}return o(x);case vu:e:{for(Z=I.key;T!==null;){if(T.key===Z)if(T.tag===4&&T.stateNode.containerInfo===I.containerInfo&&T.stateNode.implementation===I.implementation){r(x,T.sibling),T=s(T,I.children||[]),T.return=x,x=T;break e}else{r(x,T);break}else e(x,T);T=T.sibling}T=Y0(I,x.mode,k),T.return=x,x=T}return o(x);case sl:return Z=I._init,A(x,T,Z(I._payload),k)}if(ld(I))return E(x,T,I,k);if(Kh(I))return b(x,T,I,k);gp(x,I)}return typeof I=="string"&&I!==""||typeof I=="number"?(I=""+I,T!==null&&T.tag===6?(r(x,T.sibling),T=s(T,I),T.return=x,x=T):(r(x,T),T=Q0(I,x.mode,k),T.return=x,x=T),o(x)):r(x,T)}return A}var Xu=o3(!0),a3=o3(!1),Sm=Ul(null),Tm=null,Tu=null,Q2=null;function Y2(){Q2=Tu=Tm=null}function X2(t){var e=Sm.current;Sr(Sm),t._currentValue=e}function gy(t,e,r){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===r)break;t=t.return}}function Ou(t,e){Tm=t,Q2=Tu=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ms=!0),t.firstContext=null)}function Ri(t){var e=t._currentValue;if(Q2!==t)if(t={context:t,memoizedValue:e,next:null},Tu===null){if(Tm===null)throw Error(Re(308));Tu=t,Tm.dependencies={lanes:0,firstContext:t}}else Tu=Tu.next=t;return e}var dc=null;function J2(t){dc===null?dc=[t]:dc.push(t)}function l3(t,e,r,n){var s=e.interleaved;return s===null?(r.next=r,J2(e)):(r.next=s.next,s.next=r),e.interleaved=r,ba(t,n)}function ba(t,e){t.lanes|=e;var r=t.alternate;for(r!==null&&(r.lanes|=e),r=t,t=t.return;t!==null;)t.childLanes|=e,r=t.alternate,r!==null&&(r.childLanes|=e),r=t,t=t.return;return r.tag===3?r.stateNode:null}var il=!1;function Z2(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function c3(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function pa(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function xl(t,e,r){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,Yt&2){var s=n.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),n.pending=e,ba(t,r)}return s=n.interleaved,s===null?(e.next=e,J2(n)):(e.next=s.next,s.next=e),n.interleaved=e,ba(t,r)}function Bp(t,e,r){if(e=e.updateQueue,e!==null&&(e=e.shared,(r&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,F2(t,r)}}function dx(t,e){var r=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,r===n)){var s=null,i=null;if(r=r.firstBaseUpdate,r!==null){do{var o={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};i===null?s=i=o:i=i.next=o,r=r.next}while(r!==null);i===null?s=i=e:i=i.next=e}else s=i=e;r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=r;return}t=r.lastBaseUpdate,t===null?r.firstBaseUpdate=e:t.next=e,r.lastBaseUpdate=e}function Im(t,e,r,n){var s=t.updateQueue;il=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,a=s.shared.pending;if(a!==null){s.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?i=u:o.next=u,o=l;var f=t.alternate;f!==null&&(f=f.updateQueue,a=f.lastBaseUpdate,a!==o&&(a===null?f.firstBaseUpdate=u:a.next=u,f.lastBaseUpdate=l))}if(i!==null){var g=s.baseState;o=0,f=u=l=null,a=i;do{var y=a.lane,m=a.eventTime;if((n&y)===y){f!==null&&(f=f.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var E=t,b=a;switch(y=e,m=r,b.tag){case 1:if(E=b.payload,typeof E=="function"){g=E.call(m,g,y);break e}g=E;break e;case 3:E.flags=E.flags&-65537|128;case 0:if(E=b.payload,y=typeof E=="function"?E.call(m,g,y):E,y==null)break e;g=Ur({},g,y);break e;case 2:il=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,y=s.effects,y===null?s.effects=[a]:y.push(a))}else m={eventTime:m,lane:y,tag:a.tag,payload:a.payload,callback:a.callback,next:null},f===null?(u=f=m,l=g):f=f.next=m,o|=y;if(a=a.next,a===null){if(a=s.shared.pending,a===null)break;y=a,a=y.next,y.next=null,s.lastBaseUpdate=y,s.shared.pending=null}}while(!0);if(f===null&&(l=g),s.baseState=l,s.firstBaseUpdate=u,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);Ec|=o,t.lanes=o,t.memoizedState=g}}function fx(t,e,r){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],s=n.callback;if(s!==null){if(n.callback=null,n=r,typeof s!="function")throw Error(Re(191,s));s.call(n)}}}var _f={},jo=Ul(_f),Hd=Ul(_f),Wd=Ul(_f);function fc(t){if(t===_f)throw Error(Re(174));return t}function ev(t,e){switch(_r(Wd,e),_r(Hd,t),_r(jo,_f),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Y1(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Y1(e,t)}Sr(jo),_r(jo,e)}function Ju(){Sr(jo),Sr(Hd),Sr(Wd)}function u3(t){fc(Wd.current);var e=fc(jo.current),r=Y1(e,t.type);e!==r&&(_r(Hd,t),_r(jo,r))}function tv(t){Hd.current===t&&(Sr(jo),Sr(Hd))}var Mr=Ul(0);function km(t){for(var e=t;e!==null;){if(e.tag===13){var r=e.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var q0=[];function rv(){for(var t=0;t<q0.length;t++)q0[t]._workInProgressVersionPrimary=null;q0.length=0}var zp=Ia.ReactCurrentDispatcher,$0=Ia.ReactCurrentBatchConfig,Nc=0,Fr=null,wn=null,Tn=null,Pm=!1,Nd=!1,Gd=0,CP=0;function Jn(){throw Error(Re(321))}function nv(t,e){if(e===null)return!1;for(var r=0;r<e.length&&r<t.length;r++)if(!no(t[r],e[r]))return!1;return!0}function sv(t,e,r,n,s,i){if(Nc=i,Fr=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zp.current=t===null||t.memoizedState===null?OP:DP,t=r(n,s),Nd){i=0;do{if(Nd=!1,Gd=0,25<=i)throw Error(Re(301));i+=1,Tn=wn=null,e.updateQueue=null,zp.current=MP,t=r(n,s)}while(Nd)}if(zp.current=Cm,e=wn!==null&&wn.next!==null,Nc=0,Tn=wn=Fr=null,Pm=!1,e)throw Error(Re(300));return t}function iv(){var t=Gd!==0;return Gd=0,t}function Io(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?Fr.memoizedState=Tn=t:Tn=Tn.next=t,Tn}function Oi(){if(wn===null){var t=Fr.alternate;t=t!==null?t.memoizedState:null}else t=wn.next;var e=Tn===null?Fr.memoizedState:Tn.next;if(e!==null)Tn=e,wn=t;else{if(t===null)throw Error(Re(310));wn=t,t={memoizedState:wn.memoizedState,baseState:wn.baseState,baseQueue:wn.baseQueue,queue:wn.queue,next:null},Tn===null?Fr.memoizedState=Tn=t:Tn=Tn.next=t}return Tn}function Kd(t,e){return typeof e=="function"?e(t):e}function H0(t){var e=Oi(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=wn,s=n.baseQueue,i=r.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}n.baseQueue=s=i,r.pending=null}if(s!==null){i=s.next,n=n.baseState;var a=o=null,l=null,u=i;do{var f=u.lane;if((Nc&f)===f)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var g={lane:f,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=g,o=n):l=l.next=g,Fr.lanes|=f,Ec|=f}u=u.next}while(u!==null&&u!==i);l===null?o=n:l.next=a,no(n,e.memoizedState)||(Ms=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=l,r.lastRenderedState=n}if(t=r.interleaved,t!==null){s=t;do i=s.lane,Fr.lanes|=i,Ec|=i,s=s.next;while(s!==t)}else s===null&&(r.lanes=0);return[e.memoizedState,r.dispatch]}function W0(t){var e=Oi(),r=e.queue;if(r===null)throw Error(Re(311));r.lastRenderedReducer=t;var n=r.dispatch,s=r.pending,i=e.memoizedState;if(s!==null){r.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);no(i,e.memoizedState)||(Ms=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),r.lastRenderedState=i}return[i,n]}function h3(){}function d3(t,e){var r=Fr,n=Oi(),s=e(),i=!no(n.memoizedState,s);if(i&&(n.memoizedState=s,Ms=!0),n=n.queue,ov(m3.bind(null,r,n,t),[t]),n.getSnapshot!==e||i||Tn!==null&&Tn.memoizedState.tag&1){if(r.flags|=2048,Qd(9,p3.bind(null,r,n,s,e),void 0,null),Pn===null)throw Error(Re(349));Nc&30||f3(r,e,s)}return s}function f3(t,e,r){t.flags|=16384,t={getSnapshot:e,value:r},e=Fr.updateQueue,e===null?(e={lastEffect:null,stores:null},Fr.updateQueue=e,e.stores=[t]):(r=e.stores,r===null?e.stores=[t]:r.push(t))}function p3(t,e,r,n){e.value=r,e.getSnapshot=n,g3(e)&&y3(t)}function m3(t,e,r){return r(function(){g3(e)&&y3(t)})}function g3(t){var e=t.getSnapshot;t=t.value;try{var r=e();return!no(t,r)}catch{return!0}}function y3(t){var e=ba(t,1);e!==null&&to(e,t,1,-1)}function px(t){var e=Io();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Kd,lastRenderedState:t},e.queue=t,t=t.dispatch=RP.bind(null,Fr,t),[e.memoizedState,t]}function Qd(t,e,r,n){return t={tag:t,create:e,destroy:r,deps:n,next:null},e=Fr.updateQueue,e===null?(e={lastEffect:null,stores:null},Fr.updateQueue=e,e.lastEffect=t.next=t):(r=e.lastEffect,r===null?e.lastEffect=t.next=t:(n=r.next,r.next=t,t.next=n,e.lastEffect=t)),t}function v3(){return Oi().memoizedState}function qp(t,e,r,n){var s=Io();Fr.flags|=t,s.memoizedState=Qd(1|e,r,void 0,n===void 0?null:n)}function gg(t,e,r,n){var s=Oi();n=n===void 0?null:n;var i=void 0;if(wn!==null){var o=wn.memoizedState;if(i=o.destroy,n!==null&&nv(n,o.deps)){s.memoizedState=Qd(e,r,i,n);return}}Fr.flags|=t,s.memoizedState=Qd(1|e,r,i,n)}function mx(t,e){return qp(8390656,8,t,e)}function ov(t,e){return gg(2048,8,t,e)}function w3(t,e){return gg(4,2,t,e)}function x3(t,e){return gg(4,4,t,e)}function _3(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function b3(t,e,r){return r=r!=null?r.concat([t]):null,gg(4,4,_3.bind(null,e,t),r)}function av(){}function N3(t,e){var r=Oi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nv(e,n[1])?n[0]:(r.memoizedState=[t,e],t)}function E3(t,e){var r=Oi();e=e===void 0?null:e;var n=r.memoizedState;return n!==null&&e!==null&&nv(e,n[1])?n[0]:(t=t(),r.memoizedState=[t,e],t)}function A3(t,e,r){return Nc&21?(no(r,e)||(r=P4(),Fr.lanes|=r,Ec|=r,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ms=!0),t.memoizedState=r)}function jP(t,e){var r=lr;lr=r!==0&&4>r?r:4,t(!0);var n=$0.transition;$0.transition={};try{t(!1),e()}finally{lr=r,$0.transition=n}}function S3(){return Oi().memoizedState}function LP(t,e,r){var n=bl(t);if(r={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null},T3(t))I3(e,r);else if(r=l3(t,e,r,n),r!==null){var s=As();to(r,t,n,s),k3(r,e,n)}}function RP(t,e,r){var n=bl(t),s={lane:n,action:r,hasEagerState:!1,eagerState:null,next:null};if(T3(t))I3(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,a=i(o,r);if(s.hasEagerState=!0,s.eagerState=a,no(a,o)){var l=e.interleaved;l===null?(s.next=s,J2(e)):(s.next=l.next,l.next=s),e.interleaved=s;return}}catch{}finally{}r=l3(t,e,s,n),r!==null&&(s=As(),to(r,t,n,s),k3(r,e,n))}}function T3(t){var e=t.alternate;return t===Fr||e!==null&&e===Fr}function I3(t,e){Nd=Pm=!0;var r=t.pending;r===null?e.next=e:(e.next=r.next,r.next=e),t.pending=e}function k3(t,e,r){if(r&4194240){var n=e.lanes;n&=t.pendingLanes,r|=n,e.lanes=r,F2(t,r)}}var Cm={readContext:Ri,useCallback:Jn,useContext:Jn,useEffect:Jn,useImperativeHandle:Jn,useInsertionEffect:Jn,useLayoutEffect:Jn,useMemo:Jn,useReducer:Jn,useRef:Jn,useState:Jn,useDebugValue:Jn,useDeferredValue:Jn,useTransition:Jn,useMutableSource:Jn,useSyncExternalStore:Jn,useId:Jn,unstable_isNewReconciler:!1},OP={readContext:Ri,useCallback:function(t,e){return Io().memoizedState=[t,e===void 0?null:e],t},useContext:Ri,useEffect:mx,useImperativeHandle:function(t,e,r){return r=r!=null?r.concat([t]):null,qp(4194308,4,_3.bind(null,e,t),r)},useLayoutEffect:function(t,e){return qp(4194308,4,t,e)},useInsertionEffect:function(t,e){return qp(4,2,t,e)},useMemo:function(t,e){var r=Io();return e=e===void 0?null:e,t=t(),r.memoizedState=[t,e],t},useReducer:function(t,e,r){var n=Io();return e=r!==void 0?r(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=LP.bind(null,Fr,t),[n.memoizedState,t]},useRef:function(t){var e=Io();return t={current:t},e.memoizedState=t},useState:px,useDebugValue:av,useDeferredValue:function(t){return Io().memoizedState=t},useTransition:function(){var t=px(!1),e=t[0];return t=jP.bind(null,t[1]),Io().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,r){var n=Fr,s=Io();if(Pr){if(r===void 0)throw Error(Re(407));r=r()}else{if(r=e(),Pn===null)throw Error(Re(349));Nc&30||f3(n,e,r)}s.memoizedState=r;var i={value:r,getSnapshot:e};return s.queue=i,mx(m3.bind(null,n,i,t),[t]),n.flags|=2048,Qd(9,p3.bind(null,n,i,r,e),void 0,null),r},useId:function(){var t=Io(),e=Pn.identifierPrefix;if(Pr){var r=ua,n=ca;r=(n&~(1<<32-eo(n)-1)).toString(32)+r,e=":"+e+"R"+r,r=Gd++,0<r&&(e+="H"+r.toString(32)),e+=":"}else r=CP++,e=":"+e+"r"+r.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},DP={readContext:Ri,useCallback:N3,useContext:Ri,useEffect:ov,useImperativeHandle:b3,useInsertionEffect:w3,useLayoutEffect:x3,useMemo:E3,useReducer:H0,useRef:v3,useState:function(){return H0(Kd)},useDebugValue:av,useDeferredValue:function(t){var e=Oi();return A3(e,wn.memoizedState,t)},useTransition:function(){var t=H0(Kd)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:h3,useSyncExternalStore:d3,useId:S3,unstable_isNewReconciler:!1},MP={readContext:Ri,useCallback:N3,useContext:Ri,useEffect:ov,useImperativeHandle:b3,useInsertionEffect:w3,useLayoutEffect:x3,useMemo:E3,useReducer:W0,useRef:v3,useState:function(){return W0(Kd)},useDebugValue:av,useDeferredValue:function(t){var e=Oi();return wn===null?e.memoizedState=t:A3(e,wn.memoizedState,t)},useTransition:function(){var t=W0(Kd)[0],e=Oi().memoizedState;return[t,e]},useMutableSource:h3,useSyncExternalStore:d3,useId:S3,unstable_isNewReconciler:!1};function Ki(t,e){if(t&&t.defaultProps){e=Ur({},e),t=t.defaultProps;for(var r in t)e[r]===void 0&&(e[r]=t[r]);return e}return e}function yy(t,e,r,n){e=t.memoizedState,r=r(n,e),r=r==null?e:Ur({},e,r),t.memoizedState=r,t.lanes===0&&(t.updateQueue.baseState=r)}var yg={isMounted:function(t){return(t=t._reactInternals)?Dc(t)===t:!1},enqueueSetState:function(t,e,r){t=t._reactInternals;var n=As(),s=bl(t),i=pa(n,s);i.payload=e,r!=null&&(i.callback=r),e=xl(t,i,s),e!==null&&(to(e,t,s,n),Bp(e,t,s))},enqueueReplaceState:function(t,e,r){t=t._reactInternals;var n=As(),s=bl(t),i=pa(n,s);i.tag=1,i.payload=e,r!=null&&(i.callback=r),e=xl(t,i,s),e!==null&&(to(e,t,s,n),Bp(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var r=As(),n=bl(t),s=pa(r,n);s.tag=2,e!=null&&(s.callback=e),e=xl(t,s,n),e!==null&&(to(e,t,n,r),Bp(e,t,n))}};function gx(t,e,r,n,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!Bd(r,n)||!Bd(s,i):!0}function P3(t,e,r){var n=!1,s=Pl,i=e.contextType;return typeof i=="object"&&i!==null?i=Ri(i):(s=Vs(e)?_c:ds.current,n=e.contextTypes,i=(n=n!=null)?Qu(t,s):Pl),e=new e(r,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=yg,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function yx(t,e,r,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(r,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(r,n),e.state!==t&&yg.enqueueReplaceState(e,e.state,null)}function vy(t,e,r,n){var s=t.stateNode;s.props=r,s.state=t.memoizedState,s.refs={},Z2(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Ri(i):(i=Vs(e)?_c:ds.current,s.context=Qu(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(yy(t,e,i,r),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&yg.enqueueReplaceState(s,s.state,null),Im(t,r,s,n),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function Zu(t,e){try{var r="",n=e;do r+=hk(n),n=n.return;while(n);var s=r}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function G0(t,e,r){return{value:t,source:null,stack:r??null,digest:e??null}}function wy(t,e){try{console.error(e.value)}catch(r){setTimeout(function(){throw r})}}var FP=typeof WeakMap=="function"?WeakMap:Map;function C3(t,e,r){r=pa(-1,r),r.tag=3,r.payload={element:null};var n=e.value;return r.callback=function(){Lm||(Lm=!0,ky=n),wy(t,e)},r}function j3(t,e,r){r=pa(-1,r),r.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var s=e.value;r.payload=function(){return n(s)},r.callback=function(){wy(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(r.callback=function(){wy(t,e),typeof n!="function"&&(_l===null?_l=new Set([this]):_l.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),r}function vx(t,e,r){var n=t.pingCache;if(n===null){n=t.pingCache=new FP;var s=new Set;n.set(e,s)}else s=n.get(e),s===void 0&&(s=new Set,n.set(e,s));s.has(r)||(s.add(r),t=JP.bind(null,t,e,r),e.then(t,t))}function wx(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function xx(t,e,r,n,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(e=pa(-1,1),e.tag=2,xl(r,e,1))),r.lanes|=1),t)}var UP=Ia.ReactCurrentOwner,Ms=!1;function Ns(t,e,r,n){e.child=t===null?a3(e,null,r,n):Xu(e,t.child,r,n)}function _x(t,e,r,n,s){r=r.render;var i=e.ref;return Ou(e,s),n=sv(t,e,r,n,i,s),r=iv(),t!==null&&!Ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Na(t,e,s)):(Pr&&r&&W2(e),e.flags|=1,Ns(t,e,n,s),e.child)}function bx(t,e,r,n,s){if(t===null){var i=r.type;return typeof i=="function"&&!mv(i)&&i.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(e.tag=15,e.type=i,L3(t,e,i,n,s)):(t=Gp(r.type,null,n,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(r=r.compare,r=r!==null?r:Bd,r(o,n)&&t.ref===e.ref)return Na(t,e,s)}return e.flags|=1,t=Nl(i,n),t.ref=e.ref,t.return=e,e.child=t}function L3(t,e,r,n,s){if(t!==null){var i=t.memoizedProps;if(Bd(i,n)&&t.ref===e.ref)if(Ms=!1,e.pendingProps=n=i,(t.lanes&s)!==0)t.flags&131072&&(Ms=!0);else return e.lanes=t.lanes,Na(t,e,s)}return xy(t,e,r,n,s)}function R3(t,e,r){var n=e.pendingProps,s=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},_r(ku,ai),ai|=r;else{if(!(r&1073741824))return t=i!==null?i.baseLanes|r:r,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,_r(ku,ai),ai|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:r,_r(ku,ai),ai|=n}else i!==null?(n=i.baseLanes|r,e.memoizedState=null):n=r,_r(ku,ai),ai|=n;return Ns(t,e,s,r),e.child}function O3(t,e){var r=e.ref;(t===null&&r!==null||t!==null&&t.ref!==r)&&(e.flags|=512,e.flags|=2097152)}function xy(t,e,r,n,s){var i=Vs(r)?_c:ds.current;return i=Qu(e,i),Ou(e,s),r=sv(t,e,r,n,i,s),n=iv(),t!==null&&!Ms?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,Na(t,e,s)):(Pr&&n&&W2(e),e.flags|=1,Ns(t,e,r,s),e.child)}function Nx(t,e,r,n,s){if(Vs(r)){var i=!0;Nm(e)}else i=!1;if(Ou(e,s),e.stateNode===null)$p(t,e),P3(e,r,n),vy(e,r,n,s),n=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=r.contextType;typeof u=="object"&&u!==null?u=Ri(u):(u=Vs(r)?_c:ds.current,u=Qu(e,u));var f=r.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==u)&&yx(e,o,n,u),il=!1;var y=e.memoizedState;o.state=y,Im(e,n,o,s),l=e.memoizedState,a!==n||y!==l||Us.current||il?(typeof f=="function"&&(yy(e,r,f,n),l=e.memoizedState),(a=il||gx(e,r,a,n,y,l,u))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),o.props=n,o.state=l,o.context=u,n=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,c3(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:Ki(e.type,a),o.props=u,g=e.pendingProps,y=o.context,l=r.contextType,typeof l=="object"&&l!==null?l=Ri(l):(l=Vs(r)?_c:ds.current,l=Qu(e,l));var m=r.getDerivedStateFromProps;(f=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==g||y!==l)&&yx(e,o,n,l),il=!1,y=e.memoizedState,o.state=y,Im(e,n,o,s);var E=e.memoizedState;a!==g||y!==E||Us.current||il?(typeof m=="function"&&(yy(e,r,m,n),E=e.memoizedState),(u=il||gx(e,r,u,n,y,E,l)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,E,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,E,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=E),o.props=n,o.state=E,o.context=l,n=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),n=!1)}return _y(t,e,r,n,i,s)}function _y(t,e,r,n,s,i){O3(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return s&&lx(e,r,!1),Na(t,e,i);n=e.stateNode,UP.current=e;var a=o&&typeof r.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Xu(e,t.child,null,i),e.child=Xu(e,null,a,i)):Ns(t,e,a,i),e.memoizedState=n.state,s&&lx(e,r,!0),e.child}function D3(t){var e=t.stateNode;e.pendingContext?ax(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ax(t,e.context,!1),ev(t,e.containerInfo)}function Ex(t,e,r,n,s){return Yu(),K2(s),e.flags|=256,Ns(t,e,r,n),e.child}var by={dehydrated:null,treeContext:null,retryLane:0};function Ny(t){return{baseLanes:t,cachePool:null,transitions:null}}function M3(t,e,r){var n=e.pendingProps,s=Mr.current,i=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(s&2)!==0),a?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),_r(Mr,s&1),t===null)return my(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=xg(o,n,0,null),t=vc(t,n,r,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ny(r),e.memoizedState=by,t):lv(e,o));if(s=t.memoizedState,s!==null&&(a=s.dehydrated,a!==null))return VP(t,e,o,n,a,s,r);if(i){i=n.fallback,o=e.mode,s=t.child,a=s.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&e.child!==s?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Nl(s,l),n.subtreeFlags=s.subtreeFlags&14680064),a!==null?i=Nl(a,i):(i=vc(i,o,r,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Ny(r):{baseLanes:o.baseLanes|r,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~r,e.memoizedState=by,n}return i=t.child,t=i.sibling,n=Nl(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=r),n.return=e,n.sibling=null,t!==null&&(r=e.deletions,r===null?(e.deletions=[t],e.flags|=16):r.push(t)),e.child=n,e.memoizedState=null,n}function lv(t,e){return e=xg({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yp(t,e,r,n){return n!==null&&K2(n),Xu(e,t.child,null,r),t=lv(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function VP(t,e,r,n,s,i,o){if(r)return e.flags&256?(e.flags&=-257,n=G0(Error(Re(422))),yp(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,s=e.mode,n=xg({mode:"visible",children:n.children},s,0,null),i=vc(i,s,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&Xu(e,t.child,null,o),e.child.memoizedState=Ny(o),e.memoizedState=by,i);if(!(e.mode&1))return yp(t,e,o,null);if(s.data==="$!"){if(n=s.nextSibling&&s.nextSibling.dataset,n)var a=n.dgst;return n=a,i=Error(Re(419)),n=G0(i,n,void 0),yp(t,e,o,n)}if(a=(o&t.childLanes)!==0,Ms||a){if(n=Pn,n!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(n.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,ba(t,s),to(n,t,s,-1))}return pv(),n=G0(Error(Re(421))),yp(t,e,o,n)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=ZP.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,li=wl(s.nextSibling),hi=e,Pr=!0,Yi=null,t!==null&&(ki[Pi++]=ca,ki[Pi++]=ua,ki[Pi++]=bc,ca=t.id,ua=t.overflow,bc=e),e=lv(e,n.children),e.flags|=4096,e)}function Ax(t,e,r){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),gy(t.return,e,r)}function K0(t,e,r,n,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s)}function F3(t,e,r){var n=e.pendingProps,s=n.revealOrder,i=n.tail;if(Ns(t,e,n.children,r),n=Mr.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ax(t,r,e);else if(t.tag===19)Ax(t,r,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(_r(Mr,n),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(r=e.child,s=null;r!==null;)t=r.alternate,t!==null&&km(t)===null&&(s=r),r=r.sibling;r=s,r===null?(s=e.child,e.child=null):(s=r.sibling,r.sibling=null),K0(e,!1,s,r,i);break;case"backwards":for(r=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&km(t)===null){e.child=s;break}t=s.sibling,s.sibling=r,r=s,s=t}K0(e,!0,r,null,i);break;case"together":K0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $p(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Na(t,e,r){if(t!==null&&(e.dependencies=t.dependencies),Ec|=e.lanes,!(r&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Re(153));if(e.child!==null){for(t=e.child,r=Nl(t,t.pendingProps),e.child=r,r.return=e;t.sibling!==null;)t=t.sibling,r=r.sibling=Nl(t,t.pendingProps),r.return=e;r.sibling=null}return e.child}function BP(t,e,r){switch(e.tag){case 3:D3(e),Yu();break;case 5:u3(e);break;case 1:Vs(e.type)&&Nm(e);break;case 4:ev(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,s=e.memoizedProps.value;_r(Sm,n._currentValue),n._currentValue=s;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(_r(Mr,Mr.current&1),e.flags|=128,null):r&e.child.childLanes?M3(t,e,r):(_r(Mr,Mr.current&1),t=Na(t,e,r),t!==null?t.sibling:null);_r(Mr,Mr.current&1);break;case 19:if(n=(r&e.childLanes)!==0,t.flags&128){if(n)return F3(t,e,r);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),_r(Mr,Mr.current),n)break;return null;case 22:case 23:return e.lanes=0,R3(t,e,r)}return Na(t,e,r)}var U3,Ey,V3,B3;U3=function(t,e){for(var r=e.child;r!==null;){if(r.tag===5||r.tag===6)t.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===e)break;for(;r.sibling===null;){if(r.return===null||r.return===e)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};Ey=function(){};V3=function(t,e,r,n){var s=t.memoizedProps;if(s!==n){t=e.stateNode,fc(jo.current);var i=null;switch(r){case"input":s=W1(t,s),n=W1(t,n),i=[];break;case"select":s=Ur({},s,{value:void 0}),n=Ur({},n,{value:void 0}),i=[];break;case"textarea":s=Q1(t,s),n=Q1(t,n),i=[];break;default:typeof s.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=_m)}X1(r,n);var o;r=null;for(u in s)if(!n.hasOwnProperty(u)&&s.hasOwnProperty(u)&&s[u]!=null)if(u==="style"){var a=s[u];for(o in a)a.hasOwnProperty(o)&&(r||(r={}),r[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Rd.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in n){var l=n[u];if(a=s!=null?s[u]:void 0,n.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(r||(r={}),r[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(r||(r={}),r[o]=l[o])}else r||(i||(i=[]),i.push(u,r)),r=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Rd.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Er("scroll",t),i||a===l||(i=[])):(i=i||[]).push(u,l))}r&&(i=i||[]).push("style",r);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};B3=function(t,e,r,n){r!==n&&(e.flags|=4)};function ed(t,e){if(!Pr)switch(t.tailMode){case"hidden":e=t.tail;for(var r=null;e!==null;)e.alternate!==null&&(r=e),e=e.sibling;r===null?t.tail=null:r.sibling=null;break;case"collapsed":r=t.tail;for(var n=null;r!==null;)r.alternate!==null&&(n=r),r=r.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Zn(t){var e=t.alternate!==null&&t.alternate.child===t.child,r=0,n=0;if(e)for(var s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags&14680064,n|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=n,t.childLanes=r,e}function zP(t,e,r){var n=e.pendingProps;switch(G2(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zn(e),null;case 1:return Vs(e.type)&&bm(),Zn(e),null;case 3:return n=e.stateNode,Ju(),Sr(Us),Sr(ds),rv(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(mp(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yi!==null&&(jy(Yi),Yi=null))),Ey(t,e),Zn(e),null;case 5:tv(e);var s=fc(Wd.current);if(r=e.type,t!==null&&e.stateNode!=null)V3(t,e,r,n,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Re(166));return Zn(e),null}if(t=fc(jo.current),mp(e)){n=e.stateNode,r=e.type;var i=e.memoizedProps;switch(n[ko]=e,n[$d]=i,t=(e.mode&1)!==0,r){case"dialog":Er("cancel",n),Er("close",n);break;case"iframe":case"object":case"embed":Er("load",n);break;case"video":case"audio":for(s=0;s<ud.length;s++)Er(ud[s],n);break;case"source":Er("error",n);break;case"img":case"image":case"link":Er("error",n),Er("load",n);break;case"details":Er("toggle",n);break;case"input":Rw(n,i),Er("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Er("invalid",n);break;case"textarea":Dw(n,i),Er("invalid",n)}X1(r,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var a=i[o];o==="children"?typeof a=="string"?n.textContent!==a&&(i.suppressHydrationWarning!==!0&&pp(n.textContent,a,t),s=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&pp(n.textContent,a,t),s=["children",""+a]):Rd.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Er("scroll",n)}switch(r){case"input":op(n),Ow(n,i,!0);break;case"textarea":op(n),Mw(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=_m)}n=s,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m4(r)),t==="http://www.w3.org/1999/xhtml"?r==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(r,{is:n.is}):(t=o.createElement(r),r==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,r),t[ko]=e,t[$d]=n,U3(t,e,!1,!1),e.stateNode=t;e:{switch(o=J1(r,n),r){case"dialog":Er("cancel",t),Er("close",t),s=n;break;case"iframe":case"object":case"embed":Er("load",t),s=n;break;case"video":case"audio":for(s=0;s<ud.length;s++)Er(ud[s],t);s=n;break;case"source":Er("error",t),s=n;break;case"img":case"image":case"link":Er("error",t),Er("load",t),s=n;break;case"details":Er("toggle",t),s=n;break;case"input":Rw(t,n),s=W1(t,n),Er("invalid",t);break;case"option":s=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},s=Ur({},n,{value:void 0}),Er("invalid",t);break;case"textarea":Dw(t,n),s=Q1(t,n),Er("invalid",t);break;default:s=n}X1(r,s),a=s;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?v4(t,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&g4(t,l)):i==="children"?typeof l=="string"?(r!=="textarea"||l!=="")&&Od(t,l):typeof l=="number"&&Od(t,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Rd.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Er("scroll",t):l!=null&&j2(t,i,l,o))}switch(r){case"input":op(t),Ow(t,n,!1);break;case"textarea":op(t),Mw(t);break;case"option":n.value!=null&&t.setAttribute("value",""+kl(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Cu(t,!!n.multiple,i,!1):n.defaultValue!=null&&Cu(t,!!n.multiple,n.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=_m)}switch(r){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Zn(e),null;case 6:if(t&&e.stateNode!=null)B3(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Re(166));if(r=fc(Wd.current),fc(jo.current),mp(e)){if(n=e.stateNode,r=e.memoizedProps,n[ko]=e,(i=n.nodeValue!==r)&&(t=hi,t!==null))switch(t.tag){case 3:pp(n.nodeValue,r,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pp(n.nodeValue,r,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(r.nodeType===9?r:r.ownerDocument).createTextNode(n),n[ko]=e,e.stateNode=n}return Zn(e),null;case 13:if(Sr(Mr),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pr&&li!==null&&e.mode&1&&!(e.flags&128))i3(),Yu(),e.flags|=98560,i=!1;else if(i=mp(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(Re(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Re(317));i[ko]=e}else Yu(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Zn(e),i=!1}else Yi!==null&&(jy(Yi),Yi=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=r,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Mr.current&1?xn===0&&(xn=3):pv())),e.updateQueue!==null&&(e.flags|=4),Zn(e),null);case 4:return Ju(),Ey(t,e),t===null&&zd(e.stateNode.containerInfo),Zn(e),null;case 10:return X2(e.type._context),Zn(e),null;case 17:return Vs(e.type)&&bm(),Zn(e),null;case 19:if(Sr(Mr),i=e.memoizedState,i===null)return Zn(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)ed(i,!1);else{if(xn!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=km(t),o!==null){for(e.flags|=128,ed(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=r,r=e.child;r!==null;)i=r,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),r=r.sibling;return _r(Mr,Mr.current&1|2),e.child}t=t.sibling}i.tail!==null&&rn()>eh&&(e.flags|=128,n=!0,ed(i,!1),e.lanes=4194304)}else{if(!n)if(t=km(o),t!==null){if(e.flags|=128,n=!0,r=t.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),ed(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pr)return Zn(e),null}else 2*rn()-i.renderingStartTime>eh&&r!==1073741824&&(e.flags|=128,n=!0,ed(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(r=i.last,r!==null?r.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=rn(),e.sibling=null,r=Mr.current,_r(Mr,n?r&1|2:r&1),e):(Zn(e),null);case 22:case 23:return fv(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?ai&1073741824&&(Zn(e),e.subtreeFlags&6&&(e.flags|=8192)):Zn(e),null;case 24:return null;case 25:return null}throw Error(Re(156,e.tag))}function qP(t,e){switch(G2(e),e.tag){case 1:return Vs(e.type)&&bm(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ju(),Sr(Us),Sr(ds),rv(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return tv(e),null;case 13:if(Sr(Mr),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Re(340));Yu()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Sr(Mr),null;case 4:return Ju(),null;case 10:return X2(e.type._context),null;case 22:case 23:return fv(),null;case 24:return null;default:return null}}var vp=!1,as=!1,$P=typeof WeakSet=="function"?WeakSet:Set,qe=null;function Iu(t,e){var r=t.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(n){Wr(t,e,n)}else r.current=null}function Ay(t,e,r){try{r()}catch(n){Wr(t,e,n)}}var Sx=!1;function HP(t,e){if(ly=vm,t=W4(),H2(t)){if("selectionStart"in t)var r={start:t.selectionStart,end:t.selectionEnd};else e:{r=(r=t.ownerDocument)&&r.defaultView||window;var n=r.getSelection&&r.getSelection();if(n&&n.rangeCount!==0){r=n.anchorNode;var s=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{r.nodeType,i.nodeType}catch{r=null;break e}var o=0,a=-1,l=-1,u=0,f=0,g=t,y=null;t:for(;;){for(var m;g!==r||s!==0&&g.nodeType!==3||(a=o+s),g!==i||n!==0&&g.nodeType!==3||(l=o+n),g.nodeType===3&&(o+=g.nodeValue.length),(m=g.firstChild)!==null;)y=g,g=m;for(;;){if(g===t)break t;if(y===r&&++u===s&&(a=o),y===i&&++f===n&&(l=o),(m=g.nextSibling)!==null)break;g=y,y=g.parentNode}g=m}r=a===-1||l===-1?null:{start:a,end:l}}else r=null}r=r||{start:0,end:0}}else r=null;for(cy={focusedElem:t,selectionRange:r},vm=!1,qe=e;qe!==null;)if(e=qe,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,qe=t;else for(;qe!==null;){e=qe;try{var E=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(E!==null){var b=E.memoizedProps,A=E.memoizedState,x=e.stateNode,T=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Ki(e.type,b),A);x.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var I=e.stateNode.containerInfo;I.nodeType===1?I.textContent="":I.nodeType===9&&I.documentElement&&I.removeChild(I.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Re(163))}}catch(k){Wr(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,qe=t;break}qe=e.return}return E=Sx,Sx=!1,E}function Ed(t,e,r){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var s=n=n.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Ay(e,r,i)}s=s.next}while(s!==n)}}function vg(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var r=e=e.next;do{if((r.tag&t)===t){var n=r.create;r.destroy=n()}r=r.next}while(r!==e)}}function Sy(t){var e=t.ref;if(e!==null){var r=t.stateNode;switch(t.tag){case 5:t=r;break;default:t=r}typeof e=="function"?e(t):e.current=t}}function z3(t){var e=t.alternate;e!==null&&(t.alternate=null,z3(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[ko],delete e[$d],delete e[dy],delete e[TP],delete e[IP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function q3(t){return t.tag===5||t.tag===3||t.tag===4}function Tx(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||q3(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ty(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.nodeType===8?r.parentNode.insertBefore(t,e):r.insertBefore(t,e):(r.nodeType===8?(e=r.parentNode,e.insertBefore(t,r)):(e=r,e.appendChild(t)),r=r._reactRootContainer,r!=null||e.onclick!==null||(e.onclick=_m));else if(n!==4&&(t=t.child,t!==null))for(Ty(t,e,r),t=t.sibling;t!==null;)Ty(t,e,r),t=t.sibling}function Iy(t,e,r){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?r.insertBefore(t,e):r.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Iy(t,e,r),t=t.sibling;t!==null;)Iy(t,e,r),t=t.sibling}var Un=null,Qi=!1;function el(t,e,r){for(r=r.child;r!==null;)$3(t,e,r),r=r.sibling}function $3(t,e,r){if(Co&&typeof Co.onCommitFiberUnmount=="function")try{Co.onCommitFiberUnmount(ug,r)}catch{}switch(r.tag){case 5:as||Iu(r,e);case 6:var n=Un,s=Qi;Un=null,el(t,e,r),Un=n,Qi=s,Un!==null&&(Qi?(t=Un,r=r.stateNode,t.nodeType===8?t.parentNode.removeChild(r):t.removeChild(r)):Un.removeChild(r.stateNode));break;case 18:Un!==null&&(Qi?(t=Un,r=r.stateNode,t.nodeType===8?B0(t.parentNode,r):t.nodeType===1&&B0(t,r),Ud(t)):B0(Un,r.stateNode));break;case 4:n=Un,s=Qi,Un=r.stateNode.containerInfo,Qi=!0,el(t,e,r),Un=n,Qi=s;break;case 0:case 11:case 14:case 15:if(!as&&(n=r.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){s=n=n.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ay(r,e,o),s=s.next}while(s!==n)}el(t,e,r);break;case 1:if(!as&&(Iu(r,e),n=r.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=r.memoizedProps,n.state=r.memoizedState,n.componentWillUnmount()}catch(a){Wr(r,e,a)}el(t,e,r);break;case 21:el(t,e,r);break;case 22:r.mode&1?(as=(n=as)||r.memoizedState!==null,el(t,e,r),as=n):el(t,e,r);break;default:el(t,e,r)}}function Ix(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var r=t.stateNode;r===null&&(r=t.stateNode=new $P),e.forEach(function(n){var s=eC.bind(null,t,n);r.has(n)||(r.add(n),n.then(s,s))})}}function Wi(t,e){var r=e.deletions;if(r!==null)for(var n=0;n<r.length;n++){var s=r[n];try{var i=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Un=a.stateNode,Qi=!1;break e;case 3:Un=a.stateNode.containerInfo,Qi=!0;break e;case 4:Un=a.stateNode.containerInfo,Qi=!0;break e}a=a.return}if(Un===null)throw Error(Re(160));$3(i,o,s),Un=null,Qi=!1;var l=s.alternate;l!==null&&(l.return=null),s.return=null}catch(u){Wr(s,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)H3(e,t),e=e.sibling}function H3(t,e){var r=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Wi(e,t),Ao(t),n&4){try{Ed(3,t,t.return),vg(3,t)}catch(b){Wr(t,t.return,b)}try{Ed(5,t,t.return)}catch(b){Wr(t,t.return,b)}}break;case 1:Wi(e,t),Ao(t),n&512&&r!==null&&Iu(r,r.return);break;case 5:if(Wi(e,t),Ao(t),n&512&&r!==null&&Iu(r,r.return),t.flags&32){var s=t.stateNode;try{Od(s,"")}catch(b){Wr(t,t.return,b)}}if(n&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=r!==null?r.memoizedProps:i,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&f4(s,i),J1(a,o);var u=J1(a,i);for(o=0;o<l.length;o+=2){var f=l[o],g=l[o+1];f==="style"?v4(s,g):f==="dangerouslySetInnerHTML"?g4(s,g):f==="children"?Od(s,g):j2(s,f,g,u)}switch(a){case"input":G1(s,i);break;case"textarea":p4(s,i);break;case"select":var y=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Cu(s,!!i.multiple,m,!1):y!==!!i.multiple&&(i.defaultValue!=null?Cu(s,!!i.multiple,i.defaultValue,!0):Cu(s,!!i.multiple,i.multiple?[]:"",!1))}s[$d]=i}catch(b){Wr(t,t.return,b)}}break;case 6:if(Wi(e,t),Ao(t),n&4){if(t.stateNode===null)throw Error(Re(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(b){Wr(t,t.return,b)}}break;case 3:if(Wi(e,t),Ao(t),n&4&&r!==null&&r.memoizedState.isDehydrated)try{Ud(e.containerInfo)}catch(b){Wr(t,t.return,b)}break;case 4:Wi(e,t),Ao(t);break;case 13:Wi(e,t),Ao(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(hv=rn())),n&4&&Ix(t);break;case 22:if(f=r!==null&&r.memoizedState!==null,t.mode&1?(as=(u=as)||f,Wi(e,t),as=u):Wi(e,t),Ao(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!f&&t.mode&1)for(qe=t,f=t.child;f!==null;){for(g=qe=f;qe!==null;){switch(y=qe,m=y.child,y.tag){case 0:case 11:case 14:case 15:Ed(4,y,y.return);break;case 1:Iu(y,y.return);var E=y.stateNode;if(typeof E.componentWillUnmount=="function"){n=y,r=y.return;try{e=n,E.props=e.memoizedProps,E.state=e.memoizedState,E.componentWillUnmount()}catch(b){Wr(n,r,b)}}break;case 5:Iu(y,y.return);break;case 22:if(y.memoizedState!==null){Px(g);continue}}m!==null?(m.return=y,qe=m):Px(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,u?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=g.stateNode,l=g.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=y4("display",o))}catch(b){Wr(t,t.return,b)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(b){Wr(t,t.return,b)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Wi(e,t),Ao(t),n&4&&Ix(t);break;case 21:break;default:Wi(e,t),Ao(t)}}function Ao(t){var e=t.flags;if(e&2){try{e:{for(var r=t.return;r!==null;){if(q3(r)){var n=r;break e}r=r.return}throw Error(Re(160))}switch(n.tag){case 5:var s=n.stateNode;n.flags&32&&(Od(s,""),n.flags&=-33);var i=Tx(t);Iy(t,i,s);break;case 3:case 4:var o=n.stateNode.containerInfo,a=Tx(t);Ty(t,a,o);break;default:throw Error(Re(161))}}catch(l){Wr(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function WP(t,e,r){qe=t,W3(t)}function W3(t,e,r){for(var n=(t.mode&1)!==0;qe!==null;){var s=qe,i=s.child;if(s.tag===22&&n){var o=s.memoizedState!==null||vp;if(!o){var a=s.alternate,l=a!==null&&a.memoizedState!==null||as;a=vp;var u=as;if(vp=o,(as=l)&&!u)for(qe=s;qe!==null;)o=qe,l=o.child,o.tag===22&&o.memoizedState!==null?Cx(s):l!==null?(l.return=o,qe=l):Cx(s);for(;i!==null;)qe=i,W3(i),i=i.sibling;qe=s,vp=a,as=u}kx(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,qe=i):kx(t)}}function kx(t){for(;qe!==null;){var e=qe;if(e.flags&8772){var r=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:as||vg(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!as)if(r===null)n.componentDidMount();else{var s=e.elementType===e.type?r.memoizedProps:Ki(e.type,r.memoizedProps);n.componentDidUpdate(s,r.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&fx(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(r=null,e.child!==null)switch(e.child.tag){case 5:r=e.child.stateNode;break;case 1:r=e.child.stateNode}fx(e,o,r)}break;case 5:var a=e.stateNode;if(r===null&&e.flags&4){r=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&r.focus();break;case"img":l.src&&(r.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var f=u.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Ud(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Re(163))}as||e.flags&512&&Sy(e)}catch(y){Wr(e,e.return,y)}}if(e===t){qe=null;break}if(r=e.sibling,r!==null){r.return=e.return,qe=r;break}qe=e.return}}function Px(t){for(;qe!==null;){var e=qe;if(e===t){qe=null;break}var r=e.sibling;if(r!==null){r.return=e.return,qe=r;break}qe=e.return}}function Cx(t){for(;qe!==null;){var e=qe;try{switch(e.tag){case 0:case 11:case 15:var r=e.return;try{vg(4,e)}catch(l){Wr(e,r,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var s=e.return;try{n.componentDidMount()}catch(l){Wr(e,s,l)}}var i=e.return;try{Sy(e)}catch(l){Wr(e,i,l)}break;case 5:var o=e.return;try{Sy(e)}catch(l){Wr(e,o,l)}}}catch(l){Wr(e,e.return,l)}if(e===t){qe=null;break}var a=e.sibling;if(a!==null){a.return=e.return,qe=a;break}qe=e.return}}var GP=Math.ceil,jm=Ia.ReactCurrentDispatcher,cv=Ia.ReactCurrentOwner,ji=Ia.ReactCurrentBatchConfig,Yt=0,Pn=null,un=null,qn=0,ai=0,ku=Ul(0),xn=0,Yd=null,Ec=0,wg=0,uv=0,Ad=null,Os=null,hv=0,eh=1/0,sa=null,Lm=!1,ky=null,_l=null,wp=!1,dl=null,Rm=0,Sd=0,Py=null,Hp=-1,Wp=0;function As(){return Yt&6?rn():Hp!==-1?Hp:Hp=rn()}function bl(t){return t.mode&1?Yt&2&&qn!==0?qn&-qn:PP.transition!==null?(Wp===0&&(Wp=P4()),Wp):(t=lr,t!==0||(t=window.event,t=t===void 0?16:M4(t.type)),t):1}function to(t,e,r,n){if(50<Sd)throw Sd=0,Py=null,Error(Re(185));vf(t,r,n),(!(Yt&2)||t!==Pn)&&(t===Pn&&(!(Yt&2)&&(wg|=r),xn===4&&al(t,qn)),Bs(t,n),r===1&&Yt===0&&!(e.mode&1)&&(eh=rn()+500,mg&&Vl()))}function Bs(t,e){var r=t.callbackNode;Pk(t,e);var n=ym(t,t===Pn?qn:0);if(n===0)r!==null&&Vw(r),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(r!=null&&Vw(r),e===1)t.tag===0?kP(jx.bind(null,t)):r3(jx.bind(null,t)),AP(function(){!(Yt&6)&&Vl()}),r=null;else{switch(C4(n)){case 1:r=M2;break;case 4:r=I4;break;case 16:r=gm;break;case 536870912:r=k4;break;default:r=gm}r=eE(r,G3.bind(null,t))}t.callbackPriority=e,t.callbackNode=r}}function G3(t,e){if(Hp=-1,Wp=0,Yt&6)throw Error(Re(327));var r=t.callbackNode;if(Du()&&t.callbackNode!==r)return null;var n=ym(t,t===Pn?qn:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Om(t,n);else{e=n;var s=Yt;Yt|=2;var i=Q3();(Pn!==t||qn!==e)&&(sa=null,eh=rn()+500,yc(t,e));do try{YP();break}catch(a){K3(t,a)}while(!0);Y2(),jm.current=i,Yt=s,un!==null?e=0:(Pn=null,qn=0,e=xn)}if(e!==0){if(e===2&&(s=ny(t),s!==0&&(n=s,e=Cy(t,s))),e===1)throw r=Yd,yc(t,0),al(t,n),Bs(t,rn()),r;if(e===6)al(t,n);else{if(s=t.current.alternate,!(n&30)&&!KP(s)&&(e=Om(t,n),e===2&&(i=ny(t),i!==0&&(n=i,e=Cy(t,i))),e===1))throw r=Yd,yc(t,0),al(t,n),Bs(t,rn()),r;switch(t.finishedWork=s,t.finishedLanes=n,e){case 0:case 1:throw Error(Re(345));case 2:oc(t,Os,sa);break;case 3:if(al(t,n),(n&130023424)===n&&(e=hv+500-rn(),10<e)){if(ym(t,0)!==0)break;if(s=t.suspendedLanes,(s&n)!==n){As(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=hy(oc.bind(null,t,Os,sa),e);break}oc(t,Os,sa);break;case 4:if(al(t,n),(n&4194240)===n)break;for(e=t.eventTimes,s=-1;0<n;){var o=31-eo(n);i=1<<o,o=e[o],o>s&&(s=o),n&=~i}if(n=s,n=rn()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*GP(n/1960))-n,10<n){t.timeoutHandle=hy(oc.bind(null,t,Os,sa),n);break}oc(t,Os,sa);break;case 5:oc(t,Os,sa);break;default:throw Error(Re(329))}}}return Bs(t,rn()),t.callbackNode===r?G3.bind(null,t):null}function Cy(t,e){var r=Ad;return t.current.memoizedState.isDehydrated&&(yc(t,e).flags|=256),t=Om(t,e),t!==2&&(e=Os,Os=r,e!==null&&jy(e)),t}function jy(t){Os===null?Os=t:Os.push.apply(Os,t)}function KP(t){for(var e=t;;){if(e.flags&16384){var r=e.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var n=0;n<r.length;n++){var s=r[n],i=s.getSnapshot;s=s.value;try{if(!no(i(),s))return!1}catch{return!1}}}if(r=e.child,e.subtreeFlags&16384&&r!==null)r.return=e,e=r;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function al(t,e){for(e&=~uv,e&=~wg,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var r=31-eo(e),n=1<<r;t[r]=-1,e&=~n}}function jx(t){if(Yt&6)throw Error(Re(327));Du();var e=ym(t,0);if(!(e&1))return Bs(t,rn()),null;var r=Om(t,e);if(t.tag!==0&&r===2){var n=ny(t);n!==0&&(e=n,r=Cy(t,n))}if(r===1)throw r=Yd,yc(t,0),al(t,e),Bs(t,rn()),r;if(r===6)throw Error(Re(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,oc(t,Os,sa),Bs(t,rn()),null}function dv(t,e){var r=Yt;Yt|=1;try{return t(e)}finally{Yt=r,Yt===0&&(eh=rn()+500,mg&&Vl())}}function Ac(t){dl!==null&&dl.tag===0&&!(Yt&6)&&Du();var e=Yt;Yt|=1;var r=ji.transition,n=lr;try{if(ji.transition=null,lr=1,t)return t()}finally{lr=n,ji.transition=r,Yt=e,!(Yt&6)&&Vl()}}function fv(){ai=ku.current,Sr(ku)}function yc(t,e){t.finishedWork=null,t.finishedLanes=0;var r=t.timeoutHandle;if(r!==-1&&(t.timeoutHandle=-1,EP(r)),un!==null)for(r=un.return;r!==null;){var n=r;switch(G2(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&bm();break;case 3:Ju(),Sr(Us),Sr(ds),rv();break;case 5:tv(n);break;case 4:Ju();break;case 13:Sr(Mr);break;case 19:Sr(Mr);break;case 10:X2(n.type._context);break;case 22:case 23:fv()}r=r.return}if(Pn=t,un=t=Nl(t.current,null),qn=ai=e,xn=0,Yd=null,uv=wg=Ec=0,Os=Ad=null,dc!==null){for(e=0;e<dc.length;e++)if(r=dc[e],n=r.interleaved,n!==null){r.interleaved=null;var s=n.next,i=r.pending;if(i!==null){var o=i.next;i.next=s,n.next=o}r.pending=n}dc=null}return t}function K3(t,e){do{var r=un;try{if(Y2(),zp.current=Cm,Pm){for(var n=Fr.memoizedState;n!==null;){var s=n.queue;s!==null&&(s.pending=null),n=n.next}Pm=!1}if(Nc=0,Tn=wn=Fr=null,Nd=!1,Gd=0,cv.current=null,r===null||r.return===null){xn=1,Yd=e,un=null;break}e:{var i=t,o=r.return,a=r,l=e;if(e=qn,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,f=a,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var y=f.alternate;y?(f.updateQueue=y.updateQueue,f.memoizedState=y.memoizedState,f.lanes=y.lanes):(f.updateQueue=null,f.memoizedState=null)}var m=wx(o);if(m!==null){m.flags&=-257,xx(m,o,a,i,e),m.mode&1&&vx(i,u,e),e=m,l=u;var E=e.updateQueue;if(E===null){var b=new Set;b.add(l),e.updateQueue=b}else E.add(l);break e}else{if(!(e&1)){vx(i,u,e),pv();break e}l=Error(Re(426))}}else if(Pr&&a.mode&1){var A=wx(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),xx(A,o,a,i,e),K2(Zu(l,a));break e}}i=l=Zu(l,a),xn!==4&&(xn=2),Ad===null?Ad=[i]:Ad.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=C3(i,l,e);dx(i,x);break e;case 1:a=l;var T=i.type,I=i.stateNode;if(!(i.flags&128)&&(typeof T.getDerivedStateFromError=="function"||I!==null&&typeof I.componentDidCatch=="function"&&(_l===null||!_l.has(I)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=j3(i,a,e);dx(i,k);break e}}i=i.return}while(i!==null)}X3(r)}catch(H){e=H,un===r&&r!==null&&(un=r=r.return);continue}break}while(!0)}function Q3(){var t=jm.current;return jm.current=Cm,t===null?Cm:t}function pv(){(xn===0||xn===3||xn===2)&&(xn=4),Pn===null||!(Ec&268435455)&&!(wg&268435455)||al(Pn,qn)}function Om(t,e){var r=Yt;Yt|=2;var n=Q3();(Pn!==t||qn!==e)&&(sa=null,yc(t,e));do try{QP();break}catch(s){K3(t,s)}while(!0);if(Y2(),Yt=r,jm.current=n,un!==null)throw Error(Re(261));return Pn=null,qn=0,xn}function QP(){for(;un!==null;)Y3(un)}function YP(){for(;un!==null&&!_k();)Y3(un)}function Y3(t){var e=Z3(t.alternate,t,ai);t.memoizedProps=t.pendingProps,e===null?X3(t):un=e,cv.current=null}function X3(t){var e=t;do{var r=e.alternate;if(t=e.return,e.flags&32768){if(r=qP(r,e),r!==null){r.flags&=32767,un=r;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{xn=6,un=null;return}}else if(r=zP(r,e,ai),r!==null){un=r;return}if(e=e.sibling,e!==null){un=e;return}un=e=t}while(e!==null);xn===0&&(xn=5)}function oc(t,e,r){var n=lr,s=ji.transition;try{ji.transition=null,lr=1,XP(t,e,r,n)}finally{ji.transition=s,lr=n}return null}function XP(t,e,r,n){do Du();while(dl!==null);if(Yt&6)throw Error(Re(327));r=t.finishedWork;var s=t.finishedLanes;if(r===null)return null;if(t.finishedWork=null,t.finishedLanes=0,r===t.current)throw Error(Re(177));t.callbackNode=null,t.callbackPriority=0;var i=r.lanes|r.childLanes;if(Ck(t,i),t===Pn&&(un=Pn=null,qn=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||wp||(wp=!0,eE(gm,function(){return Du(),null})),i=(r.flags&15990)!==0,r.subtreeFlags&15990||i){i=ji.transition,ji.transition=null;var o=lr;lr=1;var a=Yt;Yt|=4,cv.current=null,HP(t,r),H3(r,t),yP(cy),vm=!!ly,cy=ly=null,t.current=r,WP(r),bk(),Yt=a,lr=o,ji.transition=i}else t.current=r;if(wp&&(wp=!1,dl=t,Rm=s),i=t.pendingLanes,i===0&&(_l=null),Ak(r.stateNode),Bs(t,rn()),e!==null)for(n=t.onRecoverableError,r=0;r<e.length;r++)s=e[r],n(s.value,{componentStack:s.stack,digest:s.digest});if(Lm)throw Lm=!1,t=ky,ky=null,t;return Rm&1&&t.tag!==0&&Du(),i=t.pendingLanes,i&1?t===Py?Sd++:(Sd=0,Py=t):Sd=0,Vl(),null}function Du(){if(dl!==null){var t=C4(Rm),e=ji.transition,r=lr;try{if(ji.transition=null,lr=16>t?16:t,dl===null)var n=!1;else{if(t=dl,dl=null,Rm=0,Yt&6)throw Error(Re(331));var s=Yt;for(Yt|=4,qe=t.current;qe!==null;){var i=qe,o=i.child;if(qe.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(qe=u;qe!==null;){var f=qe;switch(f.tag){case 0:case 11:case 15:Ed(8,f,i)}var g=f.child;if(g!==null)g.return=f,qe=g;else for(;qe!==null;){f=qe;var y=f.sibling,m=f.return;if(z3(f),f===u){qe=null;break}if(y!==null){y.return=m,qe=y;break}qe=m}}}var E=i.alternate;if(E!==null){var b=E.child;if(b!==null){E.child=null;do{var A=b.sibling;b.sibling=null,b=A}while(b!==null)}}qe=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,qe=o;else e:for(;qe!==null;){if(i=qe,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Ed(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,qe=x;break e}qe=i.return}}var T=t.current;for(qe=T;qe!==null;){o=qe;var I=o.child;if(o.subtreeFlags&2064&&I!==null)I.return=o,qe=I;else e:for(o=T;qe!==null;){if(a=qe,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:vg(9,a)}}catch(H){Wr(a,a.return,H)}if(a===o){qe=null;break e}var k=a.sibling;if(k!==null){k.return=a.return,qe=k;break e}qe=a.return}}if(Yt=s,Vl(),Co&&typeof Co.onPostCommitFiberRoot=="function")try{Co.onPostCommitFiberRoot(ug,t)}catch{}n=!0}return n}finally{lr=r,ji.transition=e}}return!1}function Lx(t,e,r){e=Zu(r,e),e=C3(t,e,1),t=xl(t,e,1),e=As(),t!==null&&(vf(t,1,e),Bs(t,e))}function Wr(t,e,r){if(t.tag===3)Lx(t,t,r);else for(;e!==null;){if(e.tag===3){Lx(e,t,r);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(_l===null||!_l.has(n))){t=Zu(r,t),t=j3(e,t,1),e=xl(e,t,1),t=As(),e!==null&&(vf(e,1,t),Bs(e,t));break}}e=e.return}}function JP(t,e,r){var n=t.pingCache;n!==null&&n.delete(e),e=As(),t.pingedLanes|=t.suspendedLanes&r,Pn===t&&(qn&r)===r&&(xn===4||xn===3&&(qn&130023424)===qn&&500>rn()-hv?yc(t,0):uv|=r),Bs(t,e)}function J3(t,e){e===0&&(t.mode&1?(e=cp,cp<<=1,!(cp&130023424)&&(cp=4194304)):e=1);var r=As();t=ba(t,e),t!==null&&(vf(t,e,r),Bs(t,r))}function ZP(t){var e=t.memoizedState,r=0;e!==null&&(r=e.retryLane),J3(t,r)}function eC(t,e){var r=0;switch(t.tag){case 13:var n=t.stateNode,s=t.memoizedState;s!==null&&(r=s.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Re(314))}n!==null&&n.delete(e),J3(t,r)}var Z3;Z3=function(t,e,r){if(t!==null)if(t.memoizedProps!==e.pendingProps||Us.current)Ms=!0;else{if(!(t.lanes&r)&&!(e.flags&128))return Ms=!1,BP(t,e,r);Ms=!!(t.flags&131072)}else Ms=!1,Pr&&e.flags&1048576&&n3(e,Am,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$p(t,e),t=e.pendingProps;var s=Qu(e,ds.current);Ou(e,r),s=sv(null,e,n,t,s,r);var i=iv();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Vs(n)?(i=!0,Nm(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,Z2(e),s.updater=yg,e.stateNode=s,s._reactInternals=e,vy(e,n,t,r),e=_y(null,e,n,!0,i,r)):(e.tag=0,Pr&&i&&W2(e),Ns(null,e,s,r),e=e.child),e;case 16:n=e.elementType;e:{switch($p(t,e),t=e.pendingProps,s=n._init,n=s(n._payload),e.type=n,s=e.tag=rC(n),t=Ki(n,t),s){case 0:e=xy(null,e,n,t,r);break e;case 1:e=Nx(null,e,n,t,r);break e;case 11:e=_x(null,e,n,t,r);break e;case 14:e=bx(null,e,n,Ki(n.type,t),r);break e}throw Error(Re(306,n,""))}return e;case 0:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ki(n,s),xy(t,e,n,s,r);case 1:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ki(n,s),Nx(t,e,n,s,r);case 3:e:{if(D3(e),t===null)throw Error(Re(387));n=e.pendingProps,i=e.memoizedState,s=i.element,c3(t,e),Im(e,n,null,r);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=Zu(Error(Re(423)),e),e=Ex(t,e,n,r,s);break e}else if(n!==s){s=Zu(Error(Re(424)),e),e=Ex(t,e,n,r,s);break e}else for(li=wl(e.stateNode.containerInfo.firstChild),hi=e,Pr=!0,Yi=null,r=a3(e,null,n,r),e.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(Yu(),n===s){e=Na(t,e,r);break e}Ns(t,e,n,r)}e=e.child}return e;case 5:return u3(e),t===null&&my(e),n=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,uy(n,s)?o=null:i!==null&&uy(n,i)&&(e.flags|=32),O3(t,e),Ns(t,e,o,r),e.child;case 6:return t===null&&my(e),null;case 13:return M3(t,e,r);case 4:return ev(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Xu(e,null,n,r):Ns(t,e,n,r),e.child;case 11:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ki(n,s),_x(t,e,n,s,r);case 7:return Ns(t,e,e.pendingProps,r),e.child;case 8:return Ns(t,e,e.pendingProps.children,r),e.child;case 12:return Ns(t,e,e.pendingProps.children,r),e.child;case 10:e:{if(n=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,_r(Sm,n._currentValue),n._currentValue=o,i!==null)if(no(i.value,o)){if(i.children===s.children&&!Us.current){e=Na(t,e,r);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){o=i.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(i.tag===1){l=pa(-1,r&-r),l.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var f=u.pending;f===null?l.next=l:(l.next=f.next,f.next=l),u.pending=l}}i.lanes|=r,l=i.alternate,l!==null&&(l.lanes|=r),gy(i.return,r,e),a.lanes|=r;break}l=l.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Re(341));o.lanes|=r,a=o.alternate,a!==null&&(a.lanes|=r),gy(o,r,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Ns(t,e,s.children,r),e=e.child}return e;case 9:return s=e.type,n=e.pendingProps.children,Ou(e,r),s=Ri(s),n=n(s),e.flags|=1,Ns(t,e,n,r),e.child;case 14:return n=e.type,s=Ki(n,e.pendingProps),s=Ki(n.type,s),bx(t,e,n,s,r);case 15:return L3(t,e,e.type,e.pendingProps,r);case 17:return n=e.type,s=e.pendingProps,s=e.elementType===n?s:Ki(n,s),$p(t,e),e.tag=1,Vs(n)?(t=!0,Nm(e)):t=!1,Ou(e,r),P3(e,n,s),vy(e,n,s,r),_y(null,e,n,!0,t,r);case 19:return F3(t,e,r);case 22:return R3(t,e,r)}throw Error(Re(156,e.tag))};function eE(t,e){return T4(t,e)}function tC(t,e,r,n){this.tag=t,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ci(t,e,r,n){return new tC(t,e,r,n)}function mv(t){return t=t.prototype,!(!t||!t.isReactComponent)}function rC(t){if(typeof t=="function")return mv(t)?1:0;if(t!=null){if(t=t.$$typeof,t===R2)return 11;if(t===O2)return 14}return 2}function Nl(t,e){var r=t.alternate;return r===null?(r=Ci(t.tag,e,t.key,t.mode),r.elementType=t.elementType,r.type=t.type,r.stateNode=t.stateNode,r.alternate=t,t.alternate=r):(r.pendingProps=e,r.type=t.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=t.flags&14680064,r.childLanes=t.childLanes,r.lanes=t.lanes,r.child=t.child,r.memoizedProps=t.memoizedProps,r.memoizedState=t.memoizedState,r.updateQueue=t.updateQueue,e=t.dependencies,r.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},r.sibling=t.sibling,r.index=t.index,r.ref=t.ref,r}function Gp(t,e,r,n,s,i){var o=2;if(n=t,typeof t=="function")mv(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case wu:return vc(r.children,s,i,e);case L2:o=8,s|=8;break;case z1:return t=Ci(12,r,e,s|2),t.elementType=z1,t.lanes=i,t;case q1:return t=Ci(13,r,e,s),t.elementType=q1,t.lanes=i,t;case $1:return t=Ci(19,r,e,s),t.elementType=$1,t.lanes=i,t;case u4:return xg(r,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l4:o=10;break e;case c4:o=9;break e;case R2:o=11;break e;case O2:o=14;break e;case sl:o=16,n=null;break e}throw Error(Re(130,t==null?t:typeof t,""))}return e=Ci(o,r,e,s),e.elementType=t,e.type=n,e.lanes=i,e}function vc(t,e,r,n){return t=Ci(7,t,n,e),t.lanes=r,t}function xg(t,e,r,n){return t=Ci(22,t,n,e),t.elementType=u4,t.lanes=r,t.stateNode={isHidden:!1},t}function Q0(t,e,r){return t=Ci(6,t,null,e),t.lanes=r,t}function Y0(t,e,r){return e=Ci(4,t.children!==null?t.children:[],t.key,e),e.lanes=r,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nC(t,e,r,n,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=P0(0),this.expirationTimes=P0(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=P0(0),this.identifierPrefix=n,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function gv(t,e,r,n,s,i,o,a,l){return t=new nC(t,e,r,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ci(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Z2(i),t}function sC(t,e,r){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:vu,key:n==null?null:""+n,children:t,containerInfo:e,implementation:r}}function tE(t){if(!t)return Pl;t=t._reactInternals;e:{if(Dc(t)!==t||t.tag!==1)throw Error(Re(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Vs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Re(171))}if(t.tag===1){var r=t.type;if(Vs(r))return t3(t,r,e)}return e}function rE(t,e,r,n,s,i,o,a,l){return t=gv(r,n,!0,t,s,i,o,a,l),t.context=tE(null),r=t.current,n=As(),s=bl(r),i=pa(n,s),i.callback=e??null,xl(r,i,s),t.current.lanes=s,vf(t,s,n),Bs(t,n),t}function _g(t,e,r,n){var s=e.current,i=As(),o=bl(s);return r=tE(r),e.context===null?e.context=r:e.pendingContext=r,e=pa(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=xl(s,e,o),t!==null&&(to(t,s,o,i),Bp(t,s,o)),o}function Dm(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Rx(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var r=t.retryLane;t.retryLane=r!==0&&r<e?r:e}}function yv(t,e){Rx(t,e),(t=t.alternate)&&Rx(t,e)}function iC(){return null}var nE=typeof reportError=="function"?reportError:function(t){console.error(t)};function vv(t){this._internalRoot=t}bg.prototype.render=vv.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Re(409));_g(t,e,null,null)};bg.prototype.unmount=vv.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ac(function(){_g(null,t,null,null)}),e[_a]=null}};function bg(t){this._internalRoot=t}bg.prototype.unstable_scheduleHydration=function(t){if(t){var e=R4();t={blockedOn:null,target:t,priority:e};for(var r=0;r<ol.length&&e!==0&&e<ol[r].priority;r++);ol.splice(r,0,t),r===0&&D4(t)}};function wv(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ng(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Ox(){}function oC(t,e,r,n,s){if(s){if(typeof n=="function"){var i=n;n=function(){var u=Dm(o);i.call(u)}}var o=rE(e,n,t,0,null,!1,!1,"",Ox);return t._reactRootContainer=o,t[_a]=o.current,zd(t.nodeType===8?t.parentNode:t),Ac(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof n=="function"){var a=n;n=function(){var u=Dm(l);a.call(u)}}var l=gv(t,0,!1,null,null,!1,!1,"",Ox);return t._reactRootContainer=l,t[_a]=l.current,zd(t.nodeType===8?t.parentNode:t),Ac(function(){_g(e,l,r,n)}),l}function Eg(t,e,r,n,s){var i=r._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var a=s;s=function(){var l=Dm(o);a.call(l)}}_g(e,o,t,s)}else o=oC(r,e,t,s,n);return Dm(o)}j4=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var r=cd(e.pendingLanes);r!==0&&(F2(e,r|1),Bs(e,rn()),!(Yt&6)&&(eh=rn()+500,Vl()))}break;case 13:Ac(function(){var n=ba(t,1);if(n!==null){var s=As();to(n,t,1,s)}}),yv(t,1)}};U2=function(t){if(t.tag===13){var e=ba(t,134217728);if(e!==null){var r=As();to(e,t,134217728,r)}yv(t,134217728)}};L4=function(t){if(t.tag===13){var e=bl(t),r=ba(t,e);if(r!==null){var n=As();to(r,t,e,n)}yv(t,e)}};R4=function(){return lr};O4=function(t,e){var r=lr;try{return lr=t,e()}finally{lr=r}};ey=function(t,e,r){switch(e){case"input":if(G1(t,r),e=r.name,r.type==="radio"&&e!=null){for(r=t;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<r.length;e++){var n=r[e];if(n!==t&&n.form===t.form){var s=pg(n);if(!s)throw Error(Re(90));d4(n),G1(n,s)}}}break;case"textarea":p4(t,r);break;case"select":e=r.value,e!=null&&Cu(t,!!r.multiple,e,!1)}};_4=dv;b4=Ac;var aC={usingClientEntryPoint:!1,Events:[xf,Nu,pg,w4,x4,dv]},td={findFiberByHostInstance:hc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lC={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ia.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=A4(t),t===null?null:t.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||iC,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xp=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xp.isDisabled&&xp.supportsFiber)try{ug=xp.inject(lC),Co=xp}catch{}}fi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aC;fi.createPortal=function(t,e){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wv(e))throw Error(Re(200));return sC(t,e,null,r)};fi.createRoot=function(t,e){if(!wv(t))throw Error(Re(299));var r=!1,n="",s=nE;return e!=null&&(e.unstable_strictMode===!0&&(r=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=gv(t,1,!1,null,null,r,!1,n,s),t[_a]=e.current,zd(t.nodeType===8?t.parentNode:t),new vv(e)};fi.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Re(188)):(t=Object.keys(t).join(","),Error(Re(268,t)));return t=A4(e),t=t===null?null:t.stateNode,t};fi.flushSync=function(t){return Ac(t)};fi.hydrate=function(t,e,r){if(!Ng(e))throw Error(Re(200));return Eg(null,t,e,!0,r)};fi.hydrateRoot=function(t,e,r){if(!wv(t))throw Error(Re(405));var n=r!=null&&r.hydratedSources||null,s=!1,i="",o=nE;if(r!=null&&(r.unstable_strictMode===!0&&(s=!0),r.identifierPrefix!==void 0&&(i=r.identifierPrefix),r.onRecoverableError!==void 0&&(o=r.onRecoverableError)),e=rE(e,null,t,1,r??null,s,!1,i,o),t[_a]=e.current,zd(t),n)for(t=0;t<n.length;t++)r=n[t],s=r._getVersion,s=s(r._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[r,s]:e.mutableSourceEagerHydrationData.push(r,s);return new bg(e)};fi.render=function(t,e,r){if(!Ng(e))throw Error(Re(200));return Eg(null,t,e,!1,r)};fi.unmountComponentAtNode=function(t){if(!Ng(t))throw Error(Re(40));return t._reactRootContainer?(Ac(function(){Eg(null,null,t,!1,function(){t._reactRootContainer=null,t[_a]=null})}),!0):!1};fi.unstable_batchedUpdates=dv;fi.unstable_renderSubtreeIntoContainer=function(t,e,r,n){if(!Ng(r))throw Error(Re(200));if(t==null||t._reactInternals===void 0)throw Error(Re(38));return Eg(t,e,r,!1,n)};fi.version="18.3.1-next-f1338f8080-20240426";function sE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(sE)}catch(t){console.error(t)}}sE(),s4.exports=fi;var cC=s4.exports,Dx=cC;V1.createRoot=Dx.createRoot,V1.hydrateRoot=Dx.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xd(){return Xd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Xd.apply(this,arguments)}var fl;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(fl||(fl={}));const Mx="popstate";function uC(t){t===void 0&&(t={});function e(n,s){let{pathname:i,search:o,hash:a}=n.location;return Ly("",{pathname:i,search:o,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function r(n,s){return typeof s=="string"?s:Mm(s)}return dC(e,r,null,t)}function an(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function iE(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function hC(){return Math.random().toString(36).substr(2,8)}function Fx(t,e){return{usr:t.state,key:t.key,idx:e}}function Ly(t,e,r,n){return r===void 0&&(r=null),Xd({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?wh(e):e,{state:r,key:e&&e.key||n||hC()})}function Mm(t){let{pathname:e="/",search:r="",hash:n=""}=t;return r&&r!=="?"&&(e+=r.charAt(0)==="?"?r:"?"+r),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function wh(t){let e={};if(t){let r=t.indexOf("#");r>=0&&(e.hash=t.substr(r),t=t.substr(0,r));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function dC(t,e,r,n){n===void 0&&(n={});let{window:s=document.defaultView,v5Compat:i=!1}=n,o=s.history,a=fl.Pop,l=null,u=f();u==null&&(u=0,o.replaceState(Xd({},o.state,{idx:u}),""));function f(){return(o.state||{idx:null}).idx}function g(){a=fl.Pop;let A=f(),x=A==null?null:A-u;u=A,l&&l({action:a,location:b.location,delta:x})}function y(A,x){a=fl.Push;let T=Ly(b.location,A,x);u=f()+1;let I=Fx(T,u),k=b.createHref(T);try{o.pushState(I,"",k)}catch(H){if(H instanceof DOMException&&H.name==="DataCloneError")throw H;s.location.assign(k)}i&&l&&l({action:a,location:b.location,delta:1})}function m(A,x){a=fl.Replace;let T=Ly(b.location,A,x);u=f();let I=Fx(T,u),k=b.createHref(T);o.replaceState(I,"",k),i&&l&&l({action:a,location:b.location,delta:0})}function E(A){let x=s.location.origin!=="null"?s.location.origin:s.location.href,T=typeof A=="string"?A:Mm(A);return T=T.replace(/ $/,"%20"),an(x,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,x)}let b={get action(){return a},get location(){return t(s,o)},listen(A){if(l)throw new Error("A history only accepts one active listener");return s.addEventListener(Mx,g),l=A,()=>{s.removeEventListener(Mx,g),l=null}},createHref(A){return e(s,A)},createURL:E,encodeLocation(A){let x=E(A);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:y,replace:m,go(A){return o.go(A)}};return b}var Ux;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ux||(Ux={}));function fC(t,e,r){return r===void 0&&(r="/"),pC(t,e,r)}function pC(t,e,r,n){let s=typeof e=="string"?wh(e):e,i=xv(s.pathname||"/",r);if(i==null)return null;let o=oE(t);mC(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=TC(i);a=EC(o[l],u)}return a}function oE(t,e,r,n){e===void 0&&(e=[]),r===void 0&&(r=[]),n===void 0&&(n="");let s=(i,o,a)=>{let l={relativePath:a===void 0?i.path||"":a,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};l.relativePath.startsWith("/")&&(an(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=El([n,l.relativePath]),f=r.concat(l);i.children&&i.children.length>0&&(an(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oE(i.children,e,f,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:bC(u,i.index),routesMeta:f})};return t.forEach((i,o)=>{var a;if(i.path===""||!((a=i.path)!=null&&a.includes("?")))s(i,o);else for(let l of aE(i.path))s(i,o,l)}),e}function aE(t){let e=t.split("/");if(e.length===0)return[];let[r,...n]=e,s=r.endsWith("?"),i=r.replace(/\?$/,"");if(n.length===0)return s?[i,""]:[i];let o=aE(n.join("/")),a=[];return a.push(...o.map(l=>l===""?i:[i,l].join("/"))),s&&a.push(...o),a.map(l=>t.startsWith("/")&&l===""?"/":l)}function mC(t){t.sort((e,r)=>e.score!==r.score?r.score-e.score:NC(e.routesMeta.map(n=>n.childrenIndex),r.routesMeta.map(n=>n.childrenIndex)))}const gC=/^:[\w-]+$/,yC=3,vC=2,wC=1,xC=10,_C=-2,Vx=t=>t==="*";function bC(t,e){let r=t.split("/"),n=r.length;return r.some(Vx)&&(n+=_C),e&&(n+=vC),r.filter(s=>!Vx(s)).reduce((s,i)=>s+(gC.test(i)?yC:i===""?wC:xC),n)}function NC(t,e){return t.length===e.length&&t.slice(0,-1).every((n,s)=>n===e[s])?t[t.length-1]-e[e.length-1]:0}function EC(t,e,r){let{routesMeta:n}=t,s={},i="/",o=[];for(let a=0;a<n.length;++a){let l=n[a],u=a===n.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=AC({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},f),y=l.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:El([i,g.pathname]),pathnameBase:CC(El([i,g.pathnameBase])),route:y}),g.pathnameBase!=="/"&&(i=El([i,g.pathnameBase]))}return o}function AC(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[r,n]=SC(t.path,t.caseSensitive,t.end),s=e.match(r);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),a=s.slice(1);return{params:n.reduce((u,f,g)=>{let{paramName:y,isOptional:m}=f;if(y==="*"){let b=a[g]||"";o=i.slice(0,i.length-b.length).replace(/(.)\/+$/,"$1")}const E=a[g];return m&&!E?u[y]=void 0:u[y]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function SC(t,e,r){e===void 0&&(e=!1),r===void 0&&(r=!0),iE(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(n.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),n]}function TC(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return iE(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function xv(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let r=e.endsWith("/")?e.length-1:e.length,n=t.charAt(r);return n&&n!=="/"?null:t.slice(r)||"/"}function IC(t,e){e===void 0&&(e="/");let{pathname:r,search:n="",hash:s=""}=typeof t=="string"?wh(t):t;return{pathname:r?r.startsWith("/")?r:kC(r,e):e,search:jC(n),hash:LC(s)}}function kC(t,e){let r=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?r.length>1&&r.pop():s!=="."&&r.push(s)}),r.length>1?r.join("/"):"/"}function X0(t,e,r,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function PC(t){return t.filter((e,r)=>r===0||e.route.path&&e.route.path.length>0)}function _v(t,e){let r=PC(t);return e?r.map((n,s)=>s===r.length-1?n.pathname:n.pathnameBase):r.map(n=>n.pathnameBase)}function bv(t,e,r,n){n===void 0&&(n=!1);let s;typeof t=="string"?s=wh(t):(s=Xd({},t),an(!s.pathname||!s.pathname.includes("?"),X0("?","pathname","search",s)),an(!s.pathname||!s.pathname.includes("#"),X0("#","pathname","hash",s)),an(!s.search||!s.search.includes("#"),X0("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,a;if(o==null)a=r;else{let g=e.length-1;if(!n&&o.startsWith("..")){let y=o.split("/");for(;y[0]==="..";)y.shift(),g-=1;s.pathname=y.join("/")}a=g>=0?e[g]:"/"}let l=IC(s,a),u=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&r.endsWith("/");return!l.pathname.endsWith("/")&&(u||f)&&(l.pathname+="/"),l}const El=t=>t.join("/").replace(/\/\/+/g,"/"),CC=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),jC=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,LC=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function RC(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const lE=["post","put","patch","delete"];new Set(lE);const OC=["get",...lE];new Set(OC);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Jd(){return Jd=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Jd.apply(this,arguments)}const Nv=ne.createContext(null),DC=ne.createContext(null),Bl=ne.createContext(null),Ag=ne.createContext(null),ka=ne.createContext({outlet:null,matches:[],isDataRoute:!1}),cE=ne.createContext(null);function MC(t,e){let{relative:r}=e===void 0?{}:e;xh()||an(!1);let{basename:n,navigator:s}=ne.useContext(Bl),{hash:i,pathname:o,search:a}=hE(t,{relative:r}),l=o;return n!=="/"&&(l=o==="/"?n:El([n,o])),s.createHref({pathname:l,search:a,hash:i})}function xh(){return ne.useContext(Ag)!=null}function Mc(){return xh()||an(!1),ne.useContext(Ag).location}function uE(t){ne.useContext(Bl).static||ne.useLayoutEffect(t)}function $s(){let{isDataRoute:t}=ne.useContext(ka);return t?YC():FC()}function FC(){xh()||an(!1);let t=ne.useContext(Nv),{basename:e,future:r,navigator:n}=ne.useContext(Bl),{matches:s}=ne.useContext(ka),{pathname:i}=Mc(),o=JSON.stringify(_v(s,r.v7_relativeSplatPath)),a=ne.useRef(!1);return uE(()=>{a.current=!0}),ne.useCallback(function(u,f){if(f===void 0&&(f={}),!a.current)return;if(typeof u=="number"){n.go(u);return}let g=bv(u,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:El([e,g.pathname])),(f.replace?n.replace:n.push)(g,f.state,f)},[e,n,o,i,t])}function Ev(){let{matches:t}=ne.useContext(ka),e=t[t.length-1];return e?e.params:{}}function hE(t,e){let{relative:r}=e===void 0?{}:e,{future:n}=ne.useContext(Bl),{matches:s}=ne.useContext(ka),{pathname:i}=Mc(),o=JSON.stringify(_v(s,n.v7_relativeSplatPath));return ne.useMemo(()=>bv(t,JSON.parse(o),i,r==="path"),[t,o,i,r])}function UC(t,e){return VC(t,e)}function VC(t,e,r,n){xh()||an(!1);let{navigator:s}=ne.useContext(Bl),{matches:i}=ne.useContext(ka),o=i[i.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=Mc(),f;if(e){var g;let A=typeof e=="string"?wh(e):e;l==="/"||(g=A.pathname)!=null&&g.startsWith(l)||an(!1),f=A}else f=u;let y=f.pathname||"/",m=y;if(l!=="/"){let A=l.replace(/^\//,"").split("/");m="/"+y.replace(/^\//,"").split("/").slice(A.length).join("/")}let E=fC(t,{pathname:m}),b=HC(E&&E.map(A=>Object.assign({},A,{params:Object.assign({},a,A.params),pathname:El([l,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?l:El([l,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,r,n);return e&&b?ne.createElement(Ag.Provider,{value:{location:Jd({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:fl.Pop}},b):b}function BC(){let t=QC(),e=RC(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),r=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ne.createElement(ne.Fragment,null,ne.createElement("h2",null,"Unexpected Application Error!"),ne.createElement("h3",{style:{fontStyle:"italic"}},e),r?ne.createElement("pre",{style:s},r):null,null)}const zC=ne.createElement(BC,null);class qC extends ne.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,r){return r.location!==e.location||r.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:r.error,location:r.location,revalidation:e.revalidation||r.revalidation}}componentDidCatch(e,r){console.error("React Router caught the following error during render",e,r)}render(){return this.state.error!==void 0?ne.createElement(ka.Provider,{value:this.props.routeContext},ne.createElement(cE.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function $C(t){let{routeContext:e,match:r,children:n}=t,s=ne.useContext(Nv);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),ne.createElement(ka.Provider,{value:e},n)}function HC(t,e,r,n){var s;if(e===void 0&&(e=[]),r===void 0&&(r=null),n===void 0&&(n=null),t==null){var i;if(!r)return null;if(r.errors)t=r.matches;else if((i=n)!=null&&i.v7_partialHydration&&e.length===0&&!r.initialized&&r.matches.length>0)t=r.matches;else return null}let o=t,a=(s=r)==null?void 0:s.errors;if(a!=null){let f=o.findIndex(g=>g.route.id&&(a==null?void 0:a[g.route.id])!==void 0);f>=0||an(!1),o=o.slice(0,Math.min(o.length,f+1))}let l=!1,u=-1;if(r&&n&&n.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(u=f),g.route.id){let{loaderData:y,errors:m}=r,E=g.route.loader&&y[g.route.id]===void 0&&(!m||m[g.route.id]===void 0);if(g.route.lazy||E){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((f,g,y)=>{let m,E=!1,b=null,A=null;r&&(m=a&&g.route.id?a[g.route.id]:void 0,b=g.route.errorElement||zC,l&&(u<0&&y===0?(XC("route-fallback"),E=!0,A=null):u===y&&(E=!0,A=g.route.hydrateFallbackElement||null)));let x=e.concat(o.slice(0,y+1)),T=()=>{let I;return m?I=b:E?I=A:g.route.Component?I=ne.createElement(g.route.Component,null):g.route.element?I=g.route.element:I=f,ne.createElement($C,{match:g,routeContext:{outlet:f,matches:x,isDataRoute:r!=null},children:I})};return r&&(g.route.ErrorBoundary||g.route.errorElement||y===0)?ne.createElement(qC,{location:r.location,revalidation:r.revalidation,component:b,error:m,children:T(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):T()},null)}var dE=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(dE||{}),fE=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(fE||{});function WC(t){let e=ne.useContext(Nv);return e||an(!1),e}function GC(t){let e=ne.useContext(DC);return e||an(!1),e}function KC(t){let e=ne.useContext(ka);return e||an(!1),e}function pE(t){let e=KC(),r=e.matches[e.matches.length-1];return r.route.id||an(!1),r.route.id}function QC(){var t;let e=ne.useContext(cE),r=GC(),n=pE();return e!==void 0?e:(t=r.errors)==null?void 0:t[n]}function YC(){let{router:t}=WC(dE.UseNavigateStable),e=pE(fE.UseNavigateStable),r=ne.useRef(!1);return uE(()=>{r.current=!0}),ne.useCallback(function(s,i){i===void 0&&(i={}),r.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,Jd({fromRouteId:e},i)))},[t,e])}const Bx={};function XC(t,e,r){Bx[t]||(Bx[t]=!0)}function JC(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Ry(t){let{to:e,replace:r,state:n,relative:s}=t;xh()||an(!1);let{future:i,static:o}=ne.useContext(Bl),{matches:a}=ne.useContext(ka),{pathname:l}=Mc(),u=$s(),f=bv(e,_v(a,i.v7_relativeSplatPath),l,s==="path"),g=JSON.stringify(f);return ne.useEffect(()=>u(JSON.parse(g),{replace:r,state:n,relative:s}),[u,g,s,r,n]),null}function Fn(t){an(!1)}function ZC(t){let{basename:e="/",children:r=null,location:n,navigationType:s=fl.Pop,navigator:i,static:o=!1,future:a}=t;xh()&&an(!1);let l=e.replace(/^\/*/,"/"),u=ne.useMemo(()=>({basename:l,navigator:i,static:o,future:Jd({v7_relativeSplatPath:!1},a)}),[l,a,i,o]);typeof n=="string"&&(n=wh(n));let{pathname:f="/",search:g="",hash:y="",state:m=null,key:E="default"}=n,b=ne.useMemo(()=>{let A=xv(f,l);return A==null?null:{location:{pathname:A,search:g,hash:y,state:m,key:E},navigationType:s}},[l,f,g,y,m,E,s]);return b==null?null:ne.createElement(Bl.Provider,{value:u},ne.createElement(Ag.Provider,{children:r,value:b}))}function ej(t){let{children:e,location:r}=t;return UC(Oy(e),r)}new Promise(()=>{});function Oy(t,e){e===void 0&&(e=[]);let r=[];return ne.Children.forEach(t,(n,s)=>{if(!ne.isValidElement(n))return;let i=[...e,s];if(n.type===ne.Fragment){r.push.apply(r,Oy(n.props.children,i));return}n.type!==Fn&&an(!1),!n.props.index||!n.props.children||an(!1);let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Oy(n.props.children,i)),r.push(o)}),r}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dy(){return Dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},Dy.apply(this,arguments)}function tj(t,e){if(t==null)return{};var r={},n=Object.keys(t),s,i;for(i=0;i<n.length;i++)s=n[i],!(e.indexOf(s)>=0)&&(r[s]=t[s]);return r}function rj(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nj(t,e){return t.button===0&&(!e||e==="_self")&&!rj(t)}function My(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,r)=>{let n=t[r];return e.concat(Array.isArray(n)?n.map(s=>[r,s]):[[r,n]])},[]))}function sj(t,e){let r=My(t);return e&&e.forEach((n,s)=>{r.has(s)||e.getAll(s).forEach(i=>{r.append(s,i)})}),r}const ij=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],oj="6";try{window.__reactRouterVersion=oj}catch{}const aj="startTransition",zx=JI[aj];function lj(t){let{basename:e,children:r,future:n,window:s}=t,i=ne.useRef();i.current==null&&(i.current=uC({window:s,v5Compat:!0}));let o=i.current,[a,l]=ne.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},f=ne.useCallback(g=>{u&&zx?zx(()=>l(g)):l(g)},[l,u]);return ne.useLayoutEffect(()=>o.listen(f),[o,f]),ne.useEffect(()=>JC(n),[n]),ne.createElement(ZC,{basename:e,children:r,location:a.location,navigationType:a.action,navigator:o,future:n})}const cj=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uj=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,gr=ne.forwardRef(function(e,r){let{onClick:n,relative:s,reloadDocument:i,replace:o,state:a,target:l,to:u,preventScrollReset:f,viewTransition:g}=e,y=tj(e,ij),{basename:m}=ne.useContext(Bl),E,b=!1;if(typeof u=="string"&&uj.test(u)&&(E=u,cj))try{let I=new URL(window.location.href),k=u.startsWith("//")?new URL(I.protocol+u):new URL(u),H=xv(k.pathname,m);k.origin===I.origin&&H!=null?u=H+k.search+k.hash:b=!0}catch{}let A=MC(u,{relative:s}),x=hj(u,{replace:o,state:a,target:l,preventScrollReset:f,relative:s,viewTransition:g});function T(I){n&&n(I),I.defaultPrevented||x(I)}return ne.createElement("a",Dy({},y,{href:E||A,onClick:b||i?n:T,ref:r,target:l}))});var qx;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(qx||(qx={}));var $x;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})($x||($x={}));function hj(t,e){let{target:r,replace:n,state:s,preventScrollReset:i,relative:o,viewTransition:a}=e===void 0?{}:e,l=$s(),u=Mc(),f=hE(t,{relative:o});return ne.useCallback(g=>{if(nj(g,r)){g.preventDefault();let y=n!==void 0?n:Mm(u)===Mm(f);l(t,{replace:y,state:s,preventScrollReset:i,relative:o,viewTransition:a})}},[u,l,f,n,s,r,t,i,o,a])}function mE(t){let e=ne.useRef(My(t)),r=ne.useRef(!1),n=Mc(),s=ne.useMemo(()=>sj(n.search,r.current?null:e.current),[n.search]),i=$s(),o=ne.useCallback((a,l)=>{const u=My(typeof a=="function"?a(s):a);r.current=!0,i("?"+u,l)},[i,s]);return[s,o]}var Hx={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=function(t){const e=[];let r=0;for(let n=0;n<t.length;n++){let s=t.charCodeAt(n);s<128?e[r++]=s:s<2048?(e[r++]=s>>6|192,e[r++]=s&63|128):(s&64512)===55296&&n+1<t.length&&(t.charCodeAt(n+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++n)&1023),e[r++]=s>>18|240,e[r++]=s>>12&63|128,e[r++]=s>>6&63|128,e[r++]=s&63|128):(e[r++]=s>>12|224,e[r++]=s>>6&63|128,e[r++]=s&63|128)}return e},dj=function(t){const e=[];let r=0,n=0;for(;r<t.length;){const s=t[r++];if(s<128)e[n++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[r++];e[n++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[r++],o=t[r++],a=t[r++],l=((s&7)<<18|(i&63)<<12|(o&63)<<6|a&63)-65536;e[n++]=String.fromCharCode(55296+(l>>10)),e[n++]=String.fromCharCode(56320+(l&1023))}else{const i=t[r++],o=t[r++];e[n++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},yE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const r=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,a=o?t[s+1]:0,l=s+2<t.length,u=l?t[s+2]:0,f=i>>2,g=(i&3)<<4|a>>4;let y=(a&15)<<2|u>>6,m=u&63;l||(m=64,o||(y=64)),n.push(r[f],r[g],r[y],r[m])}return n.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gE(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dj(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const r=e?this.charToByteMapWebSafe_:this.charToByteMap_,n=[];for(let s=0;s<t.length;){const i=r[t.charAt(s++)],a=s<t.length?r[t.charAt(s)]:0;++s;const u=s<t.length?r[t.charAt(s)]:64;++s;const g=s<t.length?r[t.charAt(s)]:64;if(++s,i==null||a==null||u==null||g==null)throw new fj;const y=i<<2|a>>4;if(n.push(y),u!==64){const m=a<<4&240|u>>2;if(n.push(m),g!==64){const E=u<<6&192|g;n.push(E)}}}return n},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class fj extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const pj=function(t){const e=gE(t);return yE.encodeByteArray(e,!0)},Fm=function(t){return pj(t).replace(/\./g,"")},vE=function(t){try{return yE.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mj(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gj=()=>mj().__FIREBASE_DEFAULTS__,yj=()=>{if(typeof process>"u"||typeof Hx>"u")return;const t=Hx.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},vj=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vE(t[1]);return e&&JSON.parse(e)},Sg=()=>{try{return gj()||yj()||vj()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},wE=t=>{var e,r;return(r=(e=Sg())===null||e===void 0?void 0:e.emulatorHosts)===null||r===void 0?void 0:r[t]},xE=t=>{const e=wE(t);if(!e)return;const r=e.lastIndexOf(":");if(r<=0||r+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const n=parseInt(e.substring(r+1),10);return e[0]==="["?[e.substring(1,r-1),n]:[e.substring(0,r),n]},_E=()=>{var t;return(t=Sg())===null||t===void 0?void 0:t.config},bE=t=>{var e;return(e=Sg())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}wrapCallback(e){return(r,n)=>{r?this.reject(r):this.resolve(n),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(r):e(r,n))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const r={alg:"none",type:"JWT"},n=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${n}`,aud:n,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Fm(JSON.stringify(r)),Fm(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fs(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function xj(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(fs())}function _j(){var t;const e=(t=Sg())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function bj(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Nj(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Ej(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Aj(){const t=fs();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Sj(){return!_j()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function EE(){try{return typeof indexedDB=="object"}catch{return!1}}function AE(){return new Promise((t,e)=>{try{let r=!0;const n="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(n);s.onsuccess=()=>{s.result.close(),r||self.indexedDB.deleteDatabase(n),t(!0)},s.onupgradeneeded=()=>{r=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(r){e(r)}})}function Tj(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ij="FirebaseError";class lo extends Error{constructor(e,r,n){super(r),this.code=e,this.customData=n,this.name=Ij,Object.setPrototypeOf(this,lo.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fc.prototype.create)}}class Fc{constructor(e,r,n){this.service=e,this.serviceName=r,this.errors=n}create(e,...r){const n=r[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?kj(i,n):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new lo(s,a,n)}}function kj(t,e){return t.replace(Pj,(r,n)=>{const s=e[n];return s!=null?String(s):`<${n}?>`})}const Pj=/\{\$([^}]+)}/g;function Cj(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Zd(t,e){if(t===e)return!0;const r=Object.keys(t),n=Object.keys(e);for(const s of r){if(!n.includes(s))return!1;const i=t[s],o=e[s];if(Wx(i)&&Wx(o)){if(!Zd(i,o))return!1}else if(i!==o)return!1}for(const s of n)if(!r.includes(s))return!1;return!0}function Wx(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(t){const e=[];for(const[r,n]of Object.entries(t))Array.isArray(n)?n.forEach(s=>{e.push(encodeURIComponent(r)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(r)+"="+encodeURIComponent(n));return e.length?"&"+e.join("&"):""}function hd(t){const e={};return t.replace(/^\?/,"").split("&").forEach(n=>{if(n){const[s,i]=n.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function dd(t){const e=t.indexOf("?");if(!e)return"";const r=t.indexOf("#",e);return t.substring(e,r>0?r:void 0)}function jj(t,e){const r=new Lj(t,e);return r.subscribe.bind(r)}class Lj{constructor(e,r){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=r,this.task.then(()=>{e(this)}).catch(n=>{this.error(n)})}next(e){this.forEachObserver(r=>{r.next(e)})}error(e){this.forEachObserver(r=>{r.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,r,n){let s;if(e===void 0&&r===void 0&&n===void 0)throw new Error("Missing Observer.");Rj(e,["next","error","complete"])?s=e:s={next:e,error:r,complete:n},s.next===void 0&&(s.next=J0),s.error===void 0&&(s.error=J0),s.complete===void 0&&(s.complete=J0);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let r=0;r<this.observers.length;r++)this.sendOne(r,e)}sendOne(e,r){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{r(this.observers[e])}catch(n){typeof console<"u"&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Rj(t,e){if(typeof t!="object"||t===null)return!1;for(const r of e)if(r in t&&typeof t[r]=="function")return!0;return!1}function J0(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cr(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,r,n){this.name=e,this.instanceFactory=r,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ac="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,r){this.name=e,this.container=r,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const r=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(r)){const n=new wj;if(this.instancesDeferred.set(r,n),this.isInitialized(r)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:r});s&&n.resolve(s)}catch{}}return this.instancesDeferred.get(r).promise}getImmediate(e){var r;const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(r=e==null?void 0:e.optional)!==null&&r!==void 0?r:!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Mj(e))try{this.getOrInitializeService({instanceIdentifier:ac})}catch{}for(const[r,n]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(r);try{const i=this.getOrInitializeService({instanceIdentifier:s});n.resolve(i)}catch{}}}}clearInstance(e=ac){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(r=>"INTERNAL"in r).map(r=>r.INTERNAL.delete()),...e.filter(r=>"_delete"in r).map(r=>r._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ac){return this.instances.has(e)}getOptions(e=ac){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:r={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error(`${this.name}(${n}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:n,options:r});for(const[i,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(i);n===a&&o.resolve(s)}return s}onInit(e,r){var n;const s=this.normalizeInstanceIdentifier(r),i=(n=this.onInitCallbacks.get(s))!==null&&n!==void 0?n:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,r){const n=this.onInitCallbacks.get(r);if(n)for(const s of n)try{s(e,r)}catch{}}getOrInitializeService({instanceIdentifier:e,options:r={}}){let n=this.instances.get(e);if(!n&&this.component&&(n=this.component.instanceFactory(this.container,{instanceIdentifier:Dj(e),options:r}),this.instances.set(e,n),this.instancesOptions.set(e,r),this.invokeOnInitCallbacks(n,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,n)}catch{}return n||null}normalizeInstanceIdentifier(e=ac){return this.component?this.component.multipleInstances?e:ac:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dj(t){return t===ac?void 0:t}function Mj(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fj{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const r=this.getProvider(e.name);if(r.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);r.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const r=new Oj(e,this);return this.providers.set(e,r),r}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var $t;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})($t||($t={}));const Uj={debug:$t.DEBUG,verbose:$t.VERBOSE,info:$t.INFO,warn:$t.WARN,error:$t.ERROR,silent:$t.SILENT},Vj=$t.INFO,Bj={[$t.DEBUG]:"log",[$t.VERBOSE]:"log",[$t.INFO]:"info",[$t.WARN]:"warn",[$t.ERROR]:"error"},zj=(t,e,...r)=>{if(e<t.logLevel)return;const n=new Date().toISOString(),s=Bj[e];if(s)console[s](`[${n}]  ${t.name}:`,...r);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Av{constructor(e){this.name=e,this._logLevel=Vj,this._logHandler=zj,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $t))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Uj[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$t.DEBUG,...e),this._logHandler(this,$t.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$t.VERBOSE,...e),this._logHandler(this,$t.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$t.INFO,...e),this._logHandler(this,$t.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$t.WARN,...e),this._logHandler(this,$t.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$t.ERROR,...e),this._logHandler(this,$t.ERROR,...e)}}const qj=(t,e)=>e.some(r=>t instanceof r);let Gx,Kx;function $j(){return Gx||(Gx=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Hj(){return Kx||(Kx=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const SE=new WeakMap,Fy=new WeakMap,TE=new WeakMap,Z0=new WeakMap,Sv=new WeakMap;function Wj(t){const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{r(ma(t.result)),s()},o=()=>{n(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(r=>{r instanceof IDBCursor&&SE.set(r,t)}).catch(()=>{}),Sv.set(e,t),e}function Gj(t){if(Fy.has(t))return;const e=new Promise((r,n)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{r(),s()},o=()=>{n(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});Fy.set(t,e)}let Uy={get(t,e,r){if(t instanceof IDBTransaction){if(e==="done")return Fy.get(t);if(e==="objectStoreNames")return t.objectStoreNames||TE.get(t);if(e==="store")return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return ma(t[e])},set(t,e,r){return t[e]=r,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Kj(t){Uy=t(Uy)}function Qj(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...r){const n=t.call(e1(this),e,...r);return TE.set(n,e.sort?e.sort():[e]),ma(n)}:Hj().includes(t)?function(...e){return t.apply(e1(this),e),ma(SE.get(this))}:function(...e){return ma(t.apply(e1(this),e))}}function Yj(t){return typeof t=="function"?Qj(t):(t instanceof IDBTransaction&&Gj(t),qj(t,$j())?new Proxy(t,Uy):t)}function ma(t){if(t instanceof IDBRequest)return Wj(t);if(Z0.has(t))return Z0.get(t);const e=Yj(t);return e!==t&&(Z0.set(t,e),Sv.set(e,t)),e}const e1=t=>Sv.get(t);function Tg(t,e,{blocked:r,upgrade:n,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),a=ma(o);return n&&o.addEventListener("upgradeneeded",l=>{n(ma(o.result),l.oldVersion,l.newVersion,ma(o.transaction),l)}),r&&o.addEventListener("blocked",l=>r(l.oldVersion,l.newVersion,l)),a.then(l=>{i&&l.addEventListener("close",()=>i()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}function t1(t,{blocked:e}={}){const r=indexedDB.deleteDatabase(t);return e&&r.addEventListener("blocked",n=>e(n.oldVersion,n)),ma(r).then(()=>{})}const Xj=["get","getKey","getAll","getAllKeys","count"],Jj=["put","add","delete","clear"],r1=new Map;function Qx(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(r1.get(e))return r1.get(e);const r=e.replace(/FromIndex$/,""),n=e!==r,s=Jj.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!(s||Xj.includes(r)))return;const i=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(a.shift())),(await Promise.all([u[r](...a),s&&l.done]))[0]};return r1.set(e,i),i}Kj(t=>({...t,get:(e,r,n)=>Qx(e,r)||t.get(e,r,n),has:(e,r)=>!!Qx(e,r)||t.has(e,r)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(r=>{if(eL(r)){const n=r.getImmediate();return`${n.library}/${n.version}`}else return null}).filter(r=>r).join(" ")}}function eL(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Vy="@firebase/app",Yx="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=new Av("@firebase/app"),tL="@firebase/app-compat",rL="@firebase/analytics-compat",nL="@firebase/analytics",sL="@firebase/app-check-compat",iL="@firebase/app-check",oL="@firebase/auth",aL="@firebase/auth-compat",lL="@firebase/database",cL="@firebase/data-connect",uL="@firebase/database-compat",hL="@firebase/functions",dL="@firebase/functions-compat",fL="@firebase/installations",pL="@firebase/installations-compat",mL="@firebase/messaging",gL="@firebase/messaging-compat",yL="@firebase/performance",vL="@firebase/performance-compat",wL="@firebase/remote-config",xL="@firebase/remote-config-compat",_L="@firebase/storage",bL="@firebase/storage-compat",NL="@firebase/firestore",EL="@firebase/vertexai-preview",AL="@firebase/firestore-compat",SL="firebase",TL="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const By="[DEFAULT]",IL={[Vy]:"fire-core",[tL]:"fire-core-compat",[nL]:"fire-analytics",[rL]:"fire-analytics-compat",[iL]:"fire-app-check",[sL]:"fire-app-check-compat",[oL]:"fire-auth",[aL]:"fire-auth-compat",[lL]:"fire-rtdb",[cL]:"fire-data-connect",[uL]:"fire-rtdb-compat",[hL]:"fire-fn",[dL]:"fire-fn-compat",[fL]:"fire-iid",[pL]:"fire-iid-compat",[mL]:"fire-fcm",[gL]:"fire-fcm-compat",[yL]:"fire-perf",[vL]:"fire-perf-compat",[wL]:"fire-rc",[xL]:"fire-rc-compat",[_L]:"fire-gcs",[bL]:"fire-gcs-compat",[NL]:"fire-fst",[AL]:"fire-fst-compat",[EL]:"fire-vertex","fire-js":"fire-js",[SL]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Um=new Map,kL=new Map,zy=new Map;function Xx(t,e){try{t.container.addComponent(e)}catch(r){Ea.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,r)}}function so(t){const e=t.name;if(zy.has(e))return Ea.debug(`There were multiple attempts to register component ${e}.`),!1;zy.set(e,t);for(const r of Um.values())Xx(r,t);for(const r of kL.values())Xx(r,t);return!0}function Uc(t,e){const r=t.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),t.container.getProvider(e)}function Xi(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PL={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Al=new Fc("app","Firebase",PL);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CL{constructor(e,r,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},r),this._name=r.name,this._automaticDataCollectionEnabled=r.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Al.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=TL;function IE(t,e={}){let r=t;typeof e!="object"&&(e={name:e});const n=Object.assign({name:By,automaticDataCollectionEnabled:!1},e),s=n.name;if(typeof s!="string"||!s)throw Al.create("bad-app-name",{appName:String(s)});if(r||(r=_E()),!r)throw Al.create("no-options");const i=Um.get(s);if(i){if(Zd(r,i.options)&&Zd(n,i.config))return i;throw Al.create("duplicate-app",{appName:s})}const o=new Fj(s);for(const l of zy.values())o.addComponent(l);const a=new CL(r,n,o);return Um.set(s,a),a}function Ig(t=By){const e=Um.get(t);if(!e&&t===By&&_E())return IE();if(!e)throw Al.create("no-app",{appName:t});return e}function zs(t,e,r){var n;let s=(n=IL[t])!==null&&n!==void 0?n:t;r&&(s+=`-${r}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const a=[`Unable to register library "${s}" with version "${e}":`];i&&a.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ea.warn(a.join(" "));return}so(new Di(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jL="firebase-heartbeat-database",LL=1,ef="firebase-heartbeat-store";let n1=null;function kE(){return n1||(n1=Tg(jL,LL,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ef)}catch(r){console.warn(r)}}}}).catch(t=>{throw Al.create("idb-open",{originalErrorMessage:t.message})})),n1}async function RL(t){try{const r=(await kE()).transaction(ef),n=await r.objectStore(ef).get(PE(t));return await r.done,n}catch(e){if(e instanceof lo)Ea.warn(e.message);else{const r=Al.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ea.warn(r.message)}}}async function Jx(t,e){try{const n=(await kE()).transaction(ef,"readwrite");await n.objectStore(ef).put(e,PE(t)),await n.done}catch(r){if(r instanceof lo)Ea.warn(r.message);else{const n=Al.create("idb-set",{originalErrorMessage:r==null?void 0:r.message});Ea.warn(n.message)}}}function PE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OL=1024,DL=30*24*60*60*1e3;class ML{constructor(e){this.container=e,this._heartbeatsCache=null;const r=this.container.getProvider("app").getImmediate();this._storage=new UL(r),this._heartbeatsCachePromise=this._storage.read().then(n=>(this._heartbeatsCache=n,n))}async triggerHeartbeat(){var e,r;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Zx();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((r=this._heartbeatsCache)===null||r===void 0?void 0:r.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=DL}),this._storage.overwrite(this._heartbeatsCache))}catch(n){Ea.warn(n)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const r=Zx(),{heartbeatsToSend:n,unsentEntries:s}=FL(this._heartbeatsCache.heartbeats),i=Fm(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=r,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(r){return Ea.warn(r),""}}}function Zx(){return new Date().toISOString().substring(0,10)}function FL(t,e=OL){const r=[];let n=t.slice();for(const s of t){const i=r.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),e_(r)>e){i.dates.pop();break}}else if(r.push({agent:s.agent,dates:[s.date]}),e_(r)>e){r.pop();break}n=n.slice(1)}return{heartbeatsToSend:r,unsentEntries:n}}class UL{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return EE()?AE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const r=await RL(this.app);return r!=null&&r.heartbeats?r:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var r;if(await this._canUseIndexedDBPromise){const s=await this.read();return Jx(this.app,{lastSentHeartbeatDate:(r=e.lastSentHeartbeatDate)!==null&&r!==void 0?r:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function e_(t){return Fm(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VL(t){so(new Di("platform-logger",e=>new Zj(e),"PRIVATE")),so(new Di("heartbeat",e=>new ML(e),"PRIVATE")),zs(Vy,Yx,t),zs(Vy,Yx,"esm2017"),zs("fire-js","")}VL("");function Tv(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r}function CE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const BL=CE,jE=new Fc("auth","Firebase",CE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=new Av("@firebase/auth");function zL(t,...e){Vm.logLevel<=$t.WARN&&Vm.warn(`Auth (${Vc}): ${t}`,...e)}function Kp(t,...e){Vm.logLevel<=$t.ERROR&&Vm.error(`Auth (${Vc}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mi(t,...e){throw kv(t,...e)}function ro(t,...e){return kv(t,...e)}function Iv(t,e,r){const n=Object.assign(Object.assign({},BL()),{[e]:r});return new Fc("auth","Firebase",n).create(e,{appName:t.name})}function ga(t){return Iv(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qL(t,e,r){const n=r;if(!(e instanceof n))throw n.name!==e.constructor.name&&Mi(t,"argument-error"),Iv(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function kv(t,...e){if(typeof t!="string"){const r=e[0],n=[...e.slice(1)];return n[0]&&(n[0].appName=t.name),t._errorFactory.create(r,...n)}return jE.create(t,...e)}function gt(t,e,...r){if(!t)throw kv(e,...r)}function ha(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Kp(e),new Error(e)}function Aa(t,e){t||ha(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function $L(){return t_()==="http:"||t_()==="https:"}function t_(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HL(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($L()||Nj()||"connection"in navigator)?navigator.onLine:!0}function WL(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nf{constructor(e,r){this.shortDelay=e,this.longDelay=r,Aa(r>e,"Short delay should be less than long delay!"),this.isMobile=xj()||Ej()}get(){return HL()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pv(t,e){Aa(t.emulator,"Emulator should always be set here");const{url:r}=t.emulator;return e?`${r}${e.startsWith("/")?e.slice(1):e}`:r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LE{static initialize(e,r,n){this.fetchImpl=e,r&&(this.headersImpl=r),n&&(this.responseImpl=n)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ha("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ha("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ha("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KL=new Nf(3e4,6e4);function Pa(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Uo(t,e,r,n,s={}){return RE(t,s,async()=>{let i={},o={};n&&(e==="GET"?o=n:i={body:JSON.stringify(n)});const a=bf(Object.assign({key:t.config.apiKey},o)).slice(1),l=await t._getAdditionalHeaders();l["Content-Type"]="application/json",t.languageCode&&(l["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:l},i);return bj()||(u.referrerPolicy="no-referrer"),LE.fetch()(OE(t,t.config.apiHost,r,a),u)})}async function RE(t,e,r){t._canInitEmulator=!1;const n=Object.assign(Object.assign({},GL),e);try{const s=new YL(t),i=await Promise.race([r(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw _p(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const a=i.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw _p(t,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw _p(t,"email-already-in-use",o);if(l==="USER_DISABLED")throw _p(t,"user-disabled",o);const f=n[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Iv(t,f,u);Mi(t,f)}}catch(s){if(s instanceof lo)throw s;Mi(t,"network-request-failed",{message:String(s)})}}async function Ef(t,e,r,n,s={}){const i=await Uo(t,e,r,n,s);return"mfaPendingCredential"in i&&Mi(t,"multi-factor-auth-required",{_serverResponse:i}),i}function OE(t,e,r,n){const s=`${e}${r}?${n}`;return t.config.emulator?Pv(t.config,s):`${t.config.apiScheme}://${s}`}function QL(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class YL{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((r,n)=>{this.timer=setTimeout(()=>n(ro(this.auth,"network-request-failed")),KL.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function _p(t,e,r){const n={appName:t.name};r.email&&(n.email=r.email),r.phoneNumber&&(n.phoneNumber=r.phoneNumber);const s=ro(t,e,n);return s.customData._tokenResponse=r,s}function r_(t){return t!==void 0&&t.enterprise!==void 0}class XL{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const r of this.recaptchaEnforcementState)if(r.provider&&r.provider===e)return QL(r.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function JL(t,e){return Uo(t,"GET","/v2/recaptchaConfig",Pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZL(t,e){return Uo(t,"POST","/v1/accounts:delete",e)}async function DE(t,e){return Uo(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eR(t,e=!1){const r=Cr(t),n=await r.getIdToken(e),s=Cv(n);gt(s&&s.exp&&s.auth_time&&s.iat,r.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:n,authTime:Td(s1(s.auth_time)),issuedAtTime:Td(s1(s.iat)),expirationTime:Td(s1(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function s1(t){return Number(t)*1e3}function Cv(t){const[e,r,n]=t.split(".");if(e===void 0||r===void 0||n===void 0)return Kp("JWT malformed, contained fewer than 3 sections"),null;try{const s=vE(r);return s?JSON.parse(s):(Kp("Failed to decode base64 JWT payload"),null)}catch(s){return Kp("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function n_(t){const e=Cv(t);return gt(e,"internal-error"),gt(typeof e.exp<"u","internal-error"),gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function th(t,e,r=!1){if(r)return e;try{return await e}catch(n){throw n instanceof lo&&tR(n)&&t.auth.currentUser===t&&await t.auth.signOut(),n}}function tR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var r;if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const s=((r=this.user.stsTokenManager.expirationTime)!==null&&r!==void 0?r:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const r=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},r)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(e,r){this.createdAt=e,this.lastLoginAt=r,this._initializeTime()}_initializeTime(){this.lastSignInTime=Td(this.lastLoginAt),this.creationTime=Td(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t){var e;const r=t.auth,n=await t.getIdToken(),s=await th(t,DE(r,{idToken:n}));gt(s==null?void 0:s.users.length,r,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?ME(i.providerUserInfo):[],a=sR(t.providerData,o),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(a!=null&&a.length),f=l?u:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:a,metadata:new $y(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function nR(t){const e=Cr(t);await Bm(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function sR(t,e){return[...t.filter(n=>!e.some(s=>s.providerId===n.providerId)),...e]}function ME(t){return t.map(e=>{var{providerId:r}=e,n=Tv(e,["providerId"]);return{providerId:r,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iR(t,e){const r=await RE(t,{},async()=>{const n=bf({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=OE(t,s,"/v1/token",`key=${i}`),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",LE.fetch()(o,{method:"POST",headers:a,body:n})});return{accessToken:r.access_token,expiresIn:r.expires_in,refreshToken:r.refresh_token}}async function oR(t,e){return Uo(t,"POST","/v2/accounts:revokeToken",Pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){gt(e.idToken,"internal-error"),gt(typeof e.idToken<"u","internal-error"),gt(typeof e.refreshToken<"u","internal-error");const r="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):n_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,r)}updateFromIdToken(e){gt(e.length!==0,"internal-error");const r=n_(e);this.updateTokensAndExpiration(e,null,r)}async getToken(e,r=!1){return!r&&this.accessToken&&!this.isExpired?this.accessToken:(gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,r){const{accessToken:n,refreshToken:s,expiresIn:i}=await iR(e,r);this.updateTokensAndExpiration(n,s,Number(i))}updateTokensAndExpiration(e,r,n){this.refreshToken=r||null,this.accessToken=e||null,this.expirationTime=Date.now()+n*1e3}static fromJSON(e,r){const{refreshToken:n,accessToken:s,expirationTime:i}=r,o=new Mu;return n&&(gt(typeof n=="string","internal-error",{appName:e}),o.refreshToken=n),s&&(gt(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(gt(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mu,this.toJSON())}_performRefresh(){return ha("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tl(t,e){gt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class da{constructor(e){var{uid:r,auth:n,stsTokenManager:s}=e,i=Tv(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new rR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=r,this.auth=n,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new $y(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const r=await th(this,this.stsTokenManager.getToken(this.auth,e));return gt(r,this.auth,"internal-error"),this.accessToken!==r&&(this.accessToken=r,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),r}getIdTokenResult(e){return eR(this,e)}reload(){return nR(this)}_assign(e){this!==e&&(gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(r=>Object.assign({},r)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const r=new da(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return r.metadata._copy(this.metadata),r}_onReload(e){gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,r=!1){let n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),r&&await Bm(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Xi(this.auth.app))return Promise.reject(ga(this.auth));const e=await this.getIdToken();return await th(this,ZL(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,r){var n,s,i,o,a,l,u,f;const g=(n=r.displayName)!==null&&n!==void 0?n:void 0,y=(s=r.email)!==null&&s!==void 0?s:void 0,m=(i=r.phoneNumber)!==null&&i!==void 0?i:void 0,E=(o=r.photoURL)!==null&&o!==void 0?o:void 0,b=(a=r.tenantId)!==null&&a!==void 0?a:void 0,A=(l=r._redirectEventId)!==null&&l!==void 0?l:void 0,x=(u=r.createdAt)!==null&&u!==void 0?u:void 0,T=(f=r.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:I,emailVerified:k,isAnonymous:H,providerData:Z,stsTokenManager:F}=r;gt(I&&F,e,"internal-error");const P=Mu.fromJSON(this.name,F);gt(typeof I=="string",e,"internal-error"),tl(g,e.name),tl(y,e.name),gt(typeof k=="boolean",e,"internal-error"),gt(typeof H=="boolean",e,"internal-error"),tl(m,e.name),tl(E,e.name),tl(b,e.name),tl(A,e.name),tl(x,e.name),tl(T,e.name);const C=new da({uid:I,auth:e,email:y,emailVerified:k,displayName:g,isAnonymous:H,photoURL:E,phoneNumber:m,tenantId:b,stsTokenManager:P,createdAt:x,lastLoginAt:T});return Z&&Array.isArray(Z)&&(C.providerData=Z.map(O=>Object.assign({},O))),A&&(C._redirectEventId=A),C}static async _fromIdTokenResponse(e,r,n=!1){const s=new Mu;s.updateFromServerResponse(r);const i=new da({uid:r.localId,auth:e,stsTokenManager:s,isAnonymous:n});return await Bm(i),i}static async _fromGetAccountInfoResponse(e,r,n){const s=r.users[0];gt(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?ME(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),a=new Mu;a.updateFromIdToken(n);const l=new da({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new $y(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s_=new Map;function fa(t){Aa(t instanceof Function,"Expected a class definition");let e=s_.get(t);return e?(Aa(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,s_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,r){this.storage[e]=r}async _get(e){const r=this.storage[e];return r===void 0?null:r}async _remove(e){delete this.storage[e]}_addListener(e,r){}_removeListener(e,r){}}FE.type="NONE";const i_=FE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e,r){return`firebase:${t}:${e}:${r}`}class Fu{constructor(e,r,n){this.persistence=e,this.auth=r,this.userKey=n;const{config:s,name:i}=this.auth;this.fullUserKey=Qp(this.userKey,s.apiKey,i),this.fullPersistenceKey=Qp("persistence",s.apiKey,i),this.boundEventHandler=r._onStorageEvent.bind(r),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?da._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const r=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,r)return this.setCurrentUser(r)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,r,n="authUser"){if(!r.length)return new Fu(fa(i_),e,n);const s=(await Promise.all(r.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let i=s[0]||fa(i_);const o=Qp(n,e.config.apiKey,e.name);let a=null;for(const u of r)try{const f=await u._get(o);if(f){const g=da._fromJSON(e,f);u!==i&&(a=g),i=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!i._shouldAllowMigration||!l.length?new Fu(i,e,n):(i=l[0],a&&await i._set(o,a.toJSON()),await Promise.all(r.map(async u=>{if(u!==i)try{await u._remove(o)}catch{}})),new Fu(i,e,n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(UE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if($E(e))return"Blackberry";if(HE(e))return"Webos";if(VE(e))return"Safari";if((e.includes("chrome/")||BE(e))&&!e.includes("edge/"))return"Chrome";if(qE(e))return"Android";{const r=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=t.match(r);if((n==null?void 0:n.length)===2)return n[1]}return"Other"}function UE(t=fs()){return/firefox\//i.test(t)}function VE(t=fs()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function BE(t=fs()){return/crios\//i.test(t)}function zE(t=fs()){return/iemobile/i.test(t)}function qE(t=fs()){return/android/i.test(t)}function $E(t=fs()){return/blackberry/i.test(t)}function HE(t=fs()){return/webos/i.test(t)}function jv(t=fs()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aR(t=fs()){var e;return jv(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function lR(){return Aj()&&document.documentMode===10}function WE(t=fs()){return jv(t)||qE(t)||HE(t)||$E(t)||/windows phone/i.test(t)||zE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GE(t,e=[]){let r;switch(t){case"Browser":r=o_(fs());break;case"Worker":r=`${o_(fs())}-${t}`;break;default:r=t}const n=e.length?e.join(","):"FirebaseCore-web";return`${r}/JsCore/${Vc}/${n}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,r){const n=i=>new Promise((o,a)=>{try{const l=e(i);o(l)}catch(l){a(l)}});n.onAbort=r,this.queue.push(n);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const r=[];try{for(const n of this.queue)await n(e),n.onAbort&&r.push(n.onAbort)}catch(n){r.reverse();for(const s of r)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:n==null?void 0:n.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uR(t,e={}){return Uo(t,"GET","/v2/passwordPolicy",Pa(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=6;class dR{constructor(e){var r,n,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(r=o.minPasswordLength)!==null&&r!==void 0?r:hR,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(n=e.allowedNonAlphanumericCharacters)===null||n===void 0?void 0:n.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var r,n,s,i,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(r=l.meetsMinPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(n=l.meetsMaxPasswordLength)!==null&&n!==void 0?n:!0),l.isValid&&(l.isValid=(s=l.containsLowercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(i=l.containsUppercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,r){const n=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;n&&(r.meetsMinPasswordLength=e.length>=n),s&&(r.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,r){this.updatePasswordCharacterOptionsStatuses(r,!1,!1,!1,!1);let n;for(let s=0;s<e.length;s++)n=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(r,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,r,n,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=r)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,r,n,s){this.app=e,this.heartbeatServiceProvider=r,this.appCheckServiceProvider=n,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new a_(this),this.idTokenSubscription=new a_(this),this.beforeStateQueue=new cR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=jE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,r){return r&&(this._popupRedirectResolver=fa(r)),this._initializationPromise=this.queue(async()=>{var n,s;if(!this._deleted&&(this.persistenceManager=await Fu.create(this,e),!this._deleted)){if(!((n=this._popupRedirectResolver)===null||n===void 0)&&n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(r),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const r=await DE(this,{idToken:e}),n=await da._fromGetAccountInfoResponse(this,r,e);await this.directlySetCurrentUser(n)}catch(r){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",r),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(Xi(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let s=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId,a=s==null?void 0:s._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(s=l.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let r=null;try{r=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return r}async reloadAndSetCurrentUserOrClear(e){try{await Bm(e)}catch(r){if((r==null?void 0:r.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=WL()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Xi(this.app))return Promise.reject(ga(this));const r=e?Cr(e):null;return r&&gt(r.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(r&&r._clone(this))}async _updateCurrentUser(e,r=!1){if(!this._deleted)return e&&gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),r||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Xi(this.app)?Promise.reject(ga(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Xi(this.app)?Promise.reject(ga(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(fa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const r=this._getPasswordPolicyInternal();return r.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):r.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await uR(this),r=new dR(e);this.tenantId===null?this._projectPasswordPolicy=r:this._tenantPasswordPolicies[this.tenantId]=r}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Fc("auth","Firebase",e())}onAuthStateChanged(e,r,n){return this.registerStateListener(this.authStateSubscription,e,r,n)}beforeAuthStateChanged(e,r){return this.beforeStateQueue.pushCallback(e,r)}onIdTokenChanged(e,r,n){return this.registerStateListener(this.idTokenSubscription,e,r,n)}authStateReady(){return new Promise((e,r)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},r)}})}async revokeAccessToken(e){if(this.currentUser){const r=await this.currentUser.getIdToken(),n={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:r};this.tenantId!=null&&(n.tenantId=this.tenantId),await oR(this,n)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,r){const n=await this.getOrInitRedirectPersistenceManager(r);return e===null?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const r=e&&fa(e)||this._popupRedirectResolver;gt(r,this,"argument-error"),this.redirectPersistenceManager=await Fu.create(this,[fa(r._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var r,n;return this._isInitialized&&await this.queue(async()=>{}),((r=this._currentUser)===null||r===void 0?void 0:r._redirectEventId)===e?this._currentUser:((n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,r;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=(r=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&r!==void 0?r:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,r,n,s){if(this._deleted)return()=>{};const i=typeof r=="function"?r:r.next.bind(r);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(gt(a,this,"internal-error"),a.then(()=>{o||i(this.currentUser)}),typeof r=="function"){const l=e.addObserver(r,n,s);return()=>{o=!0,l()}}else{const l=e.addObserver(r);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=GE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const r={"X-Client-Version":this.clientVersion};this.app.options.appId&&(r["X-Firebase-gmpid"]=this.app.options.appId);const n=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());n&&(r["X-Firebase-Client"]=n);const s=await this._getAppCheckToken();return s&&(r["X-Firebase-AppCheck"]=s),r}async _getAppCheckToken(){var e;const r=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return r!=null&&r.error&&zL(`Error while retrieving App Check token: ${r.error}`),r==null?void 0:r.token}}function Ca(t){return Cr(t)}class a_{constructor(e){this.auth=e,this.observer=null,this.addObserver=jj(r=>this.observer=r)}get next(){return gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kg={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pR(t){kg=t}function KE(t){return kg.loadJS(t)}function mR(){return kg.recaptchaEnterpriseScript}function gR(){return kg.gapiScript}function yR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const vR="recaptcha-enterprise",wR="NO_RECAPTCHA";class xR{constructor(e){this.type=vR,this.auth=Ca(e)}async verify(e="verify",r=!1){async function n(i){if(!r){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,a)=>{JL(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new XL(l);return i.tenantId==null?i._agentRecaptchaConfig=u:i._tenantRecaptchaConfigs[i.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(i,o,a){const l=window.grecaptcha;r_(l)?l.enterprise.ready(()=>{l.enterprise.execute(i,{action:e}).then(u=>{o(u)}).catch(()=>{o(wR)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{n(this.auth).then(a=>{if(!r&&r_(window.grecaptcha))s(a,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=mR();l.length!==0&&(l+=a),KE(l).then(()=>{s(a,i,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function l_(t,e,r,n=!1){const s=new xR(t);let i;try{i=await s.verify(r)}catch{i=await s.verify(r,!0)}const o=Object.assign({},e);return n?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function zm(t,e,r,n){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await l_(t,e,r,r==="getOobCode");return n(t,i)}else return n(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${r} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await l_(t,e,r,r==="getOobCode");return n(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _R(t,e){const r=Uc(t,"auth");if(r.isInitialized()){const s=r.getImmediate(),i=r.getOptions();if(Zd(i,e??{}))return s;Mi(s,"already-initialized")}return r.initialize({options:e})}function bR(t,e){const r=(e==null?void 0:e.persistence)||[],n=(Array.isArray(r)?r:[r]).map(fa);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(n,e==null?void 0:e.popupRedirectResolver)}function NR(t,e,r){const n=Ca(t);gt(n._canInitEmulator,n,"emulator-config-failed"),gt(/^https?:\/\//.test(e),n,"invalid-emulator-scheme");const s=!1,i=QE(e),{host:o,port:a}=ER(e),l=a===null?"":`:${a}`;n.config.emulator={url:`${i}//${o}${l}/`},n.settings.appVerificationDisabledForTesting=!0,n.emulatorConfig=Object.freeze({host:o,port:a,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),AR()}function QE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function ER(t){const e=QE(t),r=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!r)return{host:"",port:null};const n=r[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(n);if(s){const i=s[1];return{host:i,port:c_(n.substr(i.length+1))}}else{const[i,o]=n.split(":");return{host:i,port:c_(o)}}}function c_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function AR(){function t(){const e=document.createElement("p"),r=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",r.position="fixed",r.width="100%",r.backgroundColor="#ffffff",r.border=".1em solid #000000",r.color="#b50000",r.bottom="0px",r.left="0px",r.margin="0px",r.zIndex="10000",r.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lv{constructor(e,r){this.providerId=e,this.signInMethod=r}toJSON(){return ha("not implemented")}_getIdTokenResponse(e){return ha("not implemented")}_linkToIdToken(e,r){return ha("not implemented")}_getReauthenticationResolver(e){return ha("not implemented")}}async function SR(t,e){return Uo(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TR(t,e){return Ef(t,"POST","/v1/accounts:signInWithPassword",Pa(t,e))}async function IR(t,e){return Uo(t,"POST","/v1/accounts:sendOobCode",Pa(t,e))}async function kR(t,e){return IR(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PR(t,e){return Ef(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,e))}async function CR(t,e){return Ef(t,"POST","/v1/accounts:signInWithEmailLink",Pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tf extends Lv{constructor(e,r,n,s=null){super("password",n),this._email=e,this._password=r,this._tenantId=s}static _fromEmailAndPassword(e,r){return new tf(e,r,"password")}static _fromEmailAndCode(e,r,n=null){return new tf(e,r,"emailLink",n)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e;if(r!=null&&r.email&&(r!=null&&r.password)){if(r.signInMethod==="password")return this._fromEmailAndPassword(r.email,r.password);if(r.signInMethod==="emailLink")return this._fromEmailAndCode(r.email,r.password,r.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,r,"signInWithPassword",TR);case"emailLink":return PR(e,{email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}}async _linkToIdToken(e,r){switch(this.signInMethod){case"password":const n={idToken:r,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return zm(e,n,"signUpPassword",SR);case"emailLink":return CR(e,{idToken:r,email:this._email,oobCode:this._password});default:Mi(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uu(t,e){return Ef(t,"POST","/v1/accounts:signInWithIdp",Pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jR="http://localhost";class Sc extends Lv{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const r=new Sc(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(r.idToken=e.idToken),e.accessToken&&(r.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(r.nonce=e.nonce),e.pendingToken&&(r.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(r.accessToken=e.oauthToken,r.secret=e.oauthTokenSecret):Mi("argument-error"),r}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const r=typeof e=="string"?JSON.parse(e):e,{providerId:n,signInMethod:s}=r,i=Tv(r,["providerId","signInMethod"]);if(!n||!s)return null;const o=new Sc(n,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const r=this.buildRequest();return Uu(e,r)}_linkToIdToken(e,r){const n=this.buildRequest();return n.idToken=r,Uu(e,n)}_getReauthenticationResolver(e){const r=this.buildRequest();return r.autoCreate=!1,Uu(e,r)}buildRequest(){const e={requestUri:jR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const r={};this.idToken&&(r.id_token=this.idToken),this.accessToken&&(r.access_token=this.accessToken),this.secret&&(r.oauth_token_secret=this.secret),r.providerId=this.providerId,this.nonce&&!this.pendingToken&&(r.nonce=this.nonce),e.postBody=bf(r)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function RR(t){const e=hd(dd(t)).link,r=e?hd(dd(e)).deep_link_id:null,n=hd(dd(t)).deep_link_id;return(n?hd(dd(n)).link:null)||n||r||e||t}class Rv{constructor(e){var r,n,s,i,o,a;const l=hd(dd(e)),u=(r=l.apiKey)!==null&&r!==void 0?r:null,f=(n=l.oobCode)!==null&&n!==void 0?n:null,g=LR((s=l.mode)!==null&&s!==void 0?s:null);gt(u&&f&&g,"argument-error"),this.apiKey=u,this.operation=g,this.code=f,this.continueUrl=(i=l.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const r=RR(e);try{return new Rv(r)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _h{constructor(){this.providerId=_h.PROVIDER_ID}static credential(e,r){return tf._fromEmailAndPassword(e,r)}static credentialWithLink(e,r){const n=Rv.parseLink(r);return gt(n,"argument-error"),tf._fromEmailAndCode(e,n.code,n.tenantId)}}_h.PROVIDER_ID="password";_h.EMAIL_PASSWORD_SIGN_IN_METHOD="password";_h.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ov{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Af extends Ov{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll extends Af{constructor(){super("facebook.com")}static credential(e){return Sc._fromParams({providerId:ll.PROVIDER_ID,signInMethod:ll.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ll.credentialFromTaggedObject(e)}static credentialFromError(e){return ll.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ll.credential(e.oauthAccessToken)}catch{return null}}}ll.FACEBOOK_SIGN_IN_METHOD="facebook.com";ll.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class la extends Af{constructor(){super("google.com"),this.addScope("profile")}static credential(e,r){return Sc._fromParams({providerId:la.PROVIDER_ID,signInMethod:la.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:r})}static credentialFromResult(e){return la.credentialFromTaggedObject(e)}static credentialFromError(e){return la.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:r,oauthAccessToken:n}=e;if(!r&&!n)return null;try{return la.credential(r,n)}catch{return null}}}la.GOOGLE_SIGN_IN_METHOD="google.com";la.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Af{constructor(){super("github.com")}static credential(e){return Sc._fromParams({providerId:cl.PROVIDER_ID,signInMethod:cl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return cl.credentialFromTaggedObject(e)}static credentialFromError(e){return cl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return cl.credential(e.oauthAccessToken)}catch{return null}}}cl.GITHUB_SIGN_IN_METHOD="github.com";cl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ul extends Af{constructor(){super("twitter.com")}static credential(e,r){return Sc._fromParams({providerId:ul.PROVIDER_ID,signInMethod:ul.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:r})}static credentialFromResult(e){return ul.credentialFromTaggedObject(e)}static credentialFromError(e){return ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:r,oauthTokenSecret:n}=e;if(!r||!n)return null;try{return ul.credential(r,n)}catch{return null}}}ul.TWITTER_SIGN_IN_METHOD="twitter.com";ul.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,e){return Ef(t,"POST","/v1/accounts:signUp",Pa(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tc{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,r,n,s=!1){const i=await da._fromIdTokenResponse(e,n,s),o=u_(n);return new Tc({user:i,providerId:o,_tokenResponse:n,operationType:r})}static async _forOperation(e,r,n){await e._updateTokensIfNecessary(n,!0);const s=u_(n);return new Tc({user:e,providerId:s,_tokenResponse:n,operationType:r})}}function u_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qm extends lo{constructor(e,r,n,s){var i;super(r.code,r.message),this.operationType=n,this.user=s,Object.setPrototypeOf(this,qm.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:r.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,r,n,s){return new qm(e,r,n,s)}}function YE(t,e,r,n){return(e==="reauthenticate"?r._getReauthenticationResolver(t):r._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?qm._fromErrorAndOperation(t,i,e,n):i})}async function DR(t,e,r=!1){const n=await th(t,e._linkToIdToken(t.auth,await t.getIdToken()),r);return Tc._forOperation(t,"link",n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t,e,r=!1){const{auth:n}=t;if(Xi(n.app))return Promise.reject(ga(n));const s="reauthenticate";try{const i=await th(t,YE(n,s,e,t),r);gt(i.idToken,n,"internal-error");const o=Cv(i.idToken);gt(o,n,"internal-error");const{sub:a}=o;return gt(t.uid===a,n,"user-mismatch"),Tc._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Mi(n,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function XE(t,e,r=!1){if(Xi(t.app))return Promise.reject(ga(t));const n="signIn",s=await YE(t,n,e),i=await Tc._fromIdTokenResponse(t,n,s);return r||await t._updateCurrentUser(i.user),i}async function FR(t,e){return XE(Ca(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JE(t){const e=Ca(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function UR(t,e,r){const n=Ca(t);await zm(n,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",kR)}async function VR(t,e,r){if(Xi(t.app))return Promise.reject(ga(t));const n=Ca(t),o=await zm(n,{returnSecureToken:!0,email:e,password:r,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",OR).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&JE(t),l}),a=await Tc._fromIdTokenResponse(n,"signIn",o);return await n._updateCurrentUser(a.user),a}function BR(t,e,r){return Xi(t.app)?Promise.reject(ga(t)):FR(Cr(t),_h.credential(e,r)).catch(async n=>{throw n.code==="auth/password-does-not-meet-requirements"&&JE(t),n})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zR(t,e){return Uo(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qR(t,{displayName:e,photoURL:r}){if(e===void 0&&r===void 0)return;const n=Cr(t),i={idToken:await n.getIdToken(),displayName:e,photoUrl:r,returnSecureToken:!0},o=await th(n,zR(n.auth,i));n.displayName=o.displayName||null,n.photoURL=o.photoUrl||null;const a=n.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=n.displayName,a.photoURL=n.photoURL),await n._updateTokensIfNecessary(o)}function $R(t,e,r,n){return Cr(t).onIdTokenChanged(e,r,n)}function HR(t,e,r){return Cr(t).beforeAuthStateChanged(e,r)}function WR(t,e,r,n){return Cr(t).onAuthStateChanged(e,r,n)}function GR(t){return Cr(t).signOut()}const $m="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(e,r){this.storageRetriever=e,this.type=r}_isAvailable(){try{return this.storage?(this.storage.setItem($m,"1"),this.storage.removeItem($m),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,r){return this.storage.setItem(e,JSON.stringify(r)),Promise.resolve()}_get(e){const r=this.storage.getItem(e);return Promise.resolve(r?JSON.parse(r):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KR=1e3,QR=10;class eA extends ZE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,r)=>this.onStorageEvent(e,r),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=WE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const r of Object.keys(this.listeners)){const n=this.storage.getItem(r),s=this.localCache[r];n!==s&&e(r,s,n)}}onStorageEvent(e,r=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const n=e.key;r?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(n);!r&&this.localCache[n]===o||this.notifyListeners(n,o)},i=this.storage.getItem(n);lR()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,QR):s()}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r&&JSON.parse(r))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,r,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:r,newValue:n}),!0)})},KR)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,r){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,r){await super._set(e,r),this.localCache[e]=JSON.stringify(r)}async _get(e){const r=await super._get(e);return this.localCache[e]=JSON.stringify(r),r}async _remove(e){await super._remove(e),delete this.localCache[e]}}eA.type="LOCAL";const YR=eA;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA extends ZE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,r){}_removeListener(e,r){}}tA.type="SESSION";const rA=tA;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(r){return{fulfilled:!1,reason:r}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const r=this.receivers.find(s=>s.isListeningto(e));if(r)return r;const n=new Pg(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const r=e,{eventId:n,eventType:s,data:i}=r.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;r.ports[0].postMessage({status:"ack",eventId:n,eventType:s});const a=Array.from(o).map(async u=>u(r.origin,i)),l=await XR(a);r.ports[0].postMessage({status:"done",eventId:n,eventType:s,response:l})}_subscribe(e,r){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(r)}_unsubscribe(e,r){this.handlersMap[e]&&r&&this.handlersMap[e].delete(r),(!r||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Pg.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dv(t="",e=10){let r="";for(let n=0;n<e;n++)r+=Math.floor(Math.random()*10);return t+r}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,r,n=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((a,l)=>{const u=Dv("",20);s.port1.start();const f=setTimeout(()=>{l(new Error("unsupported_event"))},n);o={messageChannel:s,onMessage(g){const y=g;if(y.data.eventId===u)switch(y.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(y.data.response);break;default:clearTimeout(f),clearTimeout(i),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:r},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return window}function ZR(t){Lo().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nA(){return typeof Lo().WorkerGlobalScope<"u"&&typeof Lo().importScripts=="function"}async function e8(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function t8(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function r8(){return nA()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sA="firebaseLocalStorageDb",n8=1,Hm="firebaseLocalStorage",iA="fbase_key";class Sf{constructor(e){this.request=e}toPromise(){return new Promise((e,r)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{r(this.request.error)})})}}function Cg(t,e){return t.transaction([Hm],e?"readwrite":"readonly").objectStore(Hm)}function s8(){const t=indexedDB.deleteDatabase(sA);return new Sf(t).toPromise()}function Hy(){const t=indexedDB.open(sA,n8);return new Promise((e,r)=>{t.addEventListener("error",()=>{r(t.error)}),t.addEventListener("upgradeneeded",()=>{const n=t.result;try{n.createObjectStore(Hm,{keyPath:iA})}catch(s){r(s)}}),t.addEventListener("success",async()=>{const n=t.result;n.objectStoreNames.contains(Hm)?e(n):(n.close(),await s8(),e(await Hy()))})})}async function h_(t,e,r){const n=Cg(t,!0).put({[iA]:e,value:r});return new Sf(n).toPromise()}async function i8(t,e){const r=Cg(t,!1).get(e),n=await new Sf(r).toPromise();return n===void 0?null:n.value}function d_(t,e){const r=Cg(t,!0).delete(e);return new Sf(r).toPromise()}const o8=800,a8=3;class oA{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Hy(),this.db)}async _withRetries(e){let r=0;for(;;)try{const n=await this._openDb();return await e(n)}catch(n){if(r++>a8)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return nA()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Pg._getInstance(r8()),this.receiver._subscribe("keyChanged",async(e,r)=>({keyProcessed:(await this._poll()).includes(r.key)})),this.receiver._subscribe("ping",async(e,r)=>["keyChanged"])}async initializeSender(){var e,r;if(this.activeServiceWorker=await e8(),!this.activeServiceWorker)return;this.sender=new JR(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&!((e=n[0])===null||e===void 0)&&e.fulfilled&&!((r=n[0])===null||r===void 0)&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||t8()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Hy();return await h_(e,$m,"1"),await d_(e,$m),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,r){return this._withPendingWrite(async()=>(await this._withRetries(n=>h_(n,e,r)),this.localCache[e]=r,this.notifyServiceWorker(e)))}async _get(e){const r=await this._withRetries(n=>i8(n,e));return this.localCache[e]=r,r}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(r=>d_(r,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Cg(s,!1).getAll();return new Sf(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const r=[],n=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)n.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),r.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!n.has(s)&&(this.notifyListeners(s,null),r.push(s));return r}notifyListeners(e,r){this.localCache[e]=r;const n=this.listeners[e];if(n)for(const s of Array.from(n))s(r)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),o8)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,r){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(r)}_removeListener(e,r){this.listeners[e]&&(this.listeners[e].delete(r),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}oA.type="LOCAL";const l8=oA;new Nf(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aA(t,e){return e?fa(e):(gt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mv extends Lv{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Uu(e,this._buildIdpRequest())}_linkToIdToken(e,r){return Uu(e,this._buildIdpRequest(r))}_getReauthenticationResolver(e){return Uu(e,this._buildIdpRequest())}_buildIdpRequest(e){const r={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(r.idToken=e),r}}function c8(t){return XE(t.auth,new Mv(t),t.bypassAuthState)}function u8(t){const{auth:e,user:r}=t;return gt(r,e,"internal-error"),MR(r,new Mv(t),t.bypassAuthState)}async function h8(t){const{auth:e,user:r}=t;return gt(r,e,"internal-error"),DR(r,new Mv(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(e,r,n,s,i=!1){this.auth=e,this.resolver=n,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(r)?r:[r]}execute(){return new Promise(async(e,r)=>{this.pendingPromise={resolve:e,reject:r};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:r,sessionId:n,postBody:s,tenantId:i,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:r,sessionId:n,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return c8;case"linkViaPopup":case"linkViaRedirect":return h8;case"reauthViaPopup":case"reauthViaRedirect":return u8;default:Mi(this.auth,"internal-error")}}resolve(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Aa(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d8=new Nf(2e3,1e4);async function f8(t,e,r){if(Xi(t.app))return Promise.reject(ro(t,"operation-not-supported-in-this-environment"));const n=Ca(t);qL(t,e,Ov);const s=aA(n,r);return new pc(n,"signInViaPopup",e,s).executeNotNull()}class pc extends lA{constructor(e,r,n,s,i){super(e,r,s,i),this.provider=n,this.authWindow=null,this.pollId=null,pc.currentPopupAction&&pc.currentPopupAction.cancel(),pc.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return gt(e,this.auth,"internal-error"),e}async onExecution(){Aa(this.filter.length===1,"Popup operations only handle one event");const e=Dv();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(r=>{this.reject(r)}),this.resolver._isIframeWebStorageSupported(this.auth,r=>{r||this.reject(ro(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(ro(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,pc.currentPopupAction=null}pollUserCancellation(){const e=()=>{var r,n;if(!((n=(r=this.authWindow)===null||r===void 0?void 0:r.window)===null||n===void 0)&&n.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(ro(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,d8.get())};e()}}pc.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p8="pendingRedirect",Yp=new Map;class m8 extends lA{constructor(e,r,n=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],r,void 0,n),this.eventId=null}async execute(){let e=Yp.get(this.auth._key());if(!e){try{const n=await g8(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(n)}catch(r){e=()=>Promise.reject(r)}Yp.set(this.auth._key(),e)}return this.bypassAuthState||Yp.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const r=await this.auth._redirectUserForId(e.eventId);if(r)return this.user=r,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function g8(t,e){const r=w8(e),n=v8(t);if(!await n._isAvailable())return!1;const s=await n._get(r)==="true";return await n._remove(r),s}function y8(t,e){Yp.set(t._key(),e)}function v8(t){return fa(t._redirectPersistence)}function w8(t){return Qp(p8,t.config.apiKey,t.name)}async function x8(t,e,r=!1){if(Xi(t.app))return Promise.reject(ga(t));const n=Ca(t),s=aA(n,e),o=await new m8(n,s,r).execute();return o&&!r&&(delete o.user._redirectEventId,await n._persistUserIfCurrent(o.user),await n._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _8=10*60*1e3;class b8{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let r=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(r=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!N8(e)||(this.hasHandledPotentialRedirect=!0,r||(this.queuedRedirectEvent=e,r=!0)),r}sendToConsumer(e,r){var n;if(e.error&&!cA(e)){const s=((n=e.error.code)===null||n===void 0?void 0:n.split("auth/")[1])||"internal-error";r.onError(ro(this.auth,s))}else r.onAuthEvent(e)}isEventForConsumer(e,r){const n=r.eventId===null||!!e.eventId&&e.eventId===r.eventId;return r.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=_8&&this.cachedEventUids.clear(),this.cachedEventUids.has(f_(e))}saveEventToCache(e){this.cachedEventUids.add(f_(e)),this.lastProcessedEventTime=Date.now()}}function f_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function cA({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function N8(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return cA(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E8(t,e={}){return Uo(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A8=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,S8=/^https?/;async function T8(t){if(t.config.emulator)return;const{authorizedDomains:e}=await E8(t);for(const r of e)try{if(I8(r))return}catch{}Mi(t,"unauthorized-domain")}function I8(t){const e=qy(),{protocol:r,hostname:n}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&n===""?r==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):r==="chrome-extension:"&&o.hostname===n}if(!S8.test(r))return!1;if(A8.test(t))return n===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(n)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k8=new Nf(3e4,6e4);function p_(){const t=Lo().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let r=0;r<t.CP.length;r++)t.CP[r]=null}}function P8(t){return new Promise((e,r)=>{var n,s,i;function o(){p_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{p_(),r(ro(t,"network-request-failed"))},timeout:k8.get()})}if(!((s=(n=Lo().gapi)===null||n===void 0?void 0:n.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Lo().gapi)===null||i===void 0)&&i.load)o();else{const a=yR("iframefcb");return Lo()[a]=()=>{gapi.load?o():r(ro(t,"network-request-failed"))},KE(`${gR()}?onload=${a}`).catch(l=>r(l))}}).catch(e=>{throw Xp=null,e})}let Xp=null;function C8(t){return Xp=Xp||P8(t),Xp}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8=new Nf(5e3,15e3),L8="__/auth/iframe",R8="emulator/auth/iframe",O8={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},D8=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function M8(t){const e=t.config;gt(e.authDomain,t,"auth-domain-config-required");const r=e.emulator?Pv(e,R8):`https://${t.config.authDomain}/${L8}`,n={apiKey:e.apiKey,appName:t.name,v:Vc},s=D8.get(t.config.apiHost);s&&(n.eid=s);const i=t._getFrameworks();return i.length&&(n.fw=i.join(",")),`${r}?${bf(n).slice(1)}`}async function F8(t){const e=await C8(t),r=Lo().gapi;return gt(r,t,"internal-error"),e.open({where:document.body,url:M8(t),messageHandlersFilter:r.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:O8,dontclear:!0},n=>new Promise(async(s,i)=>{await n.restyle({setHideOnLeave:!1});const o=ro(t,"network-request-failed"),a=Lo().setTimeout(()=>{i(o)},j8.get());function l(){Lo().clearTimeout(a),s(n)}n.ping(l).then(l,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U8={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},V8=500,B8=600,z8="_blank",q8="http://localhost";class m_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function $8(t,e,r,n=V8,s=B8){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-n)/2,0).toString();let a="";const l=Object.assign(Object.assign({},U8),{width:n.toString(),height:s.toString(),top:i,left:o}),u=fs().toLowerCase();r&&(a=BE(u)?z8:r),UE(u)&&(e=e||q8,l.scrollbars="yes");const f=Object.entries(l).reduce((y,[m,E])=>`${y}${m}=${E},`,"");if(aR(u)&&a!=="_self")return H8(e||"",a),new m_(null);const g=window.open(e||"",a,f);gt(g,t,"popup-blocked");try{g.focus()}catch{}return new m_(g)}function H8(t,e){const r=document.createElement("a");r.href=t,r.target=e;const n=document.createEvent("MouseEvent");n.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),r.dispatchEvent(n)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W8="__/auth/handler",G8="emulator/auth/handler",K8=encodeURIComponent("fac");async function g_(t,e,r,n,s,i){gt(t.config.authDomain,t,"auth-domain-config-required"),gt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:r,redirectUrl:n,v:Vc,eventId:s};if(e instanceof Ov){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",Cj(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof Af){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const f of Object.keys(a))a[f]===void 0&&delete a[f];const l=await t._getAppCheckToken(),u=l?`#${K8}=${encodeURIComponent(l)}`:"";return`${Q8(t)}?${bf(a).slice(1)}${u}`}function Q8({config:t}){return t.emulator?Pv(t,G8):`https://${t.authDomain}/${W8}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="webStorageSupport";class Y8{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=rA,this._completeRedirectFn=x8,this._overrideRedirectResult=y8}async _openPopup(e,r,n,s){var i;Aa((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await g_(e,r,n,qy(),s);return $8(e,o,Dv())}async _openRedirect(e,r,n,s){await this._originValidation(e);const i=await g_(e,r,n,qy(),s);return ZR(i),new Promise(()=>{})}_initialize(e){const r=e._key();if(this.eventManagers[r]){const{manager:s,promise:i}=this.eventManagers[r];return s?Promise.resolve(s):(Aa(i,"If manager is not set, promise should be"),i)}const n=this.initAndGetManager(e);return this.eventManagers[r]={promise:n},n.catch(()=>{delete this.eventManagers[r]}),n}async initAndGetManager(e){const r=await F8(e),n=new b8(e);return r.register("authEvent",s=>(gt(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:n.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=r,n}_isIframeWebStorageSupported(e,r){this.iframes[e._key()].send(i1,{type:i1},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[i1];o!==void 0&&r(!!o),Mi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const r=e._key();return this.originValidationPromises[r]||(this.originValidationPromises[r]=T8(e)),this.originValidationPromises[r]}get _shouldInitProactively(){return WE()||VE()||jv()}}const X8=Y8;var y_="@firebase/auth",v_="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J8{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const r=this.auth.onIdTokenChanged(n=>{e((n==null?void 0:n.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,r),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const r=this.internalListeners.get(e);r&&(this.internalListeners.delete(e),r(),this.updateProactiveRefresh())}assertAuthConfigured(){gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z8(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function e7(t){so(new Di("auth",(e,{options:r})=>{const n=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=n.options;gt(o&&!o.includes(":"),"invalid-api-key",{appName:n.name});const l={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:GE(t)},u=new fR(n,s,i,l);return bR(u,r),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,r,n)=>{e.getProvider("auth-internal").initialize()})),so(new Di("auth-internal",e=>{const r=Ca(e.getProvider("auth").getImmediate());return(n=>new J8(n))(r)},"PRIVATE").setInstantiationMode("EXPLICIT")),zs(y_,v_,Z8(t)),zs(y_,v_,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t7=5*60,r7=bE("authIdTokenMaxAge")||t7;let w_=null;const n7=t=>async e=>{const r=e&&await e.getIdTokenResult(),n=r&&(new Date().getTime()-Date.parse(r.issuedAtTime))/1e3;if(n&&n>r7)return;const s=r==null?void 0:r.token;w_!==s&&(w_=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function s7(t=Ig()){const e=Uc(t,"auth");if(e.isInitialized())return e.getImmediate();const r=_R(t,{popupRedirectResolver:X8,persistence:[l8,YR,rA]}),n=bE("authTokenSyncURL");if(n&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(n,location.origin);if(location.origin===i.origin){const o=n7(i.toString());HR(r,o,()=>o(r.currentUser)),$R(r,a=>o(a))}}const s=wE("auth");return s&&NR(r,`http://${s}`),r}function i7(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}pR({loadJS(t){return new Promise((e,r)=>{const n=document.createElement("script");n.setAttribute("src",t),n.onload=e,n.onerror=s=>{const i=ro("internal-error");i.customData=s,r(i)},n.type="text/javascript",n.charset="UTF-8",i7().appendChild(n)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});e7("Browser");var o7="firebase",a7="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */zs(o7,a7,"app");var x_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var wc,uA;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(F,P){function C(){}C.prototype=P.prototype,F.D=P.prototype,F.prototype=new C,F.prototype.constructor=F,F.C=function(O,N,R){for(var L=Array(arguments.length-2),X=2;X<arguments.length;X++)L[X-2]=arguments[X];return P.prototype[N].apply(O,L)}}function r(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(n,r),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(F,P,C){C||(C=0);var O=Array(16);if(typeof P=="string")for(var N=0;16>N;++N)O[N]=P.charCodeAt(C++)|P.charCodeAt(C++)<<8|P.charCodeAt(C++)<<16|P.charCodeAt(C++)<<24;else for(N=0;16>N;++N)O[N]=P[C++]|P[C++]<<8|P[C++]<<16|P[C++]<<24;P=F.g[0],C=F.g[1],N=F.g[2];var R=F.g[3],L=P+(R^C&(N^R))+O[0]+3614090360&4294967295;P=C+(L<<7&4294967295|L>>>25),L=R+(N^P&(C^N))+O[1]+3905402710&4294967295,R=P+(L<<12&4294967295|L>>>20),L=N+(C^R&(P^C))+O[2]+606105819&4294967295,N=R+(L<<17&4294967295|L>>>15),L=C+(P^N&(R^P))+O[3]+3250441966&4294967295,C=N+(L<<22&4294967295|L>>>10),L=P+(R^C&(N^R))+O[4]+4118548399&4294967295,P=C+(L<<7&4294967295|L>>>25),L=R+(N^P&(C^N))+O[5]+1200080426&4294967295,R=P+(L<<12&4294967295|L>>>20),L=N+(C^R&(P^C))+O[6]+2821735955&4294967295,N=R+(L<<17&4294967295|L>>>15),L=C+(P^N&(R^P))+O[7]+4249261313&4294967295,C=N+(L<<22&4294967295|L>>>10),L=P+(R^C&(N^R))+O[8]+1770035416&4294967295,P=C+(L<<7&4294967295|L>>>25),L=R+(N^P&(C^N))+O[9]+2336552879&4294967295,R=P+(L<<12&4294967295|L>>>20),L=N+(C^R&(P^C))+O[10]+4294925233&4294967295,N=R+(L<<17&4294967295|L>>>15),L=C+(P^N&(R^P))+O[11]+2304563134&4294967295,C=N+(L<<22&4294967295|L>>>10),L=P+(R^C&(N^R))+O[12]+1804603682&4294967295,P=C+(L<<7&4294967295|L>>>25),L=R+(N^P&(C^N))+O[13]+4254626195&4294967295,R=P+(L<<12&4294967295|L>>>20),L=N+(C^R&(P^C))+O[14]+2792965006&4294967295,N=R+(L<<17&4294967295|L>>>15),L=C+(P^N&(R^P))+O[15]+1236535329&4294967295,C=N+(L<<22&4294967295|L>>>10),L=P+(N^R&(C^N))+O[1]+4129170786&4294967295,P=C+(L<<5&4294967295|L>>>27),L=R+(C^N&(P^C))+O[6]+3225465664&4294967295,R=P+(L<<9&4294967295|L>>>23),L=N+(P^C&(R^P))+O[11]+643717713&4294967295,N=R+(L<<14&4294967295|L>>>18),L=C+(R^P&(N^R))+O[0]+3921069994&4294967295,C=N+(L<<20&4294967295|L>>>12),L=P+(N^R&(C^N))+O[5]+3593408605&4294967295,P=C+(L<<5&4294967295|L>>>27),L=R+(C^N&(P^C))+O[10]+38016083&4294967295,R=P+(L<<9&4294967295|L>>>23),L=N+(P^C&(R^P))+O[15]+3634488961&4294967295,N=R+(L<<14&4294967295|L>>>18),L=C+(R^P&(N^R))+O[4]+3889429448&4294967295,C=N+(L<<20&4294967295|L>>>12),L=P+(N^R&(C^N))+O[9]+568446438&4294967295,P=C+(L<<5&4294967295|L>>>27),L=R+(C^N&(P^C))+O[14]+3275163606&4294967295,R=P+(L<<9&4294967295|L>>>23),L=N+(P^C&(R^P))+O[3]+4107603335&4294967295,N=R+(L<<14&4294967295|L>>>18),L=C+(R^P&(N^R))+O[8]+1163531501&4294967295,C=N+(L<<20&4294967295|L>>>12),L=P+(N^R&(C^N))+O[13]+2850285829&4294967295,P=C+(L<<5&4294967295|L>>>27),L=R+(C^N&(P^C))+O[2]+4243563512&4294967295,R=P+(L<<9&4294967295|L>>>23),L=N+(P^C&(R^P))+O[7]+1735328473&4294967295,N=R+(L<<14&4294967295|L>>>18),L=C+(R^P&(N^R))+O[12]+2368359562&4294967295,C=N+(L<<20&4294967295|L>>>12),L=P+(C^N^R)+O[5]+4294588738&4294967295,P=C+(L<<4&4294967295|L>>>28),L=R+(P^C^N)+O[8]+2272392833&4294967295,R=P+(L<<11&4294967295|L>>>21),L=N+(R^P^C)+O[11]+1839030562&4294967295,N=R+(L<<16&4294967295|L>>>16),L=C+(N^R^P)+O[14]+4259657740&4294967295,C=N+(L<<23&4294967295|L>>>9),L=P+(C^N^R)+O[1]+2763975236&4294967295,P=C+(L<<4&4294967295|L>>>28),L=R+(P^C^N)+O[4]+1272893353&4294967295,R=P+(L<<11&4294967295|L>>>21),L=N+(R^P^C)+O[7]+4139469664&4294967295,N=R+(L<<16&4294967295|L>>>16),L=C+(N^R^P)+O[10]+3200236656&4294967295,C=N+(L<<23&4294967295|L>>>9),L=P+(C^N^R)+O[13]+681279174&4294967295,P=C+(L<<4&4294967295|L>>>28),L=R+(P^C^N)+O[0]+3936430074&4294967295,R=P+(L<<11&4294967295|L>>>21),L=N+(R^P^C)+O[3]+3572445317&4294967295,N=R+(L<<16&4294967295|L>>>16),L=C+(N^R^P)+O[6]+76029189&4294967295,C=N+(L<<23&4294967295|L>>>9),L=P+(C^N^R)+O[9]+3654602809&4294967295,P=C+(L<<4&4294967295|L>>>28),L=R+(P^C^N)+O[12]+3873151461&4294967295,R=P+(L<<11&4294967295|L>>>21),L=N+(R^P^C)+O[15]+530742520&4294967295,N=R+(L<<16&4294967295|L>>>16),L=C+(N^R^P)+O[2]+3299628645&4294967295,C=N+(L<<23&4294967295|L>>>9),L=P+(N^(C|~R))+O[0]+4096336452&4294967295,P=C+(L<<6&4294967295|L>>>26),L=R+(C^(P|~N))+O[7]+1126891415&4294967295,R=P+(L<<10&4294967295|L>>>22),L=N+(P^(R|~C))+O[14]+2878612391&4294967295,N=R+(L<<15&4294967295|L>>>17),L=C+(R^(N|~P))+O[5]+4237533241&4294967295,C=N+(L<<21&4294967295|L>>>11),L=P+(N^(C|~R))+O[12]+1700485571&4294967295,P=C+(L<<6&4294967295|L>>>26),L=R+(C^(P|~N))+O[3]+2399980690&4294967295,R=P+(L<<10&4294967295|L>>>22),L=N+(P^(R|~C))+O[10]+4293915773&4294967295,N=R+(L<<15&4294967295|L>>>17),L=C+(R^(N|~P))+O[1]+2240044497&4294967295,C=N+(L<<21&4294967295|L>>>11),L=P+(N^(C|~R))+O[8]+1873313359&4294967295,P=C+(L<<6&4294967295|L>>>26),L=R+(C^(P|~N))+O[15]+4264355552&4294967295,R=P+(L<<10&4294967295|L>>>22),L=N+(P^(R|~C))+O[6]+2734768916&4294967295,N=R+(L<<15&4294967295|L>>>17),L=C+(R^(N|~P))+O[13]+1309151649&4294967295,C=N+(L<<21&4294967295|L>>>11),L=P+(N^(C|~R))+O[4]+4149444226&4294967295,P=C+(L<<6&4294967295|L>>>26),L=R+(C^(P|~N))+O[11]+3174756917&4294967295,R=P+(L<<10&4294967295|L>>>22),L=N+(P^(R|~C))+O[2]+718787259&4294967295,N=R+(L<<15&4294967295|L>>>17),L=C+(R^(N|~P))+O[9]+3951481745&4294967295,F.g[0]=F.g[0]+P&4294967295,F.g[1]=F.g[1]+(N+(L<<21&4294967295|L>>>11))&4294967295,F.g[2]=F.g[2]+N&4294967295,F.g[3]=F.g[3]+R&4294967295}n.prototype.u=function(F,P){P===void 0&&(P=F.length);for(var C=P-this.blockSize,O=this.B,N=this.h,R=0;R<P;){if(N==0)for(;R<=C;)s(this,F,R),R+=this.blockSize;if(typeof F=="string"){for(;R<P;)if(O[N++]=F.charCodeAt(R++),N==this.blockSize){s(this,O),N=0;break}}else for(;R<P;)if(O[N++]=F[R++],N==this.blockSize){s(this,O),N=0;break}}this.h=N,this.o+=P},n.prototype.v=function(){var F=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);F[0]=128;for(var P=1;P<F.length-8;++P)F[P]=0;var C=8*this.o;for(P=F.length-8;P<F.length;++P)F[P]=C&255,C/=256;for(this.u(F),F=Array(16),P=C=0;4>P;++P)for(var O=0;32>O;O+=8)F[C++]=this.g[P]>>>O&255;return F};function i(F,P){var C=a;return Object.prototype.hasOwnProperty.call(C,F)?C[F]:C[F]=P(F)}function o(F,P){this.h=P;for(var C=[],O=!0,N=F.length-1;0<=N;N--){var R=F[N]|0;O&&R==P||(C[N]=R,O=!1)}this.g=C}var a={};function l(F){return-128<=F&&128>F?i(F,function(P){return new o([P|0],0>P?-1:0)}):new o([F|0],0>F?-1:0)}function u(F){if(isNaN(F)||!isFinite(F))return g;if(0>F)return A(u(-F));for(var P=[],C=1,O=0;F>=C;O++)P[O]=F/C|0,C*=4294967296;return new o(P,0)}function f(F,P){if(F.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(F.charAt(0)=="-")return A(f(F.substring(1),P));if(0<=F.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=u(Math.pow(P,8)),O=g,N=0;N<F.length;N+=8){var R=Math.min(8,F.length-N),L=parseInt(F.substring(N,N+R),P);8>R?(R=u(Math.pow(P,R)),O=O.j(R).add(u(L))):(O=O.j(C),O=O.add(u(L)))}return O}var g=l(0),y=l(1),m=l(16777216);t=o.prototype,t.m=function(){if(b(this))return-A(this).m();for(var F=0,P=1,C=0;C<this.g.length;C++){var O=this.i(C);F+=(0<=O?O:4294967296+O)*P,P*=4294967296}return F},t.toString=function(F){if(F=F||10,2>F||36<F)throw Error("radix out of range: "+F);if(E(this))return"0";if(b(this))return"-"+A(this).toString(F);for(var P=u(Math.pow(F,6)),C=this,O="";;){var N=k(C,P).g;C=x(C,N.j(P));var R=((0<C.g.length?C.g[0]:C.h)>>>0).toString(F);if(C=N,E(C))return R+O;for(;6>R.length;)R="0"+R;O=R+O}},t.i=function(F){return 0>F?0:F<this.g.length?this.g[F]:this.h};function E(F){if(F.h!=0)return!1;for(var P=0;P<F.g.length;P++)if(F.g[P]!=0)return!1;return!0}function b(F){return F.h==-1}t.l=function(F){return F=x(this,F),b(F)?-1:E(F)?0:1};function A(F){for(var P=F.g.length,C=[],O=0;O<P;O++)C[O]=~F.g[O];return new o(C,~F.h).add(y)}t.abs=function(){return b(this)?A(this):this},t.add=function(F){for(var P=Math.max(this.g.length,F.g.length),C=[],O=0,N=0;N<=P;N++){var R=O+(this.i(N)&65535)+(F.i(N)&65535),L=(R>>>16)+(this.i(N)>>>16)+(F.i(N)>>>16);O=L>>>16,R&=65535,L&=65535,C[N]=L<<16|R}return new o(C,C[C.length-1]&-2147483648?-1:0)};function x(F,P){return F.add(A(P))}t.j=function(F){if(E(this)||E(F))return g;if(b(this))return b(F)?A(this).j(A(F)):A(A(this).j(F));if(b(F))return A(this.j(A(F)));if(0>this.l(m)&&0>F.l(m))return u(this.m()*F.m());for(var P=this.g.length+F.g.length,C=[],O=0;O<2*P;O++)C[O]=0;for(O=0;O<this.g.length;O++)for(var N=0;N<F.g.length;N++){var R=this.i(O)>>>16,L=this.i(O)&65535,X=F.i(N)>>>16,fe=F.i(N)&65535;C[2*O+2*N]+=L*fe,T(C,2*O+2*N),C[2*O+2*N+1]+=R*fe,T(C,2*O+2*N+1),C[2*O+2*N+1]+=L*X,T(C,2*O+2*N+1),C[2*O+2*N+2]+=R*X,T(C,2*O+2*N+2)}for(O=0;O<P;O++)C[O]=C[2*O+1]<<16|C[2*O];for(O=P;O<2*P;O++)C[O]=0;return new o(C,0)};function T(F,P){for(;(F[P]&65535)!=F[P];)F[P+1]+=F[P]>>>16,F[P]&=65535,P++}function I(F,P){this.g=F,this.h=P}function k(F,P){if(E(P))throw Error("division by zero");if(E(F))return new I(g,g);if(b(F))return P=k(A(F),P),new I(A(P.g),A(P.h));if(b(P))return P=k(F,A(P)),new I(A(P.g),P.h);if(30<F.g.length){if(b(F)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var C=y,O=P;0>=O.l(F);)C=H(C),O=H(O);var N=Z(C,1),R=Z(O,1);for(O=Z(O,2),C=Z(C,2);!E(O);){var L=R.add(O);0>=L.l(F)&&(N=N.add(C),R=L),O=Z(O,1),C=Z(C,1)}return P=x(F,N.j(P)),new I(N,P)}for(N=g;0<=F.l(P);){for(C=Math.max(1,Math.floor(F.m()/P.m())),O=Math.ceil(Math.log(C)/Math.LN2),O=48>=O?1:Math.pow(2,O-48),R=u(C),L=R.j(P);b(L)||0<L.l(F);)C-=O,R=u(C),L=R.j(P);E(R)&&(R=y),N=N.add(R),F=x(F,L)}return new I(N,F)}t.A=function(F){return k(this,F).h},t.and=function(F){for(var P=Math.max(this.g.length,F.g.length),C=[],O=0;O<P;O++)C[O]=this.i(O)&F.i(O);return new o(C,this.h&F.h)},t.or=function(F){for(var P=Math.max(this.g.length,F.g.length),C=[],O=0;O<P;O++)C[O]=this.i(O)|F.i(O);return new o(C,this.h|F.h)},t.xor=function(F){for(var P=Math.max(this.g.length,F.g.length),C=[],O=0;O<P;O++)C[O]=this.i(O)^F.i(O);return new o(C,this.h^F.h)};function H(F){for(var P=F.g.length+1,C=[],O=0;O<P;O++)C[O]=F.i(O)<<1|F.i(O-1)>>>31;return new o(C,F.h)}function Z(F,P){var C=P>>5;P%=32;for(var O=F.g.length-C,N=[],R=0;R<O;R++)N[R]=0<P?F.i(R+C)>>>P|F.i(R+C+1)<<32-P:F.i(R+C);return new o(N,F.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,uA=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=f,wc=o}).apply(typeof x_<"u"?x_:typeof self<"u"?self:typeof window<"u"?window:{});var bp=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var hA,fd,dA,Jp,Wy,fA,pA,mA;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(d,_,j){return d==Array.prototype||d==Object.prototype||(d[_]=j.value),d};function r(d){d=[typeof globalThis=="object"&&globalThis,d,typeof window=="object"&&window,typeof self=="object"&&self,typeof bp=="object"&&bp];for(var _=0;_<d.length;++_){var j=d[_];if(j&&j.Math==Math)return j}throw Error("Cannot find global object")}var n=r(this);function s(d,_){if(_)e:{var j=n;d=d.split(".");for(var q=0;q<d.length-1;q++){var ce=d[q];if(!(ce in j))break e;j=j[ce]}d=d[d.length-1],q=j[d],_=_(q),_!=q&&_!=null&&e(j,d,{configurable:!0,writable:!0,value:_})}}function i(d,_){d instanceof String&&(d+="");var j=0,q=!1,ce={next:function(){if(!q&&j<d.length){var ge=j++;return{value:_(ge,d[ge]),done:!1}}return q=!0,{done:!0,value:void 0}}};return ce[Symbol.iterator]=function(){return ce},ce}s("Array.prototype.values",function(d){return d||function(){return i(this,function(_,j){return j})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(d){var _=typeof d;return _=_!="object"?_:d?Array.isArray(d)?"array":_:"null",_=="array"||_=="object"&&typeof d.length=="number"}function u(d){var _=typeof d;return _=="object"&&d!=null||_=="function"}function f(d,_,j){return d.call.apply(d.bind,arguments)}function g(d,_,j){if(!d)throw Error();if(2<arguments.length){var q=Array.prototype.slice.call(arguments,2);return function(){var ce=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ce,q),d.apply(_,ce)}}return function(){return d.apply(_,arguments)}}function y(d,_,j){return y=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,y.apply(null,arguments)}function m(d,_){var j=Array.prototype.slice.call(arguments,1);return function(){var q=j.slice();return q.push.apply(q,arguments),d.apply(this,q)}}function E(d,_){function j(){}j.prototype=_.prototype,d.aa=_.prototype,d.prototype=new j,d.prototype.constructor=d,d.Qb=function(q,ce,ge){for(var Oe=Array(arguments.length-2),zt=2;zt<arguments.length;zt++)Oe[zt-2]=arguments[zt];return _.prototype[ce].apply(q,Oe)}}function b(d){const _=d.length;if(0<_){const j=Array(_);for(let q=0;q<_;q++)j[q]=d[q];return j}return[]}function A(d,_){for(let j=1;j<arguments.length;j++){const q=arguments[j];if(l(q)){const ce=d.length||0,ge=q.length||0;d.length=ce+ge;for(let Oe=0;Oe<ge;Oe++)d[ce+Oe]=q[Oe]}else d.push(q)}}class x{constructor(_,j){this.i=_,this.j=j,this.h=0,this.g=null}get(){let _;return 0<this.h?(this.h--,_=this.g,this.g=_.next,_.next=null):_=this.i(),_}}function T(d){return/^[\s\xa0]*$/.test(d)}function I(){var d=a.navigator;return d&&(d=d.userAgent)?d:""}function k(d){return k[" "](d),d}k[" "]=function(){};var H=I().indexOf("Gecko")!=-1&&!(I().toLowerCase().indexOf("webkit")!=-1&&I().indexOf("Edge")==-1)&&!(I().indexOf("Trident")!=-1||I().indexOf("MSIE")!=-1)&&I().indexOf("Edge")==-1;function Z(d,_,j){for(const q in d)_.call(j,d[q],q,d)}function F(d,_){for(const j in d)_.call(void 0,d[j],j,d)}function P(d){const _={};for(const j in d)_[j]=d[j];return _}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function O(d,_){let j,q;for(let ce=1;ce<arguments.length;ce++){q=arguments[ce];for(j in q)d[j]=q[j];for(let ge=0;ge<C.length;ge++)j=C[ge],Object.prototype.hasOwnProperty.call(q,j)&&(d[j]=q[j])}}function N(d){var _=1;d=d.split(":");const j=[];for(;0<_&&d.length;)j.push(d.shift()),_--;return d.length&&j.push(d.join(":")),j}function R(d){a.setTimeout(()=>{throw d},0)}function L(){var d=ue;let _=null;return d.g&&(_=d.g,d.g=d.g.next,d.g||(d.h=null),_.next=null),_}class X{constructor(){this.h=this.g=null}add(_,j){const q=fe.get();q.set(_,j),this.h?this.h.next=q:this.g=q,this.h=q}}var fe=new x(()=>new le,d=>d.reset());class le{constructor(){this.next=this.g=this.h=null}set(_,j){this.h=_,this.g=j,this.next=null}reset(){this.next=this.g=this.h=null}}let ye,ee=!1,ue=new X,_e=()=>{const d=a.Promise.resolve(void 0);ye=()=>{d.then(we)}};var we=()=>{for(var d;d=L();){try{d.h.call(d.g)}catch(j){R(j)}var _=fe;_.j(d),100>_.h&&(_.h++,d.next=_.g,_.g=d)}ee=!1};function U(){this.s=this.s,this.C=this.C}U.prototype.s=!1,U.prototype.ma=function(){this.s||(this.s=!0,this.N())},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function G(d,_){this.type=d,this.g=this.target=_,this.defaultPrevented=!1}G.prototype.h=function(){this.defaultPrevented=!0};var J=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var d=!1,_=Object.defineProperty({},"passive",{get:function(){d=!0}});try{const j=()=>{};a.addEventListener("test",j,_),a.removeEventListener("test",j,_)}catch{}return d}();function re(d,_){if(G.call(this,d?d.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,d){var j=this.type=d.type,q=d.changedTouches&&d.changedTouches.length?d.changedTouches[0]:null;if(this.target=d.target||d.srcElement,this.g=_,_=d.relatedTarget){if(H){e:{try{k(_.nodeName);var ce=!0;break e}catch{}ce=!1}ce||(_=null)}}else j=="mouseover"?_=d.fromElement:j=="mouseout"&&(_=d.toElement);this.relatedTarget=_,q?(this.clientX=q.clientX!==void 0?q.clientX:q.pageX,this.clientY=q.clientY!==void 0?q.clientY:q.pageY,this.screenX=q.screenX||0,this.screenY=q.screenY||0):(this.clientX=d.clientX!==void 0?d.clientX:d.pageX,this.clientY=d.clientY!==void 0?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0),this.button=d.button,this.key=d.key||"",this.ctrlKey=d.ctrlKey,this.altKey=d.altKey,this.shiftKey=d.shiftKey,this.metaKey=d.metaKey,this.pointerId=d.pointerId||0,this.pointerType=typeof d.pointerType=="string"?d.pointerType:ie[d.pointerType]||"",this.state=d.state,this.i=d,d.defaultPrevented&&re.aa.h.call(this)}}E(re,G);var ie={2:"touch",3:"pen",4:"mouse"};re.prototype.h=function(){re.aa.h.call(this);var d=this.i;d.preventDefault?d.preventDefault():d.returnValue=!1};var he="closure_listenable_"+(1e6*Math.random()|0),ve=0;function xe(d,_,j,q,ce){this.listener=d,this.proxy=null,this.src=_,this.type=j,this.capture=!!q,this.ha=ce,this.key=++ve,this.da=this.fa=!1}function Ae(d){d.da=!0,d.listener=null,d.proxy=null,d.src=null,d.ha=null}function je(d){this.src=d,this.g={},this.h=0}je.prototype.add=function(d,_,j,q,ce){var ge=d.toString();d=this.g[ge],d||(d=this.g[ge]=[],this.h++);var Oe=Fe(d,_,q,ce);return-1<Oe?(_=d[Oe],j||(_.fa=!1)):(_=new xe(_,this.src,ge,!!q,ce),_.fa=j,d.push(_)),_};function Ve(d,_){var j=_.type;if(j in d.g){var q=d.g[j],ce=Array.prototype.indexOf.call(q,_,void 0),ge;(ge=0<=ce)&&Array.prototype.splice.call(q,ce,1),ge&&(Ae(_),d.g[j].length==0&&(delete d.g[j],d.h--))}}function Fe(d,_,j,q){for(var ce=0;ce<d.length;++ce){var ge=d[ce];if(!ge.da&&ge.listener==_&&ge.capture==!!j&&ge.ha==q)return ce}return-1}var Je="closure_lm_"+(1e6*Math.random()|0),W={};function Me(d,_,j,q,ce){if(Array.isArray(_)){for(var ge=0;ge<_.length;ge++)Me(d,_[ge],j,q,ce);return null}return j=Lt(j),d&&d[he]?d.K(_,j,u(q)?!!q.capture:!1,ce):Tt(d,_,j,!1,q,ce)}function Tt(d,_,j,q,ce,ge){if(!_)throw Error("Invalid event type");var Oe=u(ce)?!!ce.capture:!!ce,zt=et(d);if(zt||(d[Je]=zt=new je(d)),j=zt.add(_,j,q,Oe,ge),j.proxy)return j;if(q=lt(),j.proxy=q,q.src=d,q.listener=j,d.addEventListener)J||(ce=Oe),ce===void 0&&(ce=!1),d.addEventListener(_.toString(),q,ce);else if(d.attachEvent)d.attachEvent(Be(_.toString()),q);else if(d.addListener&&d.removeListener)d.addListener(q);else throw Error("addEventListener and attachEvent are unavailable.");return j}function lt(){function d(j){return _.call(d.src,d.listener,j)}const _=ot;return d}function Pe(d,_,j,q,ce){if(Array.isArray(_))for(var ge=0;ge<_.length;ge++)Pe(d,_[ge],j,q,ce);else q=u(q)?!!q.capture:!!q,j=Lt(j),d&&d[he]?(d=d.i,_=String(_).toString(),_ in d.g&&(ge=d.g[_],j=Fe(ge,j,q,ce),-1<j&&(Ae(ge[j]),Array.prototype.splice.call(ge,j,1),ge.length==0&&(delete d.g[_],d.h--)))):d&&(d=et(d))&&(_=d.g[_.toString()],d=-1,_&&(d=Fe(_,j,q,ce)),(j=-1<d?_[d]:null)&&st(j))}function st(d){if(typeof d!="number"&&d&&!d.da){var _=d.src;if(_&&_[he])Ve(_.i,d);else{var j=d.type,q=d.proxy;_.removeEventListener?_.removeEventListener(j,q,d.capture):_.detachEvent?_.detachEvent(Be(j),q):_.addListener&&_.removeListener&&_.removeListener(q),(j=et(_))?(Ve(j,d),j.h==0&&(j.src=null,_[Je]=null)):Ae(d)}}}function Be(d){return d in W?W[d]:W[d]="on"+d}function ot(d,_){if(d.da)d=!0;else{_=new re(_,this);var j=d.listener,q=d.ha||d.src;d.fa&&st(d),d=j.call(q,_)}return d}function et(d){return d=d[Je],d instanceof je?d:null}var Ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function Lt(d){return typeof d=="function"?d:(d[Ht]||(d[Ht]=function(_){return d.handleEvent(_)}),d[Ht])}function Xe(){U.call(this),this.i=new je(this),this.M=this,this.F=null}E(Xe,U),Xe.prototype[he]=!0,Xe.prototype.removeEventListener=function(d,_,j,q){Pe(this,d,_,j,q)};function ft(d,_){var j,q=d.F;if(q)for(j=[];q;q=q.F)j.push(q);if(d=d.M,q=_.type||_,typeof _=="string")_=new G(_,d);else if(_ instanceof G)_.target=_.target||d;else{var ce=_;_=new G(q,d),O(_,ce)}if(ce=!0,j)for(var ge=j.length-1;0<=ge;ge--){var Oe=_.g=j[ge];ce=Pt(Oe,q,!0,_)&&ce}if(Oe=_.g=d,ce=Pt(Oe,q,!0,_)&&ce,ce=Pt(Oe,q,!1,_)&&ce,j)for(ge=0;ge<j.length;ge++)Oe=_.g=j[ge],ce=Pt(Oe,q,!1,_)&&ce}Xe.prototype.N=function(){if(Xe.aa.N.call(this),this.i){var d=this.i,_;for(_ in d.g){for(var j=d.g[_],q=0;q<j.length;q++)Ae(j[q]);delete d.g[_],d.h--}}this.F=null},Xe.prototype.K=function(d,_,j,q){return this.i.add(String(d),_,!1,j,q)},Xe.prototype.L=function(d,_,j,q){return this.i.add(String(d),_,!0,j,q)};function Pt(d,_,j,q){if(_=d.i.g[String(_)],!_)return!0;_=_.concat();for(var ce=!0,ge=0;ge<_.length;++ge){var Oe=_[ge];if(Oe&&!Oe.da&&Oe.capture==j){var zt=Oe.listener,Dr=Oe.ha||Oe.src;Oe.fa&&Ve(d.i,Oe),ce=zt.call(Dr,q)!==!1&&ce}}return ce&&!q.defaultPrevented}function We(d,_,j){if(typeof d=="function")j&&(d=y(d,j));else if(d&&typeof d.handleEvent=="function")d=y(d.handleEvent,d);else throw Error("Invalid listener argument");return 2147483647<Number(_)?-1:a.setTimeout(d,_||0)}function xt(d){d.g=We(()=>{d.g=null,d.i&&(d.i=!1,xt(d))},d.l);const _=d.h;d.h=null,d.m.apply(null,_)}class Ze extends U{constructor(_,j){super(),this.m=_,this.l=j,this.h=null,this.i=!1,this.g=null}j(_){this.h=arguments,this.g?this.i=!0:xt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function hr(d){U.call(this),this.h=d,this.g={}}E(hr,U);var Ft=[];function It(d){Z(d.g,function(_,j){this.g.hasOwnProperty(j)&&st(_)},d),d.g={}}hr.prototype.N=function(){hr.aa.N.call(this),It(this)},hr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var At=a.JSON.stringify,yr=a.JSON.parse,it=class{stringify(d){return a.JSON.stringify(d,void 0)}parse(d){return a.JSON.parse(d,void 0)}};function er(){}er.prototype.h=null;function ut(d){return d.h||(d.h=d.i())}function vt(){}var tr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function kt(){G.call(this,"d")}E(kt,G);function at(){G.call(this,"c")}E(at,G);var Ot={},ho=null;function Gr(){return ho=ho||new Xe}Ot.La="serverreachability";function mi(d){G.call(this,Ot.La,d)}E(mi,G);function Gn(d){const _=Gr();ft(_,new mi(_))}Ot.STAT_EVENT="statevent";function ct(d,_){G.call(this,Ot.STAT_EVENT,d),this.stat=_}E(ct,G);function br(d){const _=Gr();ft(_,new ct(_,d))}Ot.Ma="timingevent";function gi(d,_){G.call(this,Ot.Ma,d),this.size=_}E(gi,G);function _n(d,_){if(typeof d!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){d()},_)}function bn(){this.g=!0}bn.prototype.xa=function(){this.g=!1};function Tr(d,_,j,q,ce,ge){d.info(function(){if(d.g)if(ge)for(var Oe="",zt=ge.split("&"),Dr=0;Dr<zt.length;Dr++){var Dt=zt[Dr].split("=");if(1<Dt.length){var Xt=Dt[0];Dt=Dt[1];var vr=Xt.split("_");Oe=2<=vr.length&&vr[1]=="type"?Oe+(Xt+"="+Dt+"&"):Oe+(Xt+"=redacted&")}}else Oe=null;else Oe=ge;return"XMLHTTP REQ ("+q+") [attempt "+ce+"]: "+_+`
`+j+`
`+Oe})}function ln(d,_,j,q,ce,ge,Oe){d.info(function(){return"XMLHTTP RESP ("+q+") [ attempt "+ce+"]: "+_+`
`+j+`
`+ge+" "+Oe})}function Ir(d,_,j,q){d.info(function(){return"XMLHTTP TEXT ("+_+"): "+fo(d,j)+(q?" "+q:"")})}function zo(d,_){d.info(function(){return"TIMEOUT: "+_})}bn.prototype.info=function(){};function fo(d,_){if(!d.g)return _;if(!_)return null;try{var j=JSON.parse(_);if(j){for(d=0;d<j.length;d++)if(Array.isArray(j[d])){var q=j[d];if(!(2>q.length)){var ce=q[1];if(Array.isArray(ce)&&!(1>ce.length)){var ge=ce[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Oe=1;Oe<ce.length;Oe++)ce[Oe]=""}}}}return At(j)}catch{return _}}var Kn={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ws={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ms;function Qn(){}E(Qn,er),Qn.prototype.g=function(){return new XMLHttpRequest},Qn.prototype.i=function(){return{}},ms=new Qn;function Kr(d,_,j,q){this.j=d,this.i=_,this.l=j,this.R=q||1,this.U=new hr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new po}function po(){this.i=null,this.g="",this.h=!1}var Gs={},Ui={};function mo(d,_,j){d.L=1,d.v=Go(fn(_)),d.m=j,d.P=!0,qo(d,null)}function qo(d,_){d.F=Date.now(),go(d),d.A=fn(d.v);var j=d.A,q=d.R;Array.isArray(q)||(q=[String(q)]),Jc(j.i,"t",q),d.C=0,j=d.j.J,d.h=new po,d.g=Br(d.j,j?_:null,!d.m),0<d.O&&(d.M=new Ze(y(d.Y,d,d.g),d.O)),_=d.U,j=d.g,q=d.ca;var ce="readystatechange";Array.isArray(ce)||(ce&&(Ft[0]=ce.toString()),ce=Ft);for(var ge=0;ge<ce.length;ge++){var Oe=Me(j,ce[ge],q||_.handleEvent,!1,_.h||_);if(!Oe)break;_.g[Oe.key]=Oe}_=d.H?P(d.H):{},d.m?(d.u||(d.u="POST"),_["Content-Type"]="application/x-www-form-urlencoded",d.g.ea(d.A,d.u,d.m,_)):(d.u="GET",d.g.ea(d.A,d.u,null,_)),Gn(),Tr(d.i,d.u,d.A,d.l,d.R,d.m)}Kr.prototype.ca=function(d){d=d.target;const _=this.M;_&&gs(d)==3?_.j():this.Y(d)},Kr.prototype.Y=function(d){try{if(d==this.g)e:{const vr=gs(this.g);var _=this.g.Ba();const Ys=this.g.Z();if(!(3>vr)&&(vr!=3||this.g&&(this.h.h||this.g.oa()||Jl(this.g)))){this.J||vr!=4||_==7||(_==8||0>=Ys?Gn(3):Gn(2)),La(this);var j=this.g.Z();this.X=j;t:if($o(this)){var q=Jl(this.g);d="";var ce=q.length,ge=gs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ks(this),Nn(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(_=0;_<ce;_++)this.h.h=!0,d+=this.h.i.decode(q[_],{stream:!(ge&&_==ce-1)});q.length=0,this.h.g+=d,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=j==200,ln(this.i,this.u,this.A,this.l,this.R,vr,j),this.o){if(this.T&&!this.K){t:{if(this.g){var zt,Dr=this.g;if((zt=Dr.g?Dr.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(zt)){var Dt=zt;break t}}Dt=null}if(j=Dt)Ir(this.i,this.l,j,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Ra(this,j);else{this.o=!1,this.s=3,br(12),Ks(this),Nn(this);break e}}if(this.P){j=!0;let Yn;for(;!this.J&&this.C<Oe.length;)if(Yn=Th(this,Oe),Yn==Ui){vr==4&&(this.s=4,br(14),j=!1),Ir(this.i,this.l,null,"[Incomplete Response]");break}else if(Yn==Gs){this.s=4,br(15),Ir(this.i,this.l,Oe,"[Invalid Chunk]"),j=!1;break}else Ir(this.i,this.l,Yn,null),Ra(this,Yn);if($o(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),vr!=4||Oe.length!=0||this.h.h||(this.s=1,br(16),j=!1),this.o=this.o&&j,!j)Ir(this.i,this.l,Oe,"[Invalid Chunked Response]"),Ks(this),Nn(this);else if(0<Oe.length&&!this.W){this.W=!0;var Xt=this.j;Xt.g==this&&Xt.ba&&!Xt.M&&(Xt.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),ze(Xt),Xt.M=!0,br(11))}}else Ir(this.i,this.l,Oe,null),Ra(this,Oe);vr==4&&Ks(this),this.o&&!this.J&&(vr==4?_t(this.j,this):(this.o=!1,go(this)))}else eu(this.g),j==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,br(12)):(this.s=0,br(13)),Ks(this),Nn(this)}}}catch{}finally{}};function $o(d){return d.g?d.u=="GET"&&d.L!=2&&d.j.Ca:!1}function Th(d,_){var j=d.C,q=_.indexOf(`
`,j);return q==-1?Ui:(j=Number(_.substring(j,q)),isNaN(j)?Gs:(q+=1,q+j>_.length?Ui:(_=_.slice(q,q+j),d.C=q+j,_)))}Kr.prototype.cancel=function(){this.J=!0,Ks(this)};function go(d){d.S=Date.now()+d.I,ql(d,d.I)}function ql(d,_){if(d.B!=null)throw Error("WatchDog timer not null");d.B=_n(y(d.ba,d),_)}function La(d){d.B&&(a.clearTimeout(d.B),d.B=null)}Kr.prototype.ba=function(){this.B=null;const d=Date.now();0<=d-this.S?(zo(this.i,this.A),this.L!=2&&(Gn(),br(17)),Ks(this),this.s=2,Nn(this)):ql(this,this.S-d)};function Nn(d){d.j.G==0||d.J||_t(d.j,d)}function Ks(d){La(d);var _=d.M;_&&typeof _.ma=="function"&&_.ma(),d.M=null,It(d.U),d.g&&(_=d.g,d.g=null,_.abort(),_.ma())}function Ra(d,_){try{var j=d.j;if(j.G!=0&&(j.g==d||ks(j.h,d))){if(!d.K&&ks(j.h,d)&&j.G==3){try{var q=j.Da.g.parse(_)}catch{q=null}if(Array.isArray(q)&&q.length==3){var ce=q;if(ce[0]==0){e:if(!j.u){if(j.g)if(j.g.F+3e3<d.F)pt(j),Ni(j);else break e;Ie(j),br(18)}}else j.za=ce[1],0<j.za-j.T&&37500>ce[2]&&j.F&&j.v==0&&!j.C&&(j.C=_n(y(j.Za,j),6e3));if(1>=Gl(j.h)&&j.ca){try{j.ca()}catch{}j.ca=void 0}}else Zt(j,11)}else if((d.K||j.g==d)&&pt(j),!T(_))for(ce=j.Da.g.parse(_),_=0;_<ce.length;_++){let Dt=ce[_];if(j.T=Dt[0],Dt=Dt[1],j.G==2)if(Dt[0]=="c"){j.K=Dt[1],j.ia=Dt[2];const Xt=Dt[3];Xt!=null&&(j.la=Xt,j.j.info("VER="+j.la));const vr=Dt[4];vr!=null&&(j.Aa=vr,j.j.info("SVER="+j.Aa));const Ys=Dt[5];Ys!=null&&typeof Ys=="number"&&0<Ys&&(q=1.5*Ys,j.L=q,j.j.info("backChannelRequestTimeoutMs_="+q)),q=j;const Yn=d.g;if(Yn){const jn=Yn.g?Yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(jn){var ge=q.h;ge.g||jn.indexOf("spdy")==-1&&jn.indexOf("quic")==-1&&jn.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(yo(ge,ge.h),ge.h=null))}if(q.D){const zi=Yn.g?Yn.g.getResponseHeader("X-HTTP-Session-Id"):null;zi&&(q.ya=zi,Ut(q.I,q.D,zi))}}j.G=3,j.l&&j.l.ua(),j.ba&&(j.R=Date.now()-d.F,j.j.info("Handshake RTT: "+j.R+"ms")),q=j;var Oe=d;if(q.qa=nr(q,q.J?q.ia:null,q.W),Oe.K){Gc(q.h,Oe);var zt=Oe,Dr=q.L;Dr&&(zt.I=Dr),zt.B&&(La(zt),go(zt)),q.g=Oe}else Ne(q);0<j.i.length&&v(j)}else Dt[0]!="stop"&&Dt[0]!="close"||Zt(j,7);else j.G==3&&(Dt[0]=="stop"||Dt[0]=="close"?Dt[0]=="stop"?Zt(j,7):Va(j):Dt[0]!="noop"&&j.l&&j.l.ta(Dt),j.v=0)}}Gn(4)}catch{}}var $l=class{constructor(d,_){this.g=d,this.map=_}};function Hl(d){this.l=d||10,a.PerformanceNavigationTiming?(d=a.performance.getEntriesByType("navigation"),d=0<d.length&&(d[0].nextHopProtocol=="hq"||d[0].nextHopProtocol=="h2")):d=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=d?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Wl(d){return d.h?!0:d.g?d.g.size>=d.j:!1}function Gl(d){return d.h?1:d.g?d.g.size:0}function ks(d,_){return d.h?d.h==_:d.g?d.g.has(_):!1}function yo(d,_){d.g?d.g.add(_):d.h=_}function Gc(d,_){d.h&&d.h==_?d.h=null:d.g&&d.g.has(_)&&d.g.delete(_)}Hl.prototype.cancel=function(){if(this.i=jr(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const d of this.g.values())d.cancel();this.g.clear()}};function jr(d){if(d.h!=null)return d.i.concat(d.h.D);if(d.g!=null&&d.g.size!==0){let _=d.i;for(const j of d.g.values())_=_.concat(j.D);return _}return b(d.i)}function Kc(d){if(d.V&&typeof d.V=="function")return d.V();if(typeof Map<"u"&&d instanceof Map||typeof Set<"u"&&d instanceof Set)return Array.from(d.values());if(typeof d=="string")return d.split("");if(l(d)){for(var _=[],j=d.length,q=0;q<j;q++)_.push(d[q]);return _}_=[],j=0;for(q in d)_[j++]=d[q];return _}function yi(d){if(d.na&&typeof d.na=="function")return d.na();if(!d.V||typeof d.V!="function"){if(typeof Map<"u"&&d instanceof Map)return Array.from(d.keys());if(!(typeof Set<"u"&&d instanceof Set)){if(l(d)||typeof d=="string"){var _=[];d=d.length;for(var j=0;j<d;j++)_.push(j);return _}_=[],j=0;for(const q in d)_[j++]=q;return _}}}function Ho(d,_){if(d.forEach&&typeof d.forEach=="function")d.forEach(_,void 0);else if(l(d)||typeof d=="string")Array.prototype.forEach.call(d,_,void 0);else for(var j=yi(d),q=Kc(d),ce=q.length,ge=0;ge<ce;ge++)_.call(void 0,q[ge],j&&j[ge],d)}var Kl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ps(d,_){if(d){d=d.split("&");for(var j=0;j<d.length;j++){var q=d[j].indexOf("="),ce=null;if(0<=q){var ge=d[j].substring(0,q);ce=d[j].substring(q+1)}else ge=d[j];_(ge,ce?decodeURIComponent(ce.replace(/\+/g," ")):"")}}}function dr(d){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,d instanceof dr){this.h=d.h,Wo(this,d.j),this.o=d.o,this.g=d.g,Oa(this,d.s),this.l=d.l;var _=d.i,j=new Cn;j.i=_.i,_.g&&(j.g=new Map(_.g),j.h=_.h),Qc(this,j),this.m=d.m}else d&&(_=String(d).match(Kl))?(this.h=!1,Wo(this,_[1]||"",!0),this.o=vo(_[2]||""),this.g=vo(_[3]||"",!0),Oa(this,_[4]),this.l=vo(_[5]||"",!0),Qc(this,_[6]||"",!0),this.m=vo(_[7]||"")):(this.h=!1,this.i=new Cn(null,this.h))}dr.prototype.toString=function(){var d=[],_=this.j;_&&d.push(vi(_,Yc,!0),":");var j=this.g;return(j||_=="file")&&(d.push("//"),(_=this.o)&&d.push(vi(_,Yc,!0),"@"),d.push(encodeURIComponent(String(j)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),j=this.s,j!=null&&d.push(":",String(j))),(j=this.l)&&(this.g&&j.charAt(0)!="/"&&d.push("/"),d.push(vi(j,j.charAt(0)=="/"?kh:Ih,!0))),(j=this.i.toString())&&d.push("?",j),(j=this.m)&&d.push("#",vi(j,Xc)),d.join("")};function fn(d){return new dr(d)}function Wo(d,_,j){d.j=j?vo(_,!0):_,d.j&&(d.j=d.j.replace(/:$/,""))}function Oa(d,_){if(_){if(_=Number(_),isNaN(_)||0>_)throw Error("Bad port number "+_);d.s=_}else d.s=null}function Qc(d,_,j){_ instanceof Cn?(d.i=_,Ph(d.i,d.h)):(j||(_=vi(_,Ql)),d.i=new Cn(_,d.h))}function Ut(d,_,j){d.i.set(_,j)}function Go(d){return Ut(d,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),d}function vo(d,_){return d?_?decodeURI(d.replace(/%25/g,"%2525")):decodeURIComponent(d):""}function vi(d,_,j){return typeof d=="string"?(d=encodeURI(d).replace(_,Ko),j&&(d=d.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),d):null}function Ko(d){return d=d.charCodeAt(0),"%"+(d>>4&15).toString(16)+(d&15).toString(16)}var Yc=/[#\/\?@]/g,Ih=/[#\?:]/g,kh=/[#\?]/g,Ql=/[#\?@]/g,Xc=/#/g;function Cn(d,_){this.h=this.g=null,this.i=d||null,this.j=!!_}function wi(d){d.g||(d.g=new Map,d.h=0,d.i&&Ps(d.i,function(_,j){d.add(decodeURIComponent(_.replace(/\+/g," ")),j)}))}t=Cn.prototype,t.add=function(d,_){wi(this),this.i=null,d=ht(this,d);var j=this.g.get(d);return j||this.g.set(d,j=[]),j.push(_),this.h+=1,this};function wo(d,_){wi(d),_=ht(d,_),d.g.has(_)&&(d.i=null,d.h-=d.g.get(_).length,d.g.delete(_))}function Da(d,_){return wi(d),_=ht(d,_),d.g.has(_)}t.forEach=function(d,_){wi(this),this.g.forEach(function(j,q){j.forEach(function(ce){d.call(_,ce,q,this)},this)},this)},t.na=function(){wi(this);const d=Array.from(this.g.values()),_=Array.from(this.g.keys()),j=[];for(let q=0;q<_.length;q++){const ce=d[q];for(let ge=0;ge<ce.length;ge++)j.push(_[q])}return j},t.V=function(d){wi(this);let _=[];if(typeof d=="string")Da(this,d)&&(_=_.concat(this.g.get(ht(this,d))));else{d=Array.from(this.g.values());for(let j=0;j<d.length;j++)_=_.concat(d[j])}return _},t.set=function(d,_){return wi(this),this.i=null,d=ht(this,d),Da(this,d)&&(this.h-=this.g.get(d).length),this.g.set(d,[_]),this.h+=1,this},t.get=function(d,_){return d?(d=this.V(d),0<d.length?String(d[0]):_):_};function Jc(d,_,j){wo(d,_),0<j.length&&(d.i=null,d.g.set(ht(d,_),b(j)),d.h+=j.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const d=[],_=Array.from(this.g.keys());for(var j=0;j<_.length;j++){var q=_[j];const ge=encodeURIComponent(String(q)),Oe=this.V(q);for(q=0;q<Oe.length;q++){var ce=ge;Oe[q]!==""&&(ce+="="+encodeURIComponent(String(Oe[q]))),d.push(ce)}}return this.i=d.join("&")};function ht(d,_){return _=String(_),d.j&&(_=_.toLowerCase()),_}function Ph(d,_){_&&!d.j&&(wi(d),d.i=null,d.g.forEach(function(j,q){var ce=q.toLowerCase();q!=ce&&(wo(this,q),Jc(this,ce,j))},d)),d.j=_}function Ch(d,_){const j=new bn;if(a.Image){const q=new Image;q.onload=m(En,j,"TestLoadImage: loaded",!0,_,q),q.onerror=m(En,j,"TestLoadImage: error",!1,_,q),q.onabort=m(En,j,"TestLoadImage: abort",!1,_,q),q.ontimeout=m(En,j,"TestLoadImage: timeout",!1,_,q),a.setTimeout(function(){q.ontimeout&&q.ontimeout()},1e4),q.src=d}else _(!1)}function jh(d,_){const j=new bn,q=new AbortController,ce=setTimeout(()=>{q.abort(),En(j,"TestPingServer: timeout",!1,_)},1e4);fetch(d,{signal:q.signal}).then(ge=>{clearTimeout(ce),ge.ok?En(j,"TestPingServer: ok",!0,_):En(j,"TestPingServer: server error",!1,_)}).catch(()=>{clearTimeout(ce),En(j,"TestPingServer: error",!1,_)})}function En(d,_,j,q,ce){try{ce&&(ce.onload=null,ce.onerror=null,ce.onabort=null,ce.ontimeout=null),q(j)}catch{}}function Vi(){this.g=new it}function Lh(d,_,j){const q=j||"";try{Ho(d,function(ce,ge){let Oe=ce;u(ce)&&(Oe=At(ce)),_.push(q+ge+"="+encodeURIComponent(Oe))})}catch(ce){throw _.push(q+"type="+encodeURIComponent("_badmap")),ce}}function Ma(d){this.l=d.Ub||null,this.j=d.eb||!1}E(Ma,er),Ma.prototype.g=function(){return new Bi(this.l,this.j)},Ma.prototype.i=function(d){return function(){return d}}({});function Bi(d,_){Xe.call(this),this.D=d,this.o=_,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}E(Bi,Xe),t=Bi.prototype,t.open=function(d,_){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=d,this.A=_,this.readyState=1,Qo(this)},t.send=function(d){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const _={headers:this.u,method:this.B,credentials:this.m,cache:void 0};d&&(_.body=d),(this.D||a).fetch(new Request(this.A,_)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Qs(this)),this.readyState=0},t.Sa=function(d){if(this.g&&(this.l=d,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=d.headers,this.readyState=2,Qo(this)),this.g&&(this.readyState=3,Qo(this),this.g)))if(this.responseType==="arraybuffer")d.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in d){if(this.j=d.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Fa(this)}else d.text().then(this.Ra.bind(this),this.ga.bind(this))};function Fa(d){d.j.read().then(d.Pa.bind(d)).catch(d.ga.bind(d))}t.Pa=function(d){if(this.g){if(this.o&&d.value)this.response.push(d.value);else if(!this.o){var _=d.value?d.value:new Uint8Array(0);(_=this.v.decode(_,{stream:!d.done}))&&(this.response=this.responseText+=_)}d.done?Qs(this):Qo(this),this.readyState==3&&Fa(this)}},t.Ra=function(d){this.g&&(this.response=this.responseText=d,Qs(this))},t.Qa=function(d){this.g&&(this.response=d,Qs(this))},t.ga=function(){this.g&&Qs(this)};function Qs(d){d.readyState=4,d.l=null,d.j=null,d.v=null,Qo(d)}t.setRequestHeader=function(d,_){this.u.append(d,_)},t.getResponseHeader=function(d){return this.h&&this.h.get(d.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const d=[],_=this.h.entries();for(var j=_.next();!j.done;)j=j.value,d.push(j[0]+": "+j[1]),j=_.next();return d.join(`\r
`)};function Qo(d){d.onreadystatechange&&d.onreadystatechange.call(d)}Object.defineProperty(Bi.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(d){this.m=d?"include":"same-origin"}});function xi(d){let _="";return Z(d,function(j,q){_+=q,_+=":",_+=j,_+=`\r
`}),_}function Yl(d,_,j){e:{for(q in j){var q=!1;break e}q=!0}q||(j=xi(j),typeof d=="string"?j!=null&&encodeURIComponent(String(j)):Ut(d,_,j))}function ur(d){Xe.call(this),this.headers=new Map,this.o=d||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}E(ur,Xe);var Xl=/^https?$/i,Zc=["POST","PUT"];t=ur.prototype,t.Ha=function(d){this.J=d},t.ea=function(d,_,j,q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+d);_=_?_.toUpperCase():"GET",this.D=d,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ms.g(),this.v=this.o?ut(this.o):ut(ms),this.g.onreadystatechange=y(this.Ea,this);try{this.B=!0,this.g.open(_,String(d),!0),this.B=!1}catch(ge){_i(this,ge);return}if(d=j||"",j=new Map(this.headers),q)if(Object.getPrototypeOf(q)===Object.prototype)for(var ce in q)j.set(ce,q[ce]);else if(typeof q.keys=="function"&&typeof q.get=="function")for(const ge of q.keys())j.set(ge,q.get(ge));else throw Error("Unknown input type for opt_headers: "+String(q));q=Array.from(j.keys()).find(ge=>ge.toLowerCase()=="content-type"),ce=a.FormData&&d instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Zc,_,void 0))||q||ce||j.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Oe]of j)this.g.setRequestHeader(ge,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{_o(this),this.u=!0,this.g.send(d),this.u=!1}catch(ge){_i(this,ge)}};function _i(d,_){d.h=!1,d.g&&(d.j=!0,d.g.abort(),d.j=!1),d.l=_,d.m=5,Ua(d),xo(d)}function Ua(d){d.A||(d.A=!0,ft(d,"complete"),ft(d,"error"))}t.abort=function(d){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=d||7,ft(this,"complete"),ft(this,"abort"),xo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),xo(this,!0)),ur.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Yo(this):this.bb())},t.bb=function(){Yo(this)};function Yo(d){if(d.h&&typeof o<"u"&&(!d.v[1]||gs(d)!=4||d.Z()!=2)){if(d.u&&gs(d)==4)We(d.Ea,0,d);else if(ft(d,"readystatechange"),gs(d)==4){d.h=!1;try{const Oe=d.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var _=!0;break e;default:_=!1}var j;if(!(j=_)){var q;if(q=Oe===0){var ce=String(d.D).match(Kl)[1]||null;!ce&&a.self&&a.self.location&&(ce=a.self.location.protocol.slice(0,-1)),q=!Xl.test(ce?ce.toLowerCase():"")}j=q}if(j)ft(d,"complete"),ft(d,"success");else{d.m=6;try{var ge=2<gs(d)?d.g.statusText:""}catch{ge=""}d.l=ge+" ["+d.Z()+"]",Ua(d)}}finally{xo(d)}}}}function xo(d,_){if(d.g){_o(d);const j=d.g,q=d.v[0]?()=>{}:null;d.g=null,d.v=null,_||ft(d,"ready");try{j.onreadystatechange=q}catch{}}}function _o(d){d.I&&(a.clearTimeout(d.I),d.I=null)}t.isActive=function(){return!!this.g};function gs(d){return d.g?d.g.readyState:0}t.Z=function(){try{return 2<gs(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(d){if(this.g){var _=this.g.responseText;return d&&_.indexOf(d)==0&&(_=_.substring(d.length)),yr(_)}};function Jl(d){try{if(!d.g)return null;if("response"in d.g)return d.g.response;switch(d.H){case"":case"text":return d.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in d.g)return d.g.mozResponseArrayBuffer}return null}catch{return null}}function eu(d){const _={};d=(d.g&&2<=gs(d)&&d.g.getAllResponseHeaders()||"").split(`\r
`);for(let q=0;q<d.length;q++){if(T(d[q]))continue;var j=N(d[q]);const ce=j[0];if(j=j[1],typeof j!="string")continue;j=j.trim();const ge=_[ce]||[];_[ce]=ge,ge.push(j)}F(_,function(q){return q.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function ys(d,_,j){return j&&j.internalChannelParams&&j.internalChannelParams[d]||_}function bi(d){this.Aa=0,this.i=[],this.j=new bn,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=ys("failFast",!1,d),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=ys("baseRetryDelayMs",5e3,d),this.cb=ys("retryDelaySeedMs",1e4,d),this.Wa=ys("forwardChannelMaxRetries",2,d),this.wa=ys("forwardChannelRequestTimeoutMs",2e4,d),this.pa=d&&d.xmlHttpFactory||void 0,this.Xa=d&&d.Tb||void 0,this.Ca=d&&d.useFetchStreams||!1,this.L=void 0,this.J=d&&d.supportsCrossDomainXhr||!1,this.K="",this.h=new Hl(d&&d.concurrentRequestLimit),this.Da=new Vi,this.P=d&&d.fastHandshake||!1,this.O=d&&d.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=d&&d.Rb||!1,d&&d.xa&&this.j.xa(),d&&d.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&d&&d.detectBufferingProxy||!1,this.ja=void 0,d&&d.longPollingTimeout&&0<d.longPollingTimeout&&(this.ja=d.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=bi.prototype,t.la=8,t.G=1,t.connect=function(d,_,j,q){br(0),this.W=d,this.H=_||{},j&&q!==void 0&&(this.H.OSID=j,this.H.OAID=q),this.F=this.X,this.I=nr(this,null,this.W),v(this)};function Va(d){if(Zl(d),d.G==3){var _=d.U++,j=fn(d.I);if(Ut(j,"SID",d.K),Ut(j,"RID",_),Ut(j,"TYPE","terminate"),te(d,j),_=new Kr(d,d.j,_),_.L=2,_.v=Go(fn(j)),j=!1,a.navigator&&a.navigator.sendBeacon)try{j=a.navigator.sendBeacon(_.v.toString(),"")}catch{}!j&&a.Image&&(new Image().src=_.v,j=!0),j||(_.g=Br(_.j,null),_.g.ea(_.v)),_.F=Date.now(),go(_)}Lr(d)}function Ni(d){d.g&&(ze(d),d.g.cancel(),d.g=null)}function Zl(d){Ni(d),d.u&&(a.clearTimeout(d.u),d.u=null),pt(d),d.h.cancel(),d.s&&(typeof d.s=="number"&&a.clearTimeout(d.s),d.s=null)}function v(d){if(!Wl(d.h)&&!d.s){d.s=!0;var _=d.Ga;ye||_e(),ee||(ye(),ee=!0),ue.add(_,d),d.B=0}}function D(d,_){return Gl(d.h)>=d.h.j-(d.s?1:0)?!1:d.s?(d.i=_.D.concat(d.i),!0):d.G==1||d.G==2||d.B>=(d.Va?0:d.Wa)?!1:(d.s=_n(y(d.Ga,d,_),Vt(d,d.B)),d.B++,!0)}t.Ga=function(d){if(this.s)if(this.s=null,this.G==1){if(!d){this.U=Math.floor(1e5*Math.random()),d=this.U++;const ce=new Kr(this,this.j,d);let ge=this.o;if(this.S&&(ge?(ge=P(ge),O(ge,this.S)):ge=this.S),this.m!==null||this.O||(ce.H=ge,ge=null),this.P)e:{for(var _=0,j=0;j<this.i.length;j++){t:{var q=this.i[j];if("__data__"in q.map&&(q=q.map.__data__,typeof q=="string")){q=q.length;break t}q=void 0}if(q===void 0)break;if(_+=q,4096<_){_=j;break e}if(_===4096||j===this.i.length-1){_=j+1;break e}}_=1e3}else _=1e3;_=ae(this,ce,_),j=fn(this.I),Ut(j,"RID",d),Ut(j,"CVER",22),this.D&&Ut(j,"X-HTTP-Session-Id",this.D),te(this,j),ge&&(this.O?_="headers="+encodeURIComponent(String(xi(ge)))+"&"+_:this.m&&Yl(j,this.m,ge)),yo(this.h,ce),this.Ua&&Ut(j,"TYPE","init"),this.P?(Ut(j,"$req",_),Ut(j,"SID","null"),ce.T=!0,mo(ce,j,null)):mo(ce,j,_),this.G=2}}else this.G==3&&(d?K(this,d):this.i.length==0||Wl(this.h)||K(this))};function K(d,_){var j;_?j=_.l:j=d.U++;const q=fn(d.I);Ut(q,"SID",d.K),Ut(q,"RID",j),Ut(q,"AID",d.T),te(d,q),d.m&&d.o&&Yl(q,d.m,d.o),j=new Kr(d,d.j,j,d.B+1),d.m===null&&(j.H=d.o),_&&(d.i=_.D.concat(d.i)),_=ae(d,j,1e3),j.I=Math.round(.5*d.wa)+Math.round(.5*d.wa*Math.random()),yo(d.h,j),mo(j,q,_)}function te(d,_){d.H&&Z(d.H,function(j,q){Ut(_,q,j)}),d.l&&Ho({},function(j,q){Ut(_,q,j)})}function ae(d,_,j){j=Math.min(d.i.length,j);var q=d.l?y(d.l.Na,d.l,d):null;e:{var ce=d.i;let ge=-1;for(;;){const Oe=["count="+j];ge==-1?0<j?(ge=ce[0].g,Oe.push("ofs="+ge)):ge=0:Oe.push("ofs="+ge);let zt=!0;for(let Dr=0;Dr<j;Dr++){let Dt=ce[Dr].g;const Xt=ce[Dr].map;if(Dt-=ge,0>Dt)ge=Math.max(0,ce[Dr].g-100),zt=!1;else try{Lh(Xt,Oe,"req"+Dt+"_")}catch{q&&q(Xt)}}if(zt){q=Oe.join("&");break e}}}return d=d.i.splice(0,j),_.D=d,q}function Ne(d){if(!d.g&&!d.u){d.Y=1;var _=d.Fa;ye||_e(),ee||(ye(),ee=!0),ue.add(_,d),d.v=0}}function Ie(d){return d.g||d.u||3<=d.v?!1:(d.Y++,d.u=_n(y(d.Fa,d),Vt(d,d.v)),d.v++,!0)}t.Fa=function(){if(this.u=null,Ge(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var d=2*this.R;this.j.info("BP detection timer enabled: "+d),this.A=_n(y(this.ab,this),d)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,br(10),Ni(this),Ge(this))};function ze(d){d.A!=null&&(a.clearTimeout(d.A),d.A=null)}function Ge(d){d.g=new Kr(d,d.j,"rpc",d.Y),d.m===null&&(d.g.H=d.o),d.g.O=0;var _=fn(d.qa);Ut(_,"RID","rpc"),Ut(_,"SID",d.K),Ut(_,"AID",d.T),Ut(_,"CI",d.F?"0":"1"),!d.F&&d.ja&&Ut(_,"TO",d.ja),Ut(_,"TYPE","xmlhttp"),te(d,_),d.m&&d.o&&Yl(_,d.m,d.o),d.L&&(d.g.I=d.L);var j=d.g;d=d.ia,j.L=1,j.v=Go(fn(_)),j.m=null,j.P=!0,qo(j,d)}t.Za=function(){this.C!=null&&(this.C=null,Ni(this),Ie(this),br(19))};function pt(d){d.C!=null&&(a.clearTimeout(d.C),d.C=null)}function _t(d,_){var j=null;if(d.g==_){pt(d),ze(d),d.g=null;var q=2}else if(ks(d.h,_))j=_.D,Gc(d.h,_),q=1;else return;if(d.G!=0){if(_.o)if(q==1){j=_.m?_.m.length:0,_=Date.now()-_.F;var ce=d.B;q=Gr(),ft(q,new gi(q,j)),v(d)}else Ne(d);else if(ce=_.s,ce==3||ce==0&&0<_.X||!(q==1&&D(d,_)||q==2&&Ie(d)))switch(j&&0<j.length&&(_=d.h,_.i=_.i.concat(j)),ce){case 1:Zt(d,5);break;case 4:Zt(d,10);break;case 3:Zt(d,6);break;default:Zt(d,2)}}}function Vt(d,_){let j=d.Ta+Math.floor(Math.random()*d.cb);return d.isActive()||(j*=2),j*_}function Zt(d,_){if(d.j.info("Error code "+_),_==2){var j=y(d.fb,d),q=d.Xa;const ce=!q;q=new dr(q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Wo(q,"https"),Go(q),ce?Ch(q.toString(),j):jh(q.toString(),j)}else br(2);d.G=0,d.l&&d.l.sa(_),Lr(d),Zl(d)}t.fb=function(d){d?(this.j.info("Successfully pinged google.com"),br(2)):(this.j.info("Failed to ping google.com"),br(1))};function Lr(d){if(d.G=0,d.ka=[],d.l){const _=jr(d.h);(_.length!=0||d.i.length!=0)&&(A(d.ka,_),A(d.ka,d.i),d.h.i.length=0,b(d.i),d.i.length=0),d.l.ra()}}function nr(d,_,j){var q=j instanceof dr?fn(j):new dr(j);if(q.g!="")_&&(q.g=_+"."+q.g),Oa(q,q.s);else{var ce=a.location;q=ce.protocol,_=_?_+"."+ce.hostname:ce.hostname,ce=+ce.port;var ge=new dr(null);q&&Wo(ge,q),_&&(ge.g=_),ce&&Oa(ge,ce),j&&(ge.l=j),q=ge}return j=d.D,_=d.ya,j&&_&&Ut(q,j,_),Ut(q,"VER",d.la),te(d,q),q}function Br(d,_,j){if(_&&!d.J)throw Error("Can't create secondary domain capable XhrIo object.");return _=d.Ca&&!d.pa?new ur(new Ma({eb:j})):new ur(d.pa),_.Ha(d.J),_}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Rr(){}t=Rr.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function zr(){}zr.prototype.g=function(d,_){return new Or(d,_)};function Or(d,_){Xe.call(this),this.g=new bi(_),this.l=d,this.h=_&&_.messageUrlParams||null,d=_&&_.messageHeaders||null,_&&_.clientProtocolHeaderRequired&&(d?d["X-Client-Protocol"]="webchannel":d={"X-Client-Protocol":"webchannel"}),this.g.o=d,d=_&&_.initMessageHeaders||null,_&&_.messageContentType&&(d?d["X-WebChannel-Content-Type"]=_.messageContentType:d={"X-WebChannel-Content-Type":_.messageContentType}),_&&_.va&&(d?d["X-WebChannel-Client-Profile"]=_.va:d={"X-WebChannel-Client-Profile":_.va}),this.g.S=d,(d=_&&_.Sb)&&!T(d)&&(this.g.m=d),this.v=_&&_.supportsCrossDomainXhr||!1,this.u=_&&_.sendRawJson||!1,(_=_&&_.httpSessionIdParam)&&!T(_)&&(this.g.D=_,d=this.h,d!==null&&_ in d&&(d=this.h,_ in d&&delete d[_])),this.j=new Ai(this)}E(Or,Xe),Or.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Or.prototype.close=function(){Va(this.g)},Or.prototype.o=function(d){var _=this.g;if(typeof d=="string"){var j={};j.__data__=d,d=j}else this.u&&(j={},j.__data__=At(d),d=j);_.i.push(new $l(_.Ya++,d)),_.G==3&&v(_)},Or.prototype.N=function(){this.g.l=null,delete this.j,Va(this.g),delete this.g,Or.aa.N.call(this)};function Cs(d){kt.call(this),d.__headers__&&(this.headers=d.__headers__,this.statusCode=d.__status__,delete d.__headers__,delete d.__status__);var _=d.__sm__;if(_){e:{for(const j in _){d=j;break e}d=void 0}(this.i=d)&&(d=this.i,_=_!==null&&d in _?_[d]:void 0),this.data=_}else this.data=d}E(Cs,kt);function Ei(){at.call(this),this.status=1}E(Ei,at);function Ai(d){this.g=d}E(Ai,Rr),Ai.prototype.ua=function(){ft(this.g,"a")},Ai.prototype.ta=function(d){ft(this.g,new Cs(d))},Ai.prototype.sa=function(d){ft(this.g,new Ei)},Ai.prototype.ra=function(){ft(this.g,"b")},zr.prototype.createWebChannel=zr.prototype.g,Or.prototype.send=Or.prototype.o,Or.prototype.open=Or.prototype.m,Or.prototype.close=Or.prototype.close,mA=function(){return new zr},pA=function(){return Gr()},fA=Ot,Wy={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Kn.NO_ERROR=0,Kn.TIMEOUT=8,Kn.HTTP_ERROR=6,Jp=Kn,Ws.COMPLETE="complete",dA=Ws,vt.EventType=tr,tr.OPEN="a",tr.CLOSE="b",tr.ERROR="c",tr.MESSAGE="d",Xe.prototype.listen=Xe.prototype.K,fd=vt,ur.prototype.listenOnce=ur.prototype.L,ur.prototype.getLastError=ur.prototype.Ka,ur.prototype.getLastErrorCode=ur.prototype.Ba,ur.prototype.getStatus=ur.prototype.Z,ur.prototype.getResponseJson=ur.prototype.Oa,ur.prototype.getResponseText=ur.prototype.oa,ur.prototype.send=ur.prototype.ea,ur.prototype.setWithCredentials=ur.prototype.Ha,hA=ur}).apply(typeof bp<"u"?bp:typeof self<"u"?self:typeof window<"u"?window:{});const __="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let os=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};os.UNAUTHENTICATED=new os(null),os.GOOGLE_CREDENTIALS=new os("google-credentials-uid"),os.FIRST_PARTY=new os("first-party-uid"),os.MOCK_USER=new os("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bh="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Av("@firebase/firestore");function rd(){return Ic.logLevel}function Ke(t,...e){if(Ic.logLevel<=$t.DEBUG){const r=e.map(Fv);Ic.debug(`Firestore (${bh}): ${t}`,...r)}}function Sa(t,...e){if(Ic.logLevel<=$t.ERROR){const r=e.map(Fv);Ic.error(`Firestore (${bh}): ${t}`,...r)}}function rh(t,...e){if(Ic.logLevel<=$t.WARN){const r=e.map(Fv);Ic.warn(`Firestore (${bh}): ${t}`,...r)}}function Fv(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(r){return JSON.stringify(r)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t="Unexpected state"){const e=`FIRESTORE (${bh}) INTERNAL ASSERTION FAILED: `+t;throw Sa(e),new Error(e)}function cr(t,e){t||wt()}function Et(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Te={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ue extends lo{constructor(e,r){super(e,r),this.code=e,this.message=r,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ya{constructor(){this.promise=new Promise((e,r)=>{this.resolve=e,this.reject=r})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,r){this.user=r,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class l7{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,r){e.enqueueRetryable(()=>r(os.UNAUTHENTICATED))}shutdown(){}}class c7{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,r){this.changeListener=r,e.enqueueRetryable(()=>r(this.token.user))}shutdown(){this.changeListener=null}}class u7{constructor(e){this.t=e,this.currentUser=os.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,r){cr(this.o===void 0);let n=this.i;const s=l=>this.i!==n?(n=this.i,r(l)):Promise.resolve();let i=new ya;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new ya,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const l=i;e.enqueueRetryable(async()=>{await l.promise,await s(this.currentUser)})},a=l=>{Ke("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(Ke("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new ya)}},0),o()}getToken(){const e=this.i,r=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(r).then(n=>this.i!==e?(Ke("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(cr(typeof n.accessToken=="string"),new gA(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return cr(e===null||typeof e=="string"),new os(e)}}class h7{constructor(e,r,n){this.l=e,this.h=r,this.P=n,this.type="FirstParty",this.user=os.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class d7{constructor(e,r,n){this.l=e,this.h=r,this.P=n}getToken(){return Promise.resolve(new h7(this.l,this.h,this.P))}start(e,r){e.enqueueRetryable(()=>r(os.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class f7{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class p7{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,r){cr(this.o===void 0);const n=i=>{i.error!=null&&Ke("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,Ke("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?r(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>n(i))};const s=i=>{Ke("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):Ke("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(r=>r?(cr(typeof r.token=="string"),this.R=r.token,new f7(r.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m7(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),r=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(r);else for(let n=0;n<t;n++)r[n]=Math.floor(256*Math.random());return r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",r=Math.floor(256/e.length)*e.length;let n="";for(;n.length<20;){const s=m7(40);for(let i=0;i<s.length;++i)n.length<20&&s[i]<r&&(n+=e.charAt(s[i]%e.length))}return n}}function Jt(t,e){return t<e?-1:t>e?1:0}function nh(t,e,r){return t.length===e.length&&t.every((n,s)=>r(n,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,r){if(this.seconds=e,this.nanoseconds=r,r<0)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(r>=1e9)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+r);if(e<-62135596800)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ue(Te.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return dn.fromMillis(Date.now())}static fromDate(e){return dn.fromMillis(e.getTime())}static fromMillis(e){const r=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*r));return new dn(r,n)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Jt(this.nanoseconds,e.nanoseconds):Jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nt(e)}static min(){return new Nt(new dn(0,0))}static max(){return new Nt(new dn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rf{constructor(e,r,n){r===void 0?r=0:r>e.length&&wt(),n===void 0?n=e.length-r:n>e.length-r&&wt(),this.segments=e,this.offset=r,this.len=n}get length(){return this.len}isEqual(e){return rf.comparator(this,e)===0}child(e){const r=this.segments.slice(this.offset,this.limit());return e instanceof rf?e.forEach(n=>{r.push(n)}):r.push(e),this.construct(r)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let r=0;r<this.length;r++)if(this.get(r)!==e.get(r))return!1;return!0}forEach(e){for(let r=this.offset,n=this.limit();r<n;r++)e(this.segments[r])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,r){const n=Math.min(e.length,r.length);for(let s=0;s<n;s++){const i=e.get(s),o=r.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<r.length?-1:e.length>r.length?1:0}}class xr extends rf{construct(e,r,n){return new xr(e,r,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const r=[];for(const n of e){if(n.indexOf("//")>=0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);r.push(...n.split("/").filter(s=>s.length>0))}return new xr(r)}static emptyPath(){return new xr([])}}const g7=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bn extends rf{construct(e,r,n){return new Bn(e,r,n)}static isValidIdentifier(e){return g7.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bn.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Bn(["__name__"])}static fromServerFormat(e){const r=[];let n="",s=0;const i=()=>{if(n.length===0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);r.push(n),n=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new Ue(Te.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new Ue(Te.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(n+=a,s++):(i(),s++)}if(i(),o)throw new Ue(Te.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bn(r)}static emptyPath(){return new Bn([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.path=e}static fromPath(e){return new nt(xr.fromString(e))}static fromName(e){return new nt(xr.fromString(e).popFirst(5))}static empty(){return new nt(xr.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&xr.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,r){return xr.comparator(e.path,r.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new nt(new xr(e.slice()))}}function y7(t,e){const r=t.toTimestamp().seconds,n=t.toTimestamp().nanoseconds+1,s=Nt.fromTimestamp(n===1e9?new dn(r+1,0):new dn(r,n));return new Cl(s,nt.empty(),e)}function v7(t){return new Cl(t.readTime,t.key,-1)}class Cl{constructor(e,r,n){this.readTime=e,this.documentKey=r,this.largestBatchId=n}static min(){return new Cl(Nt.min(),nt.empty(),-1)}static max(){return new Cl(Nt.max(),nt.empty(),-1)}}function w7(t,e){let r=t.readTime.compareTo(e.readTime);return r!==0?r:(r=nt.comparator(t.documentKey,e.documentKey),r!==0?r:Jt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x7="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class _7{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tf(t){if(t.code!==Te.FAILED_PRECONDITION||t.message!==x7)throw t;Ke("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(r=>{this.isDone=!0,this.result=r,this.nextCallback&&this.nextCallback(r)},r=>{this.isDone=!0,this.error=r,this.catchCallback&&this.catchCallback(r)})}catch(e){return this.next(void 0,e)}next(e,r){return this.callbackAttached&&wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(r,this.error):this.wrapSuccess(e,this.result):new Ce((n,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(n,s)},this.catchCallback=i=>{this.wrapFailure(r,i).next(n,s)}})}toPromise(){return new Promise((e,r)=>{this.next(e,r)})}wrapUserFunction(e){try{const r=e();return r instanceof Ce?r:Ce.resolve(r)}catch(r){return Ce.reject(r)}}wrapSuccess(e,r){return e?this.wrapUserFunction(()=>e(r)):Ce.resolve(r)}wrapFailure(e,r){return e?this.wrapUserFunction(()=>e(r)):Ce.reject(r)}static resolve(e){return new Ce((r,n)=>{r(e)})}static reject(e){return new Ce((r,n)=>{n(e)})}static waitFor(e){return new Ce((r,n)=>{let s=0,i=0,o=!1;e.forEach(a=>{++s,a.next(()=>{++i,o&&i===s&&r()},l=>n(l))}),o=!0,i===s&&r()})}static or(e){let r=Ce.resolve(!1);for(const n of e)r=r.next(s=>s?Ce.resolve(s):n());return r}static forEach(e,r){const n=[];return e.forEach((s,i)=>{n.push(r.call(this,s,i))}),this.waitFor(n)}static mapArray(e,r){return new Ce((n,s)=>{const i=e.length,o=new Array(i);let a=0;for(let l=0;l<i;l++){const u=l;r(e[u]).next(f=>{o[u]=f,++a,a===i&&n(o)},f=>s(f))}})}static doWhile(e,r){return new Ce((n,s)=>{const i=()=>{e()===!0?r().next(()=>{i()},s):n()};i()})}}function b7(t){const e=t.match(/Android ([\d.]+)/i),r=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(r)}function If(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uv{constructor(e,r){this.previousValue=e,r&&(r.sequenceNumberHandler=n=>this.ie(n),this.se=n=>r.writeSequenceNumber(n))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Uv.oe=-1;function jg(t){return t==null}function Wm(t){return t===0&&1/t==-1/0}function N7(t){return typeof t=="number"&&Number.isInteger(t)&&!Wm(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b_(t){let e=0;for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e++;return e}function Bc(t,e){for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&e(r,t[r])}function vA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vr{constructor(e,r){this.comparator=e,this.root=r||Vn.EMPTY}insert(e,r){return new Vr(this.comparator,this.root.insert(e,r,this.comparator).copy(null,null,Vn.BLACK,null,null))}remove(e){return new Vr(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Vn.BLACK,null,null))}get(e){let r=this.root;for(;!r.isEmpty();){const n=this.comparator(e,r.key);if(n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}indexOf(e){let r=0,n=this.root;for(;!n.isEmpty();){const s=this.comparator(e,n.key);if(s===0)return r+n.left.size;s<0?n=n.left:(r+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((r,n)=>(e(r,n),!1))}toString(){const e=[];return this.inorderTraversal((r,n)=>(e.push(`${r}:${n}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Np(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Np(this.root,e,this.comparator,!1)}getReverseIterator(){return new Np(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Np(this.root,e,this.comparator,!0)}}class Np{constructor(e,r,n,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=r?n(e.key,r):1,r&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const r={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return r}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Vn{constructor(e,r,n,s,i){this.key=e,this.value=r,this.color=n??Vn.RED,this.left=s??Vn.EMPTY,this.right=i??Vn.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,r,n,s,i){return new Vn(e??this.key,r??this.value,n??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,r,n){let s=this;const i=n(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,r,n),null):i===0?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(e,r,n)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Vn.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,r){let n,s=this;if(r(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,r),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),r(e,s.key)===0){if(s.right.isEmpty())return Vn.EMPTY;n=s.right.min(),s=s.copy(n.key,n.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,r))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Vn.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Vn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,r)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw wt();const e=this.left.check();if(e!==this.right.check())throw wt();return e+(this.isRed()?0:1)}}Vn.EMPTY=null,Vn.RED=!0,Vn.BLACK=!1;Vn.EMPTY=new class{constructor(){this.size=0}get key(){throw wt()}get value(){throw wt()}get color(){throw wt()}get left(){throw wt()}get right(){throw wt()}copy(e,r,n,s,i){return this}insert(e,r,n){return new Vn(e,r)}remove(e,r){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(e){this.comparator=e,this.data=new Vr(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((r,n)=>(e(r),!1))}forEachInRange(e,r){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const s=n.getNext();if(this.comparator(s.key,e[1])>=0)return;r(s.key)}}forEachWhile(e,r){let n;for(n=r!==void 0?this.data.getIteratorFrom(r):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const r=this.data.getIteratorFrom(e);return r.hasNext()?r.getNext().key:null}getIterator(){return new N_(this.data.getIterator())}getIteratorFrom(e){return new N_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let r=this;return r.size<e.size&&(r=e,e=this),e.forEach(n=>{r=r.add(n)}),r}isEqual(e){if(!(e instanceof $n)||this.size!==e.size)return!1;const r=this.data.getIterator(),n=e.data.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(r=>{e.push(r)}),e}toString(){const e=[];return this.forEach(r=>e.push(r)),"SortedSet("+e.toString()+")"}copy(e){const r=new $n(this.comparator);return r.data=e,r}}class N_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this.fields=e,e.sort(Bn.comparator)}static empty(){return new ci([])}unionWith(e){let r=new $n(Bn.comparator);for(const n of this.fields)r=r.add(n);for(const n of e)r=r.add(n);return new ci(r.toArray())}covers(e){for(const r of this.fields)if(r.isPrefixOf(e))return!0;return!1}isEqual(e){return nh(this.fields,e.fields,(r,n)=>r.isEqual(n))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e){this.binaryString=e}static fromBase64String(e){const r=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new wA("Invalid base64 string: "+i):i}}(e);return new Wn(r)}static fromUint8Array(e){const r=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new Wn(r)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(r){return btoa(r)}(this.binaryString)}toUint8Array(){return function(r){const n=new Uint8Array(r.length);for(let s=0;s<r.length;s++)n[s]=r.charCodeAt(s);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Wn.EMPTY_BYTE_STRING=new Wn("");const E7=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function jl(t){if(cr(!!t),typeof t=="string"){let e=0;const r=E7.exec(t);if(cr(!!r),r[1]){let s=r[1];s=(s+"000000000").substr(0,9),e=Number(s)}const n=new Date(t);return{seconds:Math.floor(n.getTime()/1e3),nanos:e}}return{seconds:tn(t.seconds),nanos:tn(t.nanos)}}function tn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function kc(t){return typeof t=="string"?Wn.fromBase64String(t):Wn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lg(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="server_timestamp"}function Vv(t){const e=t.mapValue.fields.__previous_value__;return Lg(e)?Vv(e):e}function nf(t){const e=jl(t.mapValue.fields.__local_write_time__.timestampValue);return new dn(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{constructor(e,r,n,s,i,o,a,l,u){this.databaseId=e,this.appId=r,this.persistenceKey=n,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u}}class sf{constructor(e,r){this.projectId=e,this.database=r||"(default)"}static empty(){return new sf("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof sf&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep={mapValue:{}};function Pc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Lg(t)?4:T7(t)?9007199254740991:S7(t)?10:11:wt()}function Mo(t,e){if(t===e)return!0;const r=Pc(t);if(r!==Pc(e))return!1;switch(r){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return nf(t).isEqual(nf(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=jl(s.timestampValue),a=jl(i.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return kc(s.bytesValue).isEqual(kc(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return tn(s.geoPointValue.latitude)===tn(i.geoPointValue.latitude)&&tn(s.geoPointValue.longitude)===tn(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return tn(s.integerValue)===tn(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=tn(s.doubleValue),a=tn(i.doubleValue);return o===a?Wm(o)===Wm(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return nh(t.arrayValue.values||[],e.arrayValue.values||[],Mo);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},a=i.mapValue.fields||{};if(b_(o)!==b_(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!Mo(o[l],a[l])))return!1;return!0}(t,e);default:return wt()}}function of(t,e){return(t.values||[]).find(r=>Mo(r,e))!==void 0}function sh(t,e){if(t===e)return 0;const r=Pc(t),n=Pc(e);if(r!==n)return Jt(r,n);switch(r){case 0:case 9007199254740991:return 0;case 1:return Jt(t.booleanValue,e.booleanValue);case 2:return function(i,o){const a=tn(i.integerValue||i.doubleValue),l=tn(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(t,e);case 3:return E_(t.timestampValue,e.timestampValue);case 4:return E_(nf(t),nf(e));case 5:return Jt(t.stringValue,e.stringValue);case 6:return function(i,o){const a=kc(i),l=kc(o);return a.compareTo(l)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const a=i.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const f=Jt(a[u],l[u]);if(f!==0)return f}return Jt(a.length,l.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const a=Jt(tn(i.latitude),tn(o.latitude));return a!==0?a:Jt(tn(i.longitude),tn(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return A_(t.arrayValue,e.arrayValue);case 10:return function(i,o){var a,l,u,f;const g=i.fields||{},y=o.fields||{},m=(a=g.value)===null||a===void 0?void 0:a.arrayValue,E=(l=y.value)===null||l===void 0?void 0:l.arrayValue,b=Jt(((u=m==null?void 0:m.values)===null||u===void 0?void 0:u.length)||0,((f=E==null?void 0:E.values)===null||f===void 0?void 0:f.length)||0);return b!==0?b:A_(m,E)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===Ep.mapValue&&o===Ep.mapValue)return 0;if(i===Ep.mapValue)return 1;if(o===Ep.mapValue)return-1;const a=i.fields||{},l=Object.keys(a),u=o.fields||{},f=Object.keys(u);l.sort(),f.sort();for(let g=0;g<l.length&&g<f.length;++g){const y=Jt(l[g],f[g]);if(y!==0)return y;const m=sh(a[l[g]],u[f[g]]);if(m!==0)return m}return Jt(l.length,f.length)}(t.mapValue,e.mapValue);default:throw wt()}}function E_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return Jt(t,e);const r=jl(t),n=jl(e),s=Jt(r.seconds,n.seconds);return s!==0?s:Jt(r.nanos,n.nanos)}function A_(t,e){const r=t.values||[],n=e.values||[];for(let s=0;s<r.length&&s<n.length;++s){const i=sh(r[s],n[s]);if(i)return i}return Jt(r.length,n.length)}function ih(t){return Gy(t)}function Gy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(r){const n=jl(r);return`time(${n.seconds},${n.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(r){return kc(r).toBase64()}(t.bytesValue):"referenceValue"in t?function(r){return nt.fromName(r).toString()}(t.referenceValue):"geoPointValue"in t?function(r){return`geo(${r.latitude},${r.longitude})`}(t.geoPointValue):"arrayValue"in t?function(r){let n="[",s=!0;for(const i of r.values||[])s?s=!1:n+=",",n+=Gy(i);return n+"]"}(t.arrayValue):"mapValue"in t?function(r){const n=Object.keys(r.fields||{}).sort();let s="{",i=!0;for(const o of n)i?i=!1:s+=",",s+=`${o}:${Gy(r.fields[o])}`;return s+"}"}(t.mapValue):wt()}function Gm(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ky(t){return!!t&&"integerValue"in t}function Bv(t){return!!t&&"arrayValue"in t}function S_(t){return!!t&&"nullValue"in t}function T_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zp(t){return!!t&&"mapValue"in t}function S7(t){var e,r;return((r=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||r===void 0?void 0:r.stringValue)==="__vector__"}function Id(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Bc(t.mapValue.fields,(r,n)=>e.mapValue.fields[r]=Id(n)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let r=0;r<(t.arrayValue.values||[]).length;++r)e.arrayValue.values[r]=Id(t.arrayValue.values[r]);return e}return Object.assign({},t)}function T7(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e){this.value=e}static empty(){return new Ds({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let r=this.value;for(let n=0;n<e.length-1;++n)if(r=(r.mapValue.fields||{})[e.get(n)],!Zp(r))return null;return r=(r.mapValue.fields||{})[e.lastSegment()],r||null}}set(e,r){this.getFieldsMap(e.popLast())[e.lastSegment()]=Id(r)}setAll(e){let r=Bn.emptyPath(),n={},s=[];e.forEach((o,a)=>{if(!r.isImmediateParentOf(a)){const l=this.getFieldsMap(r);this.applyChanges(l,n,s),n={},s=[],r=a.popLast()}o?n[a.lastSegment()]=Id(o):s.push(a.lastSegment())});const i=this.getFieldsMap(r);this.applyChanges(i,n,s)}delete(e){const r=this.field(e.popLast());Zp(r)&&r.mapValue.fields&&delete r.mapValue.fields[e.lastSegment()]}isEqual(e){return Mo(this.value,e.value)}getFieldsMap(e){let r=this.value;r.mapValue.fields||(r.mapValue={fields:{}});for(let n=0;n<e.length;++n){let s=r.mapValue.fields[e.get(n)];Zp(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},r.mapValue.fields[e.get(n)]=s),r=s}return r.mapValue.fields}applyChanges(e,r,n){Bc(r,(s,i)=>e[s]=i);for(const s of n)delete e[s]}clone(){return new Ds(Id(this.value))}}function xA(t){const e=[];return Bc(t.fields,(r,n)=>{const s=new Bn([r]);if(Zp(n)){const i=xA(n.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new ci(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls{constructor(e,r,n,s,i,o,a){this.key=e,this.documentType=r,this.version=n,this.readTime=s,this.createTime=i,this.data=o,this.documentState=a}static newInvalidDocument(e){return new ls(e,0,Nt.min(),Nt.min(),Nt.min(),Ds.empty(),0)}static newFoundDocument(e,r,n,s){return new ls(e,1,r,Nt.min(),n,s,0)}static newNoDocument(e,r){return new ls(e,2,r,Nt.min(),Nt.min(),Ds.empty(),0)}static newUnknownDocument(e,r){return new ls(e,3,r,Nt.min(),Nt.min(),Ds.empty(),2)}convertToFoundDocument(e,r){return!this.createTime.isEqual(Nt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=r,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ds.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ds.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ls&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ls(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e,r){this.position=e,this.inclusive=r}}function I_(t,e,r){let n=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?n=nt.comparator(nt.fromName(o.referenceValue),r.key):n=sh(o,r.data.field(i.field)),i.dir==="desc"&&(n*=-1),n!==0)break}return n}function k_(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let r=0;r<t.position.length;r++)if(!Mo(t.position[r],e.position[r]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class af{constructor(e,r="asc"){this.field=e,this.dir=r}}function I7(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _A{}class hn extends _A{constructor(e,r,n){super(),this.field=e,this.op=r,this.value=n}static create(e,r,n){return e.isKeyField()?r==="in"||r==="not-in"?this.createKeyFieldInFilter(e,r,n):new P7(e,r,n):r==="array-contains"?new L7(e,n):r==="in"?new R7(e,n):r==="not-in"?new O7(e,n):r==="array-contains-any"?new D7(e,n):new hn(e,r,n)}static createKeyFieldInFilter(e,r,n){return r==="in"?new C7(e,n):new j7(e,n)}matches(e){const r=e.data.field(this.field);return this.op==="!="?r!==null&&this.matchesComparison(sh(r,this.value)):r!==null&&Pc(this.value)===Pc(r)&&this.matchesComparison(sh(r,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class io extends _A{constructor(e,r){super(),this.filters=e,this.op=r,this.ae=null}static create(e,r){return new io(e,r)}matches(e){return bA(this)?this.filters.find(r=>!r.matches(e))===void 0:this.filters.find(r=>r.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,r)=>e.concat(r.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bA(t){return t.op==="and"}function NA(t){return k7(t)&&bA(t)}function k7(t){for(const e of t.filters)if(e instanceof io)return!1;return!0}function Qy(t){if(t instanceof hn)return t.field.canonicalString()+t.op.toString()+ih(t.value);if(NA(t))return t.filters.map(e=>Qy(e)).join(",");{const e=t.filters.map(r=>Qy(r)).join(",");return`${t.op}(${e})`}}function EA(t,e){return t instanceof hn?function(n,s){return s instanceof hn&&n.op===s.op&&n.field.isEqual(s.field)&&Mo(n.value,s.value)}(t,e):t instanceof io?function(n,s){return s instanceof io&&n.op===s.op&&n.filters.length===s.filters.length?n.filters.reduce((i,o,a)=>i&&EA(o,s.filters[a]),!0):!1}(t,e):void wt()}function AA(t){return t instanceof hn?function(r){return`${r.field.canonicalString()} ${r.op} ${ih(r.value)}`}(t):t instanceof io?function(r){return r.op.toString()+" {"+r.getFilters().map(AA).join(" ,")+"}"}(t):"Filter"}class P7 extends hn{constructor(e,r,n){super(e,r,n),this.key=nt.fromName(n.referenceValue)}matches(e){const r=nt.comparator(e.key,this.key);return this.matchesComparison(r)}}class C7 extends hn{constructor(e,r){super(e,"in",r),this.keys=SA("in",r)}matches(e){return this.keys.some(r=>r.isEqual(e.key))}}class j7 extends hn{constructor(e,r){super(e,"not-in",r),this.keys=SA("not-in",r)}matches(e){return!this.keys.some(r=>r.isEqual(e.key))}}function SA(t,e){var r;return(((r=e.arrayValue)===null||r===void 0?void 0:r.values)||[]).map(n=>nt.fromName(n.referenceValue))}class L7 extends hn{constructor(e,r){super(e,"array-contains",r)}matches(e){const r=e.data.field(this.field);return Bv(r)&&of(r.arrayValue,this.value)}}class R7 extends hn{constructor(e,r){super(e,"in",r)}matches(e){const r=e.data.field(this.field);return r!==null&&of(this.value.arrayValue,r)}}class O7 extends hn{constructor(e,r){super(e,"not-in",r)}matches(e){if(of(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const r=e.data.field(this.field);return r!==null&&!of(this.value.arrayValue,r)}}class D7 extends hn{constructor(e,r){super(e,"array-contains-any",r)}matches(e){const r=e.data.field(this.field);return!(!Bv(r)||!r.arrayValue.values)&&r.arrayValue.values.some(n=>of(this.value.arrayValue,n))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M7{constructor(e,r=null,n=[],s=[],i=null,o=null,a=null){this.path=e,this.collectionGroup=r,this.orderBy=n,this.filters=s,this.limit=i,this.startAt=o,this.endAt=a,this.ue=null}}function P_(t,e=null,r=[],n=[],s=null,i=null,o=null){return new M7(t,e,r,n,s,i,o)}function zv(t){const e=Et(t);if(e.ue===null){let r=e.path.canonicalString();e.collectionGroup!==null&&(r+="|cg:"+e.collectionGroup),r+="|f:",r+=e.filters.map(n=>Qy(n)).join(","),r+="|ob:",r+=e.orderBy.map(n=>function(i){return i.field.canonicalString()+i.dir}(n)).join(","),jg(e.limit)||(r+="|l:",r+=e.limit),e.startAt&&(r+="|lb:",r+=e.startAt.inclusive?"b:":"a:",r+=e.startAt.position.map(n=>ih(n)).join(",")),e.endAt&&(r+="|ub:",r+=e.endAt.inclusive?"a:":"b:",r+=e.endAt.position.map(n=>ih(n)).join(",")),e.ue=r}return e.ue}function qv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let r=0;r<t.orderBy.length;r++)if(!I7(t.orderBy[r],e.orderBy[r]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let r=0;r<t.filters.length;r++)if(!EA(t.filters[r],e.filters[r]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!k_(t.startAt,e.startAt)&&k_(t.endAt,e.endAt)}function Yy(t){return nt.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,r=null,n=[],s=[],i=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=r,this.explicitOrderBy=n,this.filters=s,this.limit=i,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function F7(t,e,r,n,s,i,o,a){return new zc(t,e,r,n,s,i,o,a)}function $v(t){return new zc(t)}function C_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Hv(t){return t.collectionGroup!==null}function Vu(t){const e=Et(t);if(e.ce===null){e.ce=[];const r=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),r.add(i.field.canonicalString());const n=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new $n(Bn.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(u=>{u.isInequality()&&(a=a.add(u.field))})}),a})(e).forEach(i=>{r.has(i.canonicalString())||i.isKeyField()||e.ce.push(new af(i,n))}),r.has(Bn.keyField().canonicalString())||e.ce.push(new af(Bn.keyField(),n))}return e.ce}function Ro(t){const e=Et(t);return e.le||(e.le=U7(e,Vu(t))),e.le}function U7(t,e){if(t.limitType==="F")return P_(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new af(s.field,i)});const r=t.endAt?new oh(t.endAt.position,t.endAt.inclusive):null,n=t.startAt?new oh(t.startAt.position,t.startAt.inclusive):null;return P_(t.path,t.collectionGroup,e,t.filters,t.limit,r,n)}}function Xy(t,e){const r=t.filters.concat([e]);return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),r,t.limit,t.limitType,t.startAt,t.endAt)}function Km(t,e,r){return new zc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,r,t.startAt,t.endAt)}function Rg(t,e){return qv(Ro(t),Ro(e))&&t.limitType===e.limitType}function TA(t){return`${zv(Ro(t))}|lt:${t.limitType}`}function hu(t){return`Query(target=${function(r){let n=r.path.canonicalString();return r.collectionGroup!==null&&(n+=" collectionGroup="+r.collectionGroup),r.filters.length>0&&(n+=`, filters: [${r.filters.map(s=>AA(s)).join(", ")}]`),jg(r.limit)||(n+=", limit: "+r.limit),r.orderBy.length>0&&(n+=`, orderBy: [${r.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),r.startAt&&(n+=", startAt: ",n+=r.startAt.inclusive?"b:":"a:",n+=r.startAt.position.map(s=>ih(s)).join(",")),r.endAt&&(n+=", endAt: ",n+=r.endAt.inclusive?"a:":"b:",n+=r.endAt.position.map(s=>ih(s)).join(",")),`Target(${n})`}(Ro(t))}; limitType=${t.limitType})`}function Og(t,e){return e.isFoundDocument()&&function(n,s){const i=s.key.path;return n.collectionGroup!==null?s.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(i):nt.isDocumentKey(n.path)?n.path.isEqual(i):n.path.isImmediateParentOf(i)}(t,e)&&function(n,s){for(const i of Vu(n))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(n,s){for(const i of n.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(n,s){return!(n.startAt&&!function(o,a,l){const u=I_(o,a,l);return o.inclusive?u<=0:u<0}(n.startAt,Vu(n),s)||n.endAt&&!function(o,a,l){const u=I_(o,a,l);return o.inclusive?u>=0:u>0}(n.endAt,Vu(n),s))}(t,e)}function V7(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function IA(t){return(e,r)=>{let n=!1;for(const s of Vu(t)){const i=B7(s,e,r);if(i!==0)return i;n=n||s.field.isKeyField()}return 0}}function B7(t,e,r){const n=t.field.isKeyField()?nt.comparator(e.key,r.key):function(i,o,a){const l=o.data.field(i),u=a.data.field(i);return l!==null&&u!==null?sh(l,u):wt()}(t.field,e,r);switch(t.dir){case"asc":return n;case"desc":return-1*n;default:return wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nh{constructor(e,r){this.mapKeyFn=e,this.equalsFn=r,this.inner={},this.innerSize=0}get(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n!==void 0){for(const[s,i]of n)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,r){const n=this.mapKeyFn(e),s=this.inner[n];if(s===void 0)return this.inner[n]=[[e,r]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,r]);s.push([e,r]),this.innerSize++}delete(e){const r=this.mapKeyFn(e),n=this.inner[r];if(n===void 0)return!1;for(let s=0;s<n.length;s++)if(this.equalsFn(n[s][0],e))return n.length===1?delete this.inner[r]:n.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Bc(this.inner,(r,n)=>{for(const[s,i]of n)e(s,i)})}isEmpty(){return vA(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z7=new Vr(nt.comparator);function Ta(){return z7}const kA=new Vr(nt.comparator);function pd(...t){let e=kA;for(const r of t)e=e.insert(r.key,r);return e}function PA(t){let e=kA;return t.forEach((r,n)=>e=e.insert(r,n.overlayedDocument)),e}function mc(){return kd()}function CA(){return kd()}function kd(){return new Nh(t=>t.toString(),(t,e)=>t.isEqual(e))}const q7=new Vr(nt.comparator),$7=new $n(nt.comparator);function Bt(...t){let e=$7;for(const r of t)e=e.add(r);return e}const H7=new $n(Jt);function W7(){return H7}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Wm(e)?"-0":e}}function jA(t){return{integerValue:""+t}}function G7(t,e){return N7(e)?jA(e):Wv(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dg{constructor(){this._=void 0}}function K7(t,e,r){return t instanceof lf?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&Lg(i)&&(i=Vv(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(r,e):t instanceof ah?RA(t,e):t instanceof cf?OA(t,e):function(s,i){const o=LA(s,i),a=j_(o)+j_(s.Pe);return Ky(o)&&Ky(s.Pe)?jA(a):Wv(s.serializer,a)}(t,e)}function Q7(t,e,r){return t instanceof ah?RA(t,e):t instanceof cf?OA(t,e):r}function LA(t,e){return t instanceof Qm?function(n){return Ky(n)||function(i){return!!i&&"doubleValue"in i}(n)}(e)?e:{integerValue:0}:null}class lf extends Dg{}class ah extends Dg{constructor(e){super(),this.elements=e}}function RA(t,e){const r=DA(e);for(const n of t.elements)r.some(s=>Mo(s,n))||r.push(n);return{arrayValue:{values:r}}}class cf extends Dg{constructor(e){super(),this.elements=e}}function OA(t,e){let r=DA(e);for(const n of t.elements)r=r.filter(s=>!Mo(s,n));return{arrayValue:{values:r}}}class Qm extends Dg{constructor(e,r){super(),this.serializer=e,this.Pe=r}}function j_(t){return tn(t.integerValue||t.doubleValue)}function DA(t){return Bv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MA{constructor(e,r){this.field=e,this.transform=r}}function Y7(t,e){return t.field.isEqual(e.field)&&function(n,s){return n instanceof ah&&s instanceof ah||n instanceof cf&&s instanceof cf?nh(n.elements,s.elements,Mo):n instanceof Qm&&s instanceof Qm?Mo(n.Pe,s.Pe):n instanceof lf&&s instanceof lf}(t.transform,e.transform)}class X7{constructor(e,r){this.version=e,this.transformResults=r}}class Li{constructor(e,r){this.updateTime=e,this.exists=r}static none(){return new Li}static exists(e){return new Li(void 0,e)}static updateTime(e){return new Li(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function em(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Mg{}function FA(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Gv(t.key,Li.none()):new kf(t.key,t.data,Li.none());{const r=t.data,n=Ds.empty();let s=new $n(Bn.comparator);for(let i of e.fields)if(!s.has(i)){let o=r.field(i);o===null&&i.length>1&&(i=i.popLast(),o=r.field(i)),o===null?n.delete(i):n.set(i,o),s=s.add(i)}return new zl(t.key,n,new ci(s.toArray()),Li.none())}}function J7(t,e,r){t instanceof kf?function(s,i,o){const a=s.value.clone(),l=R_(s.fieldTransforms,i,o.transformResults);a.setAll(l),i.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,r):t instanceof zl?function(s,i,o){if(!em(s.precondition,i))return void i.convertToUnknownDocument(o.version);const a=R_(s.fieldTransforms,i,o.transformResults),l=i.data;l.setAll(UA(s)),l.setAll(a),i.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,r):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,r)}function Pd(t,e,r,n){return t instanceof kf?function(i,o,a,l){if(!em(i.precondition,o))return a;const u=i.value.clone(),f=O_(i.fieldTransforms,l,o);return u.setAll(f),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null}(t,e,r,n):t instanceof zl?function(i,o,a,l){if(!em(i.precondition,o))return a;const u=O_(i.fieldTransforms,l,o),f=o.data;return f.setAll(UA(i)),f.setAll(u),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),a===null?null:a.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,r,n):function(i,o,a){return em(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,r)}function Z7(t,e){let r=null;for(const n of t.fieldTransforms){const s=e.data.field(n.field),i=LA(n.transform,s||null);i!=null&&(r===null&&(r=Ds.empty()),r.set(n.field,i))}return r||null}function L_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(n,s){return n===void 0&&s===void 0||!(!n||!s)&&nh(n,s,(i,o)=>Y7(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class kf extends Mg{constructor(e,r,n,s=[]){super(),this.key=e,this.value=r,this.precondition=n,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class zl extends Mg{constructor(e,r,n,s,i=[]){super(),this.key=e,this.data=r,this.fieldMask=n,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function UA(t){const e=new Map;return t.fieldMask.fields.forEach(r=>{if(!r.isEmpty()){const n=t.data.field(r);e.set(r,n)}}),e}function R_(t,e,r){const n=new Map;cr(t.length===r.length);for(let s=0;s<r.length;s++){const i=t[s],o=i.transform,a=e.data.field(i.field);n.set(i.field,Q7(o,a,r[s]))}return n}function O_(t,e,r){const n=new Map;for(const s of t){const i=s.transform,o=r.data.field(s.field);n.set(s.field,K7(i,o,e))}return n}class Gv extends Mg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eO extends Mg{constructor(e,r){super(),this.key=e,this.precondition=r,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tO{constructor(e,r,n,s){this.batchId=e,this.localWriteTime=r,this.baseMutations=n,this.mutations=s}applyToRemoteDocument(e,r){const n=r.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&J7(i,e,n[s])}}applyToLocalView(e,r){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(r=Pd(n,e,r,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(r=Pd(n,e,r,this.localWriteTime));return r}applyToLocalDocumentSet(e,r){const n=CA();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let a=this.applyToLocalView(o,i.mutatedFields);a=r.has(s.key)?null:a;const l=FA(o,a);l!==null&&n.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(Nt.min())}),n}keys(){return this.mutations.reduce((e,r)=>e.add(r.key),Bt())}isEqual(e){return this.batchId===e.batchId&&nh(this.mutations,e.mutations,(r,n)=>L_(r,n))&&nh(this.baseMutations,e.baseMutations,(r,n)=>L_(r,n))}}class Kv{constructor(e,r,n,s){this.batch=e,this.commitVersion=r,this.mutationResults=n,this.docVersions=s}static from(e,r,n){cr(e.mutations.length===n.length);let s=function(){return q7}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,n[o].version);return new Kv(e,r,n,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rO{constructor(e,r){this.largestBatchId=e,this.mutation=r}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nO{constructor(e,r){this.count=e,this.unchangedNames=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cn,Gt;function sO(t){switch(t){default:return wt();case Te.CANCELLED:case Te.UNKNOWN:case Te.DEADLINE_EXCEEDED:case Te.RESOURCE_EXHAUSTED:case Te.INTERNAL:case Te.UNAVAILABLE:case Te.UNAUTHENTICATED:return!1;case Te.INVALID_ARGUMENT:case Te.NOT_FOUND:case Te.ALREADY_EXISTS:case Te.PERMISSION_DENIED:case Te.FAILED_PRECONDITION:case Te.ABORTED:case Te.OUT_OF_RANGE:case Te.UNIMPLEMENTED:case Te.DATA_LOSS:return!0}}function VA(t){if(t===void 0)return Sa("GRPC error has no .code"),Te.UNKNOWN;switch(t){case cn.OK:return Te.OK;case cn.CANCELLED:return Te.CANCELLED;case cn.UNKNOWN:return Te.UNKNOWN;case cn.DEADLINE_EXCEEDED:return Te.DEADLINE_EXCEEDED;case cn.RESOURCE_EXHAUSTED:return Te.RESOURCE_EXHAUSTED;case cn.INTERNAL:return Te.INTERNAL;case cn.UNAVAILABLE:return Te.UNAVAILABLE;case cn.UNAUTHENTICATED:return Te.UNAUTHENTICATED;case cn.INVALID_ARGUMENT:return Te.INVALID_ARGUMENT;case cn.NOT_FOUND:return Te.NOT_FOUND;case cn.ALREADY_EXISTS:return Te.ALREADY_EXISTS;case cn.PERMISSION_DENIED:return Te.PERMISSION_DENIED;case cn.FAILED_PRECONDITION:return Te.FAILED_PRECONDITION;case cn.ABORTED:return Te.ABORTED;case cn.OUT_OF_RANGE:return Te.OUT_OF_RANGE;case cn.UNIMPLEMENTED:return Te.UNIMPLEMENTED;case cn.DATA_LOSS:return Te.DATA_LOSS;default:return wt()}}(Gt=cn||(cn={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oO=new wc([4294967295,4294967295],0);function D_(t){const e=iO().encode(t),r=new uA;return r.update(e),new Uint8Array(r.digest())}function M_(t){const e=new DataView(t.buffer),r=e.getUint32(0,!0),n=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new wc([r,n],0),new wc([s,i],0)]}class Qv{constructor(e,r,n){if(this.bitmap=e,this.padding=r,this.hashCount=n,r<0||r>=8)throw new md(`Invalid padding: ${r}`);if(n<0)throw new md(`Invalid hash count: ${n}`);if(e.length>0&&this.hashCount===0)throw new md(`Invalid hash count: ${n}`);if(e.length===0&&r!==0)throw new md(`Invalid padding when bitmap length is 0: ${r}`);this.Ie=8*e.length-r,this.Te=wc.fromNumber(this.Ie)}Ee(e,r,n){let s=e.add(r.multiply(wc.fromNumber(n)));return s.compare(oO)===1&&(s=new wc([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const r=D_(e),[n,s]=M_(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);if(!this.de(o))return!1}return!0}static create(e,r,n){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new Qv(i,s,r);return n.forEach(a=>o.insert(a)),o}insert(e){if(this.Ie===0)return;const r=D_(e),[n,s]=M_(r);for(let i=0;i<this.hashCount;i++){const o=this.Ee(n,s,i);this.Ae(o)}}Ae(e){const r=Math.floor(e/8),n=e%8;this.bitmap[r]|=1<<n}}class md extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,r,n,s,i){this.snapshotVersion=e,this.targetChanges=r,this.targetMismatches=n,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,r,n){const s=new Map;return s.set(e,Pf.createSynthesizedTargetChangeForCurrentChange(e,r,n)),new Fg(Nt.min(),s,new Vr(Jt),Ta(),Bt())}}class Pf{constructor(e,r,n,s,i){this.resumeToken=e,this.current=r,this.addedDocuments=n,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,r,n){return new Pf(n,r,Bt(),Bt(),Bt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tm{constructor(e,r,n,s){this.Re=e,this.removedTargetIds=r,this.key=n,this.Ve=s}}class BA{constructor(e,r){this.targetId=e,this.me=r}}class zA{constructor(e,r,n=Wn.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=r,this.resumeToken=n,this.cause=s}}class F_{constructor(){this.fe=0,this.ge=V_(),this.pe=Wn.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=Bt(),r=Bt(),n=Bt();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:r=r.add(s);break;case 1:n=n.add(s);break;default:wt()}}),new Pf(this.pe,this.ye,e,r,n)}Ce(){this.we=!1,this.ge=V_()}Fe(e,r){this.we=!0,this.ge=this.ge.insert(e,r)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,cr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class aO{constructor(e){this.Le=e,this.Be=new Map,this.ke=Ta(),this.qe=U_(),this.Qe=new Vr(Jt)}Ke(e){for(const r of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(r,e.Ve):this.Ue(r,e.key,e.Ve);for(const r of e.removedTargetIds)this.Ue(r,e.key,e.Ve)}We(e){this.forEachTarget(e,r=>{const n=this.Ge(r);switch(e.state){case 0:this.ze(r)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(r);break;case 3:this.ze(r)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.ze(r)&&(this.je(r),n.De(e.resumeToken));break;default:wt()}})}forEachTarget(e,r){e.targetIds.length>0?e.targetIds.forEach(r):this.Be.forEach((n,s)=>{this.ze(s)&&r(s)})}He(e){const r=e.targetId,n=e.me.count,s=this.Je(r);if(s){const i=s.target;if(Yy(i))if(n===0){const o=new nt(i.path);this.Ue(r,o,ls.newNoDocument(o,Nt.min()))}else cr(n===1);else{const o=this.Ye(r);if(o!==n){const a=this.Ze(e),l=a?this.Xe(a,e,o):1;if(l!==0){this.je(r);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(r,u)}}}}}Ze(e){const r=e.me.unchangedNames;if(!r||!r.bits)return null;const{bits:{bitmap:n="",padding:s=0},hashCount:i=0}=r;let o,a;try{o=kc(n).toUint8Array()}catch(l){if(l instanceof wA)return rh("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Qv(o,s,i)}catch(l){return rh(l instanceof md?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ie===0?null:a}Xe(e,r,n){return r.me.count===n-this.nt(e,r.targetId)?0:2}nt(e,r){const n=this.Le.getRemoteKeysForTarget(r);let s=0;return n.forEach(i=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(a)||(this.Ue(r,i,null),s++)}),s}rt(e){const r=new Map;this.Be.forEach((i,o)=>{const a=this.Je(o);if(a){if(i.current&&Yy(a.target)){const l=new nt(a.target.path);this.ke.get(l)!==null||this.it(o,l)||this.Ue(o,l,ls.newNoDocument(l,e))}i.be&&(r.set(o,i.ve()),i.Ce())}});let n=Bt();this.qe.forEach((i,o)=>{let a=!0;o.forEachWhile(l=>{const u=this.Je(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(n=n.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Fg(e,r,this.Qe,this.ke,n);return this.ke=Ta(),this.qe=U_(),this.Qe=new Vr(Jt),s}$e(e,r){if(!this.ze(e))return;const n=this.it(e,r.key)?2:0;this.Ge(e).Fe(r.key,n),this.ke=this.ke.insert(r.key,r),this.qe=this.qe.insert(r.key,this.st(r.key).add(e))}Ue(e,r,n){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,r)?s.Fe(r,1):s.Me(r),this.qe=this.qe.insert(r,this.st(r).delete(e)),n&&(this.ke=this.ke.insert(r,n))}removeTarget(e){this.Be.delete(e)}Ye(e){const r=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+r.addedDocuments.size-r.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let r=this.Be.get(e);return r||(r=new F_,this.Be.set(e,r)),r}st(e){let r=this.qe.get(e);return r||(r=new $n(Jt),this.qe=this.qe.insert(e,r)),r}ze(e){const r=this.Je(e)!==null;return r||Ke("WatchChangeAggregator","Detected inactive target",e),r}Je(e){const r=this.Be.get(e);return r&&r.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new F_),this.Le.getRemoteKeysForTarget(e).forEach(r=>{this.Ue(e,r,null)})}it(e,r){return this.Le.getRemoteKeysForTarget(e).has(r)}}function U_(){return new Vr(nt.comparator)}function V_(){return new Vr(nt.comparator)}const lO={asc:"ASCENDING",desc:"DESCENDING"},cO={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},uO={and:"AND",or:"OR"};class hO{constructor(e,r){this.databaseId=e,this.useProto3Json=r}}function Jy(t,e){return t.useProto3Json||jg(e)?e:{value:e}}function Ym(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function qA(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function dO(t,e){return Ym(t,e.toTimestamp())}function Oo(t){return cr(!!t),Nt.fromTimestamp(function(r){const n=jl(r);return new dn(n.seconds,n.nanos)}(t))}function Yv(t,e){return Zy(t,e).canonicalString()}function Zy(t,e){const r=function(s){return new xr(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?r:r.child(e)}function $A(t){const e=xr.fromString(t);return cr(QA(e)),e}function e2(t,e){return Yv(t.databaseId,e.path)}function o1(t,e){const r=$A(e);if(r.get(1)!==t.databaseId.projectId)throw new Ue(Te.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+r.get(1)+" vs "+t.databaseId.projectId);if(r.get(3)!==t.databaseId.database)throw new Ue(Te.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+r.get(3)+" vs "+t.databaseId.database);return new nt(WA(r))}function HA(t,e){return Yv(t.databaseId,e)}function fO(t){const e=$A(t);return e.length===4?xr.emptyPath():WA(e)}function t2(t){return new xr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function WA(t){return cr(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function B_(t,e,r){return{name:e2(t,e),fields:r.value.mapValue.fields}}function pO(t,e){let r;if("targetChange"in e){e.targetChange;const n=function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(u,f){return u.useProto3Json?(cr(f===void 0||typeof f=="string"),Wn.fromBase64String(f||"")):(cr(f===void 0||f instanceof Buffer||f instanceof Uint8Array),Wn.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(u){const f=u.code===void 0?Te.UNKNOWN:VA(u.code);return new Ue(f,u.message||"")}(o);r=new zA(n,s,i,a||null)}else if("documentChange"in e){e.documentChange;const n=e.documentChange;n.document,n.document.name,n.document.updateTime;const s=o1(t,n.document.name),i=Oo(n.document.updateTime),o=n.document.createTime?Oo(n.document.createTime):Nt.min(),a=new Ds({mapValue:{fields:n.document.fields}}),l=ls.newFoundDocument(s,i,o,a),u=n.targetIds||[],f=n.removedTargetIds||[];r=new tm(u,f,l.key,l)}else if("documentDelete"in e){e.documentDelete;const n=e.documentDelete;n.document;const s=o1(t,n.document),i=n.readTime?Oo(n.readTime):Nt.min(),o=ls.newNoDocument(s,i),a=n.removedTargetIds||[];r=new tm([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const n=e.documentRemove;n.document;const s=o1(t,n.document),i=n.removedTargetIds||[];r=new tm([],i,s,null)}else{if(!("filter"in e))return wt();{e.filter;const n=e.filter;n.targetId;const{count:s=0,unchangedNames:i}=n,o=new nO(s,i),a=n.targetId;r=new BA(a,o)}}return r}function mO(t,e){let r;if(e instanceof kf)r={update:B_(t,e.key,e.value)};else if(e instanceof Gv)r={delete:e2(t,e.key)};else if(e instanceof zl)r={update:B_(t,e.key,e.data),updateMask:EO(e.fieldMask)};else{if(!(e instanceof eO))return wt();r={verify:e2(t,e.key)}}return e.fieldTransforms.length>0&&(r.updateTransforms=e.fieldTransforms.map(n=>function(i,o){const a=o.transform;if(a instanceof lf)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof ah)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof cf)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof Qm)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw wt()}(0,n))),e.precondition.isNone||(r.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:dO(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:wt()}(t,e.precondition)),r}function gO(t,e){return t&&t.length>0?(cr(e!==void 0),t.map(r=>function(s,i){let o=s.updateTime?Oo(s.updateTime):Oo(i);return o.isEqual(Nt.min())&&(o=Oo(i)),new X7(o,s.transformResults||[])}(r,e))):[]}function yO(t,e){return{documents:[HA(t,e.path)]}}function vO(t,e){const r={structuredQuery:{}},n=e.path;let s;e.collectionGroup!==null?(s=n,r.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=n.popLast(),r.structuredQuery.from=[{collectionId:n.lastSegment()}]),r.parent=HA(t,s);const i=function(u){if(u.length!==0)return KA(io.create(u,"and"))}(e.filters);i&&(r.structuredQuery.where=i);const o=function(u){if(u.length!==0)return u.map(f=>function(y){return{field:du(y.field),direction:_O(y.dir)}}(f))}(e.orderBy);o&&(r.structuredQuery.orderBy=o);const a=Jy(t,e.limit);return a!==null&&(r.structuredQuery.limit=a),e.startAt&&(r.structuredQuery.startAt=function(u){return{before:u.inclusive,values:u.position}}(e.startAt)),e.endAt&&(r.structuredQuery.endAt=function(u){return{before:!u.inclusive,values:u.position}}(e.endAt)),{_t:r,parent:s}}function wO(t){let e=fO(t.parent);const r=t.structuredQuery,n=r.from?r.from.length:0;let s=null;if(n>0){cr(n===1);const f=r.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];r.where&&(i=function(g){const y=GA(g);return y instanceof io&&NA(y)?y.getFilters():[y]}(r.where));let o=[];r.orderBy&&(o=function(g){return g.map(y=>function(E){return new af(fu(E.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(E.direction))}(y))}(r.orderBy));let a=null;r.limit&&(a=function(g){let y;return y=typeof g=="object"?g.value:g,jg(y)?null:y}(r.limit));let l=null;r.startAt&&(l=function(g){const y=!!g.before,m=g.values||[];return new oh(m,y)}(r.startAt));let u=null;return r.endAt&&(u=function(g){const y=!g.before,m=g.values||[];return new oh(m,y)}(r.endAt)),F7(e,s,o,i,a,"F",l,u)}function xO(t,e){const r=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return wt()}}(e.purpose);return r==null?null:{"goog-listen-tags":r}}function GA(t){return t.unaryFilter!==void 0?function(r){switch(r.unaryFilter.op){case"IS_NAN":const n=fu(r.unaryFilter.field);return hn.create(n,"==",{doubleValue:NaN});case"IS_NULL":const s=fu(r.unaryFilter.field);return hn.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=fu(r.unaryFilter.field);return hn.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fu(r.unaryFilter.field);return hn.create(o,"!=",{nullValue:"NULL_VALUE"});default:return wt()}}(t):t.fieldFilter!==void 0?function(r){return hn.create(fu(r.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return wt()}}(r.fieldFilter.op),r.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(r){return io.create(r.compositeFilter.filters.map(n=>GA(n)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return wt()}}(r.compositeFilter.op))}(t):wt()}function _O(t){return lO[t]}function bO(t){return cO[t]}function NO(t){return uO[t]}function du(t){return{fieldPath:t.canonicalString()}}function fu(t){return Bn.fromServerFormat(t.fieldPath)}function KA(t){return t instanceof hn?function(r){if(r.op==="=="){if(T_(r.value))return{unaryFilter:{field:du(r.field),op:"IS_NAN"}};if(S_(r.value))return{unaryFilter:{field:du(r.field),op:"IS_NULL"}}}else if(r.op==="!="){if(T_(r.value))return{unaryFilter:{field:du(r.field),op:"IS_NOT_NAN"}};if(S_(r.value))return{unaryFilter:{field:du(r.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:du(r.field),op:bO(r.op),value:r.value}}}(t):t instanceof io?function(r){const n=r.getFilters().map(s=>KA(s));return n.length===1?n[0]:{compositeFilter:{op:NO(r.op),filters:n}}}(t):wt()}function EO(t){const e=[];return t.fields.forEach(r=>e.push(r.canonicalString())),{fieldPaths:e}}function QA(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,r,n,s,i=Nt.min(),o=Nt.min(),a=Wn.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=r,this.purpose=n,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,r){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,r,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AO{constructor(e){this.ct=e}}function SO(t){const e=wO({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Km(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TO{constructor(){this.un=new IO}addToCollectionParentIndex(e,r){return this.un.add(r),Ce.resolve()}getCollectionParents(e,r){return Ce.resolve(this.un.getEntries(r))}addFieldIndex(e,r){return Ce.resolve()}deleteFieldIndex(e,r){return Ce.resolve()}deleteAllFieldIndexes(e){return Ce.resolve()}createTargetIndexes(e,r){return Ce.resolve()}getDocumentsMatchingTarget(e,r){return Ce.resolve(null)}getIndexType(e,r){return Ce.resolve(0)}getFieldIndexes(e,r){return Ce.resolve([])}getNextCollectionGroupToUpdate(e){return Ce.resolve(null)}getMinOffset(e,r){return Ce.resolve(Cl.min())}getMinOffsetFromCollectionGroup(e,r){return Ce.resolve(Cl.min())}updateCollectionGroup(e,r,n){return Ce.resolve()}updateIndexEntries(e,r){return Ce.resolve()}}class IO{constructor(){this.index={}}add(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r]||new $n(xr.comparator),i=!s.has(n);return this.index[r]=s.add(n),i}has(e){const r=e.lastSegment(),n=e.popLast(),s=this.index[r];return s&&s.has(n)}getEntries(e){return(this.index[e]||new $n(xr.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lh{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new lh(0)}static kn(){return new lh(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(){this.changes=new Nh(e=>e.toString(),(e,r)=>e.isEqual(r)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,r){this.assertNotApplied(),this.changes.set(e,ls.newInvalidDocument(e).setReadTime(r))}getEntry(e,r){this.assertNotApplied();const n=this.changes.get(r);return n!==void 0?Ce.resolve(n):this.getFromCache(e,r)}getEntries(e,r){return this.getAllFromCache(e,r)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PO{constructor(e,r){this.overlayedDocument=e,this.mutatedFields=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CO{constructor(e,r,n,s){this.remoteDocumentCache=e,this.mutationQueue=r,this.documentOverlayCache=n,this.indexManager=s}getDocument(e,r){let n=null;return this.documentOverlayCache.getOverlay(e,r).next(s=>(n=s,this.remoteDocumentCache.getEntry(e,r))).next(s=>(n!==null&&Pd(n.mutation,s,ci.empty(),dn.now()),s))}getDocuments(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.getLocalViewOfDocuments(e,n,Bt()).next(()=>n))}getLocalViewOfDocuments(e,r,n=Bt()){const s=mc();return this.populateOverlays(e,s,r).next(()=>this.computeViews(e,r,s,n).next(i=>{let o=pd();return i.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,r){const n=mc();return this.populateOverlays(e,n,r).next(()=>this.computeViews(e,r,n,Bt()))}populateOverlays(e,r,n){const s=[];return n.forEach(i=>{r.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,a)=>{r.set(o,a)})})}computeViews(e,r,n,s){let i=Ta();const o=kd(),a=function(){return kd()}();return r.forEach((l,u)=>{const f=n.get(u.key);s.has(u.key)&&(f===void 0||f.mutation instanceof zl)?i=i.insert(u.key,u):f!==void 0?(o.set(u.key,f.mutation.getFieldMask()),Pd(f.mutation,u,f.mutation.getFieldMask(),dn.now())):o.set(u.key,ci.empty())}),this.recalculateAndSaveOverlays(e,i).next(l=>(l.forEach((u,f)=>o.set(u,f)),r.forEach((u,f)=>{var g;return a.set(u,new PO(f,(g=o.get(u))!==null&&g!==void 0?g:null))}),a))}recalculateAndSaveOverlays(e,r){const n=kd();let s=new Vr((o,a)=>o-a),i=Bt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,r).next(o=>{for(const a of o)a.keys().forEach(l=>{const u=r.get(l);if(u===null)return;let f=n.get(l)||ci.empty();f=a.applyToLocalView(u,f),n.set(l,f);const g=(s.get(a.batchId)||Bt()).add(l);s=s.insert(a.batchId,g)})}).next(()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,f=l.value,g=CA();f.forEach(y=>{if(!i.has(y)){const m=FA(r.get(y),n.get(y));m!==null&&g.set(y,m),i=i.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,u,g))}return Ce.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,r){return this.remoteDocumentCache.getEntries(e,r).next(n=>this.recalculateAndSaveOverlays(e,n))}getDocumentsMatchingQuery(e,r,n,s){return function(o){return nt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(r)?this.getDocumentsMatchingDocumentQuery(e,r.path):Hv(r)?this.getDocumentsMatchingCollectionGroupQuery(e,r,n,s):this.getDocumentsMatchingCollectionQuery(e,r,n,s)}getNextDocuments(e,r,n,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,r,n,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,r,n.largestBatchId,s-i.size):Ce.resolve(mc());let a=-1,l=i;return o.next(u=>Ce.forEach(u,(f,g)=>(a<g.largestBatchId&&(a=g.largestBatchId),i.get(f)?Ce.resolve():this.remoteDocumentCache.getEntry(e,f).next(y=>{l=l.insert(f,y)}))).next(()=>this.populateOverlays(e,u,i)).next(()=>this.computeViews(e,l,u,Bt())).next(f=>({batchId:a,changes:PA(f)})))})}getDocumentsMatchingDocumentQuery(e,r){return this.getDocument(e,new nt(r)).next(n=>{let s=pd();return n.isFoundDocument()&&(s=s.insert(n.key,n)),s})}getDocumentsMatchingCollectionGroupQuery(e,r,n,s){const i=r.collectionGroup;let o=pd();return this.indexManager.getCollectionParents(e,i).next(a=>Ce.forEach(a,l=>{const u=function(g,y){return new zc(y,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(r,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,u,n,s).next(f=>{f.forEach((g,y)=>{o=o.insert(g,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,r,n,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,r.path,n.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,r,n,i,s))).next(o=>{i.forEach((l,u)=>{const f=u.getKey();o.get(f)===null&&(o=o.insert(f,ls.newInvalidDocument(f)))});let a=pd();return o.forEach((l,u)=>{const f=i.get(l);f!==void 0&&Pd(f.mutation,u,ci.empty(),dn.now()),Og(r,u)&&(a=a.insert(l,u))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jO{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,r){return Ce.resolve(this.hr.get(r))}saveBundleMetadata(e,r){return this.hr.set(r.id,function(s){return{id:s.id,version:s.version,createTime:Oo(s.createTime)}}(r)),Ce.resolve()}getNamedQuery(e,r){return Ce.resolve(this.Pr.get(r))}saveNamedQuery(e,r){return this.Pr.set(r.name,function(s){return{name:s.name,query:SO(s.bundledQuery),readTime:Oo(s.readTime)}}(r)),Ce.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LO{constructor(){this.overlays=new Vr(nt.comparator),this.Ir=new Map}getOverlay(e,r){return Ce.resolve(this.overlays.get(r))}getOverlays(e,r){const n=mc();return Ce.forEach(r,s=>this.getOverlay(e,s).next(i=>{i!==null&&n.set(s,i)})).next(()=>n)}saveOverlays(e,r,n){return n.forEach((s,i)=>{this.ht(e,r,i)}),Ce.resolve()}removeOverlaysForBatchId(e,r,n){const s=this.Ir.get(n);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(n)),Ce.resolve()}getOverlaysForCollection(e,r,n){const s=mc(),i=r.length+1,o=new nt(r.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!r.isPrefixOf(u.path))break;u.path.length===i&&l.largestBatchId>n&&s.set(l.getKey(),l)}return Ce.resolve(s)}getOverlaysForCollectionGroup(e,r,n,s){let i=new Vr((u,f)=>u-f);const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===r&&u.largestBatchId>n){let f=i.get(u.largestBatchId);f===null&&(f=mc(),i=i.insert(u.largestBatchId,f)),f.set(u.getKey(),u)}}const a=mc(),l=i.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,f)=>a.set(u,f)),!(a.size()>=s)););return Ce.resolve(a)}ht(e,r,n){const s=this.overlays.get(n.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(n.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new rO(r,n));let i=this.Ir.get(r);i===void 0&&(i=Bt(),this.Ir.set(r,i)),this.Ir.set(r,i.add(n.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RO{constructor(){this.sessionToken=Wn.EMPTY_BYTE_STRING}getSessionToken(e){return Ce.resolve(this.sessionToken)}setSessionToken(e,r){return this.sessionToken=r,Ce.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.Tr=new $n(Sn.Er),this.dr=new $n(Sn.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,r){const n=new Sn(e,r);this.Tr=this.Tr.add(n),this.dr=this.dr.add(n)}Rr(e,r){e.forEach(n=>this.addReference(n,r))}removeReference(e,r){this.Vr(new Sn(e,r))}mr(e,r){e.forEach(n=>this.removeReference(n,r))}gr(e){const r=new nt(new xr([])),n=new Sn(r,e),s=new Sn(r,e+1),i=[];return this.dr.forEachInRange([n,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const r=new nt(new xr([])),n=new Sn(r,e),s=new Sn(r,e+1);let i=Bt();return this.dr.forEachInRange([n,s],o=>{i=i.add(o.key)}),i}containsKey(e){const r=new Sn(e,0),n=this.Tr.firstAfterOrEqual(r);return n!==null&&e.isEqual(n.key)}}class Sn{constructor(e,r){this.key=e,this.wr=r}static Er(e,r){return nt.comparator(e.key,r.key)||Jt(e.wr,r.wr)}static Ar(e,r){return Jt(e.wr,r.wr)||nt.comparator(e.key,r.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,r){this.indexManager=e,this.referenceDelegate=r,this.mutationQueue=[],this.Sr=1,this.br=new $n(Sn.Er)}checkEmpty(e){return Ce.resolve(this.mutationQueue.length===0)}addMutationBatch(e,r,n,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new tO(i,r,n,s);this.mutationQueue.push(o);for(const a of s)this.br=this.br.add(new Sn(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ce.resolve(o)}lookupMutationBatch(e,r){return Ce.resolve(this.Dr(r))}getNextMutationBatchAfterBatchId(e,r){const n=r+1,s=this.vr(n),i=s<0?0:s;return Ce.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return Ce.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return Ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,r){const n=new Sn(r,0),s=new Sn(r,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([n,s],o=>{const a=this.Dr(o.wr);i.push(a)}),Ce.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,r){let n=new $n(Jt);return r.forEach(s=>{const i=new Sn(s,0),o=new Sn(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],a=>{n=n.add(a.wr)})}),Ce.resolve(this.Cr(n))}getAllMutationBatchesAffectingQuery(e,r){const n=r.path,s=n.length+1;let i=n;nt.isDocumentKey(i)||(i=i.child(""));const o=new Sn(new nt(i),0);let a=new $n(Jt);return this.br.forEachWhile(l=>{const u=l.key.path;return!!n.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.wr)),!0)},o),Ce.resolve(this.Cr(a))}Cr(e){const r=[];return e.forEach(n=>{const s=this.Dr(n);s!==null&&r.push(s)}),r}removeMutationBatch(e,r){cr(this.Fr(r.batchId,"removed")===0),this.mutationQueue.shift();let n=this.br;return Ce.forEach(r.mutations,s=>{const i=new Sn(s.key,r.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=n})}On(e){}containsKey(e,r){const n=new Sn(r,0),s=this.br.firstAfterOrEqual(n);return Ce.resolve(r.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ce.resolve()}Fr(e,r){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const r=this.vr(e);return r<0||r>=this.mutationQueue.length?null:this.mutationQueue[r]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DO{constructor(e){this.Mr=e,this.docs=function(){return new Vr(nt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,r){const n=r.key,s=this.docs.get(n),i=s?s.size:0,o=this.Mr(r);return this.docs=this.docs.insert(n,{document:r.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const r=this.docs.get(e);r&&(this.docs=this.docs.remove(e),this.size-=r.size)}getEntry(e,r){const n=this.docs.get(r);return Ce.resolve(n?n.document.mutableCopy():ls.newInvalidDocument(r))}getEntries(e,r){let n=Ta();return r.forEach(s=>{const i=this.docs.get(s);n=n.insert(s,i?i.document.mutableCopy():ls.newInvalidDocument(s))}),Ce.resolve(n)}getDocumentsMatchingQuery(e,r,n,s){let i=Ta();const o=r.path,a=new nt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:f}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||w7(v7(f),n)<=0||(s.has(f.key)||Og(r,f))&&(i=i.insert(f.key,f.mutableCopy()))}return Ce.resolve(i)}getAllFromCollectionGroup(e,r,n,s){wt()}Or(e,r){return Ce.forEach(this.docs,n=>r(n))}newChangeBuffer(e){return new MO(this)}getSize(e){return Ce.resolve(this.size)}}class MO extends kO{constructor(e){super(),this.cr=e}applyChanges(e){const r=[];return this.changes.forEach((n,s)=>{s.isValidDocument()?r.push(this.cr.addEntry(e,s)):this.cr.removeEntry(n)}),Ce.waitFor(r)}getFromCache(e,r){return this.cr.getEntry(e,r)}getAllFromCache(e,r){return this.cr.getEntries(e,r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FO{constructor(e){this.persistence=e,this.Nr=new Nh(r=>zv(r),qv),this.lastRemoteSnapshotVersion=Nt.min(),this.highestTargetId=0,this.Lr=0,this.Br=new Xv,this.targetCount=0,this.kr=lh.Bn()}forEachTarget(e,r){return this.Nr.forEach((n,s)=>r(s)),Ce.resolve()}getLastRemoteSnapshotVersion(e){return Ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ce.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),Ce.resolve(this.highestTargetId)}setTargetsMetadata(e,r,n){return n&&(this.lastRemoteSnapshotVersion=n),r>this.Lr&&(this.Lr=r),Ce.resolve()}Kn(e){this.Nr.set(e.target,e);const r=e.targetId;r>this.highestTargetId&&(this.kr=new lh(r),this.highestTargetId=r),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,r){return this.Kn(r),this.targetCount+=1,Ce.resolve()}updateTargetData(e,r){return this.Kn(r),Ce.resolve()}removeTargetData(e,r){return this.Nr.delete(r.target),this.Br.gr(r.targetId),this.targetCount-=1,Ce.resolve()}removeTargets(e,r,n){let s=0;const i=[];return this.Nr.forEach((o,a)=>{a.sequenceNumber<=r&&n.get(a.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)}),Ce.waitFor(i).next(()=>s)}getTargetCount(e){return Ce.resolve(this.targetCount)}getTargetData(e,r){const n=this.Nr.get(r)||null;return Ce.resolve(n)}addMatchingKeys(e,r,n){return this.Br.Rr(r,n),Ce.resolve()}removeMatchingKeys(e,r,n){this.Br.mr(r,n);const s=this.persistence.referenceDelegate,i=[];return s&&r.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),Ce.waitFor(i)}removeMatchingKeysForTargetId(e,r){return this.Br.gr(r),Ce.resolve()}getMatchingKeysForTargetId(e,r){const n=this.Br.yr(r);return Ce.resolve(n)}containsKey(e,r){return Ce.resolve(this.Br.containsKey(r))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UO{constructor(e,r){this.qr={},this.overlays={},this.Qr=new Uv(0),this.Kr=!1,this.Kr=!0,this.$r=new RO,this.referenceDelegate=e(this),this.Ur=new FO(this),this.indexManager=new TO,this.remoteDocumentCache=function(s){return new DO(s)}(n=>this.referenceDelegate.Wr(n)),this.serializer=new AO(r),this.Gr=new jO(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let r=this.overlays[e.toKey()];return r||(r=new LO,this.overlays[e.toKey()]=r),r}getMutationQueue(e,r){let n=this.qr[e.toKey()];return n||(n=new OO(r,this.referenceDelegate),this.qr[e.toKey()]=n),n}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,r,n){Ke("MemoryPersistence","Starting transaction:",e);const s=new VO(this.Qr.next());return this.referenceDelegate.zr(),n(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,r){return Ce.or(Object.values(this.qr).map(n=>()=>n.containsKey(e,r)))}}class VO extends _7{constructor(e){super(),this.currentSequenceNumber=e}}class Jv{constructor(e){this.persistence=e,this.Jr=new Xv,this.Yr=null}static Zr(e){return new Jv(e)}get Xr(){if(this.Yr)return this.Yr;throw wt()}addReference(e,r,n){return this.Jr.addReference(n,r),this.Xr.delete(n.toString()),Ce.resolve()}removeReference(e,r,n){return this.Jr.removeReference(n,r),this.Xr.add(n.toString()),Ce.resolve()}markPotentiallyOrphaned(e,r){return this.Xr.add(r.toString()),Ce.resolve()}removeTarget(e,r){this.Jr.gr(r.targetId).forEach(s=>this.Xr.add(s.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,r.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>n.removeTargetData(e,r))}zr(){this.Yr=new Set}jr(e){const r=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ce.forEach(this.Xr,n=>{const s=nt.fromPath(n);return this.ei(e,s).next(i=>{i||r.removeEntry(s,Nt.min())})}).next(()=>(this.Yr=null,r.apply(e)))}updateLimboDocument(e,r){return this.ei(e,r).next(n=>{n?this.Xr.delete(r.toString()):this.Xr.add(r.toString())})}Wr(e){return 0}ei(e,r){return Ce.or([()=>Ce.resolve(this.Jr.containsKey(r)),()=>this.persistence.getTargetCache().containsKey(e,r),()=>this.persistence.Hr(e,r)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(e,r,n,s){this.targetId=e,this.fromCache=r,this.$i=n,this.Ui=s}static Wi(e,r){let n=Bt(),s=Bt();for(const i of r.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new Zv(e,r.fromCache,n,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BO{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zO{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return Sj()?8:b7(fs())>0?6:4}()}initialize(e,r){this.Ji=e,this.indexManager=r,this.Gi=!0}getDocumentsMatchingQuery(e,r,n,s){const i={result:null};return this.Yi(e,r).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,r,s,n).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new BO;return this.Xi(e,r,o).next(a=>{if(i.result=a,this.zi)return this.es(e,r,o,a.size)})}).next(()=>i.result)}es(e,r,n,s){return n.documentReadCount<this.ji?(rd()<=$t.DEBUG&&Ke("QueryEngine","SDK will not create cache indexes for query:",hu(r),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),Ce.resolve()):(rd()<=$t.DEBUG&&Ke("QueryEngine","Query:",hu(r),"scans",n.documentReadCount,"local documents and returns",s,"documents as results."),n.documentReadCount>this.Hi*s?(rd()<=$t.DEBUG&&Ke("QueryEngine","The SDK decides to create cache indexes for query:",hu(r),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ro(r))):Ce.resolve())}Yi(e,r){if(C_(r))return Ce.resolve(null);let n=Ro(r);return this.indexManager.getIndexType(e,n).next(s=>s===0?null:(r.limit!==null&&s===1&&(r=Km(r,null,"F"),n=Ro(r)),this.indexManager.getDocumentsMatchingTarget(e,n).next(i=>{const o=Bt(...i);return this.Ji.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,n).next(l=>{const u=this.ts(r,a);return this.ns(r,u,o,l.readTime)?this.Yi(e,Km(r,null,"F")):this.rs(e,u,r,l)}))})))}Zi(e,r,n,s){return C_(r)||s.isEqual(Nt.min())?Ce.resolve(null):this.Ji.getDocuments(e,n).next(i=>{const o=this.ts(r,i);return this.ns(r,o,n,s)?Ce.resolve(null):(rd()<=$t.DEBUG&&Ke("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),hu(r)),this.rs(e,o,r,y7(s,-1)).next(a=>a))})}ts(e,r){let n=new $n(IA(e));return r.forEach((s,i)=>{Og(e,i)&&(n=n.add(i))}),n}ns(e,r,n,s){if(e.limit===null)return!1;if(n.size!==r.size)return!0;const i=e.limitType==="F"?r.last():r.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,r,n){return rd()<=$t.DEBUG&&Ke("QueryEngine","Using full collection scan to execute query:",hu(r)),this.Ji.getDocumentsMatchingQuery(e,r,Cl.min(),n)}rs(e,r,n,s){return this.Ji.getDocumentsMatchingQuery(e,n,s).next(i=>(r.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qO{constructor(e,r,n,s){this.persistence=e,this.ss=r,this.serializer=s,this.os=new Vr(Jt),this._s=new Nh(i=>zv(i),qv),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(n)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new CO(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",r=>e.collect(r,this.os))}}function $O(t,e,r,n){return new qO(t,e,r,n)}async function YA(t,e){const r=Et(t);return await r.persistence.runTransaction("Handle user change","readonly",n=>{let s;return r.mutationQueue.getAllMutationBatches(n).next(i=>(s=i,r.ls(e),r.mutationQueue.getAllMutationBatches(n))).next(i=>{const o=[],a=[];let l=Bt();for(const u of s){o.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}for(const u of i){a.push(u.batchId);for(const f of u.mutations)l=l.add(f.key)}return r.localDocuments.getDocuments(n,l).next(u=>({hs:u,removedBatchIds:o,addedBatchIds:a}))})})}function HO(t,e){const r=Et(t);return r.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{const s=e.batch.keys(),i=r.cs.newChangeBuffer({trackRemovals:!0});return function(a,l,u,f){const g=u.batch,y=g.keys();let m=Ce.resolve();return y.forEach(E=>{m=m.next(()=>f.getEntry(l,E)).next(b=>{const A=u.docVersions.get(E);cr(A!==null),b.version.compareTo(A)<0&&(g.applyToRemoteDocument(b,u),b.isValidDocument()&&(b.setReadTime(u.commitVersion),f.addEntry(b)))})}),m.next(()=>a.mutationQueue.removeMutationBatch(l,g))}(r,n,e,i).next(()=>i.apply(n)).next(()=>r.mutationQueue.performConsistencyCheck(n)).next(()=>r.documentOverlayCache.removeOverlaysForBatchId(n,s,e.batch.batchId)).next(()=>r.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,function(a){let l=Bt();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l}(e))).next(()=>r.localDocuments.getDocuments(n,s))})}function XA(t){const e=Et(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",r=>e.Ur.getLastRemoteSnapshotVersion(r))}function WO(t,e){const r=Et(t),n=e.snapshotVersion;let s=r.os;return r.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=r.cs.newChangeBuffer({trackRemovals:!0});s=r.os;const a=[];e.targetChanges.forEach((f,g)=>{const y=s.get(g);if(!y)return;a.push(r.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>r.Ur.addMatchingKeys(i,f.addedDocuments,g)));let m=y.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?m=m.withResumeToken(Wn.EMPTY_BYTE_STRING,Nt.min()).withLastLimboFreeSnapshotVersion(Nt.min()):f.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(f.resumeToken,n)),s=s.insert(g,m),function(b,A,x){return b.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(y,m,f)&&a.push(r.Ur.updateTargetData(i,m))});let l=Ta(),u=Bt();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&a.push(r.persistence.referenceDelegate.updateLimboDocument(i,f))}),a.push(GO(i,o,e.documentUpdates).next(f=>{l=f.Ps,u=f.Is})),!n.isEqual(Nt.min())){const f=r.Ur.getLastRemoteSnapshotVersion(i).next(g=>r.Ur.setTargetsMetadata(i,i.currentSequenceNumber,n));a.push(f)}return Ce.waitFor(a).next(()=>o.apply(i)).next(()=>r.localDocuments.getLocalViewOfDocuments(i,l,u)).next(()=>l)}).then(i=>(r.os=s,i))}function GO(t,e,r){let n=Bt(),s=Bt();return r.forEach(i=>n=n.add(i)),e.getEntries(t,n).next(i=>{let o=Ta();return r.forEach((a,l)=>{const u=i.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(Nt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):Ke("LocalStore","Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)}),{Ps:o,Is:s}})}function KO(t,e){const r=Et(t);return r.persistence.runTransaction("Get next mutation batch","readonly",n=>(e===void 0&&(e=-1),r.mutationQueue.getNextMutationBatchAfterBatchId(n,e)))}function QO(t,e){const r=Et(t);return r.persistence.runTransaction("Allocate target","readwrite",n=>{let s;return r.Ur.getTargetData(n,e).next(i=>i?(s=i,Ce.resolve(s)):r.Ur.allocateTargetId(n).next(o=>(s=new pl(e,o,"TargetPurposeListen",n.currentSequenceNumber),r.Ur.addTargetData(n,s).next(()=>s))))}).then(n=>{const s=r.os.get(n.targetId);return(s===null||n.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(r.os=r.os.insert(n.targetId,n),r._s.set(e,n.targetId)),n})}async function r2(t,e,r){const n=Et(t),s=n.os.get(e),i=r?"readwrite":"readwrite-primary";try{r||await n.persistence.runTransaction("Release target",i,o=>n.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!If(o))throw o;Ke("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}n.os=n.os.remove(e),n._s.delete(s.target)}function z_(t,e,r){const n=Et(t);let s=Nt.min(),i=Bt();return n.persistence.runTransaction("Execute query","readwrite",o=>function(l,u,f){const g=Et(l),y=g._s.get(f);return y!==void 0?Ce.resolve(g.os.get(y)):g.Ur.getTargetData(u,f)}(n,o,Ro(e)).next(a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,n.Ur.getMatchingKeysForTargetId(o,a.targetId).next(l=>{i=l})}).next(()=>n.ss.getDocumentsMatchingQuery(o,e,r?s:Nt.min(),r?i:Bt())).next(a=>(YO(n,V7(e),a),{documents:a,Ts:i})))}function YO(t,e,r){let n=t.us.get(e)||Nt.min();r.forEach((s,i)=>{i.readTime.compareTo(n)>0&&(n=i.readTime)}),t.us.set(e,n)}class q_{constructor(){this.activeTargetIds=W7()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class XO{constructor(){this.so=new q_,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,r,n){}addLocalQueryTarget(e,r=!0){return r&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,r,n){this.oo[e]=r}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new q_,Promise.resolve()}handleUserChange(e,r,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $_{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){Ke("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){Ke("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ap=null;function a1(){return Ap===null?Ap=function(){return 268435456+Math.round(2147483648*Math.random())}():Ap++,"0x"+Ap.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZO={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eD{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const es="WebChannelConnection";class tD extends class{constructor(r){this.databaseInfo=r,this.databaseId=r.databaseId;const n=r.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=n+"://"+r.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(r,n,s,i,o){const a=a1(),l=this.xo(r,n.toUriEncodedString());Ke("RestConnection",`Sending RPC '${r}' ${a}:`,l,s);const u={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(u,i,o),this.No(r,l,u,s).then(f=>(Ke("RestConnection",`Received RPC '${r}' ${a}: `,f),f),f=>{throw rh("RestConnection",`RPC '${r}' ${a} failed with error: `,f,"url: ",l,"request:",s),f})}Lo(r,n,s,i,o,a){return this.Mo(r,n,s,i,o)}Oo(r,n,s){r["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+bh}(),r["Content-Type"]="text/plain",this.databaseInfo.appId&&(r["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>r[o]=i),s&&s.headers.forEach((i,o)=>r[o]=i)}xo(r,n){const s=ZO[r];return`${this.Do}/v1/${n}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,r,n,s){const i=a1();return new Promise((o,a)=>{const l=new hA;l.setWithCredentials(!0),l.listenOnce(dA.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Jp.NO_ERROR:const f=l.getResponseJson();Ke(es,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Jp.TIMEOUT:Ke(es,`RPC '${e}' ${i} timed out`),a(new Ue(Te.DEADLINE_EXCEEDED,"Request time out"));break;case Jp.HTTP_ERROR:const g=l.getStatus();if(Ke(es,`RPC '${e}' ${i} failed with status:`,g,"response text:",l.getResponseText()),g>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);const m=y==null?void 0:y.error;if(m&&m.status&&m.message){const E=function(A){const x=A.toLowerCase().replace(/_/g,"-");return Object.values(Te).indexOf(x)>=0?x:Te.UNKNOWN}(m.status);a(new Ue(E,m.message))}else a(new Ue(Te.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new Ue(Te.UNAVAILABLE,"Connection failed."));break;default:wt()}}finally{Ke(es,`RPC '${e}' ${i} completed.`)}});const u=JSON.stringify(s);Ke(es,`RPC '${e}' ${i} sending request:`,s),l.send(r,"POST",u,n,15)})}Bo(e,r,n){const s=a1(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=mA(),a=pA(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,r,n),l.encodeInitMessageHeaders=!0;const f=i.join("");Ke(es,`Creating RPC '${e}' stream ${s}: ${f}`,l);const g=o.createWebChannel(f,l);let y=!1,m=!1;const E=new eD({Io:A=>{m?Ke(es,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(y||(Ke(es,`Opening RPC '${e}' stream ${s} transport.`),g.open(),y=!0),Ke(es,`RPC '${e}' stream ${s} sending:`,A),g.send(A))},To:()=>g.close()}),b=(A,x,T)=>{A.listen(x,I=>{try{T(I)}catch(k){setTimeout(()=>{throw k},0)}})};return b(g,fd.EventType.OPEN,()=>{m||(Ke(es,`RPC '${e}' stream ${s} transport opened.`),E.yo())}),b(g,fd.EventType.CLOSE,()=>{m||(m=!0,Ke(es,`RPC '${e}' stream ${s} transport closed`),E.So())}),b(g,fd.EventType.ERROR,A=>{m||(m=!0,rh(es,`RPC '${e}' stream ${s} transport errored:`,A),E.So(new Ue(Te.UNAVAILABLE,"The operation could not be completed")))}),b(g,fd.EventType.MESSAGE,A=>{var x;if(!m){const T=A.data[0];cr(!!T);const I=T,k=I.error||((x=I[0])===null||x===void 0?void 0:x.error);if(k){Ke(es,`RPC '${e}' stream ${s} received error:`,k);const H=k.status;let Z=function(C){const O=cn[C];if(O!==void 0)return VA(O)}(H),F=k.message;Z===void 0&&(Z=Te.INTERNAL,F="Unknown error status: "+H+" with message "+k.message),m=!0,E.So(new Ue(Z,F)),g.close()}else Ke(es,`RPC '${e}' stream ${s} received:`,T),E.bo(T)}}),b(a,fA.STAT_EVENT,A=>{A.stat===Wy.PROXY?Ke(es,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===Wy.NOPROXY&&Ke(es,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{E.wo()},0),E}}function l1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t){return new hO(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e,r,n=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=r,this.ko=n,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const r=Math.floor(this.Ko+this.zo()),n=Math.max(0,Date.now()-this.Uo),s=Math.max(0,r-n);s>0&&Ke("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${r} ms, last attempt: ${n} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e,r,n,s,i,o,a,l){this.ui=e,this.Ho=n,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new JA(e,r)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,r){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():r&&r.code===Te.RESOURCE_EXHAUSTED?(Sa(r.toString()),Sa("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):r&&r.code===Te.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(r)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),r=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,s])=>{this.Yo===r&&this.P_(n,s)},n=>{e(()=>{const s=new Ue(Te.UNKNOWN,"Fetching auth token failed: "+n.message);return this.I_(s)})})}P_(e,r){const n=this.h_(this.Yo);this.stream=this.T_(e,r),this.stream.Eo(()=>{n(()=>this.listener.Eo())}),this.stream.Ro(()=>{n(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{n(()=>this.I_(s))}),this.stream.onMessage(s=>{n(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return Ke("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return r=>{this.ui.enqueueAndForget(()=>this.Yo===e?r():(Ke("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class rD extends ZA{constructor(e,r,n,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}T_(e,r){return this.connection.Bo("Listen",e,r)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const r=pO(this.serializer,e),n=function(i){if(!("targetChange"in i))return Nt.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?Nt.min():o.readTime?Oo(o.readTime):Nt.min()}(e);return this.listener.d_(r,n)}A_(e){const r={};r.database=t2(this.serializer),r.addTarget=function(i,o){let a;const l=o.target;if(a=Yy(l)?{documents:yO(i,l)}:{query:vO(i,l)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=qA(i,o.resumeToken);const u=Jy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(Nt.min())>0){a.readTime=Ym(i,o.snapshotVersion.toTimestamp());const u=Jy(i,o.expectedCount);u!==null&&(a.expectedCount=u)}return a}(this.serializer,e);const n=xO(this.serializer,e);n&&(r.labels=n),this.a_(r)}R_(e){const r={};r.database=t2(this.serializer),r.removeTarget=e,this.a_(r)}}class nD extends ZA{constructor(e,r,n,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,n,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,r){return this.connection.Bo("Write",e,r)}E_(e){return cr(!!e.streamToken),this.lastStreamToken=e.streamToken,cr(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){cr(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const r=gO(e.writeResults,e.commitTime),n=Oo(e.commitTime);return this.listener.g_(n,r)}p_(){const e={};e.database=t2(this.serializer),this.a_(e)}m_(e){const r={streamToken:this.lastStreamToken,writes:e.map(n=>mO(this.serializer,n))};this.a_(r)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sD extends class{}{constructor(e,r,n,s){super(),this.authCredentials=e,this.appCheckCredentials=r,this.connection=n,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new Ue(Te.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,r,n,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Zy(r,n),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Ue(Te.UNKNOWN,i.toString())})}Lo(e,r,n,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Lo(e,Zy(r,n),s,o,a,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Te.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ue(Te.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class iD{constructor(e,r){this.asyncQueue=e,this.onlineStateHandler=r,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const r=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(Sa(r),this.D_=!1):Ke("OnlineStateTracker",r)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oD{constructor(e,r,n,s,i){this.localStore=e,this.datastore=r,this.asyncQueue=n,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{n.enqueueAndForget(async()=>{qc(this)&&(Ke("RemoteStore","Restarting streams for network reachability change."),await async function(l){const u=Et(l);u.L_.add(4),await Cf(u),u.q_.set("Unknown"),u.L_.delete(4),await Vg(u)}(this))})}),this.q_=new iD(n,s)}}async function Vg(t){if(qc(t))for(const e of t.B_)await e(!0)}async function Cf(t){for(const e of t.B_)await e(!1)}function eS(t,e){const r=Et(t);r.N_.has(e.targetId)||(r.N_.set(e.targetId,e),n5(r)?r5(r):Eh(r).r_()&&t5(r,e))}function e5(t,e){const r=Et(t),n=Eh(r);r.N_.delete(e),n.r_()&&tS(r,e),r.N_.size===0&&(n.r_()?n.o_():qc(r)&&r.q_.set("Unknown"))}function t5(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nt.min())>0){const r=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(r)}Eh(t).A_(e)}function tS(t,e){t.Q_.xe(e),Eh(t).R_(e)}function r5(t){t.Q_=new aO({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Eh(t).start(),t.q_.v_()}function n5(t){return qc(t)&&!Eh(t).n_()&&t.N_.size>0}function qc(t){return Et(t).L_.size===0}function rS(t){t.Q_=void 0}async function aD(t){t.q_.set("Online")}async function lD(t){t.N_.forEach((e,r)=>{t5(t,e)})}async function cD(t,e){rS(t),n5(t)?(t.q_.M_(e),r5(t)):t.q_.set("Unknown")}async function uD(t,e,r){if(t.q_.set("Online"),e instanceof zA&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const a of i.targetIds)s.N_.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.N_.delete(a),s.Q_.removeTarget(a))}(t,e)}catch(n){Ke("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),n),await Xm(t,n)}else if(e instanceof tm?t.Q_.Ke(e):e instanceof BA?t.Q_.He(e):t.Q_.We(e),!r.isEqual(Nt.min()))try{const n=await XA(t.localStore);r.compareTo(n)>=0&&await function(i,o){const a=i.Q_.rt(o);return a.targetChanges.forEach((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const f=i.N_.get(u);f&&i.N_.set(u,f.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,u)=>{const f=i.N_.get(l);if(!f)return;i.N_.set(l,f.withResumeToken(Wn.EMPTY_BYTE_STRING,f.snapshotVersion)),tS(i,l);const g=new pl(f.target,l,u,f.sequenceNumber);t5(i,g)}),i.remoteSyncer.applyRemoteEvent(a)}(t,r)}catch(n){Ke("RemoteStore","Failed to raise snapshot:",n),await Xm(t,n)}}async function Xm(t,e,r){if(!If(e))throw e;t.L_.add(1),await Cf(t),t.q_.set("Offline"),r||(r=()=>XA(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{Ke("RemoteStore","Retrying IndexedDB access"),await r(),t.L_.delete(1),await Vg(t)})}function nS(t,e){return e().catch(r=>Xm(t,r,e))}async function Bg(t){const e=Et(t),r=Ll(e);let n=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;hD(e);)try{const s=await KO(e.localStore,n);if(s===null){e.O_.length===0&&r.o_();break}n=s.batchId,dD(e,s)}catch(s){await Xm(e,s)}sS(e)&&iS(e)}function hD(t){return qc(t)&&t.O_.length<10}function dD(t,e){t.O_.push(e);const r=Ll(t);r.r_()&&r.V_&&r.m_(e.mutations)}function sS(t){return qc(t)&&!Ll(t).n_()&&t.O_.length>0}function iS(t){Ll(t).start()}async function fD(t){Ll(t).p_()}async function pD(t){const e=Ll(t);for(const r of t.O_)e.m_(r.mutations)}async function mD(t,e,r){const n=t.O_.shift(),s=Kv.from(n,e,r);await nS(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Bg(t)}async function gD(t,e){e&&Ll(t).V_&&await async function(n,s){if(function(o){return sO(o)&&o!==Te.ABORTED}(s.code)){const i=n.O_.shift();Ll(n).s_(),await nS(n,()=>n.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Bg(n)}}(t,e),sS(t)&&iS(t)}async function H_(t,e){const r=Et(t);r.asyncQueue.verifyOperationInProgress(),Ke("RemoteStore","RemoteStore received new credentials");const n=qc(r);r.L_.add(3),await Cf(r),n&&r.q_.set("Unknown"),await r.remoteSyncer.handleCredentialChange(e),r.L_.delete(3),await Vg(r)}async function yD(t,e){const r=Et(t);e?(r.L_.delete(2),await Vg(r)):e||(r.L_.add(2),await Cf(r),r.q_.set("Unknown"))}function Eh(t){return t.K_||(t.K_=function(r,n,s){const i=Et(r);return i.w_(),new rD(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:aD.bind(null,t),Ro:lD.bind(null,t),mo:cD.bind(null,t),d_:uD.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),n5(t)?r5(t):t.q_.set("Unknown")):(await t.K_.stop(),rS(t))})),t.K_}function Ll(t){return t.U_||(t.U_=function(r,n,s){const i=Et(r);return i.w_(),new nD(n,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:fD.bind(null,t),mo:gD.bind(null,t),f_:pD.bind(null,t),g_:mD.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Bg(t)):(await t.U_.stop(),t.O_.length>0&&(Ke("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s5{constructor(e,r,n,s,i){this.asyncQueue=e,this.timerId=r,this.targetTimeMs=n,this.op=s,this.removalCallback=i,this.deferred=new ya,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,r,n,s,i){const o=Date.now()+n,a=new s5(e,r,o,s,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ue(Te.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function i5(t,e){if(Sa("AsyncQueue",`${e}: ${t}`),If(t))return new Ue(Te.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e){this.comparator=e?(r,n)=>e(r,n)||nt.comparator(r.key,n.key):(r,n)=>nt.comparator(r.key,n.key),this.keyedMap=pd(),this.sortedSet=new Vr(this.comparator)}static emptySet(e){return new Bu(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const r=this.keyedMap.get(e);return r?this.sortedSet.indexOf(r):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((r,n)=>(e(r),!1))}add(e){const r=this.delete(e.key);return r.copy(r.keyedMap.insert(e.key,e),r.sortedSet.insert(e,null))}delete(e){const r=this.get(e);return r?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(r)):this}isEqual(e){if(!(e instanceof Bu)||this.size!==e.size)return!1;const r=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;r.hasNext();){const s=r.getNext().key,i=n.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(r=>{e.push(r.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,r){const n=new Bu;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=r,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W_{constructor(){this.W_=new Vr(nt.comparator)}track(e){const r=e.doc.key,n=this.W_.get(r);n?e.type!==0&&n.type===3?this.W_=this.W_.insert(r,e):e.type===3&&n.type!==1?this.W_=this.W_.insert(r,{type:n.type,doc:e.doc}):e.type===2&&n.type===2?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):e.type===2&&n.type===0?this.W_=this.W_.insert(r,{type:0,doc:e.doc}):e.type===1&&n.type===0?this.W_=this.W_.remove(r):e.type===1&&n.type===2?this.W_=this.W_.insert(r,{type:1,doc:n.doc}):e.type===0&&n.type===1?this.W_=this.W_.insert(r,{type:2,doc:e.doc}):wt():this.W_=this.W_.insert(r,e)}G_(){const e=[];return this.W_.inorderTraversal((r,n)=>{e.push(n)}),e}}class ch{constructor(e,r,n,s,i,o,a,l,u){this.query=e,this.docs=r,this.oldDocs=n,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,r,n,s,i){const o=[];return r.forEach(a=>{o.push({type:0,doc:a})}),new ch(e,r,Bu.emptySet(r),o,n,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Rg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const r=this.docChanges,n=e.docChanges;if(r.length!==n.length)return!1;for(let s=0;s<r.length;s++)if(r[s].type!==n[s].type||!r[s].doc.isEqual(n[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vD{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class wD{constructor(){this.queries=G_(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(r,n){const s=Et(r),i=s.queries;s.queries=G_(),i.forEach((o,a)=>{for(const l of a.j_)l.onError(n)})})(this,new Ue(Te.ABORTED,"Firestore shutting down"))}}function G_(){return new Nh(t=>TA(t),Rg)}async function oS(t,e){const r=Et(t);let n=3;const s=e.query;let i=r.queries.get(s);i?!i.H_()&&e.J_()&&(n=2):(i=new vD,n=e.J_()?0:1);try{switch(n){case 0:i.z_=await r.onListen(s,!0);break;case 1:i.z_=await r.onListen(s,!1);break;case 2:await r.onFirstRemoteStoreListen(s)}}catch(o){const a=i5(o,`Initialization of query '${hu(e.query)}' failed`);return void e.onError(a)}r.queries.set(s,i),i.j_.push(e),e.Z_(r.onlineState),i.z_&&e.X_(i.z_)&&o5(r)}async function aS(t,e){const r=Et(t),n=e.query;let s=3;const i=r.queries.get(n);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return r.queries.delete(n),r.onUnlisten(n,!0);case 1:return r.queries.delete(n),r.onUnlisten(n,!1);case 2:return r.onLastRemoteStoreUnlisten(n);default:return}}function xD(t,e){const r=Et(t);let n=!1;for(const s of e){const i=s.query,o=r.queries.get(i);if(o){for(const a of o.j_)a.X_(s)&&(n=!0);o.z_=s}}n&&o5(r)}function _D(t,e,r){const n=Et(t),s=n.queries.get(e);if(s)for(const i of s.j_)i.onError(r);n.queries.delete(e)}function o5(t){t.Y_.forEach(e=>{e.next()})}var n2,K_;(K_=n2||(n2={})).ea="default",K_.Cache="cache";class lS{constructor(e,r,n){this.query=e,this.ta=r,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=n||{}}X_(e){if(!this.options.includeMetadataChanges){const n=[];for(const s of e.docChanges)s.type!==3&&n.push(s);e=new ch(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let r=!1;return this.na?this.ia(e)&&(this.ta.next(e),r=!0):this.sa(e,this.onlineState)&&(this.oa(e),r=!0),this.ra=e,r}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let r=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),r=!0),r}sa(e,r){if(!e.fromCache||!this.J_())return!0;const n=r!=="Offline";return(!this.options._a||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||r==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const r=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!r)&&this.options.includeMetadataChanges===!0}oa(e){e=ch.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==n2.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cS{constructor(e){this.key=e}}class uS{constructor(e){this.key=e}}class bD{constructor(e,r){this.query=e,this.Ta=r,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=Bt(),this.mutatedKeys=Bt(),this.Aa=IA(e),this.Ra=new Bu(this.Aa)}get Va(){return this.Ta}ma(e,r){const n=r?r.fa:new W_,s=r?r.Ra:this.Ra;let i=r?r.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const y=s.get(f),m=Og(this.query,g)?g:null,E=!!y&&this.mutatedKeys.has(y.key),b=!!m&&(m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations);let A=!1;y&&m?y.data.isEqual(m.data)?E!==b&&(n.track({type:3,doc:m}),A=!0):this.ga(y,m)||(n.track({type:2,doc:m}),A=!0,(l&&this.Aa(m,l)>0||u&&this.Aa(m,u)<0)&&(a=!0)):!y&&m?(n.track({type:0,doc:m}),A=!0):y&&!m&&(n.track({type:1,doc:y}),A=!0,(l||u)&&(a=!0)),A&&(m?(o=o.add(m),i=b?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),n.track({type:1,doc:f})}return{Ra:o,fa:n,ns:a,mutatedKeys:i}}ga(e,r){return e.hasLocalMutations&&r.hasCommittedMutations&&!r.hasLocalMutations}applyChanges(e,r,n,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(m,E){const b=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return wt()}};return b(m)-b(E)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(n),s=s!=null&&s;const a=r&&!s?this.ya():[],l=this.da.size===0&&this.current&&!s?1:0,u=l!==this.Ea;return this.Ea=l,o.length!==0||u?{snapshot:new ch(this.query,e.Ra,i,o,e.mutatedKeys,l===0,u,!1,!!n&&n.resumeToken.approximateByteSize()>0),wa:a}:{wa:a}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new W_,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(r=>this.Ta=this.Ta.add(r)),e.modifiedDocuments.forEach(r=>{}),e.removedDocuments.forEach(r=>this.Ta=this.Ta.delete(r)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=Bt(),this.Ra.forEach(n=>{this.Sa(n.key)&&(this.da=this.da.add(n.key))});const r=[];return e.forEach(n=>{this.da.has(n)||r.push(new uS(n))}),this.da.forEach(n=>{e.has(n)||r.push(new cS(n))}),r}ba(e){this.Ta=e.Ts,this.da=Bt();const r=this.ma(e.documents);return this.applyChanges(r,!0)}Da(){return ch.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class ND{constructor(e,r,n){this.query=e,this.targetId=r,this.view=n}}class ED{constructor(e){this.key=e,this.va=!1}}class AD{constructor(e,r,n,s,i,o){this.localStore=e,this.remoteStore=r,this.eventManager=n,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Nh(a=>TA(a),Rg),this.Ma=new Map,this.xa=new Set,this.Oa=new Vr(nt.comparator),this.Na=new Map,this.La=new Xv,this.Ba={},this.ka=new Map,this.qa=lh.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function SD(t,e,r=!0){const n=gS(t);let s;const i=n.Fa.get(e);return i?(n.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await hS(n,e,r,!0),s}async function TD(t,e){const r=gS(t);await hS(r,e,!0,!1)}async function hS(t,e,r,n){const s=await QO(t.localStore,Ro(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,r);let a;return n&&(a=await ID(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&r&&eS(t.remoteStore,s),a}async function ID(t,e,r,n,s){t.Ka=(g,y,m)=>async function(b,A,x,T){let I=A.view.ma(x);I.ns&&(I=await z_(b.localStore,A.query,!1).then(({documents:F})=>A.view.ma(F,I)));const k=T&&T.targetChanges.get(A.targetId),H=T&&T.targetMismatches.get(A.targetId)!=null,Z=A.view.applyChanges(I,b.isPrimaryClient,k,H);return Y_(b,A.targetId,Z.wa),Z.snapshot}(t,g,y,m);const i=await z_(t.localStore,e,!0),o=new bD(e,i.Ts),a=o.ma(i.documents),l=Pf.createSynthesizedTargetChangeForCurrentChange(r,n&&t.onlineState!=="Offline",s),u=o.applyChanges(a,t.isPrimaryClient,l);Y_(t,r,u.wa);const f=new ND(e,r,o);return t.Fa.set(e,f),t.Ma.has(r)?t.Ma.get(r).push(e):t.Ma.set(r,[e]),u.snapshot}async function kD(t,e,r){const n=Et(t),s=n.Fa.get(e),i=n.Ma.get(s.targetId);if(i.length>1)return n.Ma.set(s.targetId,i.filter(o=>!Rg(o,e))),void n.Fa.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(s.targetId),n.sharedClientState.isActiveQueryTarget(s.targetId)||await r2(n.localStore,s.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(s.targetId),r&&e5(n.remoteStore,s.targetId),s2(n,s.targetId)}).catch(Tf)):(s2(n,s.targetId),await r2(n.localStore,s.targetId,!0))}async function PD(t,e){const r=Et(t),n=r.Fa.get(e),s=r.Ma.get(n.targetId);r.isPrimaryClient&&s.length===1&&(r.sharedClientState.removeLocalQueryTarget(n.targetId),e5(r.remoteStore,n.targetId))}async function CD(t,e,r){const n=FD(t);try{const s=await function(o,a){const l=Et(o),u=dn.now(),f=a.reduce((m,E)=>m.add(E.key),Bt());let g,y;return l.persistence.runTransaction("Locally write mutations","readwrite",m=>{let E=Ta(),b=Bt();return l.cs.getEntries(m,f).next(A=>{E=A,E.forEach((x,T)=>{T.isValidDocument()||(b=b.add(x))})}).next(()=>l.localDocuments.getOverlayedDocuments(m,E)).next(A=>{g=A;const x=[];for(const T of a){const I=Z7(T,g.get(T.key).overlayedDocument);I!=null&&x.push(new zl(T.key,I,xA(I.value.mapValue),Li.exists(!0)))}return l.mutationQueue.addMutationBatch(m,u,x,a)}).next(A=>{y=A;const x=A.applyToLocalDocumentSet(g,b);return l.documentOverlayCache.saveOverlays(m,A.batchId,x)})}).then(()=>({batchId:y.batchId,changes:PA(g)}))}(n.localStore,e);n.sharedClientState.addPendingMutation(s.batchId),function(o,a,l){let u=o.Ba[o.currentUser.toKey()];u||(u=new Vr(Jt)),u=u.insert(a,l),o.Ba[o.currentUser.toKey()]=u}(n,s.batchId,r),await jf(n,s.changes),await Bg(n.remoteStore)}catch(s){const i=i5(s,"Failed to persist write");r.reject(i)}}async function dS(t,e){const r=Et(t);try{const n=await WO(r.localStore,e);e.targetChanges.forEach((s,i)=>{const o=r.Na.get(i);o&&(cr(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?cr(o.va):s.removedDocuments.size>0&&(cr(o.va),o.va=!1))}),await jf(r,n,e)}catch(n){await Tf(n)}}function Q_(t,e,r){const n=Et(t);if(n.isPrimaryClient&&r===0||!n.isPrimaryClient&&r===1){const s=[];n.Fa.forEach((i,o)=>{const a=o.view.Z_(e);a.snapshot&&s.push(a.snapshot)}),function(o,a){const l=Et(o);l.onlineState=a;let u=!1;l.queries.forEach((f,g)=>{for(const y of g.j_)y.Z_(a)&&(u=!0)}),u&&o5(l)}(n.eventManager,e),s.length&&n.Ca.d_(s),n.onlineState=e,n.isPrimaryClient&&n.sharedClientState.setOnlineState(e)}}async function jD(t,e,r){const n=Et(t);n.sharedClientState.updateQueryState(e,"rejected",r);const s=n.Na.get(e),i=s&&s.key;if(i){let o=new Vr(nt.comparator);o=o.insert(i,ls.newNoDocument(i,Nt.min()));const a=Bt().add(i),l=new Fg(Nt.min(),new Map,new Vr(Jt),o,a);await dS(n,l),n.Oa=n.Oa.remove(i),n.Na.delete(e),a5(n)}else await r2(n.localStore,e,!1).then(()=>s2(n,e,r)).catch(Tf)}async function LD(t,e){const r=Et(t),n=e.batch.batchId;try{const s=await HO(r.localStore,e);pS(r,n,null),fS(r,n),r.sharedClientState.updateMutationState(n,"acknowledged"),await jf(r,s)}catch(s){await Tf(s)}}async function RD(t,e,r){const n=Et(t);try{const s=await function(o,a){const l=Et(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",u=>{let f;return l.mutationQueue.lookupMutationBatch(u,a).next(g=>(cr(g!==null),f=g.keys(),l.mutationQueue.removeMutationBatch(u,g))).next(()=>l.mutationQueue.performConsistencyCheck(u)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(u,f,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,f)).next(()=>l.localDocuments.getDocuments(u,f))})}(n.localStore,e);pS(n,e,r),fS(n,e),n.sharedClientState.updateMutationState(e,"rejected",r),await jf(n,s)}catch(s){await Tf(s)}}function fS(t,e){(t.ka.get(e)||[]).forEach(r=>{r.resolve()}),t.ka.delete(e)}function pS(t,e,r){const n=Et(t);let s=n.Ba[n.currentUser.toKey()];if(s){const i=s.get(e);i&&(r?i.reject(r):i.resolve(),s=s.remove(e)),n.Ba[n.currentUser.toKey()]=s}}function s2(t,e,r=null){t.sharedClientState.removeLocalQueryTarget(e);for(const n of t.Ma.get(e))t.Fa.delete(n),r&&t.Ca.$a(n,r);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(n=>{t.La.containsKey(n)||mS(t,n)})}function mS(t,e){t.xa.delete(e.path.canonicalString());const r=t.Oa.get(e);r!==null&&(e5(t.remoteStore,r),t.Oa=t.Oa.remove(e),t.Na.delete(r),a5(t))}function Y_(t,e,r){for(const n of r)n instanceof cS?(t.La.addReference(n.key,e),OD(t,n)):n instanceof uS?(Ke("SyncEngine","Document no longer in limbo: "+n.key),t.La.removeReference(n.key,e),t.La.containsKey(n.key)||mS(t,n.key)):wt()}function OD(t,e){const r=e.key,n=r.path.canonicalString();t.Oa.get(r)||t.xa.has(n)||(Ke("SyncEngine","New document in limbo: "+r),t.xa.add(n),a5(t))}function a5(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const r=new nt(xr.fromString(e)),n=t.qa.next();t.Na.set(n,new ED(r)),t.Oa=t.Oa.insert(r,n),eS(t.remoteStore,new pl(Ro($v(r.path)),n,"TargetPurposeLimboResolution",Uv.oe))}}async function jf(t,e,r){const n=Et(t),s=[],i=[],o=[];n.Fa.isEmpty()||(n.Fa.forEach((a,l)=>{o.push(n.Ka(l,e,r).then(u=>{var f;if((u||r)&&n.isPrimaryClient){const g=u?!u.fromCache:(f=r==null?void 0:r.targetChanges.get(l.targetId))===null||f===void 0?void 0:f.current;n.sharedClientState.updateQueryState(l.targetId,g?"current":"not-current")}if(u){s.push(u);const g=Zv.Wi(l.targetId,u);i.push(g)}}))}),await Promise.all(o),n.Ca.d_(s),await async function(l,u){const f=Et(l);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>Ce.forEach(u,y=>Ce.forEach(y.$i,m=>f.persistence.referenceDelegate.addReference(g,y.targetId,m)).next(()=>Ce.forEach(y.Ui,m=>f.persistence.referenceDelegate.removeReference(g,y.targetId,m)))))}catch(g){if(!If(g))throw g;Ke("LocalStore","Failed to update sequence numbers: "+g)}for(const g of u){const y=g.targetId;if(!g.fromCache){const m=f.os.get(y),E=m.snapshotVersion,b=m.withLastLimboFreeSnapshotVersion(E);f.os=f.os.insert(y,b)}}}(n.localStore,i))}async function DD(t,e){const r=Et(t);if(!r.currentUser.isEqual(e)){Ke("SyncEngine","User change. New user:",e.toKey());const n=await YA(r.localStore,e);r.currentUser=e,function(i,o){i.ka.forEach(a=>{a.forEach(l=>{l.reject(new Ue(Te.CANCELLED,o))})}),i.ka.clear()}(r,"'waitForPendingWrites' promise is rejected due to a user change."),r.sharedClientState.handleUserChange(e,n.removedBatchIds,n.addedBatchIds),await jf(r,n.hs)}}function MD(t,e){const r=Et(t),n=r.Na.get(e);if(n&&n.va)return Bt().add(n.key);{let s=Bt();const i=r.Ma.get(e);if(!i)return s;for(const o of i){const a=r.Fa.get(o);s=s.unionWith(a.view.Va)}return s}}function gS(t){const e=Et(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=dS.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=MD.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=jD.bind(null,e),e.Ca.d_=xD.bind(null,e.eventManager),e.Ca.$a=_D.bind(null,e.eventManager),e}function FD(t){const e=Et(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LD.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RD.bind(null,e),e}class Jm{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ug(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,r){return null}Ha(e,r){return null}za(e){return $O(this.persistence,new zO,e.initialUser,this.serializer)}Ga(e){return new UO(Jv.Zr,this.serializer)}Wa(e){return new XO}async terminate(){var e,r;(e=this.gcScheduler)===null||e===void 0||e.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Jm.provider={build:()=>new Jm};class i2{async initialize(e,r){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=n=>Q_(this.syncEngine,n,1),this.remoteStore.remoteSyncer.handleCredentialChange=DD.bind(null,this.syncEngine),await yD(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new wD}()}createDatastore(e){const r=Ug(e.databaseInfo.databaseId),n=function(i){return new tD(i)}(e.databaseInfo);return function(i,o,a,l){return new sD(i,o,a,l)}(e.authCredentials,e.appCheckCredentials,n,r)}createRemoteStore(e){return function(n,s,i,o,a){return new oD(n,s,i,o,a)}(this.localStore,this.datastore,e.asyncQueue,r=>Q_(this.syncEngine,r,0),function(){return $_.D()?new $_:new JO}())}createSyncEngine(e,r){return function(s,i,o,a,l,u,f){const g=new AD(s,i,o,a,l,u);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,r)}async terminate(){var e,r;await async function(s){const i=Et(s);Ke("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await Cf(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()}}i2.provider={build:()=>new i2};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):Sa("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,r){setTimeout(()=>{this.muted||e(r)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UD{constructor(e,r,n,s,i){this.authCredentials=e,this.appCheckCredentials=r,this.asyncQueue=n,this.databaseInfo=s,this.user=os.UNAUTHENTICATED,this.clientId=yA.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async o=>{Ke("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(n,o=>(Ke("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new ya;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(r){const n=i5(r,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function c1(t,e){t.asyncQueue.verifyOperationInProgress(),Ke("FirestoreClient","Initializing OfflineComponentProvider");const r=t.configuration;await e.initialize(r);let n=r.initialUser;t.setCredentialChangeListener(async s=>{n.isEqual(s)||(await YA(e.localStore,s),n=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function X_(t,e){t.asyncQueue.verifyOperationInProgress();const r=await VD(t);Ke("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(r,t.configuration),t.setCredentialChangeListener(n=>H_(e.remoteStore,n)),t.setAppCheckTokenChangeListener((n,s)=>H_(e.remoteStore,s)),t._onlineComponents=e}async function VD(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Ke("FirestoreClient","Using user provided OfflineComponentProvider");try{await c1(t,t._uninitializedComponentsProvider._offline)}catch(e){const r=e;if(!function(s){return s.name==="FirebaseError"?s.code===Te.FAILED_PRECONDITION||s.code===Te.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(r))throw r;rh("Error using user provided cache. Falling back to memory cache: "+r),await c1(t,new Jm)}}else Ke("FirestoreClient","Using default OfflineComponentProvider"),await c1(t,new Jm);return t._offlineComponents}async function vS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Ke("FirestoreClient","Using user provided OnlineComponentProvider"),await X_(t,t._uninitializedComponentsProvider._online)):(Ke("FirestoreClient","Using default OnlineComponentProvider"),await X_(t,new i2))),t._onlineComponents}function BD(t){return vS(t).then(e=>e.syncEngine)}async function wS(t){const e=await vS(t),r=e.eventManager;return r.onListen=SD.bind(null,e.syncEngine),r.onUnlisten=kD.bind(null,e.syncEngine),r.onFirstRemoteStoreListen=TD.bind(null,e.syncEngine),r.onLastRemoteStoreUnlisten=PD.bind(null,e.syncEngine),r}function zD(t,e,r={}){const n=new ya;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const f=new yS({next:y=>{f.Za(),o.enqueueAndForget(()=>aS(i,g));const m=y.docs.has(a);!m&&y.fromCache?u.reject(new Ue(Te.UNAVAILABLE,"Failed to get document because the client is offline.")):m&&y.fromCache&&l&&l.source==="server"?u.reject(new Ue(Te.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new lS($v(a.path),f,{includeMetadataChanges:!0,_a:!0});return oS(i,g)}(await wS(t),t.asyncQueue,e,r,n)),n.promise}function qD(t,e,r={}){const n=new ya;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,a,l,u){const f=new yS({next:y=>{f.Za(),o.enqueueAndForget(()=>aS(i,g)),y.fromCache&&l.source==="server"?u.reject(new Ue(Te.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):u.resolve(y)},error:y=>u.reject(y)}),g=new lS(a,f,{includeMetadataChanges:!0,_a:!0});return oS(i,g)}(await wS(t),t.asyncQueue,e,r,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xS(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _S(t,e,r){if(!r)throw new Ue(Te.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $D(t,e,r,n){if(e===!0&&n===!0)throw new Ue(Te.INVALID_ARGUMENT,`${t} and ${r} cannot be used together.`)}function Z_(t){if(!nt.isDocumentKey(t))throw new Ue(Te.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function eb(t){if(nt.isDocumentKey(t))throw new Ue(Te.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(n){return n.constructor?n.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":wt()}function oo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ue(Te.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const r=zg(t);throw new Ue(Te.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${r}`)}}return t}function HD(t,e){if(e<=0)throw new Ue(Te.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tb{constructor(e){var r,n;if(e.host===void 0){if(e.ssl!==void 0)throw new Ue(Te.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(r=e.ssl)===null||r===void 0||r;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new Ue(Te.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$D("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=xS((n=e.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Ue(Te.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(n,s){return n.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qg{constructor(e,r,n,s){this._authCredentials=e,this._appCheckCredentials=r,this._databaseId=n,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new tb({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ue(Te.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ue(Te.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new tb(e),e.credentials!==void 0&&(this._authCredentials=function(n){if(!n)return new l7;switch(n.type){case"firstParty":return new d7(n.sessionIndex||"0",n.iamToken||null,n.authTokenFactory||null);case"provider":return n.client;default:throw new Ue(Te.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(r){const n=J_.get(r);n&&(Ke("ComponentProvider","Removing Datastore"),J_.delete(r),n.terminate())}(this),Promise.resolve()}}function WD(t,e,r,n={}){var s;const i=(t=oo(t,qg))._getSettings(),o=`${e}:${r}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&rh("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=os.MOCK_USER;else{a=NE(n.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const u=n.mockUserToken.sub||n.mockUserToken.user_id;if(!u)throw new Ue(Te.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new os(u)}t._authCredentials=new c7(new gA(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ja{constructor(e,r,n){this.converter=r,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new ja(this.firestore,e,this._query)}}class Ss{constructor(e,r,n){this.converter=r,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ss(this.firestore,e,this._key)}}class Sl extends ja{constructor(e,r,n){super(e,r,$v(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ss(this.firestore,null,new nt(e))}withConverter(e){return new Sl(this.firestore,e,this._path)}}function kn(t,e,...r){if(t=Cr(t),_S("collection","path",e),t instanceof qg){const n=xr.fromString(e,...r);return eb(n),new Sl(t,null,n)}{if(!(t instanceof Ss||t instanceof Sl))throw new Ue(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(xr.fromString(e,...r));return eb(n),new Sl(t.firestore,null,n)}}function Qt(t,e,...r){if(t=Cr(t),arguments.length===1&&(e=yA.newId()),_S("doc","path",e),t instanceof qg){const n=xr.fromString(e,...r);return Z_(n),new Ss(t,null,new nt(n))}{if(!(t instanceof Ss||t instanceof Sl))throw new Ue(Te.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=t._path.child(xr.fromString(e,...r));return Z_(n),new Ss(t.firestore,t instanceof Sl?t.converter:null,new nt(n))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new JA(this,"async_queue_retry"),this.Vu=()=>{const n=l1();n&&Ke("AsyncQueue","Visibility state changed to "+n.visibilityState),this.t_.jo()},this.mu=e;const r=l1();r&&typeof r.addEventListener=="function"&&r.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const r=l1();r&&typeof r.removeEventListener=="function"&&r.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const r=new ya;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(r.resolve,r.reject),r.promise)).then(()=>r.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!If(e))throw e;Ke("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const r=this.mu.then(()=>(this.du=!0,e().catch(n=>{this.Eu=n,this.du=!1;const s=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(n);throw Sa("INTERNAL UNHANDLED ERROR: ",s),n}).then(n=>(this.du=!1,n))));return this.mu=r,r}enqueueAfterDelay(e,r,n){this.fu(),this.Ru.indexOf(e)>-1&&(r=0);const s=s5.createAndSchedule(this,e,r,n,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&wt()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const r of this.Tu)if(r.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((r,n)=>r.targetTimeMs-n.targetTimeMs);for(const r of this.Tu)if(r.skipDelay(),e!=="all"&&r.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const r=this.Tu.indexOf(e);this.Tu.splice(r,1)}}class $c extends qg{constructor(e,r,n,s){super(e,r,n,s),this.type="firestore",this._queue=new rb,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new rb(e),this._firestoreClient=void 0,await e}}}function GD(t,e){const r=typeof t=="object"?t:Ig(),n=typeof t=="string"?t:"(default)",s=Uc(r,"firestore").getImmediate({identifier:n});if(!s._initialized){const i=xE("firestore");i&&WD(s,...i)}return s}function l5(t){if(t._terminated)throw new Ue(Te.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||KD(t),t._firestoreClient}function KD(t){var e,r,n;const s=t._freezeSettings(),i=function(a,l,u,f){return new A7(a,l,u,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,xS(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((r=s.localCache)===null||r===void 0)&&r._offlineComponentProvider&&(!((n=s.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new UD(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uh{constructor(e){this._byteString=e}static fromBase64String(e){try{return new uh(Wn.fromBase64String(e))}catch(r){throw new Ue(Te.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+r)}}static fromUint8Array(e){return new uh(Wn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(...e){for(let r=0;r<e.length;++r)if(e[r].length===0)throw new Ue(Te.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bn(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c5{constructor(e,r){if(!isFinite(e)||e<-90||e>90)throw new Ue(Te.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(r)||r<-180||r>180)throw new Ue(Te.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+r);this._lat=e,this._long=r}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Jt(this._lat,e._lat)||Jt(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u5{constructor(e){this._values=(e||[]).map(r=>r)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(n,s){if(n.length!==s.length)return!1;for(let i=0;i<n.length;++i)if(n[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=/^__.*__$/;class YD{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return this.fieldMask!==null?new zl(e,this.data,this.fieldMask,r,this.fieldTransforms):new kf(e,this.data,r,this.fieldTransforms)}}class bS{constructor(e,r,n){this.data=e,this.fieldMask=r,this.fieldTransforms=n}toMutation(e,r){return new zl(e,this.data,this.fieldMask,r,this.fieldTransforms)}}function NS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw wt()}}class Hg{constructor(e,r,n,s,i,o){this.settings=e,this.databaseId=r,this.serializer=n,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.Ou(e),s}Nu(e){var r;const n=(r=this.path)===null||r===void 0?void 0:r.child(e),s=this.Fu({path:n,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Zm(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(r=>e.isPrefixOf(r))!==void 0||this.fieldTransforms.find(r=>e.isPrefixOf(r.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(NS(this.Cu)&&QD.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class XD{constructor(e,r,n){this.databaseId=e,this.ignoreUndefinedProperties=r,this.serializer=n||Ug(e)}Qu(e,r,n,s=!1){return new Hg({Cu:e,methodName:r,qu:n,path:Bn.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rf(t){const e=t._freezeSettings(),r=Ug(t._databaseId);return new XD(t._databaseId,!!e.ignoreUndefinedProperties,r)}function ES(t,e,r,n,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,r,s);f5("Data must be an object, but it was:",o,n);const a=SS(n,o);let l,u;if(i.merge)l=new ci(o.fieldMask),u=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const y=o2(e,g,r);if(!o.contains(y))throw new Ue(Te.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);IS(f,y)||f.push(y)}l=new ci(f),u=o.fieldTransforms.filter(g=>l.covers(g.field))}else l=null,u=o.fieldTransforms;return new YD(new Ds(a),l,u)}class Wg extends Lf{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Wg}}function JD(t,e,r){return new Hg({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:r},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class h5 extends Lf{_toFieldTransform(e){return new MA(e.path,new lf)}isEqual(e){return e instanceof h5}}class d5 extends Lf{constructor(e,r){super(e),this.Ku=r}_toFieldTransform(e){const r=JD(this,e,!0),n=this.Ku.map(i=>Ah(i,r)),s=new ah(n);return new MA(e.path,s)}isEqual(e){return e instanceof d5&&Zd(this.Ku,e.Ku)}}function ZD(t,e,r,n){const s=t.Qu(1,e,r);f5("Data must be an object, but it was:",s,n);const i=[],o=Ds.empty();Bc(n,(l,u)=>{const f=p5(e,l,r);u=Cr(u);const g=s.Nu(f);if(u instanceof Wg)i.push(f);else{const y=Ah(u,g);y!=null&&(i.push(f),o.set(f,y))}});const a=new ci(i);return new bS(o,a,s.fieldTransforms)}function eM(t,e,r,n,s,i){const o=t.Qu(1,e,r),a=[o2(e,n,r)],l=[s];if(i.length%2!=0)throw new Ue(Te.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let y=0;y<i.length;y+=2)a.push(o2(e,i[y])),l.push(i[y+1]);const u=[],f=Ds.empty();for(let y=a.length-1;y>=0;--y)if(!IS(u,a[y])){const m=a[y];let E=l[y];E=Cr(E);const b=o.Nu(m);if(E instanceof Wg)u.push(m);else{const A=Ah(E,b);A!=null&&(u.push(m),f.set(m,A))}}const g=new ci(u);return new bS(f,g,o.fieldTransforms)}function AS(t,e,r,n=!1){return Ah(r,t.Qu(n?4:3,e))}function Ah(t,e){if(TS(t=Cr(t)))return f5("Unsupported field value:",e,t),SS(t,e);if(t instanceof Lf)return function(n,s){if(!NS(s.Cu))throw s.Bu(`${n._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${n._methodName}() is not currently supported inside arrays`);const i=n._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(n,s){const i=[];let o=0;for(const a of n){let l=Ah(a,s.Lu(o));l==null&&(l={nullValue:"NULL_VALUE"}),i.push(l),o++}return{arrayValue:{values:i}}}(t,e)}return function(n,s){if((n=Cr(n))===null)return{nullValue:"NULL_VALUE"};if(typeof n=="number")return G7(s.serializer,n);if(typeof n=="boolean")return{booleanValue:n};if(typeof n=="string")return{stringValue:n};if(n instanceof Date){const i=dn.fromDate(n);return{timestampValue:Ym(s.serializer,i)}}if(n instanceof dn){const i=new dn(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Ym(s.serializer,i)}}if(n instanceof c5)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof uh)return{bytesValue:qA(s.serializer,n._byteString)};if(n instanceof Ss){const i=s.databaseId,o=n.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Yv(n.firestore._databaseId||s.databaseId,n._key.path)}}if(n instanceof u5)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.Bu("VectorValues must only contain numeric values.");return Wv(a.serializer,l)})}}}}}}(n,s);throw s.Bu(`Unsupported field value: ${zg(n)}`)}(t,e)}function SS(t,e){const r={};return vA(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Bc(t,(n,s)=>{const i=Ah(s,e.Mu(n));i!=null&&(r[n]=i)}),{mapValue:{fields:r}}}function TS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof dn||t instanceof c5||t instanceof uh||t instanceof Ss||t instanceof Lf||t instanceof u5)}function f5(t,e,r){if(!TS(r)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(r)){const n=zg(r);throw n==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+n)}}function o2(t,e,r){if((e=Cr(e))instanceof $g)return e._internalPath;if(typeof e=="string")return p5(t,e);throw Zm("Field path arguments must be of type string or ",t,!1,void 0,r)}const tM=new RegExp("[~\\*/\\[\\]]");function p5(t,e,r){if(e.search(tM)>=0)throw Zm(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,r);try{return new $g(...e.split("."))._internalPath}catch{throw Zm(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,r)}}function Zm(t,e,r,n,s){const i=n&&!n.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;r&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(i||o)&&(l+=" (found",i&&(l+=` in field ${n}`),o&&(l+=` in document ${s}`),l+=")"),new Ue(Te.INVALID_ARGUMENT,a+t+l)}function IS(t,e){return t.some(r=>r.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,r,n,s,i){this._firestore=e,this._userDataWriter=r,this._key=n,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new Ss(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new rM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const r=this._document.data.field(Gg("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r)}}}class rM extends m5{data(){return super.data()}}function Gg(t,e){return typeof e=="string"?p5(t,e):e instanceof $g?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nM(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ue(Te.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class g5{}class Kg extends g5{}function va(t,e,...r){let n=[];e instanceof g5&&n.push(e),n=n.concat(r),function(i){const o=i.filter(l=>l instanceof y5).length,a=i.filter(l=>l instanceof Qg).length;if(o>1||o>0&&a>0)throw new Ue(Te.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const s of n)t=s._apply(t);return t}class Qg extends Kg{constructor(e,r,n){super(),this._field=e,this._op=r,this._value=n,this.type="where"}static _create(e,r,n){return new Qg(e,r,n)}_apply(e){const r=this._parse(e);return kS(e._query,r),new ja(e.firestore,e.converter,Xy(e._query,r))}_parse(e){const r=Rf(e.firestore);return function(i,o,a,l,u,f,g){let y;if(u.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new Ue(Te.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){sb(g,f);const m=[];for(const E of g)m.push(nb(l,i,E));y={arrayValue:{values:m}}}else y=nb(l,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||sb(g,f),y=AS(a,o,g,f==="in"||f==="not-in");return hn.create(u,f,y)}(e._query,"where",r,e.firestore._databaseId,this._field,this._op,this._value)}}function Es(t,e,r){const n=e,s=Gg("where",t);return Qg._create(s,n,r)}class y5 extends g5{constructor(e,r){super(),this.type=e,this._queryConstraints=r}static _create(e,r){return new y5(e,r)}_parse(e){const r=this._queryConstraints.map(n=>n._parse(e)).filter(n=>n.getFilters().length>0);return r.length===1?r[0]:io.create(r,this._getOperator())}_apply(e){const r=this._parse(e);return r.getFilters().length===0?e:(function(s,i){let o=s;const a=i.getFlattenedFilters();for(const l of a)kS(o,l),o=Xy(o,l)}(e._query,r),new ja(e.firestore,e.converter,Xy(e._query,r)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class v5 extends Kg{constructor(e,r){super(),this._field=e,this._direction=r,this.type="orderBy"}static _create(e,r){return new v5(e,r)}_apply(e){const r=function(s,i,o){if(s.startAt!==null)throw new Ue(Te.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new Ue(Te.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new af(i,o)}(e._query,this._field,this._direction);return new ja(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new zc(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,r))}}function Tl(t,e="asc"){const r=e,n=Gg("orderBy",t);return v5._create(n,r)}class w5 extends Kg{constructor(e,r,n){super(),this.type=e,this._limit=r,this._limitType=n}static _create(e,r,n){return new w5(e,r,n)}_apply(e){return new ja(e.firestore,e.converter,Km(e._query,this._limit,this._limitType))}}function sM(t){return HD("limit",t),w5._create("limit",t,"F")}class x5 extends Kg{constructor(e,r,n){super(),this.type=e,this._docOrFields=r,this._inclusive=n}static _create(e,r,n){return new x5(e,r,n)}_apply(e){const r=oM(e,this.type,this._docOrFields,this._inclusive);return new ja(e.firestore,e.converter,function(s,i){return new zc(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,r))}}function iM(...t){return x5._create("startAfter",t,!1)}function oM(t,e,r,n){if(r[0]=Cr(r[0]),r[0]instanceof m5)return function(i,o,a,l,u){if(!l)throw new Ue(Te.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const f=[];for(const g of Vu(i))if(g.field.isKeyField())f.push(Gm(o,l.key));else{const y=l.data.field(g.field);if(Lg(y))throw new Ue(Te.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(y===null){const m=g.field.canonicalString();throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${m}' (used as the orderBy) does not exist.`)}f.push(y)}return new oh(f,u)}(t._query,t.firestore._databaseId,e,r[0]._document,n);{const s=Rf(t.firestore);return function(o,a,l,u,f,g){const y=o.explicitOrderBy;if(f.length>y.length)throw new Ue(Te.INVALID_ARGUMENT,`Too many arguments provided to ${u}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const m=[];for(let E=0;E<f.length;E++){const b=f[E];if(y[E].field.isKeyField()){if(typeof b!="string")throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${u}(), but got a ${typeof b}`);if(!Hv(o)&&b.indexOf("/")!==-1)throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${u}() must be a plain document ID, but '${b}' contains a slash.`);const A=o.path.child(xr.fromString(b));if(!nt.isDocumentKey(A))throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${u}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const x=new nt(A);m.push(Gm(a,x))}else{const A=AS(l,u,b);m.push(A)}}return new oh(m,g)}(t._query,t.firestore._databaseId,s,e,r,n)}}function nb(t,e,r){if(typeof(r=Cr(r))=="string"){if(r==="")throw new Ue(Te.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Hv(e)&&r.indexOf("/")!==-1)throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${r}' contains a '/' character.`);const n=e.path.child(xr.fromString(r));if(!nt.isDocumentKey(n))throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return Gm(t,new nt(n))}if(r instanceof Ss)return Gm(t,r._key);throw new Ue(Te.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${zg(r)}.`)}function sb(t,e){if(!Array.isArray(t)||t.length===0)throw new Ue(Te.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function kS(t,e){const r=function(s,i){for(const o of s)for(const a of o.getFlattenedFilters())if(i.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(r!==null)throw r===e.op?new Ue(Te.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new Ue(Te.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${r.toString()}' filters.`)}class aM{convertValue(e,r="none"){switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return tn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,r);case 5:return e.stringValue;case 6:return this.convertBytes(kc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,r);case 11:return this.convertObject(e.mapValue,r);case 10:return this.convertVectorValue(e.mapValue);default:throw wt()}}convertObject(e,r){return this.convertObjectMap(e.fields,r)}convertObjectMap(e,r="none"){const n={};return Bc(e,(s,i)=>{n[s]=this.convertValue(i,r)}),n}convertVectorValue(e){var r,n,s;const i=(s=(n=(r=e.fields)===null||r===void 0?void 0:r.value.arrayValue)===null||n===void 0?void 0:n.values)===null||s===void 0?void 0:s.map(o=>tn(o.doubleValue));return new u5(i)}convertGeoPoint(e){return new c5(tn(e.latitude),tn(e.longitude))}convertArray(e,r){return(e.values||[]).map(n=>this.convertValue(n,r))}convertServerTimestamp(e,r){switch(r){case"previous":const n=Vv(e);return n==null?null:this.convertValue(n,r);case"estimate":return this.convertTimestamp(nf(e));default:return null}}convertTimestamp(e){const r=jl(e);return new dn(r.seconds,r.nanos)}convertDocumentKey(e,r){const n=xr.fromString(e);cr(QA(n));const s=new sf(n.get(1),n.get(3)),i=new nt(n.popFirst(5));return s.isEqual(r)||Sa(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${r.projectId}/${r.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PS(t,e,r){let n;return n=t?r&&(r.merge||r.mergeFields)?t.toFirestore(e,r):t.toFirestore(e):e,n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(e,r){this.hasPendingWrites=e,this.fromCache=r}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class CS extends m5{constructor(e,r,n,s,i,o){super(e,r,n,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const r=new rm(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(r,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,r={}){if(this._document){const n=this._document.data.field(Gg("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n,r.serverTimestamps)}}}class rm extends CS{data(e={}){return super.data(e)}}class lM{constructor(e,r,n,s){this._firestore=e,this._userDataWriter=r,this._snapshot=s,this.metadata=new gd(s.hasPendingWrites,s.fromCache),this.query=n}get docs(){const e=[];return this.forEach(r=>e.push(r)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,r){this._snapshot.docs.forEach(n=>{e.call(r,new rm(this._firestore,this._userDataWriter,n.key,n,new gd(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const r=!!e.includeMetadataChanges;if(r&&this._snapshot.excludesMetadataChanges)throw new Ue(Te.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===r||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(a=>{const l=new rm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new gd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(a=>i||a.type!==3).map(a=>{const l=new rm(s._firestore,s._userDataWriter,a.doc.key,a.doc,new gd(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,f=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),f=o.indexOf(a.doc.key)),{type:cM(a.type),doc:l,oldIndex:u,newIndex:f}})}}(this,r),this._cachedChangesIncludeMetadataChanges=r),this._cachedChanges}}function cM(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cs(t){t=oo(t,Ss);const e=oo(t.firestore,$c);return zD(l5(e),t._key).then(r=>uM(e,t,r))}class jS extends aM{constructor(e){super(),this.firestore=e}convertBytes(e){return new uh(e)}convertReference(e){const r=this.convertDocumentKey(e,this.firestore._databaseId);return new Ss(this.firestore,null,r)}}function Do(t){t=oo(t,ja);const e=oo(t.firestore,$c),r=l5(e),n=new jS(e);return nM(t._query),qD(r,t._query).then(s=>new lM(e,n,t,s))}function Il(t,e,r){t=oo(t,Ss);const n=oo(t.firestore,$c),s=PS(t.converter,e,r);return Yg(n,[ES(Rf(n),"setDoc",t._key,s,t.converter!==null,r).toMutation(t._key,Li.none())])}function qs(t,e,r,...n){t=oo(t,Ss);const s=oo(t.firestore,$c),i=Rf(s);let o;return o=typeof(e=Cr(e))=="string"||e instanceof $g?eM(i,"updateDoc",t._key,e,r,n):ZD(i,"updateDoc",t._key,e),Yg(s,[o.toMutation(t._key,Li.exists(!0))])}function LS(t){return Yg(oo(t.firestore,$c),[new Gv(t._key,Li.none())])}function Rl(t,e){const r=oo(t.firestore,$c),n=Qt(t),s=PS(t.converter,e);return Yg(r,[ES(Rf(t.firestore),"addDoc",n._key,s,t.converter!==null,{}).toMutation(n._key,Li.exists(!1))]).then(()=>n)}function Yg(t,e){return function(n,s){const i=new ya;return n.asyncQueue.enqueueAndForget(async()=>CD(await BD(n),s,i)),i.promise}(l5(t),e)}function uM(t,e,r){const n=r.docs.get(e._key),s=new jS(t);return new CS(t,s,e._key,n,new gd(r.hasPendingWrites,r.fromCache),e.converter)}function Rt(){return new h5("serverTimestamp")}function nm(...t){return new d5("arrayUnion",t)}(function(e,r=!0){(function(s){bh=s})(Vc),so(new Di("firestore",(n,{instanceIdentifier:s,options:i})=>{const o=n.getProvider("app").getImmediate(),a=new $c(new u7(n.getProvider("auth-internal")),new p7(n.getProvider("app-check-internal")),function(u,f){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Ue(Te.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new sf(u.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:r},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),zs(__,"4.7.3",e),zs(__,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS="firebasestorage.googleapis.com",hM="storageBucket",dM=2*60*1e3,fM=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo extends lo{constructor(e,r,n=0){super(u1(e),`Firebase Storage: ${r} (${u1(e)})`),this.status_=n,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Vo.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return u1(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Fo;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Fo||(Fo={}));function u1(t){return"storage/"+t}function pM(){const t="An unknown error occurred, please check the error payload for server response.";return new Vo(Fo.UNKNOWN,t)}function mM(){return new Vo(Fo.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function gM(){return new Vo(Fo.CANCELED,"User canceled the upload/download.")}function yM(t){return new Vo(Fo.INVALID_URL,"Invalid URL '"+t+"'.")}function vM(t){return new Vo(Fo.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function ib(t){return new Vo(Fo.INVALID_ARGUMENT,t)}function OS(){return new Vo(Fo.APP_DELETED,"The Firebase app was deleted.")}function wM(t){return new Vo(Fo.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(e,r){this.bucket=e,this.path_=r}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,r){let n;try{n=Ji.makeFromUrl(e,r)}catch{return new Ji(e,"")}if(n.path==="")return n;throw vM(e)}static makeFromUrl(e,r){let n=null;const s="([A-Za-z0-9.\\-_]+)";function i(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(k){k.path_=decodeURIComponent(k.path)}const f="v[A-Za-z0-9_]+",g=r.replace(/[.]/g,"\\."),y="(/([^?#]*).*)?$",m=new RegExp(`^https?://${g}/${f}/b/${s}/o${y}`,"i"),E={bucket:1,path:3},b=r===RS?"(?:storage.googleapis.com|storage.cloud.google.com)":r,A="([^?#]*)",x=new RegExp(`^https?://${b}/${s}/${A}`,"i"),I=[{regex:a,indices:l,postModify:i},{regex:m,indices:E,postModify:u},{regex:x,indices:{bucket:1,path:2},postModify:u}];for(let k=0;k<I.length;k++){const H=I[k],Z=H.regex.exec(e);if(Z){const F=Z[H.indices.bucket];let P=Z[H.indices.path];P||(P=""),n=new Ji(F,P),H.postModify(n);break}}if(n==null)throw yM(e);return n}}class xM{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _M(t,e,r){let n=1,s=null,i=null,o=!1,a=0;function l(){return a===2}let u=!1;function f(...A){u||(u=!0,e.apply(null,A))}function g(A){s=setTimeout(()=>{s=null,t(m,l())},A)}function y(){i&&clearTimeout(i)}function m(A,...x){if(u){y();return}if(A){y(),f.call(null,A,...x);return}if(l()||o){y(),f.call(null,A,...x);return}n<64&&(n*=2);let I;a===1?(a=2,I=0):I=(n+Math.random())*1e3,g(I)}let E=!1;function b(A){E||(E=!0,y(),!u&&(s!==null?(A||(a=2),clearTimeout(s),g(0)):A||(a=1)))}return g(0),i=setTimeout(()=>{o=!0,b(!0)},r),b}function bM(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(t){return t!==void 0}function ob(t,e,r,n){if(n<e)throw ib(`Invalid value for '${t}'. Expected ${e} or greater.`);if(n>r)throw ib(`Invalid value for '${t}'. Expected ${r} or less.`)}function EM(t){const e=encodeURIComponent;let r="?";for(const n in t)if(t.hasOwnProperty(n)){const s=e(n)+"="+e(t[n]);r=r+s+"&"}return r=r.slice(0,-1),r}var eg;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(eg||(eg={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(t,e){const r=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return r||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SM{constructor(e,r,n,s,i,o,a,l,u,f,g,y=!0){this.url_=e,this.method_=r,this.headers_=n,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=f,this.connectionFactory_=g,this.retry=y,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,E)=>{this.resolve_=m,this.reject_=E,this.start_()})}start_(){const e=(n,s)=>{if(s){n(!1,new Sp(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const a=i.getErrorCode()===eg.NO_ERROR,l=i.getStatus();if(!a||AM(l,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===eg.ABORT;n(!1,new Sp(!1,null,f));return}const u=this.successCodes_.indexOf(l)!==-1;n(!0,new Sp(u,i))})},r=(n,s)=>{const i=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());NM(l)?i(l):i()}catch(l){o(l)}else if(a!==null){const l=pM();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?OS():gM();o(l)}else{const l=mM();o(l)}};this.canceled_?r(!1,new Sp(!1,null,!0)):this.backoffId_=_M(e,r,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bM(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Sp{constructor(e,r,n){this.wasSuccessCode=e,this.connection=r,this.canceled=!!n}}function TM(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function IM(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function kM(t,e){e&&(t["X-Firebase-GMPID"]=e)}function PM(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function CM(t,e,r,n,s,i,o=!0){const a=EM(t.urlParams),l=t.url+a,u=Object.assign({},t.headers);return kM(u,e),TM(u,r),IM(u,i),PM(u,n),new SM(l,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jM(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function LM(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg{constructor(e,r){this._service=e,r instanceof Ji?this._location=r:this._location=Ji.makeFromUrl(r,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,r){return new tg(e,r)}get root(){const e=new Ji(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return LM(this._location.path)}get storage(){return this._service}get parent(){const e=jM(this._location.path);if(e===null)return null;const r=new Ji(this._location.bucket,e);return new tg(this._service,r)}_throwIfRoot(e){if(this._location.path==="")throw wM(e)}}function ab(t,e){const r=e==null?void 0:e[hM];return r==null?null:Ji.makeFromBucketSpec(r,t)}function RM(t,e,r,n={}){t.host=`${e}:${r}`,t._protocol="http";const{mockUserToken:s}=n;s&&(t._overrideAuthToken=typeof s=="string"?s:NE(s,t.app.options.projectId))}class OM{constructor(e,r,n,s,i){this.app=e,this._authProvider=r,this._appCheckProvider=n,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=RS,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=dM,this._maxUploadRetryTime=fM,this._requests=new Set,s!=null?this._bucket=Ji.makeFromBucketSpec(s,this._host):this._bucket=ab(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Ji.makeFromBucketSpec(this._url,e):this._bucket=ab(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){ob("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const r=await e.getToken();if(r!==null)return r.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new tg(this,e)}_makeRequest(e,r,n,s,i=!0){if(this._deleted)return new xM(OS());{const o=CM(e,this._appId,n,s,r,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,r){const[n,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,r,n,s).getPromise()}}const lb="@firebase/storage",cb="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DS="storage";function DM(t=Ig(),e){t=Cr(t);const n=Uc(t,DS).getImmediate({identifier:e}),s=xE("storage");return s&&MM(n,...s),n}function MM(t,e,r,n={}){RM(t,e,r,n)}function FM(t,{instanceIdentifier:e}){const r=t.getProvider("app").getImmediate(),n=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new OM(r,n,s,e,Vc)}function UM(){so(new Di(DS,FM,"PUBLIC").setMultipleInstances(!0)),zs(lb,cb,""),zs(lb,cb,"esm2017")}UM();const MS="@firebase/installations",_5="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FS=1e4,US=`w:${_5}`,VS="FIS_v2",VM="https://firebaseinstallations.googleapis.com/v1",BM=60*60*1e3,zM="installations",qM="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $M={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Cc=new Fc(zM,qM,$M);function BS(t){return t instanceof lo&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS({projectId:t}){return`${VM}/projects/${t}/installations`}function qS(t){return{token:t.token,requestStatus:2,expiresIn:WM(t.expiresIn),creationTime:Date.now()}}async function $S(t,e){const n=(await e.json()).error;return Cc.create("request-failed",{requestName:t,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})}function HS({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function HM(t,{refreshToken:e}){const r=HS(t);return r.append("Authorization",GM(e)),r}async function WS(t){const e=await t();return e.status>=500&&e.status<600?t():e}function WM(t){return Number(t.replace("s","000"))}function GM(t){return`${VS} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KM({appConfig:t,heartbeatServiceProvider:e},{fid:r}){const n=zS(t),s=HS(t),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={fid:r,authVersion:VS,appId:t.appId,sdkVersion:US},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await WS(()=>fetch(n,a));if(l.ok){const u=await l.json();return{fid:u.fid||r,registrationStatus:2,refreshToken:u.refreshToken,authToken:qS(u.authToken)}}else throw await $S("Create Installation",l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GS(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM=/^[cdef][\w-]{21}$/,a2="";function XM(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const r=JM(t);return YM.test(r)?r:a2}catch{return a2}}function JM(t){return QM(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xg(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KS=new Map;function QS(t,e){const r=Xg(t);YS(r,e),ZM(r,e)}function YS(t,e){const r=KS.get(t);if(r)for(const n of r)n(e)}function ZM(t,e){const r=e9();r&&r.postMessage({key:t,fid:e}),t9()}let gc=null;function e9(){return!gc&&"BroadcastChannel"in self&&(gc=new BroadcastChannel("[Firebase] FID Change"),gc.onmessage=t=>{YS(t.data.key,t.data.fid)}),gc}function t9(){KS.size===0&&gc&&(gc.close(),gc=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r9="firebase-installations-database",n9=1,jc="firebase-installations-store";let h1=null;function b5(){return h1||(h1=Tg(r9,n9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(jc)}}})),h1}async function rg(t,e){const r=Xg(t),s=(await b5()).transaction(jc,"readwrite"),i=s.objectStore(jc),o=await i.get(r);return await i.put(e,r),await s.done,(!o||o.fid!==e.fid)&&QS(t,e.fid),e}async function XS(t){const e=Xg(t),n=(await b5()).transaction(jc,"readwrite");await n.objectStore(jc).delete(e),await n.done}async function Jg(t,e){const r=Xg(t),s=(await b5()).transaction(jc,"readwrite"),i=s.objectStore(jc),o=await i.get(r),a=e(o);return a===void 0?await i.delete(r):await i.put(a,r),await s.done,a&&(!o||o.fid!==a.fid)&&QS(t,a.fid),a}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function N5(t){let e;const r=await Jg(t.appConfig,n=>{const s=s9(n),i=i9(t,s);return e=i.registrationPromise,i.installationEntry});return r.fid===a2?{installationEntry:await e}:{installationEntry:r,registrationPromise:e}}function s9(t){const e=t||{fid:XM(),registrationStatus:0};return JS(e)}function i9(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Cc.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},n=o9(t,r);return{installationEntry:r,registrationPromise:n}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:a9(t)}:{installationEntry:e}}async function o9(t,e){try{const r=await KM(t,e);return rg(t.appConfig,r)}catch(r){throw BS(r)&&r.customData.serverCode===409?await XS(t.appConfig):await rg(t.appConfig,{fid:e.fid,registrationStatus:0}),r}}async function a9(t){let e=await ub(t.appConfig);for(;e.registrationStatus===1;)await GS(100),e=await ub(t.appConfig);if(e.registrationStatus===0){const{installationEntry:r,registrationPromise:n}=await N5(t);return n||r}return e}function ub(t){return Jg(t,e=>{if(!e)throw Cc.create("installation-not-found");return JS(e)})}function JS(t){return l9(t)?{fid:t.fid,registrationStatus:0}:t}function l9(t){return t.registrationStatus===1&&t.registrationTime+FS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c9({appConfig:t,heartbeatServiceProvider:e},r){const n=u9(t,r),s=HM(t,r),i=e.getImmediate({optional:!0});if(i){const u=await i.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const o={installation:{sdkVersion:US,appId:t.appId}},a={method:"POST",headers:s,body:JSON.stringify(o)},l=await WS(()=>fetch(n,a));if(l.ok){const u=await l.json();return qS(u)}else throw await $S("Generate Auth Token",l)}function u9(t,{fid:e}){return`${zS(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E5(t,e=!1){let r;const n=await Jg(t.appConfig,i=>{if(!ZS(i))throw Cc.create("not-registered");const o=i.authToken;if(!e&&f9(o))return i;if(o.requestStatus===1)return r=h9(t,e),i;{if(!navigator.onLine)throw Cc.create("app-offline");const a=m9(i);return r=d9(t,a),a}});return r?await r:n.authToken}async function h9(t,e){let r=await hb(t.appConfig);for(;r.authToken.requestStatus===1;)await GS(100),r=await hb(t.appConfig);const n=r.authToken;return n.requestStatus===0?E5(t,e):n}function hb(t){return Jg(t,e=>{if(!ZS(e))throw Cc.create("not-registered");const r=e.authToken;return g9(r)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function d9(t,e){try{const r=await c9(t,e),n=Object.assign(Object.assign({},e),{authToken:r});return await rg(t.appConfig,n),r}catch(r){if(BS(r)&&(r.customData.serverCode===401||r.customData.serverCode===404))await XS(t.appConfig);else{const n=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rg(t.appConfig,n)}throw r}}function ZS(t){return t!==void 0&&t.registrationStatus===2}function f9(t){return t.requestStatus===2&&!p9(t)}function p9(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+BM}function m9(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function g9(t){return t.requestStatus===1&&t.requestTime+FS<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function y9(t){const e=t,{installationEntry:r,registrationPromise:n}=await N5(e);return n?n.catch(console.error):E5(e).catch(console.error),r.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function v9(t,e=!1){const r=t;return await w9(r),(await E5(r,e)).token}async function w9(t){const{registrationPromise:e}=await N5(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x9(t){if(!t||!t.options)throw d1("App Configuration");if(!t.name)throw d1("App Name");const e=["projectId","apiKey","appId"];for(const r of e)if(!t.options[r])throw d1(r);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function d1(t){return Cc.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e6="installations",_9="installations-internal",b9=t=>{const e=t.getProvider("app").getImmediate(),r=x9(e),n=Uc(e,"heartbeat");return{app:e,appConfig:r,heartbeatServiceProvider:n,_delete:()=>Promise.resolve()}},N9=t=>{const e=t.getProvider("app").getImmediate(),r=Uc(e,e6).getImmediate();return{getId:()=>y9(r),getToken:s=>v9(r,s)}};function E9(){so(new Di(e6,b9,"PUBLIC")),so(new Di(_9,N9,"PRIVATE"))}E9();zs(MS,_5);zs(MS,_5,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A9="/firebase-messaging-sw.js",S9="/firebase-cloud-messaging-push-scope",t6="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",T9="https://fcmregistrations.googleapis.com/v1",r6="google.c.a.c_id",I9="google.c.a.c_l",k9="google.c.a.ts",P9="google.c.a.e";var db;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(db||(db={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var uf;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(uf||(uf={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function C9(t){const e="=".repeat((4-t.length%4)%4),r=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),n=atob(r),s=new Uint8Array(n.length);for(let i=0;i<n.length;++i)s[i]=n.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f1="fcm_token_details_db",j9=5,fb="fcm_token_object_Store";async function L9(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(f1))return null;let e=null;return(await Tg(f1,j9,{upgrade:async(n,s,i,o)=>{var a;if(s<2||!n.objectStoreNames.contains(fb))return;const l=o.objectStore(fb),u=await l.index("fcmSenderId").get(t);if(await l.clear(),!!u){if(s===2){const f=u;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(a=f.createTime)!==null&&a!==void 0?a:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:ia(f.vapidKey)}}}else if(s===3){const f=u;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ia(f.auth),p256dh:ia(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ia(f.vapidKey)}}}else if(s===4){const f=u;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:ia(f.auth),p256dh:ia(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:ia(f.vapidKey)}}}}}})).close(),await t1(f1),await t1("fcm_vapid_details_db"),await t1("undefined"),R9(e)?e:null}function R9(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O9="firebase-messaging-database",D9=1,hf="firebase-messaging-store";let p1=null;function n6(){return p1||(p1=Tg(O9,D9,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(hf)}}})),p1}async function M9(t){const e=s6(t),n=await(await n6()).transaction(hf).objectStore(hf).get(e);if(n)return n;{const s=await L9(t.appConfig.senderId);if(s)return await A5(t,s),s}}async function A5(t,e){const r=s6(t),s=(await n6()).transaction(hf,"readwrite");return await s.objectStore(hf).put(e,r),await s.done,e}function s6({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F9={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},hs=new Fc("messaging","Messaging",F9);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U9(t,e){const r=await T5(t),n=i6(e),s={method:"POST",headers:r,body:JSON.stringify(n)};let i;try{i=await(await fetch(S5(t.appConfig),s)).json()}catch(o){throw hs.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw hs.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw hs.create("token-subscribe-no-token");return i.token}async function V9(t,e){const r=await T5(t),n=i6(e.subscriptionOptions),s={method:"PATCH",headers:r,body:JSON.stringify(n)};let i;try{i=await(await fetch(`${S5(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw hs.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw hs.create("token-update-failed",{errorInfo:o})}if(!i.token)throw hs.create("token-update-no-token");return i.token}async function B9(t,e){const n={method:"DELETE",headers:await T5(t)};try{const i=await(await fetch(`${S5(t.appConfig)}/${e}`,n)).json();if(i.error){const o=i.error.message;throw hs.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw hs.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function S5({projectId:t}){return`${T9}/projects/${t}/registrations`}async function T5({appConfig:t,installations:e}){const r=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${r}`})}function i6({p256dh:t,auth:e,endpoint:r,vapidKey:n}){const s={web:{endpoint:r,auth:e,p256dh:t}};return n!==t6&&(s.web.applicationPubKey=n),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z9=7*24*60*60*1e3;async function q9(t){const e=await H9(t.swRegistration,t.vapidKey),r={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:ia(e.getKey("auth")),p256dh:ia(e.getKey("p256dh"))},n=await M9(t.firebaseDependencies);if(n){if(W9(n.subscriptionOptions,r))return Date.now()>=n.createTime+z9?$9(t,{token:n.token,createTime:Date.now(),subscriptionOptions:r}):n.token;try{await B9(t.firebaseDependencies,n.token)}catch(s){console.warn(s)}return pb(t.firebaseDependencies,r)}else return pb(t.firebaseDependencies,r)}async function $9(t,e){try{const r=await V9(t.firebaseDependencies,e),n=Object.assign(Object.assign({},e),{token:r,createTime:Date.now()});return await A5(t.firebaseDependencies,n),r}catch(r){throw r}}async function pb(t,e){const n={token:await U9(t,e),createTime:Date.now(),subscriptionOptions:e};return await A5(t,n),n.token}async function H9(t,e){const r=await t.pushManager.getSubscription();return r||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:C9(e)})}function W9(t,e){const r=e.vapidKey===t.vapidKey,n=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return r&&n&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mb(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return G9(e,t),K9(e,t),Q9(e,t),e}function G9(t,e){if(!e.notification)return;t.notification={};const r=e.notification.title;r&&(t.notification.title=r);const n=e.notification.body;n&&(t.notification.body=n);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function K9(t,e){e.data&&(t.data=e.data)}function Q9(t,e){var r,n,s,i,o;if(!e.fcmOptions&&!(!((r=e.notification)===null||r===void 0)&&r.click_action))return;t.fcmOptions={};const a=(s=(n=e.fcmOptions)===null||n===void 0?void 0:n.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;a&&(t.fcmOptions.link=a);const l=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;l&&(t.fcmOptions.analyticsLabel=l)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y9(t){return typeof t=="object"&&!!t&&r6 in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X9(t){if(!t||!t.options)throw m1("App Configuration Object");if(!t.name)throw m1("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:r}=t;for(const n of e)if(!r[n])throw m1(n);return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}function m1(t){return hs.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J9{constructor(e,r,n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=X9(e);this.firebaseDependencies={app:e,appConfig:s,installations:r,analyticsProvider:n}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Z9(t){try{t.swRegistration=await navigator.serviceWorker.register(A9,{scope:S9}),t.swRegistration.update().catch(()=>{})}catch(e){throw hs.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eF(t,e){if(!e&&!t.swRegistration&&await Z9(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw hs.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tF(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=t6)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function o6(t,e){if(!navigator)throw hs.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw hs.create("permission-blocked");return await tF(t,e==null?void 0:e.vapidKey),await eF(t,e==null?void 0:e.serviceWorkerRegistration),q9(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rF(t,e,r){const n=nF(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(n,{message_id:r[r6],message_name:r[I9],message_time:r[k9],message_device_time:Math.floor(Date.now()/1e3)})}function nF(t){switch(t){case uf.NOTIFICATION_CLICKED:return"notification_open";case uf.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sF(t,e){const r=e.data;if(!r.isFirebaseMessaging)return;t.onMessageHandler&&r.messageType===uf.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(mb(r)):t.onMessageHandler.next(mb(r)));const n=r.data;Y9(n)&&n[P9]==="1"&&await rF(t,r.messageType,n)}const gb="@firebase/messaging",yb="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF=t=>{const e=new J9(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",r=>sF(e,r)),e},oF=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:n=>o6(e,n)}};function aF(){so(new Di("messaging",iF,"PUBLIC")),so(new Di("messaging-internal",oF,"PRIVATE")),zs(gb,yb),zs(gb,yb,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lF(){try{await AE()}catch{return!1}return typeof window<"u"&&EE()&&Tj()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cF(t,e){if(!navigator)throw hs.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uF(t=Ig()){return lF().then(e=>{if(!e)throw hs.create("unsupported-browser")},e=>{throw hs.create("indexed-db-unsupported")}),Uc(Cr(t),"messaging").getImmediate()}async function hF(t,e){return t=Cr(t),o6(t,e)}function dF(t,e){return t=Cr(t),cF(t,e)}aF();const lc={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:lc.apiKey?"Set":"Missing",authDomain:lc.authDomain?"Set":"Missing",projectId:lc.projectId?"Set":"Missing",storageBucket:lc.storageBucket?"Set":"Missing",messagingSenderId:lc.messagingSenderId?"Set":"Missing",appId:lc.appId?"Set":"Missing"});const I5=IE(lc),pu=s7(I5),mt=GD(I5);DM(I5);const a6=new la;a6.setCustomParameters({prompt:"select_account"});class fF{async register(e,r,n){try{const i=(await VR(pu,e,r)).user;return await qR(i,{displayName:n}),await Il(Qt(mt,"users",i.uid),{uid:i.uid,email:e,displayName:n,role:"student",purchasedCourses:[],createdAt:Rt(),lastLogin:Rt(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,r){try{const n=await BR(pu,e,r);return await qs(Qt(mt,"users",n.user.uid),{lastLogin:Rt()}),{success:!0,user:n.user}}catch(n){return console.error("Login error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async loginWithGoogle(){try{const r=(await f8(pu,a6)).user;return(await cs(Qt(mt,"users",r.uid))).exists()?await qs(Qt(mt,"users",r.uid),{lastLogin:Rt()}):await Il(Qt(mt,"users",r.uid),{uid:r.uid,email:r.email,displayName:r.displayName,photoURL:r.photoURL,role:"student",purchasedCourses:[],createdAt:Rt(),lastLogin:Rt(),progress:{}}),{success:!0,user:r}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await GR(pu),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await UR(pu,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(r){return console.error("Password reset error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async getUserData(e){try{const r=await cs(Qt(mt,"users",e));return r.exists()?{success:!0,data:r.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(r){return console.error("Get user data error:",r),{success:!1,error:r.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const sc=new fF,pF=void 0;class mF{constructor(){this.messaging=null}async initialize(){try{return this.messaging=uF(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const r=await hF(this.messaging,{vapidKey:pF});return r?(console.log(" FCM Token:",r),e&&await qs(Qt(mt,"users",e),{fcmTokens:nm(r),lastTokenUpdate:new Date}),r):(console.log(" Impossible de rcuprer le token"),null)}catch(r){return console.error(" Erreur rcupration token:",r),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const n=await this.getDeviceToken(e);return n?{success:!0,token:n}:{success:!1,error:"Impossible de rcuprer le token"}}catch(r){return console.error(" Erreur souscription:",r),{success:!1,error:r.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}dF(this.messaging,r=>{console.log(" Message reu (foreground):",r),r.notification&&new Notification(r.notification.title,{body:r.notification.body,icon:"/logo.png"}),e&&e(r)})}}const sm=new mF,l6=ne.createContext({}),ps=()=>{const t=ne.useContext(l6);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},gF=({children:t})=>{const[e,r]=ne.useState(null),[n,s]=ne.useState(null),[i,o]=ne.useState(!0),[a,l]=ne.useState(null),u=async I=>{try{const k=await sc.getUserData(I);if(k.success)return s(k.data),console.log("Loaded userProfile from Firestore:",k.data),k.data}catch(k){console.error("Error loading user profile:",k)}return null};ne.useEffect(()=>WR(pu,async k=>{if(r(k),console.log("Auth state changed - uid:",(k==null?void 0:k.uid)||null),k){const H=await u(k.uid);console.log("After loadUserProfile - userProfile:",H),(H==null?void 0:H.role)!=="admin"?(await sm.initialize(),(await sm.subscribeToNotifications(k.uid)).success&&console.log(" Notifications actives"),sm.onMessageReceived(F=>{console.log(" Nouvelle notification:",F)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(I,k,H)=>{l(null);const Z=await sc.register(I,k,H);return Z.success||l(Z.error),Z},g=async(I,k)=>{l(null);const H=await sc.login(I,k);return H.success||l(H.error),H},y=async()=>{l(null);const I=await sc.loginWithGoogle();return I.success||l(I.error),I},m=async()=>{l(null);const I=await sc.logout();return I.success||l(I.error),I},E=async I=>{l(null);const k=await sc.resetPassword(I);return k.success||l(k.error),k},b=async I=>{l(null);const k=await sc.updateUserProfile(I);return k.success?await u(e.uid):l(k.error),k},A=()=>(n==null?void 0:n.role)==="admin",T={currentUser:e,userProfile:n,loading:i,error:a,register:f,login:g,loginWithGoogle:y,logout:m,resetPassword:E,updateProfile:b,isAdmin:A,hasAccessToCourse:I=>{var k;return((k=n==null?void 0:n.purchasedCourses)==null?void 0:k.includes(I))||A()},setError:l};return c.jsx(l6.Provider,{value:T,children:!i&&t})};function iu({children:t,adminOnly:e=!1}){const{currentUser:r,userProfile:n,loading:s}=ps();return s?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!r,"userProfile:",n),r?e&&(n==null?void 0:n.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",n==null?void 0:n.role),c.jsx(Ry,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),c.jsx(Ry,{to:"/login",replace:!0})))}function yF(){const{currentUser:t}=ps(),[e,r]=ne.useState([]),[n,s]=ne.useState(!1),i=(a,l="info")=>{r(u=>[...u,{msg:a,type:l,time:new Date().toLocaleTimeString()}])},o=async()=>{if(!t){i(" User not logged in","error");return}s(!0),i(` Testing with User: ${t.uid}`);try{i(' Attempting to write to "debug_logs" collection...'),await Rl(kn(mt,"debug_logs"),{userId:t.uid,timestamp:new Date,message:"Test write from debug page"}),i(' Success: Wrote to "debug_logs"',"success"),i(' Attempting to write to "progress" collection...');const a=`${t.uid}_debug_test`,l=Qt(mt,"progress",a);await Il(l,{userId:t.uid,courseId:"debug_test",completedLessons:[],completedQuizzes:["test_quiz"],updatedAt:new Date,test:!0}),i(` Success: Wrote to "progress/${a}"`,"success"),i(" Attempting to read back...");const u=await cs(l);u.exists()?(i(" Success: Read document back","success"),i(` Data: ${JSON.stringify(u.data())}`)):i(" Error: Document not found after write","error")}catch(a){console.error(a),i(` ERROR: ${a.message}`,"error"),a.code&&i(`Code: ${a.code}`,"error")}finally{s(!1)}};return c.jsxs("div",{className:"p-8 max-w-2xl mx-auto",children:[c.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Debug Firestore Writes"}),c.jsxs("div",{className:"mb-6 p-4 bg-gray-100 rounded",children:[c.jsxs("p",{children:[c.jsx("strong",{children:"UID:"})," ",(t==null?void 0:t.uid)||"Not user"]}),c.jsxs("p",{children:[c.jsx("strong",{children:"Email:"})," ",t==null?void 0:t.email]})]}),c.jsx("button",{onClick:o,disabled:n||!t,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 disabled:opacity-50",children:n?"Testing...":"Test Firestore Write"}),c.jsx("div",{className:"mt-8 space-y-2",children:e.map((a,l)=>c.jsxs("div",{className:`p-2 rounded text-sm font-mono ${a.type==="error"?"bg-red-100 text-red-800":a.type==="success"?"bg-green-100 text-green-800":"bg-gray-50 text-gray-800"}`,children:[c.jsxs("span",{className:"text-gray-400 mr-2",children:["[",a.time,"]"]}),a.msg]},l))})]})}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var vF={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wF=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),dt=(t,e)=>{const r=ne.forwardRef(({color:n="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:a="",children:l,...u},f)=>ne.createElement("svg",{ref:f,...vF,width:s,height:s,stroke:n,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${wF(t)}`,a].join(" "),...u},[...e.map(([g,y])=>ne.createElement(g,y)),...Array.isArray(l)?l:[l]]));return r.displayName=`${t}`,r};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const k5=dt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xF=dt("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hh=dt("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cd=dt("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P5=dt("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _F=dt("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bF=dt("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=dt("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zu=dt("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NF=dt("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EF=dt("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const us=dt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const im=dt("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C5=dt("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vb=dt("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c6=dt("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AF=dt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dh=dt("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qu=dt("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SF=dt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TF=dt("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IF=dt("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kF=dt("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PF=dt("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CF=dt("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jF=dt("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LF=dt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zg=dt("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fh=dt("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RF=dt("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const df=dt("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OF=dt("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DF=dt("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l2=dt("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ng=dt("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c2=dt("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wa=dt("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MF=dt("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Of=dt("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u6=dt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FF=dt("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const h6=dt("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j5=dt("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u2=dt("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ff=dt("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=dt("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d6=dt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L5=dt("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e0=dt("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xb=dt("Video",[["path",{d:"m22 8-6 4 6 4V8Z",key:"50v9me"}],["rect",{width:"14",height:"12",x:"2",y:"6",rx:"2",ry:"2",key:"1rqjg6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f6=dt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ph=dt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function UF(){var b,A;const[t,e]=ne.useState({email:"",password:""}),[r,n]=ne.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:a,userProfile:l}=ps(),u=$s(),g=((A=(b=Mc().state)==null?void 0:b.from)==null?void 0:A.pathname)||"/",y=async x=>{x.preventDefault(),n(!0);const T=await s(t.email,t.password);T.success&&setTimeout(()=>{if(T.user){const I=setInterval(()=>{l&&(clearInterval(I),l.role==="admin"?u("/admin",{replace:!0}):u(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(I),u(g,{replace:!0})},3e3)}else u(g,{replace:!0})},500),n(!1)},m=async()=>{n(!0);const x=await i();x.success&&setTimeout(()=>{if(x.user){const T=setInterval(()=>{l&&(clearInterval(T),l.role==="admin"?u("/admin",{replace:!0}):u(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(T),u(g,{replace:!0})},3e3)}else u(g,{replace:!0})},500),n(!1)},E=x=>{e({...t,[x.target.name]:x.target.value}),o&&a(null)};return c.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[c.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),c.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),c.jsxs("div",{className:"relative w-full max-w-md",children:[c.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(gr,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:c.jsx(zn,{className:"w-8 h-8 text-white"})})}),c.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),c.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[c.jsx(j5,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&c.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[c.jsx(k5,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-red-700 text-sm",children:o})]}),c.jsxs("button",{onClick:m,disabled:r,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[c.jsx(c6,{className:"w-5 h-5 group-hover:rotate-12 transition"}),c.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),c.jsxs("form",{onSubmit:y,className:"space-y-5",children:[c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),c.jsxs("div",{className:"relative",children:[c.jsx(df,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),c.jsx("input",{type:"email",name:"email",value:t.email,onChange:E,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),c.jsxs("div",{className:"group",children:[c.jsxs("div",{className:"flex justify-between items-center mb-2",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),c.jsx(gr,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),c.jsxs("div",{className:"relative",children:[c.jsx(fh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),c.jsx("input",{type:"password",name:"password",value:t.password,onChange:E,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),c.jsx("button",{type:"submit",disabled:r,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:r?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),c.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",c.jsx(gr,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function VF(){const[t,e]=ne.useState({displayName:"",email:"",password:"",confirmPassword:""}),[r,n]=ne.useState({}),[s,i]=ne.useState(!1),{register:o,loginWithGoogle:a}=ps(),l=$s(),u=()=>{const b={};return t.displayName.trim()||(b.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(b.email="Email invalide"):b.email="L'email est requis",t.password?t.password.length<6&&(b.password="Minimum 6 caractres"):b.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(b.confirmPassword="Les mots de passe ne correspondent pas"),n(b),Object.keys(b).length===0},f=async b=>{if(b.preventDefault(),!u())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&l("/"),i(!1)},g=async()=>{i(!0),(await a()).success&&l("/"),i(!1)},y=b=>{e({...t,[b.target.name]:b.target.value}),r[b.target.name]&&n({...r,[b.target.name]:""})},E=(()=>{const b=t.password;if(!b)return{strength:0,label:"",color:""};let A=0;return b.length>=6&&A++,b.length>=8&&A++,/[a-z]/.test(b)&&/[A-Z]/.test(b)&&A++,/\d/.test(b)&&A++,/[^a-zA-Z\d]/.test(b)&&A++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][A-1]||{strength:0,label:"",color:""}})();return c.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[c.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[c.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),c.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),c.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),c.jsxs("div",{className:"relative w-full max-w-md",children:[c.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[c.jsxs("div",{className:"text-center mb-8",children:[c.jsx(gr,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:c.jsx(zn,{className:"w-8 h-8 text-white"})})}),c.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),c.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[c.jsx(j5,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),c.jsxs("button",{onClick:g,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[c.jsx(c6,{className:"w-5 h-5 group-hover:rotate-12 transition"}),c.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),c.jsxs("div",{className:"relative mb-6",children:[c.jsx("div",{className:"absolute inset-0 flex items-center",children:c.jsx("div",{className:"w-full border-t border-gray-300"})}),c.jsx("div",{className:"relative flex justify-center text-sm",children:c.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),c.jsxs("form",{onSubmit:f,className:"space-y-5",children:[c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),c.jsxs("div",{className:"relative",children:[c.jsx(L5,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),c.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:y,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${r.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),r.displayName&&c.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[c.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.displayName]})]}),c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),c.jsxs("div",{className:"relative",children:[c.jsx(df,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),c.jsx("input",{type:"email",name:"email",value:t.email,onChange:y,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${r.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),r.email&&c.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[c.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.email]})]}),c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),c.jsxs("div",{className:"relative",children:[c.jsx(fh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),c.jsx("input",{type:"password",name:"password",value:t.password,onChange:y,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${r.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!r.password&&c.jsx("div",{className:"mt-2",children:c.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[c.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:c.jsx("div",{className:`h-full transition-all duration-300 ${E.color}`,style:{width:`${E.strength/5*100}%`}})}),c.jsx("span",{className:"text-xs font-medium text-gray-600",children:E.label})]})}),r.password&&c.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[c.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.password]})]}),c.jsxs("div",{className:"group",children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),c.jsxs("div",{className:"relative",children:[c.jsx(fh,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),c.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:y,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${r.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&c.jsx(us,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),r.confirmPassword&&c.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[c.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),r.confirmPassword]})]}),c.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?c.jsxs("span",{className:"flex items-center justify-center gap-2",children:[c.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),c.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",c.jsx(gr,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),c.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function BF(){const[t,e]=ne.useState(""),[r,n]=ne.useState(!1),[s,i]=ne.useState(!1),[o,a]=ne.useState(""),{resetPassword:l}=ps(),u=async f=>{if(f.preventDefault(),a(""),!t.trim()){a("Veuillez entrer votre email");return}n(!0);const g=await l(t);g.success?i(!0):a(g.error),n(!1)};return s?c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[c.jsx(us,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),c.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",c.jsx("strong",{children:t})]}),c.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),c.jsxs(gr,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[c.jsx(hh,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[c.jsxs(gr,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[c.jsx(hh,{className:"w-4 h-4"}),"Retour"]}),c.jsxs("div",{className:"text-center mb-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&c.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:c.jsx("p",{className:"text-red-700 text-sm",children:o})}),c.jsxs("form",{onSubmit:u,className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),c.jsxs("div",{className:"relative",children:[c.jsx(df,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),c.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),c.jsx("button",{type:"submit",disabled:r,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:r?"Envoi en cours...":"Envoyer le lien"})]})]})})}const p6="/admin",zF="/dashboard";class qF{constructor(){this.cloudName="dbsemu1xo",this.uploadPreset="course_thumbnails",console.log(" Cloudinary Config:",{cloudName:this.cloudName,uploadPreset:this.uploadPreset}),this.cloudName||console.error(" VITE_CLOUDINARY_CLOUD_NAME is not set! Check your .env file")}async uploadImage(e,r="courses"){var n;try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.uploadPreset),s.append("folder",r);const i=await fetch(`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,{method:"POST",body:s});if(!i.ok){const a=await i.json();throw new Error(((n=a.error)==null?void 0:n.message)||"Upload failed")}const o=await i.json();return console.log(" Image uploaded to Cloudinary:",o.secure_url),{success:!0,url:o.secure_url,publicId:o.public_id}}catch(s){return console.error(" Cloudinary upload error:",s),{success:!1,error:s.message}}}async uploadVideo(e,r="courses/videos",n){try{if(!e.type.startsWith("video/"))throw new Error("File must be a video");const s=new FormData;s.append("file",e),s.append("upload_preset","course_videos"),s.append("folder",r),s.append("resource_type","video"),console.log(" Uploading video to Cloudinary...");const i=await new Promise((o,a)=>{const l=new XMLHttpRequest;l.upload.addEventListener("progress",u=>{if(u.lengthComputable&&n){const f=Math.round(u.loaded/u.total*100);n(f)}}),l.addEventListener("load",()=>{l.status===200?o(JSON.parse(l.responseText)):a(new Error(l.statusText))}),l.addEventListener("error",()=>a(new Error("Upload failed"))),l.open("POST",`https://api.cloudinary.com/v1_1/${this.cloudName}/video/upload`),l.send(s)});return console.log(" Video uploaded to Cloudinary:",i.secure_url),{success:!0,url:i.secure_url,publicId:i.public_id,duration:i.duration,format:i.format}}catch(s){return console.error(" Cloudinary video upload error:",s),{success:!1,error:s.message}}}async deleteImage(e){try{return console.log(" Image deletion not implemented (requires server-side)"),{success:!0}}catch(r){return console.error(" Cloudinary delete error:",r),{success:!1,error:r.message}}}getOptimizedUrl(e,r={}){const{width:n=800,height:s=600,quality:i="auto",format:o="auto"}=r;if(!e||!e.includes("cloudinary.com"))return e;const a=`w_${n},h_${s},c_fill,q_${i},f_${o}`;return e.replace("/upload/",`/upload/${a}/`)}}const m6=new qF;class $F{async createCourse(e,r){try{let n=null;r&&(n=await this.uploadThumbnail(r));const s={...e,thumbnail:n,enrolledCount:0,status:"draft",createdAt:Rt(),updatedAt:Rt()},i=await Rl(kn(mt,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(n){return console.error(" Erreur cration cours:",n),{success:!1,error:n.message}}}async updateCourse(e,r,n){try{const s=Qt(mt,"courses",e);let i={...r};return n&&(i.thumbnail=await this.uploadThumbnail(n)),i.updatedAt=Rt(),await qs(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const r=Qt(mt,"courses",e);return await qs(r,{status:"archived",archivedAt:Rt()}),console.log(" Cours archiv:",e),{success:!0}}catch(r){return console.error(" Erreur suppression cours:",r),{success:!1,error:r.message}}}async getCourseById(e){try{const r=Qt(mt,"courses",e),n=await cs(r);return n.exists()?{success:!0,course:{id:n.id,...n.data()}}:{success:!1,error:"Cours introuvable"}}catch(r){return console.error(" Erreur rcupration cours:",r),{success:!1,error:r.message}}}async getCourses(e={}){try{let r=kn(mt,"courses");const n=[];return e.category&&n.push(Es("category","==",e.category)),e.status?n.push(Es("status","==",e.status)):n.push(Es("status","!=","archived")),e.level&&n.push(Es("level","==",e.level)),n.push(Tl("createdAt","desc")),e.limit&&n.push(sM(e.limit)),e.startAfter&&n.push(iM(e.startAfter)),r=va(r,...n),{success:!0,courses:(await Do(r)).docs.map(o=>({id:o.id,...o.data()}))}}catch(r){return console.error(" Erreur rcupration cours:",r),{success:!1,error:r.message,courses:[]}}}async publishCourse(e){try{const r=Qt(mt,"courses",e);return await qs(r,{status:"published",publishedAt:Rt(),updatedAt:Rt()}),console.log(" Cours publi:",e),{success:!0}}catch(r){return console.error(" Erreur publication cours:",r),{success:!1,error:r.message}}}async uploadThumbnail(e){try{const r=await m6.uploadImage(e,"courses/thumbnails");if(!r.success)throw new Error(r.error||"Upload failed");return console.log(" Thumbnail uploaded:",r.url),r.url}catch(r){throw console.error(" Erreur upload thumbnail:",r),r}}async duplicateCourse(e){try{const{success:r,course:n}=await this.getCourseById(e);if(!r)return{success:!1,error:"Cours introuvable"};const s={...n,title:`${n.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(r){return console.error(" Erreur duplication cours:",r),{success:!1,error:r.message}}}}const Fs=new $F,HF=Object.freeze(Object.defineProperty({__proto__:null,default:Fs},Symbol.toStringTag,{value:"Module"}));function WF(){const{currentUser:t,userProfile:e}=ps(),r=$s(),[n,s]=ne.useState([]),[i,o]=ne.useState({totalCourses:0,totalStudents:0,totalHours:0}),[a,l]=ne.useState(!0);ne.useEffect(()=>{u()},[]);const u=async()=>{try{const y=await Fs.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});y.success&&(s(y.courses),o({totalCourses:y.total||y.courses.length,totalStudents:y.courses.reduce((m,E)=>m+(E.enrolledCount||0),0),totalHours:y.courses.reduce((m,E)=>m+(E.duration||0),0)}))}catch(y){console.error("Error loading home data:",y)}finally{l(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],g=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return c.jsxs("div",{className:"min-h-screen bg-white",children:[c.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs("div",{className:"flex justify-between items-center h-16",children:[c.jsxs(gr,{to:"/",className:"flex items-center space-x-2",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:c.jsx(zn,{className:"w-6 h-6 text-white"})}),c.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),c.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[c.jsx(gr,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),c.jsx(gr,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),c.jsx("div",{className:"flex items-center gap-3",children:t?c.jsxs(c.Fragment,{children:[c.jsx(gr,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),c.jsx(gr,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&c.jsx("button",{onClick:()=>r(p6),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):c.jsxs(c.Fragment,{children:[c.jsx(gr,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),c.jsx(gr,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),c.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[c.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:c.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[c.jsx(j5,{className:"w-4 h-4"}),c.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),c.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",c.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),c.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),c.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[c.jsxs(gr,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",c.jsx(Cd,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&c.jsxs(gr,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[c.jsx(c2,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),c.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),c.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),c.jsxs("div",{className:"relative hidden md:block",children:[c.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),c.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[c.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:c.jsx(c2,{className:"w-20 h-20 text-gray-400"})}),c.jsxs("div",{className:"mt-4 space-y-3",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),c.jsx("section",{className:"py-20 bg-gray-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),c.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),a?c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(y=>c.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[c.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),c.jsxs("div",{className:"p-6 space-y-3",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},y))}):n.length>0?c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:n.map(y=>c.jsxs(gr,{to:`/courses/${y.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[c.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[y.thumbnail?c.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):c.jsx("div",{className:"w-full h-full flex items-center justify-center",children:c.jsx(zn,{className:"w-16 h-16 text-gray-300"})}),c.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:y.price>0?`${y.price} DT`:"Gratuit"})]}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:y.category||"Gnral"}),c.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:y.level||"Dbutant"})]}),c.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:y.title}),c.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:y.shortDescription||y.description}),c.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(e0,{className:"w-4 h-4"}),c.jsxs("span",{children:[y.enrolledCount||0," tudiants"]})]}),y.duration&&c.jsxs("div",{className:"flex items-center gap-1",children:[c.jsx(dh,{className:"w-4 h-4"}),c.jsxs("span",{children:[y.duration,"h"]})]})]})]})]},y.id))}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx(zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),c.jsx("div",{className:"text-center mt-12",children:c.jsxs(gr,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",c.jsx(Cd,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),c.jsx("section",{className:"py-20 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(y=>c.jsxs(gr,{to:`/courses?category=${y.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[c.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${y.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:y.icon}),c.jsx("h3",{className:"font-semibold text-gray-900",children:y.name})]},y.name))})]})}),c.jsx("section",{className:"py-20 bg-gray-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),c.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),c.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),c.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),c.jsx("div",{className:"relative",children:c.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[c.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),c.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),c.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),c.jsx("section",{className:"py-20 bg-white",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"text-center mb-12",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),c.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),c.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:g.map((y,m)=>c.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[c.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(y.rating)].map((E,b)=>c.jsx(u2,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},b))}),c.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',y.quote,'"']}),c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("img",{src:y.photo,alt:y.name,className:"w-12 h-12 rounded-full"}),c.jsxs("div",{children:[c.jsx("div",{className:"font-semibold text-gray-900",children:y.name}),c.jsx("div",{className:"text-sm text-gray-600",children:y.role})]})]})]},m))})]})}),c.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:c.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[c.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),c.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),c.jsxs(gr,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",c.jsx(Cd,{className:"w-5 h-5"})]})]})}),c.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[c.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:c.jsx(zn,{className:"w-6 h-6 text-white"})}),c.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),c.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:c.jsx(gr,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),c.jsx("li",{children:c.jsx(gr,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),c.jsx("li",{children:c.jsx(gr,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),c.jsxs("div",{children:[c.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),c.jsxs("ul",{className:"space-y-2 text-sm",children:[c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),c.jsx("li",{children:c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),c.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[c.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),c.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),c.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),c.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function GF(){var C;const{currentUser:t,userProfile:e,logout:r}=ps(),n=$s(),[s,i]=ne.useState(!1),[o,a]=ne.useState("personal"),[l,u]=ne.useState(!1),[f,g]=ne.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[y,m]=ne.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[E,b]=ne.useState(null),[A,x]=ne.useState(!1),[T,I]=ne.useState(null),k=async()=>{i(!0),await r(),n("/login")},H=async()=>{try{I(null),await qs(Qt(mt,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),I({type:"success",text:"Profil mis  jour avec succs!"}),u(!1),setTimeout(()=>I(null),3e3)}catch(O){I({type:"error",text:"Erreur: "+O.message})}},Z=async()=>{if(!t)return;x(!0),b(null);const O=await sm.subscribeToNotifications(t.uid);O.success?(m("enabled"),b({type:"success",text:"Notifications actives"})):b({type:"error",text:O.error||"Impossible d'activer"}),x(!1),setTimeout(()=>b(null),3e3)},F=[{id:"personal",name:"Informations",icon:AF},{id:"security",name:"Scurit",icon:fh},{id:"progress",name:"Progression",icon:wb}],P=[{label:"Cours suivis",value:((C=e==null?void 0:e.purchasedCourses)==null?void 0:C.length)||0,icon:zn,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:dh,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:P5,color:"text-purple-600 bg-purple-100"}];return c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:c.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[c.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[c.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),c.jsx("div",{className:"px-8 pb-8",children:c.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[c.jsxs("div",{className:"relative group",children:[c.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?c.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):c.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:c.jsx(L5,{className:"w-16 h-16 text-white"})})}),c.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:c.jsx(EF,{className:"w-5 h-5 text-gray-600"})})]}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),c.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),c.jsxs("div",{className:"flex flex-wrap gap-2",children:[c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[c.jsx(h6,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),c.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[c.jsx(df,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),c.jsxs("button",{onClick:k,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[c.jsx(RF,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:P.map((O,N)=>c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[c.jsx("div",{className:"flex items-center justify-between mb-4",children:c.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${O.color}`,children:c.jsx(O.icon,{className:"w-6 h-6"})})}),c.jsx("p",{className:"text-gray-600 text-sm mb-1",children:O.label}),c.jsx("p",{className:"text-3xl font-bold text-gray-900",children:O.value})]},N))}),c.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[c.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:c.jsx("nav",{className:"flex gap-8",children:F.map(O=>{const N=O.icon;return c.jsxs("button",{onClick:()=>a(O.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===O.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[c.jsx(N,{className:"w-5 h-5"}),O.name]},O.id)})})}),c.jsxs("div",{className:"p-8",children:[o==="personal"&&c.jsxs("div",{className:"space-y-6",children:[T&&c.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${T.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[c.jsx("div",{className:`w-2 h-2 rounded-full ${T.type==="success"?"bg-green-500":"bg-red-500"}`}),T.text]}),c.jsxs("div",{className:"flex justify-between items-center mb-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),l?c.jsxs("div",{className:"flex gap-2",children:[c.jsxs("button",{onClick:H,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[c.jsx(Of,{className:"w-4 h-4"}),"Enregistrer"]}),c.jsxs("button",{onClick:()=>u(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[c.jsx(ph,{className:"w-4 h-4"}),"Annuler"]})]}):c.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[c.jsx(l2,{className:"w-4 h-4"}),"Modifier"]})]}),c.jsxs("div",{className:"grid gap-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),l?c.jsx("input",{type:"text",value:f.displayName,onChange:O=>g({...f,displayName:O.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):c.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),c.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[c.jsx(df,{className:"w-5 h-5 text-gray-400"}),c.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),c.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),l?c.jsx("input",{type:"tel",value:f.phone,onChange:O=>g({...f,phone:O.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):c.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),l?c.jsx("textarea",{value:f.bio,onChange:O=>g({...f,bio:O.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):c.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),c.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:c.jsx(bF,{className:"w-6 h-6 text-white"})}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),c.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),c.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",c.jsx("span",{className:y==="enabled"?"text-green-600":"text-gray-500",children:y==="enabled"?"Actives ":"Dsactives"})]}),E&&c.jsx("p",{className:`text-sm mt-2 ${E.type==="success"?"text-green-600":"text-red-600"}`,children:E.text})]})]}),c.jsx("button",{onClick:Z,disabled:A||y==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:y==="enabled"?"Actives":A?"Activation...":"Activer"})]})}),c.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:c.jsx(fh,{className:"w-6 h-6 text-gray-600"})}),c.jsxs("div",{className:"flex-1",children:[c.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),c.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),c.jsxs("div",{className:"text-center py-12",children:[c.jsx(wb,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),c.jsxs("button",{onClick:()=>n("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[c.jsx(zn,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const KF="https://sandbox.paymee.tn/api/v2",QF="73af59aae675d845db28616e3e9304f2473d7090",YF="https://plateforme-educative.onrender.com";function XF(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),r=new Set(["1","true","yes","paid","success","ok","completed"]),n=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return r.has(e)?"completed":n.has(e)?"pending":s.has(e)?"failed":"unknown"}const JF=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class ZF{async initiatePayment(e,r,n,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:r,amount:n});let a;try{a=JF()}catch(b){return console.error(" HTTPS check failed:",b.message),{success:!1,error:b.message}}const l=await Rl(kn(mt,"payments"),{userId:s.uid,courseId:e,courseTitle:r,amount:n,currency:"TND",status:"pending",createdAt:Rt(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",l.id);const u=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let g=s.phone||"12345678";g=g.replace(/\D/g,""),g.length!==8&&(g="12345678");const y={amount:parseFloat(n),note:`Cours ${r}`,first_name:u,last_name:f,email:s.email,phone:g,return_url:`${a}/payment/success?payment_id=${l.id}`,cancel_url:`${a}/payment/cancel?payment_id=${l.id}`,webhook_url:`${YF}/paymee-webhook`,order_id:l.id};console.log(" Sending to Paymee:",y);const m=await fetch(`${KF}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${QF}`},body:JSON.stringify(y)});console.log(" Response status:",m.status);const E=await m.json();if(console.log(" Paymee response:",E),!E.status){if(console.error(" Paymee error:",E),E.errors&&Array.isArray(E.errors)){const b=E.errors.map(A=>typeof A=="object"?Object.entries(A).map(([x,T])=>`${x}: ${T}`).join(", "):A).join(" | ");throw new Error(`Erreur Paymee: ${b}`)}throw new Error(E.message||"Erreur initialisation paiement")}return await qs(Qt(mt,"payments",l.id),{paymeeToken:E.data.token,paymentUrl:E.data.payment_url,updatedAt:Rt()}),console.log(" Payment ready:",E.data.payment_url),{success:!0,paymentId:l.id,paymentUrl:E.data.payment_url,token:E.data.token}}catch(a){return console.error(" Payment error:",a),{success:!1,error:a.message}}}async verifyPayment(e){try{const r=await cs(Qt(mt,"payments",e));if(!r.exists())return{success:!1,error:"Paiement introuvable"};const n=r.data();return{success:!0,status:XF(n.status),rawStatus:n.status,data:n}}catch(r){return console.error("Verification error:",r),{success:!1,error:r.message}}}}const g6=new ZF;function y6({course:t}){var l;const{currentUser:e,userProfile:r}=ps(),[n,s]=ne.useState(!1),[i,o]=ne.useState(null),a=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=r==null?void 0:r.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const u=await g6.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(r==null?void 0:r.displayName)||e.displayName,phone:(r==null?void 0:r.phone)||"00000000"});u.success?window.location.href=u.paymentUrl:(o(u.error),s(!1))};return(l=r==null?void 0:r.purchasedCourses)!=null&&l.includes(t.id)?c.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?c.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):c.jsxs("div",{children:[i&&c.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),c.jsx("button",{onClick:a,disabled:n,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:n?c.jsxs(c.Fragment,{children:[c.jsx(Zg,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):c.jsxs(c.Fragment,{children:[c.jsx(TF,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),c.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function eU(){const[t,e]=ne.useState([]),[r,n]=ne.useState(!0);ne.useEffect(()=>{s()},[]);const s=async()=>{n(!0);const i=await Fs.getCourses({status:"published"});i.success&&e(i.courses),n(!1)};return r?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?c.jsxs("div",{className:"col-span-full text-center py-12",children:[c.jsx(zn,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun cours disponible"}),c.jsx("p",{className:"text-gray-600",children:"Revenez bientt pour dcouvrir de nouveaux cours!"})]}):t.map(i=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[c.jsx("img",{src:i.thumbnail||"/assets/images/default-course.png",alt:i.title,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-100 px-2 py-1 rounded",children:i.category||"General"}),i.price===0&&c.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),c.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),c.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[c.jsx(e0,{className:"w-4 h-4 mr-1"}),c.jsxs("span",{children:[i.enrolledCount||0," tudiants"]})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("span",{className:"text-sm text-gray-600",children:"By Admin"}),c.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.price===0?"Gratuit":`${i.price} TND`})]}),c.jsx(y6,{course:i}),c.jsx(gr,{to:`/course/${i.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition font-medium",children:"Voir les dtails"})]})]})]},i.id))})})]})}function tU(){var u;const{id:t}=Ev(),e=$s(),{userProfile:r}=ps(),[n,s]=ne.useState(null),[i,o]=ne.useState(!0);ne.useEffect(()=>{a()},[t]);const a=async()=>{try{const f=await cs(Qt(mt,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},l=((u=r==null?void 0:r.purchasedCourses)==null?void 0:u.includes(t))||(n==null?void 0:n.isFree)||(r==null?void 0:r.role)==="admin";return i?c.jsx("div",{className:"min-h-screen flex items-center justify-center",children:c.jsx(Zg,{className:"w-8 h-8 animate-spin text-green-500"})}):n?c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:c.jsxs(gr,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[c.jsx(hh,{className:"w-5 h-5"}),"Retour aux cours"]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[c.jsxs("div",{className:"lg:col-span-2",children:[c.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:c.jsx("img",{src:n.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:n.title,className:"w-full h-64 object-cover"})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:n.category}),c.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:n.level}),l&&c.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:n.title}),c.jsx("p",{className:"text-gray-600 text-lg mb-6",children:n.description}),c.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(dh,{className:"w-5 h-5"}),c.jsx("span",{children:n.duration})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(zn,{className:"w-5 h-5"}),c.jsxs("span",{children:[n.totalLessons," leons"]})]}),c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(e0,{className:"w-5 h-5"}),c.jsxs("span",{children:[n.enrolledCount," tudiants"]})]}),n.rating>0&&c.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[c.jsx(u2,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),c.jsx("span",{children:n.rating.toFixed(1)})]})]}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),c.jsxs("ul",{className:"space-y-3",children:[c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),c.jsxs("li",{className:"flex items-start gap-3",children:[c.jsx(us,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),c.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),c.jsx("div",{className:"lg:col-span-1",children:c.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[c.jsxs("div",{className:"text-center mb-6",children:[c.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:n.isFree?"Gratuit":`${n.price} TND`}),!n.isFree&&c.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),l?c.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[c.jsx(ng,{className:"w-5 h-5"}),"Commencer le cours"]}):c.jsx("div",{className:"mb-4",children:c.jsx(y6,{course:n})}),c.jsxs("div",{className:"border-t pt-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),c.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(ng,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{children:"Vidos  la demande"})]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(zn,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{children:"Ressources tlchargeables"})]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(us,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{children:"Accs illimit"})]}),c.jsxs("li",{className:"flex items-center gap-3",children:[c.jsx(u2,{className:"w-4 h-4 text-green-500"}),c.jsx("span",{children:"Certificat de russite"})]})]})]}),n.instructor&&c.jsxs("div",{className:"border-t pt-6 mt-6",children:[c.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),c.jsx("p",{className:"text-gray-600",children:n.instructor})]})]})})]})})]}):null}class rU{async createModule(e,r){try{const n={courseId:e,...r,order:r.order||0,createdAt:Rt()};return{success:!0,id:(await Rl(kn(mt,"modules"),n)).id}}catch(n){return console.error("Error creating module:",n),{success:!1,error:n.message}}}async createLesson(e,r){try{const n={moduleId:e,...r,order:r.order||0,createdAt:Rt()};return{success:!0,id:(await Rl(kn(mt,"lessons"),n)).id}}catch(n){return console.error("Error creating lesson:",n),{success:!1,error:n.message}}}async getModulesByCourse(e){try{const r=va(kn(mt,"modules"),Es("courseId","==",e),Tl("order","asc"));return{success:!0,modules:(await Do(r)).docs.map(i=>({id:i.id,...i.data()}))}}catch(r){return console.error("Error fetching modules:",r),{success:!1,error:r.message,modules:[]}}}async getLessonsByModule(e){try{const r=va(kn(mt,"lessons"),Es("moduleId","==",e),Tl("order","asc"));return{success:!0,lessons:(await Do(r)).docs.map(i=>({id:i.id,...i.data()}))}}catch(r){return console.error("Error fetching lessons:",r),{success:!1,error:r.message,lessons:[]}}}async getLessonById(e){try{const r=Qt(mt,"lessons",e),n=await cs(r);return n.exists()?{success:!0,lesson:{id:n.id,...n.data()}}:{success:!1,error:"Leon introuvable"}}catch(r){return console.error("Error fetching lesson:",r),{success:!1,error:r.message}}}}const sg=new rU;class nU{async markLessonComplete(e,r,n){try{const s=Qt(mt,"progress",`${e}_${r}`);return(await cs(s)).exists()?await qs(s,{completedLessons:nm(n),lastAccessed:Rt(),updatedAt:Rt()}):await Il(s,{userId:e,courseId:r,completedLessons:[n],startedAt:Rt(),lastAccessed:Rt(),updatedAt:Rt()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,r){try{const n=Qt(mt,"progress",`${e}_${r}`),s=await cs(n);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(n){return console.error("Error fetching progress:",n),{success:!1,error:n.message}}}calculateProgressPercentage(e,r){return r===0?0:Math.round(e/r*100)}async markQuizCompleted(e,r,n,s){try{const i=Qt(mt,"progress",`${e}_${r}`),o=await cs(i),a=o.exists()?o.data().quizScores||{}:{};return(!a[n]||s>a[n])&&(a[n]=s),o.exists()?await qs(i,{completedQuizzes:nm(n),quizScores:a,lastAccessed:Rt(),updatedAt:Rt()}):await Il(i,{userId:e,courseId:r,completedLessons:[],completedQuizzes:[n],completedExercises:[],quizScores:a,startedAt:Rt(),lastAccessed:Rt(),updatedAt:Rt()}),console.log(" Quiz marked complete:",{quizId:n,score:s}),{success:!0}}catch(i){return console.error(" Error marking quiz complete:",i),{success:!1,error:i.message}}}async markExerciseCompleted(e,r,n){try{const s=Qt(mt,"progress",`${e}_${r}`);return(await cs(s)).exists()?await qs(s,{completedExercises:nm(n),lastAccessed:Rt(),updatedAt:Rt()}):await Il(s,{userId:e,courseId:r,completedLessons:[],completedQuizzes:[],completedExercises:[n],quizScores:{},startedAt:Rt(),lastAccessed:Rt(),updatedAt:Rt()}),console.log(" Exercise marked complete:",n),{success:!0}}catch(s){return console.error(" Error marking exercise complete:",s),{success:!1,error:s.message}}}isLessonCompleted(e,r=[]){return r.includes(e)}async getUserProgress(e,r){return this.getCourseProgress(e,r)}}const Zi=new nU;class sU{async createQuiz(e){try{const r={...e,createdAt:Rt(),updatedAt:Rt()},n=await Rl(kn(mt,"quizzes"),r);return console.log(" Quiz created:",n.id),{success:!0,id:n.id}}catch(r){return console.error(" Error creating quiz:",r),{success:!1,error:r.message}}}async getQuizzesByCourse(e){try{const r=va(kn(mt,"quizzes"),Es("courseId","==",e),Tl("order","asc"));return{success:!0,quizzes:(await Do(r)).docs.map(i=>({id:i.id,...i.data()}))}}catch(r){return console.error(" Error fetching quizzes:",r),{success:!1,error:r.message,quizzes:[]}}}async submitQuizAnswers(e,r,n,s){try{const i=await cs(Qt(mt,"quizzes",r));if(!i.exists())return{success:!1,error:"Quiz not found"};const o=i.data();let a=0;const l=o.questions.map((y,m)=>{const E=s[m],b=E===y.correctAnswer;return b&&a++,{questionId:y.id||m,question:y.question,userAnswer:E,correctAnswer:y.correctAnswer,isCorrect:b,explanation:y.explanation}}),u=Math.round(a/o.questions.length*100),f={userId:e,quizId:r,courseId:n,answers:s,results:l,score:u,correctCount:a,totalQuestions:o.questions.length,completedAt:Rt()},g=await Rl(kn(mt,"quiz-results"),f);return console.log(" Quiz submitted:",g.id,"Score:",u),{success:!0,score:u,results:l,resultId:g.id}}catch(i){return console.error(" Error submitting quiz:",i),{success:!1,error:i.message}}}async getQuizResults(e,r){try{const n=va(kn(mt,"quiz-results"),Es("userId","==",e),Es("quizId","==",r),Tl("completedAt","desc"));return{success:!0,results:(await Do(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Error fetching quiz results:",n),{success:!1,error:n.message,results:[]}}}async getCourseQuizResults(e,r){try{const n=va(kn(mt,"quiz-results"),Es("userId","==",e),Es("courseId","==",r),Tl("completedAt","desc"));return{success:!0,results:(await Do(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Error fetching course quiz results:",n),{success:!1,error:n.message,results:[]}}}async updateQuiz(e,r){try{const n=Qt(mt,"quizzes",e);return await qs(n,{...r,updatedAt:Rt()}),console.log(" Quiz updated:",e),{success:!0}}catch(n){return console.error(" Error updating quiz:",n),{success:!1,error:n.message}}}async deleteQuiz(e){try{return await LS(Qt(mt,"quizzes",e)),console.log(" Quiz deleted:",e),{success:!0}}catch(r){return console.error(" Error deleting quiz:",r),{success:!1,error:r.message}}}}const Ol=new sU;class iU{async createExercise(e){try{const r={...e,createdAt:Rt(),updatedAt:Rt()},n=await Rl(kn(mt,"exercises"),r);return console.log(" Exercise created:",n.id),{success:!0,id:n.id}}catch(r){return console.error(" Error creating exercise:",r),{success:!1,error:r.message}}}async getExercisesByCourse(e){try{const r=va(kn(mt,"exercises"),Es("courseId","==",e),Tl("order","asc"));return{success:!0,exercises:(await Do(r)).docs.map(i=>({id:i.id,...i.data()}))}}catch(r){return console.error(" Error fetching exercises:",r),{success:!1,error:r.message,exercises:[]}}}async getExerciseById(e){try{const r=Qt(mt,"exercises",e),n=await cs(r);return n.exists()?{success:!0,exercise:{id:n.id,...n.data()}}:{success:!1,error:"Exercise not found"}}catch(r){return console.error(" Error fetching exercise:",r),{success:!1,error:r.message}}}async updateExercise(e,r){try{const n=Qt(mt,"exercises",e);return await qs(n,{...r,updatedAt:Rt()}),console.log(" Exercise updated:",e),{success:!0}}catch(n){return console.error(" Error updating exercise:",n),{success:!1,error:n.message}}}async deleteExercise(e){try{return await LS(Qt(mt,"exercises",e)),console.log(" Exercise deleted:",e),{success:!0}}catch(r){return console.error(" Error deleting exercise:",r),{success:!1,error:r.message}}}async trackLevelCompletion(e,r,n,s){try{const i=`${e}_${r}`,o=Qt(mt,"exercise-progress",i),a=await cs(o);let l=[];return a.exists()&&(l=a.data().completedLevels||[]),l.includes(s)||(l.push(s),l.sort((u,f)=>u-f)),await Il(o,{userId:e,exerciseId:r,courseId:n,completedLevels:l,currentLevel:Math.max(...l),lastUpdated:Rt()},{merge:!0}),console.log(" Exercise level completed:",{exerciseId:r,level:s}),{success:!0,completedLevels:l}}catch(i){return console.error(" Error tracking exercise progress:",i),{success:!1,error:i.message}}}async getExerciseProgress(e,r){try{const n=`${e}_${r}`,s=Qt(mt,"exercise-progress",n),i=await cs(s);return i.exists()?{success:!0,progress:i.data()}:{success:!0,progress:{completedLevels:[],currentLevel:-1}}}catch(n){return console.error(" Error fetching exercise progress:",n),{success:!1,error:n.message,progress:{completedLevels:[],currentLevel:-1}}}}async getCourseExerciseProgress(e,r){try{const n=va(kn(mt,"exercise-progress"),Es("userId","==",e),Es("courseId","==",r)),s=await Do(n),i={};return s.docs.forEach(o=>{const a=o.data();i[a.exerciseId]=a}),{success:!0,progress:i}}catch(n){return console.error(" Error fetching course exercise progress:",n),{success:!1,error:n.message,progress:{}}}}}const Dl=new iU,oU="modulepreload",aU=function(t){return"/"+t},_b={},An=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(r.map(l=>{if(l=aU(l),l in _b)return;_b[l]=!0;const u=l.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${f}`))return;const g=document.createElement("link");if(g.rel=u?"stylesheet":oU,u||(g.as="script"),g.crossOrigin="",g.href=l,a&&g.setAttribute("nonce",a),document.head.appendChild(g),u)return new Promise((y,m)=>{g.addEventListener("load",y),g.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};function ar(t){"@babel/helpers - typeof";return ar=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ar(t)}var ao=Uint8Array,ui=Uint16Array,R5=Int32Array,O5=new ao([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),D5=new ao([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),bb=new ao([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),v6=function(t,e){for(var r=new ui(31),n=0;n<31;++n)r[n]=e+=1<<t[n-1];for(var s=new R5(r[30]),n=1;n<30;++n)for(var i=r[n];i<r[n+1];++i)s[i]=i-r[n]<<5|n;return{b:r,r:s}},w6=v6(O5,2),lU=w6.b,h2=w6.r;lU[28]=258,h2[258]=28;var cU=v6(D5,0),Nb=cU.r,d2=new ui(32768);for(var Ar=0;Ar<32768;++Ar){var rl=(Ar&43690)>>1|(Ar&21845)<<1;rl=(rl&52428)>>2|(rl&13107)<<2,rl=(rl&61680)>>4|(rl&3855)<<4,d2[Ar]=((rl&65280)>>8|(rl&255)<<8)>>1}var jd=function(t,e,r){for(var n=t.length,s=0,i=new ui(e);s<n;++s)t[s]&&++i[t[s]-1];var o=new ui(e);for(s=1;s<e;++s)o[s]=o[s-1]+i[s-1]<<1;var a;if(r){a=new ui(1<<e);var l=15-e;for(s=0;s<n;++s)if(t[s])for(var u=s<<4|t[s],f=e-t[s],g=o[t[s]-1]++<<f,y=g|(1<<f)-1;g<=y;++g)a[d2[g]>>l]=u}else for(a=new ui(n),s=0;s<n;++s)t[s]&&(a[s]=d2[o[t[s]-1]++]>>15-t[s]);return a},Lc=new ao(288);for(var Ar=0;Ar<144;++Ar)Lc[Ar]=8;for(var Ar=144;Ar<256;++Ar)Lc[Ar]=9;for(var Ar=256;Ar<280;++Ar)Lc[Ar]=7;for(var Ar=280;Ar<288;++Ar)Lc[Ar]=8;var ig=new ao(32);for(var Ar=0;Ar<32;++Ar)ig[Ar]=5;var uU=jd(Lc,9,0),hU=jd(ig,5,0),x6=function(t){return(t+7)/8|0},dU=function(t,e,r){return(r==null||r>t.length)&&(r=t.length),new ao(t.subarray(e,r))},ra=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8},nd=function(t,e,r){r<<=e&7;var n=e/8|0;t[n]|=r,t[n+1]|=r>>8,t[n+2]|=r>>16},g1=function(t,e){for(var r=[],n=0;n<t.length;++n)t[n]&&r.push({s:n,f:t[n]});var s=r.length,i=r.slice();if(!s)return{t:b6,l:0};if(s==1){var o=new ao(r[0].s+1);return o[r[0].s]=1,{t:o,l:1}}r.sort(function(H,Z){return H.f-Z.f}),r.push({s:-1,f:25001});var a=r[0],l=r[1],u=0,f=1,g=2;for(r[0]={s:-1,f:a.f+l.f,l:a,r:l};f!=s-1;)a=r[r[u].f<r[g].f?u++:g++],l=r[u!=f&&r[u].f<r[g].f?u++:g++],r[f++]={s:-1,f:a.f+l.f,l:a,r:l};for(var y=i[0].s,n=1;n<s;++n)i[n].s>y&&(y=i[n].s);var m=new ui(y+1),E=f2(r[f-1],m,0);if(E>e){var n=0,b=0,A=E-e,x=1<<A;for(i.sort(function(Z,F){return m[F.s]-m[Z.s]||Z.f-F.f});n<s;++n){var T=i[n].s;if(m[T]>e)b+=x-(1<<E-m[T]),m[T]=e;else break}for(b>>=A;b>0;){var I=i[n].s;m[I]<e?b-=1<<e-m[I]++-1:++n}for(;n>=0&&b;--n){var k=i[n].s;m[k]==e&&(--m[k],++b)}E=e}return{t:new ao(m),l:E}},f2=function(t,e,r){return t.s==-1?Math.max(f2(t.l,e,r+1),f2(t.r,e,r+1)):e[t.s]=r},Eb=function(t){for(var e=t.length;e&&!t[--e];);for(var r=new ui(++e),n=0,s=t[0],i=1,o=function(l){r[n++]=l},a=1;a<=e;++a)if(t[a]==s&&a!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)o(32754);i>2&&(o(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(o(s),--i;i>6;i-=6)o(8304);i>2&&(o(i-3<<5|8208),i=0)}for(;i--;)o(s);i=1,s=t[a]}return{c:r.subarray(0,n),n:e}},sd=function(t,e){for(var r=0,n=0;n<e.length;++n)r+=t[n]*e[n];return r},_6=function(t,e,r){var n=r.length,s=x6(e+2);t[s]=n&255,t[s+1]=n>>8,t[s+2]=t[s]^255,t[s+3]=t[s+1]^255;for(var i=0;i<n;++i)t[s+i+4]=r[i];return(s+4+n)*8},Ab=function(t,e,r,n,s,i,o,a,l,u,f){ra(e,f++,r),++s[256];for(var g=g1(s,15),y=g.t,m=g.l,E=g1(i,15),b=E.t,A=E.l,x=Eb(y),T=x.c,I=x.n,k=Eb(b),H=k.c,Z=k.n,F=new ui(19),P=0;P<T.length;++P)++F[T[P]&31];for(var P=0;P<H.length;++P)++F[H[P]&31];for(var C=g1(F,7),O=C.t,N=C.l,R=19;R>4&&!O[bb[R-1]];--R);var L=u+5<<3,X=sd(s,Lc)+sd(i,ig)+o,fe=sd(s,y)+sd(i,b)+o+14+3*R+sd(F,O)+2*F[16]+3*F[17]+7*F[18];if(l>=0&&L<=X&&L<=fe)return _6(e,f,t.subarray(l,l+u));var le,ye,ee,ue;if(ra(e,f,1+(fe<X)),f+=2,fe<X){le=jd(y,m,0),ye=y,ee=jd(b,A,0),ue=b;var _e=jd(O,N,0);ra(e,f,I-257),ra(e,f+5,Z-1),ra(e,f+10,R-4),f+=14;for(var P=0;P<R;++P)ra(e,f+3*P,O[bb[P]]);f+=3*R;for(var we=[T,H],U=0;U<2;++U)for(var G=we[U],P=0;P<G.length;++P){var J=G[P]&31;ra(e,f,_e[J]),f+=O[J],J>15&&(ra(e,f,G[P]>>5&127),f+=G[P]>>12)}}else le=uU,ye=Lc,ee=hU,ue=ig;for(var P=0;P<a;++P){var re=n[P];if(re>255){var J=re>>18&31;nd(e,f,le[J+257]),f+=ye[J+257],J>7&&(ra(e,f,re>>23&31),f+=O5[J]);var ie=re&31;nd(e,f,ee[ie]),f+=ue[ie],ie>3&&(nd(e,f,re>>5&8191),f+=D5[ie])}else nd(e,f,le[re]),f+=ye[re]}return nd(e,f,le[256]),f+ye[256]},fU=new R5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),b6=new ao(0),pU=function(t,e,r,n,s,i){var o=i.z||t.length,a=new ao(n+o+5*(1+Math.ceil(o/7e3))+s),l=a.subarray(n,a.length-s),u=i.l,f=(i.r||0)&7;if(e){f&&(l[0]=i.r>>3);for(var g=fU[e-1],y=g>>13,m=g&8191,E=(1<<r)-1,b=i.p||new ui(32768),A=i.h||new ui(E+1),x=Math.ceil(r/3),T=2*x,I=function(Je){return(t[Je]^t[Je+1]<<x^t[Je+2]<<T)&E},k=new R5(25e3),H=new ui(288),Z=new ui(32),F=0,P=0,C=i.i||0,O=0,N=i.w||0,R=0;C+2<o;++C){var L=I(C),X=C&32767,fe=A[L];if(b[X]=fe,A[L]=X,N<=C){var le=o-C;if((F>7e3||O>24576)&&(le>423||!u)){f=Ab(t,l,0,k,H,Z,P,O,R,C-R,f),O=F=P=0,R=C;for(var ye=0;ye<286;++ye)H[ye]=0;for(var ye=0;ye<30;++ye)Z[ye]=0}var ee=2,ue=0,_e=m,we=X-fe&32767;if(le>2&&L==I(C-we))for(var U=Math.min(y,le)-1,G=Math.min(32767,C),J=Math.min(258,le);we<=G&&--_e&&X!=fe;){if(t[C+ee]==t[C+ee-we]){for(var re=0;re<J&&t[C+re]==t[C+re-we];++re);if(re>ee){if(ee=re,ue=we,re>U)break;for(var ie=Math.min(we,re-2),he=0,ye=0;ye<ie;++ye){var ve=C-we+ye&32767,xe=b[ve],Ae=ve-xe&32767;Ae>he&&(he=Ae,fe=ve)}}}X=fe,fe=b[X],we+=X-fe&32767}if(ue){k[O++]=268435456|h2[ee]<<18|Nb[ue];var je=h2[ee]&31,Ve=Nb[ue]&31;P+=O5[je]+D5[Ve],++H[257+je],++Z[Ve],N=C+ee,++F}else k[O++]=t[C],++H[t[C]]}}for(C=Math.max(C,N);C<o;++C)k[O++]=t[C],++H[t[C]];f=Ab(t,l,u,k,H,Z,P,O,R,C-R,f),u||(i.r=f&7|l[f/8|0]<<3,f-=7,i.h=A,i.p=b,i.i=C,i.w=N)}else{for(var C=i.w||0;C<o+u;C+=65535){var Fe=C+65535;Fe>=o&&(l[f/8|0]=u,Fe=o),f=_6(l,f+1,t.subarray(C,Fe))}i.i=o}return dU(a,0,n+x6(f)+s)},N6=function(){var t=1,e=0;return{p:function(r){for(var n=t,s=e,i=r.length|0,o=0;o!=i;){for(var a=Math.min(o+2655,i);o<a;++o)s+=n+=r[o];n=(n&65535)+15*(n>>16),s=(s&65535)+15*(s>>16)}t=n,e=s},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},mU=function(t,e,r,n,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),o=new ao(i.length+t.length);o.set(i),o.set(t,i.length),t=o,s.w=i.length}return pU(t,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,r,n,s)},E6=function(t,e,r){for(;r;++e)t[e]=r,r>>>=8},gU=function(t,e){var r=e.level,n=r==0?0:r<6?1:r==9?3:2;if(t[0]=120,t[1]=n<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var s=N6();s.p(e.dictionary),E6(t,2,s.d())}};function p2(t,e){e||(e={});var r=N6();r.p(t);var n=mU(t,e,e.dictionary?6:2,4);return gU(n,e),E6(n,n.length-4,r.d()),n}var yU=typeof TextDecoder<"u"&&new TextDecoder,vU=0;try{yU.decode(b6,{stream:!0}),vU=1}catch{}function wU(t){if(Array.isArray(t))return t}function xU(t,e){var r=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(r!=null){var n,s,i,o,a=[],l=!0,u=!1;try{if(i=(r=r.call(t)).next,e!==0)for(;!(l=(n=i.call(r)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(f){u=!0,s=f}finally{try{if(!l&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw s}}return a}}function Sb(t,e){(e==null||e>t.length)&&(e=t.length);for(var r=0,n=Array(e);r<e;r++)n[r]=t[r];return n}function _U(t,e){if(t){if(typeof t=="string")return Sb(t,e);var r={}.toString.call(t).slice(8,-1);return r==="Object"&&t.constructor&&(r=t.constructor.name),r==="Map"||r==="Set"?Array.from(t):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Sb(t,e):void 0}}function bU(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tb(t,e){return wU(t)||xU(t,e)||_U(t,e)||bU()}function Ib(t,e="utf8"){return new TextDecoder(e).decode(t)}const NU=new TextEncoder;function EU(t){return NU.encode(t)}const AU=1024*8,SU=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),y1={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class M5{constructor(e=AU,r={}){or(this,"buffer");or(this,"byteLength");or(this,"byteOffset");or(this,"length");or(this,"offset");or(this,"lastWrittenByte");or(this,"littleEndian");or(this,"_data");or(this,"_mark");or(this,"_marks");let n=!1;typeof e=="number"?e=new ArrayBuffer(e):(n=!0,this.lastWrittenByte=e.byteLength);const s=r.offset?r.offset>>>0:0,i=e.byteLength-s;let o=s;(ArrayBuffer.isView(e)||e instanceof M5)&&(e.byteLength!==e.buffer.byteLength&&(o=e.byteOffset+s),e=e.buffer),n?this.lastWrittenByte=i:this.lastWrittenByte=0,this.buffer=e,this.length=i,this.byteLength=i,this.byteOffset=o,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,o,i),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const n=(this.offset+e)*2,s=new Uint8Array(n);s.set(new Uint8Array(this.buffer)),this.buffer=s.buffer,this.length=n,this.byteLength=n,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,r){const n=y1[r].BYTES_PER_ELEMENT*e,s=this.byteOffset+this.offset,i=this.buffer.slice(s,s+n);if(this.littleEndian===SU&&r!=="uint8"&&r!=="int8"){const a=new Uint8Array(this.buffer.slice(s,s+n));a.reverse();const l=new y1[r](a.buffer);return this.offset+=n,l.reverse(),l}const o=new y1[r](i);return this.offset+=n,o}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let r="";for(let n=0;n<e;n++)r+=this.readChar();return r}readUtf8(e=1){return Ib(this.readBytes(e))}decodeText(e=1,r="utf8"){return Ib(this.readBytes(e),r)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let r=0;r<e.length;r++)this._data.setUint8(this.offset++,e[r]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let r=0;r<e.length;r++)this.writeUint8(e.charCodeAt(r));return this}writeUtf8(e){return this.writeBytes(EU(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function Sh(t){let e=t.length;for(;--e>=0;)t[e]=0}const TU=3,IU=258,A6=29,kU=256,PU=kU+1+A6,S6=30,CU=512,jU=new Array((PU+2)*2);Sh(jU);const LU=new Array(S6*2);Sh(LU);const RU=new Array(CU);Sh(RU);const OU=new Array(IU-TU+1);Sh(OU);const DU=new Array(A6);Sh(DU);const MU=new Array(S6);Sh(MU);const FU=(t,e,r,n)=>{let s=t&65535|0,i=t>>>16&65535|0,o=0;for(;r!==0;){o=r>2e3?2e3:r,r-=o;do s=s+e[n++]|0,i=i+s|0;while(--o);s%=65521,i%=65521}return s|i<<16|0};var m2=FU;const UU=()=>{let t,e=[];for(var r=0;r<256;r++){t=r;for(var n=0;n<8;n++)t=t&1?3988292384^t>>>1:t>>>1;e[r]=t}return e},VU=new Uint32Array(UU()),BU=(t,e,r,n)=>{const s=VU,i=n+r;t^=-1;for(let o=n;o<i;o++)t=t>>>8^s[(t^e[o])&255];return t^-1};var So=BU,g2={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},T6={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const zU=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var qU=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const r=e.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(const n in r)zU(r,n)&&(t[n]=r[n])}}return t},$U=t=>{let e=0;for(let n=0,s=t.length;n<s;n++)e+=t[n].length;const r=new Uint8Array(e);for(let n=0,s=0,i=t.length;n<i;n++){let o=t[n];r.set(o,s),s+=o.length}return r},I6={assign:qU,flattenChunks:$U};let k6=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{k6=!1}const pf=new Uint8Array(256);for(let t=0;t<256;t++)pf[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;pf[254]=pf[254]=1;var HU=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,r,n,s,i,o=t.length,a=0;for(s=0;s<o;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),a+=r<128?1:r<2048?2:r<65536?3:4;for(e=new Uint8Array(a),i=0,s=0;i<a;s++)r=t.charCodeAt(s),(r&64512)===55296&&s+1<o&&(n=t.charCodeAt(s+1),(n&64512)===56320&&(r=65536+(r-55296<<10)+(n-56320),s++)),r<128?e[i++]=r:r<2048?(e[i++]=192|r>>>6,e[i++]=128|r&63):r<65536?(e[i++]=224|r>>>12,e[i++]=128|r>>>6&63,e[i++]=128|r&63):(e[i++]=240|r>>>18,e[i++]=128|r>>>12&63,e[i++]=128|r>>>6&63,e[i++]=128|r&63);return e};const WU=(t,e)=>{if(e<65534&&t.subarray&&k6)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let r="";for(let n=0;n<e;n++)r+=String.fromCharCode(t[n]);return r};var GU=(t,e)=>{const r=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let n,s;const i=new Array(r*2);for(s=0,n=0;n<r;){let o=t[n++];if(o<128){i[s++]=o;continue}let a=pf[o];if(a>4){i[s++]=65533,n+=a-1;continue}for(o&=a===2?31:a===3?15:7;a>1&&n<r;)o=o<<6|t[n++]&63,a--;if(a>1){i[s++]=65533;continue}o<65536?i[s++]=o:(o-=65536,i[s++]=55296|o>>10&1023,i[s++]=56320|o&1023)}return WU(i,s)},KU=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let r=e-1;for(;r>=0&&(t[r]&192)===128;)r--;return r<0||r===0?e:r+pf[t[r]]>e?r:e},y2={string2buf:HU,buf2string:GU,utf8border:KU};function QU(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var YU=QU;const Tp=16209,XU=16191;var JU=function(e,r){let n,s,i,o,a,l,u,f,g,y,m,E,b,A,x,T,I,k,H,Z,F,P,C,O;const N=e.state;n=e.next_in,C=e.input,s=n+(e.avail_in-5),i=e.next_out,O=e.output,o=i-(r-e.avail_out),a=i+(e.avail_out-257),l=N.dmax,u=N.wsize,f=N.whave,g=N.wnext,y=N.window,m=N.hold,E=N.bits,b=N.lencode,A=N.distcode,x=(1<<N.lenbits)-1,T=(1<<N.distbits)-1;e:do{E<15&&(m+=C[n++]<<E,E+=8,m+=C[n++]<<E,E+=8),I=b[m&x];t:for(;;){if(k=I>>>24,m>>>=k,E-=k,k=I>>>16&255,k===0)O[i++]=I&65535;else if(k&16){H=I&65535,k&=15,k&&(E<k&&(m+=C[n++]<<E,E+=8),H+=m&(1<<k)-1,m>>>=k,E-=k),E<15&&(m+=C[n++]<<E,E+=8,m+=C[n++]<<E,E+=8),I=A[m&T];r:for(;;){if(k=I>>>24,m>>>=k,E-=k,k=I>>>16&255,k&16){if(Z=I&65535,k&=15,E<k&&(m+=C[n++]<<E,E+=8,E<k&&(m+=C[n++]<<E,E+=8)),Z+=m&(1<<k)-1,Z>l){e.msg="invalid distance too far back",N.mode=Tp;break e}if(m>>>=k,E-=k,k=i-o,Z>k){if(k=Z-k,k>f&&N.sane){e.msg="invalid distance too far back",N.mode=Tp;break e}if(F=0,P=y,g===0){if(F+=u-k,k<H){H-=k;do O[i++]=y[F++];while(--k);F=i-Z,P=O}}else if(g<k){if(F+=u+g-k,k-=g,k<H){H-=k;do O[i++]=y[F++];while(--k);if(F=0,g<H){k=g,H-=k;do O[i++]=y[F++];while(--k);F=i-Z,P=O}}}else if(F+=g-k,k<H){H-=k;do O[i++]=y[F++];while(--k);F=i-Z,P=O}for(;H>2;)O[i++]=P[F++],O[i++]=P[F++],O[i++]=P[F++],H-=3;H&&(O[i++]=P[F++],H>1&&(O[i++]=P[F++]))}else{F=i-Z;do O[i++]=O[F++],O[i++]=O[F++],O[i++]=O[F++],H-=3;while(H>2);H&&(O[i++]=O[F++],H>1&&(O[i++]=O[F++]))}}else if(k&64){e.msg="invalid distance code",N.mode=Tp;break e}else{I=A[(I&65535)+(m&(1<<k)-1)];continue r}break}}else if(k&64)if(k&32){N.mode=XU;break e}else{e.msg="invalid literal/length code",N.mode=Tp;break e}else{I=b[(I&65535)+(m&(1<<k)-1)];continue t}break}}while(n<s&&i<a);H=E>>3,n-=H,E-=H<<3,m&=(1<<E)-1,e.next_in=n,e.next_out=i,e.avail_in=n<s?5+(s-n):5-(n-s),e.avail_out=i<a?257+(a-i):257-(i-a),N.hold=m,N.bits=E};const ou=15,kb=852,Pb=592,Cb=0,v1=1,jb=2,ZU=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),eV=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),tV=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),rV=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),nV=(t,e,r,n,s,i,o,a)=>{const l=a.bits;let u=0,f=0,g=0,y=0,m=0,E=0,b=0,A=0,x=0,T=0,I,k,H,Z,F,P=null,C;const O=new Uint16Array(ou+1),N=new Uint16Array(ou+1);let R=null,L,X,fe;for(u=0;u<=ou;u++)O[u]=0;for(f=0;f<n;f++)O[e[r+f]]++;for(m=l,y=ou;y>=1&&O[y]===0;y--);if(m>y&&(m=y),y===0)return s[i++]=1<<24|64<<16|0,s[i++]=1<<24|64<<16|0,a.bits=1,0;for(g=1;g<y&&O[g]===0;g++);for(m<g&&(m=g),A=1,u=1;u<=ou;u++)if(A<<=1,A-=O[u],A<0)return-1;if(A>0&&(t===Cb||y!==1))return-1;for(N[1]=0,u=1;u<ou;u++)N[u+1]=N[u]+O[u];for(f=0;f<n;f++)e[r+f]!==0&&(o[N[e[r+f]]++]=f);if(t===Cb?(P=R=o,C=20):t===v1?(P=ZU,R=eV,C=257):(P=tV,R=rV,C=0),T=0,f=0,u=g,F=i,E=m,b=0,H=-1,x=1<<m,Z=x-1,t===v1&&x>kb||t===jb&&x>Pb)return 1;for(;;){L=u-b,o[f]+1<C?(X=0,fe=o[f]):o[f]>=C?(X=R[o[f]-C],fe=P[o[f]-C]):(X=96,fe=0),I=1<<u-b,k=1<<E,g=k;do k-=I,s[F+(T>>b)+k]=L<<24|X<<16|fe|0;while(k!==0);for(I=1<<u-1;T&I;)I>>=1;if(I!==0?(T&=I-1,T+=I):T=0,f++,--O[u]===0){if(u===y)break;u=e[r+o[f]]}if(u>m&&(T&Z)!==H){for(b===0&&(b=m),F+=g,E=u-b,A=1<<E;E+b<y&&(A-=O[E+b],!(A<=0));)E++,A<<=1;if(x+=1<<E,t===v1&&x>kb||t===jb&&x>Pb)return 1;H=T&Z,s[H]=m<<24|E<<16|F-i|0}}return T!==0&&(s[F+T]=u-b<<24|64<<16|0),a.bits=m,0};var Ld=nV;const sV=0,P6=1,C6=2,{Z_FINISH:Lb,Z_BLOCK:iV,Z_TREES:Ip,Z_OK:Rc,Z_STREAM_END:oV,Z_NEED_DICT:aV,Z_STREAM_ERROR:Fi,Z_DATA_ERROR:j6,Z_MEM_ERROR:L6,Z_BUF_ERROR:lV,Z_DEFLATED:Rb}=T6,t0=16180,Ob=16181,Db=16182,Mb=16183,Fb=16184,Ub=16185,Vb=16186,Bb=16187,zb=16188,qb=16189,og=16190,na=16191,w1=16192,$b=16193,x1=16194,Hb=16195,Wb=16196,Gb=16197,Kb=16198,kp=16199,Pp=16200,Qb=16201,Yb=16202,Xb=16203,Jb=16204,Zb=16205,_1=16206,eN=16207,tN=16208,kr=16209,R6=16210,O6=16211,cV=852,uV=592,hV=15,dV=hV,rN=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function fV(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Hc=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<t0||e.mode>O6?1:0},D6=t=>{if(Hc(t))return Fi;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=t0,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(cV),e.distcode=e.distdyn=new Int32Array(uV),e.sane=1,e.back=-1,Rc},M6=t=>{if(Hc(t))return Fi;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,D6(t)},F6=(t,e)=>{let r;if(Hc(t))return Fi;const n=t.state;return e<0?(r=0,e=-e):(r=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?Fi:(n.window!==null&&n.wbits!==e&&(n.window=null),n.wrap=r,n.wbits=e,M6(t))},U6=(t,e)=>{if(!t)return Fi;const r=new fV;t.state=r,r.strm=t,r.window=null,r.mode=t0;const n=F6(t,e);return n!==Rc&&(t.state=null),n},pV=t=>U6(t,dV);let nN=!0,b1,N1;const mV=t=>{if(nN){b1=new Int32Array(512),N1=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(Ld(P6,t.lens,0,288,b1,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;Ld(C6,t.lens,0,32,N1,0,t.work,{bits:5}),nN=!1}t.lencode=b1,t.lenbits=9,t.distcode=N1,t.distbits=5},V6=(t,e,r,n)=>{let s;const i=t.state;return i.window===null&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(e.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):(s=i.wsize-i.wnext,s>n&&(s=n),i.window.set(e.subarray(r-n,r-n+s),i.wnext),n-=s,n?(i.window.set(e.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=s,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=s))),0},gV=(t,e)=>{let r,n,s,i,o,a,l,u,f,g,y,m,E,b,A=0,x,T,I,k,H,Z,F,P;const C=new Uint8Array(4);let O,N;const R=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Hc(t)||!t.output||!t.input&&t.avail_in!==0)return Fi;r=t.state,r.mode===na&&(r.mode=w1),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,u=r.hold,f=r.bits,g=a,y=l,P=Rc;e:for(;;)switch(r.mode){case t0:if(r.wrap===0){r.mode=w1;break}for(;f<16;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(r.wrap&2&&u===35615){r.wbits===0&&(r.wbits=15),r.check=0,C[0]=u&255,C[1]=u>>>8&255,r.check=So(r.check,C,2,0),u=0,f=0,r.mode=Ob;break}if(r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){t.msg="incorrect header check",r.mode=kr;break}if((u&15)!==Rb){t.msg="unknown compression method",r.mode=kr;break}if(u>>>=4,f-=4,F=(u&15)+8,r.wbits===0&&(r.wbits=F),F>15||F>r.wbits){t.msg="invalid window size",r.mode=kr;break}r.dmax=1<<r.wbits,r.flags=0,t.adler=r.check=1,r.mode=u&512?qb:na,u=0,f=0;break;case Ob:for(;f<16;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(r.flags=u,(r.flags&255)!==Rb){t.msg="unknown compression method",r.mode=kr;break}if(r.flags&57344){t.msg="unknown header flags set",r.mode=kr;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=So(r.check,C,2,0)),u=0,f=0,r.mode=Db;case Db:for(;f<32;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.head&&(r.head.time=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,C[2]=u>>>16&255,C[3]=u>>>24&255,r.check=So(r.check,C,4,0)),u=0,f=0,r.mode=Mb;case Mb:for(;f<16;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=So(r.check,C,2,0)),u=0,f=0,r.mode=Fb;case Fb:if(r.flags&1024){for(;f<16;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&r.wrap&4&&(C[0]=u&255,C[1]=u>>>8&255,r.check=So(r.check,C,2,0)),u=0,f=0}else r.head&&(r.head.extra=null);r.mode=Ub;case Ub:if(r.flags&1024&&(m=r.length,m>a&&(m=a),m&&(r.head&&(F=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+m),F)),r.flags&512&&r.wrap&4&&(r.check=So(r.check,n,m,i)),a-=m,i+=m,r.length-=m),r.length))break e;r.length=0,r.mode=Vb;case Vb:if(r.flags&2048){if(a===0)break e;m=0;do F=n[i+m++],r.head&&F&&r.length<65536&&(r.head.name+=String.fromCharCode(F));while(F&&m<a);if(r.flags&512&&r.wrap&4&&(r.check=So(r.check,n,m,i)),a-=m,i+=m,F)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Bb;case Bb:if(r.flags&4096){if(a===0)break e;m=0;do F=n[i+m++],r.head&&F&&r.length<65536&&(r.head.comment+=String.fromCharCode(F));while(F&&m<a);if(r.flags&512&&r.wrap&4&&(r.check=So(r.check,n,m,i)),a-=m,i+=m,F)break e}else r.head&&(r.head.comment=null);r.mode=zb;case zb:if(r.flags&512){for(;f<16;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.check&65535)){t.msg="header crc mismatch",r.mode=kr;break}u=0,f=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),t.adler=r.check=0,r.mode=na;break;case qb:for(;f<32;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}t.adler=r.check=rN(u),u=0,f=0,r.mode=og;case og:if(r.havedict===0)return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=f,aV;t.adler=r.check=1,r.mode=na;case na:if(e===iV||e===Ip)break e;case w1:if(r.last){u>>>=f&7,f-=f&7,r.mode=_1;break}for(;f<3;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}switch(r.last=u&1,u>>>=1,f-=1,u&3){case 0:r.mode=$b;break;case 1:if(mV(r),r.mode=kp,e===Ip){u>>>=2,f-=2;break e}break;case 2:r.mode=Wb;break;case 3:t.msg="invalid block type",r.mode=kr}u>>>=2,f-=2;break;case $b:for(u>>>=f&7,f-=f&7;f<32;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if((u&65535)!==(u>>>16^65535)){t.msg="invalid stored block lengths",r.mode=kr;break}if(r.length=u&65535,u=0,f=0,r.mode=x1,e===Ip)break e;case x1:r.mode=Hb;case Hb:if(m=r.length,m){if(m>a&&(m=a),m>l&&(m=l),m===0)break e;s.set(n.subarray(i,i+m),o),a-=m,i+=m,l-=m,o+=m,r.length-=m;break}r.mode=na;break;case Wb:for(;f<14;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(r.nlen=(u&31)+257,u>>>=5,f-=5,r.ndist=(u&31)+1,u>>>=5,f-=5,r.ncode=(u&15)+4,u>>>=4,f-=4,r.nlen>286||r.ndist>30){t.msg="too many length or distance symbols",r.mode=kr;break}r.have=0,r.mode=Gb;case Gb:for(;r.have<r.ncode;){for(;f<3;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.lens[R[r.have++]]=u&7,u>>>=3,f-=3}for(;r.have<19;)r.lens[R[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,O={bits:r.lenbits},P=Ld(sV,r.lens,0,19,r.lencode,0,r.work,O),r.lenbits=O.bits,P){t.msg="invalid code lengths set",r.mode=kr;break}r.have=0,r.mode=Kb;case Kb:for(;r.have<r.nlen+r.ndist;){for(;A=r.lencode[u&(1<<r.lenbits)-1],x=A>>>24,T=A>>>16&255,I=A&65535,!(x<=f);){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(I<16)u>>>=x,f-=x,r.lens[r.have++]=I;else{if(I===16){for(N=x+2;f<N;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(u>>>=x,f-=x,r.have===0){t.msg="invalid bit length repeat",r.mode=kr;break}F=r.lens[r.have-1],m=3+(u&3),u>>>=2,f-=2}else if(I===17){for(N=x+3;f<N;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}u>>>=x,f-=x,F=0,m=3+(u&7),u>>>=3,f-=3}else{for(N=x+7;f<N;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}u>>>=x,f-=x,F=0,m=11+(u&127),u>>>=7,f-=7}if(r.have+m>r.nlen+r.ndist){t.msg="invalid bit length repeat",r.mode=kr;break}for(;m--;)r.lens[r.have++]=F}}if(r.mode===kr)break;if(r.lens[256]===0){t.msg="invalid code -- missing end-of-block",r.mode=kr;break}if(r.lenbits=9,O={bits:r.lenbits},P=Ld(P6,r.lens,0,r.nlen,r.lencode,0,r.work,O),r.lenbits=O.bits,P){t.msg="invalid literal/lengths set",r.mode=kr;break}if(r.distbits=6,r.distcode=r.distdyn,O={bits:r.distbits},P=Ld(C6,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,O),r.distbits=O.bits,P){t.msg="invalid distances set",r.mode=kr;break}if(r.mode=kp,e===Ip)break e;case kp:r.mode=Pp;case Pp:if(a>=6&&l>=258){t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=f,JU(t,y),o=t.next_out,s=t.output,l=t.avail_out,i=t.next_in,n=t.input,a=t.avail_in,u=r.hold,f=r.bits,r.mode===na&&(r.back=-1);break}for(r.back=0;A=r.lencode[u&(1<<r.lenbits)-1],x=A>>>24,T=A>>>16&255,I=A&65535,!(x<=f);){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(T&&!(T&240)){for(k=x,H=T,Z=I;A=r.lencode[Z+((u&(1<<k+H)-1)>>k)],x=A>>>24,T=A>>>16&255,I=A&65535,!(k+x<=f);){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}u>>>=k,f-=k,r.back+=k}if(u>>>=x,f-=x,r.back+=x,r.length=I,T===0){r.mode=Zb;break}if(T&32){r.back=-1,r.mode=na;break}if(T&64){t.msg="invalid literal/length code",r.mode=kr;break}r.extra=T&15,r.mode=Qb;case Qb:if(r.extra){for(N=r.extra;f<N;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Yb;case Yb:for(;A=r.distcode[u&(1<<r.distbits)-1],x=A>>>24,T=A>>>16&255,I=A&65535,!(x<=f);){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(!(T&240)){for(k=x,H=T,Z=I;A=r.distcode[Z+((u&(1<<k+H)-1)>>k)],x=A>>>24,T=A>>>16&255,I=A&65535,!(k+x<=f);){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}u>>>=k,f-=k,r.back+=k}if(u>>>=x,f-=x,r.back+=x,T&64){t.msg="invalid distance code",r.mode=kr;break}r.offset=I,r.extra=T&15,r.mode=Xb;case Xb:if(r.extra){for(N=r.extra;f<N;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,f-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){t.msg="invalid distance too far back",r.mode=kr;break}r.mode=Jb;case Jb:if(l===0)break e;if(m=y-l,r.offset>m){if(m=r.offset-m,m>r.whave&&r.sane){t.msg="invalid distance too far back",r.mode=kr;break}m>r.wnext?(m-=r.wnext,E=r.wsize-m):E=r.wnext-m,m>r.length&&(m=r.length),b=r.window}else b=s,E=o-r.offset,m=r.length;m>l&&(m=l),l-=m,r.length-=m;do s[o++]=b[E++];while(--m);r.length===0&&(r.mode=Pp);break;case Zb:if(l===0)break e;s[o++]=r.length,l--,r.mode=Pp;break;case _1:if(r.wrap){for(;f<32;){if(a===0)break e;a--,u|=n[i++]<<f,f+=8}if(y-=l,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?So(r.check,s,y,o-y):m2(r.check,s,y,o-y)),y=l,r.wrap&4&&(r.flags?u:rN(u))!==r.check){t.msg="incorrect data check",r.mode=kr;break}u=0,f=0}r.mode=eN;case eN:if(r.wrap&&r.flags){for(;f<32;){if(a===0)break e;a--,u+=n[i++]<<f,f+=8}if(r.wrap&4&&u!==(r.total&4294967295)){t.msg="incorrect length check",r.mode=kr;break}u=0,f=0}r.mode=tN;case tN:P=oV;break e;case kr:P=j6;break e;case R6:return L6;case O6:default:return Fi}return t.next_out=o,t.avail_out=l,t.next_in=i,t.avail_in=a,r.hold=u,r.bits=f,(r.wsize||y!==t.avail_out&&r.mode<kr&&(r.mode<_1||e!==Lb))&&V6(t,t.output,t.next_out,y-t.avail_out),g-=t.avail_in,y-=t.avail_out,t.total_in+=g,t.total_out+=y,r.total+=y,r.wrap&4&&y&&(t.adler=r.check=r.flags?So(r.check,s,y,t.next_out-y):m2(r.check,s,y,t.next_out-y)),t.data_type=r.bits+(r.last?64:0)+(r.mode===na?128:0)+(r.mode===kp||r.mode===x1?256:0),(g===0&&y===0||e===Lb)&&P===Rc&&(P=lV),P},yV=t=>{if(Hc(t))return Fi;let e=t.state;return e.window&&(e.window=null),t.state=null,Rc},vV=(t,e)=>{if(Hc(t))return Fi;const r=t.state;return r.wrap&2?(r.head=e,e.done=!1,Rc):Fi},wV=(t,e)=>{const r=e.length;let n,s,i;return Hc(t)||(n=t.state,n.wrap!==0&&n.mode!==og)?Fi:n.mode===og&&(s=1,s=m2(s,e,r,0),s!==n.check)?j6:(i=V6(t,e,r,r),i?(n.mode=R6,L6):(n.havedict=1,Rc))};var xV=M6,_V=F6,bV=D6,NV=pV,EV=U6,AV=gV,SV=yV,TV=vV,IV=wV,kV="pako inflate (from Nodeca project)",aa={inflateReset:xV,inflateReset2:_V,inflateResetKeep:bV,inflateInit:NV,inflateInit2:EV,inflate:AV,inflateEnd:SV,inflateGetHeader:TV,inflateSetDictionary:IV,inflateInfo:kV};function PV(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var CV=PV;const B6=Object.prototype.toString,{Z_NO_FLUSH:jV,Z_FINISH:LV,Z_OK:mf,Z_STREAM_END:E1,Z_NEED_DICT:A1,Z_STREAM_ERROR:RV,Z_DATA_ERROR:sN,Z_MEM_ERROR:OV}=T6;function Df(t){this.options=I6.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15||(e.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new YU,this.strm.avail_out=0;let r=aa.inflateInit2(this.strm,e.windowBits);if(r!==mf)throw new Error(g2[r]);if(this.header=new CV,aa.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=y2.string2buf(e.dictionary):B6.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(r=aa.inflateSetDictionary(this.strm,e.dictionary),r!==mf)))throw new Error(g2[r])}Df.prototype.push=function(t,e){const r=this.strm,n=this.options.chunkSize,s=this.options.dictionary;let i,o,a;if(this.ended)return!1;for(e===~~e?o=e:o=e===!0?LV:jV,B6.call(t)==="[object ArrayBuffer]"?r.input=new Uint8Array(t):r.input=t,r.next_in=0,r.avail_in=r.input.length;;){for(r.avail_out===0&&(r.output=new Uint8Array(n),r.next_out=0,r.avail_out=n),i=aa.inflate(r,o),i===A1&&s&&(i=aa.inflateSetDictionary(r,s),i===mf?i=aa.inflate(r,o):i===sN&&(i=A1));r.avail_in>0&&i===E1&&r.state.wrap>0&&t[r.next_in]!==0;)aa.inflateReset(r),i=aa.inflate(r,o);switch(i){case RV:case sN:case A1:case OV:return this.onEnd(i),this.ended=!0,!1}if(a=r.avail_out,r.next_out&&(r.avail_out===0||i===E1))if(this.options.to==="string"){let l=y2.utf8border(r.output,r.next_out),u=r.next_out-l,f=y2.buf2string(r.output,l);r.next_out=u,r.avail_out=n-u,u&&r.output.set(r.output.subarray(l,l+u),0),this.onData(f)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(!(i===mf&&a===0)){if(i===E1)return i=aa.inflateEnd(this.strm),this.onEnd(i),this.ended=!0,!0;if(r.avail_in===0)break}}return!0};Df.prototype.onData=function(t){this.chunks.push(t)};Df.prototype.onEnd=function(t){t===mf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=I6.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function DV(t,e){const r=new Df(e);if(r.push(t),r.err)throw r.msg||g2[r.err];return r.result}var MV=Df,FV=DV,UV={Inflate:MV,inflate:FV};const{Inflate:VV,inflate:BV}=UV;var iN=VV,zV=BV;const z6=[];for(let t=0;t<256;t++){let e=t;for(let r=0;r<8;r++)e&1?e=3988292384^e>>>1:e=e>>>1;z6[t]=e}const oN=4294967295;function qV(t,e,r){let n=t;for(let s=0;s<r;s++)n=z6[(n^e[s])&255]^n>>>8;return n}function $V(t,e){return(qV(oN,t,e)^oN)>>>0}function aN(t,e,r){const n=t.readUint32(),s=$V(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(s!==n)throw new Error(`CRC mismatch for chunk ${r}. Expected ${n}, found ${s}`)}function q6(t,e,r){for(let n=0;n<r;n++)e[n]=t[n]}function $6(t,e,r,n){let s=0;for(;s<n;s++)e[s]=t[s];for(;s<r;s++)e[s]=t[s]+e[s-n]&255}function H6(t,e,r,n){let s=0;if(r.length===0)for(;s<n;s++)e[s]=t[s];else for(;s<n;s++)e[s]=t[s]+r[s]&255}function W6(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+(e[i-s]>>1)&255}else{for(;i<s;i++)e[i]=t[i]+(r[i]>>1)&255;for(;i<n;i++)e[i]=t[i]+(e[i-s]+r[i]>>1)&255}}function G6(t,e,r,n,s){let i=0;if(r.length===0){for(;i<s;i++)e[i]=t[i];for(;i<n;i++)e[i]=t[i]+e[i-s]&255}else{for(;i<s;i++)e[i]=t[i]+r[i]&255;for(;i<n;i++)e[i]=t[i]+HV(e[i-s],r[i],r[i-s])&255}}function HV(t,e,r){const n=t+e-r,s=Math.abs(n-t),i=Math.abs(n-e),o=Math.abs(n-r);return s<=i&&s<=o?t:i<=o?e:r}function WV(t,e,r,n,s,i){switch(t){case 0:q6(e,r,s);break;case 1:$6(e,r,s,i);break;case 2:H6(e,r,n,s);break;case 3:W6(e,r,n,s,i);break;case 4:G6(e,r,n,s,i);break;default:throw new Error(`Unsupported filter: ${t}`)}}const GV=new Uint16Array([255]),KV=new Uint8Array(GV.buffer),QV=KV[0]===255;function YV(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,o=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],a=Math.ceil(i/8)*s,l=new Uint8Array(n*r*a);let u=0;for(let f=0;f<7;f++){const g=o[f],y=Math.ceil((r-g.x)/g.xStep),m=Math.ceil((n-g.y)/g.yStep);if(y<=0||m<=0)continue;const E=y*a,b=new Uint8Array(E);for(let A=0;A<m;A++){const x=e[u++],T=e.subarray(u,u+E);u+=E;const I=new Uint8Array(E);WV(x,T,I,b,E,a),b.set(I);for(let k=0;k<y;k++){const H=g.x+k*g.xStep,Z=g.y+A*g.yStep;if(!(H>=r||Z>=n))for(let F=0;F<a;F++)l[(Z*r+H)*a+F]=I[k*a+F]}}}if(i===16){const f=new Uint16Array(l.buffer);if(QV)for(let g=0;g<f.length;g++)f[g]=XV(f[g]);return f}else return l}function XV(t){return(t&255)<<8|t>>8&255}const JV=new Uint16Array([255]),ZV=new Uint8Array(JV.buffer),eB=ZV[0]===255,tB=new Uint8Array(0);function lN(t){const{data:e,width:r,height:n,channels:s,depth:i}=t,o=Math.ceil(i/8)*s,a=Math.ceil(i/8*s*r),l=new Uint8Array(n*a);let u=tB,f=0,g,y;for(let m=0;m<n;m++){switch(g=e.subarray(f+1,f+1+a),y=l.subarray(m*a,(m+1)*a),e[f]){case 0:q6(g,y,a);break;case 1:$6(g,y,a,o);break;case 2:H6(g,y,u,a);break;case 3:W6(g,y,u,a,o);break;case 4:G6(g,y,u,a,o);break;default:throw new Error(`Unsupported filter: ${e[f]}`)}u=y,f+=a+1}if(i===16){const m=new Uint16Array(l.buffer);if(eB)for(let E=0;E<m.length;E++)m[E]=rB(m[E]);return m}else return l}function rB(t){return(t&255)<<8|t>>8&255}const om=Uint8Array.of(137,80,78,71,13,10,26,10);function cN(t){if(!nB(t.readBytes(om.length)))throw new Error("wrong PNG signature")}function nB(t){if(t.length<om.length)return!1;for(let e=0;e<om.length;e++)if(t[e]!==om[e])return!1;return!0}const sB="tEXt",iB=0,K6=new TextDecoder("latin1");function oB(t){if(lB(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const aB=/^[\u0000-\u00FF]*$/;function lB(t){if(!aB.test(t))throw new Error("invalid latin1 text")}function cB(t,e,r){const n=Q6(e);t[n]=uB(e,r-n.length-1)}function Q6(t){for(t.mark();t.readByte()!==iB;);const e=t.offset;t.reset();const r=K6.decode(t.readBytes(e-t.offset-1));return t.skip(1),oB(r),r}function uB(t,e){return K6.decode(t.readBytes(e))}const ii={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},S1={UNKNOWN:-1,DEFLATE:0},uN={UNKNOWN:-1,ADAPTIVE:0},T1={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},Cp={NONE:0,BACKGROUND:1,PREVIOUS:2},I1={SOURCE:0,OVER:1};class hB extends M5{constructor(r,n={}){super(r);or(this,"_checkCrc");or(this,"_inflator");or(this,"_png");or(this,"_apng");or(this,"_end");or(this,"_hasPalette");or(this,"_palette");or(this,"_hasTransparency");or(this,"_transparency");or(this,"_compressionMethod");or(this,"_filterMethod");or(this,"_interlaceMethod");or(this,"_colorType");or(this,"_isAnimated");or(this,"_numberOfFrames");or(this,"_numberOfPlays");or(this,"_frames");or(this,"_writingDataChunks");const{checkCrc:s=!1}=n;this._checkCrc=s,this._inflator=new iN,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=S1.UNKNOWN,this._filterMethod=uN.UNKNOWN,this._interlaceMethod=T1.UNKNOWN,this._colorType=ii.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(cN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeChunk(r,n)}return this.decodeImage(),this._png}decodeApng(){for(cN(this);!this._end;){const r=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(r,n)}return this.decodeApngImage(),this._apng}decodeChunk(r,n){const s=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(r);break;case"IDAT":this.decodeIDAT(r);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(r);break;case"iCCP":this.decodeiCCP(r);break;case sB:cB(this._png.text,this,r);break;case"pHYs":this.decodepHYs();break;default:this.skip(r);break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?aN(this,r+4,n):this.skip(4)}decodeApngChunk(r,n){const s=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(r);break;default:this.decodeChunk(r,n),this.offset=s+r;break}if(this.offset-s!==r)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?aN(this,r+4,n):this.skip(4)}decodeIHDR(){const r=this._png;r.width=this.readUint32(),r.height=this.readUint32(),r.depth=dB(this.readUint8());const n=this.readUint8();this._colorType=n;let s;switch(n){case ii.GREYSCALE:s=1;break;case ii.TRUECOLOUR:s=3;break;case ii.INDEXED_COLOUR:s=1;break;case ii.GREYSCALE_ALPHA:s=2;break;case ii.TRUECOLOUR_ALPHA:s=4;break;case ii.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=s,this._compressionMethod=this.readUint8(),this._compressionMethod!==S1.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const r={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(r)}decodePLTE(r){if(r%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${r}`);const n=r/3;this._hasPalette=!0;const s=[];this._palette=s;for(let i=0;i<n;i++)s.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(r){this._writingDataChunks=!0;const n=r,s=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodeFDAT(r){this._writingDataChunks=!0;let n=r,s=this.offset+this.byteOffset;if(s+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,s,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(r)}decodetRNS(r){switch(this._colorType){case ii.GREYSCALE:case ii.TRUECOLOUR:{if(r%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${r}`);if(r/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${r/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(r/2);for(let n=0;n<r/2;n++)this._transparency[n]=this.readUint16();break}case ii.INDEXED_COLOUR:{if(r>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${r} vs ${this._palette.length})`);let n=0;for(;n<r;n++){const s=this.readByte();this._palette[n].push(s)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case ii.UNKNOWN:case ii.GREYSCALE_ALPHA:case ii.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(r){const n=Q6(this),s=this.readUint8();if(s!==S1.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${s}`);const i=this.readBytes(r-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:zV(i)}}decodepHYs(){const r=this.readUint32(),n=this.readUint32(),s=this.readByte();this._png.resolution={x:r,y:n,unit:s}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let r=0;r<this._numberOfFrames;r++){const n={sequenceNumber:this._frames[r].sequenceNumber,delayNumber:this._frames[r].delayNumber,delayDenominator:this._frames[r].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},s=this._frames.at(r);if(s){if(s.data=lN({data:s.data,width:s.width,height:s.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),r===0||s.xOffset===0&&s.yOffset===0&&s.width===this._png.width&&s.height===this._png.height)n.data=s.data;else{const i=this._apng.frames.at(r-1);this.disposeFrame(s,i,n),this.addFrameDataToCanvas(n,s)}this._apng.frames.push(n)}}return this._apng}disposeFrame(r,n,s){switch(r.disposeOp){case Cp.NONE:break;case Cp.BACKGROUND:for(let i=0;i<this._png.height;i++)for(let o=0;o<this._png.width;o++){const a=(i*r.width+o)*this._png.channels;for(let l=0;l<this._png.channels;l++)s.data[a+l]=0}break;case Cp.PREVIOUS:s.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(r,n){const s=1<<this._png.depth,i=(o,a)=>{const l=((o+n.yOffset)*this._png.width+n.xOffset+a)*this._png.channels,u=(o*n.width+a)*this._png.channels;return{index:l,frameIndex:u}};switch(n.blendOp){case I1.SOURCE:for(let o=0;o<n.height;o++)for(let a=0;a<n.width;a++){const{index:l,frameIndex:u}=i(o,a);for(let f=0;f<this._png.channels;f++)r.data[l+f]=n.data[u+f]}break;case I1.OVER:for(let o=0;o<n.height;o++)for(let a=0;a<n.width;a++){const{index:l,frameIndex:u}=i(o,a);for(let f=0;f<this._png.channels;f++){const g=n.data[u+this._png.channels-1]/s,y=f%(this._png.channels-1)===0?1:n.data[u+f],m=Math.floor(g*y+(1-g)*r.data[l+f]);r.data[l+f]+=m}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){var n;if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const r=this._isAnimated?((n=this._frames)==null?void 0:n.at(0)).data:this._inflator.result;if(this._filterMethod!==uN.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===T1.NO_INTERLACE)this._png.data=lN({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===T1.ADAM7)this._png.data=YV({data:r,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const r=this._inflator.result,n=this._frames.at(-1);n?n.data=r:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:Cp.NONE,blendOp:I1.SOURCE,data:r}),this._inflator=new iN,this._writingDataChunks=!1}}function dB(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var hN;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(hN||(hN={}));function fB(t,e){return new hB(t,e).decode()}var yt=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function k1(){yt.console&&typeof yt.console.log=="function"&&yt.console.log.apply(yt.console,arguments)}var mr={log:k1,warn:function(t){yt.console&&(typeof yt.console.warn=="function"?yt.console.warn.apply(yt.console,arguments):k1.call(null,arguments))},error:function(t){yt.console&&(typeof yt.console.error=="function"?yt.console.error.apply(yt.console,arguments):k1(t))}};function P1(t,e,r){var n=new XMLHttpRequest;n.open("GET",t),n.responseType="blob",n.onload=function(){cc(n.response,e,r)},n.onerror=function(){mr.error("could not download file")},n.send()}function dN(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function jp(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var cc=yt.saveAs||((typeof window>"u"?"undefined":ar(window))!=="object"||window!==yt?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,r){var n=yt.URL||yt.webkitURL,s=document.createElement("a");e=e||t.name||"download",s.download=e,s.rel="noopener",typeof t=="string"?(s.href=t,s.origin!==location.origin?dN(s.href)?P1(t,e,r):jp(s,s.target="_blank"):jp(s)):(s.href=n.createObjectURL(t),setTimeout(function(){n.revokeObjectURL(s.href)},4e4),setTimeout(function(){jp(s)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,r){if(e=e||t.name||"download",typeof t=="string")if(dN(t))P1(t,e,r);else{var n=document.createElement("a");n.href=t,n.target="_blank",setTimeout(function(){jp(n)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:ar(i)!=="object"&&(mr.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(t,r),e)}:function(t,e,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),typeof t=="string")return P1(t,e,r);var s=t.type==="application/octet-stream",i=/constructor/i.test(yt.HTMLElement)||yt.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent);if((o||s&&i)&&(typeof FileReader>"u"?"undefined":ar(FileReader))==="object"){var a=new FileReader;a.onloadend=function(){var f=a.result;f=o?f:f.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=f:location=f,n=null},a.readAsDataURL(t)}else{var l=yt.URL||yt.webkitURL,u=l.createObjectURL(t);n?n.location=u:location.href=u,n=null,setTimeout(function(){l.revokeObjectURL(u)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Y6(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(a){return[parseInt(a[1]),parseInt(a[2]),parseInt(a[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(a){return[parseInt(a[1],16),parseInt(a[2],16),parseInt(a[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(a){return[parseInt(a[1]+a[1],16),parseInt(a[2]+a[2],16),parseInt(a[3]+a[3],16)]}}],n=0;n<r.length;n++){var s=r[n].re,i=r[n].process,o=s.exec(t);o&&(e=i(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var a=this.r.toString(16),l=this.g.toString(16),u=this.b.toString(16);return a.length==1&&(a="0"+a),l.length==1&&(l="0"+l),u.length==1&&(u="0"+u),"#"+a+l+u}}var am=yt.atob.bind(yt),fN=yt.btoa.bind(yt);/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function C1(t,e){var r=t[0],n=t[1],s=t[2],i=t[3];r=ts(r,n,s,i,e[0],7,-680876936),i=ts(i,r,n,s,e[1],12,-389564586),s=ts(s,i,r,n,e[2],17,606105819),n=ts(n,s,i,r,e[3],22,-1044525330),r=ts(r,n,s,i,e[4],7,-176418897),i=ts(i,r,n,s,e[5],12,1200080426),s=ts(s,i,r,n,e[6],17,-1473231341),n=ts(n,s,i,r,e[7],22,-45705983),r=ts(r,n,s,i,e[8],7,1770035416),i=ts(i,r,n,s,e[9],12,-1958414417),s=ts(s,i,r,n,e[10],17,-42063),n=ts(n,s,i,r,e[11],22,-1990404162),r=ts(r,n,s,i,e[12],7,1804603682),i=ts(i,r,n,s,e[13],12,-40341101),s=ts(s,i,r,n,e[14],17,-1502002290),r=rs(r,n=ts(n,s,i,r,e[15],22,1236535329),s,i,e[1],5,-165796510),i=rs(i,r,n,s,e[6],9,-1069501632),s=rs(s,i,r,n,e[11],14,643717713),n=rs(n,s,i,r,e[0],20,-373897302),r=rs(r,n,s,i,e[5],5,-701558691),i=rs(i,r,n,s,e[10],9,38016083),s=rs(s,i,r,n,e[15],14,-660478335),n=rs(n,s,i,r,e[4],20,-405537848),r=rs(r,n,s,i,e[9],5,568446438),i=rs(i,r,n,s,e[14],9,-1019803690),s=rs(s,i,r,n,e[3],14,-187363961),n=rs(n,s,i,r,e[8],20,1163531501),r=rs(r,n,s,i,e[13],5,-1444681467),i=rs(i,r,n,s,e[2],9,-51403784),s=rs(s,i,r,n,e[7],14,1735328473),r=ns(r,n=rs(n,s,i,r,e[12],20,-1926607734),s,i,e[5],4,-378558),i=ns(i,r,n,s,e[8],11,-2022574463),s=ns(s,i,r,n,e[11],16,1839030562),n=ns(n,s,i,r,e[14],23,-35309556),r=ns(r,n,s,i,e[1],4,-1530992060),i=ns(i,r,n,s,e[4],11,1272893353),s=ns(s,i,r,n,e[7],16,-155497632),n=ns(n,s,i,r,e[10],23,-1094730640),r=ns(r,n,s,i,e[13],4,681279174),i=ns(i,r,n,s,e[0],11,-358537222),s=ns(s,i,r,n,e[3],16,-722521979),n=ns(n,s,i,r,e[6],23,76029189),r=ns(r,n,s,i,e[9],4,-640364487),i=ns(i,r,n,s,e[12],11,-421815835),s=ns(s,i,r,n,e[15],16,530742520),r=ss(r,n=ns(n,s,i,r,e[2],23,-995338651),s,i,e[0],6,-198630844),i=ss(i,r,n,s,e[7],10,1126891415),s=ss(s,i,r,n,e[14],15,-1416354905),n=ss(n,s,i,r,e[5],21,-57434055),r=ss(r,n,s,i,e[12],6,1700485571),i=ss(i,r,n,s,e[3],10,-1894986606),s=ss(s,i,r,n,e[10],15,-1051523),n=ss(n,s,i,r,e[1],21,-2054922799),r=ss(r,n,s,i,e[8],6,1873313359),i=ss(i,r,n,s,e[15],10,-30611744),s=ss(s,i,r,n,e[6],15,-1560198380),n=ss(n,s,i,r,e[13],21,1309151649),r=ss(r,n,s,i,e[4],6,-145523070),i=ss(i,r,n,s,e[11],10,-1120210379),s=ss(s,i,r,n,e[2],15,718787259),n=ss(n,s,i,r,e[9],21,-343485551),t[0]=ml(r,t[0]),t[1]=ml(n,t[1]),t[2]=ml(s,t[2]),t[3]=ml(i,t[3])}function r0(t,e,r,n,s,i){return e=ml(ml(e,t),ml(n,i)),ml(e<<s|e>>>32-s,r)}function ts(t,e,r,n,s,i,o){return r0(e&r|~e&n,t,e,s,i,o)}function rs(t,e,r,n,s,i,o){return r0(e&n|r&~n,t,e,s,i,o)}function ns(t,e,r,n,s,i,o){return r0(e^r^n,t,e,s,i,o)}function ss(t,e,r,n,s,i,o){return r0(r^(e|~n),t,e,s,i,o)}function X6(t){var e,r=t.length,n=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)C1(n,pB(t.substring(e-64,e)));t=t.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)s[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(C1(n,s),e=0;e<16;e++)s[e]=0;return s[14]=8*r,C1(n,s),n}function pB(t){var e,r=[];for(e=0;e<64;e+=4)r[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return r}var pN="0123456789abcdef".split("");function mB(t){for(var e="",r=0;r<4;r++)e+=pN[t>>8*r+4&15]+pN[t>>8*r&15];return e}function gB(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function v2(t){return X6(t).map(gB).join("")}var yB=function(t){for(var e=0;e<t.length;e++)t[e]=mB(t[e]);return t.join("")}(X6("hello"))!="5d41402abc4b2a76b9719d911017c592";function ml(t,e){if(yB){var r=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(r>>16)<<16|65535&r}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function w2(t,e){var r,n,s,i;if(t!==r){for(var o=(s=t,i=1+(256/t.length|0),new Array(i+1).join(s)),a=[],l=0;l<256;l++)a[l]=l;var u=0;for(l=0;l<256;l++){var f=a[l];u=(u+f+o.charCodeAt(l))%256,a[l]=a[u],a[u]=f}r=t,n=a}else a=n;var g=e.length,y=0,m=0,E="";for(l=0;l<g;l++)m=(m+(f=a[y=(y+1)%256]))%256,a[y]=a[m],a[m]=f,o=a[(a[y]+a[m])%256],E+=String.fromCharCode(e.charCodeAt(l)^o);return E}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var mN={print:4,modify:8,copy:16,"annot-forms":32};function mu(t,e,r,n){this.v=1,this.r=2;var s=192;t.forEach(function(a){if(mN.perm!==void 0)throw new Error("Invalid permission: "+a);s+=mN[a]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var i=(e+this.padding).substr(0,32),o=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,o),this.P=-(1+(255^s)),this.encryptionKey=v2(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(n)).substr(0,5),this.U=w2(this.encryptionKey,this.padding)}function gu(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",r=t.length,n=0;n<r;n++){var s=t.charCodeAt(n);e+=s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?"#"+("0"+s.toString(16)).slice(-2):t[n]}return e}function gN(t){if(ar(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(r,n,s){if(s=s||!1,typeof r!="string"||typeof n!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(r)||(e[r]={});var i=Math.random().toString(35);return e[r][i]=[n,!!s],i},this.unsubscribe=function(r){for(var n in e)if(e[n][r])return delete e[n][r],Object.keys(e[n]).length===0&&delete e[n],!0;return!1},this.publish=function(r){if(e.hasOwnProperty(r)){var n=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[r]){var o=e[r][i];try{o[0].apply(t,n)}catch(a){yt.console&&mr.error("jsPDF PubSub Error",a.message,a)}o[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function ag(t){if(!(this instanceof ag))return new ag(t);var e="opacity,stroke-opacity".split(",");for(var r in t)t.hasOwnProperty(r)&&e.indexOf(r)>=0&&(this[r]=t[r]);this.id="",this.objectNumber=-1}function J6(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function uc(t,e,r,n,s){if(!(this instanceof uc))return new uc(t,e,r,n,s);this.type=t==="axial"?2:3,this.coords=e,this.colors=r,J6.call(this,n,s)}function Pu(t,e,r,n,s){if(!(this instanceof Pu))return new Pu(t,e,r,n,s);this.boundingBox=t,this.xStep=e,this.yStep=r,this.stream="",this.cloneIndex=0,J6.call(this,n,s)}function rt(t){var e,r=typeof arguments[0]=="string"?arguments[0]:"p",n=arguments[1],s=arguments[2],i=arguments[3],o=[],a=1,l=16,u="S",f=null;ar(t=t||{})==="object"&&(r=t.orientation,n=t.unit||n,s=t.format||s,i=t.compress||t.compressPdf||i,(f=t.encryption||null)!==null&&(f.userPassword=f.userPassword||"",f.ownerPassword=f.ownerPassword||"",f.userPermissions=f.userPermissions||[]),a=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(l=t.floatPrecision),u=t.defaultPathOperation||"S"),o=t.filters||(i===!0?["FlateEncode"]:o),n=n||"mm",r=(""+(r||"P")).toLowerCase();var g=t.putOnlyUsedFonts||!1,y={},m={internal:{},__private__:{}};m.__private__.PubSub=gN;var E="1.3",b=m.__private__.getPdfVersion=function(){return E};m.__private__.setPdfVersion=function(v){E=v};var A={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};m.__private__.getPageFormats=function(){return A};var x=m.__private__.getPageFormat=function(v){return A[v]};s=s||"a4";var T="compat",I="advanced",k=T;function H(){this.saveGraphicsState(),W(new ct(xt,0,0,-xt,0,Ni()*xt).toString()+" cm"),this.setFontSize(this.getFontSize()/xt),u="n",k=I}function Z(){this.restoreGraphicsState(),u="S",k=T}var F=m.__private__.combineFontStyleAndFontWeight=function(v,D){if(v=="bold"&&D=="normal"||v=="bold"&&D==400||v=="normal"&&D=="italic"||v=="bold"&&D=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return D&&(v=D==400||D==="normal"?v==="italic"?"italic":"normal":D!=700&&D!=="bold"||v!=="normal"?(D==700?"bold":D)+""+v:"bold"),v};m.advancedAPI=function(v){var D=k===T;return D&&H.call(this),typeof v!="function"||(v(this),D&&Z.call(this)),this},m.compatAPI=function(v){var D=k===I;return D&&Z.call(this),typeof v!="function"||(v(this),D&&H.call(this)),this},m.isAdvancedAPI=function(){return k===I};var P,C=function(v){if(k!==I)throw new Error(v+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},O=m.roundToPrecision=m.__private__.roundToPrecision=function(v,D){var K=e||D;if(isNaN(v)||isNaN(K))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return v.toFixed(K).replace(/0+$/,"")};P=m.hpf=m.__private__.hpf=typeof l=="number"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return O(v,l)}:l==="smart"?function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return O(v,v>-1&&v<1?16:5)}:function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.hpf");return O(v,16)};var N=m.f2=m.__private__.f2=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f2");return O(v,2)},R=m.__private__.f3=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.f3");return O(v,3)},L=m.scale=m.__private__.scale=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.scale");return k===T?v*xt:k===I?v:void 0},X=function(v){return L(function(D){return k===T?Ni()-D:k===I?D:void 0}(v))};m.__private__.setPrecision=m.setPrecision=function(v){typeof parseInt(v,10)=="number"&&(e=parseInt(v,10))};var fe,le="00000000000000000000000000000000",ye=m.__private__.getFileId=function(){return le},ee=m.__private__.setFileId=function(v){return le=v!==void 0&&/^[a-fA-F0-9]{32}$/.test(v)?v.toUpperCase():le.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),f!==null&&(dr=new mu(f.userPermissions,f.userPassword,f.ownerPassword,le)),le};m.setFileId=function(v){return ee(v),this},m.getFileId=function(){return ye()};var ue=m.__private__.convertDateToPDFDate=function(v){var D=v.getTimezoneOffset(),K=D<0?"+":"-",te=Math.floor(Math.abs(D/60)),ae=Math.abs(D%60),Ne=[K,J(te),"'",J(ae),"'"].join("");return["D:",v.getFullYear(),J(v.getMonth()+1),J(v.getDate()),J(v.getHours()),J(v.getMinutes()),J(v.getSeconds()),Ne].join("")},_e=m.__private__.convertPDFDateToDate=function(v){var D=parseInt(v.substr(2,4),10),K=parseInt(v.substr(6,2),10)-1,te=parseInt(v.substr(8,2),10),ae=parseInt(v.substr(10,2),10),Ne=parseInt(v.substr(12,2),10),Ie=parseInt(v.substr(14,2),10);return new Date(D,K,te,ae,Ne,Ie,0)},we=m.__private__.setCreationDate=function(v){var D;if(v===void 0&&(v=new Date),v instanceof Date)D=ue(v);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(v))throw new Error("Invalid argument passed to jsPDF.setCreationDate");D=v}return fe=D},U=m.__private__.getCreationDate=function(v){var D=fe;return v==="jsDate"&&(D=_e(fe)),D};m.setCreationDate=function(v){return we(v),this},m.getCreationDate=function(v){return U(v)};var G,J=m.__private__.padd2=function(v){return("0"+parseInt(v)).slice(-2)},re=m.__private__.padd2Hex=function(v){return("00"+(v=v.toString())).substr(v.length)},ie=0,he=[],ve=[],xe=0,Ae=[],je=[],Ve=!1,Fe=ve;m.__private__.setCustomOutputDestination=function(v){Ve=!0,Fe=v};var Je=function(v){Ve||(Fe=v)};m.__private__.resetCustomOutputDestination=function(){Ve=!1,Fe=ve};var W=m.__private__.out=function(v){return v=v.toString(),xe+=v.length+1,Fe.push(v),Fe},Me=m.__private__.write=function(v){return W(arguments.length===1?v.toString():Array.prototype.join.call(arguments," "))},Tt=m.__private__.getArrayBuffer=function(v){for(var D=v.length,K=new ArrayBuffer(D),te=new Uint8Array(K);D--;)te[D]=v.charCodeAt(D);return K},lt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];m.__private__.getStandardFonts=function(){return lt};var Pe=t.fontSize||16;m.__private__.setFontSize=m.setFontSize=function(v){return Pe=k===I?v/xt:v,this};var st,Be=m.__private__.getFontSize=m.getFontSize=function(){return k===T?Pe:Pe*xt},ot=t.R2L||!1;m.__private__.setR2L=m.setR2L=function(v){return ot=v,this},m.__private__.getR2L=m.getR2L=function(){return ot};var et,Ht=m.__private__.setZoomMode=function(v){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(v))st=v;else if(isNaN(v)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(v)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+v+'" is not recognized.');st=v}else st=parseInt(v,10)};m.__private__.getZoomMode=function(){return st};var Lt,Xe=m.__private__.setPageMode=function(v){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(v)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+v+'" is not recognized.');et=v};m.__private__.getPageMode=function(){return et};var ft=m.__private__.setLayoutMode=function(v){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(v)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+v+'" is not recognized.');Lt=v};m.__private__.getLayoutMode=function(){return Lt},m.__private__.setDisplayMode=m.setDisplayMode=function(v,D,K){return Ht(v),ft(D),Xe(K),this};var Pt={title:"",subject:"",author:"",keywords:"",creator:""};m.__private__.getDocumentProperty=function(v){if(Object.keys(Pt).indexOf(v)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Pt[v]},m.__private__.getDocumentProperties=function(){return Pt},m.__private__.setDocumentProperties=m.setProperties=m.setDocumentProperties=function(v){for(var D in Pt)Pt.hasOwnProperty(D)&&v[D]&&(Pt[D]=v[D]);return this},m.__private__.setDocumentProperty=function(v,D){if(Object.keys(Pt).indexOf(v)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Pt[v]=D};var We,xt,Ze,hr,Ft,It={},At={},yr=[],it={},er={},ut={},vt={},tr=null,kt=0,at=[],Ot=new gN(m),ho=t.hotfixes||[],Gr={},mi={},Gn=[],ct=function v(D,K,te,ae,Ne,Ie){if(!(this instanceof v))return new v(D,K,te,ae,Ne,Ie);isNaN(D)&&(D=1),isNaN(K)&&(K=0),isNaN(te)&&(te=0),isNaN(ae)&&(ae=1),isNaN(Ne)&&(Ne=0),isNaN(Ie)&&(Ie=0),this._matrix=[D,K,te,ae,Ne,Ie]};Object.defineProperty(ct.prototype,"sx",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"shy",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"shx",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"sy",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"tx",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"ty",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"a",{get:function(){return this._matrix[0]},set:function(v){this._matrix[0]=v}}),Object.defineProperty(ct.prototype,"b",{get:function(){return this._matrix[1]},set:function(v){this._matrix[1]=v}}),Object.defineProperty(ct.prototype,"c",{get:function(){return this._matrix[2]},set:function(v){this._matrix[2]=v}}),Object.defineProperty(ct.prototype,"d",{get:function(){return this._matrix[3]},set:function(v){this._matrix[3]=v}}),Object.defineProperty(ct.prototype,"e",{get:function(){return this._matrix[4]},set:function(v){this._matrix[4]=v}}),Object.defineProperty(ct.prototype,"f",{get:function(){return this._matrix[5]},set:function(v){this._matrix[5]=v}}),Object.defineProperty(ct.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ct.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ct.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ct.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ct.prototype.join=function(v){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(v)},ct.prototype.multiply=function(v){var D=v.sx*this.sx+v.shy*this.shx,K=v.sx*this.shy+v.shy*this.sy,te=v.shx*this.sx+v.sy*this.shx,ae=v.shx*this.shy+v.sy*this.sy,Ne=v.tx*this.sx+v.ty*this.shx+this.tx,Ie=v.tx*this.shy+v.ty*this.sy+this.ty;return new ct(D,K,te,ae,Ne,Ie)},ct.prototype.decompose=function(){var v=this.sx,D=this.shy,K=this.shx,te=this.sy,ae=this.tx,Ne=this.ty,Ie=Math.sqrt(v*v+D*D),ze=(v/=Ie)*K+(D/=Ie)*te;K-=v*ze,te-=D*ze;var Ge=Math.sqrt(K*K+te*te);return ze/=Ge,v*(te/=Ge)<D*(K/=Ge)&&(v=-v,D=-D,ze=-ze,Ie=-Ie),{scale:new ct(Ie,0,0,Ge,0,0),translate:new ct(1,0,0,1,ae,Ne),rotate:new ct(v,D,-D,v,0,0),skew:new ct(1,0,ze,1,0,0)}},ct.prototype.toString=function(v){return this.join(" ")},ct.prototype.inversed=function(){var v=this.sx,D=this.shy,K=this.shx,te=this.sy,ae=this.tx,Ne=this.ty,Ie=1/(v*te-D*K),ze=te*Ie,Ge=-D*Ie,pt=-K*Ie,_t=v*Ie;return new ct(ze,Ge,pt,_t,-ze*ae-pt*Ne,-Ge*ae-_t*Ne)},ct.prototype.applyToPoint=function(v){var D=v.x*this.sx+v.y*this.shx+this.tx,K=v.x*this.shy+v.y*this.sy+this.ty;return new _i(D,K)},ct.prototype.applyToRectangle=function(v){var D=this.applyToPoint(v),K=this.applyToPoint(new _i(v.x+v.w,v.y+v.h));return new Ua(D.x,D.y,K.x-D.x,K.y-D.y)},ct.prototype.clone=function(){var v=this.sx,D=this.shy,K=this.shx,te=this.sy,ae=this.tx,Ne=this.ty;return new ct(v,D,K,te,ae,Ne)},m.Matrix=ct;var br=m.matrixMult=function(v,D){return D.multiply(v)},gi=new ct(1,0,0,1,0,0);m.unitMatrix=m.identityMatrix=gi;var _n=function(v,D){if(!er[v]){var K=(D instanceof uc?"Sh":"P")+(Object.keys(it).length+1).toString(10);D.id=K,er[v]=K,it[K]=D,Ot.publish("addPattern",D)}};m.ShadingPattern=uc,m.TilingPattern=Pu,m.addShadingPattern=function(v,D){return C("addShadingPattern()"),_n(v,D),this},m.beginTilingPattern=function(v){C("beginTilingPattern()"),xo(v.boundingBox[0],v.boundingBox[1],v.boundingBox[2]-v.boundingBox[0],v.boundingBox[3]-v.boundingBox[1],v.matrix)},m.endTilingPattern=function(v,D){C("endTilingPattern()"),D.stream=je[G].join(`
`),_n(v,D),Ot.publish("endTilingPattern",D),Gn.pop().restore()};var bn,Tr=m.__private__.newObject=function(){var v=ln();return Ir(v,!0),v},ln=m.__private__.newObjectDeferred=function(){return ie++,he[ie]=function(){return xe},ie},Ir=function(v,D){return D=typeof D=="boolean"&&D,he[v]=xe,D&&W(v+" 0 obj"),v},zo=m.__private__.newAdditionalObject=function(){var v={objId:ln(),content:""};return Ae.push(v),v},fo=ln(),Kn=ln(),Ws=m.__private__.decodeColorString=function(v){var D=v.split(" ");if(D.length!==2||D[1]!=="g"&&D[1]!=="G")D.length!==5||D[4]!=="k"&&D[4]!=="K"||(D=[(1-D[0])*(1-D[3]),(1-D[1])*(1-D[3]),(1-D[2])*(1-D[3]),"r"]);else{var K=parseFloat(D[0]);D=[K,K,K,"r"]}for(var te="#",ae=0;ae<3;ae++)te+=("0"+Math.floor(255*parseFloat(D[ae])).toString(16)).slice(-2);return te},ms=m.__private__.encodeColorString=function(v){var D;typeof v=="string"&&(v={ch1:v});var K=v.ch1,te=v.ch2,ae=v.ch3,Ne=v.ch4,Ie=v.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof K=="string"&&K.charAt(0)!=="#"){var ze=new Y6(K);if(ze.ok)K=ze.toHex();else if(!/^\d*\.?\d*$/.test(K))throw new Error('Invalid color "'+K+'" passed to jsPDF.encodeColorString.')}if(typeof K=="string"&&/^#[0-9A-Fa-f]{3}$/.test(K)&&(K="#"+K[1]+K[1]+K[2]+K[2]+K[3]+K[3]),typeof K=="string"&&/^#[0-9A-Fa-f]{6}$/.test(K)){var Ge=parseInt(K.substr(1),16);K=Ge>>16&255,te=Ge>>8&255,ae=255&Ge}if(te===void 0||Ne===void 0&&K===te&&te===ae)D=typeof K=="string"?K+" "+Ie[0]:v.precision===2?N(K/255)+" "+Ie[0]:R(K/255)+" "+Ie[0];else if(Ne===void 0||ar(Ne)==="object"){if(Ne&&!isNaN(Ne.a)&&Ne.a===0)return["1.","1.","1.",Ie[1]].join(" ");D=typeof K=="string"?[K,te,ae,Ie[1]].join(" "):v.precision===2?[N(K/255),N(te/255),N(ae/255),Ie[1]].join(" "):[R(K/255),R(te/255),R(ae/255),Ie[1]].join(" ")}else D=typeof K=="string"?[K,te,ae,Ne,Ie[2]].join(" "):v.precision===2?[N(K),N(te),N(ae),N(Ne),Ie[2]].join(" "):[R(K),R(te),R(ae),R(Ne),Ie[2]].join(" ");return D},Qn=m.__private__.getFilters=function(){return o},Kr=m.__private__.putStream=function(v){var D=(v=v||{}).data||"",K=v.filters||Qn(),te=v.alreadyAppliedFilters||[],ae=v.addLength1||!1,Ne=D.length,Ie=v.objectId,ze=function(Br){return Br};if(f!==null&&Ie===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");f!==null&&(ze=dr.encryptor(Ie,0));var Ge={};K===!0&&(K=["FlateEncode"]);var pt=v.additionalKeyValues||[],_t=(Ge=rt.API.processDataByFilters!==void 0?rt.API.processDataByFilters(D,K):{data:D,reverseChain:[]}).reverseChain+(Array.isArray(te)?te.join(" "):te.toString());if(Ge.data.length!==0&&(pt.push({key:"Length",value:Ge.data.length}),ae===!0&&pt.push({key:"Length1",value:Ne})),_t.length!=0)if(_t.split("/").length-1==1)pt.push({key:"Filter",value:_t});else{pt.push({key:"Filter",value:"["+_t+"]"});for(var Vt=0;Vt<pt.length;Vt+=1)if(pt[Vt].key==="DecodeParms"){for(var Zt=[],Lr=0;Lr<Ge.reverseChain.split("/").length-1;Lr+=1)Zt.push("null");Zt.push(pt[Vt].value),pt[Vt].value="["+Zt.join(" ")+"]"}}W("<<");for(var nr=0;nr<pt.length;nr++)W("/"+pt[nr].key+" "+pt[nr].value);W(">>"),Ge.data.length!==0&&(W("stream"),W(ze(Ge.data)),W("endstream"))},po=m.__private__.putPage=function(v){var D=v.number,K=v.data,te=v.objId,ae=v.contentsObjId;Ir(te,!0),W("<</Type /Page"),W("/Parent "+v.rootDictionaryObjId+" 0 R"),W("/Resources "+v.resourceDictionaryObjId+" 0 R"),W("/MediaBox ["+parseFloat(P(v.mediaBox.bottomLeftX))+" "+parseFloat(P(v.mediaBox.bottomLeftY))+" "+P(v.mediaBox.topRightX)+" "+P(v.mediaBox.topRightY)+"]"),v.cropBox!==null&&W("/CropBox ["+P(v.cropBox.bottomLeftX)+" "+P(v.cropBox.bottomLeftY)+" "+P(v.cropBox.topRightX)+" "+P(v.cropBox.topRightY)+"]"),v.bleedBox!==null&&W("/BleedBox ["+P(v.bleedBox.bottomLeftX)+" "+P(v.bleedBox.bottomLeftY)+" "+P(v.bleedBox.topRightX)+" "+P(v.bleedBox.topRightY)+"]"),v.trimBox!==null&&W("/TrimBox ["+P(v.trimBox.bottomLeftX)+" "+P(v.trimBox.bottomLeftY)+" "+P(v.trimBox.topRightX)+" "+P(v.trimBox.topRightY)+"]"),v.artBox!==null&&W("/ArtBox ["+P(v.artBox.bottomLeftX)+" "+P(v.artBox.bottomLeftY)+" "+P(v.artBox.topRightX)+" "+P(v.artBox.topRightY)+"]"),typeof v.userUnit=="number"&&v.userUnit!==1&&W("/UserUnit "+v.userUnit),Ot.publish("putPage",{objId:te,pageContext:at[D],pageNumber:D,page:K}),W("/Contents "+ae+" 0 R"),W(">>"),W("endobj");var Ne=K.join(`
`);return k===I&&(Ne+=`
Q`),Ir(ae,!0),Kr({data:Ne,filters:Qn(),objectId:ae}),W("endobj"),te},Gs=m.__private__.putPages=function(){var v,D,K=[];for(v=1;v<=kt;v++)at[v].objId=ln(),at[v].contentsObjId=ln();for(v=1;v<=kt;v++)K.push(po({number:v,data:je[v],objId:at[v].objId,contentsObjId:at[v].contentsObjId,mediaBox:at[v].mediaBox,cropBox:at[v].cropBox,bleedBox:at[v].bleedBox,trimBox:at[v].trimBox,artBox:at[v].artBox,userUnit:at[v].userUnit,rootDictionaryObjId:fo,resourceDictionaryObjId:Kn}));Ir(fo,!0),W("<</Type /Pages");var te="/Kids [";for(D=0;D<kt;D++)te+=K[D]+" 0 R ";W(te+"]"),W("/Count "+kt),W(">>"),W("endobj"),Ot.publish("postPutPages")},Ui=function(v){Ot.publish("putFont",{font:v,out:W,newObject:Tr,putStream:Kr}),v.isAlreadyPutted!==!0&&(v.objectNumber=Tr(),W("<<"),W("/Type /Font"),W("/BaseFont /"+gu(v.postScriptName)),W("/Subtype /Type1"),typeof v.encoding=="string"&&W("/Encoding /"+v.encoding),W("/FirstChar 32"),W("/LastChar 255"),W(">>"),W("endobj"))},mo=function(v){v.objectNumber=Tr();var D=[];D.push({key:"Type",value:"/XObject"}),D.push({key:"Subtype",value:"/Form"}),D.push({key:"BBox",value:"["+[P(v.x),P(v.y),P(v.x+v.width),P(v.y+v.height)].join(" ")+"]"}),D.push({key:"Matrix",value:"["+v.matrix.toString()+"]"});var K=v.pages[1].join(`
`);Kr({data:K,additionalKeyValues:D,objectId:v.objectNumber}),W("endobj")},qo=function(v,D){D||(D=21);var K=Tr(),te=function(Ie,ze){var Ge,pt=[],_t=1/(ze-1);for(Ge=0;Ge<1;Ge+=_t)pt.push(Ge);if(pt.push(1),Ie[0].offset!=0){var Vt={offset:0,color:Ie[0].color};Ie.unshift(Vt)}if(Ie[Ie.length-1].offset!=1){var Zt={offset:1,color:Ie[Ie.length-1].color};Ie.push(Zt)}for(var Lr="",nr=0,Br=0;Br<pt.length;Br++){for(Ge=pt[Br];Ge>Ie[nr+1].offset;)nr++;var Rr=Ie[nr].offset,zr=(Ge-Rr)/(Ie[nr+1].offset-Rr),Or=Ie[nr].color,Cs=Ie[nr+1].color;Lr+=re(Math.round((1-zr)*Or[0]+zr*Cs[0]).toString(16))+re(Math.round((1-zr)*Or[1]+zr*Cs[1]).toString(16))+re(Math.round((1-zr)*Or[2]+zr*Cs[2]).toString(16))}return Lr.trim()}(v.colors,D),ae=[];ae.push({key:"FunctionType",value:"0"}),ae.push({key:"Domain",value:"[0.0 1.0]"}),ae.push({key:"Size",value:"["+D+"]"}),ae.push({key:"BitsPerSample",value:"8"}),ae.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ae.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Kr({data:te,additionalKeyValues:ae,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:K}),W("endobj"),v.objectNumber=Tr(),W("<< /ShadingType "+v.type),W("/ColorSpace /DeviceRGB");var Ne="/Coords ["+P(parseFloat(v.coords[0]))+" "+P(parseFloat(v.coords[1]))+" ";v.type===2?Ne+=P(parseFloat(v.coords[2]))+" "+P(parseFloat(v.coords[3])):Ne+=P(parseFloat(v.coords[2]))+" "+P(parseFloat(v.coords[3]))+" "+P(parseFloat(v.coords[4]))+" "+P(parseFloat(v.coords[5])),W(Ne+="]"),v.matrix&&W("/Matrix ["+v.matrix.toString()+"]"),W("/Function "+K+" 0 R"),W("/Extend [true true]"),W(">>"),W("endobj")},$o=function(v,D){var K=ln(),te=Tr();D.push({resourcesOid:K,objectOid:te}),v.objectNumber=te;var ae=[];ae.push({key:"Type",value:"/Pattern"}),ae.push({key:"PatternType",value:"1"}),ae.push({key:"PaintType",value:"1"}),ae.push({key:"TilingType",value:"1"}),ae.push({key:"BBox",value:"["+v.boundingBox.map(P).join(" ")+"]"}),ae.push({key:"XStep",value:P(v.xStep)}),ae.push({key:"YStep",value:P(v.yStep)}),ae.push({key:"Resources",value:K+" 0 R"}),v.matrix&&ae.push({key:"Matrix",value:"["+v.matrix.toString()+"]"}),Kr({data:v.stream,additionalKeyValues:ae,objectId:v.objectNumber}),W("endobj")},Th=function(v){for(var D in v.objectNumber=Tr(),W("<<"),v)switch(D){case"opacity":W("/ca "+N(v[D]));break;case"stroke-opacity":W("/CA "+N(v[D]))}W(">>"),W("endobj")},go=function(v){Ir(v.resourcesOid,!0),W("<<"),W("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var D in W("/Font <<"),It)It.hasOwnProperty(D)&&(g===!1||g===!0&&y.hasOwnProperty(D))&&W("/"+D+" "+It[D].objectNumber+" 0 R");W(">>")}(),function(){if(Object.keys(it).length>0){for(var D in W("/Shading <<"),it)it.hasOwnProperty(D)&&it[D]instanceof uc&&it[D].objectNumber>=0&&W("/"+D+" "+it[D].objectNumber+" 0 R");Ot.publish("putShadingPatternDict"),W(">>")}}(),function(D){if(Object.keys(it).length>0){for(var K in W("/Pattern <<"),it)it.hasOwnProperty(K)&&it[K]instanceof m.TilingPattern&&it[K].objectNumber>=0&&it[K].objectNumber<D&&W("/"+K+" "+it[K].objectNumber+" 0 R");Ot.publish("putTilingPatternDict"),W(">>")}}(v.objectOid),function(){if(Object.keys(ut).length>0){var D;for(D in W("/ExtGState <<"),ut)ut.hasOwnProperty(D)&&ut[D].objectNumber>=0&&W("/"+D+" "+ut[D].objectNumber+" 0 R");Ot.publish("putGStateDict"),W(">>")}}(),function(){for(var D in W("/XObject <<"),Gr)Gr.hasOwnProperty(D)&&Gr[D].objectNumber>=0&&W("/"+D+" "+Gr[D].objectNumber+" 0 R");Ot.publish("putXobjectDict"),W(">>")}(),W(">>"),W("endobj")},ql=function(v){At[v.fontName]=At[v.fontName]||{},At[v.fontName][v.fontStyle]=v.id},La=function(v,D,K,te,ae){var Ne={id:"F"+(Object.keys(It).length+1).toString(10),postScriptName:v,fontName:D,fontStyle:K,encoding:te,isStandardFont:ae||!1,metadata:{}};return Ot.publish("addFont",{font:Ne,instance:this}),It[Ne.id]=Ne,ql(Ne),Ne.id},Nn=m.__private__.pdfEscape=m.pdfEscape=function(v,D){return function(K,te){var ae,Ne,Ie,ze,Ge,pt,_t,Vt,Zt;if(Ie=(te=te||{}).sourceEncoding||"Unicode",Ge=te.outputEncoding,(te.autoencode||Ge)&&It[We].metadata&&It[We].metadata[Ie]&&It[We].metadata[Ie].encoding&&(ze=It[We].metadata[Ie].encoding,!Ge&&It[We].encoding&&(Ge=It[We].encoding),!Ge&&ze.codePages&&(Ge=ze.codePages[0]),typeof Ge=="string"&&(Ge=ze[Ge]),Ge)){for(_t=!1,pt=[],ae=0,Ne=K.length;ae<Ne;ae++)(Vt=Ge[K.charCodeAt(ae)])?pt.push(String.fromCharCode(Vt)):pt.push(K[ae]),pt[ae].charCodeAt(0)>>8&&(_t=!0);K=pt.join("")}for(ae=K.length;_t===void 0&&ae!==0;)K.charCodeAt(ae-1)>>8&&(_t=!0),ae--;if(!_t)return K;for(pt=te.noBOM?[]:[254,255],ae=0,Ne=K.length;ae<Ne;ae++){if((Zt=(Vt=K.charCodeAt(ae))>>8)>>8)throw new Error("Character at position "+ae+" of string '"+K+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");pt.push(Zt),pt.push(Vt-(Zt<<8))}return String.fromCharCode.apply(void 0,pt)}(v,D).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Ks=m.__private__.beginPage=function(v){je[++kt]=[],at[kt]={objId:0,contentsObjId:0,userUnit:Number(a),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(v[0]),topRightY:Number(v[1])}},Hl(kt),Je(je[G])},Ra=function(v,D){var K,te,ae;switch(r=D||r,typeof v=="string"&&(K=x(v.toLowerCase()),Array.isArray(K)&&(te=K[0],ae=K[1])),Array.isArray(v)&&(te=v[0]*xt,ae=v[1]*xt),isNaN(te)&&(te=s[0],ae=s[1]),(te>14400||ae>14400)&&(mr.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),te=Math.min(14400,te),ae=Math.min(14400,ae)),s=[te,ae],r.substr(0,1)){case"l":ae>te&&(s=[ae,te]);break;case"p":te>ae&&(s=[ae,te])}Ks(s),ht(Da),W(Bi),ur!==0&&W(ur+" J"),Xl!==0&&W(Xl+" j"),Ot.publish("addPage",{pageNumber:kt})},$l=function(v){v>0&&v<=kt&&(je.splice(v,1),at.splice(v,1),kt--,G>kt&&(G=kt),this.setPage(G))},Hl=function(v){v>0&&v<=kt&&(G=v)},Wl=m.__private__.getNumberOfPages=m.getNumberOfPages=function(){return je.length-1},Gl=function(v,D,K){var te,ae=void 0;return K=K||{},v=v!==void 0?v:It[We].fontName,D=D!==void 0?D:It[We].fontStyle,te=v.toLowerCase(),At[te]!==void 0&&At[te][D]!==void 0?ae=At[te][D]:At[v]!==void 0&&At[v][D]!==void 0?ae=At[v][D]:K.disableWarning===!1&&mr.warn("Unable to look up font label for font '"+v+"', '"+D+"'. Refer to getFontList() for available fonts."),ae||K.noFallback||(ae=At.times[D])==null&&(ae=At.times.normal),ae},ks=m.__private__.putInfo=function(){var v=Tr(),D=function(te){return te};for(var K in f!==null&&(D=dr.encryptor(v,0)),W("<<"),W("/Producer ("+Nn(D("jsPDF "+rt.version))+")"),Pt)Pt.hasOwnProperty(K)&&Pt[K]&&W("/"+K.substr(0,1).toUpperCase()+K.substr(1)+" ("+Nn(D(Pt[K]))+")");W("/CreationDate ("+Nn(D(fe))+")"),W(">>"),W("endobj")},yo=m.__private__.putCatalog=function(v){var D=(v=v||{}).rootDictionaryObjId||fo;switch(Tr(),W("<<"),W("/Type /Catalog"),W("/Pages "+D+" 0 R"),st||(st="fullwidth"),st){case"fullwidth":W("/OpenAction [3 0 R /FitH null]");break;case"fullheight":W("/OpenAction [3 0 R /FitV null]");break;case"fullpage":W("/OpenAction [3 0 R /Fit]");break;case"original":W("/OpenAction [3 0 R /XYZ null null 1]");break;default:var K=""+st;K.substr(K.length-1)==="%"&&(st=parseInt(st)/100),typeof st=="number"&&W("/OpenAction [3 0 R /XYZ null null "+N(st)+"]")}switch(Lt||(Lt="continuous"),Lt){case"continuous":W("/PageLayout /OneColumn");break;case"single":W("/PageLayout /SinglePage");break;case"two":case"twoleft":W("/PageLayout /TwoColumnLeft");break;case"tworight":W("/PageLayout /TwoColumnRight")}et&&W("/PageMode /"+et),Ot.publish("putCatalog"),W(">>"),W("endobj")},Gc=m.__private__.putTrailer=function(){W("trailer"),W("<<"),W("/Size "+(ie+1)),W("/Root "+ie+" 0 R"),W("/Info "+(ie-1)+" 0 R"),f!==null&&W("/Encrypt "+dr.oid+" 0 R"),W("/ID [ <"+le+"> <"+le+"> ]"),W(">>")},jr=m.__private__.putHeader=function(){W("%PDF-"+E),W("%")},Kc=m.__private__.putXRef=function(){var v="0000000000";W("xref"),W("0 "+(ie+1)),W("0000000000 65535 f ");for(var D=1;D<=ie;D++)typeof he[D]=="function"?W((v+he[D]()).slice(-10)+" 00000 n "):he[D]!==void 0?W((v+he[D]).slice(-10)+" 00000 n "):W("0000000000 00000 n ")},yi=m.__private__.buildDocument=function(){var v;ie=0,xe=0,ve=[],he=[],Ae=[],fo=ln(),Kn=ln(),Je(ve),Ot.publish("buildDocument"),jr(),Gs(),function(){Ot.publish("putAdditionalObjects");for(var K=0;K<Ae.length;K++){var te=Ae[K];Ir(te.objId,!0),W(te.content),W("endobj")}Ot.publish("postPutAdditionalObjects")}(),v=[],function(){for(var K in It)It.hasOwnProperty(K)&&(g===!1||g===!0&&y.hasOwnProperty(K))&&Ui(It[K])}(),function(){var K;for(K in ut)ut.hasOwnProperty(K)&&Th(ut[K])}(),function(){for(var K in Gr)Gr.hasOwnProperty(K)&&mo(Gr[K])}(),function(K){var te;for(te in it)it.hasOwnProperty(te)&&(it[te]instanceof uc?qo(it[te]):it[te]instanceof Pu&&$o(it[te],K))}(v),Ot.publish("putResources"),v.forEach(go),go({resourcesOid:Kn,objectOid:Number.MAX_SAFE_INTEGER}),Ot.publish("postPutResources"),f!==null&&(dr.oid=Tr(),W("<<"),W("/Filter /Standard"),W("/V "+dr.v),W("/R "+dr.r),W("/U <"+dr.toHexString(dr.U)+">"),W("/O <"+dr.toHexString(dr.O)+">"),W("/P "+dr.P),W(">>"),W("endobj")),ks(),yo();var D=xe;return Kc(),Gc(),W("startxref"),W(""+D),W("%%EOF"),Je(je[G]),ve.join(`
`)},Ho=m.__private__.getBlob=function(v){return new Blob([Tt(v)],{type:"application/pdf"})},Kl=m.output=m.__private__.output=(bn=function(v,D){switch(typeof(D=D||{})=="string"?D={filename:D}:D.filename=D.filename||"generated.pdf",v){case void 0:return yi();case"save":m.save(D.filename);break;case"arraybuffer":return Tt(yi());case"blob":return Ho(yi());case"bloburi":case"bloburl":if(yt.URL!==void 0&&typeof yt.URL.createObjectURL=="function")return yt.URL&&yt.URL.createObjectURL(Ho(yi()))||void 0;mr.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var K="",te=yi();try{K=fN(te)}catch{K=fN(unescape(encodeURIComponent(te)))}return"data:application/pdf;filename="+D.filename+";base64,"+K;case"pdfobjectnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var ae="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",Ne=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';D.pdfObjectUrl&&(ae=D.pdfObjectUrl,Ne="");var Ie='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ae+'"'+Ne+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(D)+");<\/script></body></html>",ze=yt.open();return ze!==null&&ze.document.write(Ie),ze}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(yt)==="[object Window]"){var Ge='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(D.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+D.filename+'" width="500px" height="400px" /></body></html>',pt=yt.open();if(pt!==null){pt.document.write(Ge);var _t=this;pt.document.documentElement.querySelector("#pdfViewer").onload=function(){pt.document.title=D.filename,pt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(_t.output("bloburl"))}}return pt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(yt)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Vt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",D)+'"></iframe></body></html>',Zt=yt.open();if(Zt!==null&&(Zt.document.write(Vt),Zt.document.title=D.filename),Zt||typeof safari>"u")return Zt;break;case"datauri":case"dataurl":return yt.document.location.href=this.output("datauristring",D);default:return null}},bn.foo=function(){try{return bn.apply(this,arguments)}catch(K){var v=K.stack||"";~v.indexOf(" at ")&&(v=v.split(" at ")[1]);var D="Error in function "+v.split(`
`)[0].split("<")[0]+": "+K.message;if(!yt.console)throw new Error(D);yt.console.error(D,K),yt.alert&&alert(D)}},bn.foo.bar=bn,bn.foo),Ps=function(v){return Array.isArray(ho)===!0&&ho.indexOf(v)>-1};switch(n){case"pt":xt=1;break;case"mm":xt=72/25.4;break;case"cm":xt=72/2.54;break;case"in":xt=72;break;case"px":xt=Ps("px_scaling")==1?.75:96/72;break;case"pc":case"em":xt=12;break;case"ex":xt=6;break;default:if(typeof n!="number")throw new Error("Invalid unit: "+n);xt=n}var dr=null;we(),ee();var fn=m.__private__.getPageInfo=m.getPageInfo=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:at[v].objId,pageNumber:v,pageContext:at[v]}},Wo=m.__private__.getPageInfoByObjId=function(v){if(isNaN(v)||v%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var D in at)if(at[D].objId===v)break;return fn(D)},Oa=m.__private__.getCurrentPageInfo=m.getCurrentPageInfo=function(){return{objId:at[G].objId,pageNumber:G,pageContext:at[G]}};m.addPage=function(){return Ra.apply(this,arguments),this},m.setPage=function(){return Hl.apply(this,arguments),Je.call(this,je[G]),this},m.insertPage=function(v){return this.addPage(),this.movePage(G,v),this},m.movePage=function(v,D){var K,te;if(v>D){K=je[v],te=at[v];for(var ae=v;ae>D;ae--)je[ae]=je[ae-1],at[ae]=at[ae-1];je[D]=K,at[D]=te,this.setPage(D)}else if(v<D){K=je[v],te=at[v];for(var Ne=v;Ne<D;Ne++)je[Ne]=je[Ne+1],at[Ne]=at[Ne+1];je[D]=K,at[D]=te,this.setPage(D)}return this},m.deletePage=function(){return $l.apply(this,arguments),this},m.__private__.text=m.text=function(v,D,K,te,ae){var Ne,Ie,ze,Ge,pt,_t,Vt,Zt,Lr,nr=(te=te||{}).scope||this;if(typeof v=="number"&&typeof D=="number"&&(typeof K=="string"||Array.isArray(K))){var Br=K;K=D,D=v,v=Br}if(arguments[3]instanceof ct==0?(ze=arguments[4],Ge=arguments[5],ar(Vt=arguments[3])==="object"&&Vt!==null||(typeof ze=="string"&&(Ge=ze,ze=null),typeof Vt=="string"&&(Ge=Vt,Vt=null),typeof Vt=="number"&&(ze=Vt,Vt=null),te={flags:Vt,angle:ze,align:Ge})):(C("The transform parameter of text() with a Matrix value"),Lr=ae),isNaN(D)||isNaN(K)||v==null)throw new Error("Invalid arguments passed to jsPDF.text");if(v.length===0)return nr;var Rr,zr="",Or=typeof te.lineHeightFactor=="number"?te.lineHeightFactor:wo,Cs=nr.internal.scaleFactor;function Ei(rr){return rr=rr.split("	").join(Array(te.TabLen||9).join(" ")),Nn(rr,Vt)}function Ai(rr){for(var fr,Yr=rr.concat(),pn=[],Jo=Yr.length;Jo--;)typeof(fr=Yr.shift())=="string"?pn.push(fr):Array.isArray(rr)&&(fr.length===1||fr[1]===void 0&&fr[2]===void 0)?pn.push(fr[0]):pn.push([fr[0],fr[1],fr[2]]);return pn}function d(rr,fr){var Yr;if(typeof rr=="string")Yr=fr(rr)[0];else if(Array.isArray(rr)){for(var pn,Jo,Bh=rr.concat(),ru=[],Bf=Bh.length;Bf--;)typeof(pn=Bh.shift())=="string"?ru.push(fr(pn)[0]):Array.isArray(pn)&&typeof pn[0]=="string"&&(Jo=fr(pn[0],pn[1],pn[2]),ru.push([Jo[0],Jo[1],Jo[2]]));Yr=ru}return Yr}var _=!1,j=!0;if(typeof v=="string")_=!0;else if(Array.isArray(v)){var q=v.concat();Ie=[];for(var ce,ge=q.length;ge--;)(typeof(ce=q.shift())!="string"||Array.isArray(ce)&&typeof ce[0]!="string")&&(j=!1);_=j}if(_===!1)throw new Error('Type of text must be string or Array. "'+v+'" is not recognized.');typeof v=="string"&&(v=v.match(/[\r?\n]/)?v.split(/\r\n|\r|\n/g):[v]);var Oe=Pe/nr.internal.scaleFactor,zt=Oe*(Or-1);switch(te.baseline){case"bottom":K-=zt;break;case"top":K+=Oe-zt;break;case"hanging":K+=Oe-2*zt;break;case"middle":K+=Oe/2-zt}if((_t=te.maxWidth||0)>0&&(typeof v=="string"?v=nr.splitTextToSize(v,_t):Object.prototype.toString.call(v)==="[object Array]"&&(v=v.reduce(function(rr,fr){return rr.concat(nr.splitTextToSize(fr,_t))},[]))),Ne={text:v,x:D,y:K,options:te,mutex:{pdfEscape:Nn,activeFontKey:We,fonts:It,activeFontSize:Pe}},Ot.publish("preProcessText",Ne),v=Ne.text,ze=(te=Ne.options).angle,Lr instanceof ct==0&&ze&&typeof ze=="number"){ze*=Math.PI/180,te.rotationDirection===0&&(ze=-ze),k===I&&(ze=-ze);var Dr=Math.cos(ze),Dt=Math.sin(ze);Lr=new ct(Dr,Dt,-Dt,Dr,0,0)}else ze&&ze instanceof ct&&(Lr=ze);k!==I||Lr||(Lr=gi),(pt=te.charSpace||xi)!==void 0&&(zr+=P(L(pt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Zt=te.horizontalScale)!==void 0&&(zr+=P(100*Zt)+` Tz
`),te.lang;var Xt=-1,vr=te.renderingMode!==void 0?te.renderingMode:te.stroke,Ys=nr.internal.getCurrentPageInfo().pageContext;switch(vr){case 0:case!1:case"fill":Xt=0;break;case 1:case!0:case"stroke":Xt=1;break;case 2:case"fillThenStroke":Xt=2;break;case 3:case"invisible":Xt=3;break;case 4:case"fillAndAddForClipping":Xt=4;break;case 5:case"strokeAndAddPathForClipping":Xt=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Xt=6;break;case 7:case"addToPathForClipping":Xt=7}var Yn=Ys.usedRenderingMode!==void 0?Ys.usedRenderingMode:-1;Xt!==-1?zr+=Xt+` Tr
`:Yn!==-1&&(zr+=`0 Tr
`),Xt!==-1&&(Ys.usedRenderingMode=Xt),Ge=te.align||"left";var jn,zi=Pe*Or,Rh=nr.internal.pageSize.getWidth(),Oh=It[We];pt=te.charSpace||xi,_t=te.maxWidth||0,Vt=Object.assign({autoencode:!0,noBOM:!0},te.flags);var Ba=[],ec=function(rr){return nr.getStringUnitWidth(rr,{font:Oh,charSpace:pt,fontSize:Pe,doKerning:!1})*Pe/Cs};if(Object.prototype.toString.call(v)==="[object Array]"){var Xs;Ie=Ai(v),Ge!=="left"&&(jn=Ie.map(ec));var Js,za=0;if(Ge==="right"){D-=jn[0],v=[],ge=Ie.length;for(var Xo=0;Xo<ge;Xo++)Xo===0?(Js=En(D),Xs=Vi(K)):(Js=L(za-jn[Xo]),Xs=-zi),v.push([Ie[Xo],Js,Xs]),za=jn[Xo]}else if(Ge==="center"){D-=jn[0]/2,v=[],ge=Ie.length;for(var qa=0;qa<ge;qa++)qa===0?(Js=En(D),Xs=Vi(K)):(Js=L((za-jn[qa])/2),Xs=-zi),v.push([Ie[qa],Js,Xs]),za=jn[qa]}else if(Ge==="left"){v=[],ge=Ie.length;for(var Dh=0;Dh<ge;Dh++)v.push(Ie[Dh])}else if(Ge==="justify"&&Oh.encoding==="Identity-H"){v=[],ge=Ie.length,_t=_t!==0?_t:Rh;for(var tu=0,Qr=0;Qr<ge;Qr++)if(Xs=Qr===0?Vi(K):-zi,Js=Qr===0?En(D):tu,Qr<ge-1){var Vf=L((_t-jn[Qr])/(Ie[Qr].split(" ").length-1)),bo=Ie[Qr].split(" ");v.push([bo[0]+" ",Js,Xs]),tu=0;for(var No=1;No<bo.length;No++){var Mh=(ec(bo[No-1]+" "+bo[No])-ec(bo[No]))*Cs+Vf;No==bo.length-1?v.push([bo[No],Mh,0]):v.push([bo[No]+" ",Mh,0]),tu-=Mh}}else v.push([Ie[Qr],Js,Xs]);v.push(["",tu,0])}else{if(Ge!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(v=[],ge=Ie.length,_t=_t!==0?_t:Rh,Qr=0;Qr<ge;Qr++){Xs=Qr===0?Vi(K):-zi,Js=Qr===0?En(D):0;var Fh=Ie[Qr].split(" ").length-1,Uh=Fh>0?(_t-jn[Qr])/Fh:0;Qr<ge-1?Ba.push(P(L(Uh))):Ba.push(0),v.push([Ie[Qr],Js,Xs])}}}(typeof te.R2L=="boolean"?te.R2L:ot)===!0&&(v=d(v,function(rr,fr,Yr){return[rr.split("").reverse().join(""),fr,Yr]})),Ne={text:v,x:D,y:K,options:te,mutex:{pdfEscape:Nn,activeFontKey:We,fonts:It,activeFontSize:Pe}},Ot.publish("postProcessText",Ne),v=Ne.text,Rr=Ne.mutex.isHex||!1;var Vh=It[We].encoding;Vh!=="WinAnsiEncoding"&&Vh!=="StandardEncoding"||(v=d(v,function(rr,fr,Yr){return[Ei(rr),fr,Yr]})),Ie=Ai(v),v=[];for(var $a,Ha,Wa,tc=Array.isArray(Ie[0])?1:0,Ga="",rc=function(rr,fr,Yr){var pn="";return Yr instanceof ct?(Yr=typeof te.angle=="number"?br(Yr,new ct(1,0,0,1,rr,fr)):br(new ct(1,0,0,1,rr,fr),Yr),k===I&&(Yr=br(new ct(1,0,0,-1,0,0),Yr)),pn=Yr.join(" ")+` Tm
`):pn=P(rr)+" "+P(fr)+` Td
`,pn},Si=0;Si<Ie.length;Si++){switch(Ga="",tc){case 1:Wa=(Rr?"<":"(")+Ie[Si][0]+(Rr?">":")"),$a=parseFloat(Ie[Si][1]),Ha=parseFloat(Ie[Si][2]);break;case 0:Wa=(Rr?"<":"(")+Ie[Si]+(Rr?">":")"),$a=En(D),Ha=Vi(K)}Ba!==void 0&&Ba[Si]!==void 0&&(Ga=Ba[Si]+` Tw
`),Si===0?v.push(Ga+rc($a,Ha,Lr)+Wa):tc===0?v.push(Ga+Wa):tc===1&&v.push(Ga+rc($a,Ha,Lr)+Wa)}v=tc===0?v.join(` Tj
T* `):v.join(` Tj
`),v+=` Tj
`;var Eo=`BT
/`;return Eo+=We+" "+Pe+` Tf
`,Eo+=P(Pe*Or)+` TL
`,Eo+=Qs+`
`,Eo+=zr,Eo+=v,W(Eo+="ET"),y[We]=!0,nr};var Qc=m.__private__.clip=m.clip=function(v){return W(v==="evenodd"?"W*":"W"),this};m.clipEvenOdd=function(){return Qc("evenodd")},m.__private__.discardPath=m.discardPath=function(){return W("n"),this};var Ut=m.__private__.isValidStyle=function(v){var D=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(v)!==-1&&(D=!0),D};m.__private__.setDefaultPathOperation=m.setDefaultPathOperation=function(v){return Ut(v)&&(u=v),this};var Go=m.__private__.getStyle=m.getStyle=function(v){var D=u;switch(v){case"D":case"S":D="S";break;case"F":D="f";break;case"FD":case"DF":D="B";break;case"f":case"f*":case"B":case"B*":D=v}return D},vo=m.close=function(){return W("h"),this};m.stroke=function(){return W("S"),this},m.fill=function(v){return vi("f",v),this},m.fillEvenOdd=function(v){return vi("f*",v),this},m.fillStroke=function(v){return vi("B",v),this},m.fillStrokeEvenOdd=function(v){return vi("B*",v),this};var vi=function(v,D){ar(D)==="object"?Ih(D,v):W(v)},Ko=function(v){v===null||k===I&&v===void 0||(v=Go(v),W(v))};function Yc(v,D,K,te,ae){var Ne=new Pu(D||this.boundingBox,K||this.xStep,te||this.yStep,this.gState,ae||this.matrix);Ne.stream=this.stream;var Ie=v+"$$"+this.cloneIndex+++"$$";return _n(Ie,Ne),Ne}var Ih=function(v,D){var K=er[v.key],te=it[K];if(te instanceof uc)W("q"),W(kh(D)),te.gState&&m.setGState(te.gState),W(v.matrix.toString()+" cm"),W("/"+K+" sh"),W("Q");else if(te instanceof Pu){var ae=new ct(1,0,0,-1,0,Ni());v.matrix&&(ae=ae.multiply(v.matrix||gi),K=Yc.call(te,v.key,v.boundingBox,v.xStep,v.yStep,ae).id),W("q"),W("/Pattern cs"),W("/"+K+" scn"),te.gState&&m.setGState(te.gState),W(D),W("Q")}},kh=function(v){switch(v){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},Ql=m.moveTo=function(v,D){return W(P(L(v))+" "+P(X(D))+" m"),this},Xc=m.lineTo=function(v,D){return W(P(L(v))+" "+P(X(D))+" l"),this},Cn=m.curveTo=function(v,D,K,te,ae,Ne){return W([P(L(v)),P(X(D)),P(L(K)),P(X(te)),P(L(ae)),P(X(Ne)),"c"].join(" ")),this};m.__private__.line=m.line=function(v,D,K,te,ae){if(isNaN(v)||isNaN(D)||isNaN(K)||isNaN(te)||!Ut(ae))throw new Error("Invalid arguments passed to jsPDF.line");return k===T?this.lines([[K-v,te-D]],v,D,[1,1],ae||"S"):this.lines([[K-v,te-D]],v,D,[1,1]).stroke()},m.__private__.lines=m.lines=function(v,D,K,te,ae,Ne){var Ie,ze,Ge,pt,_t,Vt,Zt,Lr,nr,Br,Rr,zr;if(typeof v=="number"&&(zr=K,K=D,D=v,v=zr),te=te||[1,1],Ne=Ne||!1,isNaN(D)||isNaN(K)||!Array.isArray(v)||!Array.isArray(te)||!Ut(ae)||typeof Ne!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Ql(D,K),Ie=te[0],ze=te[1],pt=v.length,Br=D,Rr=K,Ge=0;Ge<pt;Ge++)(_t=v[Ge]).length===2?(Br=_t[0]*Ie+Br,Rr=_t[1]*ze+Rr,Xc(Br,Rr)):(Vt=_t[0]*Ie+Br,Zt=_t[1]*ze+Rr,Lr=_t[2]*Ie+Br,nr=_t[3]*ze+Rr,Br=_t[4]*Ie+Br,Rr=_t[5]*ze+Rr,Cn(Vt,Zt,Lr,nr,Br,Rr));return Ne&&vo(),Ko(ae),this},m.path=function(v){for(var D=0;D<v.length;D++){var K=v[D],te=K.c;switch(K.op){case"m":Ql(te[0],te[1]);break;case"l":Xc(te[0],te[1]);break;case"c":Cn.apply(this,te);break;case"h":vo()}}return this},m.__private__.rect=m.rect=function(v,D,K,te,ae){if(isNaN(v)||isNaN(D)||isNaN(K)||isNaN(te)||!Ut(ae))throw new Error("Invalid arguments passed to jsPDF.rect");return k===T&&(te=-te),W([P(L(v)),P(X(D)),P(L(K)),P(L(te)),"re"].join(" ")),Ko(ae),this},m.__private__.triangle=m.triangle=function(v,D,K,te,ae,Ne,Ie){if(isNaN(v)||isNaN(D)||isNaN(K)||isNaN(te)||isNaN(ae)||isNaN(Ne)||!Ut(Ie))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[K-v,te-D],[ae-K,Ne-te],[v-ae,D-Ne]],v,D,[1,1],Ie,!0),this},m.__private__.roundedRect=m.roundedRect=function(v,D,K,te,ae,Ne,Ie){if(isNaN(v)||isNaN(D)||isNaN(K)||isNaN(te)||isNaN(ae)||isNaN(Ne)||!Ut(Ie))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var ze=4/3*(Math.SQRT2-1);return ae=Math.min(ae,.5*K),Ne=Math.min(Ne,.5*te),this.lines([[K-2*ae,0],[ae*ze,0,ae,Ne-Ne*ze,ae,Ne],[0,te-2*Ne],[0,Ne*ze,-ae*ze,Ne,-ae,Ne],[2*ae-K,0],[-ae*ze,0,-ae,-Ne*ze,-ae,-Ne],[0,2*Ne-te],[0,-Ne*ze,ae*ze,-Ne,ae,-Ne]],v+ae,D,[1,1],Ie,!0),this},m.__private__.ellipse=m.ellipse=function(v,D,K,te,ae){if(isNaN(v)||isNaN(D)||isNaN(K)||isNaN(te)||!Ut(ae))throw new Error("Invalid arguments passed to jsPDF.ellipse");var Ne=4/3*(Math.SQRT2-1)*K,Ie=4/3*(Math.SQRT2-1)*te;return Ql(v+K,D),Cn(v+K,D-Ie,v+Ne,D-te,v,D-te),Cn(v-Ne,D-te,v-K,D-Ie,v-K,D),Cn(v-K,D+Ie,v-Ne,D+te,v,D+te),Cn(v+Ne,D+te,v+K,D+Ie,v+K,D),Ko(ae),this},m.__private__.circle=m.circle=function(v,D,K,te){if(isNaN(v)||isNaN(D)||isNaN(K)||!Ut(te))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(v,D,K,K,te)},m.setFont=function(v,D,K){return K&&(D=F(D,K)),We=Gl(v,D,{disableWarning:!1}),this};var wi=m.__private__.getFont=m.getFont=function(){return It[Gl.apply(m,arguments)]};m.__private__.getFontList=m.getFontList=function(){var v,D,K={};for(v in At)if(At.hasOwnProperty(v))for(D in K[v]=[],At[v])At[v].hasOwnProperty(D)&&K[v].push(D);return K},m.addFont=function(v,D,K,te,ae){var Ne=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&Ne.indexOf(arguments[3])!==-1?ae=arguments[3]:arguments[3]&&Ne.indexOf(arguments[3])==-1&&(K=F(K,te)),La.call(this,v,D,K,ae=ae||"Identity-H")};var wo,Da=t.lineWidth||.200025,Jc=m.__private__.getLineWidth=m.getLineWidth=function(){return Da},ht=m.__private__.setLineWidth=m.setLineWidth=function(v){return Da=v,W(P(L(v))+" w"),this};m.__private__.setLineDash=rt.API.setLineDash=rt.API.setLineDashPattern=function(v,D){if(v=v||[],D=D||0,isNaN(D)||!Array.isArray(v))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return v=v.map(function(K){return P(L(K))}).join(" "),D=P(L(D)),W("["+v+"] "+D+" d"),this};var Ph=m.__private__.getLineHeight=m.getLineHeight=function(){return Pe*wo};m.__private__.getLineHeight=m.getLineHeight=function(){return Pe*wo};var Ch=m.__private__.setLineHeightFactor=m.setLineHeightFactor=function(v){return typeof(v=v||1.15)=="number"&&(wo=v),this},jh=m.__private__.getLineHeightFactor=m.getLineHeightFactor=function(){return wo};Ch(t.lineHeight);var En=m.__private__.getHorizontalCoordinate=function(v){return L(v)},Vi=m.__private__.getVerticalCoordinate=function(v){return k===I?v:at[G].mediaBox.topRightY-at[G].mediaBox.bottomLeftY-L(v)},Lh=m.__private__.getHorizontalCoordinateString=m.getHorizontalCoordinateString=function(v){return P(En(v))},Ma=m.__private__.getVerticalCoordinateString=m.getVerticalCoordinateString=function(v){return P(Vi(v))},Bi=t.strokeColor||"0 G";m.__private__.getStrokeColor=m.getDrawColor=function(){return Ws(Bi)},m.__private__.setStrokeColor=m.setDrawColor=function(v,D,K,te){return Bi=ms({ch1:v,ch2:D,ch3:K,ch4:te,pdfColorType:"draw",precision:2}),W(Bi),this};var Fa=t.fillColor||"0 g";m.__private__.getFillColor=m.getFillColor=function(){return Ws(Fa)},m.__private__.setFillColor=m.setFillColor=function(v,D,K,te){return Fa=ms({ch1:v,ch2:D,ch3:K,ch4:te,pdfColorType:"fill",precision:2}),W(Fa),this};var Qs=t.textColor||"0 g",Qo=m.__private__.getTextColor=m.getTextColor=function(){return Ws(Qs)};m.__private__.setTextColor=m.setTextColor=function(v,D,K,te){return Qs=ms({ch1:v,ch2:D,ch3:K,ch4:te,pdfColorType:"text",precision:3}),this};var xi=t.charSpace,Yl=m.__private__.getCharSpace=m.getCharSpace=function(){return parseFloat(xi||0)};m.__private__.setCharSpace=m.setCharSpace=function(v){if(isNaN(v))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xi=v,this};var ur=0;m.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},m.__private__.setLineCap=m.setLineCap=function(v){var D=m.CapJoinStyles[v];if(D===void 0)throw new Error("Line cap style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return ur=D,W(D+" J"),this};var Xl=0;m.__private__.setLineJoin=m.setLineJoin=function(v){var D=m.CapJoinStyles[v];if(D===void 0)throw new Error("Line join style of '"+v+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Xl=D,W(D+" j"),this},m.__private__.setLineMiterLimit=m.__private__.setMiterLimit=m.setLineMiterLimit=m.setMiterLimit=function(v){if(v=v||0,isNaN(v))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return W(P(L(v))+" M"),this},m.GState=ag,m.setGState=function(v){(v=typeof v=="string"?ut[vt[v]]:Zc(null,v)).equals(tr)||(W("/"+v.id+" gs"),tr=v)};var Zc=function(v,D){if(!v||!vt[v]){var K=!1;for(var te in ut)if(ut.hasOwnProperty(te)&&ut[te].equals(D)){K=!0;break}if(K)D=ut[te];else{var ae="GS"+(Object.keys(ut).length+1).toString(10);ut[ae]=D,D.id=ae}return v&&(vt[v]=D.id),Ot.publish("addGState",D),D}};m.addGState=function(v,D){return Zc(v,D),this},m.saveGraphicsState=function(){return W("q"),yr.push({key:We,size:Pe,color:Qs}),this},m.restoreGraphicsState=function(){W("Q");var v=yr.pop();return We=v.key,Pe=v.size,Qs=v.color,tr=null,this},m.setCurrentTransformationMatrix=function(v){return W(v.toString()+" cm"),this},m.comment=function(v){return W("#"+v),this};var _i=function(v,D){var K=v||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return K},set:function(Ne){isNaN(Ne)||(K=parseFloat(Ne))}});var te=D||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return te},set:function(Ne){isNaN(Ne)||(te=parseFloat(Ne))}});var ae="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ae},set:function(Ne){ae=Ne.toString()}}),this},Ua=function(v,D,K,te){_i.call(this,v,D),this.type="rect";var ae=K||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ae},set:function(Ie){isNaN(Ie)||(ae=parseFloat(Ie))}});var Ne=te||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return Ne},set:function(Ie){isNaN(Ie)||(Ne=parseFloat(Ie))}}),this},Yo=function(){this.page=kt,this.currentPage=G,this.pages=je.slice(0),this.pagesContext=at.slice(0),this.x=Ze,this.y=hr,this.matrix=Ft,this.width=gs(G),this.height=eu(G),this.outputDestination=Fe,this.id="",this.objectNumber=-1};Yo.prototype.restore=function(){kt=this.page,G=this.currentPage,at=this.pagesContext,je=this.pages,Ze=this.x,hr=this.y,Ft=this.matrix,Jl(G,this.width),ys(G,this.height),Fe=this.outputDestination};var xo=function(v,D,K,te,ae){Gn.push(new Yo),kt=G=0,je=[],Ze=v,hr=D,Ft=ae,Ks([K,te])};for(var _o in m.beginFormObject=function(v,D,K,te,ae){return xo(v,D,K,te,ae),this},m.endFormObject=function(v){return function(D){if(mi[D])Gn.pop().restore();else{var K=new Yo,te="Xo"+(Object.keys(Gr).length+1).toString(10);K.id=te,mi[D]=te,Gr[te]=K,Ot.publish("addFormObject",K),Gn.pop().restore()}}(v),this},m.doFormObject=function(v,D){var K=Gr[mi[v]];return W("q"),W(D.toString()+" cm"),W("/"+K.id+" Do"),W("Q"),this},m.getFormObject=function(v){var D=Gr[mi[v]];return{x:D.x,y:D.y,width:D.width,height:D.height,matrix:D.matrix}},m.save=function(v,D){return v=v||"generated.pdf",(D=D||{}).returnPromise=D.returnPromise||!1,D.returnPromise===!1?(cc(Ho(yi()),v),typeof cc.unload=="function"&&yt.setTimeout&&setTimeout(cc.unload,911),this):new Promise(function(K,te){try{var ae=cc(Ho(yi()),v);typeof cc.unload=="function"&&yt.setTimeout&&setTimeout(cc.unload,911),K(ae)}catch(Ne){te(Ne.message)}})},rt.API)rt.API.hasOwnProperty(_o)&&(_o==="events"&&rt.API.events.length?function(v,D){var K,te,ae;for(ae=D.length-1;ae!==-1;ae--)K=D[ae][0],te=D[ae][1],v.subscribe.apply(v,[K].concat(typeof te=="function"?[te]:te))}(Ot,rt.API.events):m[_o]=rt.API[_o]);function gs(v){return at[v].mediaBox.topRightX-at[v].mediaBox.bottomLeftX}function Jl(v,D){at[v].mediaBox.topRightX=D+at[v].mediaBox.bottomLeftX}function eu(v){return at[v].mediaBox.topRightY-at[v].mediaBox.bottomLeftY}function ys(v,D){at[v].mediaBox.topRightY=D+at[v].mediaBox.bottomLeftY}var bi=m.getPageWidth=function(v){return gs(v=v||G)/xt},Va=m.setPageWidth=function(v,D){Jl(v,D*xt)},Ni=m.getPageHeight=function(v){return eu(v=v||G)/xt},Zl=m.setPageHeight=function(v,D){ys(v,D*xt)};return m.internal={pdfEscape:Nn,getStyle:Go,getFont:wi,getFontSize:Be,getCharSpace:Yl,getTextColor:Qo,getLineHeight:Ph,getLineHeightFactor:jh,getLineWidth:Jc,write:Me,getHorizontalCoordinate:En,getVerticalCoordinate:Vi,getCoordinateString:Lh,getVerticalCoordinateString:Ma,collections:{},newObject:Tr,newAdditionalObject:zo,newObjectDeferred:ln,newObjectDeferredBegin:Ir,getFilters:Qn,putStream:Kr,events:Ot,scaleFactor:xt,pageSize:{getWidth:function(){return bi(G)},setWidth:function(v){Va(G,v)},getHeight:function(){return Ni(G)},setHeight:function(v){Zl(G,v)}},encryptionOptions:f,encryption:dr,getEncryptor:function(v){return f!==null?dr.encryptor(v,0):function(D){return D}},output:Kl,getNumberOfPages:Wl,get pages(){return je},out:W,f2:N,f3:R,getPageInfo:fn,getPageInfoByObjId:Wo,getCurrentPageInfo:Oa,getPDFVersion:b,Point:_i,Rectangle:Ua,Matrix:ct,hasHotfix:Ps},Object.defineProperty(m.internal.pageSize,"width",{get:function(){return bi(G)},set:function(v){Va(G,v)},enumerable:!0,configurable:!0}),Object.defineProperty(m.internal.pageSize,"height",{get:function(){return Ni(G)},set:function(v){Zl(G,v)},enumerable:!0,configurable:!0}),(function(v){for(var D=0,K=lt.length;D<K;D++){var te=La.call(this,v[D][0],v[D][1],v[D][2],lt[D][3],!0);g===!1&&(y[te]=!0);var ae=v[D][0].split("-");ql({id:te,fontName:ae[0],fontStyle:ae[1]||""})}Ot.publish("addFonts",{fonts:It,dictionary:At})}).call(m,lt),We="F1",Ra(s,r),Ot.publish("initialized"),m}mu.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},mu.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},mu.prototype.hexToBytes=function(t){for(var e=[],r=0;r<t.length;r+=2)e.push(String.fromCharCode(parseInt(t.substr(r,2),16)));return e.join("")},mu.prototype.processOwnerPassword=function(t,e){return w2(v2(e).substr(0,5),t)},mu.prototype.encryptor=function(t,e){var r=v2(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(n){return w2(r,n)}},ag.prototype.equals=function(t){var e,r="id,objectNumber,equals";if(!t||ar(t)!==ar(this))return!1;var n=0;for(e in this)if(!(r.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;n++}for(e in t)t.hasOwnProperty(e)&&r.indexOf(e)<0&&n--;return n===0},rt.API={events:[]},rt.version="3.0.4";var Hr=rt.API,F5=1,Wc=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},au=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},bt=function(t){return t.toFixed(2)},nl=function(t){return t.toFixed(5)};Hr.__acroform__={};var Hs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},yN=function(t){return t*F5},To=function(t){var e=new eT,r=He.internal.getHeight(t)||0,n=He.internal.getWidth(t)||0;return e.BBox=[0,0,Number(bt(n)),Number(bt(r))],e},vB=Hr.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},wB=Hr.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},xB=Hr.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},nn=Hr.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return xB(t,e-1)},sn=Hr.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return vB(t,e-1)},on=Hr.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return wB(t,e-1)},_B=Hr.__acroform__.calculateCoordinates=function(t,e){var r=e.internal.getHorizontalCoordinate,n=e.internal.getVerticalCoordinate,s=t[0],i=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=r(s)||0,l.lowerLeft_Y=n(i+a)||0,l.upperRight_X=r(s+o)||0,l.upperRight_Y=n(i)||0,[Number(bt(l.lowerLeft_X)),Number(bt(l.lowerLeft_Y)),Number(bt(l.upperRight_X)),Number(bt(l.upperRight_Y))]},bB=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],r=t._V||t.DV,n=x2(t,r),s=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+s+" "+bt(n.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(n.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=To(t);return i.scope=t.scope,i.stream=e.join(`
`),i}},x2=function(t,e){var r=t.fontSize===0?t.maxFontSize:t.fontSize,n={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=t.multiline?s.map(function(N){return N.split(`
`)}):s.map(function(N){return[N]});var i=r,o=He.internal.getHeight(t)||0;o=o<0?-o:o;var a=He.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(N,R,L){if(N+1<s.length){var X=R+" "+s[N+1][0];return Lp(X,t,L).width<=a-4}return!1};i++;e:for(;i>0;){e="",i--;var u,f,g=Lp("3",t,i).height,y=t.multiline?o-i:(o-g)/2,m=y+=2,E=0,b=0,A=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+Lp(e,t,i=12).width+", FieldWidth:"+a+`
`;break}for(var x="",T=0,I=0;I<s.length;I++)if(s.hasOwnProperty(I)){var k=!1;if(s[I].length!==1&&A!==s[I].length-1){if((g+2)*(T+2)+2>o)continue e;x+=s[I][A],k=!0,b=I,I--}else{x=(x+=s[I][A]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var H=parseInt(I),Z=l(H,x,i),F=I>=s.length-1;if(Z&&!F){x+=" ",A=0;continue}if(Z||F){if(F)b=H;else if(t.multiline&&(g+2)*(T+2)+2>o)continue e}else{if(!t.multiline||(g+2)*(T+2)+2>o)continue e;b=H}}for(var P="",C=E;C<=b;C++){var O=s[C];if(t.multiline){if(C===b){P+=O[A]+" ",A=(A+1)%O.length;continue}if(C===E){P+=O[O.length-1]+" ";continue}}P+=O[0]+" "}switch(P=P.substr(P.length-1)==" "?P.substr(0,P.length-1):P,f=Lp(P,t,i).width,t.textAlign){case"right":u=a-f-2;break;case"center":u=(a-f)/2;break;default:u=2}e+=bt(u)+" "+bt(m)+` Td
`,e+="("+Wc(P)+`) Tj
`,e+=-bt(u)+` 0 Td
`,m=-(i+2),f=0,E=k?b:b+1,T++,x=""}break}return n.text=e,n.fontSize=i,n},Lp=function(t,e,r){var n=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(t,{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:e.scope.getStringUnitWidth("3",{font:n,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:s}},NB={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},EB=function(t,e){var r={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(n){return n.type===r.type&&n.object===r.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(r)},AB=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(co.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(NB)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");F5=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new tT,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var n=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in n)if(n.hasOwnProperty(s)){var i=n[s];i.objId=void 0,i.hasAnnotation&&EB(i,r)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(r){(function(n,s){var i=!n;for(var o in n||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),n=n||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(n.hasOwnProperty(o)){var a=n[o],l=[],u=a.Rect;if(a.Rect&&(a.Rect=_B(a.Rect,s)),s.internal.newObjectDeferredBegin(a.objId,!0),a.DA=He.createDefaultAppearanceStream(a),ar(a)==="object"&&typeof a.getKeyValueListForStream=="function"&&(l=a.getKeyValueListForStream()),a.Rect=u,a.hasAppearanceStream&&!a.appearanceStreamContent){var f=bB(a);l.push({key:"AP",value:"<</N "+f+">>"}),s.internal.acroformPlugin.xForms.push(f)}if(a.appearanceStreamContent){var g="";for(var y in a.appearanceStreamContent)if(a.appearanceStreamContent.hasOwnProperty(y)){var m=a.appearanceStreamContent[y];if(g+="/"+y+" ",g+="<<",Object.keys(m).length>=1||Array.isArray(m)){for(var o in m)if(m.hasOwnProperty(o)){var E=m[o];typeof E=="function"&&(E=E.call(s,a)),g+="/"+o+" "+E+" ",s.internal.acroformPlugin.xForms.indexOf(E)>=0||s.internal.acroformPlugin.xForms.push(E)}}else typeof(E=m)=="function"&&(E=E.call(s,a)),g+="/"+o+" "+E,s.internal.acroformPlugin.xForms.indexOf(E)>=0||s.internal.acroformPlugin.xForms.push(E);g+=">>"}l.push({key:"AP",value:`<<
`+g+">>"})}s.internal.putStream({additionalKeyValues:l,objectId:a.objId}),s.internal.out("endobj")}i&&function(b,A){for(var x in b)if(b.hasOwnProperty(x)){var T=x,I=b[x];A.internal.newObjectDeferredBegin(I.objId,!0),ar(I)==="object"&&typeof I.putStream=="function"&&I.putStream(),delete b[T]}}(s.internal.acroformPlugin.xForms,s)})(r,t)}),t.internal.acroformPlugin.isInitialized=!0}},Z6=Hr.__acroform__.arrayToPdfArray=function(t,e,r){var n=function(o){return o};if(Array.isArray(t)){for(var s="[",i=0;i<t.length;i++)switch(i!==0&&(s+=" "),ar(t[i])){case"boolean":case"number":case"object":s+=t[i].toString();break;case"string":t[i].substr(0,1)!=="/"?(e!==void 0&&r&&(n=r.internal.getEncryptor(e)),s+="("+Wc(n(t[i].toString()))+")"):s+=t[i].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},j1=function(t,e,r){var n=function(s){return s};return e!==void 0&&r&&(n=r.internal.getEncryptor(e)),(t=t||"").toString(),"("+Wc(n(t))+")"},Po=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};Po.prototype.toString=function(){return this.objId+" 0 R"},Po.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},Po.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var r in e)if(Object.getOwnPropertyDescriptor(this,e[r]).configurable===!1){var n=e[r],s=this[n];s&&(Array.isArray(s)?t.push({key:n,value:Z6(s,this.objId,this.scope)}):s instanceof Po?(s.scope=this.scope,t.push({key:n,value:s.objId+" 0 R"})):typeof s!="function"&&t.push({key:n,value:s}))}return t};var eT=function(){Po.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(r){e=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){t=r.trim()},get:function(){return t||null}})};Hs(eT,Po);var tT=function(){Po.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var r=function(n){return n};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Wc(r(t))+")"}},set:function(r){t=r}})};Hs(tT,Po);var co=function t(){Po.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!nn(e,3)},set:function(x){x?this.F=sn(e,3):this.F=on(e,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');r=x}});var n=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(n.length!==0)return n},set:function(x){n=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[0])?0:n[0]},set:function(x){n[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[1])?0:n[1]},set:function(x){n[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[2])?0:n[2]},set:function(x){n[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!n||isNaN(n[3])?0:n[3]},set:function(x){n[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof lg)return;i="FieldObject"+t.FieldNum++}var x=function(T){return T};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Wc(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(x){o=x}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var u=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return u===void 0?50/F5:u},set:function(x){u=x}});var f="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return f},set:function(x){f=x}});var g="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!g||this instanceof lg||this instanceof xc))return j1(g,this.objId,this.scope)},set:function(x){x=x.toString(),g=x}});var y=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(y)return this instanceof In==0?j1(y,this.objId,this.scope):y},set:function(x){x=x.toString(),y=this instanceof In==0?x.substr(0,1)==="("?au(x.substr(1,x.length-2)):au(x):x}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof In==1?au(y.substr(1,y.length-1)):y},set:function(x){x=x.toString(),y=this instanceof In==1?"/"+x:x}});var m=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(m)return m},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof In==0?j1(m,this.objId,this.scope):m},set:function(x){x=x.toString(),m=this instanceof In==0?x.substr(0,1)==="("?au(x.substr(1,x.length-2)):au(x):x}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof In==1?au(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof In==1?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var E,b=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return b},set:function(x){x=!!x,b=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(E)return E},set:function(x){E=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,1)},set:function(x){x?this.Ff=sn(this.Ff,1):this.Ff=on(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,2)},set:function(x){x?this.Ff=sn(this.Ff,2):this.Ff=on(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,3)},set:function(x){x?this.Ff=sn(this.Ff,3):this.Ff=on(this.Ff,3)}});var A=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(A!==null)return A},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');A=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(A){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:A=2;break;case"center":case 1:A=1;break;default:A=0}}})};Hs(co,Po);var $u=function(){co.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(r){t=r}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Z6(e,this.objId,this.scope)},set:function(r){var n,s;s=[],typeof(n=r)=="string"&&(s=function(i,o,a){a||(a=1);for(var l,u=[];l=o.exec(i);)u.push(l[a]);return u}(n,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(r){e=r,this.sort&&e.sort()},this.addOption=function(r){r=(r=r||"").toString(),e.push(r),this.sort&&e.sort()},this.removeOption=function(r,n){for(n=n||!1,r=(r=r||"").toString();e.indexOf(r)!==-1&&(e.splice(e.indexOf(r),1),n!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,18)},set:function(r){r?this.Ff=sn(this.Ff,18):this.Ff=on(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=sn(this.Ff,19):this.Ff=on(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,20)},set:function(r){r?(this.Ff=sn(this.Ff,20),e.sort()):this.Ff=on(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,22)},set:function(r){r?this.Ff=sn(this.Ff,22):this.Ff=on(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(r){r?this.Ff=sn(this.Ff,23):this.Ff=on(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,27)},set:function(r){r?this.Ff=sn(this.Ff,27):this.Ff=on(this.Ff,27)}}),this.hasAppearanceStream=!1};Hs($u,co);var Hu=function(){$u.call(this),this.fontName="helvetica",this.combo=!1};Hs(Hu,$u);var Wu=function(){Hu.call(this),this.combo=!0};Hs(Wu,Hu);var lm=function(){Wu.call(this),this.edit=!0};Hs(lm,Wu);var In=function(){co.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,15)},set:function(r){r?this.Ff=sn(this.Ff,15):this.Ff=on(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,16)},set:function(r){r?this.Ff=sn(this.Ff,16):this.Ff=on(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,17)},set:function(r){r?this.Ff=sn(this.Ff,17):this.Ff=on(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(r){r?this.Ff=sn(this.Ff,26):this.Ff=on(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(i){return i};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var n,s=[];for(n in s.push("<<"),e)s.push("/"+n+" ("+Wc(r(e[n]))+")");return s.push(">>"),s.join(`
`)}},set:function(r){ar(r)==="object"&&(e=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(r){typeof r=="string"&&(e.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(r){t="/"+r}})};Hs(In,co);var cm=function(){In.call(this),this.pushButton=!0};Hs(cm,In);var Gu=function(){In.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Hs(Gu,In);var lg=function(){var t,e;co.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var r,n={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(a){return a};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,o=[];for(i in o.push("<<"),n)o.push("/"+i+" ("+Wc(s(n[i]))+")");return o.push(">>"),o.join(`
`)},set:function(s){ar(s)==="object"&&(n=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return n.CA||""},set:function(s){typeof s=="string"&&(n.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(s){r=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(s){r="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=He.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Hs(lg,co),Gu.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var r=this.Kids[e];r.appearanceStreamContent=t.createAppearanceStream(r.optionName),r.caption=t.getCA()}},Gu.prototype.createOption=function(t){var e=new lg;return e.Parent=this,e.optionName=t,this.Kids.push(e),SB.call(this.scope,e),e};var um=function(){In.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=He.CheckBox.createAppearanceStream()};Hs(um,In);var xc=function(){co.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,13)},set:function(e){e?this.Ff=sn(this.Ff,13):this.Ff=on(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,21)},set:function(e){e?this.Ff=sn(this.Ff,21):this.Ff=on(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,23)},set:function(e){e?this.Ff=sn(this.Ff,23):this.Ff=on(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,24)},set:function(e){e?this.Ff=sn(this.Ff,24):this.Ff=on(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,25)},set:function(e){e?this.Ff=sn(this.Ff,25):this.Ff=on(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,26)},set:function(e){e?this.Ff=sn(this.Ff,26):this.Ff=on(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Hs(xc,co);var hm=function(){xc.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!nn(this.Ff,14)},set:function(t){t?this.Ff=sn(this.Ff,14):this.Ff=on(this.Ff,14)}}),this.password=!0};Hs(hm,xc);var He={CheckBox:{createAppearanceStream:function(){return{N:{On:He.CheckBox.YesNormal},D:{On:He.CheckBox.YesPushDown,Off:He.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=To(t);e.scope=t.scope;var r=[],n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,s=t.scope.__private__.encodeColorString(t.color),i=x2(t,t.caption);return r.push("0.749023 g"),r.push("0 0 "+bt(He.internal.getWidth(t))+" "+bt(He.internal.getHeight(t))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+n+" "+bt(i.fontSize)+" Tf "+s),r.push("BT"),r.push(i.text),r.push("ET"),r.push("Q"),r.push("EMC"),e.stream=r.join(`
`),e},YesNormal:function(t){var e=To(t);e.scope=t.scope;var r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color),s=[],i=He.internal.getHeight(t),o=He.internal.getWidth(t),a=x2(t,t.caption);return s.push("1 g"),s.push("0 0 "+bt(o)+" "+bt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+bt(o-1)+" "+bt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+r+" "+bt(a.fontSize)+" Tf "+n),s.push(a.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(t){var e=To(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+bt(He.internal.getWidth(t))+" "+bt(He.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:He.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=He.RadioButton.Circle.YesNormal,e.D[t]=He.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=To(t);e.scope=t.scope;var r=[],n=He.internal.getWidth(t)<=He.internal.getHeight(t)?He.internal.getWidth(t)/4:He.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=He.internal.Bezier_C,i=Number((n*s).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(t)/2)+" "+nl(He.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+i+" "+i+" "+n+" 0 "+n+" c"),r.push("-"+i+" "+n+" -"+n+" "+i+" -"+n+" 0 c"),r.push("-"+n+" -"+i+" -"+i+" -"+n+" 0 -"+n+" c"),r.push(i+" -"+n+" "+n+" -"+i+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=To(t);e.scope=t.scope;var r=[],n=He.internal.getWidth(t)<=He.internal.getHeight(t)?He.internal.getWidth(t)/4:He.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*He.internal.Bezier_C).toFixed(5)),o=Number((n*He.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(t)/2)+" "+nl(He.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(t)/2)+" "+nl(He.internal.getHeight(t)/2)+" cm"),r.push(n+" 0 m"),r.push(n+" "+o+" "+o+" "+n+" 0 "+n+" c"),r.push("-"+o+" "+n+" -"+n+" "+o+" -"+n+" 0 c"),r.push("-"+n+" -"+o+" -"+o+" -"+n+" 0 -"+n+" c"),r.push(o+" -"+n+" "+n+" -"+o+" "+n+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=To(t);e.scope=t.scope;var r=[],n=He.internal.getWidth(t)<=He.internal.getHeight(t)?He.internal.getWidth(t)/4:He.internal.getHeight(t)/4;n=Number((.9*n).toFixed(5));var s=Number((2*n).toFixed(5)),i=Number((s*He.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+nl(He.internal.getWidth(t)/2)+" "+nl(He.internal.getHeight(t)/2)+" cm"),r.push(s+" 0 m"),r.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),r.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),r.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),r.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),r.push("f"),r.push("Q"),e.stream=r.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:He.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=He.RadioButton.Cross.YesNormal,e.D[t]=He.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=To(t);e.scope=t.scope;var r=[],n=He.internal.calculateCross(t);return r.push("q"),r.push("1 1 "+bt(He.internal.getWidth(t)-2)+" "+bt(He.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(bt(n.x1.x)+" "+bt(n.x1.y)+" m"),r.push(bt(n.x2.x)+" "+bt(n.x2.y)+" l"),r.push(bt(n.x4.x)+" "+bt(n.x4.y)+" m"),r.push(bt(n.x3.x)+" "+bt(n.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},YesPushDown:function(t){var e=To(t);e.scope=t.scope;var r=He.internal.calculateCross(t),n=[];return n.push("0.749023 g"),n.push("0 0 "+bt(He.internal.getWidth(t))+" "+bt(He.internal.getHeight(t))+" re"),n.push("f"),n.push("q"),n.push("1 1 "+bt(He.internal.getWidth(t)-2)+" "+bt(He.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(bt(r.x1.x)+" "+bt(r.x1.y)+" m"),n.push(bt(r.x2.x)+" "+bt(r.x2.y)+" l"),n.push(bt(r.x4.x)+" "+bt(r.x4.y)+" m"),n.push(bt(r.x3.x)+" "+bt(r.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=To(t);e.scope=t.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+bt(He.internal.getWidth(t))+" "+bt(He.internal.getHeight(t))+" re"),r.push("f"),e.stream=r.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+r}};He.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=He.internal.getWidth(t),r=He.internal.getHeight(t),n=Math.min(e,r);return{x1:{x:(e-n)/2,y:(r-n)/2+n},x2:{x:(e-n)/2+n,y:(r-n)/2},x3:{x:(e-n)/2,y:(r-n)/2},x4:{x:(e-n)/2+n,y:(r-n)/2+n}}}},He.internal.getWidth=function(t){var e=0;return ar(t)==="object"&&(e=yN(t.Rect[2])),e},He.internal.getHeight=function(t){var e=0;return ar(t)==="object"&&(e=yN(t.Rect[3])),e};var SB=Hr.addField=function(t){if(AB(this,t),!(t instanceof co))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};Hr.AcroFormChoiceField=$u,Hr.AcroFormListBox=Hu,Hr.AcroFormComboBox=Wu,Hr.AcroFormEditBox=lm,Hr.AcroFormButton=In,Hr.AcroFormPushButton=cm,Hr.AcroFormRadioButton=Gu,Hr.AcroFormCheckBox=um,Hr.AcroFormTextField=xc,Hr.AcroFormPasswordField=hm,Hr.AcroFormAppearance=He,Hr.AcroForm={ChoiceField:$u,ListBox:Hu,ComboBox:Wu,EditBox:lm,Button:In,PushButton:cm,RadioButton:Gu,CheckBox:um,TextField:xc,PasswordField:hm,Appearance:He},rt.AcroForm={ChoiceField:$u,ListBox:Hu,ComboBox:Wu,EditBox:lm,Button:In,PushButton:cm,RadioButton:Gu,CheckBox:um,TextField:xc,PasswordField:hm,Appearance:He};rt.AcroForm;function rT(t){return t.reduce(function(e,r,n){return e[r]=n,e},{})}(function(t){var e="addImage_";t.__addimage__={};var r="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},s=t.__addimage__.getImageFileTypeByImageData=function(N,R){var L,X,fe,le,ye,ee=r;if((R=R||r)==="RGBA"||N.data!==void 0&&N.data instanceof Uint8ClampedArray&&"height"in N&&"width"in N)return"RGBA";if(Z(N))for(ye in n)for(fe=n[ye],L=0;L<fe.length;L+=1){for(le=!0,X=0;X<fe[L].length;X+=1)if(fe[L][X]!==void 0&&fe[L][X]!==N[X]){le=!1;break}if(le===!0){ee=ye;break}}else for(ye in n)for(fe=n[ye],L=0;L<fe.length;L+=1){for(le=!0,X=0;X<fe[L].length;X+=1)if(fe[L][X]!==void 0&&fe[L][X]!==N.charCodeAt(X)){le=!1;break}if(le===!0){ee=ye;break}}return ee===r&&R!==r&&(ee=R),ee},i=function N(R){for(var L=this.internal.write,X=this.internal.putStream,fe=(0,this.internal.getFilters)();fe.indexOf("FlateEncode")!==-1;)fe.splice(fe.indexOf("FlateEncode"),1);R.objectId=this.internal.newObject();var le=[];if(le.push({key:"Type",value:"/XObject"}),le.push({key:"Subtype",value:"/Image"}),le.push({key:"Width",value:R.width}),le.push({key:"Height",value:R.height}),R.colorSpace===x.INDEXED?le.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(R.palette.length/3-1)+" "+("sMask"in R&&R.sMask!==void 0?R.objectId+2:R.objectId+1)+" 0 R]"}):(le.push({key:"ColorSpace",value:"/"+R.colorSpace}),R.colorSpace===x.DEVICE_CMYK&&le.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),le.push({key:"BitsPerComponent",value:R.bitsPerComponent}),"decodeParameters"in R&&R.decodeParameters!==void 0&&le.push({key:"DecodeParms",value:"<<"+R.decodeParameters+">>"}),"transparency"in R&&Array.isArray(R.transparency)&&R.transparency.length>0){for(var ye="",ee=0,ue=R.transparency.length;ee<ue;ee++)ye+=R.transparency[ee]+" "+R.transparency[ee]+" ";le.push({key:"Mask",value:"["+ye+"]"})}R.sMask!==void 0&&le.push({key:"SMask",value:R.objectId+1+" 0 R"});var _e=R.filter!==void 0?["/"+R.filter]:void 0;if(X({data:R.data,additionalKeyValues:le,alreadyAppliedFilters:_e,objectId:R.objectId}),L("endobj"),"sMask"in R&&R.sMask!==void 0){var we,U=(we=R.sMaskBitsPerComponent)!==null&&we!==void 0?we:R.bitsPerComponent,G={width:R.width,height:R.height,colorSpace:"DeviceGray",bitsPerComponent:U,data:R.sMask};"filter"in R&&(G.decodeParameters="/Predictor ".concat(R.predictor," /Colors 1 /BitsPerComponent ").concat(U," /Columns ").concat(R.width),G.filter=R.filter),N.call(this,G)}if(R.colorSpace===x.INDEXED){var J=this.internal.newObject();X({data:P(new Uint8Array(R.palette)),objectId:J}),L("endobj")}},o=function(){var N=this.internal.collections[e+"images"];for(var R in N)i.call(this,N[R])},a=function(){var N,R=this.internal.collections[e+"images"],L=this.internal.write;for(var X in R)L("/I"+(N=R[X]).index,N.objectId,"0","R")},l=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},u=function(){var N=this.internal.collections[e+"images"];return l.call(this),N},f=function(){return Object.keys(this.internal.collections[e+"images"]).length},g=function(N){return typeof t["process"+N.toUpperCase()]=="function"},y=function(N){return ar(N)==="object"&&N.nodeType===1},m=function(N,R){if(N.nodeName==="IMG"&&N.hasAttribute("src")){var L=""+N.getAttribute("src");if(L.indexOf("data:image/")===0)return am(unescape(L).split("base64,").pop());var X=t.loadFile(L,!0);if(X!==void 0)return X}if(N.nodeName==="CANVAS"){if(N.width===0||N.height===0)throw new Error("Given canvas must have data. Canvas width: "+N.width+", height: "+N.height);var fe;switch(R){case"PNG":fe="image/png";break;case"WEBP":fe="image/webp";break;default:fe="image/jpeg"}return am(N.toDataURL(fe,1).split("base64,").pop())}},E=function(N){var R=this.internal.collections[e+"images"];if(R){for(var L in R)if(N===R[L].alias)return R[L]}},b=function(N,R,L){return N||R||(N=-96,R=-96),N<0&&(N=-1*L.width*72/N/this.internal.scaleFactor),R<0&&(R=-1*L.height*72/R/this.internal.scaleFactor),N===0&&(N=R*L.width/L.height),R===0&&(R=N*L.height/L.width),[N,R]},A=function(N,R,L,X,fe,le){var ye=b.call(this,L,X,fe),ee=this.internal.getCoordinateString,ue=this.internal.getVerticalCoordinateString,_e=u.call(this);if(L=ye[0],X=ye[1],_e[fe.index]=fe,le){le*=Math.PI/180;var we=Math.cos(le),U=Math.sin(le),G=function(re){return re.toFixed(4)},J=[G(we),G(U),G(-1*U),G(we),0,0,"cm"]}this.internal.write("q"),le?(this.internal.write([1,"0","0",1,ee(N),ue(R+X),"cm"].join(" ")),this.internal.write(J.join(" ")),this.internal.write([ee(L),"0","0",ee(X),"0","0","cm"].join(" "))):this.internal.write([ee(L),"0","0",ee(X),ee(N),ue(R+X),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+fe.index+" Do"),this.internal.write("Q")},x=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var T=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},I=t.__addimage__.sHashCode=function(N){var R,L,X=0;if(typeof N=="string")for(L=N.length,R=0;R<L;R++)X=(X<<5)-X+N.charCodeAt(R),X|=0;else if(Z(N))for(L=N.byteLength/2,R=0;R<L;R++)X=(X<<5)-X+N[R],X|=0;return X},k=t.__addimage__.validateStringAsBase64=function(N){(N=N||"").toString().trim();var R=!0;return N.length===0&&(R=!1),N.length%4!=0&&(R=!1),/^[A-Za-z0-9+/]+$/.test(N.substr(0,N.length-2))===!1&&(R=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(N.substr(-2))===!1&&(R=!1),R},H=t.__addimage__.extractImageFromDataUrl=function(N){if(N==null||!(N=N.trim()).startsWith("data:"))return null;var R=N.indexOf(",");return R<0?null:N.substring(0,R).trim().endsWith("base64")?N.substring(R+1):null};t.__addimage__.isArrayBuffer=function(N){return N instanceof ArrayBuffer};var Z=t.__addimage__.isArrayBufferView=function(N){return N instanceof Int8Array||N instanceof Uint8Array||N instanceof Uint8ClampedArray||N instanceof Int16Array||N instanceof Uint16Array||N instanceof Int32Array||N instanceof Uint32Array||N instanceof Float32Array||N instanceof Float64Array},F=t.__addimage__.binaryStringToUint8Array=function(N){for(var R=N.length,L=new Uint8Array(R),X=0;X<R;X++)L[X]=N.charCodeAt(X);return L},P=t.__addimage__.arrayBufferToBinaryString=function(N){for(var R="",L=Z(N)?N:new Uint8Array(N),X=0;X<L.length;X+=8192)R+=String.fromCharCode.apply(null,L.subarray(X,X+8192));return R};t.addImage=function(){var N,R,L,X,fe,le,ye,ee,ue;if(typeof arguments[1]=="number"?(R=r,L=arguments[1],X=arguments[2],fe=arguments[3],le=arguments[4],ye=arguments[5],ee=arguments[6],ue=arguments[7]):(R=arguments[1],L=arguments[2],X=arguments[3],fe=arguments[4],le=arguments[5],ye=arguments[6],ee=arguments[7],ue=arguments[8]),ar(N=arguments[0])==="object"&&!y(N)&&"imageData"in N){var _e=N;N=_e.imageData,R=_e.format||R||r,L=_e.x||L||0,X=_e.y||X||0,fe=_e.w||_e.width||fe,le=_e.h||_e.height||le,ye=_e.alias||ye,ee=_e.compression||ee,ue=_e.rotation||_e.angle||ue}var we=this.internal.getFilters();if(ee===void 0&&we.indexOf("FlateEncode")!==-1&&(ee="SLOW"),isNaN(L)||isNaN(X))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var U=C.call(this,N,R,ye,ee);return A.call(this,L,X,fe,le,U,ue),this};var C=function(N,R,L,X){var fe,le,ye;if(typeof N=="string"&&s(N)===r){N=unescape(N);var ee=O(N,!1);(ee!==""||(ee=t.loadFile(N,!0))!==void 0)&&(N=ee)}if(y(N)&&(N=m(N,R)),R=s(N,R),!g(R))throw new Error("addImage does not support files of type '"+R+"', please ensure that a plugin for '"+R+"' support is added.");if(((ye=L)==null||ye.length===0)&&(L=function(ue){return typeof ue=="string"||Z(ue)?I(ue):Z(ue.data)?I(ue.data):null}(N)),(fe=E.call(this,L))||(N instanceof Uint8Array||R==="RGBA"||(le=N,N=F(N)),fe=this["process"+R.toUpperCase()](N,f.call(this),L,function(ue){return ue&&typeof ue=="string"&&(ue=ue.toUpperCase()),ue in t.image_compression?ue:T.NONE}(X),le)),!fe)throw new Error("An unknown error occurred whilst processing the image.");return fe},O=t.__addimage__.convertBase64ToBinaryString=function(N,R){R=typeof R!="boolean"||R;var L,X="";if(typeof N=="string"){var fe;L=(fe=H(N))!==null&&fe!==void 0?fe:N;try{X=am(L)}catch(le){if(R)throw k(L)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+le.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return X};t.getImageProperties=function(N){var R,L,X="";if(y(N)&&(N=m(N)),typeof N=="string"&&s(N)===r&&((X=O(N,!1))===""&&(X=t.loadFile(N)||""),N=X),L=s(N),!g(L))throw new Error("addImage does not support files of type '"+L+"', please ensure that a plugin for '"+L+"' support is added.");if(N instanceof Uint8Array||(N=F(N)),!(R=this["process"+L.toUpperCase()](N)))throw new Error("An unknown error occurred whilst processing the image");return R.fileType=L,R}})(rt.API),function(t){var e=function(r){if(r!==void 0&&r!="")return!0};rt.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(r){for(var n,s,i,o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString,l=this.internal.getPageInfoByObjId(r.objId),u=r.pageContext.annotations,f=!1,g=0;g<u.length&&!f;g++)switch((n=u[g]).type){case"link":(e(n.options.url)||e(n.options.pageNumber))&&(f=!0);break;case"reference":case"text":case"freetext":f=!0}if(f!=0){this.internal.write("/Annots [");for(var y=0;y<u.length;y++){n=u[y];var m=this.internal.pdfEscape,E=this.internal.getEncryptor(r.objId);switch(n.type){case"reference":this.internal.write(" "+n.object.objId+" 0 R ");break;case"text":var b=this.internal.newAdditionalObject(),A=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(b.objId),T=n.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y)+"] ")+"/Contents ("+m(x(n.contents))+")",i+=" /Popup "+A.objId+" 0 R",i+=" /P "+l.objId+" 0 R",i+=" /T ("+m(x(T))+") >>",b.content=i;var I=b.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+o(n.bounds.x+30)+" "+a(n.bounds.y+n.bounds.h)+" "+o(n.bounds.x+n.bounds.w+30)+" "+a(n.bounds.y)+"] ")+" /Parent "+I,n.open&&(i+=" /Open true"),i+=" >>",A.content=i,this.internal.write(b.objId,"0 R",A.objId,"0 R");break;case"freetext":s="/Rect ["+o(n.bounds.x)+" "+a(n.bounds.y)+" "+o(n.bounds.x+n.bounds.w)+" "+a(n.bounds.y+n.bounds.h)+"] ";var k=n.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+m(E(n.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+k+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(n.options.name){var H=this.annotations._nameMap[n.options.name];n.options.pageNumber=H.page,n.options.top=H.y}else n.options.top||(n.options.top=0);if(s="/Rect ["+n.finalBounds.x+" "+n.finalBounds.y+" "+n.finalBounds.w+" "+n.finalBounds.h+"] ",i="",n.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+m(E(n.options.url))+") >>";else if(n.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(n.options.pageNumber).objId+" 0 R",n.options.magFactor=n.options.magFactor||"XYZ",n.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+n.options.top+"]";break;case"FitV":n.options.left=n.options.left||0,i+=" /FitV "+n.options.left+"]";break;default:var Z=a(n.options.top);n.options.left=n.options.left||0,n.options.zoom===void 0&&(n.options.zoom=0),i+=" /XYZ "+n.options.left+" "+Z+" "+n.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),t.createAnnotation=function(r){var n=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":n.pageContext.annotations.push(r)}},t.link=function(r,n,s,i,o){var a=this.internal.getCurrentPageInfo(),l=this.internal.getCoordinateString,u=this.internal.getVerticalCoordinateString;a.pageContext.annotations.push({finalBounds:{x:l(r),y:u(n),w:l(r+s),h:u(n+i)},options:o,type:"link"})},t.textWithLink=function(r,n,s,i){var o,a,l=this.getTextWidth(r),u=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){a=i.maxWidth;var f=this.splitTextToSize(r,a).length;o=Math.ceil(u*f)}else a=l,o=u;return this.text(r,n,s,i),s+=.2*u,i.align==="center"&&(n-=l/2),i.align==="right"&&(n-=l),this.link(n,s-u,a,o,i),l},t.getTextWidth=function(r){var n=this.internal.getFontSize();return this.getStringUnitWidth(r)*n/this.internal.scaleFactor}}(rt.API),function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},n={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];t.__arabicParser__={};var i=t.__arabicParser__.isInArabicSubstitutionA=function(b){return e[b.charCodeAt(0)]!==void 0},o=t.__arabicParser__.isArabicLetter=function(b){return typeof b=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(b)},a=t.__arabicParser__.isArabicEndLetter=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(b){return o(b)&&s.indexOf(b.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=1};var u=t.__arabicParser__.arabicLetterHasFinalForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length>=3};var f=t.__arabicParser__.arabicLetterHasMedialForm=function(b){return o(b)&&i(b)&&e[b.charCodeAt(0)].length==4},g=t.__arabicParser__.resolveLigatures=function(b){var A=0,x=r,T="",I=0;for(A=0;A<b.length;A+=1)x[b.charCodeAt(A)]!==void 0?(I++,typeof(x=x[b.charCodeAt(A)])=="number"&&(T+=String.fromCharCode(x),x=r,I=0),A===b.length-1&&(x=r,T+=b.charAt(A-(I-1)),A-=I-1,I=0)):(x=r,T+=b.charAt(A-I),A-=I,I=0);return T};t.__arabicParser__.isArabicDiacritic=function(b){return b!==void 0&&n[b.charCodeAt(0)]!==void 0};var y=t.__arabicParser__.getCorrectForm=function(b,A,x){return o(b)?i(b)===!1?-1:!u(b)||!o(A)&&!o(x)||!o(x)&&a(A)||a(b)&&!o(A)||a(b)&&l(A)||a(b)&&a(A)?0:f(b)&&o(A)&&!a(A)&&o(x)&&u(x)?3:a(b)||!o(x)?1:2:-1},m=function(b){var A=0,x=0,T=0,I="",k="",H="",Z=(b=b||"").split("\\s+"),F=[];for(A=0;A<Z.length;A+=1){for(F.push(""),x=0;x<Z[A].length;x+=1)I=Z[A][x],k=Z[A][x-1],H=Z[A][x+1],o(I)?(T=y(I,k,H),F[A]+=T!==-1?String.fromCharCode(e[I.charCodeAt(0)][T]):I):F[A]+=I;F[A]=g(F[A])}return F.join(" ")},E=t.__arabicParser__.processArabic=t.processArabic=function(){var b,A=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(A)){var T=0;for(x=[],T=0;T<A.length;T+=1)Array.isArray(A[T])?x.push([m(A[T][0]),A[T][1],A[T][2]]):x.push([m(A[T])]);b=x}else b=m(A);return typeof arguments[0]=="string"?b:(arguments[0].text=b,arguments[0])};t.events.push(["preProcessText",E])}(rt.API),rt.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},function(t){var e=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(a){r=a}});var n=150;Object.defineProperty(this,"width",{get:function(){return n},set:function(a){n=isNaN(a)||Number.isInteger(a)===!1||a<0?150:a,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=n+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(a){s=isNaN(a)||Number.isInteger(a)===!1||a<0?300:a,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(a){i=a}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(a){o=a}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(r,n){var s;if((r=r||"2d")!=="2d")return null;for(s in n)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=n[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(rt.API),function(t){var e={left:0,top:0,bottom:0,right:0},r=!1,n=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var l=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return l},set:function(b){l=b}});var u=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return u},set:function(b){u=b}});var f=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return f},set:function(b){f=b}});var g=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return g},set:function(b){g=b}});var y=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return y},set:function(b){y=b}});var m=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return m},set:function(b){m=b}});var E=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return E},set:function(b){E=b}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(l){return n.call(this),this.internal.__cell__.headerFunction=typeof l=="function"?l:void 0,this},t.getTextDimensions=function(l,u){n.call(this);var f=(u=u||{}).fontSize||this.getFontSize(),g=u.font||this.getFont(),y=u.scaleFactor||this.internal.scaleFactor,m=0,E=0,b=0,A=this;if(!Array.isArray(l)&&typeof l!="string"){if(typeof l!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");l=String(l)}var x=u.maxWidth;x>0?typeof l=="string"?l=this.splitTextToSize(l,x):Object.prototype.toString.call(l)==="[object Array]"&&(l=l.reduce(function(I,k){return I.concat(A.splitTextToSize(k,x))},[])):l=Array.isArray(l)?l:[l];for(var T=0;T<l.length;T++)m<(b=this.getStringUnitWidth(l[T],{font:g})*f)&&(m=b);return m!==0&&(E=l.length),{w:m/=y,h:Math.max((E*f*this.getLineHeightFactor()-f*(this.getLineHeightFactor()-1))/y,0)}},t.cellAddPage=function(){n.call(this),this.addPage();var l=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(l.left,l.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var o=t.cell=function(){var l;l=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),n.call(this);var u=this.internal.__cell__.lastCell,f=this.internal.__cell__.padding,g=this.internal.__cell__.margins||e,y=this.internal.__cell__.tableHeaderRow,m=this.internal.__cell__.printHeaders;return u.lineNumber!==void 0&&(u.lineNumber===l.lineNumber?(l.x=(u.x||0)+(u.width||0),l.y=u.y||0):u.y+u.height+l.height+g.bottom>this.getPageHeight()?(this.cellAddPage(),l.y=g.top,m&&y&&(this.printHeaderRow(l.lineNumber,!0),l.y+=y[0].height)):l.y=u.y+u.height||l.y),l.text[0]!==void 0&&(this.rect(l.x,l.y,l.width,l.height,r===!0?"FD":void 0),l.align==="right"?this.text(l.text,l.x+l.width-f,l.y+f,{align:"right",baseline:"top"}):l.align==="center"?this.text(l.text,l.x+l.width/2,l.y+f,{align:"center",baseline:"top",maxWidth:l.width-f-f}):this.text(l.text,l.x+f,l.y+f,{align:"left",baseline:"top",maxWidth:l.width-f-f})),this.internal.__cell__.lastCell=l,this};t.table=function(l,u,f,g,y){if(n.call(this),!f)throw new Error("No data for PDF table.");var m,E,b,A,x=[],T=[],I=[],k={},H={},Z=[],F=[],P=(y=y||{}).autoSize||!1,C=y.printHeaders!==!1,O=y.css&&y.css["font-size"]!==void 0?16*y.css["font-size"]:y.fontSize||12,N=y.margins||Object.assign({width:this.getPageWidth()},e),R=typeof y.padding=="number"?y.padding:3,L=y.headerBackgroundColor||"#c8c8c8",X=y.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=C,this.internal.__cell__.margins=N,this.internal.__cell__.table_font_size=O,this.internal.__cell__.padding=R,this.internal.__cell__.headerBackgroundColor=L,this.internal.__cell__.headerTextColor=X,this.setFontSize(O),g==null)T=x=Object.keys(f[0]),I=x.map(function(){return"left"});else if(Array.isArray(g)&&ar(g[0])==="object")for(x=g.map(function(_e){return _e.name}),T=g.map(function(_e){return _e.prompt||_e.name||""}),I=g.map(function(_e){return _e.align||"left"}),m=0;m<g.length;m+=1)H[g[m].name]=.7499990551181103*g[m].width;else Array.isArray(g)&&typeof g[0]=="string"&&(T=x=g,I=x.map(function(){return"left"}));if(P||Array.isArray(g)&&typeof g[0]=="string")for(m=0;m<x.length;m+=1){for(k[A=x[m]]=f.map(function(_e){return _e[A]}),this.setFont(void 0,"bold"),Z.push(this.getTextDimensions(T[m],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),E=k[A],this.setFont(void 0,"normal"),b=0;b<E.length;b+=1)Z.push(this.getTextDimensions(E[b],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);H[A]=Math.max.apply(null,Z)+R+R,Z=[]}if(C){var fe={};for(m=0;m<x.length;m+=1)fe[x[m]]={},fe[x[m]].text=T[m],fe[x[m]].align=I[m];var le=a.call(this,fe,H);F=x.map(function(_e){return new i(l,u,H[_e],le,fe[_e].text,void 0,fe[_e].align)}),this.setTableHeaderRow(F),this.printHeaderRow(1,!1)}var ye=g.reduce(function(_e,we){return _e[we.name]=we.align,_e},{});for(m=0;m<f.length;m+=1){"rowStart"in y&&y.rowStart instanceof Function&&y.rowStart({row:m,data:f[m]},this);var ee=a.call(this,f[m],H);for(b=0;b<x.length;b+=1){var ue=f[m][x[b]];"cellStart"in y&&y.cellStart instanceof Function&&y.cellStart({row:m,col:b,data:ue},this),o.call(this,new i(l,u,H[x[b]],ee,ue,m+2,ye[x[b]]))}}return this.internal.__cell__.table_x=l,this.internal.__cell__.table_y=u,this};var a=function(l,u){var f=this.internal.__cell__.padding,g=this.internal.__cell__.table_font_size,y=this.internal.scaleFactor;return Object.keys(l).map(function(m){var E=l[m];return this.splitTextToSize(E.hasOwnProperty("text")?E.text:E,u[m]-f-f)},this).map(function(m){return this.getLineHeightFactor()*m.length*g/y+f+f},this).reduce(function(m,E){return Math.max(m,E)},0)};t.setTableHeaderRow=function(l){n.call(this),this.internal.__cell__.tableHeaderRow=l},t.printHeaderRow=function(l,u){if(n.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var f;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var g=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(g[0],g[1],g[2],g[3],void 0,-1)}this.setFont(void 0,"bold");for(var y=[],m=0;m<this.internal.__cell__.tableHeaderRow.length;m+=1){f=this.internal.__cell__.tableHeaderRow[m].clone(),u&&(f.y=this.internal.__cell__.margins.top||0,y.push(f)),f.lineNumber=l;var E=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),o.call(this,f),this.setTextColor(E)}y.length>0&&this.setTableHeaderRow(y),this.setFont(void 0,"normal"),r=!1}}(rt.API);var nT={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},sT=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],_2=rT(sT),iT=[100,200,300,400,500,600,700,800,900],TB=rT(iT);function L1(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),r=function(i){return nT[i=i||"normal"]?i:"normal"}(t.style),n=function(i){return i?typeof i=="number"?i>=100&&i<=900&&i%100==0?i:400:/^\d00$/.test(i)?parseInt(i):i==="bold"?700:400:400}(t.weight),s=function(i){return typeof _2[i=i||"normal"]=="number"?i:"normal"}(t.stretch);return{family:e,style:r,weight:n,stretch:s,src:t.src||[],ref:t.ref||{name:e,style:[s,r,n].join(" ")}}}function vN(t,e,r,n){var s;for(s=r;s>=0&&s<e.length;s+=n)if(t[e[s]])return t[e[s]];for(s=r;s>=0&&s<e.length;s-=n)if(t[e[s]])return t[e[s]]}var IB={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wN={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function xN(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function _N(t){return t.trimLeft()}function kB(t,e){for(var r=0;r<t.length;){if(t.charAt(r)===e)return[t.substring(0,r),t.substring(r+1)];r+=1}return null}function PB(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var Rp,bN,NN,lu,Op,EN,AN,SN,R1=["times"];function TN(t,e,r,n,s){var i=4,o=kN;switch(s){case rt.API.image_compression.FAST:i=1,o=IN;break;case rt.API.image_compression.MEDIUM:i=6,o=PN;break;case rt.API.image_compression.SLOW:i=9,o=CN}t=function(l,u,f,g){for(var y,m=l.length/u,E=new Uint8Array(l.length+m),b=[CB,IN,kN,PN,CN],A=0;A<m;A+=1){var x=A*u,T=l.subarray(x,x+u);if(g)E.set(g(T,f,y),x+A);else{for(var I=b.length,k=[],H=0;H<I;H+=1)k[H]=b[H](T,f,y);var Z=LB(k.concat());E.set(k[Z],x+A)}y=T}return E}(t,e,Math.ceil(r*n/8),o);var a=p2(t,{level:i});return rt.API.__addimage__.arrayBufferToBinaryString(a)}function CB(t){var e=Array.apply([],t);return e.unshift(0),e}function IN(t,e){var r=t.length,n=[];n[0]=1;for(var s=0;s<r;s+=1){var i=t[s-e]||0;n[s+1]=t[s]-i+256&255}return n}function kN(t,e,r){var n=t.length,s=[];s[0]=2;for(var i=0;i<n;i+=1){var o=r&&r[i]||0;s[i+1]=t[i]-o+256&255}return s}function PN(t,e,r){var n=t.length,s=[];s[0]=3;for(var i=0;i<n;i+=1){var o=t[i-e]||0,a=r&&r[i]||0;s[i+1]=t[i]+256-(o+a>>>1)&255}return s}function CN(t,e,r){var n=t.length,s=[];s[0]=4;for(var i=0;i<n;i+=1){var o=jB(t[i-e]||0,r&&r[i]||0,r&&r[i-e]||0);s[i+1]=t[i]-o+256&255}return s}function jB(t,e,r){if(t===e&&e===r)return t;var n=Math.abs(e-r),s=Math.abs(t-r),i=Math.abs(t+e-r-r);return n<=s&&n<=i?t:s<=i?e:r}function LB(t){var e=t.map(function(r){return r.reduce(function(n,s){return n+Math.abs(s)},0)});return e.indexOf(Math.min.apply(null,e))}function O1(t,e,r){var n=e*r,s=Math.floor(n/8),i=16-(n-8*s+r),o=(1<<r)-1;return oT(t,s)>>i&o}function jN(t,e,r,n){var s=r*n,i=Math.floor(s/8),o=16-(s-8*i+n),a=(1<<n)-1,l=(e&a)<<o;(function(u,f,g){if(f+1<u.byteLength)u.setUint16(f,g,!1);else{var y=g>>8&255;u.setUint8(f,y)}})(t,i,oT(t,i)&~(a<<o)&65535|l)}function oT(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function RB(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=t[e++]|t[e++]<<8,n=t[e++]|t[e++]<<8,s=t[e++],i=s>>7,o=1<<1+(7&s);t[e++],t[e++];var a=null,l=null;i&&(a=e,l=o,e+=3*o);var u=!0,f=[],g=0,y=null,m=0,E=null;for(this.width=r,this.height=n;u&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,E=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var b=t[e++];g=t[e++]|t[e++]<<8,y=t[e++],1&b||(y=null),m=b>>2&7,e++;break;case 254:for(;;){if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var A=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,T=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,k=t[e++],H=k>>6&1,Z=1<<1+(7&k),F=a,P=l,C=!1;k>>7&&(C=!0,F=e,P=Z,e+=3*Z);var O=e;for(e++;;){var N;if(!((N=t[e++])>=0))throw Error("Invalid block size");if(N===0)break;e+=N}f.push({x:A,y:x,width:T,height:I,has_local_palette:C,palette_offset:F,palette_size:P,data_offset:O,data_length:e-O,transparent_index:y,interlaced:!!H,delay:g,disposal:m});break;case 59:u=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return f.length},this.loopCount=function(){return E},this.frameInfo=function(R){if(R<0||R>=f.length)throw new Error("Frame index out of range.");return f[R]},this.decodeAndBlitFrameBGRA=function(R,L){var X=this.frameInfo(R),fe=X.width*X.height,le=new Uint8Array(fe);LN(t,X.data_offset,le,fe);var ye=X.palette_offset,ee=X.transparent_index;ee===null&&(ee=256);var ue=X.width,_e=r-ue,we=ue,U=4*(X.y*r+X.x),G=4*((X.y+X.height)*r+X.x),J=U,re=4*_e;X.interlaced===!0&&(re+=4*r*7);for(var ie=8,he=0,ve=le.length;he<ve;++he){var xe=le[he];if(we===0&&(we=ue,(J+=re)>=G&&(re=4*_e+4*r*(ie-1),J=U+(ue+_e)*(ie<<1),ie>>=1)),xe===ee)J+=4;else{var Ae=t[ye+3*xe],je=t[ye+3*xe+1],Ve=t[ye+3*xe+2];L[J++]=Ve,L[J++]=je,L[J++]=Ae,L[J++]=255}--we}},this.decodeAndBlitFrameRGBA=function(R,L){var X=this.frameInfo(R),fe=X.width*X.height,le=new Uint8Array(fe);LN(t,X.data_offset,le,fe);var ye=X.palette_offset,ee=X.transparent_index;ee===null&&(ee=256);var ue=X.width,_e=r-ue,we=ue,U=4*(X.y*r+X.x),G=4*((X.y+X.height)*r+X.x),J=U,re=4*_e;X.interlaced===!0&&(re+=4*r*7);for(var ie=8,he=0,ve=le.length;he<ve;++he){var xe=le[he];if(we===0&&(we=ue,(J+=re)>=G&&(re=4*_e+4*r*(ie-1),J=U+(ue+_e)*(ie<<1),ie>>=1)),xe===ee)J+=4;else{var Ae=t[ye+3*xe],je=t[ye+3*xe+1],Ve=t[ye+3*xe+2];L[J++]=Ae,L[J++]=je,L[J++]=Ve,L[J++]=255}--we}}}function LN(t,e,r,n){for(var s=t[e++],i=1<<s,o=i+1,a=o+1,l=s+1,u=(1<<l)-1,f=0,g=0,y=0,m=t[e++],E=new Int32Array(4096),b=null;;){for(;f<16&&m!==0;)g|=t[e++]<<f,f+=8,m===1?m=t[e++]:--m;if(f<l)break;var A=g&u;if(g>>=l,f-=l,A!==i){if(A===o)break;for(var x=A<a?A:b,T=0,I=x;I>i;)I=E[I]>>8,++T;var k=I;if(y+T+(x!==A?1:0)>n)return void mr.log("Warning, gif stream longer than expected.");r[y++]=k;var H=y+=T;for(x!==A&&(r[y++]=k),I=x;T--;)I=E[I],r[--H]=255&I,I>>=8;b!==null&&a<4096&&(E[a++]=b<<8|k,a>=u+1&&l<12&&(++l,u=u<<1|1)),b=A}else a=o+1,u=(1<<(l=s+1))-1,b=null}return y!==n&&mr.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function D1(t){var e,r,n,s,i,o=Math.floor,a=new Array(64),l=new Array(64),u=new Array(64),f=new Array(64),g=new Array(65535),y=new Array(65535),m=new Array(64),E=new Array(64),b=[],A=0,x=7,T=new Array(64),I=new Array(64),k=new Array(64),H=new Array(256),Z=new Array(2048),F=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],P=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],C=[0,1,2,3,4,5,6,7,8,9,10,11],O=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],N=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],R=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],X=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function le(U,G){for(var J=0,re=0,ie=new Array,he=1;he<=16;he++){for(var ve=1;ve<=U[he];ve++)ie[G[re]]=[],ie[G[re]][0]=J,ie[G[re]][1]=he,re++,J++;J*=2}return ie}function ye(U){for(var G=U[0],J=U[1]-1;J>=0;)G&1<<J&&(A|=1<<x),J--,--x<0&&(A==255?(ee(255),ee(0)):ee(A),x=7,A=0)}function ee(U){b.push(U)}function ue(U){ee(U>>8&255),ee(255&U)}function _e(U,G,J,re,ie){for(var he,ve=ie[0],xe=ie[240],Ae=function(Pe,st){var Be,ot,et,Ht,Lt,Xe,ft,Pt,We,xt,Ze=0;for(We=0;We<8;++We){Be=Pe[Ze],ot=Pe[Ze+1],et=Pe[Ze+2],Ht=Pe[Ze+3],Lt=Pe[Ze+4],Xe=Pe[Ze+5],ft=Pe[Ze+6];var hr=Be+(Pt=Pe[Ze+7]),Ft=Be-Pt,It=ot+ft,At=ot-ft,yr=et+Xe,it=et-Xe,er=Ht+Lt,ut=Ht-Lt,vt=hr+er,tr=hr-er,kt=It+yr,at=It-yr;Pe[Ze]=vt+kt,Pe[Ze+4]=vt-kt;var Ot=.707106781*(at+tr);Pe[Ze+2]=tr+Ot,Pe[Ze+6]=tr-Ot;var ho=.382683433*((vt=ut+it)-(at=At+Ft)),Gr=.5411961*vt+ho,mi=1.306562965*at+ho,Gn=.707106781*(kt=it+At),ct=Ft+Gn,br=Ft-Gn;Pe[Ze+5]=br+Gr,Pe[Ze+3]=br-Gr,Pe[Ze+1]=ct+mi,Pe[Ze+7]=ct-mi,Ze+=8}for(Ze=0,We=0;We<8;++We){Be=Pe[Ze],ot=Pe[Ze+8],et=Pe[Ze+16],Ht=Pe[Ze+24],Lt=Pe[Ze+32],Xe=Pe[Ze+40],ft=Pe[Ze+48];var gi=Be+(Pt=Pe[Ze+56]),_n=Be-Pt,bn=ot+ft,Tr=ot-ft,ln=et+Xe,Ir=et-Xe,zo=Ht+Lt,fo=Ht-Lt,Kn=gi+zo,Ws=gi-zo,ms=bn+ln,Qn=bn-ln;Pe[Ze]=Kn+ms,Pe[Ze+32]=Kn-ms;var Kr=.707106781*(Qn+Ws);Pe[Ze+16]=Ws+Kr,Pe[Ze+48]=Ws-Kr;var po=.382683433*((Kn=fo+Ir)-(Qn=Tr+_n)),Gs=.5411961*Kn+po,Ui=1.306562965*Qn+po,mo=.707106781*(ms=Ir+Tr),qo=_n+mo,$o=_n-mo;Pe[Ze+40]=$o+Gs,Pe[Ze+24]=$o-Gs,Pe[Ze+8]=qo+Ui,Pe[Ze+56]=qo-Ui,Ze++}for(We=0;We<64;++We)xt=Pe[We]*st[We],m[We]=xt>0?xt+.5|0:xt-.5|0;return m}(U,G),je=0;je<64;++je)E[F[je]]=Ae[je];var Ve=E[0]-J;J=E[0],Ve==0?ye(re[0]):(ye(re[y[he=32767+Ve]]),ye(g[he]));for(var Fe=63;Fe>0&&E[Fe]==0;)Fe--;if(Fe==0)return ye(ve),J;for(var Je,W=1;W<=Fe;){for(var Me=W;E[W]==0&&W<=Fe;)++W;var Tt=W-Me;if(Tt>=16){Je=Tt>>4;for(var lt=1;lt<=Je;++lt)ye(xe);Tt&=15}he=32767+E[W],ye(ie[(Tt<<4)+y[he]]),ye(g[he]),W++}return Fe!=63&&ye(ve),J}function we(U){U=Math.min(Math.max(U,1),100),i!=U&&(function(G){for(var J=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],re=0;re<64;re++){var ie=o((J[re]*G+50)/100);ie=Math.min(Math.max(ie,1),255),a[F[re]]=ie}for(var he=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ve=0;ve<64;ve++){var xe=o((he[ve]*G+50)/100);xe=Math.min(Math.max(xe,1),255),l[F[ve]]=xe}for(var Ae=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],je=0,Ve=0;Ve<8;Ve++)for(var Fe=0;Fe<8;Fe++)u[je]=1/(a[F[je]]*Ae[Ve]*Ae[Fe]*8),f[je]=1/(l[F[je]]*Ae[Ve]*Ae[Fe]*8),je++}(U<50?Math.floor(5e3/U):Math.floor(200-2*U)),i=U)}this.encode=function(U,G){G&&we(G),b=new Array,A=0,x=7,ue(65496),ue(65504),ue(16),ee(74),ee(70),ee(73),ee(70),ee(0),ee(1),ee(1),ee(0),ue(1),ue(1),ee(0),ee(0),function(){ue(65499),ue(132),ee(0);for(var ot=0;ot<64;ot++)ee(a[ot]);ee(1);for(var et=0;et<64;et++)ee(l[et])}(),function(ot,et){ue(65472),ue(17),ee(8),ue(et),ue(ot),ee(3),ee(1),ee(17),ee(0),ee(2),ee(17),ee(1),ee(3),ee(17),ee(1)}(U.width,U.height),function(){ue(65476),ue(418),ee(0);for(var ot=0;ot<16;ot++)ee(P[ot+1]);for(var et=0;et<=11;et++)ee(C[et]);ee(16);for(var Ht=0;Ht<16;Ht++)ee(O[Ht+1]);for(var Lt=0;Lt<=161;Lt++)ee(N[Lt]);ee(1);for(var Xe=0;Xe<16;Xe++)ee(R[Xe+1]);for(var ft=0;ft<=11;ft++)ee(L[ft]);ee(17);for(var Pt=0;Pt<16;Pt++)ee(X[Pt+1]);for(var We=0;We<=161;We++)ee(fe[We])}(),ue(65498),ue(12),ee(3),ee(1),ee(0),ee(2),ee(17),ee(3),ee(17),ee(0),ee(63),ee(0);var J=0,re=0,ie=0;A=0,x=7,this.encode.displayName="_encode_";for(var he,ve,xe,Ae,je,Ve,Fe,Je,W,Me=U.data,Tt=U.width,lt=U.height,Pe=4*Tt,st=0;st<lt;){for(he=0;he<Pe;){for(je=Pe*st+he,Fe=-1,Je=0,W=0;W<64;W++)Ve=je+(Je=W>>3)*Pe+(Fe=4*(7&W)),st+Je>=lt&&(Ve-=Pe*(st+1+Je-lt)),he+Fe>=Pe&&(Ve-=he+Fe-Pe+4),ve=Me[Ve++],xe=Me[Ve++],Ae=Me[Ve++],T[W]=(Z[ve]+Z[xe+256|0]+Z[Ae+512|0]>>16)-128,I[W]=(Z[ve+768|0]+Z[xe+1024|0]+Z[Ae+1280|0]>>16)-128,k[W]=(Z[ve+1280|0]+Z[xe+1536|0]+Z[Ae+1792|0]>>16)-128;J=_e(T,u,J,e,n),re=_e(I,f,re,r,s),ie=_e(k,f,ie,r,s),he+=32}st+=8}if(x>=0){var Be=[];Be[1]=x+1,Be[0]=(1<<x+1)-1,ye(Be)}return ue(65497),new Uint8Array(b)},t=t||50,function(){for(var U=String.fromCharCode,G=0;G<256;G++)H[G]=U(G)}(),e=le(P,C),r=le(R,L),n=le(O,N),s=le(X,fe),function(){for(var U=1,G=2,J=1;J<=15;J++){for(var re=U;re<G;re++)y[32767+re]=J,g[32767+re]=[],g[32767+re][1]=J,g[32767+re][0]=re;for(var ie=-(G-1);ie<=-U;ie++)y[32767+ie]=J,g[32767+ie]=[],g[32767+ie][1]=J,g[32767+ie][0]=G-1+ie;U<<=1,G<<=1}}(),function(){for(var U=0;U<256;U++)Z[U]=19595*U,Z[U+256|0]=38470*U,Z[U+512|0]=7471*U+32768,Z[U+768|0]=-11059*U,Z[U+1024|0]=-21709*U,Z[U+1280|0]=32768*U+8421375,Z[U+1536|0]=-27439*U,Z[U+1792|0]=-5329*U}(),we(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Gi(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function RN(t){function e(C){if(!C)throw Error("assert :P")}function r(C,O,N){for(var R=0;4>R;R++)if(C[O+R]!=N.charCodeAt(R))return!0;return!1}function n(C,O,N,R,L){for(var X=0;X<L;X++)C[O+X]=N[R+X]}function s(C,O,N,R){for(var L=0;L<R;L++)C[O+L]=N}function i(C){return new Int32Array(C)}function o(C,O){for(var N=[],R=0;R<C;R++)N.push(new O);return N}function a(C,O){var N=[];return function R(L,X,fe){for(var le=fe[X],ye=0;ye<le&&(L.push(fe.length>X+1?[]:new O),!(fe.length<X+1));ye++)R(L[ye],X+1,fe)}(N,0,C),N}var l=function(){var C=this;function O(h,p){for(var w=1<<p-1>>>0;h&w;)w>>>=1;return w?(h&w-1)+w:h}function N(h,p,w,S,M){e(!(S%w));do h[p+(S-=w)]=M;while(0<S)}function R(h,p,w,S,M){if(e(2328>=M),512>=M)var V=i(512);else if((V=i(M))==null)return 0;return function(B,z,$,Q,se,me){var Y,oe,de=z,be=1<<$,pe=i(16),Ee=i(16);for(e(se!=0),e(Q!=null),e(B!=null),e(0<$),oe=0;oe<se;++oe){if(15<Q[oe])return 0;++pe[Q[oe]]}if(pe[0]==se)return 0;for(Ee[1]=0,Y=1;15>Y;++Y){if(pe[Y]>1<<Y)return 0;Ee[Y+1]=Ee[Y]+pe[Y]}for(oe=0;oe<se;++oe)Y=Q[oe],0<Q[oe]&&(me[Ee[Y]++]=oe);if(Ee[15]==1)return(Q=new L).g=0,Q.value=me[0],N(B,de,1,be,Q),be;var Se,Le=-1,ke=be-1,tt=0,$e=1,Ct=1,Qe=1<<$;for(oe=0,Y=1,se=2;Y<=$;++Y,se<<=1){if($e+=Ct<<=1,0>(Ct-=pe[Y]))return 0;for(;0<pe[Y];--pe[Y])(Q=new L).g=Y,Q.value=me[oe++],N(B,de+tt,se,Qe,Q),tt=O(tt,Y)}for(Y=$+1,se=2;15>=Y;++Y,se<<=1){if($e+=Ct<<=1,0>(Ct-=pe[Y]))return 0;for(;0<pe[Y];--pe[Y]){if(Q=new L,(tt&ke)!=Le){for(de+=Qe,Se=1<<(Le=Y)-$;15>Le&&!(0>=(Se-=pe[Le]));)++Le,Se<<=1;be+=Qe=1<<(Se=Le-$),B[z+(Le=tt&ke)].g=Se+$,B[z+Le].value=de-z-Le}Q.g=Y-$,Q.value=me[oe++],N(B,de+(tt>>$),se,Qe,Q),tt=O(tt,Y)}}return $e!=2*Ee[15]-1?0:be}(h,p,w,S,M,V)}function L(){this.value=this.g=0}function X(){this.value=this.g=0}function fe(){this.G=o(5,L),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(ec,X)}function le(h,p,w,S){e(h!=null),e(p!=null),e(2147483648>S),h.Ca=254,h.I=0,h.b=-8,h.Ka=0,h.oa=p,h.pa=w,h.Jd=p,h.Yc=w+S,h.Zc=4<=S?w+S-4+1:w,ve(h)}function ye(h,p){for(var w=0;0<p--;)w|=Ae(h,128)<<p;return w}function ee(h,p){var w=ye(h,p);return xe(h)?-w:w}function ue(h,p,w,S){var M,V=0;for(e(h!=null),e(p!=null),e(4294967288>S),h.Sb=S,h.Ra=0,h.u=0,h.h=0,4<S&&(S=4),M=0;M<S;++M)V+=p[w+M]<<8*M;h.Ra=V,h.bb=S,h.oa=p,h.pa=w}function _e(h){for(;8<=h.u&&h.bb<h.Sb;)h.Ra>>>=8,h.Ra+=h.oa[h.pa+h.bb]<<za-8>>>0,++h.bb,h.u-=8;re(h)&&(h.h=1,h.u=0)}function we(h,p){if(e(0<=p),!h.h&&p<=Js){var w=J(h)&Xs[p];return h.u+=p,_e(h),w}return h.h=1,h.u=0}function U(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function G(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function J(h){return h.Ra>>>(h.u&za-1)>>>0}function re(h){return e(h.bb<=h.Sb),h.h||h.bb==h.Sb&&h.u>za}function ie(h,p){h.u=p,h.h=re(h)}function he(h){h.u>=Xo&&(e(h.u>=Xo),_e(h))}function ve(h){e(h!=null&&h.oa!=null),h.pa<h.Zc?(h.I=(h.oa[h.pa++]|h.I<<8)>>>0,h.b+=8):(e(h!=null&&h.oa!=null),h.pa<h.Yc?(h.b+=8,h.I=h.oa[h.pa++]|h.I<<8):h.Ka?h.b=0:(h.I<<=8,h.b+=8,h.Ka=1))}function xe(h){return ye(h,1)}function Ae(h,p){var w=h.Ca;0>h.b&&ve(h);var S=h.b,M=w*p>>>8,V=(h.I>>>S>M)+0;for(V?(w-=M,h.I-=M+1<<S>>>0):w=M+1,S=w,M=0;256<=S;)M+=8,S>>=8;return S=7^M+qa[S],h.b-=S,h.Ca=(w<<S)-1,V}function je(h,p,w){h[p+0]=w>>24&255,h[p+1]=w>>16&255,h[p+2]=w>>8&255,h[p+3]=255&w}function Ve(h,p){return h[p+0]|h[p+1]<<8}function Fe(h,p){return Ve(h,p)|h[p+2]<<16}function Je(h,p){return Ve(h,p)|Ve(h,p+2)<<16}function W(h,p){var w=1<<p;return e(h!=null),e(0<p),h.X=i(w),h.X==null?0:(h.Mb=32-p,h.Xa=p,1)}function Me(h,p){e(h!=null),e(p!=null),e(h.Xa==p.Xa),n(p.X,0,h.X,0,1<<p.Xa)}function Tt(){this.X=[],this.Xa=this.Mb=0}function lt(h,p,w,S){e(w!=null),e(S!=null);var M=w[0],V=S[0];return M==0&&(M=(h*V+p/2)/p),V==0&&(V=(p*M+h/2)/h),0>=M||0>=V?0:(w[0]=M,S[0]=V,1)}function Pe(h,p){return h+(1<<p)-1>>>p}function st(h,p){return((4278255360&h)+(4278255360&p)>>>0&4278255360)+((16711935&h)+(16711935&p)>>>0&16711935)>>>0}function Be(h,p){C[p]=function(w,S,M,V,B,z,$){var Q;for(Q=0;Q<B;++Q){var se=C[h](z[$+Q-1],M,V+Q);z[$+Q]=st(w[S+Q],se)}}}function ot(){this.ud=this.hd=this.jd=0}function et(h,p){return((4278124286&(h^p))>>>1)+(h&p)>>>0}function Ht(h){return 0<=h&&256>h?h:0>h?0:255<h?255:void 0}function Lt(h,p){return Ht(h+(h-p+.5>>1))}function Xe(h,p,w){return Math.abs(p-w)-Math.abs(h-w)}function ft(h,p,w,S,M,V,B){for(S=V[B-1],w=0;w<M;++w)V[B+w]=S=st(h[p+w],S)}function Pt(h,p,w,S,M){var V;for(V=0;V<w;++V){var B=h[p+V],z=B>>8&255,$=16711935&($=($=16711935&B)+((z<<16)+z));S[M+V]=(4278255360&B)+$>>>0}}function We(h,p){p.jd=255&h,p.hd=h>>8&255,p.ud=h>>16&255}function xt(h,p,w,S,M,V){var B;for(B=0;B<S;++B){var z=p[w+B],$=z>>>8,Q=z,se=255&(se=(se=z>>>16)+((h.jd<<24>>24)*($<<24>>24)>>>5));Q=255&(Q=(Q+=(h.hd<<24>>24)*($<<24>>24)>>>5)+((h.ud<<24>>24)*(se<<24>>24)>>>5)),M[V+B]=(4278255360&z)+(se<<16)+Q}}function Ze(h,p,w,S,M){C[p]=function(V,B,z,$,Q,se,me,Y,oe){for($=me;$<Y;++$)for(me=0;me<oe;++me)Q[se++]=M(z[S(V[B++])])},C[h]=function(V,B,z,$,Q,se,me){var Y=8>>V.b,oe=V.Ea,de=V.K[0],be=V.w;if(8>Y)for(V=(1<<V.b)-1,be=(1<<Y)-1;B<z;++B){var pe,Ee=0;for(pe=0;pe<oe;++pe)pe&V||(Ee=S($[Q++])),se[me++]=M(de[Ee&be]),Ee>>=Y}else C["VP8LMapColor"+w]($,Q,de,be,se,me,B,z,oe)}}function hr(h,p,w,S,M){for(w=p+w;p<w;){var V=h[p++];S[M++]=V>>16&255,S[M++]=V>>8&255,S[M++]=255&V}}function Ft(h,p,w,S,M){for(w=p+w;p<w;){var V=h[p++];S[M++]=V>>16&255,S[M++]=V>>8&255,S[M++]=255&V,S[M++]=V>>24&255}}function It(h,p,w,S,M){for(w=p+w;p<w;){var V=(B=h[p++])>>16&240|B>>12&15,B=240&B|B>>28&15;S[M++]=V,S[M++]=B}}function At(h,p,w,S,M){for(w=p+w;p<w;){var V=(B=h[p++])>>16&248|B>>13&7,B=B>>5&224|B>>3&31;S[M++]=V,S[M++]=B}}function yr(h,p,w,S,M){for(w=p+w;p<w;){var V=h[p++];S[M++]=255&V,S[M++]=V>>8&255,S[M++]=V>>16&255}}function it(h,p,w,S,M,V){if(V==0)for(w=p+w;p<w;)je(S,((V=h[p++])[0]>>24|V[1]>>8&65280|V[2]<<8&16711680|V[3]<<24)>>>0),M+=32;else n(S,M,h,p,w)}function er(h,p){C[p][0]=C[h+"0"],C[p][1]=C[h+"1"],C[p][2]=C[h+"2"],C[p][3]=C[h+"3"],C[p][4]=C[h+"4"],C[p][5]=C[h+"5"],C[p][6]=C[h+"6"],C[p][7]=C[h+"7"],C[p][8]=C[h+"8"],C[p][9]=C[h+"9"],C[p][10]=C[h+"10"],C[p][11]=C[h+"11"],C[p][12]=C[h+"12"],C[p][13]=C[h+"13"],C[p][14]=C[h+"0"],C[p][15]=C[h+"0"]}function ut(h){return h==u0||h==h0||h==Gf||h==d0}function vt(){this.eb=[],this.size=this.A=this.fb=0}function tr(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function kt(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new tr,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Ot(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ho(h){return alert("todo:WebPSamplerProcessPlane"),h.T}function Gr(h,p){var w=h.T,S=p.ba.f.RGBA,M=S.eb,V=S.fb+h.ka*S.A,B=Ii[p.ba.S],z=h.y,$=h.O,Q=h.f,se=h.N,me=h.ea,Y=h.W,oe=p.cc,de=p.dc,be=p.Mc,pe=p.Nc,Ee=h.ka,Se=h.ka+h.T,Le=h.U,ke=Le+1>>1;for(Ee==0?B(z,$,null,null,Q,se,me,Y,Q,se,me,Y,M,V,null,null,Le):(B(p.ec,p.fc,z,$,oe,de,be,pe,Q,se,me,Y,M,V-S.A,M,V,Le),++w);Ee+2<Se;Ee+=2)oe=Q,de=se,be=me,pe=Y,se+=h.Rc,Y+=h.Rc,V+=2*S.A,B(z,($+=2*h.fa)-h.fa,z,$,oe,de,be,pe,Q,se,me,Y,M,V-S.A,M,V,Le);return $+=h.fa,h.j+Se<h.o?(n(p.ec,p.fc,z,$,Le),n(p.cc,p.dc,Q,se,ke),n(p.Mc,p.Nc,me,Y,ke),w--):1&Se||B(z,$,null,null,Q,se,me,Y,Q,se,me,Y,M,V+S.A,null,null,Le),w}function mi(h,p,w){var S=h.F,M=[h.J];if(S!=null){var V=h.U,B=p.ba.S,z=B==Wf||B==Gf;p=p.ba.f.RGBA;var $=[0],Q=h.ka;$[0]=h.T,h.Kb&&(Q==0?--$[0]:(--Q,M[0]-=h.width),h.j+h.ka+h.T==h.o&&($[0]=h.o-h.j-Q));var se=p.eb;Q=p.fb+Q*p.A,h=J5(S,M[0],h.width,V,$,se,Q+(z?0:3),p.A),e(w==$),h&&ut(B)&&zh(se,Q,z,V,$,p.A)}return 0}function Gn(h){var p=h.ma,w=p.ba.S,S=11>w,M=w==$f||w==Hf||w==Wf||w==c0||w==12||ut(w);if(p.memory=null,p.Ib=null,p.Jb=null,p.Nd=null,!Rh(p.Oa,h,M?11:12))return 0;if(M&&ut(w)&&Ai(),h.da)alert("todo:use_scaling");else{if(S){if(p.Ib=ho,h.Kb){if(w=h.U+1>>1,p.memory=i(h.U+2*w),p.memory==null)return 0;p.ec=p.memory,p.fc=0,p.cc=p.ec,p.dc=p.fc+h.U,p.Mc=p.cc,p.Nc=p.dc+w,p.Ib=Gr,Ai()}}else alert("todo:EmitYUV");M&&(p.Jb=mi,S&&Cs())}if(S&&!pw){for(h=0;256>h;++h)pI[h]=89858*(h-128)+Qf>>Kf,yI[h]=-22014*(h-128)+Qf,gI[h]=-45773*(h-128),mI[h]=113618*(h-128)+Qf>>Kf;for(h=$h;h<m0;++h)p=76283*(h-16)+Qf>>Kf,vI[h-$h]=ks(p,255),wI[h-$h]=ks(p+8>>4,15);pw=1}return 1}function ct(h){var p=h.ma,w=h.U,S=h.T;return e(!(1&h.ka)),0>=w||0>=S?0:(w=p.Ib(h,p),p.Jb!=null&&p.Jb(h,p,w),p.Dc+=w,1)}function br(h){h.ma.memory=null}function gi(h,p,w,S){return we(h,8)!=47?0:(p[0]=we(h,14)+1,w[0]=we(h,14)+1,S[0]=we(h,1),we(h,3)!=0?0:!h.h)}function _n(h,p){if(4>h)return h+1;var w=h-2>>1;return(2+(1&h)<<w)+we(p,w)+1}function bn(h,p){return 120<p?p-120:1<=(w=((w=eI[p-1])>>4)*h+(8-(15&w)))?w:1;var w}function Tr(h,p,w){var S=J(w),M=h[p+=255&S].g-8;return 0<M&&(ie(w,w.u+8),S=J(w),p+=h[p].value,p+=S&(1<<M)-1),ie(w,w.u+h[p].g),h[p].value}function ln(h,p,w){return w.g+=h.g,w.value+=h.value<<p>>>0,e(8>=w.g),h.g}function Ir(h,p,w){var S=h.xc;return e((p=S==0?0:h.vc[h.md*(w>>S)+(p>>S)])<h.Wb),h.Ya[p]}function zo(h,p,w,S){var M=h.ab,V=h.c*p,B=h.C;p=B+p;var z=w,$=S;for(S=h.Ta,w=h.Ua;0<M--;){var Q=h.gc[M],se=B,me=p,Y=z,oe=$,de=($=S,z=w,Q.Ea);switch(e(se<me),e(me<=Q.nc),Q.hc){case 2:Qr(Y,oe,(me-se)*de,$,z);break;case 0:var be=se,pe=me,Ee=$,Se=z,Le=(Qe=Q).Ea;be==0&&(Dh(Y,oe,null,null,1,Ee,Se),ft(Y,oe+1,0,0,Le-1,Ee,Se+1),oe+=Le,Se+=Le,++be);for(var ke=1<<Qe.b,tt=ke-1,$e=Pe(Le,Qe.b),Ct=Qe.K,Qe=Qe.w+(be>>Qe.b)*$e;be<pe;){var qt=Ct,mn=Qe,jt=1;for(tu(Y,oe,Ee,Se-Le,1,Ee,Se);jt<Le;){var Ye=(jt&~tt)+ke;Ye>Le&&(Ye=Le),(0,Fh[qt[mn++]>>8&15])(Y,oe+ +jt,Ee,Se+jt-Le,Ye-jt,Ee,Se+jt),jt=Ye}oe+=Le,Se+=Le,++be&tt||(Qe+=$e)}me!=Q.nc&&n($,z-de,$,z+(me-se-1)*de,de);break;case 1:for(de=Y,pe=oe,Le=(Y=Q.Ea)-(Se=Y&~(Ee=(oe=1<<Q.b)-1)),be=Pe(Y,Q.b),ke=Q.K,Q=Q.w+(se>>Q.b)*be;se<me;){for(tt=ke,$e=Q,Ct=new ot,Qe=pe+Se,qt=pe+Y;pe<Qe;)We(tt[$e++],Ct),Uh(Ct,de,pe,oe,$,z),pe+=oe,z+=oe;pe<qt&&(We(tt[$e++],Ct),Uh(Ct,de,pe,Le,$,z),pe+=Le,z+=Le),++se&Ee||(Q+=be)}break;case 3:if(Y==$&&oe==z&&0<Q.b){for(pe=$,Y=de=z+(me-se)*de-(Se=(me-se)*Pe(Q.Ea,Q.b)),oe=$,Ee=z,be=[],Se=(Le=Se)-1;0<=Se;--Se)be[Se]=oe[Ee+Se];for(Se=Le-1;0<=Se;--Se)pe[Y+Se]=be[Se];Vf(Q,se,me,$,de,$,z)}else Vf(Q,se,me,Y,oe,$,z)}z=S,$=w}$!=w&&n(S,w,z,$,V)}function fo(h,p){var w=h.V,S=h.Ba+h.c*h.C,M=p-h.C;if(e(p<=h.l.o),e(16>=M),0<M){var V=h.l,B=h.Ta,z=h.Ua,$=V.width;if(zo(h,M,w,S),M=z=[z],e((w=h.C)<(S=p)),e(V.v<V.va),S>V.o&&(S=V.o),w<V.j){var Q=V.j-w;w=V.j,M[0]+=Q*$}if(w>=S?w=0:(M[0]+=4*V.v,V.ka=w-V.j,V.U=V.va-V.v,V.T=S-w,w=1),w){if(z=z[0],11>(w=h.ca).S){var se=w.f.RGBA,me=(S=w.S,M=V.U,V=V.T,Q=se.eb,se.A),Y=V;for(se=se.fb+h.Ma*se.A;0<Y--;){var oe=B,de=z,be=M,pe=Q,Ee=se;switch(S){case qf:Vh(oe,de,be,pe,Ee);break;case $f:$a(oe,de,be,pe,Ee);break;case u0:$a(oe,de,be,pe,Ee),zh(pe,Ee,0,be,1,0);break;case iw:tc(oe,de,be,pe,Ee);break;case Hf:it(oe,de,be,pe,Ee,1);break;case h0:it(oe,de,be,pe,Ee,1),zh(pe,Ee,0,be,1,0);break;case Wf:it(oe,de,be,pe,Ee,0);break;case Gf:it(oe,de,be,pe,Ee,0),zh(pe,Ee,1,be,1,0);break;case c0:Ha(oe,de,be,pe,Ee);break;case d0:Ha(oe,de,be,pe,Ee),X5(pe,Ee,be,1,0);break;case ow:Wa(oe,de,be,pe,Ee);break;default:e(0)}z+=$,se+=me}h.Ma+=V}else alert("todo:EmitRescaledRowsYUVA");e(h.Ma<=w.height)}}h.C=p,e(h.C<=h.i)}function Kn(h){var p;if(0<h.ua)return 0;for(p=0;p<h.Wb;++p){var w=h.Ya[p].G,S=h.Ya[p].H;if(0<w[1][S[1]+0].g||0<w[2][S[2]+0].g||0<w[3][S[3]+0].g)return 0}return 1}function Ws(h,p,w,S,M,V){if(h.Z!=0){var B=h.qd,z=h.rd;for(e(Qa[h.Z]!=null);p<w;++p)Qa[h.Z](B,z,S,M,S,M,V),B=S,z=M,M+=V;h.qd=B,h.rd=z}}function ms(h,p){var w=h.l.ma,S=w.Z==0||w.Z==1?h.l.j:h.C;if(S=h.C<S?S:h.C,e(p<=h.l.o),p>S){var M=h.l.width,V=w.ca,B=w.tb+M*S,z=h.V,$=h.Ba+h.c*S,Q=h.gc;e(h.ab==1),e(Q[0].hc==3),No(Q[0],S,p,z,$,V,B),Ws(w,S,p,V,B,M)}h.C=h.Ma=p}function Qn(h,p,w,S,M,V,B){var z=h.$/S,$=h.$%S,Q=h.m,se=h.s,me=w+h.$,Y=me;M=w+S*M;var oe=w+S*V,de=280+se.ua,be=h.Pb?z:16777216,pe=0<se.ua?se.Wa:null,Ee=se.wc,Se=me<oe?Ir(se,$,z):null;e(h.C<V),e(oe<=M);var Le=!1;e:for(;;){for(;Le||me<oe;){var ke=0;if(z>=be){var tt=me-w;e((be=h).Pb),be.wd=be.m,be.xd=tt,0<be.s.ua&&Me(be.s.Wa,be.s.vb),be=z+rI}if($&Ee||(Se=Ir(se,$,z)),e(Se!=null),Se.Qb&&(p[me]=Se.qb,Le=!0),!Le)if(he(Q),Se.jc){ke=Q,tt=p;var $e=me,Ct=Se.pd[J(ke)&ec-1];e(Se.jc),256>Ct.g?(ie(ke,ke.u+Ct.g),tt[$e]=Ct.value,ke=0):(ie(ke,ke.u+Ct.g-256),e(256<=Ct.value),ke=Ct.value),ke==0&&(Le=!0)}else ke=Tr(Se.G[0],Se.H[0],Q);if(Q.h)break;if(Le||256>ke){if(!Le)if(Se.nd)p[me]=(Se.qb|ke<<8)>>>0;else{if(he(Q),Le=Tr(Se.G[1],Se.H[1],Q),he(Q),tt=Tr(Se.G[2],Se.H[2],Q),$e=Tr(Se.G[3],Se.H[3],Q),Q.h)break;p[me]=($e<<24|Le<<16|ke<<8|tt)>>>0}if(Le=!1,++me,++$>=S&&($=0,++z,B!=null&&z<=V&&!(z%16)&&B(h,z),pe!=null))for(;Y<me;)ke=p[Y++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke}else if(280>ke){if(ke=_n(ke-256,Q),tt=Tr(Se.G[4],Se.H[4],Q),he(Q),tt=bn(S,tt=_n(tt,Q)),Q.h)break;if(me-w<tt||M-me<ke)break e;for($e=0;$e<ke;++$e)p[me+$e]=p[me+$e-tt];for(me+=ke,$+=ke;$>=S;)$-=S,++z,B!=null&&z<=V&&!(z%16)&&B(h,z);if(e(me<=M),$&Ee&&(Se=Ir(se,$,z)),pe!=null)for(;Y<me;)ke=p[Y++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke}else{if(!(ke<de))break e;for(Le=ke-280,e(pe!=null);Y<me;)ke=p[Y++],pe.X[(506832829*ke&4294967295)>>>pe.Mb]=ke;ke=me,e(!(Le>>>(tt=pe).Xa)),p[ke]=tt.X[Le],Le=!0}Le||e(Q.h==re(Q))}if(h.Pb&&Q.h&&me<M)e(h.m.h),h.a=5,h.m=h.wd,h.$=h.xd,0<h.s.ua&&Me(h.s.vb,h.s.Wa);else{if(Q.h)break e;B!=null&&B(h,z>V?V:z),h.a=0,h.$=me-w}return 1}return h.a=3,0}function Kr(h){e(h!=null),h.vc=null,h.yc=null,h.Ya=null;var p=h.Wa;p!=null&&(p.X=null),h.vb=null,e(h!=null)}function po(){var h=new pt;return h==null?null:(h.a=0,h.xb=cw,er("Predictor","VP8LPredictors"),er("Predictor","VP8LPredictors_C"),er("PredictorAdd","VP8LPredictorsAdd"),er("PredictorAdd","VP8LPredictorsAdd_C"),Qr=Pt,Uh=xt,Vh=hr,$a=Ft,Ha=It,Wa=At,tc=yr,C.VP8LMapColor32b=bo,C.VP8LMapColor8b=Mh,h)}function Gs(h,p,w,S,M){var V=1,B=[h],z=[p],$=S.m,Q=S.s,se=null,me=0;e:for(;;){if(w)for(;V&&we($,1);){var Y=B,oe=z,de=S,be=1,pe=de.m,Ee=de.gc[de.ab],Se=we(pe,2);if(de.Oc&1<<Se)V=0;else{switch(de.Oc|=1<<Se,Ee.hc=Se,Ee.Ea=Y[0],Ee.nc=oe[0],Ee.K=[null],++de.ab,e(4>=de.ab),Se){case 0:case 1:Ee.b=we(pe,3)+2,be=Gs(Pe(Ee.Ea,Ee.b),Pe(Ee.nc,Ee.b),0,de,Ee.K),Ee.K=Ee.K[0];break;case 3:var Le,ke=we(pe,8)+1,tt=16<ke?0:4<ke?1:2<ke?2:3;if(Y[0]=Pe(Ee.Ea,tt),Ee.b=tt,Le=be=Gs(ke,1,0,de,Ee.K)){var $e,Ct=ke,Qe=Ee,qt=1<<(8>>Qe.b),mn=i(qt);if(mn==null)Le=0;else{var jt=Qe.K[0],Ye=Qe.w;for(mn[0]=Qe.K[0][0],$e=1;$e<1*Ct;++$e)mn[$e]=st(jt[Ye+$e],mn[$e-1]);for(;$e<4*qt;++$e)mn[$e]=0;Qe.K[0]=null,Qe.K[0]=mn,Le=1}}be=Le;break;case 2:break;default:e(0)}V=be}}if(B=B[0],z=z[0],V&&we($,1)&&!(V=1<=(me=we($,4))&&11>=me)){S.a=3;break e}var De;if(De=V)t:{var Xr,St,Wt,Nr=S,Ln=B,vs=z,qr=me,Xn=w,ws=Nr.m,gn=Nr.s,Kt=[null],sr=1,$r=0,ir=tI[qr];r:for(;;){if(Xn&&we(ws,1)){var Rn=we(ws,3)+2,$i=Pe(Ln,Rn),Jr=Pe(vs,Rn),js=$i*Jr;if(!Gs($i,Jr,0,Nr,Kt))break r;for(Kt=Kt[0],gn.xc=Rn,Xr=0;Xr<js;++Xr){var pr=Kt[Xr]>>8&65535;Kt[Xr]=pr,pr>=sr&&(sr=pr+1)}}if(ws.h)break r;for(St=0;5>St;++St){var yn=aw[St];!St&&0<qr&&(yn+=1<<qr),$r<yn&&($r=yn)}var ei=o(sr*ir,L),xs=sr,ti=o(xs,fe);if(ti==null)var ri=null;else e(65536>=xs),ri=ti;var Ls=i($r);if(ri==null||Ls==null||ei==null){Nr.a=1;break r}var ni=ei;for(Xr=Wt=0;Xr<sr;++Xr){var wr=ri[Xr],si=wr.G,Hi=wr.H,nc=0,ea=1,On=0;for(St=0;5>St;++St){yn=aw[St],si[St]=ni,Hi[St]=Wt,!St&&0<qr&&(yn+=1<<qr);s:{var Xf,g0=yn,Jf=Nr,Hh=Ls,bI=ni,NI=Wt,y0=0,Ya=Jf.m,EI=we(Ya,1);if(s(Hh,0,0,g0),EI){var AI=we(Ya,1)+1,SI=we(Ya,1),yw=we(Ya,SI==0?1:8);Hh[yw]=1,AI==2&&(Hh[yw=we(Ya,8)]=1);var Zf=1}else{var vw=i(19),ww=we(Ya,4)+4;if(19<ww){Jf.a=3;var ep=0;break s}for(Xf=0;Xf<ww;++Xf)vw[ZT[Xf]]=we(Ya,3);var v0=void 0,Wh=void 0,xw=Jf,TI=vw,tp=g0,_w=Hh,w0=0,Xa=xw.m,bw=8,Nw=o(128,L);n:for(;R(Nw,0,7,TI,19);){if(we(Xa,1)){var II=2+2*we(Xa,3);if((v0=2+we(Xa,II))>tp)break n}else v0=tp;for(Wh=0;Wh<tp&&v0--;){he(Xa);var Ew=Nw[0+(127&J(Xa))];ie(Xa,Xa.u+Ew.g);var nu=Ew.value;if(16>nu)_w[Wh++]=nu,nu!=0&&(bw=nu);else{var kI=nu==16,Aw=nu-16,PI=XT[Aw],Sw=we(Xa,YT[Aw])+PI;if(Wh+Sw>tp)break n;for(var CI=kI?bw:0;0<Sw--;)_w[Wh++]=CI}}w0=1;break n}w0||(xw.a=3),Zf=w0}(Zf=Zf&&!Ya.h)&&(y0=R(bI,NI,8,Hh,g0)),Zf&&y0!=0?ep=y0:(Jf.a=3,ep=0)}if(ep==0)break r;if(ea&&JT[St]==1&&(ea=ni[Wt].g==0),nc+=ni[Wt].g,Wt+=ep,3>=St){var Gh,x0=Ls[0];for(Gh=1;Gh<yn;++Gh)Ls[Gh]>x0&&(x0=Ls[Gh]);On+=x0}}if(wr.nd=ea,wr.Qb=0,ea&&(wr.qb=(si[3][Hi[3]+0].value<<24|si[1][Hi[1]+0].value<<16|si[2][Hi[2]+0].value)>>>0,nc==0&&256>si[0][Hi[0]+0].value&&(wr.Qb=1,wr.qb+=si[0][Hi[0]+0].value<<8)),wr.jc=!wr.Qb&&6>On,wr.jc){var rp,ta=wr;for(rp=0;rp<ec;++rp){var Ja=rp,Za=ta.pd[Ja],np=ta.G[0][ta.H[0]+Ja];256<=np.value?(Za.g=np.g+256,Za.value=np.value):(Za.g=0,Za.value=0,Ja>>=ln(np,8,Za),Ja>>=ln(ta.G[1][ta.H[1]+Ja],16,Za),Ja>>=ln(ta.G[2][ta.H[2]+Ja],0,Za),ln(ta.G[3][ta.H[3]+Ja],24,Za))}}}gn.vc=Kt,gn.Wb=sr,gn.Ya=ri,gn.yc=ei,De=1;break t}De=0}if(!(V=De)){S.a=3;break e}if(0<me){if(Q.ua=1<<me,!W(Q.Wa,me)){S.a=1,V=0;break e}}else Q.ua=0;var _0=S,Tw=B,jI=z,b0=_0.s,N0=b0.xc;if(_0.c=Tw,_0.i=jI,b0.md=Pe(Tw,N0),b0.wc=N0==0?-1:(1<<N0)-1,w){S.xb=cI;break e}if((se=i(B*z))==null){S.a=1,V=0;break e}V=(V=Qn(S,se,0,B,z,z,null))&&!$.h;break e}return V?(M!=null?M[0]=se:(e(se==null),e(w)),S.$=0,w||Kr(Q)):Kr(Q),V}function Ui(h,p){var w=h.c*h.i,S=w+p+16*p;return e(h.c<=p),h.V=i(S),h.V==null?(h.Ta=null,h.Ua=0,h.a=1,0):(h.Ta=h.V,h.Ua=h.Ba+w+p,1)}function mo(h,p){var w=h.C,S=p-w,M=h.V,V=h.Ba+h.c*w;for(e(p<=h.l.o);0<S;){var B=16<S?16:S,z=h.l.ma,$=h.l.width,Q=$*B,se=z.ca,me=z.tb+$*w,Y=h.Ta,oe=h.Ua;zo(h,B,M,V),Z5(Y,oe,se,me,Q),Ws(z,w,w+B,se,me,$),S-=B,M+=B*h.c,w+=B}e(w==p),h.C=h.Ma=p}function qo(){this.ub=this.yd=this.td=this.Rb=0}function $o(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Th(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function go(){this.Yb=function(){var h=[];return function p(w,S,M){for(var V=M[S],B=0;B<V&&(w.push(M.length>S+1?[]:0),!(M.length<S+1));B++)p(w[B],S+1,M)}(h,0,[3,11]),h}()}function ql(){this.jb=i(3),this.Wc=a([4,8],go),this.Xc=a([4,17],go)}function La(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Nn(){this.ld=this.La=this.dd=this.tc=0}function Ks(){this.Na=this.la=0}function Ra(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function $l(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Hl(){this.uc=this.M=this.Nb=0,this.wa=Array(new Nn),this.Y=0,this.ya=Array(new $l),this.aa=0,this.l=new yo}function Wl(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Gl(){this.cb=this.a=0,this.sc="",this.m=new U,this.Od=new qo,this.Kc=new $o,this.ed=new La,this.Qa=new Th,this.Ic=this.$c=this.Aa=0,this.D=new Hl,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,U),this.ia=0,this.pb=o(4,Ra),this.Pa=new ql,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Wl),this.Hd=0,this.rb=Array(new Ks),this.sb=0,this.wa=Array(new Nn),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new $l),this.L=this.aa=0,this.gd=a([4,2],Nn),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function ks(h,p){return 0>h?0:h>p?p:h}function yo(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Gc(){var h=new Gl;return h!=null&&(h.a=0,h.sc="OK",h.cb=0,h.Xb=0,qh||(qh=Ho)),h}function jr(h,p,w){return h.a==0&&(h.a=p,h.sc=w,h.cb=0),0}function Kc(h,p,w){return 3<=w&&h[p+0]==157&&h[p+1]==1&&h[p+2]==42}function yi(h,p){if(h==null)return 0;if(h.a=0,h.sc="OK",p==null)return jr(h,2,"null VP8Io passed to VP8GetHeaders()");var w=p.data,S=p.w,M=p.ha;if(4>M)return jr(h,7,"Truncated header.");var V=w[S+0]|w[S+1]<<8|w[S+2]<<16,B=h.Od;if(B.Rb=!(1&V),B.td=V>>1&7,B.yd=V>>4&1,B.ub=V>>5,3<B.td)return jr(h,3,"Incorrect keyframe parameters.");if(!B.yd)return jr(h,4,"Frame not displayable.");S+=3,M-=3;var z=h.Kc;if(B.Rb){if(7>M)return jr(h,7,"cannot parse picture header");if(!Kc(w,S,M))return jr(h,3,"Bad code word");z.c=16383&(w[S+4]<<8|w[S+3]),z.Td=w[S+4]>>6,z.i=16383&(w[S+6]<<8|w[S+5]),z.Ud=w[S+6]>>6,S+=7,M-=7,h.za=z.c+15>>4,h.Ub=z.i+15>>4,p.width=z.c,p.height=z.i,p.Da=0,p.j=0,p.v=0,p.va=p.width,p.o=p.height,p.da=0,p.ib=p.width,p.hb=p.height,p.U=p.width,p.T=p.height,s((V=h.Pa).jb,0,255,V.jb.length),e((V=h.Qa)!=null),V.Cb=0,V.Bb=0,V.Fb=1,s(V.Zb,0,0,V.Zb.length),s(V.Lb,0,0,V.Lb)}if(B.ub>M)return jr(h,7,"bad partition length");le(V=h.m,w,S,B.ub),S+=B.ub,M-=B.ub,B.Rb&&(z.Ld=xe(V),z.Kd=xe(V)),z=h.Qa;var $,Q=h.Pa;if(e(V!=null),e(z!=null),z.Cb=xe(V),z.Cb){if(z.Bb=xe(V),xe(V)){for(z.Fb=xe(V),$=0;4>$;++$)z.Zb[$]=xe(V)?ee(V,7):0;for($=0;4>$;++$)z.Lb[$]=xe(V)?ee(V,6):0}if(z.Bb)for($=0;3>$;++$)Q.jb[$]=xe(V)?ye(V,8):255}else z.Bb=0;if(V.Ka)return jr(h,3,"cannot parse segment header");if((z=h.ed).zd=xe(V),z.Tb=ye(V,6),z.wb=ye(V,3),z.Pc=xe(V),z.Pc&&xe(V)){for(Q=0;4>Q;++Q)xe(V)&&(z.vd[Q]=ee(V,6));for(Q=0;4>Q;++Q)xe(V)&&(z.od[Q]=ee(V,6))}if(h.L=z.Tb==0?0:z.zd?1:2,V.Ka)return jr(h,3,"cannot parse filter header");var se=M;if(M=$=S,S=$+se,z=se,h.Xb=(1<<ye(h.m,2))-1,se<3*(Q=h.Xb))w=7;else{for($+=3*Q,z-=3*Q,se=0;se<Q;++se){var me=w[M+0]|w[M+1]<<8|w[M+2]<<16;me>z&&(me=z),le(h.Jc[+se],w,$,me),$+=me,z-=me,M+=3}le(h.Jc[+Q],w,$,z),w=$<S?0:5}if(w!=0)return jr(h,w,"cannot parse partitions");for(w=ye($=h.m,7),M=xe($)?ee($,4):0,S=xe($)?ee($,4):0,z=xe($)?ee($,4):0,Q=xe($)?ee($,4):0,$=xe($)?ee($,4):0,se=h.Qa,me=0;4>me;++me){if(se.Cb){var Y=se.Zb[me];se.Fb||(Y+=w)}else{if(0<me){h.pb[me]=h.pb[0];continue}Y=w}var oe=h.pb[me];oe.Sc[0]=f0[ks(Y+M,127)],oe.Sc[1]=p0[ks(Y+0,127)],oe.Eb[0]=2*f0[ks(Y+S,127)],oe.Eb[1]=101581*p0[ks(Y+z,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=f0[ks(Y+Q,117)],oe.Qc[1]=p0[ks(Y+$,127)],oe.lc=Y+$}if(!B.Rb)return jr(h,4,"Not a key frame.");for(xe(V),B=h.Pa,w=0;4>w;++w){for(M=0;8>M;++M)for(S=0;3>S;++S)for(z=0;11>z;++z)Q=Ae(V,aI[w][M][S][z])?ye(V,8):iI[w][M][S][z],B.Wc[w][M].Yb[S][z]=Q;for(M=0;17>M;++M)B.Xc[w][M]=B.Wc[w][lI[M]]}return h.kc=xe(V),h.kc&&(h.Bd=ye(V,8)),h.cb=1}function Ho(h,p,w,S,M,V,B){var z=p[M].Yb[w];for(w=0;16>M;++M){if(!Ae(h,z[w+0]))return M;for(;!Ae(h,z[w+1]);)if(z=p[++M].Yb[0],w=0,M==16)return 16;var $=p[M+1].Yb;if(Ae(h,z[w+2])){var Q=h,se=0;if(Ae(Q,(Y=z)[(me=w)+3]))if(Ae(Q,Y[me+6])){for(z=0,me=2*(se=Ae(Q,Y[me+8]))+(Y=Ae(Q,Y[me+9+se])),se=0,Y=nI[me];Y[z];++z)se+=se+Ae(Q,Y[z]);se+=3+(8<<me)}else Ae(Q,Y[me+7])?(se=7+2*Ae(Q,165),se+=Ae(Q,145)):se=5+Ae(Q,159);else se=Ae(Q,Y[me+4])?3+Ae(Q,Y[me+5]):2;z=$[2]}else se=1,z=$[1];$=B+sI[M],0>(Q=h).b&&ve(Q);var me,Y=Q.b,oe=(me=Q.Ca>>1)-(Q.I>>Y)>>31;--Q.b,Q.Ca+=oe,Q.Ca|=1,Q.I-=(me+1&oe)<<Y,V[$]=((se^oe)-oe)*S[(0<M)+0]}return 16}function Kl(h){var p=h.rb[h.sb-1];p.la=0,p.Na=0,s(h.zc,0,0,h.zc.length),h.ja=0}function Ps(h,p,w,S,M){M=h[p+w+32*S]+(M>>3),h[p+w+32*S]=-256&M?0>M?0:255:M}function dr(h,p,w,S,M,V){Ps(h,p,0,w,S+M),Ps(h,p,1,w,S+V),Ps(h,p,2,w,S-V),Ps(h,p,3,w,S-M)}function fn(h){return(20091*h>>16)+h}function Wo(h,p,w,S){var M,V=0,B=i(16);for(M=0;4>M;++M){var z=h[p+0]+h[p+8],$=h[p+0]-h[p+8],Q=(35468*h[p+4]>>16)-fn(h[p+12]),se=fn(h[p+4])+(35468*h[p+12]>>16);B[V+0]=z+se,B[V+1]=$+Q,B[V+2]=$-Q,B[V+3]=z-se,V+=4,p++}for(M=V=0;4>M;++M)z=(h=B[V+0]+4)+B[V+8],$=h-B[V+8],Q=(35468*B[V+4]>>16)-fn(B[V+12]),Ps(w,S,0,0,z+(se=fn(B[V+4])+(35468*B[V+12]>>16))),Ps(w,S,1,0,$+Q),Ps(w,S,2,0,$-Q),Ps(w,S,3,0,z-se),V++,S+=32}function Oa(h,p,w,S){var M=h[p+0]+4,V=35468*h[p+4]>>16,B=fn(h[p+4]),z=35468*h[p+1]>>16;dr(w,S,0,M+B,h=fn(h[p+1]),z),dr(w,S,1,M+V,h,z),dr(w,S,2,M-V,h,z),dr(w,S,3,M-B,h,z)}function Qc(h,p,w,S,M){Wo(h,p,w,S),M&&Wo(h,p+16,w,S+4)}function Ut(h,p,w,S){rc(h,p+0,w,S,1),rc(h,p+32,w,S+128,1)}function Go(h,p,w,S){var M;for(h=h[p+0]+4,M=0;4>M;++M)for(p=0;4>p;++p)Ps(w,S,p,M,h)}function vo(h,p,w,S){h[p+0]&&rr(h,p+0,w,S),h[p+16]&&rr(h,p+16,w,S+4),h[p+32]&&rr(h,p+32,w,S+128),h[p+48]&&rr(h,p+48,w,S+128+4)}function vi(h,p,w,S){var M,V=i(16);for(M=0;4>M;++M){var B=h[p+0+M]+h[p+12+M],z=h[p+4+M]+h[p+8+M],$=h[p+4+M]-h[p+8+M],Q=h[p+0+M]-h[p+12+M];V[0+M]=B+z,V[8+M]=B-z,V[4+M]=Q+$,V[12+M]=Q-$}for(M=0;4>M;++M)B=(h=V[0+4*M]+3)+V[3+4*M],z=V[1+4*M]+V[2+4*M],$=V[1+4*M]-V[2+4*M],Q=h-V[3+4*M],w[S+0]=B+z>>3,w[S+16]=Q+$>>3,w[S+32]=B-z>>3,w[S+48]=Q-$>>3,S+=64}function Ko(h,p,w){var S,M=p-32,V=Zs,B=255-h[M-1];for(S=0;S<w;++S){var z,$=V,Q=B+h[p-1];for(z=0;z<w;++z)h[p+z]=$[Q+h[M+z]];p+=32}}function Yc(h,p){Ko(h,p,4)}function Ih(h,p){Ko(h,p,8)}function kh(h,p){Ko(h,p,16)}function Ql(h,p){var w;for(w=0;16>w;++w)n(h,p+32*w,h,p-32,16)}function Xc(h,p){var w;for(w=16;0<w;--w)s(h,p,h[p-1],16),p+=32}function Cn(h,p,w){var S;for(S=0;16>S;++S)s(p,w+32*S,h,16)}function wi(h,p){var w,S=16;for(w=0;16>w;++w)S+=h[p-1+32*w]+h[p+w-32];Cn(S>>5,h,p)}function wo(h,p){var w,S=8;for(w=0;16>w;++w)S+=h[p-1+32*w];Cn(S>>4,h,p)}function Da(h,p){var w,S=8;for(w=0;16>w;++w)S+=h[p+w-32];Cn(S>>4,h,p)}function Jc(h,p){Cn(128,h,p)}function ht(h,p,w){return h+2*p+w+2>>2}function Ph(h,p){var w,S=p-32;for(S=new Uint8Array([ht(h[S-1],h[S+0],h[S+1]),ht(h[S+0],h[S+1],h[S+2]),ht(h[S+1],h[S+2],h[S+3]),ht(h[S+2],h[S+3],h[S+4])]),w=0;4>w;++w)n(h,p+32*w,S,0,S.length)}function Ch(h,p){var w=h[p-1],S=h[p-1+32],M=h[p-1+64],V=h[p-1+96];je(h,p+0,16843009*ht(h[p-1-32],w,S)),je(h,p+32,16843009*ht(w,S,M)),je(h,p+64,16843009*ht(S,M,V)),je(h,p+96,16843009*ht(M,V,V))}function jh(h,p){var w,S=4;for(w=0;4>w;++w)S+=h[p+w-32]+h[p-1+32*w];for(S>>=3,w=0;4>w;++w)s(h,p+32*w,S,4)}function En(h,p){var w=h[p-1+0],S=h[p-1+32],M=h[p-1+64],V=h[p-1-32],B=h[p+0-32],z=h[p+1-32],$=h[p+2-32],Q=h[p+3-32];h[p+0+96]=ht(S,M,h[p-1+96]),h[p+1+96]=h[p+0+64]=ht(w,S,M),h[p+2+96]=h[p+1+64]=h[p+0+32]=ht(V,w,S),h[p+3+96]=h[p+2+64]=h[p+1+32]=h[p+0+0]=ht(B,V,w),h[p+3+64]=h[p+2+32]=h[p+1+0]=ht(z,B,V),h[p+3+32]=h[p+2+0]=ht($,z,B),h[p+3+0]=ht(Q,$,z)}function Vi(h,p){var w=h[p+1-32],S=h[p+2-32],M=h[p+3-32],V=h[p+4-32],B=h[p+5-32],z=h[p+6-32],$=h[p+7-32];h[p+0+0]=ht(h[p+0-32],w,S),h[p+1+0]=h[p+0+32]=ht(w,S,M),h[p+2+0]=h[p+1+32]=h[p+0+64]=ht(S,M,V),h[p+3+0]=h[p+2+32]=h[p+1+64]=h[p+0+96]=ht(M,V,B),h[p+3+32]=h[p+2+64]=h[p+1+96]=ht(V,B,z),h[p+3+64]=h[p+2+96]=ht(B,z,$),h[p+3+96]=ht(z,$,$)}function Lh(h,p){var w=h[p-1+0],S=h[p-1+32],M=h[p-1+64],V=h[p-1-32],B=h[p+0-32],z=h[p+1-32],$=h[p+2-32],Q=h[p+3-32];h[p+0+0]=h[p+1+64]=V+B+1>>1,h[p+1+0]=h[p+2+64]=B+z+1>>1,h[p+2+0]=h[p+3+64]=z+$+1>>1,h[p+3+0]=$+Q+1>>1,h[p+0+96]=ht(M,S,w),h[p+0+64]=ht(S,w,V),h[p+0+32]=h[p+1+96]=ht(w,V,B),h[p+1+32]=h[p+2+96]=ht(V,B,z),h[p+2+32]=h[p+3+96]=ht(B,z,$),h[p+3+32]=ht(z,$,Q)}function Ma(h,p){var w=h[p+0-32],S=h[p+1-32],M=h[p+2-32],V=h[p+3-32],B=h[p+4-32],z=h[p+5-32],$=h[p+6-32],Q=h[p+7-32];h[p+0+0]=w+S+1>>1,h[p+1+0]=h[p+0+64]=S+M+1>>1,h[p+2+0]=h[p+1+64]=M+V+1>>1,h[p+3+0]=h[p+2+64]=V+B+1>>1,h[p+0+32]=ht(w,S,M),h[p+1+32]=h[p+0+96]=ht(S,M,V),h[p+2+32]=h[p+1+96]=ht(M,V,B),h[p+3+32]=h[p+2+96]=ht(V,B,z),h[p+3+64]=ht(B,z,$),h[p+3+96]=ht(z,$,Q)}function Bi(h,p){var w=h[p-1+0],S=h[p-1+32],M=h[p-1+64],V=h[p-1+96];h[p+0+0]=w+S+1>>1,h[p+2+0]=h[p+0+32]=S+M+1>>1,h[p+2+32]=h[p+0+64]=M+V+1>>1,h[p+1+0]=ht(w,S,M),h[p+3+0]=h[p+1+32]=ht(S,M,V),h[p+3+32]=h[p+1+64]=ht(M,V,V),h[p+3+64]=h[p+2+64]=h[p+0+96]=h[p+1+96]=h[p+2+96]=h[p+3+96]=V}function Fa(h,p){var w=h[p-1+0],S=h[p-1+32],M=h[p-1+64],V=h[p-1+96],B=h[p-1-32],z=h[p+0-32],$=h[p+1-32],Q=h[p+2-32];h[p+0+0]=h[p+2+32]=w+B+1>>1,h[p+0+32]=h[p+2+64]=S+w+1>>1,h[p+0+64]=h[p+2+96]=M+S+1>>1,h[p+0+96]=V+M+1>>1,h[p+3+0]=ht(z,$,Q),h[p+2+0]=ht(B,z,$),h[p+1+0]=h[p+3+32]=ht(w,B,z),h[p+1+32]=h[p+3+64]=ht(S,w,B),h[p+1+64]=h[p+3+96]=ht(M,S,w),h[p+1+96]=ht(V,M,S)}function Qs(h,p){var w;for(w=0;8>w;++w)n(h,p+32*w,h,p-32,8)}function Qo(h,p){var w;for(w=0;8>w;++w)s(h,p,h[p-1],8),p+=32}function xi(h,p,w){var S;for(S=0;8>S;++S)s(p,w+32*S,h,8)}function Yl(h,p){var w,S=8;for(w=0;8>w;++w)S+=h[p+w-32]+h[p-1+32*w];xi(S>>4,h,p)}function ur(h,p){var w,S=4;for(w=0;8>w;++w)S+=h[p+w-32];xi(S>>3,h,p)}function Xl(h,p){var w,S=4;for(w=0;8>w;++w)S+=h[p-1+32*w];xi(S>>3,h,p)}function Zc(h,p){xi(128,h,p)}function _i(h,p,w){var S=h[p-w],M=h[p+0],V=3*(M-S)+l0[1020+h[p-2*w]-h[p+w]],B=zf[112+(V+4>>3)];h[p-w]=Zs[255+S+zf[112+(V+3>>3)]],h[p+0]=Zs[255+M-B]}function Ua(h,p,w,S){var M=h[p+0],V=h[p+w];return Ti[255+h[p-2*w]-h[p-w]]>S||Ti[255+V-M]>S}function Yo(h,p,w,S){return 4*Ti[255+h[p-w]-h[p+0]]+Ti[255+h[p-2*w]-h[p+w]]<=S}function xo(h,p,w,S,M){var V=h[p-3*w],B=h[p-2*w],z=h[p-w],$=h[p+0],Q=h[p+w],se=h[p+2*w],me=h[p+3*w];return 4*Ti[255+z-$]+Ti[255+B-Q]>S?0:Ti[255+h[p-4*w]-V]<=M&&Ti[255+V-B]<=M&&Ti[255+B-z]<=M&&Ti[255+me-se]<=M&&Ti[255+se-Q]<=M&&Ti[255+Q-$]<=M}function _o(h,p,w,S){var M=2*S+1;for(S=0;16>S;++S)Yo(h,p+S,w,M)&&_i(h,p+S,w)}function gs(h,p,w,S){var M=2*S+1;for(S=0;16>S;++S)Yo(h,p+S*w,1,M)&&_i(h,p+S*w,1)}function Jl(h,p,w,S){var M;for(M=3;0<M;--M)_o(h,p+=4*w,w,S)}function eu(h,p,w,S){var M;for(M=3;0<M;--M)gs(h,p+=4,w,S)}function ys(h,p,w,S,M,V,B,z){for(V=2*V+1;0<M--;){if(xo(h,p,w,V,B))if(Ua(h,p,w,z))_i(h,p,w);else{var $=h,Q=p,se=w,me=$[Q-2*se],Y=$[Q-se],oe=$[Q+0],de=$[Q+se],be=$[Q+2*se],pe=27*(Se=l0[1020+3*(oe-Y)+l0[1020+me-de]])+63>>7,Ee=18*Se+63>>7,Se=9*Se+63>>7;$[Q-3*se]=Zs[255+$[Q-3*se]+Se],$[Q-2*se]=Zs[255+me+Ee],$[Q-se]=Zs[255+Y+pe],$[Q+0]=Zs[255+oe-pe],$[Q+se]=Zs[255+de-Ee],$[Q+2*se]=Zs[255+be-Se]}p+=S}}function bi(h,p,w,S,M,V,B,z){for(V=2*V+1;0<M--;){if(xo(h,p,w,V,B))if(Ua(h,p,w,z))_i(h,p,w);else{var $=h,Q=p,se=w,me=$[Q-se],Y=$[Q+0],oe=$[Q+se],de=zf[112+(4+(be=3*(Y-me))>>3)],be=zf[112+(be+3>>3)],pe=de+1>>1;$[Q-2*se]=Zs[255+$[Q-2*se]+pe],$[Q-se]=Zs[255+me+be],$[Q+0]=Zs[255+Y-de],$[Q+se]=Zs[255+oe-pe]}p+=S}}function Va(h,p,w,S,M,V){ys(h,p,w,1,16,S,M,V)}function Ni(h,p,w,S,M,V){ys(h,p,1,w,16,S,M,V)}function Zl(h,p,w,S,M,V){var B;for(B=3;0<B;--B)bi(h,p+=4*w,w,1,16,S,M,V)}function v(h,p,w,S,M,V){var B;for(B=3;0<B;--B)bi(h,p+=4,1,w,16,S,M,V)}function D(h,p,w,S,M,V,B,z){ys(h,p,M,1,8,V,B,z),ys(w,S,M,1,8,V,B,z)}function K(h,p,w,S,M,V,B,z){ys(h,p,1,M,8,V,B,z),ys(w,S,1,M,8,V,B,z)}function te(h,p,w,S,M,V,B,z){bi(h,p+4*M,M,1,8,V,B,z),bi(w,S+4*M,M,1,8,V,B,z)}function ae(h,p,w,S,M,V,B,z){bi(h,p+4,1,M,8,V,B,z),bi(w,S+4,1,M,8,V,B,z)}function Ne(){this.ba=new kt,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Ot,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ie(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ze(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Ge(){this.ua=0,this.Wa=new Tt,this.vb=new Tt,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new fe,this.yc=new L}function pt(){this.xb=this.a=0,this.l=new yo,this.ca=new kt,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new G,this.Pb=0,this.wd=new G,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Ge,this.ab=0,this.gc=o(4,ze),this.Oc=0}function _t(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new yo,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Vt(h,p,w,S,M,V,B){for(h=h==null?0:h[p+0],p=0;p<B;++p)M[V+p]=h+w[S+p]&255,h=M[V+p]}function Zt(h,p,w,S,M,V,B){var z;if(h==null)Vt(null,null,w,S,M,V,B);else for(z=0;z<B;++z)M[V+z]=h[p+z]+w[S+z]&255}function Lr(h,p,w,S,M,V,B){if(h==null)Vt(null,null,w,S,M,V,B);else{var z,$=h[p+0],Q=$,se=$;for(z=0;z<B;++z)Q=se+($=h[p+z])-Q,se=w[S+z]+(-256&Q?0>Q?0:255:Q)&255,Q=$,M[V+z]=se}}function nr(h,p,w,S){var M=p.width,V=p.o;if(e(h!=null&&p!=null),0>w||0>=S||w+S>V)return null;if(!h.Cc){if(h.ga==null){var B;if(h.ga=new _t,(B=h.ga==null)||(B=p.width*p.o,e(h.Gb.length==0),h.Gb=i(B),h.Uc=0,h.Gb==null?B=0:(h.mb=h.Gb,h.nb=h.Uc,h.rc=null,B=1),B=!B),!B){B=h.ga;var z=h.Fa,$=h.P,Q=h.qc,se=h.mb,me=h.nb,Y=$+1,oe=Q-1,de=B.l;if(e(z!=null&&se!=null&&p!=null),Qa[0]=null,Qa[1]=Vt,Qa[2]=Zt,Qa[3]=Lr,B.ca=se,B.tb=me,B.c=p.width,B.i=p.height,e(0<B.c&&0<B.i),1>=Q)p=0;else if(B.$a=3&z[$+0],B.Z=z[$+0]>>2&3,B.Lc=z[$+0]>>4&3,$=z[$+0]>>6&3,0>B.$a||1<B.$a||4<=B.Z||1<B.Lc||$)p=0;else if(de.put=ct,de.ac=Gn,de.bc=br,de.ma=B,de.width=p.width,de.height=p.height,de.Da=p.Da,de.v=p.v,de.va=p.va,de.j=p.j,de.o=p.o,B.$a)e:{e(B.$a==1),p=po();t:for(;;){if(p==null){p=0;break e}if(e(B!=null),B.mc=p,p.c=B.c,p.i=B.i,p.l=B.l,p.l.ma=B,p.l.width=B.c,p.l.height=B.i,p.a=0,ue(p.m,z,Y,oe),!Gs(B.c,B.i,1,p,null)||(p.ab==1&&p.gc[0].hc==3&&Kn(p.s)?(B.ic=1,z=p.c*p.i,p.Ta=null,p.Ua=0,p.V=i(z),p.Ba=0,p.V==null?(p.a=1,p=0):p=1):(B.ic=0,p=Ui(p,B.c)),!p))break t;p=1;break e}B.mc=null,p=0}else p=oe>=B.c*B.i;B=!p}if(B)return null;h.ga.Lc!=1?h.Ga=0:S=V-w}e(h.ga!=null),e(w+S<=V);e:{if(p=(z=h.ga).c,V=z.l.o,z.$a==0){if(Y=h.rc,oe=h.Vc,de=h.Fa,$=h.P+1+w*p,Q=h.mb,se=h.nb+w*p,e($<=h.P+h.qc),z.Z!=0)for(e(Qa[z.Z]!=null),B=0;B<S;++B)Qa[z.Z](Y,oe,de,$,Q,se,p),Y=Q,oe=se,se+=p,$+=p;else for(B=0;B<S;++B)n(Q,se,de,$,p),Y=Q,oe=se,se+=p,$+=p;h.rc=Y,h.Vc=oe}else{if(e(z.mc!=null),p=w+S,e((B=z.mc)!=null),e(p<=B.i),B.C>=p)p=1;else if(z.ic||Cs(),z.ic){z=B.V,Y=B.Ba,oe=B.c;var be=B.i,pe=(de=1,$=B.$/oe,Q=B.$%oe,se=B.m,me=B.s,B.$),Ee=oe*be,Se=oe*p,Le=me.wc,ke=pe<Se?Ir(me,Q,$):null;e(pe<=Ee),e(p<=be),e(Kn(me));t:for(;;){for(;!se.h&&pe<Se;){if(Q&Le||(ke=Ir(me,Q,$)),e(ke!=null),he(se),256>(be=Tr(ke.G[0],ke.H[0],se)))z[Y+pe]=be,++pe,++Q>=oe&&(Q=0,++$<=p&&!($%16)&&ms(B,$));else{if(!(280>be)){de=0;break t}be=_n(be-256,se);var tt,$e=Tr(ke.G[4],ke.H[4],se);if(he(se),!(pe>=($e=bn(oe,$e=_n($e,se)))&&Ee-pe>=be)){de=0;break t}for(tt=0;tt<be;++tt)z[Y+pe+tt]=z[Y+pe+tt-$e];for(pe+=be,Q+=be;Q>=oe;)Q-=oe,++$<=p&&!($%16)&&ms(B,$);pe<Se&&Q&Le&&(ke=Ir(me,Q,$))}e(se.h==re(se))}ms(B,$>p?p:$);break t}!de||se.h&&pe<Ee?(de=0,B.a=se.h?5:3):B.$=pe,p=de}else p=Qn(B,B.V,B.Ba,B.c,B.i,p,mo);if(!p){S=0;break e}}w+S>=V&&(h.Cc=1),S=1}if(!S)return null;if(h.Cc&&((S=h.ga)!=null&&(S.mc=null),h.ga=null,0<h.Ga))return alert("todo:WebPDequantizeLevels"),null}return h.nb+w*M}function Br(h,p,w,S,M,V){for(;0<M--;){var B,z=h,$=p+(w?1:0),Q=h,se=p+(w?0:3);for(B=0;B<S;++B){var me=Q[se+4*B];me!=255&&(me*=32897,z[$+4*B+0]=z[$+4*B+0]*me>>23,z[$+4*B+1]=z[$+4*B+1]*me>>23,z[$+4*B+2]=z[$+4*B+2]*me>>23)}p+=V}}function Rr(h,p,w,S,M){for(;0<S--;){var V;for(V=0;V<w;++V){var B=h[p+2*V+0],z=15&(Q=h[p+2*V+1]),$=4369*z,Q=(240&Q|Q>>4)*$>>16;h[p+2*V+0]=(240&B|B>>4)*$>>16&240|(15&B|B<<4)*$>>16>>4&15,h[p+2*V+1]=240&Q|z}p+=M}}function zr(h,p,w,S,M,V,B,z){var $,Q,se=255;for(Q=0;Q<M;++Q){for($=0;$<S;++$){var me=h[p+$];V[B+4*$]=me,se&=me}p+=w,B+=z}return se!=255}function Or(h,p,w,S,M){var V;for(V=0;V<M;++V)w[S+V]=h[p+V]>>8}function Cs(){zh=Br,X5=Rr,J5=zr,Z5=Or}function Ei(h,p,w){C[h]=function(S,M,V,B,z,$,Q,se,me,Y,oe,de,be,pe,Ee,Se,Le){var ke,tt=Le-1>>1,$e=z[$+0]|Q[se+0]<<16,Ct=me[Y+0]|oe[de+0]<<16;e(S!=null);var Qe=3*$e+Ct+131074>>2;for(p(S[M+0],255&Qe,Qe>>16,be,pe),V!=null&&(Qe=3*Ct+$e+131074>>2,p(V[B+0],255&Qe,Qe>>16,Ee,Se)),ke=1;ke<=tt;++ke){var qt=z[$+ke]|Q[se+ke]<<16,mn=me[Y+ke]|oe[de+ke]<<16,jt=$e+qt+Ct+mn+524296,Ye=jt+2*(qt+Ct)>>3;Qe=Ye+$e>>1,$e=(jt=jt+2*($e+mn)>>3)+qt>>1,p(S[M+2*ke-1],255&Qe,Qe>>16,be,pe+(2*ke-1)*w),p(S[M+2*ke-0],255&$e,$e>>16,be,pe+(2*ke-0)*w),V!=null&&(Qe=jt+Ct>>1,$e=Ye+mn>>1,p(V[B+2*ke-1],255&Qe,Qe>>16,Ee,Se+(2*ke-1)*w),p(V[B+2*ke+0],255&$e,$e>>16,Ee,Se+(2*ke+0)*w)),$e=qt,Ct=mn}1&Le||(Qe=3*$e+Ct+131074>>2,p(S[M+Le-1],255&Qe,Qe>>16,be,pe+(Le-1)*w),V!=null&&(Qe=3*Ct+$e+131074>>2,p(V[B+Le-1],255&Qe,Qe>>16,Ee,Se+(Le-1)*w)))}}function Ai(){Ii[qf]=uI,Ii[$f]=uw,Ii[iw]=hI,Ii[Hf]=hw,Ii[Wf]=dw,Ii[c0]=fw,Ii[ow]=dI,Ii[u0]=uw,Ii[h0]=hw,Ii[Gf]=dw,Ii[d0]=fw}function d(h){return h&-16384?0>h?0:255:h>>fI}function _(h,p){return d((19077*h>>8)+(26149*p>>8)-14234)}function j(h,p,w){return d((19077*h>>8)-(6419*p>>8)-(13320*w>>8)+8708)}function q(h,p){return d((19077*h>>8)+(33050*p>>8)-17685)}function ce(h,p,w,S,M){S[M+0]=_(h,w),S[M+1]=j(h,p,w),S[M+2]=q(h,p)}function ge(h,p,w,S,M){S[M+0]=q(h,p),S[M+1]=j(h,p,w),S[M+2]=_(h,w)}function Oe(h,p,w,S,M){var V=j(h,p,w);p=V<<3&224|q(h,p)>>3,S[M+0]=248&_(h,w)|V>>5,S[M+1]=p}function zt(h,p,w,S,M){var V=240&q(h,p)|15;S[M+0]=240&_(h,w)|j(h,p,w)>>4,S[M+1]=V}function Dr(h,p,w,S,M){S[M+0]=255,ce(h,p,w,S,M+1)}function Dt(h,p,w,S,M){ge(h,p,w,S,M),S[M+3]=255}function Xt(h,p,w,S,M){ce(h,p,w,S,M),S[M+3]=255}function vr(h,p,w){C[h]=function(S,M,V,B,z,$,Q,se,me){for(var Y=se+(-2&me)*w;se!=Y;)p(S[M+0],V[B+0],z[$+0],Q,se),p(S[M+1],V[B+0],z[$+0],Q,se+w),M+=2,++B,++$,se+=2*w;1&me&&p(S[M+0],V[B+0],z[$+0],Q,se)}}function Ys(h,p,w){return w==0?h==0?p==0?6:5:p==0?4:0:w}function Yn(h,p,w,S,M){switch(h>>>30){case 3:rc(p,w,S,M,0);break;case 2:Si(p,w,S,M);break;case 1:rr(p,w,S,M)}}function jn(h,p){var w,S,M=p.M,V=p.Nb,B=h.oc,z=h.pc+40,$=h.oc,Q=h.pc+584,se=h.oc,me=h.pc+600;for(w=0;16>w;++w)B[z+32*w-1]=129;for(w=0;8>w;++w)$[Q+32*w-1]=129,se[me+32*w-1]=129;for(0<M?B[z-1-32]=$[Q-1-32]=se[me-1-32]=129:(s(B,z-32-1,127,21),s($,Q-32-1,127,9),s(se,me-32-1,127,9)),S=0;S<h.za;++S){var Y=p.ya[p.aa+S];if(0<S){for(w=-1;16>w;++w)n(B,z+32*w-4,B,z+32*w+12,4);for(w=-1;8>w;++w)n($,Q+32*w-4,$,Q+32*w+4,4),n(se,me+32*w-4,se,me+32*w+4,4)}var oe=h.Gd,de=h.Hd+S,be=Y.ad,pe=Y.Hc;if(0<M&&(n(B,z-32,oe[de].y,0,16),n($,Q-32,oe[de].f,0,8),n(se,me-32,oe[de].ea,0,8)),Y.Za){var Ee=B,Se=z-32+16;for(0<M&&(S>=h.za-1?s(Ee,Se,oe[de].y[15],4):n(Ee,Se,oe[de+1].y,0,4)),w=0;4>w;w++)Ee[Se+128+w]=Ee[Se+256+w]=Ee[Se+384+w]=Ee[Se+0+w];for(w=0;16>w;++w,pe<<=2)Ee=B,Se=z+mw[w],qi[Y.Ob[w]](Ee,Se),Yn(pe,be,16*+w,Ee,Se)}else if(Ee=Ys(S,M,Y.Ob[0]),Ka[Ee](B,z),pe!=0)for(w=0;16>w;++w,pe<<=2)Yn(pe,be,16*+w,B,z+mw[w]);for(w=Y.Gc,Ee=Ys(S,M,Y.Dd),Zo[Ee]($,Q),Zo[Ee](se,me),pe=be,Ee=$,Se=Q,255&(Y=0|w)&&(170&Y?Eo(pe,256,Ee,Se):fr(pe,256,Ee,Se)),Y=se,pe=me,255&(w>>=8)&&(170&w?Eo(be,320,Y,pe):fr(be,320,Y,pe)),M<h.Ub-1&&(n(oe[de].y,0,B,z+480,16),n(oe[de].f,0,$,Q+224,8),n(oe[de].ea,0,se,me+224,8)),w=8*V*h.B,oe=h.sa,de=h.ta+16*S+16*V*h.R,be=h.qa,Y=h.ra+8*S+w,pe=h.Ha,Ee=h.Ia+8*S+w,w=0;16>w;++w)n(oe,de+w*h.R,B,z+32*w,16);for(w=0;8>w;++w)n(be,Y+w*h.B,$,Q+32*w,8),n(pe,Ee+w*h.B,se,me+32*w,8)}}function zi(h,p,w,S,M,V,B,z,$){var Q=[0],se=[0],me=0,Y=$!=null?$.kd:0,oe=$??new Ie;if(h==null||12>w)return 7;oe.data=h,oe.w=p,oe.ha=w,p=[p],w=[w],oe.gb=[oe.gb];e:{var de=p,be=w,pe=oe.gb;if(e(h!=null),e(be!=null),e(pe!=null),pe[0]=0,12<=be[0]&&!r(h,de[0],"RIFF")){if(r(h,de[0]+8,"WEBP")){pe=3;break e}var Ee=Je(h,de[0]+4);if(12>Ee||4294967286<Ee){pe=3;break e}if(Y&&Ee>be[0]-8){pe=7;break e}pe[0]=Ee,de[0]+=12,be[0]-=12}pe=0}if(pe!=0)return pe;for(Ee=0<oe.gb[0],w=w[0];;){e:{var Se=h;be=p,pe=w;var Le=Q,ke=se,tt=de=[0];if((Qe=me=[me])[0]=0,8>pe[0])pe=7;else{if(!r(Se,be[0],"VP8X")){if(Je(Se,be[0]+4)!=10){pe=3;break e}if(18>pe[0]){pe=7;break e}var $e=Je(Se,be[0]+8),Ct=1+Fe(Se,be[0]+12);if(2147483648<=Ct*(Se=1+Fe(Se,be[0]+15))){pe=3;break e}tt!=null&&(tt[0]=$e),Le!=null&&(Le[0]=Ct),ke!=null&&(ke[0]=Se),be[0]+=18,pe[0]-=18,Qe[0]=1}pe=0}}if(me=me[0],de=de[0],pe!=0)return pe;if(be=!!(2&de),!Ee&&me)return 3;if(V!=null&&(V[0]=!!(16&de)),B!=null&&(B[0]=be),z!=null&&(z[0]=0),B=Q[0],de=se[0],me&&be&&$==null){pe=0;break}if(4>w){pe=7;break}if(Ee&&me||!Ee&&!me&&!r(h,p[0],"ALPH")){w=[w],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{$e=h,pe=p,Ee=w;var Qe=oe.gb;Le=oe.na,ke=oe.P,tt=oe.Sa,Ct=22,e($e!=null),e(Ee!=null),Se=pe[0];var qt=Ee[0];for(e(Le!=null),e(tt!=null),Le[0]=null,ke[0]=null,tt[0]=0;;){if(pe[0]=Se,Ee[0]=qt,8>qt){pe=7;break e}var mn=Je($e,Se+4);if(4294967286<mn){pe=3;break e}var jt=8+mn+1&-2;if(Ct+=jt,0<Qe&&Ct>Qe){pe=3;break e}if(!r($e,Se,"VP8 ")||!r($e,Se,"VP8L")){pe=0;break e}if(qt[0]<jt){pe=7;break e}r($e,Se,"ALPH")||(Le[0]=$e,ke[0]=Se+8,tt[0]=mn),Se+=jt,qt-=jt}}if(w=w[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],pe!=0)break}w=[w],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(Qe=h,pe=p,Ee=w,Le=oe.gb[0],ke=oe.Ja,tt=oe.xa,$e=pe[0],Se=!r(Qe,$e,"VP8 "),Ct=!r(Qe,$e,"VP8L"),e(Qe!=null),e(Ee!=null),e(ke!=null),e(tt!=null),8>Ee[0])pe=7;else{if(Se||Ct){if(Qe=Je(Qe,$e+4),12<=Le&&Qe>Le-12){pe=3;break e}if(Y&&Qe>Ee[0]-8){pe=7;break e}ke[0]=Qe,pe[0]+=8,Ee[0]-=8,tt[0]=Ct}else tt[0]=5<=Ee[0]&&Qe[$e+0]==47&&!(Qe[$e+4]>>5),ke[0]=Ee[0];pe=0}if(w=w[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],p=p[0],pe!=0)break;if(4294967286<oe.Ja)return 3;if(z==null||be||(z[0]=oe.xa?2:1),B=[B],de=[de],oe.xa){if(5>w){pe=7;break}z=B,Y=de,be=V,h==null||5>w?h=0:5<=w&&h[p+0]==47&&!(h[p+4]>>5)?(Ee=[0],Qe=[0],Le=[0],ue(ke=new G,h,p,w),gi(ke,Ee,Qe,Le)?(z!=null&&(z[0]=Ee[0]),Y!=null&&(Y[0]=Qe[0]),be!=null&&(be[0]=Le[0]),h=1):h=0):h=0}else{if(10>w){pe=7;break}z=de,h==null||10>w||!Kc(h,p+3,w-3)?h=0:(Y=h[p+0]|h[p+1]<<8|h[p+2]<<16,be=16383&(h[p+7]<<8|h[p+6]),h=16383&(h[p+9]<<8|h[p+8]),1&Y||3<(Y>>1&7)||!(Y>>4&1)||Y>>5>=oe.Ja||!be||!h?h=0:(B&&(B[0]=be),z&&(z[0]=h),h=1))}if(!h||(B=B[0],de=de[0],me&&(Q[0]!=B||se[0]!=de)))return 3;$!=null&&($[0]=oe,$.offset=p-$.w,e(4294967286>p-$.w),e($.offset==$.ha-w));break}return pe==0||pe==7&&me&&$==null?(V!=null&&(V[0]|=oe.na!=null&&0<oe.na.length),S!=null&&(S[0]=B),M!=null&&(M[0]=de),0):pe}function Rh(h,p,w){var S=p.width,M=p.height,V=0,B=0,z=S,$=M;if(p.Da=h!=null&&0<h.Da,p.Da&&(z=h.cd,$=h.bd,V=h.v,B=h.j,11>w||(V&=-2,B&=-2),0>V||0>B||0>=z||0>=$||V+z>S||B+$>M))return 0;if(p.v=V,p.j=B,p.va=V+z,p.o=B+$,p.U=z,p.T=$,p.da=h!=null&&0<h.da,p.da){if(!lt(z,$,w=[h.ib],V=[h.hb]))return 0;p.ib=w[0],p.hb=V[0]}return p.ob=h!=null&&h.ob,p.Kb=h==null||!h.Sd,p.da&&(p.ob=p.ib<3*S/4&&p.hb<3*M/4,p.Kb=0),1}function Oh(h){if(h==null)return 2;if(11>h.S){var p=h.f.RGBA;p.fb+=(h.height-1)*p.A,p.A=-p.A}else p=h.f.kb,h=h.height,p.O+=(h-1)*p.fa,p.fa=-p.fa,p.N+=(h-1>>1)*p.Ab,p.Ab=-p.Ab,p.W+=(h-1>>1)*p.Db,p.Db=-p.Db,p.F!=null&&(p.J+=(h-1)*p.lb,p.lb=-p.lb);return 0}function Ba(h,p,w,S){if(S==null||0>=h||0>=p)return 2;if(w!=null){if(w.Da){var M=w.cd,V=w.bd,B=-2&w.v,z=-2&w.j;if(0>B||0>z||0>=M||0>=V||B+M>h||z+V>p)return 2;h=M,p=V}if(w.da){if(!lt(h,p,M=[w.ib],V=[w.hb]))return 2;h=M[0],p=V[0]}}S.width=h,S.height=p;e:{var $=S.width,Q=S.height;if(h=S.S,0>=$||0>=Q||!(h>=qf&&13>h))h=2;else{if(0>=S.Rd&&S.sd==null){B=V=M=p=0;var se=(z=$*gw[h])*Q;if(11>h||(V=(Q+1)/2*(p=($+1)/2),h==12&&(B=(M=$)*Q)),(Q=i(se+2*V+B))==null){h=1;break e}S.sd=Q,11>h?(($=S.f.RGBA).eb=Q,$.fb=0,$.A=z,$.size=se):(($=S.f.kb).y=Q,$.O=0,$.fa=z,$.Fd=se,$.f=Q,$.N=0+se,$.Ab=p,$.Cd=V,$.ea=Q,$.W=0+se+V,$.Db=p,$.Ed=V,h==12&&($.F=Q,$.J=0+se+2*V),$.Tc=B,$.lb=M)}if(p=1,M=S.S,V=S.width,B=S.height,M>=qf&&13>M)if(11>M)h=S.f.RGBA,p&=(z=Math.abs(h.A))*(B-1)+V<=h.size,p&=z>=V*gw[M],p&=h.eb!=null;else{h=S.f.kb,z=(V+1)/2,se=(B+1)/2,$=Math.abs(h.fa),Q=Math.abs(h.Ab);var me=Math.abs(h.Db),Y=Math.abs(h.lb),oe=Y*(B-1)+V;p&=$*(B-1)+V<=h.Fd,p&=Q*(se-1)+z<=h.Cd,p=(p&=me*(se-1)+z<=h.Ed)&$>=V&Q>=z&me>=z,p&=h.y!=null,p&=h.f!=null,p&=h.ea!=null,M==12&&(p&=Y>=V,p&=oe<=h.Tc,p&=h.F!=null)}else p=0;h=p?0:2}}return h!=0||w!=null&&w.fd&&(h=Oh(S)),h}var ec=64,Xs=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Js=24,za=32,Xo=8,qa=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),C.Predictor0=function(){return 4278190080},C.Predictor1=function(h){return h},C.Predictor2=function(h,p,w){return p[w+0]},C.Predictor3=function(h,p,w){return p[w+1]},C.Predictor4=function(h,p,w){return p[w-1]},C.Predictor5=function(h,p,w){return et(et(h,p[w+1]),p[w+0])},C.Predictor6=function(h,p,w){return et(h,p[w-1])},C.Predictor7=function(h,p,w){return et(h,p[w+0])},C.Predictor8=function(h,p,w){return et(p[w-1],p[w+0])},C.Predictor9=function(h,p,w){return et(p[w+0],p[w+1])},C.Predictor10=function(h,p,w){return et(et(h,p[w-1]),et(p[w+0],p[w+1]))},C.Predictor11=function(h,p,w){var S=p[w+0];return 0>=Xe(S>>24&255,h>>24&255,(p=p[w-1])>>24&255)+Xe(S>>16&255,h>>16&255,p>>16&255)+Xe(S>>8&255,h>>8&255,p>>8&255)+Xe(255&S,255&h,255&p)?S:h},C.Predictor12=function(h,p,w){var S=p[w+0];return(Ht((h>>24&255)+(S>>24&255)-((p=p[w-1])>>24&255))<<24|Ht((h>>16&255)+(S>>16&255)-(p>>16&255))<<16|Ht((h>>8&255)+(S>>8&255)-(p>>8&255))<<8|Ht((255&h)+(255&S)-(255&p)))>>>0},C.Predictor13=function(h,p,w){var S=p[w-1];return(Lt((h=et(h,p[w+0]))>>24&255,S>>24&255)<<24|Lt(h>>16&255,S>>16&255)<<16|Lt(h>>8&255,S>>8&255)<<8|Lt(255&h,255&S))>>>0};var Dh=C.PredictorAdd0;C.PredictorAdd1=ft,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var tu=C.PredictorAdd2;Ze("ColorIndexInverseTransform","MapARGB","32b",function(h){return h>>8&255},function(h){return h}),Ze("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(h){return h},function(h){return h>>8&255});var Qr,Vf=C.ColorIndexInverseTransform,bo=C.MapARGB,No=C.VP8LColorIndexInverseTransformAlpha,Mh=C.MapAlpha,Fh=C.VP8LPredictorsAdd=[];Fh.length=16,(C.VP8LPredictors=[]).length=16,(C.VP8LPredictorsAdd_C=[]).length=16,(C.VP8LPredictors_C=[]).length=16;var Uh,Vh,$a,Ha,Wa,tc,Ga,rc,Si,Eo,rr,fr,Yr,pn,Jo,Bh,ru,Bf,H5,W5,G5,K5,Q5,Y5,zh,X5,J5,Z5,ew=i(511),tw=i(2041),rw=i(225),nw=i(767),sw=0,l0=tw,zf=rw,Zs=nw,Ti=ew,qf=0,$f=1,iw=2,Hf=3,Wf=4,c0=5,ow=6,u0=7,h0=8,Gf=9,d0=10,YT=[2,3,7],XT=[3,3,11],aw=[280,256,256,256,40],JT=[0,1,1,1,0],ZT=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],eI=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],tI=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rI=8,f0=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],p0=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],qh=null,nI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sI=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],lw=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],iI=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],oI=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],aI=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],lI=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ka=[],qi=[],Zo=[],cI=1,cw=2,Qa=[],Ii=[];Ei("UpsampleRgbLinePair",ce,3),Ei("UpsampleBgrLinePair",ge,3),Ei("UpsampleRgbaLinePair",Xt,4),Ei("UpsampleBgraLinePair",Dt,4),Ei("UpsampleArgbLinePair",Dr,4),Ei("UpsampleRgba4444LinePair",zt,2),Ei("UpsampleRgb565LinePair",Oe,2);var uI=C.UpsampleRgbLinePair,hI=C.UpsampleBgrLinePair,uw=C.UpsampleRgbaLinePair,hw=C.UpsampleBgraLinePair,dw=C.UpsampleArgbLinePair,fw=C.UpsampleRgba4444LinePair,dI=C.UpsampleRgb565LinePair,Kf=16,Qf=1<<Kf-1,$h=-227,m0=482,fI=6,pw=0,pI=i(256),mI=i(256),gI=i(256),yI=i(256),vI=i(m0-$h),wI=i(m0-$h);vr("YuvToRgbRow",ce,3),vr("YuvToBgrRow",ge,3),vr("YuvToRgbaRow",Xt,4),vr("YuvToBgraRow",Dt,4),vr("YuvToArgbRow",Dr,4),vr("YuvToRgba4444Row",zt,2),vr("YuvToRgb565Row",Oe,2);var mw=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Yf=[0,2,8],xI=[8,7,6,4,4,2,2,2,1,1,1,1],_I=1;this.WebPDecodeRGBA=function(h,p,w,S,M){var V=$f,B=new Ne,z=new kt;B.ba=z,z.S=V,z.width=[z.width],z.height=[z.height];var $=z.width,Q=z.height,se=new at;if(se==null||h==null)var me=2;else e(se!=null),me=zi(h,p,w,se.width,se.height,se.Pd,se.Qd,se.format,null);if(me!=0?$=0:($!=null&&($[0]=se.width[0]),Q!=null&&(Q[0]=se.height[0]),$=1),$){z.width=z.width[0],z.height=z.height[0],S!=null&&(S[0]=z.width),M!=null&&(M[0]=z.height);e:{if(S=new yo,(M=new Ie).data=h,M.w=p,M.ha=w,M.kd=1,p=[0],e(M!=null),((h=zi(M.data,M.w,M.ha,null,null,null,p,null,M))==0||h==7)&&p[0]&&(h=4),(p=h)==0){if(e(B!=null),S.data=M.data,S.w=M.w+M.offset,S.ha=M.ha-M.offset,S.put=ct,S.ac=Gn,S.bc=br,S.ma=B,M.xa){if((h=po())==null){B=1;break e}if(function(Y,oe){var de=[0],be=[0],pe=[0];t:for(;;){if(Y==null)return 0;if(oe==null)return Y.a=2,0;if(Y.l=oe,Y.a=0,ue(Y.m,oe.data,oe.w,oe.ha),!gi(Y.m,de,be,pe)){Y.a=3;break t}if(Y.xb=cw,oe.width=de[0],oe.height=be[0],!Gs(de[0],be[0],1,Y,null))break t;return 1}return e(Y.a!=0),0}(h,S)){if(S=(p=Ba(S.width,S.height,B.Oa,B.ba))==0){t:{S=h;r:for(;;){if(S==null){S=0;break t}if(e(S.s.yc!=null),e(S.s.Ya!=null),e(0<S.s.Wb),e((w=S.l)!=null),e((M=w.ma)!=null),S.xb!=0){if(S.ca=M.ba,S.tb=M.tb,e(S.ca!=null),!Rh(M.Oa,w,Hf)){S.a=2;break r}if(!Ui(S,w.width)||w.da)break r;if((w.da||ut(S.ca.S))&&Cs(),11>S.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),S.ca.f.kb.F!=null&&Cs()),S.Pb&&0<S.s.ua&&S.s.vb.X==null&&!W(S.s.vb,S.s.Wa.Xa)){S.a=1;break r}S.xb=0}if(!Qn(S,S.V,S.Ba,S.c,S.i,w.o,fo))break r;M.Dc=S.Ma,S=1;break t}e(S.a!=0),S=0}S=!S}S&&(p=h.a)}else p=h.a}else{if((h=new Gc)==null){B=1;break e}if(h.Fa=M.na,h.P=M.P,h.qc=M.Sa,yi(h,S)){if((p=Ba(S.width,S.height,B.Oa,B.ba))==0){if(h.Aa=0,w=B.Oa,e((M=h)!=null),w!=null){if(0<($=0>($=w.Md)?0:100<$?255:255*$/100)){for(Q=se=0;4>Q;++Q)12>(me=M.pb[Q]).lc&&(me.ia=$*xI[0>me.lc?0:me.lc]>>3),se|=me.ia;se&&(alert("todo:VP8InitRandom"),M.ia=1)}M.Ga=w.Id,100<M.Ga?M.Ga=100:0>M.Ga&&(M.Ga=0)}(function(Y,oe){if(Y==null)return 0;if(oe==null)return jr(Y,2,"NULL VP8Io parameter in VP8Decode().");if(!Y.cb&&!yi(Y,oe))return 0;if(e(Y.cb),oe.ac==null||oe.ac(oe)){oe.ob&&(Y.L=0);var de=Yf[Y.L];if(Y.L==2?(Y.yb=0,Y.zb=0):(Y.yb=oe.v-de>>4,Y.zb=oe.j-de>>4,0>Y.yb&&(Y.yb=0),0>Y.zb&&(Y.zb=0)),Y.Va=oe.o+15+de>>4,Y.Hb=oe.va+15+de>>4,Y.Hb>Y.za&&(Y.Hb=Y.za),Y.Va>Y.Ub&&(Y.Va=Y.Ub),0<Y.L){var be=Y.ed;for(de=0;4>de;++de){var pe;if(Y.Qa.Cb){var Ee=Y.Qa.Lb[de];Y.Qa.Fb||(Ee+=be.Tb)}else Ee=be.Tb;for(pe=0;1>=pe;++pe){var Se=Y.gd[de][pe],Le=Ee;if(be.Pc&&(Le+=be.vd[0],pe&&(Le+=be.od[0])),0<(Le=0>Le?0:63<Le?63:Le)){var ke=Le;0<be.wb&&(ke=4<be.wb?ke>>2:ke>>1)>9-be.wb&&(ke=9-be.wb),1>ke&&(ke=1),Se.dd=ke,Se.tc=2*Le+ke,Se.ld=40<=Le?2:15<=Le?1:0}else Se.tc=0;Se.La=pe}}}de=0}else jr(Y,6,"Frame setup failed"),de=Y.a;if(de=de==0){if(de){Y.$c=0,0<Y.Aa||(Y.Ic=_I);t:{de=Y.Ic,be=4*(ke=Y.za);var tt=32*ke,$e=ke+1,Ct=0<Y.L?ke*(0<Y.Aa?2:1):0,Qe=(Y.Aa==2?2:1)*ke;if((Se=be+832+(pe=3*(16*de+Yf[Y.L])/2*tt)+(Ee=Y.Fa!=null&&0<Y.Fa.length?Y.Kc.c*Y.Kc.i:0))!=Se)de=0;else{if(Se>Y.Vb){if(Y.Vb=0,Y.Ec=i(Se),Y.Fc=0,Y.Ec==null){de=jr(Y,1,"no memory during frame initialization.");break t}Y.Vb=Se}Se=Y.Ec,Le=Y.Fc,Y.Ac=Se,Y.Bc=Le,Le+=be,Y.Gd=o(tt,Wl),Y.Hd=0,Y.rb=o($e+1,Ks),Y.sb=1,Y.wa=Ct?o(Ct,Nn):null,Y.Y=0,Y.D.Nb=0,Y.D.wa=Y.wa,Y.D.Y=Y.Y,0<Y.Aa&&(Y.D.Y+=ke),e(!0),Y.oc=Se,Y.pc=Le,Le+=832,Y.ya=o(Qe,$l),Y.aa=0,Y.D.ya=Y.ya,Y.D.aa=Y.aa,Y.Aa==2&&(Y.D.aa+=ke),Y.R=16*ke,Y.B=8*ke,ke=(tt=Yf[Y.L])*Y.R,tt=tt/2*Y.B,Y.sa=Se,Y.ta=Le+ke,Y.qa=Y.sa,Y.ra=Y.ta+16*de*Y.R+tt,Y.Ha=Y.qa,Y.Ia=Y.ra+8*de*Y.B+tt,Y.$c=0,Le+=pe,Y.mb=Ee?Se:null,Y.nb=Ee?Le:null,e(Le+Ee<=Y.Fc+Y.Vb),Kl(Y),s(Y.Ac,Y.Bc,0,be),de=1}}if(de){if(oe.ka=0,oe.y=Y.sa,oe.O=Y.ta,oe.f=Y.qa,oe.N=Y.ra,oe.ea=Y.Ha,oe.Vd=Y.Ia,oe.fa=Y.R,oe.Rc=Y.B,oe.F=null,oe.J=0,!sw){for(de=-255;255>=de;++de)ew[255+de]=0>de?-de:de;for(de=-1020;1020>=de;++de)tw[1020+de]=-128>de?-128:127<de?127:de;for(de=-112;112>=de;++de)rw[112+de]=-16>de?-16:15<de?15:de;for(de=-255;510>=de;++de)nw[255+de]=0>de?0:255<de?255:de;sw=1}Ga=vi,rc=Qc,Eo=Ut,rr=Go,fr=vo,Si=Oa,Yr=Va,pn=Ni,Jo=D,Bh=K,ru=Zl,Bf=v,H5=te,W5=ae,G5=_o,K5=gs,Q5=Jl,Y5=eu,qi[0]=jh,qi[1]=Yc,qi[2]=Ph,qi[3]=Ch,qi[4]=En,qi[5]=Lh,qi[6]=Vi,qi[7]=Ma,qi[8]=Fa,qi[9]=Bi,Ka[0]=wi,Ka[1]=kh,Ka[2]=Ql,Ka[3]=Xc,Ka[4]=wo,Ka[5]=Da,Ka[6]=Jc,Zo[0]=Yl,Zo[1]=Ih,Zo[2]=Qs,Zo[3]=Qo,Zo[4]=Xl,Zo[5]=ur,Zo[6]=Zc,de=1}else de=0}de&&(de=function(qt,mn){for(qt.M=0;qt.M<qt.Va;++qt.M){var jt,Ye=qt.Jc[qt.M&qt.Xb],De=qt.m,Xr=qt;for(jt=0;jt<Xr.za;++jt){var St=De,Wt=Xr,Nr=Wt.Ac,Ln=Wt.Bc+4*jt,vs=Wt.zc,qr=Wt.ya[Wt.aa+jt];if(Wt.Qa.Bb?qr.$b=Ae(St,Wt.Pa.jb[0])?2+Ae(St,Wt.Pa.jb[2]):Ae(St,Wt.Pa.jb[1]):qr.$b=0,Wt.kc&&(qr.Ad=Ae(St,Wt.Bd)),qr.Za=!Ae(St,145)+0,qr.Za){var Xn=qr.Ob,ws=0;for(Wt=0;4>Wt;++Wt){var gn,Kt=vs[0+Wt];for(gn=0;4>gn;++gn){Kt=oI[Nr[Ln+gn]][Kt];for(var sr=lw[Ae(St,Kt[0])];0<sr;)sr=lw[2*sr+Ae(St,Kt[sr])];Kt=-sr,Nr[Ln+gn]=Kt}n(Xn,ws,Nr,Ln,4),ws+=4,vs[0+Wt]=Kt}}else Kt=Ae(St,156)?Ae(St,128)?1:3:Ae(St,163)?2:0,qr.Ob[0]=Kt,s(Nr,Ln,Kt,4),s(vs,0,Kt,4);qr.Dd=Ae(St,142)?Ae(St,114)?Ae(St,183)?1:3:2:0}if(Xr.m.Ka)return jr(qt,7,"Premature end-of-partition0 encountered.");for(;qt.ja<qt.za;++qt.ja){if(Xr=Ye,St=(De=qt).rb[De.sb-1],Nr=De.rb[De.sb+De.ja],jt=De.ya[De.aa+De.ja],Ln=De.kc?jt.Ad:0)St.la=Nr.la=0,jt.Za||(St.Na=Nr.Na=0),jt.Hc=0,jt.Gc=0,jt.ia=0;else{var $r,ir;if(St=Nr,Nr=Xr,Ln=De.Pa.Xc,vs=De.ya[De.aa+De.ja],qr=De.pb[vs.$b],Wt=vs.ad,Xn=0,ws=De.rb[De.sb-1],Kt=gn=0,s(Wt,Xn,0,384),vs.Za)var Rn=0,$i=Ln[3];else{sr=i(16);var Jr=St.Na+ws.Na;if(Jr=qh(Nr,Ln[1],Jr,qr.Eb,0,sr,0),St.Na=ws.Na=(0<Jr)+0,1<Jr)Ga(sr,0,Wt,Xn);else{var js=sr[0]+3>>3;for(sr=0;256>sr;sr+=16)Wt[Xn+sr]=js}Rn=1,$i=Ln[0]}var pr=15&St.la,yn=15&ws.la;for(sr=0;4>sr;++sr){var ei=1&yn;for(js=ir=0;4>js;++js)pr=pr>>1|(ei=(Jr=qh(Nr,$i,Jr=ei+(1&pr),qr.Sc,Rn,Wt,Xn))>Rn)<<7,ir=ir<<2|(3<Jr?3:1<Jr?2:Wt[Xn+0]!=0),Xn+=16;pr>>=4,yn=yn>>1|ei<<7,gn=(gn<<8|ir)>>>0}for($i=pr,Rn=yn>>4,$r=0;4>$r;$r+=2){for(ir=0,pr=St.la>>4+$r,yn=ws.la>>4+$r,sr=0;2>sr;++sr){for(ei=1&yn,js=0;2>js;++js)Jr=ei+(1&pr),pr=pr>>1|(ei=0<(Jr=qh(Nr,Ln[2],Jr,qr.Qc,0,Wt,Xn)))<<3,ir=ir<<2|(3<Jr?3:1<Jr?2:Wt[Xn+0]!=0),Xn+=16;pr>>=2,yn=yn>>1|ei<<5}Kt|=ir<<4*$r,$i|=pr<<4<<$r,Rn|=(240&yn)<<$r}St.la=$i,ws.la=Rn,vs.Hc=gn,vs.Gc=Kt,vs.ia=43690&Kt?0:qr.ia,Ln=!(gn|Kt)}if(0<De.L&&(De.wa[De.Y+De.ja]=De.gd[jt.$b][jt.Za],De.wa[De.Y+De.ja].La|=!Ln),Xr.Ka)return jr(qt,7,"Premature end-of-file encountered.")}if(Kl(qt),De=mn,Xr=1,jt=(Ye=qt).D,St=0<Ye.L&&Ye.M>=Ye.zb&&Ye.M<=Ye.Va,Ye.Aa==0)t:{if(jt.M=Ye.M,jt.uc=St,jn(Ye,jt),Xr=1,jt=(ir=Ye.D).Nb,St=(Kt=Yf[Ye.L])*Ye.R,Nr=Kt/2*Ye.B,sr=16*jt*Ye.R,js=8*jt*Ye.B,Ln=Ye.sa,vs=Ye.ta-St+sr,qr=Ye.qa,Wt=Ye.ra-Nr+js,Xn=Ye.Ha,ws=Ye.Ia-Nr+js,yn=(pr=ir.M)==0,gn=pr>=Ye.Va-1,Ye.Aa==2&&jn(Ye,ir),ir.uc)for(ei=(Jr=Ye).D.M,e(Jr.D.uc),ir=Jr.yb;ir<Jr.Hb;++ir){Rn=ir,$i=ei;var xs=(ti=(On=Jr).D).Nb;$r=On.R;var ti=ti.wa[ti.Y+Rn],ri=On.sa,Ls=On.ta+16*xs*$r+16*Rn,ni=ti.dd,wr=ti.tc;if(wr!=0)if(e(3<=wr),On.L==1)0<Rn&&K5(ri,Ls,$r,wr+4),ti.La&&Y5(ri,Ls,$r,wr),0<$i&&G5(ri,Ls,$r,wr+4),ti.La&&Q5(ri,Ls,$r,wr);else{var si=On.B,Hi=On.qa,nc=On.ra+8*xs*si+8*Rn,ea=On.Ha,On=On.Ia+8*xs*si+8*Rn;xs=ti.ld,0<Rn&&(pn(ri,Ls,$r,wr+4,ni,xs),Bh(Hi,nc,ea,On,si,wr+4,ni,xs)),ti.La&&(Bf(ri,Ls,$r,wr,ni,xs),W5(Hi,nc,ea,On,si,wr,ni,xs)),0<$i&&(Yr(ri,Ls,$r,wr+4,ni,xs),Jo(Hi,nc,ea,On,si,wr+4,ni,xs)),ti.La&&(ru(ri,Ls,$r,wr,ni,xs),H5(Hi,nc,ea,On,si,wr,ni,xs))}}if(Ye.ia&&alert("todo:DitherRow"),De.put!=null){if(ir=16*pr,pr=16*(pr+1),yn?(De.y=Ye.sa,De.O=Ye.ta+sr,De.f=Ye.qa,De.N=Ye.ra+js,De.ea=Ye.Ha,De.W=Ye.Ia+js):(ir-=Kt,De.y=Ln,De.O=vs,De.f=qr,De.N=Wt,De.ea=Xn,De.W=ws),gn||(pr-=Kt),pr>De.o&&(pr=De.o),De.F=null,De.J=null,Ye.Fa!=null&&0<Ye.Fa.length&&ir<pr&&(De.J=nr(Ye,De,ir,pr-ir),De.F=Ye.mb,De.F==null&&De.F.length==0)){Xr=jr(Ye,3,"Could not decode alpha data.");break t}ir<De.j&&(Kt=De.j-ir,ir=De.j,e(!(1&Kt)),De.O+=Ye.R*Kt,De.N+=Ye.B*(Kt>>1),De.W+=Ye.B*(Kt>>1),De.F!=null&&(De.J+=De.width*Kt)),ir<pr&&(De.O+=De.v,De.N+=De.v>>1,De.W+=De.v>>1,De.F!=null&&(De.J+=De.v),De.ka=ir-De.j,De.U=De.va-De.v,De.T=pr-ir,Xr=De.put(De))}jt+1!=Ye.Ic||gn||(n(Ye.sa,Ye.ta-St,Ln,vs+16*Ye.R,St),n(Ye.qa,Ye.ra-Nr,qr,Wt+8*Ye.B,Nr),n(Ye.Ha,Ye.Ia-Nr,Xn,ws+8*Ye.B,Nr))}if(!Xr)return jr(qt,6,"Output aborted.")}return 1}(Y,oe)),oe.bc!=null&&oe.bc(oe),de&=1}return de?(Y.cb=0,de):0})(h,S)||(p=h.a)}}else p=h.a}p==0&&B.Oa!=null&&B.Oa.fd&&(p=Oh(B.ba))}B=p}V=B!=0?null:11>V?z.f.RGBA.eb:z.f.kb.y}else V=null;return V};var gw=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function u(C,O){for(var N="",R=0;R<4;R++)N+=String.fromCharCode(C[O++]);return N}function f(C,O){return C[O+0]|C[O+1]<<8}function g(C,O){return(C[O+0]|C[O+1]<<8|C[O+2]<<16)>>>0}function y(C,O){return(C[O+0]|C[O+1]<<8|C[O+2]<<16|C[O+3]<<24)>>>0}new l;var m=[0],E=[0],b=[],A=new l,x=t,T=function(C,O){var N={},R=0,L=!1,X=0,fe=0;if(N.frames=[],!function(U,G){for(var J=0;J<4;J++)if(U[G+J]!="RIFF".charCodeAt(J))return!0;return!1}(C,O)){for(y(C,O+=4),O+=8;O<C.length;){var le=u(C,O),ye=y(C,O+=4);O+=4;var ee=ye+(1&ye);switch(le){case"VP8 ":case"VP8L":N.frames[R]===void 0&&(N.frames[R]={}),(we=N.frames[R]).src_off=L?fe:O-8,we.src_size=X+ye+8,R++,L&&(L=!1,X=0,fe=0);break;case"VP8X":(we=N.header={}).feature_flags=C[O];var ue=O+4;we.canvas_width=1+g(C,ue),ue+=3,we.canvas_height=1+g(C,ue),ue+=3;break;case"ALPH":L=!0,X=ee+8,fe=O-8;break;case"ANIM":(we=N.header).bgcolor=y(C,O),ue=O+4,we.loop_count=f(C,ue),ue+=2;break;case"ANMF":var _e,we;(we=N.frames[R]={}).offset_x=2*g(C,O),O+=3,we.offset_y=2*g(C,O),O+=3,we.width=1+g(C,O),O+=3,we.height=1+g(C,O),O+=3,we.duration=g(C,O),O+=3,_e=C[O++],we.dispose=1&_e,we.blend=_e>>1&1}le!="ANMF"&&(O+=ee)}return N}}(x,0);T.response=x,T.rgbaoutput=!0,T.dataurl=!1;var I=T.header?T.header:null,k=T.frames?T.frames:null;if(I){I.loop_counter=I.loop_count,m=[I.canvas_height],E=[I.canvas_width];for(var H=0;H<k.length&&k[H].blend!=0;H++);}var Z=k[0],F=A.WebPDecodeRGBA(x,Z.src_off,Z.src_size,E,m);Z.rgba=F,Z.imgwidth=E[0],Z.imgheight=m[0];for(var P=0;P<E[0]*m[0]*4;P++)b[P]=F[P];return this.width=E,this.height=m,this.data=b,this}(function(t){var e,r,n,s,i,o,a,l,u,f=function(U){return U=U||{},this.isStrokeTransparent=U.isStrokeTransparent||!1,this.strokeOpacity=U.strokeOpacity||1,this.strokeStyle=U.strokeStyle||"#000000",this.fillStyle=U.fillStyle||"#000000",this.isFillTransparent=U.isFillTransparent||!1,this.fillOpacity=U.fillOpacity||1,this.font=U.font||"10px sans-serif",this.textBaseline=U.textBaseline||"alphabetic",this.textAlign=U.textAlign||"left",this.lineWidth=U.lineWidth||1,this.lineJoin=U.lineJoin||"miter",this.lineCap=U.lineCap||"butt",this.path=U.path||[],this.transform=U.transform!==void 0?U.transform.clone():new l,this.globalCompositeOperation=U.globalCompositeOperation||"normal",this.globalAlpha=U.globalAlpha||1,this.clip_path=U.clip_path||[],this.currentPoint=U.currentPoint||new o,this.miterLimit=U.miterLimit||10,this.lastPoint=U.lastPoint||new o,this.lineDashOffset=U.lineDashOffset||0,this.lineDash=U.lineDash||[],this.margin=U.margin||[0,0,0,0],this.prevPageLastElemOffset=U.prevPageLastElemOffset||0,this.ignoreClearRect=typeof U.ignoreClearRect!="boolean"||U.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new g(this),e=this.internal.f2,r=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,o=this.internal.Point,a=this.internal.Rectangle,l=this.internal.Matrix,u=new f}]);var g=function(U){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var G=U;Object.defineProperty(this,"pdf",{get:function(){return G}});var J=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return J},set:function(W){J=!!W}});var re=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return re},set:function(W){re=!!W}});var ie=0;Object.defineProperty(this,"posX",{get:function(){return ie},set:function(W){isNaN(W)||(ie=W)}});var he=0;Object.defineProperty(this,"posY",{get:function(){return he},set:function(W){isNaN(W)||(he=W)}}),Object.defineProperty(this,"margin",{get:function(){return u.margin},set:function(W){var Me;typeof W=="number"?Me=[W,W,W,W]:((Me=new Array(4))[0]=W[0],Me[1]=W.length>=2?W[1]:Me[0],Me[2]=W.length>=3?W[2]:Me[0],Me[3]=W.length>=4?W[3]:Me[1]),u.margin=Me}});var ve=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ve},set:function(W){ve=W}});var xe=0;Object.defineProperty(this,"lastBreak",{get:function(){return xe},set:function(W){xe=W}});var Ae=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Ae},set:function(W){Ae=W}}),Object.defineProperty(this,"ctx",{get:function(){return u},set:function(W){W instanceof f&&(u=W)}}),Object.defineProperty(this,"path",{get:function(){return u.path},set:function(W){u.path=W}});var je=[];Object.defineProperty(this,"ctxStack",{get:function(){return je},set:function(W){je=W}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(W){var Me;Me=y(W),this.ctx.fillStyle=Me.style,this.ctx.isFillTransparent=Me.a===0,this.ctx.fillOpacity=Me.a,this.pdf.setFillColor(Me.r,Me.g,Me.b,{a:Me.a}),this.pdf.setTextColor(Me.r,Me.g,Me.b,{a:Me.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(W){var Me=y(W);this.ctx.strokeStyle=Me.style,this.ctx.isStrokeTransparent=Me.a===0,this.ctx.strokeOpacity=Me.a,Me.a===0?this.pdf.setDrawColor(255,255,255):(Me.a,this.pdf.setDrawColor(Me.r,Me.g,Me.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(W){["butt","round","square"].indexOf(W)!==-1&&(this.ctx.lineCap=W,this.pdf.setLineCap(W))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(W){isNaN(W)||(this.ctx.lineWidth=W,this.pdf.setLineWidth(W))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(W){["bevel","round","miter"].indexOf(W)!==-1&&(this.ctx.lineJoin=W,this.pdf.setLineJoin(W))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(W){isNaN(W)||(this.ctx.miterLimit=W,this.pdf.setMiterLimit(W))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(W){this.ctx.textBaseline=W}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(W){["right","end","center","left","start"].indexOf(W)!==-1&&(this.ctx.textAlign=W)}});var Ve=null,Fe=null,Je=null;Object.defineProperty(this,"fontFaces",{get:function(){return Je},set:function(W){Ve=null,Fe=null,Je=W}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(W){var Me;if(this.ctx.font=W,(Me=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(W))!==null){var Tt=Me[1];Me[2];var lt=Me[3],Pe=Me[4];Me[5];var st=Me[6],Be=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Pe)[2];Pe=Math.floor(Be==="px"?parseFloat(Pe)*this.pdf.internal.scaleFactor:Be==="em"?parseFloat(Pe)*this.pdf.getFontSize():parseFloat(Pe)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Pe);var ot=function(Ze){var hr,Ft,It=[],At=Ze.trim();if(At==="")return R1;if(At in wN)return[wN[At]];for(;At!=="";){switch(Ft=null,hr=(At=_N(At)).charAt(0)){case'"':case"'":Ft=kB(At.substring(1),hr);break;default:Ft=PB(At)}if(Ft===null||(It.push(Ft[0]),(At=_N(Ft[1]))!==""&&At.charAt(0)!==","))return R1;At=At.replace(/^,/,"")}return It}(st);if(this.fontFaces){var et=function(Ze,hr){var Ft=Ze.getFontList(),It=JSON.stringify(Ft);if(Ve===null||Fe!==It){var At=function(yr){var it=[];return Object.keys(yr).forEach(function(er){yr[er].forEach(function(ut){var vt=null;switch(ut){case"bold":vt={family:er,weight:"bold"};break;case"italic":vt={family:er,style:"italic"};break;case"bolditalic":vt={family:er,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:er}}vt!==null&&(vt.ref={name:er,style:ut},it.push(vt))})}),it}(Ft);Ve=function(yr){for(var it={},er=0;er<yr.length;++er){var ut=L1(yr[er]),vt=ut.family,tr=ut.stretch,kt=ut.style,at=ut.weight;it[vt]=it[vt]||{},it[vt][tr]=it[vt][tr]||{},it[vt][tr][kt]=it[vt][tr][kt]||{},it[vt][tr][kt][at]=ut}return it}(At.concat(hr)),Fe=It}return Ve}(this.pdf,this.fontFaces),Ht=ot.map(function(Ze){return{family:Ze,stretch:"normal",weight:lt,style:Tt}}),Lt=function(Ze,hr,Ft){for(var It=(Ft=Ft||{}).defaultFontFamily||"times",At=Object.assign({},IB,Ft.genericFontFamilies||{}),yr=null,it=null,er=0;er<hr.length;++er)if(At[(yr=L1(hr[er])).family]&&(yr.family=At[yr.family]),Ze.hasOwnProperty(yr.family)){it=Ze[yr.family];break}if(!(it=it||Ze[It]))throw new Error("Could not find a font-family for the rule '"+xN(yr)+"' and default family '"+It+"'.");if(it=function(ut,vt){if(vt[ut])return vt[ut];var tr=_2[ut],kt=tr<=_2.normal?-1:1,at=vN(vt,sT,tr,kt);if(!at)throw new Error("Could not find a matching font-stretch value for "+ut);return at}(yr.stretch,it),it=function(ut,vt){if(vt[ut])return vt[ut];for(var tr=nT[ut],kt=0;kt<tr.length;++kt)if(vt[tr[kt]])return vt[tr[kt]];throw new Error("Could not find a matching font-style for "+ut)}(yr.style,it),!(it=function(ut,vt){if(vt[ut])return vt[ut];if(ut===400&&vt[500])return vt[500];if(ut===500&&vt[400])return vt[400];var tr=TB[ut],kt=vN(vt,iT,tr,ut<400?-1:1);if(!kt)throw new Error("Could not find a matching font-weight for value "+ut);return kt}(yr.weight,it)))throw new Error("Failed to resolve a font for the rule '"+xN(yr)+"'.");return it}(et,Ht);this.pdf.setFont(Lt.ref.name,Lt.ref.style)}else{var Xe="";(lt==="bold"||parseInt(lt,10)>=700||Tt==="bold")&&(Xe="bold"),Tt==="italic"&&(Xe+="italic"),Xe.length===0&&(Xe="normal");for(var ft="",Pt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},We=0;We<ot.length;We++){if(this.pdf.internal.getFont(ot[We],Xe,{noFallback:!0,disableWarning:!0})!==void 0){ft=ot[We];break}if(Xe==="bolditalic"&&this.pdf.internal.getFont(ot[We],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ft=ot[We],Xe="bold";else if(this.pdf.internal.getFont(ot[We],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ft=ot[We],Xe="normal";break}}if(ft===""){for(var xt=0;xt<ot.length;xt++)if(Pt[ot[xt]]){ft=Pt[ot[xt]];break}}ft=ft===""?"Times":ft,this.pdf.setFont(ft,Xe)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(W){this.ctx.globalCompositeOperation=W}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(W){this.ctx.globalAlpha=W}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(W){this.ctx.lineDashOffset=W,we.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(W){this.ctx.lineDash=W,we.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(W){this.ctx.ignoreClearRect=!!W}})};g.prototype.setLineDash=function(U){this.lineDash=U},g.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},g.prototype.fill=function(){k.call(this,"fill",!1)},g.prototype.stroke=function(){k.call(this,"stroke",!1)},g.prototype.beginPath=function(){this.path=[{type:"begin"}]},g.prototype.moveTo=function(U,G){if(isNaN(U)||isNaN(G))throw mr.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var J=this.ctx.transform.applyToPoint(new o(U,G));this.path.push({type:"mt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(U,G)},g.prototype.closePath=function(){var U=new o(0,0),G=0;for(G=this.path.length-1;G!==-1;G--)if(this.path[G].type==="begin"&&ar(this.path[G+1])==="object"&&typeof this.path[G+1].x=="number"){U=new o(this.path[G+1].x,this.path[G+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new o(U.x,U.y)},g.prototype.lineTo=function(U,G){if(isNaN(U)||isNaN(G))throw mr.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var J=this.ctx.transform.applyToPoint(new o(U,G));this.path.push({type:"lt",x:J.x,y:J.y}),this.ctx.lastPoint=new o(J.x,J.y)},g.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),k.call(this,null,!0)},g.prototype.quadraticCurveTo=function(U,G,J,re){if(isNaN(J)||isNaN(re)||isNaN(U)||isNaN(G))throw mr.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var ie=this.ctx.transform.applyToPoint(new o(J,re)),he=this.ctx.transform.applyToPoint(new o(U,G));this.path.push({type:"qct",x1:he.x,y1:he.y,x:ie.x,y:ie.y}),this.ctx.lastPoint=new o(ie.x,ie.y)},g.prototype.bezierCurveTo=function(U,G,J,re,ie,he){if(isNaN(ie)||isNaN(he)||isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re))throw mr.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ve=this.ctx.transform.applyToPoint(new o(ie,he)),xe=this.ctx.transform.applyToPoint(new o(U,G)),Ae=this.ctx.transform.applyToPoint(new o(J,re));this.path.push({type:"bct",x1:xe.x,y1:xe.y,x2:Ae.x,y2:Ae.y,x:ve.x,y:ve.y}),this.ctx.lastPoint=new o(ve.x,ve.y)},g.prototype.arc=function(U,G,J,re,ie,he){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(ie))throw mr.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(he=!!he,!this.ctx.transform.isIdentity){var ve=this.ctx.transform.applyToPoint(new o(U,G));U=ve.x,G=ve.y;var xe=this.ctx.transform.applyToPoint(new o(0,J)),Ae=this.ctx.transform.applyToPoint(new o(0,0));J=Math.sqrt(Math.pow(xe.x-Ae.x,2)+Math.pow(xe.y-Ae.y,2))}Math.abs(ie-re)>=2*Math.PI&&(re=0,ie=2*Math.PI),this.path.push({type:"arc",x:U,y:G,radius:J,startAngle:re,endAngle:ie,counterclockwise:he})},g.prototype.arcTo=function(U,G,J,re,ie){throw new Error("arcTo not implemented.")},g.prototype.rect=function(U,G,J,re){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re))throw mr.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(U,G),this.lineTo(U+J,G),this.lineTo(U+J,G+re),this.lineTo(U,G+re),this.lineTo(U,G),this.lineTo(U+J,G),this.lineTo(U,G)},g.prototype.fillRect=function(U,G,J,re){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re))throw mr.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var ie={};this.lineCap!=="butt"&&(ie.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(ie.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(U,G,J,re),this.fill(),ie.hasOwnProperty("lineCap")&&(this.lineCap=ie.lineCap),ie.hasOwnProperty("lineJoin")&&(this.lineJoin=ie.lineJoin)}},g.prototype.strokeRect=function(U,G,J,re){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re))throw mr.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");E.call(this)||(this.beginPath(),this.rect(U,G,J,re),this.stroke())},g.prototype.clearRect=function(U,G,J,re){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re))throw mr.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(U,G,J,re))},g.prototype.save=function(U){U=typeof U!="boolean"||U;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("q");if(this.pdf.setPage(G),U){this.ctx.fontSize=this.pdf.internal.getFontSize();var re=new f(this.ctx);this.ctxStack.push(this.ctx),this.ctx=re}},g.prototype.restore=function(U){U=typeof U!="boolean"||U;for(var G=this.pdf.internal.getCurrentPageInfo().pageNumber,J=0;J<this.pdf.internal.getNumberOfPages();J++)this.pdf.setPage(J+1),this.pdf.internal.out("Q");this.pdf.setPage(G),U&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},g.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var y=function(U){var G,J,re,ie;if(U.isCanvasGradient===!0&&(U=U.getColor()),!U)return{r:0,g:0,b:0,a:0,style:U};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(U))G=0,J=0,re=0,ie=0;else{var he=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(U);if(he!==null)G=parseInt(he[1]),J=parseInt(he[2]),re=parseInt(he[3]),ie=1;else if((he=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(U))!==null)G=parseInt(he[1]),J=parseInt(he[2]),re=parseInt(he[3]),ie=parseFloat(he[4]);else{if(ie=1,typeof U=="string"&&U.charAt(0)!=="#"){var ve=new Y6(U);U=ve.ok?ve.toHex():"#000000"}U.length===4?(G=U.substring(1,2),G+=G,J=U.substring(2,3),J+=J,re=U.substring(3,4),re+=re):(G=U.substring(1,3),J=U.substring(3,5),re=U.substring(5,7)),G=parseInt(G,16),J=parseInt(J,16),re=parseInt(re,16)}}return{r:G,g:J,b:re,a:ie,style:U}},m=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},E=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};g.prototype.fillText=function(U,G,J,re){if(isNaN(G)||isNaN(J)||typeof U!="string")throw mr.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(re=isNaN(re)?void 0:re,!m.call(this)){var ie=ee(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;R.call(this,{text:U,x:G,y:J,scale:he,angle:ie,align:this.textAlign,maxWidth:re})}},g.prototype.strokeText=function(U,G,J,re){if(isNaN(G)||isNaN(J)||typeof U!="string")throw mr.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!E.call(this)){re=isNaN(re)?void 0:re;var ie=ee(this.ctx.transform.rotation),he=this.ctx.transform.scaleX;R.call(this,{text:U,x:G,y:J,scale:he,renderingMode:"stroke",angle:ie,align:this.textAlign,maxWidth:re})}},g.prototype.measureText=function(U){if(typeof U!="string")throw mr.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var G=this.pdf,J=this.pdf.internal.scaleFactor,re=G.internal.getFontSize(),ie=G.getStringUnitWidth(U)*re/G.internal.scaleFactor;return new function(he){var ve=(he=he||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return ve}}),this}({width:ie*=Math.round(96*J/72*1e4)/1e4})},g.prototype.scale=function(U,G){if(isNaN(U)||isNaN(G))throw mr.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var J=new l(U,0,0,G,0,0);this.ctx.transform=this.ctx.transform.multiply(J)},g.prototype.rotate=function(U){if(isNaN(U))throw mr.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var G=new l(Math.cos(U),Math.sin(U),-Math.sin(U),Math.cos(U),0,0);this.ctx.transform=this.ctx.transform.multiply(G)},g.prototype.translate=function(U,G){if(isNaN(U)||isNaN(G))throw mr.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var J=new l(1,0,0,1,U,G);this.ctx.transform=this.ctx.transform.multiply(J)},g.prototype.transform=function(U,G,J,re,ie,he){if(isNaN(U)||isNaN(G)||isNaN(J)||isNaN(re)||isNaN(ie)||isNaN(he))throw mr.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ve=new l(U,G,J,re,ie,he);this.ctx.transform=this.ctx.transform.multiply(ve)},g.prototype.setTransform=function(U,G,J,re,ie,he){U=isNaN(U)?1:U,G=isNaN(G)?0:G,J=isNaN(J)?0:J,re=isNaN(re)?1:re,ie=isNaN(ie)?0:ie,he=isNaN(he)?0:he,this.ctx.transform=new l(U,G,J,re,ie,he)};var b=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};g.prototype.drawImage=function(U,G,J,re,ie,he,ve,xe,Ae){var je=this.pdf.getImageProperties(U),Ve=1,Fe=1,Je=1,W=1;re!==void 0&&xe!==void 0&&(Je=xe/re,W=Ae/ie,Ve=je.width/re*xe/re,Fe=je.height/ie*Ae/ie),he===void 0&&(he=G,ve=J,G=0,J=0),re!==void 0&&xe===void 0&&(xe=re,Ae=ie),re===void 0&&xe===void 0&&(xe=je.width,Ae=je.height);var Me=this.ctx.transform.decompose(),Tt=ee(Me.rotate.shx),lt=new l,Pe=(lt=(lt=(lt=lt.multiply(Me.translate)).multiply(Me.skew)).multiply(Me.scale)).applyToRectangle(new a(he-G*Je,ve-J*W,re*Ve,ie*Fe));if(this.autoPaging){for(var st,Be=A.call(this,Pe),ot=[],et=0;et<Be.length;et+=1)ot.indexOf(Be[et])===-1&&ot.push(Be[et]);I(ot);for(var Ht=ot[0],Lt=ot[ot.length-1],Xe=Ht;Xe<Lt+1;Xe++){this.pdf.setPage(Xe);var ft=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Pt=Xe===1?this.posY+this.margin[0]:this.margin[0],We=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],xt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Ze=Xe===1?0:We+(Xe-2)*xt;if(this.ctx.clip_path.length!==0){var hr=this.path;st=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(st,this.posX+this.margin[3],-Ze+Pt+this.ctx.prevPageLastElemOffset),H.call(this,"fill",!0),this.path=hr}var Ft=JSON.parse(JSON.stringify(Pe));Ft=T([Ft],this.posX+this.margin[3],-Ze+Pt+this.ctx.prevPageLastElemOffset)[0];var It=(Xe>Ht||Xe<Lt)&&b.call(this);It&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ft,xt,null).clip().discardPath()),this.pdf.addImage(U,"JPEG",Ft.x,Ft.y,Ft.w,Ft.h,null,null,Tt),It&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(U,"JPEG",Pe.x,Pe.y,Pe.w,Pe.h,null,null,Tt)};var A=function(U,G,J){var re=[];G=G||this.pdf.internal.pageSize.width,J=J||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var ie=this.posY+this.ctx.prevPageLastElemOffset;switch(U.type){default:case"mt":case"lt":re.push(Math.floor((U.y+ie)/J)+1);break;case"arc":re.push(Math.floor((U.y+ie-U.radius)/J)+1),re.push(Math.floor((U.y+ie+U.radius)/J)+1);break;case"qct":var he=ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x,U.y);re.push(Math.floor((he.y+ie)/J)+1),re.push(Math.floor((he.y+he.h+ie)/J)+1);break;case"bct":var ve=_e(this.ctx.lastPoint.x,this.ctx.lastPoint.y,U.x1,U.y1,U.x2,U.y2,U.x,U.y);re.push(Math.floor((ve.y+ie)/J)+1),re.push(Math.floor((ve.y+ve.h+ie)/J)+1);break;case"rect":re.push(Math.floor((U.y+ie)/J)+1),re.push(Math.floor((U.y+U.h+ie)/J)+1)}for(var xe=0;xe<re.length;xe+=1)for(;this.pdf.internal.getNumberOfPages()<re[xe];)x.call(this);return re},x=function(){var U=this.fillStyle,G=this.strokeStyle,J=this.font,re=this.lineCap,ie=this.lineWidth,he=this.lineJoin;this.pdf.addPage(),this.fillStyle=U,this.strokeStyle=G,this.font=J,this.lineCap=re,this.lineWidth=ie,this.lineJoin=he},T=function(U,G,J){for(var re=0;re<U.length;re++)switch(U[re].type){case"bct":U[re].x2+=G,U[re].y2+=J;case"qct":U[re].x1+=G,U[re].y1+=J;default:U[re].x+=G,U[re].y+=J}return U},I=function(U){return U.sort(function(G,J){return G-J})},k=function(U,G){var J=this.fillStyle,re=this.strokeStyle,ie=this.lineCap,he=this.lineWidth,ve=Math.abs(he*this.ctx.transform.scaleX),xe=this.lineJoin;if(this.autoPaging){for(var Ae,je,Ve=JSON.parse(JSON.stringify(this.path)),Fe=JSON.parse(JSON.stringify(this.path)),Je=[],W=0;W<Fe.length;W++)if(Fe[W].x!==void 0)for(var Me=A.call(this,Fe[W]),Tt=0;Tt<Me.length;Tt+=1)Je.indexOf(Me[Tt])===-1&&Je.push(Me[Tt]);for(var lt=0;lt<Je.length;lt++)for(;this.pdf.internal.getNumberOfPages()<Je[lt];)x.call(this);I(Je);for(var Pe=Je[0],st=Je[Je.length-1],Be=Pe;Be<st+1;Be++){this.pdf.setPage(Be),this.fillStyle=J,this.strokeStyle=re,this.lineCap=ie,this.lineWidth=ve,this.lineJoin=xe;var ot=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],et=Be===1?this.posY+this.margin[0]:this.margin[0],Ht=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Lt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Xe=Be===1?0:Ht+(Be-2)*Lt;if(this.ctx.clip_path.length!==0){var ft=this.path;Ae=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(Ae,this.posX+this.margin[3],-Xe+et+this.ctx.prevPageLastElemOffset),H.call(this,U,!0),this.path=ft}if(je=JSON.parse(JSON.stringify(Ve)),this.path=T(je,this.posX+this.margin[3],-Xe+et+this.ctx.prevPageLastElemOffset),G===!1||Be===0){var Pt=(Be>Pe||Be<st)&&b.call(this);Pt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],ot,Lt,null).clip().discardPath()),H.call(this,U,G),Pt&&this.pdf.restoreGraphicsState()}this.lineWidth=he}this.path=Ve}else this.lineWidth=ve,H.call(this,U,G),this.lineWidth=he},H=function(U,G){if((U!=="stroke"||G||!E.call(this))&&(U==="stroke"||G||!m.call(this))){for(var J,re,ie=[],he=this.path,ve=0;ve<he.length;ve++){var xe=he[ve];switch(xe.type){case"begin":ie.push({begin:!0});break;case"close":ie.push({close:!0});break;case"mt":ie.push({start:xe,deltas:[],abs:[]});break;case"lt":var Ae=ie.length;if(he[ve-1]&&!isNaN(he[ve-1].x)&&(J=[xe.x-he[ve-1].x,xe.y-he[ve-1].y],Ae>0)){for(;Ae>=0;Ae--)if(ie[Ae-1].close!==!0&&ie[Ae-1].begin!==!0){ie[Ae-1].deltas.push(J),ie[Ae-1].abs.push(xe);break}}break;case"bct":J=[xe.x1-he[ve-1].x,xe.y1-he[ve-1].y,xe.x2-he[ve-1].x,xe.y2-he[ve-1].y,xe.x-he[ve-1].x,xe.y-he[ve-1].y],ie[ie.length-1].deltas.push(J);break;case"qct":var je=he[ve-1].x+2/3*(xe.x1-he[ve-1].x),Ve=he[ve-1].y+2/3*(xe.y1-he[ve-1].y),Fe=xe.x+2/3*(xe.x1-xe.x),Je=xe.y+2/3*(xe.y1-xe.y),W=xe.x,Me=xe.y;J=[je-he[ve-1].x,Ve-he[ve-1].y,Fe-he[ve-1].x,Je-he[ve-1].y,W-he[ve-1].x,Me-he[ve-1].y],ie[ie.length-1].deltas.push(J);break;case"arc":ie.push({deltas:[],abs:[],arc:!0}),Array.isArray(ie[ie.length-1].abs)&&ie[ie.length-1].abs.push(xe)}}re=G?null:U==="stroke"?"stroke":"fill";for(var Tt=!1,lt=0;lt<ie.length;lt++)if(ie[lt].arc)for(var Pe=ie[lt].abs,st=0;st<Pe.length;st++){var Be=Pe[st];Be.type==="arc"?P.call(this,Be.x,Be.y,Be.radius,Be.startAngle,Be.endAngle,Be.counterclockwise,void 0,G,!Tt):L.call(this,Be.x,Be.y),Tt=!0}else if(ie[lt].close===!0)this.pdf.internal.out("h"),Tt=!1;else if(ie[lt].begin!==!0){var ot=ie[lt].start.x,et=ie[lt].start.y;X.call(this,ie[lt].deltas,ot,et),Tt=!0}re&&C.call(this,re),G&&O.call(this)}},Z=function(U){var G=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,J=G*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return U-J;case"top":return U+G-J;case"hanging":return U+G-2*J;case"middle":return U+G/2-J;default:return U}},F=function(U){return U+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};g.prototype.createLinearGradient=function(){var U=function(){};return U.colorStops=[],U.addColorStop=function(G,J){this.colorStops.push([G,J])},U.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},U.isCanvasGradient=!0,U},g.prototype.createPattern=function(){return this.createLinearGradient()},g.prototype.createRadialGradient=function(){return this.createLinearGradient()};var P=function(U,G,J,re,ie,he,ve,xe,Ae){for(var je=le.call(this,J,re,ie,he),Ve=0;Ve<je.length;Ve++){var Fe=je[Ve];Ve===0&&(Ae?N.call(this,Fe.x1+U,Fe.y1+G):L.call(this,Fe.x1+U,Fe.y1+G)),fe.call(this,U,G,Fe.x2,Fe.y2,Fe.x3,Fe.y3,Fe.x4,Fe.y4)}xe?O.call(this):C.call(this,ve)},C=function(U){switch(U){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},O=function(){this.pdf.clip(),this.pdf.discardPath()},N=function(U,G){this.pdf.internal.out(r(U)+" "+n(G)+" m")},R=function(U){var G;switch(U.align){case"right":case"end":G="right";break;case"center":G="center";break;default:G="left"}var J,re,ie,he=this.pdf.getTextDimensions(U.text),ve=Z.call(this,U.y),xe=F.call(this,ve)-he.h,Ae=this.ctx.transform.applyToPoint(new o(U.x,ve));if(this.autoPaging){var je=this.ctx.transform.decompose(),Ve=new l;Ve=(Ve=(Ve=Ve.multiply(je.translate)).multiply(je.skew)).multiply(je.scale);for(var Fe=this.ctx.transform.applyToRectangle(new a(U.x,ve,he.w,he.h)),Je=Ve.applyToRectangle(new a(U.x,xe,he.w,he.h)),W=A.call(this,Je),Me=[],Tt=0;Tt<W.length;Tt+=1)Me.indexOf(W[Tt])===-1&&Me.push(W[Tt]);I(Me);for(var lt=Me[0],Pe=Me[Me.length-1],st=lt;st<Pe+1;st++){this.pdf.setPage(st);var Be=st===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],et=this.pdf.internal.pageSize.height-this.margin[2],Ht=et-this.margin[0],Lt=this.pdf.internal.pageSize.width-this.margin[1],Xe=Lt-this.margin[3],ft=st===1?0:ot+(st-2)*Ht;if(this.ctx.clip_path.length!==0){var Pt=this.path;J=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=T(J,this.posX+this.margin[3],-1*ft+Be),H.call(this,"fill",!0),this.path=Pt}var We=T([JSON.parse(JSON.stringify(Je))],this.posX+this.margin[3],-ft+Be+this.ctx.prevPageLastElemOffset)[0];U.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*U.scale),ie=this.lineWidth,this.lineWidth=ie*U.scale);var xt=this.autoPaging!=="text";if(xt||We.y+We.h<=et){if(xt||We.y>=Be&&We.x<=Lt){var Ze=xt?U.text:this.pdf.splitTextToSize(U.text,U.maxWidth||Lt-We.x)[0],hr=T([JSON.parse(JSON.stringify(Fe))],this.posX+this.margin[3],-ft+Be+this.ctx.prevPageLastElemOffset)[0],Ft=xt&&(st>lt||st<Pe)&&b.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Xe,Ht,null).clip().discardPath()),this.pdf.text(Ze,hr.x,hr.y,{angle:U.angle,align:G,renderingMode:U.renderingMode}),Ft&&this.pdf.restoreGraphicsState()}}else We.y<et&&(this.ctx.prevPageLastElemOffset+=et-We.y);U.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ie)}}else U.scale>=.01&&(re=this.pdf.internal.getFontSize(),this.pdf.setFontSize(re*U.scale),ie=this.lineWidth,this.lineWidth=ie*U.scale),this.pdf.text(U.text,Ae.x+this.posX,Ae.y+this.posY,{angle:U.angle,align:G,renderingMode:U.renderingMode,maxWidth:U.maxWidth}),U.scale>=.01&&(this.pdf.setFontSize(re),this.lineWidth=ie)},L=function(U,G,J,re){J=J||0,re=re||0,this.pdf.internal.out(r(U+J)+" "+n(G+re)+" l")},X=function(U,G,J){return this.pdf.lines(U,G,J,null,null)},fe=function(U,G,J,re,ie,he,ve,xe){this.pdf.internal.out([e(s(J+U)),e(i(re+G)),e(s(ie+U)),e(i(he+G)),e(s(ve+U)),e(i(xe+G)),"c"].join(" "))},le=function(U,G,J,re){for(var ie=2*Math.PI,he=Math.PI/2;G>J;)G-=ie;var ve=Math.abs(J-G);ve<ie&&re&&(ve=ie-ve);for(var xe=[],Ae=re?-1:1,je=G;ve>1e-5;){var Ve=je+Ae*Math.min(ve,he);xe.push(ye.call(this,U,je,Ve)),ve-=Math.abs(Ve-je),je=Ve}return xe},ye=function(U,G,J){var re=(J-G)/2,ie=U*Math.cos(re),he=U*Math.sin(re),ve=ie,xe=-he,Ae=ve*ve+xe*xe,je=Ae+ve*ie+xe*he,Ve=4/3*(Math.sqrt(2*Ae*je)-je)/(ve*he-xe*ie),Fe=ve-Ve*xe,Je=xe+Ve*ve,W=Fe,Me=-Je,Tt=re+G,lt=Math.cos(Tt),Pe=Math.sin(Tt);return{x1:U*Math.cos(G),y1:U*Math.sin(G),x2:Fe*lt-Je*Pe,y2:Fe*Pe+Je*lt,x3:W*lt-Me*Pe,y3:W*Pe+Me*lt,x4:U*Math.cos(J),y4:U*Math.sin(J)}},ee=function(U){return 180*U/Math.PI},ue=function(U,G,J,re,ie,he){var ve=U+.5*(J-U),xe=G+.5*(re-G),Ae=ie+.5*(J-ie),je=he+.5*(re-he),Ve=Math.min(U,ie,ve,Ae),Fe=Math.max(U,ie,ve,Ae),Je=Math.min(G,he,xe,je),W=Math.max(G,he,xe,je);return new a(Ve,Je,Fe-Ve,W-Je)},_e=function(U,G,J,re,ie,he,ve,xe){var Ae,je,Ve,Fe,Je,W,Me,Tt,lt,Pe,st,Be,ot,et,Ht=J-U,Lt=re-G,Xe=ie-J,ft=he-re,Pt=ve-ie,We=xe-he;for(je=0;je<41;je++)lt=(Me=(Ve=U+(Ae=je/40)*Ht)+Ae*((Je=J+Ae*Xe)-Ve))+Ae*(Je+Ae*(ie+Ae*Pt-Je)-Me),Pe=(Tt=(Fe=G+Ae*Lt)+Ae*((W=re+Ae*ft)-Fe))+Ae*(W+Ae*(he+Ae*We-W)-Tt),je==0?(st=lt,Be=Pe,ot=lt,et=Pe):(st=Math.min(st,lt),Be=Math.min(Be,Pe),ot=Math.max(ot,lt),et=Math.max(et,Pe));return new a(Math.round(st),Math.round(Be),Math.round(ot-st),Math.round(et-Be))},we=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var U,G,J=(U=this.ctx.lineDash,G=this.ctx.lineDashOffset,JSON.stringify({lineDash:U,lineDashOffset:G}));this.prevLineDash!==J&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=J)}}})(rt.API),function(t){var e=function(o){var a,l,u,f,g,y,m,E,b,A;for(l=[],u=0,f=(o+=a="\0\0\0\0".slice(o.length%4||4)).length;f>u;u+=4)(g=(o.charCodeAt(u)<<24)+(o.charCodeAt(u+1)<<16)+(o.charCodeAt(u+2)<<8)+o.charCodeAt(u+3))!==0?(y=(g=((g=((g=((g=(g-(A=g%85))/85)-(b=g%85))/85)-(E=g%85))/85)-(m=g%85))/85)%85,l.push(y+33,m+33,E+33,b+33,A+33)):l.push(122);return function(x,T){for(var I=T;I>0;I--)x.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},r=function(o){var a,l,u,f,g,y=String,m="length",E=255,b="charCodeAt",A="slice",x="replace";for(o[A](-2),o=o[A](0,-2)[x](/\s/g,"")[x]("z","!!!!!"),u=[],f=0,g=(o+=a="uuuuu"[A](o[m]%5||5))[m];g>f;f+=5)l=52200625*(o[b](f)-33)+614125*(o[b](f+1)-33)+7225*(o[b](f+2)-33)+85*(o[b](f+3)-33)+(o[b](f+4)-33),u.push(E&l>>24,E&l>>16,E&l>>8,E&l);return function(T,I){for(var k=I;k>0;k--)T.pop()}(u,a[m]),y.fromCharCode.apply(y,u)},n=function(o){return o.split("").map(function(a){return("0"+a.charCodeAt().toString(16)).slice(-2)}).join("")+">"},s=function(o){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((o=o.replace(/\s/g,"")).indexOf(">")!==-1&&(o=o.substr(0,o.indexOf(">"))),o.length%2&&(o+="0"),a.test(o)===!1)return"";for(var l="",u=0;u<o.length;u+=2)l+=String.fromCharCode("0x"+(o[u]+o[u+1]));return l},i=function(o){for(var a=new Uint8Array(o.length),l=o.length;l--;)a[l]=o.charCodeAt(l);return(a=p2(a)).reduce(function(u,f){return u+String.fromCharCode(f)},"")};t.processDataByFilters=function(o,a){var l=0,u=o||"",f=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":u=r(u),f.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":u=e(u),f.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":u=s(u),f.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":u=n(u),f.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":u=i(u),f.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:u,reverseChain:f.reverse().join(" ")}}}(rt.API),function(t){t.loadFile=function(e,r,n){return function(s,i,o){i=i!==!1,o=typeof o=="function"?o:function(){};var a=void 0;try{a=function(l,u,f){var g=new XMLHttpRequest,y=0,m=function(E){var b=E.length,A=[],x=String.fromCharCode;for(y=0;y<b;y+=1)A.push(x(255&E.charCodeAt(y)));return A.join("")};if(g.open("GET",l,!u),g.overrideMimeType("text/plain; charset=x-user-defined"),u===!1&&(g.onload=function(){g.status===200?f(m(this.responseText)):f(void 0)}),g.send(null),u&&g.status===200)return m(g.responseText)}(s,i,o)}catch{}return a}(e,r,n)},t.loadImageFile=t.loadFile}(rt.API),function(t){function e(){return(yt.html2canvas?Promise.resolve(yt.html2canvas):An(()=>import("./html2canvas.esm-CBrSDip1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function r(){return(yt.DOMPurify?Promise.resolve(yt.DOMPurify):An(()=>import("./purify.es-B9ZVCkUG.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var n=function(a){var l=ar(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(a,l){var u=document.createElement(a);for(var f in l.className&&(u.className=l.className),l.innerHTML&&l.dompurify&&(u.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)u.style[f]=l.style[f];return u},i=function a(l,u){for(var f=l.nodeType===3?document.createTextNode(l.nodeValue):l.cloneNode(!1),g=l.firstChild;g;g=g.nextSibling)u!==!0&&g.nodeType===1&&g.nodeName==="SCRIPT"||f.appendChild(a(g,u));return l.nodeType===1&&(l.nodeName==="CANVAS"?(f.width=l.width,f.height=l.height,f.getContext("2d").drawImage(l,0,0)):l.nodeName!=="TEXTAREA"&&l.nodeName!=="SELECT"||(f.value=l.value),f.addEventListener("load",function(){f.scrollTop=l.scrollTop,f.scrollLeft=l.scrollLeft},!0)),f},o=function a(l){var u=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),f=a.convert(Promise.resolve(),u);return(f=f.setProgress(1,a,1,[a])).set(l)};(o.prototype=Object.create(Promise.prototype)).constructor=o,o.convert=function(a,l){return a.__proto__=l||o.prototype,a},o.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},o.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(u){switch(n(u)){case"string":return"string";case"element":return u.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a),l){case"string":return this.then(r).then(function(u){return this.set({src:s("div",{innerHTML:a,dompurify:u})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},o.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},o.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=i(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},o.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=Object.assign({},this.opt.html2canvas);return delete u.onrendered,l(this.prop.container,u)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var u=this.opt.jsPDF,f=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,y=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete y.onrendered,u.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,u.context2d.posX=this.opt.x,u.context2d.posY=this.opt.y,u.context2d.margin=this.opt.margin,u.context2d.fontFaces=f,f)for(var m=0;m<f.length;++m){var E=f[m],b=E.src.find(function(A){return A.format==="truetype"});b&&u.addFont(b.url,E.ref.name,E.ref.style)}return y.windowHeight=y.windowHeight||0,y.windowHeight=y.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):y.windowHeight,u.context2d.save(!0),l(this.prop.container,y)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},o.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},o.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},o.prototype.output=function(a,l,u){return(u=u||"pdf").toLowerCase()==="img"||u.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},o.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},o.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},o.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},o.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},o.prototype.set=function(a){if(n(a)!=="object")return this;var l=Object.keys(a||{}).map(function(u){if(u in o.template.prop)return function(){this.prop[u]=a[u]};switch(u){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[u]=a[u]}}},this);return this.then(function(){return this.thenList(l)})},o.prototype.get=function(a,l){return this.then(function(){var u=a in o.template.prop?this.prop[a]:this.opt[a];return l?l(u):u})},o.prototype.setMargin=function(a){return this.then(function(){switch(n(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},o.prototype.setPageSize=function(a){function l(u,f){return Math.floor(u*f/72*96)}return this.then(function(){(a=a||rt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},o.prototype.setProgress=function(a,l,u,f){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),u!=null&&(this.progress.n=u),f!=null&&(this.progress.stack=f),this.progress.ratio=this.progress.val/this.progress.state,this},o.prototype.updateProgress=function(a,l,u,f){return this.setProgress(a?this.progress.val+a:null,l||null,u?this.progress.n+u:null,f?this.progress.stack.concat(f):null)},o.prototype.then=function(a,l){var u=this;return this.thenCore(a,l,function(f,g){return u.updateProgress(null,null,1,[f]),Promise.prototype.then.call(this,function(y){return u.updateProgress(null,f),y}).then(f,g).then(function(y){return u.updateProgress(1),y})})},o.prototype.thenCore=function(a,l,u){u=u||Promise.prototype.then;var f=this;a&&(a=a.bind(f)),l&&(l=l.bind(f));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?f:o.convert(Object.assign({},f),Promise.prototype),y=u.call(g,a,l);return o.convert(y,f.__proto__)},o.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},o.prototype.thenList=function(a){var l=this;return a.forEach(function(u){l=l.thenCore(u)}),l},o.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return o.convert(l,this)},o.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},o.prototype.error=function(a){return this.then(function(){throw new Error(a)})},o.prototype.using=o.prototype.set,o.prototype.saveAs=o.prototype.save,o.prototype.export=o.prototype.output,o.prototype.run=o.prototype.then,rt.getPageSize=function(a,l,u){if(ar(a)==="object"){var f=a;a=f.orientation,l=f.unit||l,u=f.format||u}l=l||"mm",u=u||"a4",a=(""+(a||"P")).toLowerCase();var g,y=(""+u).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var E,b=0,A=0;if(m.hasOwnProperty(y))b=m[y][1]/g,A=m[y][0]/g;else try{b=u[1],A=u[0]}catch{throw new Error("Invalid format: "+u)}if(a==="p"||a==="portrait")a="p",A>b&&(E=A,A=b,b=E);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",b>A&&(E=A,A=b,b=E)}return{width:A,height:b,unit:l,k:g,orientation:a}},t.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(L1):null;var u=new o(l);return l.worker?u:u.from(a).doCallback()}}(rt.API),rt.API.addJS=function(t){return NN=t,this.internal.events.subscribe("postPutResources",function(){Rp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(Rp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),bN=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+NN+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){Rp!==void 0&&bN!==void 0&&this.internal.out("/Names <</JavaScript "+Rp+" 0 R>>")}),this},function(t){var e;t.events.push(["postPutResources",function(){var r=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=r.outline.render().split(/\r\n/),i=0;i<s.length;i++){var o=s[i],a=n.exec(o);if(a!=null){var l=a[1];r.internal.newObjectDeferredBegin(l,!1)}r.internal.write(o)}if(this.outline.createNamedDestinations){var u=this.internal.pages.length,f=[];for(i=0;i<u;i++){var g=r.internal.newObject();f.push(g);var y=r.internal.getPageInfo(i+1);r.internal.write("<< /D["+y.objId+" 0 R /XYZ null null null]>> endobj")}var m=r.internal.newObject();for(r.internal.write("<< /Names [ "),i=0;i<f.length;i++)r.internal.write("(page_"+(i+1)+")"+f[i]+" 0 R");r.internal.write(" ] >>","endobj"),e=r.internal.newObject(),r.internal.write("<< /Dests "+m+" 0 R"),r.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var r=this;r.outline.root.children.length>0&&(r.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&r.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(n,s,i){var o={title:s,options:i,children:[]};return n==null&&(n=this.root),n.children.push(o),o},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(n){n.id=r.internal.newObjectDeferred();for(var s=0;s<n.children.length;s++)this.genIds_r(n.children[s])},r.outline.renderRoot=function(n){this.objStart(n),this.line("/Type /Outlines"),n.children.length>0&&(this.line("/First "+this.makeRef(n.children[0])),this.line("/Last "+this.makeRef(n.children[n.children.length-1]))),this.line("/Count "+this.count_r({count:0},n)),this.objEnd()},r.outline.renderItems=function(n){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<n.children.length;i++){var o=n.children[i];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(n)),i>0&&this.line("/Prev "+this.makeRef(n.children[i-1])),i<n.children.length-1&&this.line("/Next "+this.makeRef(n.children[i+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var a=this.count=this.count_r({count:0},o);if(a>0&&this.line("/Count "+a),o.options&&o.options.pageNumber){var l=r.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+l.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var u=0;u<n.children.length;u++)this.renderItems(n.children[u])},r.outline.line=function(n){this.ctx.val+=n+`\r
`},r.outline.makeRef=function(n){return n.id+" 0 R"},r.outline.makeString=function(n){return"("+r.internal.pdfEscape(n)+")"},r.outline.objStart=function(n){this.ctx.val+=`\r
`+n.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(n,s){for(var i=0;i<s.children.length;i++)n.count++,this.count_r(n,s.children[i]);return n.count}}])}(rt.API),function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(r,n,s,i,o,a){var l,u=this.decode.DCT_DECODE,f=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=o||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,l=function(g){for(var y,m=256*g.charCodeAt(4)+g.charCodeAt(5),E=g.length,b={width:0,height:0,numcomponents:1},A=4;A<E;A+=2){if(A+=m,e.indexOf(g.charCodeAt(A+1))!==-1){y=256*g.charCodeAt(A+5)+g.charCodeAt(A+6),b={width:256*g.charCodeAt(A+7)+g.charCodeAt(A+8),height:y,numcomponents:g.charCodeAt(A+9)};break}m=256*g.charCodeAt(A+2)+g.charCodeAt(A+3)}return b}(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r),l.numcomponents){case 1:a=this.color_spaces.DEVICE_GRAY;break;case 4:a=this.color_spaces.DEVICE_CMYK;break;case 3:a=this.color_spaces.DEVICE_RGB}f={data:r,width:l.width,height:l.height,colorSpace:a,bitsPerComponent:8,filter:u,index:n,alias:s}}return f}}(rt.API),rt.API.processPNG=function(t,e,r,n){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var s,i=fB(t,{checkCrc:!0}),o=i.width,a=i.height,l=i.channels,u=i.palette,f=i.depth;s=u&&l===1?function(P){for(var C=P.width,O=P.height,N=P.data,R=P.palette,L=P.depth,X=!1,fe=[],le=[],ye=void 0,ee=!1,ue=0,_e=0;_e<R.length;_e++){var we=Tb(R[_e],4),U=we[0],G=we[1],J=we[2],re=we[3];fe.push(U,G,J),re!=null&&(re===0?(ue++,le.length<1&&le.push(_e)):re<255&&(ee=!0))}if(ee||ue>1){X=!0,le=void 0;var ie=C*O;ye=new Uint8Array(ie);for(var he=new DataView(N.buffer),ve=0;ve<ie;ve++){var xe=O1(he,ve,L),Ae=Tb(R[xe],4)[3];ye[ve]=Ae}}else ue===0&&(le=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:X?8:void 0,colorBytes:N,alphaBytes:ye,needSMask:X,palette:fe,mask:le}}(i):l===2||l===4?function(P){for(var C=P.data,O=P.width,N=P.height,R=P.channels,L=P.depth,X=R===2?"DeviceGray":"DeviceRGB",fe=R-1,le=O*N,ye=fe,ee=le*ye,ue=1*le,_e=Math.ceil(ee*L/8),we=Math.ceil(ue*L/8),U=new Uint8Array(_e),G=new Uint8Array(we),J=new DataView(C.buffer),re=new DataView(U.buffer),ie=new DataView(G.buffer),he=!1,ve=0;ve<le;ve++){for(var xe=ve*R,Ae=0;Ae<ye;Ae++)jN(re,O1(J,xe+Ae,L),ve*ye+Ae,L);var je=O1(J,xe+ye,L);je<(1<<L)-1&&(he=!0),jN(ie,je,1*ve,L)}return{colorSpace:X,colorsPerPixel:fe,sMaskBitsPerComponent:he?L:void 0,colorBytes:U,alphaBytes:G,needSMask:he}}(i):function(P){var C=P.data,O=P.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:O,colorsPerPixel:O==="DeviceGray"?1:3,colorBytes:C instanceof Uint16Array?function(N){for(var R=N.length,L=new Uint8Array(2*R),X=new DataView(L.buffer,L.byteOffset,L.byteLength),fe=0;fe<R;fe++)X.setUint16(2*fe,N[fe],!1);return L}(C):C,needSMask:!1}}(i);var g,y,m,E=s,b=E.colorSpace,A=E.colorsPerPixel,x=E.sMaskBitsPerComponent,T=E.colorBytes,I=E.alphaBytes,k=E.needSMask,H=E.palette,Z=E.mask,F=null;return n!==rt.API.image_compression.NONE&&typeof p2=="function"?(F=function(P){var C;switch(P){case rt.API.image_compression.FAST:C=11;break;case rt.API.image_compression.MEDIUM:C=13;break;case rt.API.image_compression.SLOW:C=14;break;default:C=12}return C}(n),g=this.decode.FLATE_DECODE,y="/Predictor ".concat(F," /Colors ").concat(A," /BitsPerComponent ").concat(f," /Columns ").concat(o),t=TN(T,Math.ceil(o*A*f/8),A,f,n),k&&(m=TN(I,Math.ceil(o*x/8),1,x,n))):(g=void 0,y=void 0,t=T,k&&(m=I)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(m&&this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),{alias:r,data:t,index:e,filter:g,decodeParameters:y,transparency:Z,palette:H,sMask:m,predictor:F,width:o,height:a,bitsPerComponent:f,sMaskBitsPerComponent:x,colorSpace:b}}},function(t){t.processGIF89A=function(e,r,n,s){var i=new RB(e),o=i.width,a=i.height,l=[];i.decodeAndBlitFrameRGBA(0,l);var u={data:l,width:o,height:a},f=new D1(100).encode(u,100);return t.processJPEG.call(this,f,r,n,s)},t.processGIF87A=t.processGIF89A}(rt.API),Gi.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var r=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:n,blue:r,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Gi.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(r){mr.log("bit decode error:"+r)}},Gi.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),r=e%4;for(t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+8*s*4,a=0;a<8&&8*s+a<this.width;a++){var l=this.palette[i>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}r!==0&&(this.pos+=4-r)}},Gi.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<t;s++){var i=this.datav.getUint8(this.pos++,!0),o=n*this.width*4+2*s*4,a=i>>4,l=15&i,u=this.palette[a];if(this.data[o]=u.blue,this.data[o+1]=u.green,this.data[o+2]=u.red,this.data[o+3]=255,2*s+1>=this.width)break;u=this.palette[l],this.data[o+4]=u.blue,this.data[o+4+1]=u.green,this.data[o+4+2]=u.red,this.data[o+4+3]=255}e!==0&&(this.pos+=4-e)}},Gi.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var s=this.datav.getUint8(this.pos++,!0),i=r*this.width*4+4*n;if(s<this.palette.length){var o=this.palette[s];this.data[i]=o.red,this.data[i+1]=o.green,this.data[i+2]=o.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}t!==0&&(this.pos+=4-t)}},Gi.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var n=this.bottom_up?r:this.height-1-r,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(i&e)/e*255|0,a=(i>>5&e)/e*255|0,l=(i>>10&e)/e*255|0,u=i>>15?255:0,f=n*this.width*4+4*s;this.data[f]=l,this.data[f+1]=a,this.data[f+2]=o,this.data[f+3]=u}this.pos+=t}},Gi.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),r=parseInt("111111",2),n=this.height-1;n>=0;n--){for(var s=this.bottom_up?n:this.height-1-n,i=0;i<this.width;i++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&r)/r*255|0,u=(o>>11)/e*255|0,f=s*this.width*4+4*i;this.data[f]=u,this.data[f+1]=l,this.data[f+2]=a,this.data[f+3]=255}this.pos+=t}},Gi.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*r;this.data[o]=i,this.data[o+1]=s,this.data[o+2]=n,this.data[o+3]=255}this.pos+=this.width%4}},Gi.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var n=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*r;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=n,this.data[a+3]=o}},Gi.prototype.getData=function(){return this.data},function(t){t.processBMP=function(e,r,n,s){var i=new Gi(e,!1),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},u=new D1(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(rt.API),RN.prototype.getData=function(){return this.data},function(t){t.processWEBP=function(e,r,n,s){var i=new RN(e),o=i.width,a=i.height,l={data:i.getData(),width:o,height:a},u=new D1(100).encode(l,100);return t.processJPEG.call(this,u,r,n,s)}}(rt.API),rt.API.processRGBA=function(t,e,r){for(var n=t.data,s=n.length,i=new Uint8Array(s/4*3),o=new Uint8Array(s/4),a=0,l=0,u=0;u<s;u+=4){var f=n[u],g=n[u+1],y=n[u+2],m=n[u+3];i[a++]=f,i[a++]=g,i[a++]=y,o[l++]=m}var E=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:E,index:e,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},rt.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},lu=rt.API,Op=lu.getCharWidthsArray=function(t,e){var r,n,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),o=e.charSpace||this.internal.getCharSpace(),a=e.widths?e.widths:s.metadata.Unicode.widths,l=a.fof?a.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,f=u.fof?u.fof:1,g=e.doKerning!==!1,y=0,m=t.length,E=0,b=a[0]||l,A=[];for(r=0;r<m;r++)n=t.charCodeAt(r),typeof s.metadata.widthOfString=="function"?A.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(n))+o*(1e3/i)||0)/1e3):(y=g&&ar(u[n])==="object"&&!isNaN(parseInt(u[n][E],10))?u[n][E]/f:0,A.push((a[n]||b)/l+y)),E=n;return A},EN=lu.getStringUnitWidth=function(t,e){var r=(e=e||{}).fontSize||this.internal.getFontSize(),n=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return lu.processArabic&&(t=lu.processArabic(t)),typeof n.metadata.widthOfString=="function"?n.metadata.widthOfString(t,r,s)/r:Op.apply(this,arguments).reduce(function(i,o){return i+o},0)},AN=function(t,e,r,n){for(var s=[],i=0,o=t.length,a=0;i!==o&&a+e[i]<r;)a+=e[i],i++;s.push(t.slice(0,i));var l=i;for(a=0;i!==o;)a+e[i]>n&&(s.push(t.slice(l,i)),a=0,l=i),a+=e[i],i++;return l!==i&&s.push(t.slice(l,i)),s},SN=function(t,e,r){r||(r={});var n,s,i,o,a,l,u,f=[],g=[f],y=r.textIndent||0,m=0,E=0,b=t.split(" "),A=Op.apply(this,[" ",r])[0];if(l=r.lineIndent===-1?b[0].length+2:r.lineIndent||0){var x=Array(l).join(" "),T=[];b.map(function(k){(k=k.split(/\s*\n/)).length>1?T=T.concat(k.map(function(H,Z){return(Z&&H.length?`
`:"")+H})):T.push(k[0])}),b=T,l=EN.apply(this,[x,r])}for(i=0,o=b.length;i<o;i++){var I=0;if(n=b[i],l&&n[0]==`
`&&(n=n.substr(1),I=1),y+m+(E=(s=Op.apply(this,[n,r])).reduce(function(k,H){return k+H},0))>e||I){if(E>e){for(a=AN.apply(this,[n,s,e-(y+m),e]),f.push(a.shift()),f=[a.pop()];a.length;)g.push([a.shift()]);E=s.slice(n.length-(f[0]?f[0].length:0)).reduce(function(k,H){return k+H},0)}else f=[n];g.push(f),y=E+l,m=A}else f.push(n),y+=m+E,m=A}return u=l?function(k,H){return(H?x:"")+k.join(" ")}:function(k){return k.join(" ")},g.map(u)},lu.splitTextToSize=function(t,e,r){var n,s=(r=r||{}).fontSize||this.internal.getFontSize(),i=(function(f){if(f.widths&&f.kerning)return{widths:f.widths,kerning:f.kerning};var g=this.internal.getFont(f.fontName,f.fontStyle),y="Unicode";return g.metadata[y]?{widths:g.metadata[y].widths||{0:1},kerning:g.metadata[y].kerning||{}}:{font:g.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);n=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/s;i.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=r.lineIndent;var a,l,u=[];for(a=0,l=n.length;a<l;a++)u=u.concat(SN.apply(this,[n[a],o,i]));return u},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",r="klmnopqrstuvwxyz",n={},s={},i=0;i<16;i++)n[r[i]]=e[i],s[e[i]]=r[i];var o=function(y){return"0x"+parseInt(y,10).toString(16)},a=t.__fontmetrics__.compress=function(y){var m,E,b,A,x=["{"];for(var T in y){if(m=y[T],isNaN(parseInt(T,10))?E="'"+T+"'":(T=parseInt(T,10),E=(E=o(T).slice(2)).slice(0,-1)+s[E.slice(-1)]),typeof m=="number")m<0?(b=o(m).slice(3),A="-"):(b=o(m).slice(2),A=""),b=A+b.slice(0,-1)+s[b.slice(-1)];else{if(ar(m)!=="object")throw new Error("Don't know what to do with value type "+ar(m)+".");b=a(m)}x.push(E+b)}return x.push("}"),x.join("")},l=t.__fontmetrics__.uncompress=function(y){if(typeof y!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,E,b,A,x={},T=1,I=x,k=[],H="",Z="",F=y.length-1,P=1;P<F;P+=1)(A=y[P])=="'"?m?(b=m.join(""),m=void 0):m=[]:m?m.push(A):A=="{"?(k.push([I,b]),I={},b=void 0):A=="}"?((E=k.pop())[0][E[1]]=I,b=void 0,I=E[0]):A=="-"?T=-1:b===void 0?n.hasOwnProperty(A)?(H+=n[A],b=parseInt(H,16)*T,T=1,H=""):H+=A:n.hasOwnProperty(A)?(Z+=n[A],I[b]=parseInt(Z,16)*T,T=1,b=void 0,Z=""):Z+=A;return x},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},f={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(y){var m=y.font,E=g.Unicode[m.postScriptName];E&&(m.metadata.Unicode={},m.metadata.Unicode.widths=E.widths,m.metadata.Unicode.kerning=E.kerning);var b=f.Unicode[m.postScriptName];b&&(m.metadata.Unicode.encoding=b,m.encoding=b.codePages[0])}])}(rt.API),function(t){var e=function(r){for(var n=r.length,s=new Uint8Array(n),i=0;i<n;i++)s[i]=r.charCodeAt(i);return s};t.API.events.push(["addFont",function(r){var n=void 0,s=r.font,i=r.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(n=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(o,a){a=/^\x00\x01\x00\x00/.test(a)?e(a):e(am(a)),o.metadata=t.API.TTFFont.open(a),o.metadata.Unicode=o.metadata.Unicode||{encoding:{},kerning:{},widths:[]},o.metadata.glyIdsUsed=[0]})(s,n)}}])}(rt),rt.API.addSvgAsImage=function(t,e,r,n,s,i,o,a){if(isNaN(e)||isNaN(r))throw mr.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(n)||isNaN(s))throw mr.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var l=document.createElement("canvas");l.width=n,l.height=s;var u=l.getContext("2d");u.fillStyle="#fff",u.fillRect(0,0,l.width,l.height);var f={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},g=this;return(yt.canvg?Promise.resolve(yt.canvg):An(()=>import("./index.es-7FuPUNTD.js"),[])).catch(function(y){return Promise.reject(new Error("Could not load canvg: "+y))}).then(function(y){return y.default?y.default:y}).then(function(y){return y.fromString(u,t,f)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(f)}).then(function(){g.addImage(l.toDataURL("image/jpeg",1),e,r,n,s,o,a)})},rt.API.putTotalPages=function(t){var e,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),r=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var n=1;n<=this.internal.getNumberOfPages();n++)for(var s=0;s<this.internal.pages[n].length;s++)this.internal.pages[n][s]=this.internal.pages[n][s].replace(e,r);return this},rt.API.viewerPreferences=function(t,e){var r;t=t||{},e=e||!1;var n,s,i,o={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},a=Object.keys(o),l=[],u=0,f=0,g=0;function y(E,b){var A,x=!1;for(A=0;A<E.length;A+=1)E[A]===b&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(o)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var m=a.length;for(g=0;g<m;g+=1)r[a[g]].value=r[a[g]].defaultValue,r[a[g]].explicitSet=!1}if(ar(t)==="object"){for(s in t)if(i=t[s],y(a,s)&&i!==void 0){if(r[s].type==="boolean"&&typeof i=="boolean")r[s].value=i;else if(r[s].type==="name"&&y(r[s].valueSet,i))r[s].value=i;else if(r[s].type==="integer"&&Number.isInteger(i))r[s].value=i;else if(r[s].type==="array"){for(u=0;u<i.length;u+=1)if(n=!0,i[u].length===1&&typeof i[u][0]=="number")l.push(String(i[u]-1));else if(i[u].length>1){for(f=0;f<i[u].length;f+=1)typeof i[u][f]!="number"&&(n=!1);n===!0&&l.push([i[u][0]-1,i[u][1]-1].join(" "))}r[s].value="["+l.join(" ")+"]"}else r[s].value=r[s].defaultValue;r[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var E,b=[];for(E in r)r[E].explicitSet===!0&&(r[E].type==="name"?b.push("/"+E+" /"+r[E].value):b.push("/"+E+" "+r[E].value));b.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+b.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},function(t){var e=function(){var n='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(n)),o=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),a=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),l=unescape(encodeURIComponent("</x:xmpmeta>")),u=i.length+o.length+a.length+s.length+l.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+u+" >>"),this.internal.write("stream"),this.internal.write(s+i+o+a+l),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(n,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:n,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",e)),this}}(rt.API),function(t){var e=t.API,r=e.pdfEscape16=function(i,o){for(var a,l=o.metadata.Unicode.widths,u=["","0","00","000","0000"],f=[""],g=0,y=i.length;g<y;++g){if(a=o.metadata.characterToGlyph(i.charCodeAt(g)),o.metadata.glyIdsUsed.push(a),o.metadata.toUnicode[a]=i.charCodeAt(g),l.indexOf(a)==-1&&(l.push(a),l.push([parseInt(o.metadata.widthOfGlyph(a),10)])),a=="0")return f.join("");a=a.toString(16),f.push(u[4-a.length],a)}return f.join("")},n=function(i){var o,a,l,u,f,g,y;for(f=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,l=[],g=0,y=(a=Object.keys(i).sort(function(m,E){return m-E})).length;g<y;g++)o=a[g],l.length>=100&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar`,l=[]),i[o]!==void 0&&i[o]!==null&&typeof i[o].toString=="function"&&(u=("0000"+i[o].toString(16)).slice(-4),o=("0000"+(+o).toString(16)).slice(-4),l.push("<"+o+"><"+u+">"));return l.length&&(f+=`
`+l.length+` beginbfchar
`+l.join(`
`)+`
endbfchar
`),f+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="Identity-H"){for(var g=a.metadata.Unicode.widths,y=a.metadata.subset.encode(a.metadata.glyIdsUsed,1),m="",E=0;E<y.length;E++)m+=String.fromCharCode(y[E]);var b=u();f({data:m,addLength1:!0,objectId:b}),l("endobj");var A=u();f({data:n(a.metadata.toUnicode),addLength1:!0,objectId:A}),l("endobj");var x=u();l("<<"),l("/Type /FontDescriptor"),l("/FontName /"+gu(a.fontName)),l("/FontFile2 "+b+" 0 R"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/Flags "+a.metadata.flags),l("/StemV "+a.metadata.stemV),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l(">>"),l("endobj");var T=u();l("<<"),l("/Type /Font"),l("/BaseFont /"+gu(a.fontName)),l("/FontDescriptor "+x+" 0 R"),l("/W "+t.API.PDFObject.convert(g)),l("/CIDToGIDMap /Identity"),l("/DW 1000"),l("/Subtype /CIDFontType2"),l("/CIDSystemInfo"),l("<<"),l("/Supplement 0"),l("/Registry (Adobe)"),l("/Ordering ("+a.encoding+")"),l(">>"),l(">>"),l("endobj"),a.objectNumber=u(),l("<<"),l("/Type /Font"),l("/Subtype /Type0"),l("/ToUnicode "+A+" 0 R"),l("/BaseFont /"+gu(a.fontName)),l("/Encoding /"+a.encoding),l("/DescendantFonts ["+T+" 0 R]"),l(">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(o){var a=o.font,l=o.out,u=o.newObject,f=o.putStream;if(a.metadata instanceof t.API.TTFFont&&a.encoding==="WinAnsiEncoding"){for(var g=a.metadata.rawData,y="",m=0;m<g.length;m++)y+=String.fromCharCode(g[m]);var E=u();f({data:y,addLength1:!0,objectId:E}),l("endobj");var b=u();f({data:n(a.metadata.toUnicode),addLength1:!0,objectId:b}),l("endobj");var A=u();l("<<"),l("/Descent "+a.metadata.decender),l("/CapHeight "+a.metadata.capHeight),l("/StemV "+a.metadata.stemV),l("/Type /FontDescriptor"),l("/FontFile2 "+E+" 0 R"),l("/Flags 96"),l("/FontBBox "+t.API.PDFObject.convert(a.metadata.bbox)),l("/FontName /"+gu(a.fontName)),l("/ItalicAngle "+a.metadata.italicAngle),l("/Ascent "+a.metadata.ascender),l(">>"),l("endobj"),a.objectNumber=u();for(var x=0;x<a.metadata.hmtx.widths.length;x++)a.metadata.hmtx.widths[x]=parseInt(a.metadata.hmtx.widths[x]*(1e3/a.metadata.head.unitsPerEm));l("<</Subtype/TrueType/Type/Font/ToUnicode "+b+" 0 R/BaseFont/"+gu(a.fontName)+"/FontDescriptor "+A+" 0 R/Encoding/"+a.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(a.metadata.hmtx.widths)+">>"),l("endobj"),a.isAlreadyPutted=!0}})(i)}]);var s=function(i){var o,a=i.text||"",l=i.x,u=i.y,f=i.options||{},g=i.mutex||{},y=g.pdfEscape,m=g.activeFontKey,E=g.fonts,b=m,A="",x=0,T="",I=E[b].encoding;if(E[b].encoding!=="Identity-H")return{text:a,x:l,y:u,options:f,mutex:g};for(T=a,b=m,Array.isArray(a)&&(T=a[0]),x=0;x<T.length;x+=1)E[b].metadata.hasOwnProperty("cmap")&&(o=E[b].metadata.cmap.unicode.codeMap[T[x].charCodeAt(0)]),o||T[x].charCodeAt(0)<256&&E[b].metadata.hasOwnProperty("Unicode")?A+=T[x]:A+="";var k="";return parseInt(b.slice(1))<14||I==="WinAnsiEncoding"?k=y(A,b).split("").map(function(H){return H.charCodeAt(0).toString(16)}).join(""):I==="Identity-H"&&(k=r(A,E[b])),g.isHex=!0,{text:k,x:l,y:u,options:f,mutex:g}};e.events.push(["postProcessText",function(i){var o=i.text||"",a=[],l={text:o,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(o)){var u=0;for(u=0;u<o.length;u+=1)Array.isArray(o[u])&&o[u].length===3?a.push([s(Object.assign({},l,{text:o[u][0]})).text,o[u][1],o[u][2]]):a.push(s(Object.assign({},l,{text:o[u]})).text);i.text=a}else i.text=s(Object.assign({},l,{text:o})).text}])}(rt),function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0},t.addFileToVFS=function(r,n){return e.call(this),this.internal.vFS[r]=n,this},t.getFileFromVFS=function(r){return e.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}}(rt.API),function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(n){var s,i,o,a,l,u,f,g=e,y=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],E={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},b={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},A=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),T=!1,I=0;this.__bidiEngine__={};var k=function(N){var R=N.charCodeAt(),L=R>>8,X=b[L];return X!==void 0?g[256*X+(255&R)]:L===252||L===253?"AL":x.test(L)?"L":L===8?"R":"N"},H=function(N){for(var R,L=0;L<N.length;L++){if((R=k(N.charAt(L)))==="L")return!1;if(R==="R")return!0}return!1},Z=function(N,R,L,X){var fe,le,ye,ee,ue=R[X];switch(ue){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":T=!1;break;case"N":case"AN":break;case"EN":T&&(ue="AN");break;case"AL":T=!0,ue="R";break;case"WS":case"BN":ue="N";break;case"CS":X<1||X+1>=R.length||(fe=L[X-1])!=="EN"&&fe!=="AN"||(le=R[X+1])!=="EN"&&le!=="AN"?ue="N":T&&(le="AN"),ue=le===fe?le:"N";break;case"ES":ue=(fe=X>0?L[X-1]:"B")==="EN"&&X+1<R.length&&R[X+1]==="EN"?"EN":"N";break;case"ET":if(X>0&&L[X-1]==="EN"){ue="EN";break}if(T){ue="N";break}for(ye=X+1,ee=R.length;ye<ee&&R[ye]==="ET";)ye++;ue=ye<ee&&R[ye]==="EN"?"EN":"N";break;case"NSM":if(o&&!a){for(ee=R.length,ye=X+1;ye<ee&&R[ye]==="NSM";)ye++;if(ye<ee){var _e=N[X],we=_e>=1425&&_e<=2303||_e===64286;if(fe=R[ye],we&&(fe==="R"||fe==="AL")){ue="R";break}}}ue=X<1||(fe=R[X-1])==="B"?"N":L[X-1];break;case"B":T=!1,s=!0,ue=I;break;case"S":i=!0,ue="N"}return ue},F=function(N,R,L){var X=N.split("");return L&&P(X,L,{hiLevel:I}),X.reverse(),R&&R.reverse(),X.join("")},P=function(N,R,L){var X,fe,le,ye,ee,ue=-1,_e=N.length,we=0,U=[],G=I?m:y,J=[];for(T=!1,s=!1,i=!1,fe=0;fe<_e;fe++)J[fe]=k(N[fe]);for(le=0;le<_e;le++){if(ee=we,U[le]=Z(N,J,U,le),X=240&(we=G[ee][E[U[le]]]),we&=15,R[le]=ye=G[we][5],X>0)if(X===16){for(fe=ue;fe<le;fe++)R[fe]=1;ue=-1}else ue=-1;if(G[we][6])ue===-1&&(ue=le);else if(ue>-1){for(fe=ue;fe<le;fe++)R[fe]=ye;ue=-1}J[le]==="B"&&(R[le]=0),L.hiLevel|=ye}i&&function(re,ie,he){for(var ve=0;ve<he;ve++)if(re[ve]==="S"){ie[ve]=I;for(var xe=ve-1;xe>=0&&re[xe]==="WS";xe--)ie[xe]=I}}(J,R,_e)},C=function(N,R,L,X,fe){if(!(fe.hiLevel<N)){if(N===1&&I===1&&!s)return R.reverse(),void(L&&L.reverse());for(var le,ye,ee,ue,_e=R.length,we=0;we<_e;){if(X[we]>=N){for(ee=we+1;ee<_e&&X[ee]>=N;)ee++;for(ue=we,ye=ee-1;ue<ye;ue++,ye--)le=R[ue],R[ue]=R[ye],R[ye]=le,L&&(le=L[ue],L[ue]=L[ye],L[ye]=le);we=ee}we++}}},O=function(N,R,L){var X=N.split(""),fe={hiLevel:I};return L||(L=[]),P(X,L,fe),function(le,ye,ee){if(ee.hiLevel!==0&&f)for(var ue,_e=0;_e<le.length;_e++)ye[_e]===1&&(ue=A.indexOf(le[_e]))>=0&&(le[_e]=A[ue+1])}(X,L,fe),C(2,X,R,L,fe),C(1,X,R,L,fe),X.join("")};return this.__bidiEngine__.doBidiReorder=function(N,R,L){if(function(fe,le){if(le)for(var ye=0;ye<fe.length;ye++)le[ye]=ye;a===void 0&&(a=H(fe)),u===void 0&&(u=H(fe))}(N,R),o||!l||u)if(o&&l&&a^u)I=a?1:0,N=F(N,R,L);else if(!o&&l&&u)I=a?1:0,N=O(N,R,L),N=F(N,R);else if(!o||a||l||u){if(o&&!l&&a^u)N=F(N,R),a?(I=0,N=O(N,R,L)):(I=1,N=O(N,R,L),N=F(N,R));else if(o&&a&&!l&&u)I=1,N=O(N,R,L),N=F(N,R);else if(!o&&!l&&a^u){var X=f;a?(I=1,N=O(N,R,L),I=0,f=!1,N=O(N,R,L),f=X):(I=0,N=O(N,R,L),N=F(N,R),I=1,f=!1,N=O(N,R,L),f=X,N=F(N,R))}}else I=0,N=O(N,R,L);else I=a?1:0,N=O(N,R,L);return N},this.__bidiEngine__.setOptions=function(N){N&&(o=N.isInputVisual,l=N.isOutputVisual,a=N.isInputRtl,u=N.isOutputRtl,f=N.isSymmetricSwapping)},this.__bidiEngine__.setOptions(n),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(n){var s=n.text;n.x,n.y;var i=n.options||{};n.mutex,i.lang;var o=[];if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,r.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var a=0;for(o=[],a=0;a<s.length;a+=1)Object.prototype.toString.call(s[a])==="[object Array]"?o.push([r.doBidiReorder(s[a][0]),s[a][1],s[a][2]]):o.push([r.doBidiReorder(s[a])]);n.text=o}else n.text=r.doBidiReorder(s);r.setOptions({isInputVisual:!0})}])}(rt),rt.API.TTFFont=function(){function t(e){var r;if(this.rawData=e,r=this.contents=new Ml(e),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new QB(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new OB(this.contents),this.head=new MB(this),this.name=new zB(this),this.cmap=new aT(this),this.toUnicode={},this.hhea=new FB(this),this.maxp=new qB(this),this.hmtx=new $B(this),this.post=new VB(this),this.os2=new UB(this),this.loca=new KB(this),this.glyf=new HB(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,r,n,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var o,a,l,u;for(u=[],o=0,a=(l=this.bbox).length;o<a;o++)e=l[o],u.push(Math.round(e*this.scaleFactor));return u}).call(this),this.stemV=0,this.post.exists?(n=255&(s=this.post.italic_angle),32768&(r=s>>16)&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var r;return((r=this.cmap.unicode)!=null?r.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*r},t.prototype.widthOfString=function(e,r,n){var s,i,o,a;for(o=0,i=0,a=(e=""+e).length;0<=a?i<a:i>a;i=0<=a?++i:--i)s=e.charCodeAt(i),o+=this.widthOfGlyph(this.characterToGlyph(s))+n*(1e3/r)||0;return o*(r/1e3)},t.prototype.lineHeight=function(e,r){var n;return r==null&&(r=!1),n=r?this.lineGap:0,(this.ascender+n-this.decender)/1e3*e},t}();var uo,Ml=function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var r,n;for(n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n[r]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(e){var r,n,s;for(s=[],r=0,n=e.length;0<=n?r<n:r>n;r=0<=n?++r:--r)s.push(this.writeByte(e.charCodeAt(r)));return s},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,r,n,s,i,o,a,l;return e=this.readByte(),r=this.readByte(),n=this.readByte(),s=this.readByte(),i=this.readByte(),o=this.readByte(),a=this.readByte(),l=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^r)+1099511627776*(255^n)+4294967296*(255^s)+16777216*(255^i)+65536*(255^o)+256*(255^a)+(255^l)+1):72057594037927940*e+281474976710656*r+1099511627776*n+4294967296*s+16777216*i+65536*o+256*a+l},t.prototype.writeLongLong=function(e){var r,n;return r=Math.floor(e/4294967296),n=4294967295&e,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var r,n;for(r=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)r.push(this.readByte());return r},t.prototype.write=function(e){var r,n,s,i;for(i=[],n=0,s=e.length;n<s;n++)r=e[n],i.push(this.writeByte(r));return i},t}(),OB=function(){var t;function e(r){var n,s,i;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)n={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[n.tag]=n}return e.prototype.encode=function(r){var n,s,i,o,a,l,u,f,g,y,m,E,b;for(b in m=Object.keys(r).length,l=Math.log(2),g=16*Math.floor(Math.log(m)/l),o=Math.floor(g/l),f=16*m-g,(s=new Ml).writeInt(this.scalarType),s.writeShort(m),s.writeShort(g),s.writeShort(o),s.writeShort(f),i=16*m,u=s.pos+i,a=null,E=[],r)for(y=r[b],s.writeString(b),s.writeInt(t(y)),s.writeInt(u),s.writeInt(y.length),E=E.concat(y),b==="head"&&(a=u),u+=y.length;u%4;)E.push(0),u++;return s.write(E),n=2981146554-t(s.data),s.pos=a+8,s.writeUInt32(n),s.data},t=function(r){var n,s,i,o;for(r=lT.call(r);r.length%4;)r.push(0);for(i=new Ml(r),s=0,n=0,o=r.length;n<o;n=n+=4)s+=i.readUInt32();return 4294967295&s},e}(),DB={}.hasOwnProperty,Bo=function(t,e){for(var r in e)DB.call(e,r)&&(t[r]=e[r]);function n(){this.constructor=t}return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t};uo=function(){function t(e){var r;this.file=e,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var MB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var r;return(r=new Ml).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(e),r.writeShort(this.glyphDataFormat),r.data},t}(),ON=function(){function t(e,r){var n,s,i,o,a,l,u,f,g,y,m,E,b,A,x,T,I;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=r+e.readInt(),g=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(l=0;l<256;++l)this.codeMap[l]=e.readByte();break;case 4:for(m=e.readUInt16(),y=m/2,e.pos+=6,i=function(){var k,H;for(H=[],l=k=0;0<=y?k<y:k>y;l=0<=y?++k:--k)H.push(e.readUInt16());return H}(),e.pos+=2,b=function(){var k,H;for(H=[],l=k=0;0<=y?k<y:k>y;l=0<=y?++k:--k)H.push(e.readUInt16());return H}(),u=function(){var k,H;for(H=[],l=k=0;0<=y?k<y:k>y;l=0<=y?++k:--k)H.push(e.readUInt16());return H}(),f=function(){var k,H;for(H=[],l=k=0;0<=y?k<y:k>y;l=0<=y?++k:--k)H.push(e.readUInt16());return H}(),s=(this.length-e.pos+this.offset)/2,a=function(){var k,H;for(H=[],l=k=0;0<=s?k<s:k>s;l=0<=s?++k:--k)H.push(e.readUInt16());return H}(),l=x=0,I=i.length;x<I;l=++x)for(A=i[l],n=T=E=b[l];E<=A?T<=A:T>=A;n=E<=A?++T:--T)f[l]===0?o=n+u[l]:(o=a[f[l]/2+(n-E)-(y-l)]||0)!==0&&(o+=u[l]),this.codeMap[n]=65535&o}e.pos=g}return t.encode=function(e,r){var n,s,i,o,a,l,u,f,g,y,m,E,b,A,x,T,I,k,H,Z,F,P,C,O,N,R,L,X,fe,le,ye,ee,ue,_e,we,U,G,J,re,ie,he,ve,xe,Ae,je,Ve;switch(X=new Ml,o=Object.keys(e).sort(function(Fe,Je){return Fe-Je}),r){case"macroman":for(b=0,A=function(){var Fe=[];for(E=0;E<256;++E)Fe.push(0);return Fe}(),T={0:0},i={},fe=0,ue=o.length;fe<ue;fe++)T[xe=e[s=o[fe]]]==null&&(T[xe]=++b),i[s]={old:e[s],new:T[e[s]]},A[s]=T[e[s]];return X.writeUInt16(1),X.writeUInt16(0),X.writeUInt32(12),X.writeUInt16(0),X.writeUInt16(262),X.writeUInt16(0),X.write(A),{charMap:i,subtable:X.data,maxGlyphID:b+1};case"unicode":for(R=[],g=[],I=0,T={},n={},x=u=null,le=0,_e=o.length;le<_e;le++)T[H=e[s=o[le]]]==null&&(T[H]=++I),n[s]={old:H,new:T[H]},a=T[H]-s,x!=null&&a===u||(x&&g.push(x),R.push(s),u=a),x=s;for(x&&g.push(x),g.push(65535),R.push(65535),O=2*(C=R.length),P=2*Math.pow(Math.log(C)/Math.LN2,2),y=Math.log(P/2)/Math.LN2,F=2*C-P,l=[],Z=[],m=[],E=ye=0,we=R.length;ye<we;E=++ye){if(N=R[E],f=g[E],N===65535){l.push(0),Z.push(0);break}if(N-(L=n[N].new)>=32768)for(l.push(0),Z.push(2*(m.length+C-E)),s=ee=N;N<=f?ee<=f:ee>=f;s=N<=f?++ee:--ee)m.push(n[s].new);else l.push(L-N),Z.push(0)}for(X.writeUInt16(3),X.writeUInt16(1),X.writeUInt32(12),X.writeUInt16(4),X.writeUInt16(16+8*C+2*m.length),X.writeUInt16(0),X.writeUInt16(O),X.writeUInt16(P),X.writeUInt16(y),X.writeUInt16(F),he=0,U=g.length;he<U;he++)s=g[he],X.writeUInt16(s);for(X.writeUInt16(0),ve=0,G=R.length;ve<G;ve++)s=R[ve],X.writeUInt16(s);for(Ae=0,J=l.length;Ae<J;Ae++)a=l[Ae],X.writeUInt16(a);for(je=0,re=Z.length;je<re;je++)k=Z[je],X.writeUInt16(k);for(Ve=0,ie=m.length;Ve<ie;Ve++)b=m[Ve],X.writeUInt16(b);return{charMap:n,subtable:X.data,maxGlyphID:I+1}}},t}(),aT=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="cmap",t.prototype.parse=function(e){var r,n,s;for(e.pos=this.offset,this.version=e.readUInt16(),s=e.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=s?n<s:n>s;n=0<=s?++n:--n)r=new ON(e,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(e,r){var n,s;return r==null&&(r="macroman"),n=ON.encode(e,r),(s=new Ml).writeUInt16(0),s.writeUInt16(1),n.table=s.data.concat(n.subtable),n},t}(),FB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t}(),UB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=function(){var r,n;for(n=[],r=0;r<10;++r)n.push(e.readByte());return n}(),this.charRange=function(){var r,n;for(n=[],r=0;r<4;++r)n.push(e.readInt());return n}(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=function(){var r,n;for(n=[],r=0;r<2;r=++r)n.push(e.readInt());return n}(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t}(),VB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="post",t.prototype.parse=function(e){var r,n,s;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var i;for(n=e.readUInt16(),this.glyphNameIndex=[],i=0;0<=n?i<n:i>n;i=0<=n?++i:--i)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],s=[];e.pos<this.offset+this.length;)r=e.readByte(),s.push(this.names.push(e.readString(r)));return s;case 151552:return n=e.readUInt16(),this.offsets=e.read(n);case 262144:return this.map=(function(){var o,a,l;for(l=[],i=o=0,a=this.file.maxp.numGlyphs;0<=a?o<a:o>a;i=0<=a?++o:--o)l.push(e.readUInt32());return l}).call(this)}},t}(),BB=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},zB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="name",t.prototype.parse=function(e){var r,n,s,i,o,a,l,u,f,g,y;for(e.pos=this.offset,e.readShort(),r=e.readShort(),a=e.readShort(),n=[],i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+a+e.readShort()});for(l={},i=f=0,g=n.length;f<g;i=++f)s=n[i],e.pos=s.offset,u=e.readString(s.length),o=new BB(u,s),l[y=s.nameID]==null&&(l[y]=[]),l[s.nameID].push(o);this.strings=l,this.copyright=l[0],this.fontFamily=l[1],this.fontSubfamily=l[2],this.uniqueSubfamily=l[3],this.fontName=l[4],this.version=l[5];try{this.postscriptName=l[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=l[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=l[7],this.manufacturer=l[8],this.designer=l[9],this.description=l[10],this.vendorUrl=l[11],this.designerUrl=l[12],this.license=l[13],this.licenseUrl=l[14],this.preferredFamily=l[15],this.preferredSubfamily=l[17],this.compatibleFull=l[18],this.sampleText=l[19]},t}(),qB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t}(),$B=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="hmtx",t.prototype.parse=function(e){var r,n,s,i,o,a,l;for(e.pos=this.offset,this.metrics=[],r=0,a=this.file.hhea.numberOfMetrics;0<=a?r<a:r>a;r=0<=a?++r:--r)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(s=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var u,f;for(f=[],r=u=0;0<=s?u<s:u>s;r=0<=s?++u:--u)f.push(e.readInt16());return f}(),this.widths=(function(){var u,f,g,y;for(y=[],u=0,f=(g=this.metrics).length;u<f;u++)i=g[u],y.push(i.advance);return y}).call(this),n=this.widths[this.widths.length-1],l=[],r=o=0;0<=s?o<s:o>s;r=0<=s?++o:--o)l.push(this.widths.push(n));return l},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t}(),lT=[].slice,HB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var r,n,s,i,o,a,l,u,f,g;return e in this.cache?this.cache[e]:(i=this.file.loca,r=this.file.contents,n=i.indexOf(e),(s=i.lengthOf(e))===0?this.cache[e]=null:(r.pos=this.offset+n,o=(a=new Ml(r.read(s))).readShort(),u=a.readShort(),g=a.readShort(),l=a.readShort(),f=a.readShort(),this.cache[e]=o===-1?new GB(a,u,g,l,f):new WB(a,o,u,g,l,f),this.cache[e]))},t.prototype.encode=function(e,r,n){var s,i,o,a,l;for(o=[],i=[],a=0,l=r.length;a<l;a++)s=e[r[a]],i.push(o.length),s&&(o=o.concat(s.encode(n)));return i.push(o.length),{table:o,offsets:i}},t}(),WB=function(){function t(e,r,n,s,i,o){this.raw=e,this.numberOfContours=r,this.xMin=n,this.yMin=s,this.xMax=i,this.yMax=o,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),GB=function(){function t(e,r,n,s,i){var o,a;for(this.raw=e,this.xMin=r,this.yMin=n,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],o=this.raw;a=o.readShort(),this.glyphOffsets.push(o.pos),this.glyphIDs.push(o.readUInt16()),32&a;)o.pos+=1&a?4:2,128&a?o.pos+=8:64&a?o.pos+=4:8&a&&(o.pos+=2)}return t.prototype.encode=function(){var e,r,n;for(r=new Ml(lT.call(this.raw.data)),e=0,n=this.glyphIDs.length;e<n;++e)r.pos=this.glyphOffsets[e];return r.data},t}(),KB=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Bo(t,uo),t.prototype.tag="loca",t.prototype.parse=function(e){var r,n;return e.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=2)i.push(2*e.readUInt16());return i}).call(this):(function(){var s,i;for(i=[],n=0,s=this.length;n<s;n+=4)i.push(e.readUInt32());return i}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,r){for(var n=new Uint32Array(this.offsets.length),s=0,i=0,o=0;o<n.length;++o)if(n[o]=s,i<r.length&&r[i]==o){++i,n[o]=s;var a=this.offsets[o],l=this.offsets[o+1]-a;l>0&&(s+=l)}for(var u=new Array(4*n.length),f=0;f<n.length;++f)u[4*f+3]=255&n[f],u[4*f+2]=(65280&n[f])>>8,u[4*f+1]=(16711680&n[f])>>16,u[4*f]=(4278190080&n[f])>>24;return u},t}(),QB=function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,r,n,s,i;for(r in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)n=i[r],e[r]=s[n];return e},t.prototype.glyphsFor=function(e){var r,n,s,i,o,a,l;for(s={},o=0,a=e.length;o<a;o++)s[i=e[o]]=this.font.glyf.glyphFor(i);for(i in r=[],s)(n=s[i])!=null&&n.compound&&r.push.apply(r,n.glyphIDs);if(r.length>0)for(i in l=this.glyphsFor(r))n=l[i],s[i]=n;return s},t.prototype.encode=function(e,r){var n,s,i,o,a,l,u,f,g,y,m,E,b,A,x;for(s in n=aT.encode(this.generateCmap(),"unicode"),o=this.glyphsFor(e),m={0:0},x=n.charMap)m[(l=x[s]).old]=l.new;for(E in y=n.maxGlyphID,o)E in m||(m[E]=y++);return f=function(T){var I,k;for(I in k={},T)k[T[I]]=I;return k}(m),g=Object.keys(f).sort(function(T,I){return T-I}),b=function(){var T,I,k;for(k=[],T=0,I=g.length;T<I;T++)a=g[T],k.push(f[a]);return k}(),i=this.font.glyf.encode(o,b,m),u=this.font.loca.encode(i.offsets,b),A={cmap:this.font.cmap.raw(),glyf:i.table,loca:u,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(A["OS/2"]=this.font.os2.raw()),this.font.directory.encode(A)},t}();rt.API.PDFObject=function(){var t;function e(){}return t=function(r,n){return(Array(n+1).join("0")+r).slice(-n)},e.convert=function(r){var n,s,i,o;if(Array.isArray(r))return"["+function(){var a,l,u;for(u=[],a=0,l=r.length;a<l;a++)n=r[a],u.push(e.convert(n));return u}().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+t(r.getUTCFullYear(),4)+t(r.getUTCMonth(),2)+t(r.getUTCDate(),2)+t(r.getUTCHours(),2)+t(r.getUTCMinutes(),2)+t(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(s in i=["<<"],r)o=r[s],i.push("/"+s+" "+e.convert(o));return i.push(">>"),i.join(`
`)}return""+r},e}();class YB{async checkCourseCompletion(e,r){try{const n=await Zi.getUserProgress(e,r);if(!n.success)return{success:!1,completed:!1};const{completedLessons:s=[],completedQuizzes:i=[],completedExercises:o=[]}=n.progress,a=(await An(async()=>{const{default:T}=await Promise.resolve().then(()=>HF);return{default:T}},void 0)).default,[l,u,f]=await Promise.all([a.getCourseById(r),Ol.getQuizzesByCourse(r),Dl.getExercisesByCourse(r)]);let g=0;l.success&&l.course.modules&&l.course.modules.forEach(T=>{T.lessons&&(g+=T.lessons.length)});const y=u.success?u.quizzes.length:0,m=f.success?f.exercises.length:0,E=g>0?s.length>=g:!0,b=y>0?i.length>=y:!0,A=m>0?o.length>=m:!0,x=E&&b&&A;return console.log(" Course completion check:",{lessonsComplete:`${s.length}/${g}`,quizzesComplete:`${i.length}/${y}`,exercisesComplete:`${o.length}/${m}`,isComplete:x}),{success:!0,completed:x,stats:{lessonsCompleted:s.length,totalLessons:g,quizzesCompleted:i.length,totalQuizzes:y,exercisesCompleted:o.length,totalExercises:m}}}catch(n){return console.error(" Error checking course completion:",n),{success:!1,error:n.message,completed:!1}}}async calculateAverageQuizScore(e,r){try{const n=await Zi.getUserProgress(e,r);if(!n.success||!n.progress.quizScores)return{success:!0,averageScore:0};const s=Object.values(n.progress.quizScores);if(s.length===0)return{success:!0,averageScore:0};const i=s.reduce((o,a)=>o+a,0)/s.length;return{success:!0,averageScore:Math.round(i),totalQuizzes:s.length}}catch(n){return console.error(" Error calculating average quiz score:",n),{success:!1,error:n.message}}}determineCertificateType(e){return e>=90?"excellence":e>=75?"mention":e>=60?"achievement":"participation"}getCertificateTypeLabel(e){const r={excellence:"d'Excellence",mention:"Avec Mention",achievement:"d'Achvement",participation:"de Participation"};return r[e]||r.participation}getCertificateColors(e){const r={excellence:{primary:[255,215,0],secondary:[255,235,100]},mention:{primary:[192,192,192],secondary:[220,220,220]},achievement:{primary:[74,144,226],secondary:[150,190,240]},participation:{primary:[34,197,94],secondary:[134,239,172]}};return r[e]||r.participation}async generateCertificatePDF(e){const{studentName:r,courseName:n,certificateType:s,averageScore:i,completionDate:o}=e,a=new rt({orientation:"landscape",unit:"mm",format:"a4"}),l=a.internal.pageSize.getWidth(),u=a.internal.pageSize.getHeight(),f=this.getCertificateColors(s),g=this.getCertificateTypeLabel(s);a.setLineWidth(3),a.setDrawColor(...f.primary),a.rect(10,10,l-20,u-20),a.setLineWidth(1),a.setDrawColor(...f.secondary),a.rect(15,15,l-30,u-30),a.setFontSize(40),a.setFont("helvetica","bold"),a.setTextColor(0,0,0),a.text("CERTIFICAT",l/2,40,{align:"center"}),a.setFontSize(28),a.setTextColor(...f.primary),a.text(g,l/2,55,{align:"center"}),a.setLineWidth(.5),a.setDrawColor(...f.primary),a.line(80,60,l-80,60),a.setFontSize(14),a.setTextColor(60,60,60),a.setFont("helvetica","normal"),a.text("Ce certificat est dcern ",l/2,75,{align:"center"}),a.setFontSize(32),a.setFont("times","bolditalic"),a.setTextColor(0,0,0),a.text(r,l/2,90,{align:"center"}),a.setFontSize(14),a.setFont("helvetica","normal"),a.setTextColor(60,60,60),a.text("Pour avoir complt avec succs le cours",l/2,105,{align:"center"}),a.setFontSize(22),a.setFont("helvetica","bold"),a.setTextColor(...f.primary),a.text(n,l/2,120,{align:"center"}),i>0&&(a.setFontSize(14),a.setFont("helvetica","normal"),a.setTextColor(60,60,60),a.text(`Score moyen: ${i}%`,l/2,135,{align:"center"})),a.setFontSize(12);const y=new Date(o).toLocaleDateString("fr-FR",{day:"numeric",month:"long",year:"numeric"});a.text(`Dlivr le ${y}`,l/2,150,{align:"center"});const m=l/3,E=l/3*2,b=u-40;return a.setLineWidth(.5),a.setDrawColor(100,100,100),a.line(m-30,b,m+30,b),a.line(E-30,b,E+30,b),a.setFontSize(10),a.setTextColor(80,80,80),a.text("Instructeur",m,b+7,{align:"center"}),a.text("Directeur",E,b+7,{align:"center"}),a.setFontSize(8),a.setTextColor(150,150,150),a.text("Plateforme ducative - www.e-learning.com",l/2,u-15,{align:"center"}),a}async saveCertificate(e,r,n){try{const s=Qt(mt,"certificates",`${e}_${r}`),i={userId:e,courseId:r,...n,generatedAt:dn.now()};return await Il(s,i),console.log(" Certificate saved:",s.id),{success:!0,certificateId:s.id}}catch(s){return console.error(" Error saving certificate:",s),{success:!1,error:s.message}}}async getCertificate(e,r){try{const n=Qt(mt,"certificates",`${e}_${r}`),s=await cs(n);return s.exists()?{success:!0,certificate:{id:s.id,...s.data()}}:{success:!0,certificate:null}}catch(n){return console.error(" Error getting certificate:",n),{success:!1,error:n.message}}}async getUserCertificates(e){try{const r=va(kn(mt,"certificates"),Es("userId","==",e),Tl("generatedAt","desc")),n=await Do(r),s=[];return n.forEach(i=>{s.push({id:i.id,...i.data()})}),{success:!0,certificates:s}}catch(r){return console.error(" Error getting user certificates:",r),{success:!1,error:r.message,certificates:[]}}}async generateAndDownload(e,r,n,s){try{const i=await this.getCertificate(e,r);if(i.success&&i.certificate)return(await this.generateCertificatePDF(i.certificate)).save(`Certificat_${n.replace(/\s+/g,"_")}.pdf`),{success:!0,existing:!0};if(!(await this.checkCourseCompletion(e,r)).completed)return{success:!1,error:"Vous devez complter le cours avant de recevoir le certificat"};const l=(await this.calculateAverageQuizScore(e,r)).averageScore||0,u=this.determineCertificateType(l),f={studentName:s,courseName:n,certificateType:u,averageScore:l,completionDate:new Date().toISOString()},g=await this.generateCertificatePDF(f);return await this.saveCertificate(e,r,f),g.save(`Certificat_${n.replace(/\s+/g,"_")}.pdf`),{success:!0,certificateType:u}}catch(i){return console.error(" Error generating certificate:",i),{success:!1,error:i.message}}}}const cT=new YB;var XB=function(e,r,n){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof r=="function"&&(n=r,r={}),r=r||{},n=n||function(){},i.type=r.type||"text/javascript",i.charset=r.charset||"utf8",i.async="async"in r?!!r.async:!0,i.src=e,r.attrs&&JB(i,r.attrs),r.text&&(i.text=""+r.text);var o="onload"in i?DN:ZB;o(i,n),i.onload||DN(i,n),s.appendChild(i)};function JB(t,e){for(var r in e)t.setAttribute(r,e[r])}function DN(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function ZB(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var ez=function(e){return tz(e)&&!rz(e)};function tz(t){return!!t&&typeof t=="object"}function rz(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||iz(t)}var nz=typeof Symbol=="function"&&Symbol.for,sz=nz?Symbol.for("react.element"):60103;function iz(t){return t.$$typeof===sz}function oz(t){return Array.isArray(t)?[]:{}}function gf(t,e){return e.clone!==!1&&e.isMergeableObject(t)?mh(oz(t),t,e):t}function az(t,e,r){return t.concat(e).map(function(n){return gf(n,r)})}function lz(t,e){if(!e.customMerge)return mh;var r=e.customMerge(t);return typeof r=="function"?r:mh}function cz(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function MN(t){return Object.keys(t).concat(cz(t))}function uT(t,e){try{return e in t}catch{return!1}}function uz(t,e){return uT(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function hz(t,e,r){var n={};return r.isMergeableObject(t)&&MN(t).forEach(function(s){n[s]=gf(t[s],r)}),MN(e).forEach(function(s){uz(t,s)||(uT(t,s)&&r.isMergeableObject(e[s])?n[s]=lz(s,r)(t[s],e[s],r):n[s]=gf(e[s],r))}),n}function mh(t,e,r){r=r||{},r.arrayMerge=r.arrayMerge||az,r.isMergeableObject=r.isMergeableObject||ez,r.cloneUnlessOtherwiseSpecified=gf;var n=Array.isArray(e),s=Array.isArray(t),i=n===s;return i?n?r.arrayMerge(t,e,r):hz(t,e,r):gf(e,r)}mh.all=function(e,r){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(n,s){return mh(n,s,r)},{})};var dz=mh,hT=dz,fz=Object.create,n0=Object.defineProperty,pz=Object.getOwnPropertyDescriptor,mz=Object.getOwnPropertyNames,gz=Object.getPrototypeOf,yz=Object.prototype.hasOwnProperty,vz=(t,e)=>{for(var r in e)n0(t,r,{get:e[r],enumerable:!0})},dT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mz(e))!yz.call(t,s)&&s!==r&&n0(t,s,{get:()=>e[s],enumerable:!(n=pz(e,s))||n.enumerable});return t},U5=(t,e,r)=>(r=t!=null?fz(gz(t)):{},dT(!t||!t.__esModule?n0(r,"default",{value:t,enumerable:!0}):r,t)),wz=t=>dT(n0({},"__esModule",{value:!0}),t),fT={};vz(fT,{callPlayer:()=>Oz,getConfig:()=>Lz,getSDK:()=>jz,isBlobUrl:()=>Mz,isMediaStream:()=>Dz,lazy:()=>Nz,omit:()=>Rz,parseEndTime:()=>kz,parseStartTime:()=>Iz,queryString:()=>Cz,randomString:()=>Pz,supportsWebKitPresentationMode:()=>Fz});var s0=wz(fT),xz=U5(ne),_z=U5(XB),bz=U5(hT);const Nz=t=>xz.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),Ez=/[?&#](?:start|t)=([0-9hms]+)/,Az=/[?&#]end=([0-9hms]+)/,b2=/(\d+)(h|m|s)/g,Sz=/^\d+$/;function pT(t,e){if(t instanceof Array)return;const r=t.match(e);if(r){const n=r[1];if(n.match(b2))return Tz(n);if(Sz.test(n))return parseInt(n)}}function Tz(t){let e=0,r=b2.exec(t);for(;r!==null;){const[,n,s]=r;s==="h"&&(e+=parseInt(n,10)*60*60),s==="m"&&(e+=parseInt(n,10)*60),s==="s"&&(e+=parseInt(n,10)),r=b2.exec(t)}return e}function Iz(t){return pT(t,Ez)}function kz(t){return pT(t,Az)}function Pz(){return Math.random().toString(36).substr(2,5)}function Cz(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function M1(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const cu={},jz=function(e,r,n=null,s=()=>!0,i=_z.default){const o=M1(r);return o&&s(o)?Promise.resolve(o):new Promise((a,l)=>{if(cu[e]){cu[e].push({resolve:a,reject:l});return}cu[e]=[{resolve:a,reject:l}];const u=f=>{cu[e].forEach(g=>g.resolve(f))};if(n){const f=window[n];window[n]=function(){f&&f(),u(M1(r))}}i(e,f=>{f?(cu[e].forEach(g=>g.reject(f)),cu[e]=null):n||u(M1(r))})})};function Lz(t,e){return(0,bz.default)(e.config,t.config)}function Rz(t,...e){const r=[].concat(...e),n={},s=Object.keys(t);for(const i of s)r.indexOf(i)===-1&&(n[i]=t[i]);return n}function Oz(t,...e){if(!this.player||!this.player[t]){let r=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(r+="The method was not available"):r+="The player was not available",console.warn(r,"font-weight: bold",""),null}return this.player[t](...e)}function Dz(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function Mz(t){return/^blob:/.test(t)}function Fz(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var V5=Object.defineProperty,Uz=Object.getOwnPropertyDescriptor,Vz=Object.getOwnPropertyNames,Bz=Object.prototype.hasOwnProperty,zz=(t,e)=>{for(var r in e)V5(t,r,{get:e[r],enumerable:!0})},qz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Vz(e))!Bz.call(t,s)&&s!==r&&V5(t,s,{get:()=>e[s],enumerable:!(n=Uz(e,s))||n.enumerable});return t},$z=t=>qz(V5({},"__esModule",{value:!0}),t),mT={};zz(mT,{AUDIO_EXTENSIONS:()=>B5,DASH_EXTENSIONS:()=>kT,FLV_EXTENSIONS:()=>PT,HLS_EXTENSIONS:()=>q5,MATCH_URL_DAILYMOTION:()=>AT,MATCH_URL_FACEBOOK:()=>wT,MATCH_URL_FACEBOOK_WATCH:()=>xT,MATCH_URL_KALTURA:()=>IT,MATCH_URL_MIXCLOUD:()=>ST,MATCH_URL_MUX:()=>vT,MATCH_URL_SOUNDCLOUD:()=>gT,MATCH_URL_STREAMABLE:()=>_T,MATCH_URL_TWITCH_CHANNEL:()=>ET,MATCH_URL_TWITCH_VIDEO:()=>NT,MATCH_URL_VIDYARD:()=>TT,MATCH_URL_VIMEO:()=>yT,MATCH_URL_WISTIA:()=>bT,MATCH_URL_YOUTUBE:()=>N2,VIDEO_EXTENSIONS:()=>z5,canPlay:()=>Wz});var Hz=$z(mT),FN=s0;const N2=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,gT=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,yT=/vimeo\.com\/(?!progressive_redirect).+/,vT=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,wT=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,xT=/^https?:\/\/fb\.watch\/.+$/,_T=/streamable\.com\/([a-z0-9]+)$/,bT=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,NT=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,ET=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,AT=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,ST=/mixcloud\.com\/([^/]+\/[^/]+)/,TT=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,IT=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,B5=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,z5=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,q5=/\.(m3u8)($|\?)/i,kT=/\.(mpd)($|\?)/i,PT=/\.(flv)($|\?)/i,E2=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&E2(e)||E2(e.src))return!0;return!1}return(0,FN.isMediaStream)(t)||(0,FN.isBlobUrl)(t)?!0:B5.test(t)||z5.test(t)||q5.test(t)||kT.test(t)||PT.test(t)},Wz={youtube:t=>t instanceof Array?t.every(e=>N2.test(e)):N2.test(t),soundcloud:t=>gT.test(t)&&!B5.test(t),vimeo:t=>yT.test(t)&&!z5.test(t)&&!q5.test(t),mux:t=>vT.test(t),facebook:t=>wT.test(t)||xT.test(t),streamable:t=>_T.test(t),wistia:t=>bT.test(t),twitch:t=>NT.test(t)||ET.test(t),dailymotion:t=>AT.test(t),mixcloud:t=>ST.test(t),vidyard:t=>TT.test(t),kaltura:t=>IT.test(t),file:E2};var $5=Object.defineProperty,Gz=Object.getOwnPropertyDescriptor,Kz=Object.getOwnPropertyNames,Qz=Object.prototype.hasOwnProperty,Yz=(t,e)=>{for(var r in e)$5(t,r,{get:e[r],enumerable:!0})},Xz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Kz(e))!Qz.call(t,s)&&s!==r&&$5(t,s,{get:()=>e[s],enumerable:!(n=Gz(e,s))||n.enumerable});return t},Jz=t=>Xz($5({},"__esModule",{value:!0}),t),CT={};Yz(CT,{default:()=>eq});var Zz=Jz(CT),Rs=s0,_s=Hz,eq=[{key:"youtube",name:"YouTube",canPlay:_s.canPlay.youtube,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./YouTube-C5oVN0F6.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:_s.canPlay.soundcloud,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./SoundCloud-QdxuNRi4.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:_s.canPlay.vimeo,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Vimeo-CMSzBKzE.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:_s.canPlay.mux,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Mux-Dic4FQzy.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:_s.canPlay.facebook,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Facebook-dsthJc71.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:_s.canPlay.streamable,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Streamable-Dh0T5Lu7.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:_s.canPlay.wistia,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Wistia-Bf2xun41.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:_s.canPlay.twitch,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Twitch-DbC1CTLX.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:_s.canPlay.dailymotion,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./DailyMotion-CKbN7ecq.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:_s.canPlay.mixcloud,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Mixcloud-o6qSbgw1.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:_s.canPlay.vidyard,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Vidyard-weDV8GcC.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:_s.canPlay.kaltura,lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./Kaltura-fKOSiPdL.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:_s.canPlay.file,canEnablePIP:t=>_s.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,Rs.supportsWebKitPresentationMode)())&&!_s.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,Rs.lazy)(()=>An(()=>import("./FilePlayer-DG6X-0CJ.js").then(t=>t.F),[]))}],UN=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function tq(t,e){return!!(t===e||UN(t)&&UN(e))}function rq(t,e){if(t.length!==e.length)return!1;for(var r=0;r<t.length;r++)if(!tq(t[r],e[r]))return!1;return!0}function nq(t,e){e===void 0&&(e=rq);var r,n=[],s,i=!1;function o(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return i&&r===this&&e(a,n)||(s=t.apply(this,a),i=!0,r=this,n=a),s}return o}const sq=Object.freeze(Object.defineProperty({__proto__:null,default:nq},Symbol.toStringTag,{value:"Module"})),iq=DI(sq);var oq=typeof Element<"u",aq=typeof Map=="function",lq=typeof Set=="function",cq=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function dm(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var r,n,s;if(Array.isArray(t)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(!dm(t[n],e[n]))return!1;return!0}var i;if(aq&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;for(i=t.entries();!(n=i.next()).done;)if(!dm(n.value[1],e.get(n.value[0])))return!1;return!0}if(lq&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(n=i.next()).done;)if(!e.has(n.value[0]))return!1;return!0}if(cq&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(r=t.length,r!=e.length)return!1;for(n=r;n--!==0;)if(t[n]!==e[n])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(e).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[n]))return!1;if(oq&&t instanceof Element)return!1;for(n=r;n--!==0;)if(!((s[n]==="_owner"||s[n]==="__v"||s[n]==="__o")&&t.$$typeof)&&!dm(t[s[n]],e[s[n]]))return!1;return!0}return t!==t&&e!==e}var jT=function(e,r){try{return dm(e,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}},LT={exports:{}},uq="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hq=uq,dq=hq;function RT(){}function OT(){}OT.resetWarningCache=RT;var fq=function(){function t(n,s,i,o,a,l){if(l!==dq){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var r={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:OT,resetWarningCache:RT};return r.PropTypes=r,r};LT.exports=fq();var pq=LT.exports,mq=Object.create,i0=Object.defineProperty,gq=Object.getOwnPropertyDescriptor,yq=Object.getOwnPropertyNames,vq=Object.getPrototypeOf,wq=Object.prototype.hasOwnProperty,xq=(t,e)=>{for(var r in e)i0(t,r,{get:e[r],enumerable:!0})},DT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of yq(e))!wq.call(t,s)&&s!==r&&i0(t,s,{get:()=>e[s],enumerable:!(n=gq(e,s))||n.enumerable});return t},_q=(t,e,r)=>(r=t!=null?mq(vq(t)):{},DT(!t||!t.__esModule?i0(r,"default",{value:t,enumerable:!0}):r,t)),bq=t=>DT(i0({},"__esModule",{value:!0}),t),MT={};xq(MT,{defaultProps:()=>Aq,propTypes:()=>Eq});var FT=bq(MT),Nq=_q(pq);const{string:Dn,bool:bs,number:uu,array:F1,oneOfType:id,shape:oi,object:is,func:vn,node:VN}=Nq.default,Eq={url:id([Dn,F1,is]),playing:bs,loop:bs,controls:bs,volume:uu,muted:bs,playbackRate:uu,width:id([Dn,uu]),height:id([Dn,uu]),style:is,progressInterval:uu,playsinline:bs,pip:bs,stopOnUnmount:bs,light:id([bs,Dn,is]),playIcon:VN,previewTabIndex:uu,previewAriaLabel:Dn,fallback:VN,oEmbedUrl:Dn,wrapper:id([Dn,vn,oi({render:vn.isRequired})]),config:oi({soundcloud:oi({options:is}),youtube:oi({playerVars:is,embedOptions:is,onUnstarted:vn}),facebook:oi({appId:Dn,version:Dn,playerId:Dn,attributes:is}),dailymotion:oi({params:is}),vimeo:oi({playerOptions:is,title:Dn}),mux:oi({attributes:is,version:Dn}),file:oi({attributes:is,tracks:F1,forceVideo:bs,forceAudio:bs,forceHLS:bs,forceSafariHLS:bs,forceDisableHls:bs,forceDASH:bs,forceFLV:bs,hlsOptions:is,hlsVersion:Dn,dashVersion:Dn,flvVersion:Dn}),wistia:oi({options:is,playerId:Dn,customControls:F1}),mixcloud:oi({options:is}),twitch:oi({options:is,playerId:Dn}),vidyard:oi({options:is})}),onReady:vn,onStart:vn,onPlay:vn,onPause:vn,onBuffer:vn,onBufferEnd:vn,onEnded:vn,onError:vn,onDuration:vn,onSeek:vn,onPlaybackRateChange:vn,onPlaybackQualityChange:vn,onProgress:vn,onClickPreview:vn,onEnablePIP:vn,onDisablePIP:vn},Mn=()=>{},Aq={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Mn},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Mn,onStart:Mn,onPlay:Mn,onPause:Mn,onBuffer:Mn,onBufferEnd:Mn,onEnded:Mn,onError:Mn,onDuration:Mn,onSeek:Mn,onPlaybackRateChange:Mn,onPlaybackQualityChange:Mn,onProgress:Mn,onClickPreview:Mn,onEnablePIP:Mn,onDisablePIP:Mn};var Sq=Object.create,Mf=Object.defineProperty,Tq=Object.getOwnPropertyDescriptor,Iq=Object.getOwnPropertyNames,kq=Object.getPrototypeOf,Pq=Object.prototype.hasOwnProperty,Cq=(t,e,r)=>e in t?Mf(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,jq=(t,e)=>{for(var r in e)Mf(t,r,{get:e[r],enumerable:!0})},UT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Iq(e))!Pq.call(t,s)&&s!==r&&Mf(t,s,{get:()=>e[s],enumerable:!(n=Tq(e,s))||n.enumerable});return t},VT=(t,e,r)=>(r=t!=null?Sq(kq(t)):{},UT(!t||!t.__esModule?Mf(r,"default",{value:t,enumerable:!0}):r,t)),Lq=t=>UT(Mf({},"__esModule",{value:!0}),t),en=(t,e,r)=>(Cq(t,typeof e!="symbol"?e+"":e,r),r),BT={};jq(BT,{default:()=>o0});var Rq=Lq(BT),BN=VT(ne),Oq=VT(jT),zT=FT,Dq=s0;const Mq=5e3;class o0 extends BN.Component{constructor(){super(...arguments),en(this,"mounted",!1),en(this,"isReady",!1),en(this,"isPlaying",!1),en(this,"isLoading",!0),en(this,"loadOnReady",null),en(this,"startOnPlay",!0),en(this,"seekOnPlay",null),en(this,"onDurationCalled",!1),en(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),en(this,"getInternalPlayer",e=>this.player?this.player[e]:null),en(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,r=this.getSecondsLoaded(),n=this.getDuration();if(n){const s={playedSeconds:e,played:e/n};r!==null&&(s.loadedSeconds=r,s.loaded=r/n),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),en(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:r,volume:n,muted:s}=this.props;e(),!s&&n!==null&&this.player.setVolume(n),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):r&&this.player.play(),this.handleDurationCheck()}),en(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:r,playbackRate:n}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&n!==1&&this.player.setPlaybackRate(n),e(),this.startOnPlay=!1),r(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),en(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),en(this,"handleEnded",()=>{const{activePlayer:e,loop:r,onEnded:n}=this.props;e.loopOnEnded&&r&&this.seekTo(0),r||(this.isPlaying=!1,n())}),en(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),en(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),en(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:r,playing:n,volume:s,muted:i,playbackRate:o,pip:a,loop:l,activePlayer:u,disableDeferredLoading:f}=this.props;if(!(0,Oq.default)(e.url,r)){if(this.isLoading&&!u.forceLoad&&!f&&!(0,Dq.isMediaStream)(r)){console.warn(`ReactPlayer: the attempt to load ${r} is being deferred until the player has loaded`),this.loadOnReady=r;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(r,this.isReady)}!e.playing&&n&&!this.isPlaying&&this.player.play(),e.playing&&!n&&this.isPlaying&&this.player.pause(),!e.pip&&a&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!a&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==l&&this.player.setLoop&&this.player.setLoop(l)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,r,n){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},Mq));return}if(r?r==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,n);return}this.player.seekTo(e,n)}render(){const e=this.props.activePlayer;return e?BN.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}en(o0,"displayName","Player");en(o0,"propTypes",zT.propTypes);en(o0,"defaultProps",zT.defaultProps);var Fq=Object.create,Ff=Object.defineProperty,Uq=Object.getOwnPropertyDescriptor,Vq=Object.getOwnPropertyNames,Bq=Object.getPrototypeOf,zq=Object.prototype.hasOwnProperty,qq=(t,e,r)=>e in t?Ff(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,$q=(t,e)=>{for(var r in e)Ff(t,r,{get:e[r],enumerable:!0})},qT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Vq(e))!zq.call(t,s)&&s!==r&&Ff(t,s,{get:()=>e[s],enumerable:!(n=Uq(e,s))||n.enumerable});return t},Uf=(t,e,r)=>(r=t!=null?Fq(Bq(t)):{},qT(!t||!t.__esModule?Ff(r,"default",{value:t,enumerable:!0}):r,t)),Hq=t=>qT(Ff({},"__esModule",{value:!0}),t),Zr=(t,e,r)=>(qq(t,typeof e!="symbol"?e+"":e,r),r),$T={};$q($T,{createReactPlayer:()=>e$});var Wq=Hq($T),yu=Uf(ne),Gq=Uf(hT),U1=Uf(iq),zN=Uf(jT),yd=FT,HT=s0,Kq=Uf(Rq);const Qq=(0,HT.lazy)(()=>An(()=>import("./Preview-2FdYApWR.js").then(t=>t.P),[])),Yq=typeof window<"u"&&window.document&&typeof document<"u",Xq=typeof E0<"u"&&E0.window&&E0.window.document,Jq=Object.keys(yd.propTypes),Zq=Yq||Xq?yu.Suspense:()=>null,od=[],e$=(t,e)=>{var r;return r=class extends yu.Component{constructor(){super(...arguments),Zr(this,"state",{showPreview:!!this.props.light}),Zr(this,"references",{wrapper:n=>{this.wrapper=n},player:n=>{this.player=n}}),Zr(this,"handleClickPreview",n=>{this.setState({showPreview:!1}),this.props.onClickPreview(n)}),Zr(this,"showPreview",()=>{this.setState({showPreview:!0})}),Zr(this,"getDuration",()=>this.player?this.player.getDuration():null),Zr(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Zr(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Zr(this,"getInternalPlayer",(n="player")=>this.player?this.player.getInternalPlayer(n):null),Zr(this,"seekTo",(n,s,i)=>{if(!this.player)return null;this.player.seekTo(n,s,i)}),Zr(this,"handleReady",()=>{this.props.onReady(this)}),Zr(this,"getActivePlayer",(0,U1.default)(n=>{for(const s of[...od,...t])if(s.canPlay(n))return s;return e||null})),Zr(this,"getConfig",(0,U1.default)((n,s)=>{const{config:i}=this.props;return Gq.default.all([yd.defaultProps.config,yd.defaultProps.config[s]||{},i,i[s]||{}])})),Zr(this,"getAttributes",(0,U1.default)(n=>(0,HT.omit)(this.props,Jq))),Zr(this,"renderActivePlayer",n=>{if(!n)return null;const s=this.getActivePlayer(n);if(!s)return null;const i=this.getConfig(n,s.key);return yu.default.createElement(Kq.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(n,s){return!(0,zN.default)(this.props,n)||!(0,zN.default)(this.state,s)}componentDidUpdate(n){const{light:s}=this.props;!n.light&&s&&this.setState({showPreview:!0}),n.light&&!s&&this.setState({showPreview:!1})}renderPreview(n){if(!n)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:a,previewAriaLabel:l}=this.props;return yu.default.createElement(Qq,{url:n,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:l,oEmbedUrl:a,onClick:this.handleClickPreview})}render(){const{url:n,style:s,width:i,height:o,fallback:a,wrapper:l}=this.props,{showPreview:u}=this.state,f=this.getAttributes(n),g=typeof l=="string"?this.references.wrapper:void 0;return yu.default.createElement(l,{ref:g,style:{...s,width:i,height:o},...f},yu.default.createElement(Zq,{fallback:a},u?this.renderPreview(n):this.renderActivePlayer(n)))}},Zr(r,"displayName","ReactPlayer"),Zr(r,"propTypes",yd.propTypes),Zr(r,"defaultProps",yd.defaultProps),Zr(r,"addCustomPlayer",n=>{od.push(n)}),Zr(r,"removeCustomPlayers",()=>{od.length=0}),Zr(r,"canPlay",n=>{for(const s of[...od,...t])if(s.canPlay(n))return!0;return!1}),Zr(r,"canEnablePIP",n=>{for(const s of[...od,...t])if(s.canEnablePIP&&s.canEnablePIP(n))return!0;return!1}),r};var t$=Object.create,a0=Object.defineProperty,r$=Object.getOwnPropertyDescriptor,n$=Object.getOwnPropertyNames,s$=Object.getPrototypeOf,i$=Object.prototype.hasOwnProperty,o$=(t,e)=>{for(var r in e)a0(t,r,{get:e[r],enumerable:!0})},WT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of n$(e))!i$.call(t,s)&&s!==r&&a0(t,s,{get:()=>e[s],enumerable:!(n=r$(e,s))||n.enumerable});return t},a$=(t,e,r)=>(r=t!=null?t$(s$(t)):{},WT(!t||!t.__esModule?a0(r,"default",{value:t,enumerable:!0}):r,t)),l$=t=>WT(a0({},"__esModule",{value:!0}),t),GT={};o$(GT,{default:()=>d$});var c$=l$(GT),A2=a$(Zz),u$=Wq;const h$=A2.default[A2.default.length-1];var d$=(0,u$.createReactPlayer)(A2.default,h$);const f$=HN(c$);function KT({lesson:t,onComplete:e,onNext:r,isCompleted:n}){const{user:s}=ps(),[i,o]=ne.useState(!1),[a,l]=ne.useState(0),[u,f]=ne.useState(n),g=m=>{l(m.played*100),m.played>.9&&!u&&y()},y=async()=>{if(!t.courseId||!s)return;(await Zi.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return c.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[c.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?c.jsx(f$,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:g,onPlay:()=>o(!0),onPause:()=>o(!1)}):c.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:c.jsxs("div",{className:"text-white text-center",children:[c.jsx(ng,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),c.jsx("p",{children:"Aucune vido disponible"})]})})}),c.jsxs("div",{className:"p-6",children:[c.jsxs("div",{className:"flex justify-between items-start mb-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),c.jsx("p",{className:"text-gray-600",children:t.description})]}),u&&c.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[c.jsx(us,{className:"w-5 h-5 mr-1"}),c.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[c.jsx("span",{children:"Progression"}),c.jsxs("span",{children:[Math.round(a),"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${a}%`}})})]}),c.jsxs("div",{className:"flex space-x-3",children:[!u&&c.jsxs("button",{onClick:y,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[c.jsx(us,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),r&&c.jsxs("button",{onClick:r,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",c.jsx(Cd,{className:"w-5 h-5 ml-2"})]})]}),t.content&&c.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),c.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function p$({courseId:t,currentLessonId:e,onLessonSelect:r,userProgress:n=[],isPurchased:s=!1}){const[i,o]=ne.useState([]),[a,l]=ne.useState(new Set),[u,f]=ne.useState(!0);ne.useEffect(()=>{g()},[t]);const g=async()=>{f(!0);const b=await sg.getModulesByCourse(t);if(b.success){const A=await Promise.all(b.modules.map(async x=>{const T=await sg.getLessonsByModule(x.id);return{...x,lessons:T.lessons||[]}}));o(A),A.length>0&&l(new Set([A[0].id]))}f(!1)},y=b=>{l(A=>{const x=new Set(A);return x.has(b)?x.delete(b):x.add(b),x})},m=b=>Zi.isLessonCompleted(b,n),E=b=>b.reduce((A,x)=>A+(x.duration||0),0);return u?c.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:c.jsxs("div",{className:"animate-pulse space-y-4",children:[c.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded"}),c.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):c.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[c.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),c.jsx("div",{className:"divide-y divide-gray-200",children:i.map((b,A)=>c.jsxs("div",{children:[c.jsx("button",{onClick:()=>y(b.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:c.jsxs("div",{className:"flex items-center",children:[a.has(b.id)?c.jsx(im,{className:"w-5 h-5 text-gray-400 mr-2"}):c.jsx(C5,{className:"w-5 h-5 text-gray-400 mr-2"}),c.jsxs("div",{className:"text-left",children:[c.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",A+1,": ",b.title]}),c.jsxs("p",{className:"text-sm text-gray-500",children:[b.lessons.length," leon",b.lessons.length>1?"s":"",E(b.lessons)>0&&c.jsxs("span",{children:["  ",E(b.lessons)," min"]})]})]})]})}),a.has(b.id)&&c.jsx("div",{className:"bg-gray-50",children:b.lessons.map((x,T)=>{const I=m(x.id),k=x.id===e,H=s||x.isFree;return c.jsxs("button",{onClick:()=>H&&r(x),disabled:!H,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${k?"bg-green-50 border-l-4 border-green-500":""} ${H?"":"opacity-50 cursor-not-allowed"}`,children:[c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"mr-3",children:H?I?c.jsx(us,{className:"w-4 h-4 text-green-500"}):c.jsx(ng,{className:"w-4 h-4 text-gray-400"}):c.jsx(fh,{className:"w-4 h-4 text-gray-400"})}),c.jsxs("div",{className:"text-left",children:[c.jsxs("p",{className:`text-sm ${k?"font-medium text-green-700":"text-gray-700"}`,children:[T+1,". ",x.title]}),x.duration&&c.jsxs("p",{className:"text-xs text-gray-500",children:[x.duration," min"]})]})]}),x.isFree&&c.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},x.id)})})]},b.id))}),i.length===0&&c.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:c.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}function m$({quiz:t,courseId:e,onComplete:r}){const{currentUser:n}=ps(),[s,i]=ne.useState({}),[o,a]=ne.useState(!1),[l,u]=ne.useState(null),[f,g]=ne.useState(null);ne.useEffect(()=>{n&&t.id&&e&&y()},[t.id,e,n]);const y=async()=>{if(!n)return;const I=await Ol.getQuizResults(n.uid,t.id);if(I.success&&I.results.length>0){const k=Math.max(...I.results.map(H=>H.score));g(k)}},m=(I,k)=>{o||i({...s,[I]:k})},E=async()=>{const I=t.questions.map((F,P)=>s[P]??-1);a(!0);let k=0;t.questions.forEach((F,P)=>{I[P]===F.correctAnswer&&k++});const H=Math.round(k/t.questions.length*100),Z={score:H,correctCount:k,totalQuestions:t.questions.length};if(u(Z),n&&t.id&&e){console.log(" Submit Quiz: Starting save process...",{userId:n.uid,quizId:t.id,courseId:e});try{console.log(" Saving answers..."),await Ol.submitQuizAnswers(n.uid,t.id,e,I),console.log(" Answers saved"),console.log(" Marking progress as complete..."),await Zi.markQuizCompleted(n.uid,e,t.id,H),console.log(" Progress mark complete")}catch(F){console.error(" Error saving quiz progress:",F)}}else console.warn(" Missing data for save:",{hasUser:!!n,quizId:t==null?void 0:t.id,courseId:e});r==null||r(Z)},b=()=>{i({}),a(!1),u(null)},A=I=>s[I]!==void 0,x=t.questions.every((I,k)=>A(k)),T=I=>{switch(I==null?void 0:I.toLowerCase()){case"beginner":return"bg-green-100 text-green-700";case"intermediate":return"bg-yellow-100 text-yellow-700";case"advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title}),t.difficulty&&c.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${T(t.difficulty)}`,children:t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)})]}),t.description&&c.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[c.jsxs("span",{children:[t.questions.length," questions"]}),f&&!o&&c.jsxs("span",{className:"text-green-600 font-medium",children:["Meilleur score: ",f,"%"]})]})]}),c.jsx("div",{className:"space-y-8",children:t.questions.map((I,k)=>c.jsxs("div",{className:"border-2 border-gray-100 rounded-xl p-6",children:[c.jsx("div",{className:"mb-4",children:c.jsxs("div",{className:"flex items-start gap-3",children:[c.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:k+1}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:I.question})]})}),c.jsx("div",{className:"space-y-3",children:I.options.map((H,Z)=>{const F=s[k]===Z,P=o&&Z===I.correctAnswer,C=o&&F&&Z!==I.correctAnswer;return c.jsx("button",{onClick:()=>m(k,Z),disabled:o,className:`w-full text-left p-4 rounded-xl border-2 transition-all ${P?"border-green-500 bg-green-50":C?"border-red-500 bg-red-50":F?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${o?"cursor-not-allowed":"cursor-pointer"}`,children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("span",{className:"flex items-center gap-3",children:[c.jsx("span",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${F?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:F&&!o&&c.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),c.jsx("span",{className:"font-medium",children:H})]}),o&&P&&c.jsx(us,{className:"w-6 h-6 text-green-600"}),o&&C&&c.jsx(f6,{className:"w-6 h-6 text-red-600"})]})},Z)})}),o&&I.explanation&&c.jsx("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:c.jsxs("p",{className:"text-sm text-gray-700",children:[c.jsx("span",{className:"font-semibold text-blue-700",children:"Explication: "}),I.explanation]})})]},k))}),c.jsx("div",{className:"mt-8",children:o?c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 p-8 rounded-2xl text-white",children:c.jsxs("div",{className:"text-center",children:[c.jsx(P5,{className:"w-16 h-16 mx-auto mb-4"}),c.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Termin!"}),c.jsxs("p",{className:"text-5xl font-bold mb-4",children:[l==null?void 0:l.score,"%"]}),c.jsxs("p",{className:"text-lg mb-6",children:[l==null?void 0:l.correctCount," / ",l==null?void 0:l.totalQuestions," rponses correctes"]}),c.jsxs("button",{onClick:b,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-semibold hover:bg-gray-100 transition",children:[c.jsx(MF,{className:"w-5 h-5"}),"Ressayer"]})]})}):c.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-6 rounded-xl",children:[c.jsx("div",{className:"text-sm text-gray-600",children:x?c.jsx("span",{className:"text-green-600 font-medium",children:" Toutes les questions rpondues"}):c.jsxs("span",{children:[Object.keys(s).length," / ",t.questions.length," questions rpondues"]})}),c.jsx("button",{onClick:E,disabled:!x,className:`px-8 py-3 rounded-xl font-semibold transition ${x?"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Soumettre le Quiz"})]})})]})}function g$({exercise:t,courseId:e,onComplete:r}){var I;const{currentUser:n}=ps(),[s,i]=ne.useState(0),[o,a]=ne.useState(((I=t.levels[0])==null?void 0:I.starterCode)||""),[l,u]=ne.useState(!1),[f,g]=ne.useState(!1),[y,m]=ne.useState([]);ne.useEffect(()=>{n&&t.id&&E()},[t.id,n]);const E=async()=>{if(!n)return;const k=await Dl.getExerciseProgress(n.uid,t.id);k.success&&k.progress.completedLevels&&m(k.progress.completedLevels)},b=t.levels[s],A=async()=>{var k;if(!y.includes(s)){const H=[...y,s];m(H),n&&t.id&&e?(console.log(" Level Complete: Saving...",{level:s}),await Dl.trackLevelCompletion(n.uid,t.id,e,s),H.length===t.levels.length&&(console.log(" All levels done! Marking exercise complete...",{exerciseId:t.id}),await Zi.markExerciseCompleted(n.uid,e,t.id),console.log(" Exercise marked complete in progress"))):console.warn(" Missing data for exercise save:",{hasUser:!!n,exerciseId:t==null?void 0:t.id,courseId:e}),r==null||r(s)}s<t.levels.length-1&&(i(s+1),a(((k=t.levels[s+1])==null?void 0:k.starterCode)||""),u(!1),g(!1))},x=k=>{switch(k){case 0:return"bg-green-100 text-green-700 border-green-300";case 1:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 2:return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},T=k=>{switch(k){case 0:return" Niveau 1: Dbutant";case 1:return" Niveau 2: Intermdiaire";case 2:return" Niveau 3: Avanc";default:return`Niveau ${k+1}`}};return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),c.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),c.jsx("div",{className:"flex gap-2 mb-4",children:t.levels.map((k,H)=>c.jsx("div",{className:`flex-1 h-2 rounded-full transition ${H===s?"bg-gradient-to-r from-green-500 to-blue-500":y.includes(H)?"bg-green-500":"bg-gray-200"}`},H))}),c.jsx("div",{className:"flex gap-3",children:t.levels.map((k,H)=>c.jsxs("button",{onClick:()=>{var Z;i(H),a(((Z=t.levels[H])==null?void 0:Z.starterCode)||""),u(!1),g(!1)},className:`px-4 py-2 rounded-xl border-2 font-medium text-sm transition ${H===s?x(H):y.includes(H)?"bg-green-50 text-green-600 border-green-200":"bg-gray-50 text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[y.includes(H)&&c.jsx(us,{className:"w-4 h-4 inline mr-1"}),"Niveau ",H+1]},H))})]}),c.jsxs("div",{className:"space-y-6",children:[c.jsxs("div",{className:`p-4 rounded-xl border-2 ${x(s)}`,children:[c.jsx("h3",{className:"text-xl font-bold mb-2",children:T(s)}),c.jsx("p",{className:"text-sm",children:b==null?void 0:b.title})]}),c.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[c.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Objectif:"}),c.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:b==null?void 0:b.description})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"font-semibold text-gray-900",children:"Votre Code:"}),c.jsxs("button",{onClick:()=>g(!f),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[c.jsx(jF,{className:"w-4 h-4"}),f?"Masquer les indices":"Afficher les indices"]})]}),f&&(b==null?void 0:b.hints)&&b.hints.length>0&&c.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[c.jsx("p",{className:"font-semibold text-blue-900 mb-2",children:" Indices:"}),c.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:b.hints.map((k,H)=>c.jsx("li",{children:k},H))})]}),c.jsx("textarea",{value:o,onChange:k=>a(k.target.value),className:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 rounded-xl border-2 border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none",placeholder:"crivez votre code ici...",spellCheck:!1})]}),c.jsxs("div",{children:[c.jsxs("button",{onClick:()=>u(!l),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:[l?c.jsx(IF,{className:"w-4 h-4"}):c.jsx(kF,{className:"w-4 h-4"}),l?"Masquer la solution":"Voir la solution"]}),l&&(b==null?void 0:b.solution)&&c.jsxs("div",{className:"mt-4",children:[c.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded mb-3",children:c.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",c.jsx("strong",{children:"Astuce:"})," Essayez de rsoudre l'exercice par vous-mme avant de regarder la solution!"]})}),c.jsxs("div",{className:"p-4 bg-gray-900 rounded-xl",children:[c.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Solution:"}),c.jsx("pre",{className:"font-mono text-sm text-green-400 overflow-x-auto",children:b.solution})]})]})]}),c.jsxs("div",{className:"flex justify-between items-center pt-4",children:[c.jsx("div",{className:"text-sm text-gray-600",children:y.includes(s)&&c.jsx("span",{className:"text-green-600 font-medium",children:" Niveau termin"})}),c.jsxs("div",{className:"flex gap-3",children:[s>0&&c.jsx("button",{onClick:()=>{var k;i(s-1),a(((k=t.levels[s-1])==null?void 0:k.starterCode)||""),u(!1),g(!1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition",children:"Niveau Prcdent"}),c.jsx("button",{onClick:A,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition flex items-center gap-2",children:s<t.levels.length-1?c.jsxs(c.Fragment,{children:["Niveau Suivant",c.jsx(C5,{className:"w-5 h-5"})]}):c.jsxs(c.Fragment,{children:[c.jsx(us,{className:"w-5 h-5"}),"Terminer l'Exercice"]})})]})]})]})]})}function qN({content:t,contentType:e,onComplete:r,onNext:n}){const[s,i]=ne.useState(null),o=async l=>{const u=Math.floor(Math.random()*40)+60,f={score:u,correctCount:Math.floor(u/100*l.length),totalQuestions:l.length};return i(f),r==null||r(),f},a=l=>{console.log("Exercise level completed:",l),l===t.levels.length-1&&(r==null||r())};switch(e){case"video":return c.jsx(KT,{lesson:t,onComplete:r,onNext:n,isCompleted:!1});case"text":case"course":return c.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[c.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[c.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center",children:c.jsx(zn,{className:"w-6 h-6 text-white"})}),c.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title})]}),c.jsx("div",{className:"prose prose-lg max-w-none",children:typeof t.content=="string"?c.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:t.content}):t.content}),c.jsx("div",{className:"mt-8 flex justify-end",children:c.jsx("button",{onClick:()=>{r==null||r(),n==null||n()},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition",children:"Marquer comme termin et continuer"})})]});case"quiz":return c.jsx(m$,{quiz:t,onSubmit:o,previousResult:s});case"exercise":return c.jsx(g$,{exercise:t,onComplete:a});default:return c.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:c.jsxs("p",{className:"text-gray-600",children:["Type de contenu non support: ",e]})})}}function y$({courseId:t,courseName:e,isCompleted:r}){const{currentUser:n,userProfile:s}=ps(),[i,o]=ne.useState(!1),[a,l]=ne.useState(""),u=async()=>{if(!r){l("Vous devez complter 100% du cours pour obtenir le certificat");return}o(!0),l("");try{const f=(s==null?void 0:s.displayName)||(n==null?void 0:n.displayName)||"tudiant",g=await cT.generateAndDownload(n.uid,t,e,f);g.success||l(g.error||"Erreur lors de la gnration du certificat")}catch(f){l(f.message)}finally{o(!1)}};return r?c.jsxs("div",{children:[c.jsx("button",{onClick:u,disabled:i,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-yellow-500 to-orange-500 text-white rounded-lg hover:from-yellow-600 hover:to-orange-600 transition font-medium shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed",children:i?c.jsxs(c.Fragment,{children:[c.jsx(Zg,{className:"w-5 h-5 animate-spin"}),"Gnration..."]}):c.jsxs(c.Fragment,{children:[c.jsx(P5,{className:"w-5 h-5"}),"Tlcharger le Certificat"]})}),a&&c.jsx("p",{className:"text-sm text-red-600 mt-2",children:a})]}):null}function v$(){const{courseId:t}=Ev(),e=$s(),{currentUser:r,userProfile:n}=ps(),[s,i]=ne.useState(null),[o,a]=ne.useState(null),[l,u]=ne.useState([]),[f,g]=ne.useState("overview"),[y,m]=ne.useState(!0),[E,b]=ne.useState(!1),[A,x]=ne.useState([]),[T,I]=ne.useState([]),[k,H]=ne.useState([]),[Z,F]=ne.useState(!1);ne.useEffect(()=>{P()},[t,r]);const P=async()=>{var L;if(console.log(" loadCourseData called",{courseId:t,currentUser:!!r,userProfile:!!n}),!t||!r){console.log(" Early return - missing courseId or currentUser");return}try{m(!0),console.log(" Loading course:",t);const X=await Fs.getCourseById(t);if(console.log(" Course result:",X),X.success)i(X.course);else{console.error(" Failed to load course"),m(!1);return}const fe=(L=n==null?void 0:n.purchasedCourses)==null?void 0:L.includes(t);console.log(" Has purchased:",fe),b(fe);const le=await Zi.getCourseProgress(r.uid,t);le.success&&u(le.progress.completedLessons||[]);const ye=await sg.getModulesByCourse(t);if(ye.success){const we=[];for(const U of ye.modules){const G=await sg.getLessonsByModule(U.id);G.success&&we.push(...G.lessons.map(J=>({...J,moduleId:U.id,courseId:t})))}if(x(we),we.length>0&&!o){const U=we.find(G=>!Zi.isLessonCompleted(G.id,le.progress.completedLessons||[]));a(U||we[0])}}const ee=await Ol.getQuizzesByCourse(t);ee.success&&I(ee.quizzes);const ue=await Dl.getExercisesByCourse(t);ue.success&&H(ue.exercises);const _e=await cT.checkCourseCompletion(r.uid,t);_e.success&&F(_e.completed),console.log(" Course data loaded successfully"),m(!1)}catch(X){console.error(" Error loading course data:",X),m(!1)}},C=L=>{u(X=>[...X,L])},O=()=>{if(!o||A.length===0)return;const L=A.findIndex(X=>X.id===o.id);L<A.length-1&&a(A[L+1])},N=()=>A.length===0?0:Zi.calculateProgressPercentage(l.length,A.length);if(y)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),c.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!E)return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),c.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const R=[{id:"overview",name:"Aperu",icon:zn},{id:"quiz",name:"Quiz",icon:zu},{id:"exercise",name:"Exercice",icon:qu},{id:"resources",name:"Ressources",icon:PF},{id:"qna",name:"Q&A",icon:OF}];return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[c.jsx(hh,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),c.jsxs("div",{className:"flex items-center space-x-4",children:[Z&&c.jsx(y$,{courseId:t,courseName:s==null?void 0:s.title,isCompleted:Z}),c.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",N(),"%"]}),c.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:c.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${N()}%`}})})]})]})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&c.jsx(KT,{lesson:o,onComplete:C,onNext:O,isCompleted:Zi.isLessonCompleted(o.id,l)}),c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex -mb-px",children:R.map(L=>{const X=L.icon;return c.jsxs("button",{onClick:()=>g(L.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===L.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[c.jsx(X,{className:"w-4 h-4 mr-2"}),L.name]},L.id)})})}),c.jsxs("div",{className:"p-6",children:[f==="overview"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),c.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&c.jsxs("div",{className:"mb-4",children:[c.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),c.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((L,X)=>c.jsx("li",{children:L},X))})]})]}),f==="quiz"&&c.jsx("div",{className:"-m-6",children:T.length>0?c.jsx(qN,{content:T[0],contentType:"quiz",courseId:t,onComplete:()=>console.log("Quiz completed"),onNext:O}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx(zu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Aucun quiz disponible pour ce cours"})]})}),f==="exercise"&&c.jsx("div",{className:"-m-6",children:k.length>0?c.jsx(qN,{content:k[0],contentType:"exercise",courseId:t,onComplete:()=>console.log("Exercise completed"),onNext:O}):c.jsxs("div",{className:"text-center py-12",children:[c.jsx(qu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Aucun exercice disponible pour ce cours"})]})}),f==="resources"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),c.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&c.jsxs("div",{children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),c.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),c.jsx("div",{className:"lg:col-span-1",children:c.jsx(p$,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:a,userProgress:l,isPurchased:E})})]})})]})}function w$(){const{userProfile:t,currentUser:e}=ps(),[r,n]=ne.useState([]),[s,i]=ne.useState(!0);ne.useEffect(()=>{e&&t&&o()},[e,t]);const o=async()=>{i(!0);const a=(t==null?void 0:t.purchasedCourses)||[];if(a.length===0){i(!1);return}const l=await Promise.all(a.map(async u=>{const f=await Fs.getCourseById(u);if(f.success&&f.course.status!=="archived"){const g=await Zi.getCourseProgress(e.uid,u);return{...f.course,progress:g.completionPercentage||0,totalLessons:g.totalLessons||0,completedLessons:g.completedLessons||0}}return null}));n(l.filter(u=>u!==null)),i(!1)};return s?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),c.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.length===0?c.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[c.jsx(zn,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun cours achet"}),c.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par explorer nos cours disponibles."}),c.jsxs(gr,{to:"/courses",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[c.jsx(zn,{className:"w-5 h-5 mr-2"}),"Explorer les cours"]})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map(a=>c.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition",children:[c.jsx("img",{src:a.thumbnail||"/assets/images/default-course.png",alt:a.title,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-6",children:[c.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:a.title}),c.jsx("p",{className:"text-gray-600 mb-4",children:a.category||"General"}),c.jsxs("div",{className:"mb-4",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[c.jsx("span",{className:"font-medium",children:"Progression"}),c.jsxs("span",{className:"font-semibold text-green-600",children:[a.progress,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:c.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${a.progress}%`}})})]}),c.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-6",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(us,{className:"w-4 h-4 mr-1 text-green-500"}),c.jsxs("span",{children:[a.completedLessons,"/",a.totalLessons," leons"]})]})}),c.jsxs(gr,{to:`/course/${a.id}/view`,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-4 rounded-xl hover:shadow-xl transition flex items-center justify-center font-medium",children:[c.jsx(c2,{className:"w-5 h-5 mr-2"}),a.progress===0?"Commencer":"Continuer"]})]})]},a.id))})})]})}function x$(){const[t]=mE(),e=$s(),[r,n]=ne.useState(!0),[s,i]=ne.useState(null),[o,a]=ne.useState(null),[l,u]=ne.useState(0),f=10,g=ne.useRef(null),y=ne.useRef(!1),m=ne.useRef(0),E=t.get("payment_id"),b=E==null?void 0:E.split("?")[0],A=ne.useCallback(async()=>{if(y.current)return;if(!b){a("ID de paiement manquant"),n(!1),y.current=!0;return}m.current+=1;const x=m.current;if(console.log(` Tentative ${x}/${f}`),u(x),x>f){console.log(" Limite de tentatives atteinte (dpasse)"),a("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),n(!1),y.current=!0;return}if(y.current||(await new Promise(I=>setTimeout(I,3e3)),y.current))return;const T=await g6.verifyPayment(b);if(console.log(" Rsultat vrification:",T),!y.current)if(T.success)if(i(T.data),T.status==="completed")console.log(" Paiement confirm !"),n(!1),y.current=!0,g.current&&clearTimeout(g.current);else if(T.status==="pending")if(m.current>=f)console.log(" Limite de tentatives atteinte (pending)"),a("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),n(!1),y.current=!0,g.current&&clearTimeout(g.current);else if(m.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let I="https://plateforme-educative.onrender.com";if(I&&I.includes("/"))try{const k=new URL(I);k.pathname!=="/"&&!I.includes("/sync-payment")&&(I=`${k.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",I)}if(I){const k=I.endsWith("/")?I.slice(0,-1):I;let H=`${k}/sync-payment`;const Z="https://plateforme-educative.onrender.com";let F=null;if(Z&&Z.includes("/")&&Z!==k)try{const O=new URL(Z);if(O.pathname&&O.pathname!=="/"){const N=O.pathname.endsWith("/")?O.pathname.slice(0,-1):O.pathname;F=`${O.origin}${N}/sync-payment`}}catch{}console.log(" URL backend pour sync:",H),F&&console.log(" URL fallback pour sync:",F);const P=O=>fetch(O,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:b})});(F?P(H).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),P(F))):P(H)).then(O=>O.ok?O.json():(console.error(" Erreur HTTP sync:",O.status,O.statusText),null)).then(O=>{O&&O.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),y.current=!0):(console.warn(" Synchronisation choue:",O),!y.current&&m.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3)))}).catch(O=>{console.error(" Erreur synchronisation:",O),console.error("   Type:",O.name),console.error("   Message:",O.message),!y.current&&m.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))})}else!y.current&&m.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}catch(I){console.warn(" Erreur synchronisation:",I),!y.current&&m.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3);else T.status==="failed"?(a("Le paiement a chou"),n(!1),y.current=!0,g.current&&clearTimeout(g.current)):m.current>=f?(a("Le paiement a un statut inconnu. Veuillez contacter le support."),n(!1),y.current=!0,g.current&&clearTimeout(g.current)):(console.log(" Statut inconnu:",T.status,"- Nouvelle tentative..."),g.current=setTimeout(A,3e3));else console.error(" Erreur vrification:",T.error),a(T.error||"Erreur lors de la vrification du paiement"),n(!1),y.current=!0,g.current&&clearTimeout(g.current)},[b,f]);return ne.useEffect(()=>(y.current=!1,m.current=0,u(0),g.current&&(clearTimeout(g.current),g.current=null),b?(console.log(" Vrification du paiement:",b),A()):(a("ID de paiement manquant"),n(!1),y.current=!0),()=>{g.current&&(clearTimeout(g.current),g.current=null),y.current=!0}),[b,A]),r?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[c.jsx(Zg,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),c.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),l>0&&c.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",l,"/",f,"..."]})]})}):o?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[c.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:c.jsx("span",{className:"text-3xl",children:""})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),c.jsx("p",{className:"text-gray-600 mb-6",children:o}),c.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):c.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[c.jsx(us,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),c.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",c.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),c.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[c.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),c.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",c.jsx(Cd,{className:"w-5 h-5"})]}),c.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function _$(){const t=$s();return c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:c.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[c.jsx(f6,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),c.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),c.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[c.jsx(hh,{className:"w-5 h-5"}),"Ressayer le paiement"]}),c.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function b$({onCreate:t}){const[e,r]=ne.useState(""),[n,s]=ne.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const a={id:Date.now().toString(),title:e.trim(),body:n.trim(),time:new Date().toLocaleString()};t&&t(a),r(""),s("")};return c.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[c.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),c.jsx("div",{className:"mb-2",children:c.jsx("input",{value:e,onChange:o=>r(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),c.jsx("div",{className:"mb-3",children:c.jsx("textarea",{value:n,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),c.jsx("div",{className:"text-right",children:c.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function N$({notification:t}){return c.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:c.jsxs("div",{className:"flex items-start justify-between",children:[c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),c.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),c.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function E$({items:t=[]}){return t.length?c.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>c.jsx(N$,{notification:e},e.id))}):c.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function A$({onEdit:t,onAddNew:e}){const r=$s(),[n,s]=ne.useState([]),[i,o]=ne.useState(!0),[a,l]=ne.useState(""),[u,f]=ne.useState("all"),[g,y]=ne.useState("");ne.useEffect(()=>{m()},[u,g]);const m=async()=>{o(!0);const k={};u!=="all"&&(k.category=u),g&&(k.status=g);const H=await Fs.getCourses(k);H.success&&s(H.courses),o(!1)},E=async k=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await Fs.deleteCourse(k)).success&&m()},b=async k=>{(await Fs.duplicateCourse(k)).success&&m()},A=async k=>{(await Fs.publishCourse(k)).success&&m()},x=n.filter(k=>{var H,Z;return((H=k.title)==null?void 0:H.toLowerCase().includes(a.toLowerCase()))||((Z=k.description)==null?void 0:Z.toLowerCase().includes(a.toLowerCase()))}),T=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],I=k=>{const H={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},F={draft:dh,published:us,archived:xF}[k]||dh;return c.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${H[k]||H.draft}`,children:[c.jsx(F,{className:"w-3 h-3 mr-1"}),k==="draft"?"Brouillon":k==="published"?"Publi":"Archiv"]})};return c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),c.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[c.jsx(wa,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(u6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:a,onChange:k=>l(k.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),c.jsx("select",{value:u,onChange:k=>f(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:T.map(k=>c.jsx("option",{value:k.value,children:k.label},k.value))}),c.jsxs("select",{value:g,onChange:k=>y(k.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("option",{value:"",children:"Tous les statuts"}),c.jsx("option",{value:"draft",children:"Brouillon"}),c.jsx("option",{value:"published",children:"Publi"}),c.jsx("option",{value:"archived",children:"Archiv"})]})]})}),i?c.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):x.length===0?c.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:x.map(k=>c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center",children:[k.thumbnail&&c.jsx("img",{src:k.thumbnail,alt:k.title,className:"w-12 h-12 rounded object-cover mr-3"}),c.jsxs("div",{children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:k.title}),c.jsx("div",{className:"text-sm text-gray-500",children:k.level==="beginner"?"Dbutant":k.level==="intermediate"?"Intermdiaire":k.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.category}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[k.price," TND"]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:k.enrolledCount||0}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:I(k.status)}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsxs("div",{className:"flex justify-end space-x-2",children:[k.status==="draft"&&c.jsx("button",{onClick:()=>A(k.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:c.jsx(us,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>r(`/admin/courses/${k.id}?tab=quizzes`),className:"text-purple-600 hover:text-purple-900",title:"Grer les Quiz",children:c.jsx(zu,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>r(`/admin/courses/${k.id}?tab=exercises`),className:"text-orange-600 hover:text-orange-900",title:"Grer les Exercices",children:c.jsx(qu,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>t(k),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:c.jsx(DF,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>b(k.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:c.jsx(SF,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>E(k.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:c.jsx(ff,{className:"w-5 h-5"})})]})})]},k.id))})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),c.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(k=>k.status==="published").length})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),c.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.filter(k=>k.status==="draft").length})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.reduce((k,H)=>k+(H.enrolledCount||0),0)})]})]})]})}function S$({courseId:t=null,onSave:e,onCancel:r}){const[n,s]=ne.useState(!1),[i,o]=ne.useState(null),[a,l]=ne.useState(null),[u,f]=ne.useState(null),[g,y]=ne.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});ne.useEffect(()=>{t&&m()},[t]);const m=async()=>{s(!0);const I=await Fs.getCourseById(t);I.success?(y(I.course),I.course.thumbnail&&l(I.course.thumbnail)):o(I.error),s(!1)},E=I=>{const{name:k,value:H}=I.target;y(Z=>({...Z,[k]:H}))},b=I=>{const k=I.target.files[0];if(k){f(k);const H=new FileReader;H.onloadend=()=>{l(H.result)},H.readAsDataURL(k)}},A=async I=>{I.preventDefault(),s(!0),o(null);try{let k;t?k=await Fs.updateCourse(t,g,u):k=await Fs.createCourse(g,u),k.success?e==null||e(k):o(k.error)}catch(k){o(k.message)}finally{s(!1)}},x=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],T=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return c.jsxs("form",{onSubmit:A,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),c.jsx("button",{type:"button",onClick:r,className:"text-gray-400 hover:text-gray-600",children:c.jsx(ph,{className:"w-6 h-6"})})]}),i&&c.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),c.jsx("input",{type:"text",name:"title",value:g.title,onChange:E,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),c.jsx("input",{type:"text",name:"shortDescription",value:g.shortDescription,onChange:E,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),c.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.shortDescription.length,"/150 caractres"]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),c.jsx("textarea",{name:"description",value:g.description,onChange:E,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),c.jsx("select",{name:"category",value:g.category,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(I=>c.jsx("option",{value:I.value,children:I.label},I.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),c.jsx("select",{name:"level",value:g.level,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:T.map(I=>c.jsx("option",{value:I.value,children:I.label},I.value))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),c.jsx("input",{type:"number",name:"price",value:g.price,onChange:E,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),c.jsx("input",{type:"text",name:"duration",value:g.duration,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),c.jsx("input",{type:"text",name:"instructor",value:g.instructor,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),c.jsxs("select",{name:"language",value:g.language,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("option",{value:"fr",children:"Franais"}),c.jsx("option",{value:"ar",children:"Arabe"}),c.jsx("option",{value:"en",children:"Anglais"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),c.jsxs("div",{className:"flex items-start space-x-4",children:[a&&c.jsxs("div",{className:"relative",children:[c.jsx("img",{src:a,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),c.jsx("button",{type:"button",onClick:()=>{l(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:c.jsx(ph,{className:"w-4 h-4"})})]}),c.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[c.jsx(d6,{className:"w-8 h-8 mb-2"}),c.jsx("span",{className:"text-sm",children:"Choisir une image"}),c.jsx("input",{type:"file",accept:"image/*",onChange:b,className:"hidden"})]})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),c.jsx("input",{type:"url",name:"videoUrl",value:g.videoUrl,onChange:E,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),c.jsx("textarea",{name:"requirements",value:g.requirements,onChange:E,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),c.jsx("textarea",{name:"outcomes",value:g.outcomes,onChange:E,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),c.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[c.jsx("button",{type:"button",onClick:r,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),c.jsxs("button",{type:"submit",disabled:n,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[c.jsx(Of,{className:"w-4 h-4 mr-2"}),n?"Enregistrement...":"Enregistrer"]})]})]})}function T$({onSelectDetails:t}){const[e,r]=ne.useState([]),[n,s]=ne.useState(!0),[i,o]=ne.useState(""),[a,l]=ne.useState("all");ne.useEffect(()=>{u()},[]);const u=async()=>{try{s(!0);const m=(await Do(kn(mt,"users"))).docs.map(E=>({id:E.id,...E.data()}));r(m)}catch(y){console.error("Error loading users:",y)}finally{s(!1)}},f=async(y,m)=>{try{const E=m==="admin"?"student":"admin",b=Qt(mt,"users",y);await qs(b,{role:E}),u()}catch(E){console.error("Error updating role:",E),alert("Erreur lors de la mise  jour du rle")}},g=e.filter(y=>{var b,A;const m=((b=y.displayName)==null?void 0:b.toLowerCase().includes(i.toLowerCase()))||((A=y.email)==null?void 0:A.toLowerCase().includes(i.toLowerCase())),E=a==="all"||y.role===a;return m&&E});return c.jsxs("div",{className:"space-y-4",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),c.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{className:"relative",children:[c.jsx(u6,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),c.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:y=>o(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),c.jsxs("select",{value:a,onChange:y=>l(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[c.jsx("option",{value:"all",children:"Tous les rles"}),c.jsx("option",{value:"student",children:"tudiants"}),c.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),n?c.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),c.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):g.length===0?c.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:c.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):c.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),c.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(y=>{var m,E,b;return c.jsxs("tr",{className:"hover:bg-gray-50",children:[c.jsx("td",{className:"px-6 py-4",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:y.photoURL?c.jsx("img",{src:y.photoURL,alt:y.displayName,className:"h-10 w-10 rounded-full"}):c.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:c.jsx(L5,{className:"w-6 h-6 text-green-600"})})}),c.jsx("div",{className:"ml-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.displayName||"Sans nom"})})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.email}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:y.role==="admin"?c.jsxs(c.Fragment,{children:[c.jsx(h6,{className:"w-3 h-3 mr-1"}),"Admin"]}):c.jsxs(c.Fragment,{children:[c.jsx(zn,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((m=y.purchasedCourses)==null?void 0:m.length)||0}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx(NF,{className:"w-4 h-4 mr-1"}),((b=(E=y.createdAt)==null?void 0:E.toDate)==null?void 0:b.call(E).toLocaleDateString())||"N/A"]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:c.jsx("button",{onClick:()=>f(y.id,y.role),className:`${y.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:y.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},y.id)})})]})}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),c.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(y=>y.role==="student").length})]}),c.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[c.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),c.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(y=>y.role==="admin").length})]})]})]})}function $N(){const t=$s(),{userProfile:e}=ps(),[r,n]=ne.useState("overview"),[s,i]=ne.useState(!1),[o,a]=ne.useState(null),[l,u]=ne.useState([]),f=[{id:"overview",name:"Vue d'ensemble",icon:_F},{id:"courses",name:"Cours",icon:zn},{id:"users",name:"Utilisateurs",icon:e0},{id:"settings",name:"Paramtres",icon:FF}],g=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],y=()=>{switch(r){case"overview":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(m=>c.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("div",{children:[c.jsx("p",{className:"text-sm font-medium text-gray-600",children:m.name}),c.jsx("p",{className:"text-2xl font-bold text-gray-900",children:m.value})]}),c.jsx("div",{className:`text-sm font-medium ${m.changeType==="positive"?"text-green-600":"text-red-600"}`,children:m.change})]})},m.name))}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsx("div",{className:"md:col-span-2",children:c.jsx(b$,{onCreate:m=>u(E=>[m,...E])})}),c.jsx("div",{children:c.jsxs("div",{className:"bg-white rounded-lg shadow",children:[c.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:c.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),c.jsx("div",{className:"p-4",children:c.jsx(E$,{items:l})})]})})]})]});case"courses":return c.jsx("div",{className:"space-y-6",children:s?c.jsx(S$,{courseId:o==null?void 0:o.id,onSave:()=>{i(!1),a(null)},onCancel:()=>{i(!1),a(null)}}):c.jsx(A$,{onEdit:m=>{t(`/admin/courses/${m.id}`)},onAddNew:()=>{a(null),i(!0)}})});case"users":return c.jsx(T$,{});case"settings":return c.jsxs("div",{className:"space-y-6",children:[c.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),c.jsx("div",{className:"bg-white rounded-lg shadow",children:c.jsx("div",{className:"p-6",children:c.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return c.jsxs("div",{className:"min-h-screen bg-gray-50",children:[c.jsx("div",{className:"bg-white shadow-sm",children:c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:c.jsx("div",{className:"flex items-center justify-between",children:c.jsxs("div",{children:[c.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),c.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",e==null?void 0:e.displayName]})]})})})}),c.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:c.jsxs("div",{className:"flex space-x-8",children:[c.jsx("div",{className:"w-64",children:c.jsx("nav",{className:"space-y-1",children:f.map(m=>{const E=m.icon;return c.jsxs("button",{onClick:()=>n(m.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${r===m.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[c.jsx(E,{className:"w-5 h-5 mr-3"}),m.name]},m.id)})})}),c.jsx("div",{className:"flex-1",children:y()})]})})]})}function QT({icon:t,title:e,description:r,actionLabel:n,onAction:s,actionIcon:i}){return c.jsxs("div",{className:"text-center py-12 px-4",children:[t&&c.jsx("div",{className:"w-16 h-16 mx-auto mb-4 bg-gray-100 rounded-2xl flex items-center justify-center",children:c.jsx(t,{className:"w-8 h-8 text-gray-400"})}),c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e}),r&&c.jsx("p",{className:"text-gray-600 mb-6 max-w-sm mx-auto",children:r}),n&&s&&c.jsxs("button",{onClick:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[i&&c.jsx(i,{className:"w-5 h-5"}),n]})]})}function I$({module:t,isExpanded:e,isEditing:r,onToggle:n,onUpdate:s,onDelete:i,onMoveUp:o,onMoveDown:a,onStartEdit:l,onEndEdit:u}){const[f,g]=ne.useState(null),[y,m]=ne.useState(t.title),[E,b]=ne.useState(0),[A,x]=ne.useState(!1),[T,I]=ne.useState({title:"",videoUrl:"",videoType:"youtube",duration:"",description:"",isFree:!1}),k=()=>{s({...t,title:y}),u()},H=()=>{m(t.title),u()},Z=()=>{const N={id:`lesson_${Date.now()}`,title:"",videoUrl:"",duration:0,description:"",isFree:!1,order:t.lessons.length+1};s({...t,lessons:[...t.lessons,N]}),g(N.id)},F=(N,R)=>{s({...t,lessons:t.lessons.map(L=>L.id===N?{...L,...R}:L)})},P=N=>{const R=t.lessons.find(L=>L.id===N);if(!R.title||!R.videoUrl){alert("Please fill in title and video URL");return}g(null)},C=N=>{confirm("Delete this lesson?")&&s({...t,lessons:t.lessons.filter(R=>R.id!==N)})},O=(N,R)=>{const L=[...t.lessons],X=L.findIndex(fe=>fe.id===N);if(R==="up"&&X>0||R==="down"&&X<L.length-1){const fe=R==="up"?X-1:X+1;[L[X],L[fe]]=[L[fe],L[X]],L.forEach((le,ye)=>le.order=ye+1),s({...t,lessons:L})}};return c.jsxs("div",{className:"border-2 border-gray-200 rounded-xl overflow-hidden bg-white",children:[c.jsx("div",{className:"bg-gray-50 p-4",children:c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("button",{onClick:n,className:"text-gray-600 hover:text-gray-900 transition",children:e?c.jsx(im,{className:"w-5 h-5"}):c.jsx(C5,{className:"w-5 h-5"})}),r?c.jsx("input",{type:"text",value:y,onChange:N=>m(N.target.value),placeholder:"Module title",className:"flex-1 px-3 py-2 border-2 border-green-500 rounded-lg focus:outline-none",autoFocus:!0}):c.jsx("h3",{className:"flex-1 text-lg font-semibold text-gray-900",children:t.title||"Untitled Module"}),c.jsxs("span",{className:"text-sm text-gray-500",children:[t.lessons.length," lesson",t.lessons.length!==1?"s":""]}),c.jsx("div",{className:"flex gap-2",children:r?c.jsxs(c.Fragment,{children:[c.jsx("button",{onClick:k,className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition",title:"Save",children:c.jsx(Of,{className:"w-5 h-5"})}),c.jsx("button",{onClick:H,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Cancel",children:c.jsx(ph,{className:"w-5 h-5"})})]}):c.jsxs(c.Fragment,{children:[o&&c.jsx("button",{onClick:o,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move up",children:c.jsx(vb,{className:"w-5 h-5"})}),a&&c.jsx("button",{onClick:a,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move down",children:c.jsx(im,{className:"w-5 h-5"})}),c.jsx("button",{onClick:l,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit module",children:c.jsx(l2,{className:"w-5 h-5"})}),c.jsx("button",{onClick:()=>confirm("Delete this module and all its lessons?")&&i(),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete module",children:c.jsx(ff,{className:"w-5 h-5"})})]})})]})}),e&&c.jsx("div",{className:"p-4",children:t.lessons.length===0?c.jsx(QT,{icon:xb,title:"No lessons yet",description:"Add your first lesson to this module",actionLabel:"Add Lesson",actionIcon:wa,onAction:Z}):c.jsxs("div",{className:"space-y-3",children:[t.lessons.map((N,R)=>c.jsx("div",{className:"border-2 border-gray-100 rounded-lg p-4 hover:border-gray-200 transition",children:f===N.id?c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lesson Title *"}),c.jsx("input",{type:"text",value:N.title,onChange:L=>F(N.id,{title:L.target.value}),placeholder:"Introduction to...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration (minutes) *"}),c.jsx("input",{type:"number",value:N.duration,onChange:L=>F(N.id,{duration:parseInt(L.target.value)||0}),placeholder:"15",min:"1",max:"300",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Video Source *"}),c.jsxs("div",{className:"flex gap-3 mb-3",children:[c.jsxs("button",{type:"button",onClick:()=>F(N.id,{videoType:"youtube"}),className:`flex-1 px-4 py-2 border-2 rounded-lg font-medium transition ${(N.videoType||"youtube")==="youtube"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`,children:[c.jsx(CF,{className:"w-4 h-4 inline mr-2"}),"YouTube URL"]}),c.jsxs("button",{type:"button",onClick:()=>F(N.id,{videoType:"cloudinary"}),className:`flex-1 px-4 py-2 border-2 rounded-lg font-medium transition ${N.videoType==="cloudinary"?"border-green-500 bg-green-50 text-green-700":"border-gray-300 text-gray-600 hover:border-gray-400"}`,children:[c.jsx(d6,{className:"w-4 h-4 inline mr-2"}),"Upload Video"]})]}),(N.videoType||"youtube")==="youtube"?c.jsx("input",{type:"url",value:N.videoUrl,onChange:L=>F(N.id,{videoUrl:L.target.value}),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"}):c.jsxs("div",{children:[c.jsx("input",{type:"file",accept:"video/*",onChange:async L=>{const X=L.target.files[0];if(!X)return;x(!0),b(0);const fe=await m6.uploadVideo(X,"courses/videos",le=>b(le));x(!1),fe.success?F(N.id,{videoUrl:fe.url,duration:Math.ceil(fe.duration/60)||N.duration}):alert("Upload failed: "+fe.error)},className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-green-50 file:text-green-700 hover:file:bg-green-100",disabled:A}),A&&c.jsxs("div",{className:"mt-2",children:[c.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[c.jsx("span",{children:"Uploading..."}),c.jsxs("span",{children:[E,"%"]})]}),c.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:c.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all",style:{width:`${E}%`}})})]}),N.videoUrl&&!A&&c.jsx("p",{className:"mt-2 text-sm text-green-600",children:" Video uploaded successfully"})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{value:N.description,onChange:L=>F(N.id,{description:L.target.value}),placeholder:"What will students learn in this lesson?",rows:"2",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]}),c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"checkbox",id:`free-${N.id}`,checked:N.isFree,onChange:L=>F(N.id,{isFree:L.target.checked}),className:"w-4 h-4 text-green-600 rounded focus:ring-2 focus:ring-green-500"}),c.jsx("label",{htmlFor:`free-${N.id}`,className:"text-sm text-gray-700",children:"Freemium Preview (available without purchase)"})]}),c.jsxs("div",{className:"flex gap-2 pt-2",children:[c.jsx("button",{onClick:()=>P(N.id),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Save Lesson"}),c.jsx("button",{onClick:()=>g(null),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition",children:"Cancel"})]})]}):c.jsxs("div",{className:"flex items-start gap-4",children:[c.jsxs("div",{className:"flex-1",children:[c.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.jsx("h4",{className:"font-semibold text-gray-900",children:N.title||"Untitled Lesson"}),N.isFree&&c.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Free Preview"})]}),N.description&&c.jsx("p",{className:"text-sm text-gray-600 mb-2",children:N.description}),c.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[N.videoUrl&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(xb,{className:"w-4 h-4"}),"Video"]}),N.duration>0&&c.jsxs("span",{className:"flex items-center gap-1",children:[c.jsx(dh,{className:"w-4 h-4"}),N.duration," min"]})]})]}),c.jsxs("div",{className:"flex gap-2",children:[R>0&&c.jsx("button",{onClick:()=>O(N.id,"up"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move up",children:c.jsx(vb,{className:"w-4 h-4"})}),R<t.lessons.length-1&&c.jsx("button",{onClick:()=>O(N.id,"down"),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",title:"Move down",children:c.jsx(im,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>g(N.id),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition",title:"Edit lesson",children:c.jsx(l2,{className:"w-4 h-4"})}),c.jsx("button",{onClick:()=>C(N.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Delete lesson",children:c.jsx(ff,{className:"w-4 h-4"})})]})]})},N.id)),c.jsxs("button",{onClick:Z,className:"w-full py-2 border-2 border-dashed border-gray-300 rounded-lg text-gray-600 hover:border-green-500 hover:text-green-600 transition font-medium flex items-center justify-center gap-2",children:[c.jsx(wa,{className:"w-4 h-4"}),"Add Lesson"]})]})})]})}function k$({modules:t=[],onChange:e}){const[r,n]=ne.useState(new Set),[s,i]=ne.useState(null),o=g=>{const y=new Set(r);y.has(g)?y.delete(g):y.add(g),n(y)},a=()=>{const g={id:`module_${Date.now()}`,title:"",order:t.length+1,lessons:[]};e([...t,g]),i(g.id),n(new Set([...r,g.id]))},l=(g,y)=>{e(t.map(m=>m.id===g?y:m))},u=g=>{e(t.filter(y=>y.id!==g))},f=(g,y)=>{const m=t.findIndex(E=>E.id===g);if(y==="up"&&m>0||y==="down"&&m<t.length-1){const E=[...t],b=y==="up"?m-1:m+1;[E[m],E[b]]=[E[b],E[m]],E.forEach((A,x)=>A.order=x+1),e(E)}};return t.length===0?c.jsx(QT,{icon:wa,title:"No modules yet",description:"Start building your course by adding your first module",actionLabel:"Add Module",actionIcon:wa,onAction:a}):c.jsxs("div",{className:"space-y-4",children:[t.map((g,y)=>c.jsx(I$,{module:g,isExpanded:r.has(g.id),isEditing:s===g.id,onToggle:()=>o(g.id),onUpdate:m=>l(g.id,m),onDelete:()=>u(g.id),onMoveUp:y>0?()=>f(g.id,"up"):null,onMoveDown:y<t.length-1?()=>f(g.id,"down"):null,onStartEdit:()=>i(g.id),onEndEdit:()=>i(null)},g.id)),c.jsxs("button",{onClick:a,className:"w-full py-3 border-2 border-dashed border-gray-300 rounded-xl text-gray-600 hover:border-green-500 hover:text-green-600 transition font-medium flex items-center justify-center gap-2",children:[c.jsx(wa,{className:"w-5 h-5"}),"Add Module"]})]})}function P$({courseId:t,quiz:e,onSave:r,onCancel:n}){const[s,i]=ne.useState(e||{title:"",description:"",difficulty:"beginner",questions:[]}),[o,a]=ne.useState(!1),[l,u]=ne.useState(""),f=()=>{const b={question:"",options:["","","",""],correctAnswer:0,explanation:""};i({...s,questions:[...s.questions,b]})},g=(b,A,x)=>{const T=[...s.questions];T[b]={...T[b],[A]:x},i({...s,questions:T})},y=(b,A,x)=>{const T=[...s.questions];T[b].options[A]=x,i({...s,questions:T})},m=b=>{const A=s.questions.filter((x,T)=>T!==b);i({...s,questions:A})},E=async()=>{if(!s.title.trim()){u("Le titre du quiz est requis");return}if(s.questions.length===0){u("Ajoutez au moins une question");return}for(let b=0;b<s.questions.length;b++){const A=s.questions[b];if(!A.question.trim()){u(`Question ${b+1}: Le texte de la question est requis`);return}if(A.options.some(x=>!x.trim())){u(`Question ${b+1}: Toutes les options doivent tre remplies`);return}}a(!0),u("");try{const b={...s,courseId:t,order:(e==null?void 0:e.order)||1};let A;e!=null&&e.id?A=await Ol.updateQuiz(e.id,b):A=await Ol.createQuiz(b),A.success?r==null||r(A):u(A.error||"Erreur lors de l'enregistrement")}catch(b){u(b.message)}finally{a(!1)}};return c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?"Modifier le Quiz":"Crer un Quiz"}),c.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:c.jsx(ph,{className:"w-5 h-5"})})]}),l&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded flex items-start gap-3",children:[c.jsx(k5,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800",children:l})]}),c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du Quiz *"}),c.jsx("input",{type:"text",value:s.title,onChange:b=>i({...s,title:b.target.value}),placeholder:"Ex: Quiz React - Les Bases",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:b=>i({...s,description:b.target.value}),placeholder:"Testez vos connaissances...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficult"}),c.jsxs("select",{value:s.difficulty,onChange:b=>i({...s,difficulty:b.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none",children:[c.jsx("option",{value:"beginner",children:"Dbutant"}),c.jsx("option",{value:"intermediate",children:"Intermdiaire"}),c.jsx("option",{value:"advanced",children:"Avanc"})]})]})]}),c.jsxs("div",{className:"space-y-6 mb-6",children:[c.jsxs("div",{className:"flex items-center justify-between",children:[c.jsxs("h4",{className:"text-lg font-semibold text-gray-900",children:["Questions (",s.questions.length,")"]}),c.jsxs("button",{onClick:f,className:"flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[c.jsx(wa,{className:"w-4 h-4"}),"Ajouter une question"]})]}),s.questions.map((b,A)=>c.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsxs("span",{className:"text-sm font-semibold text-gray-700",children:["Question ",A+1]}),c.jsx("button",{onClick:()=>m(A),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",title:"Supprimer la question",children:c.jsx(ff,{className:"w-4 h-4"})})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Texte de la question *"}),c.jsx("input",{type:"text",value:b.question,onChange:x=>g(A,"question",x.target.value),placeholder:"Qu'est-ce que React?",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Options (slectionnez la bonne rponse) *"}),c.jsx("div",{className:"space-y-2",children:b.options.map((x,T)=>c.jsxs("div",{className:"flex items-center gap-3",children:[c.jsx("input",{type:"radio",name:`correct-${A}`,checked:b.correctAnswer===T,onChange:()=>g(A,"correctAnswer",T),className:"w-5 h-5 text-green-600 focus:ring-2 focus:ring-green-500"}),c.jsx("input",{type:"text",value:x,onChange:I=>y(A,T,I.target.value),placeholder:`Option ${T+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]},T))})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Explication (optionnel)"}),c.jsx("textarea",{value:b.explanation,onChange:x=>g(A,"explanation",x.target.value),placeholder:"Pourquoi cette rponse est correcte...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]})]},A)),s.questions.length===0&&c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[c.jsx("p",{className:"text-gray-600 mb-4",children:"Aucune question ajoute"}),c.jsxs("button",{onClick:f,className:"inline-flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[c.jsx(wa,{className:"w-5 h-5"}),"Ajouter la premire question"]})]})]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:n,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"Annuler"}),c.jsxs("button",{onClick:E,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Of,{className:"w-5 h-5"}),o?"Enregistrement...":"Enregistrer le quiz"]})]})]})}function C$({courseId:t,exercise:e,onSave:r,onCancel:n}){const[s,i]=ne.useState(e||{title:"",description:"",levels:[{level:0,title:"Niveau 1: Dbutant",description:"",starterCode:"",solution:"",hints:[]},{level:1,title:"Niveau 2: Intermdiaire",description:"",starterCode:"",solution:"",hints:[]},{level:2,title:"Niveau 3: Avanc",description:"",starterCode:"",solution:"",hints:[]}]}),[o,a]=ne.useState(!1),[l,u]=ne.useState(""),f=(A,x,T)=>{const I=[...s.levels];I[A]={...I[A],[x]:T},i({...s,levels:I})},g=A=>{const x=[...s.levels];x[A].hints.push(""),i({...s,levels:x})},y=(A,x,T)=>{const I=[...s.levels];I[A].hints[x]=T,i({...s,levels:I})},m=(A,x)=>{const T=[...s.levels];T[A].hints.splice(x,1),i({...s,levels:T})},E=async()=>{if(!s.title.trim()){u("Le titre de l'exercice est requis");return}for(let A=0;A<s.levels.length;A++){const x=s.levels[A];if(!x.description.trim()){u(`Niveau ${A+1}: La description est requise`);return}if(!x.solution.trim()){u(`Niveau ${A+1}: La solution est requise`);return}}a(!0),u("");try{const A={...s,courseId:t,order:(e==null?void 0:e.order)||1};let x;e!=null&&e.id?x=await Dl.updateExercise(e.id,A):x=await Dl.createExercise(A),x.success?r==null||r(x):u(x.error||"Erreur lors de l'enregistrement")}catch(A){u(A.message)}finally{a(!1)}},b=A=>{switch(A){case 0:return"border-green-300 bg-green-50";case 1:return"border-yellow-300 bg-yellow-50";case 2:return"border-red-300 bg-red-50";default:return"border-gray-300 bg-gray-50"}};return c.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:e?"Modifier l'Exercice":"Crer un Exercice"}),c.jsx("button",{onClick:n,className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition",children:c.jsx(ph,{className:"w-5 h-5"})})]}),l&&c.jsxs("div",{className:"mb-4 p-4 bg-red-50 border-l-4 border-red-500 rounded flex items-start gap-3",children:[c.jsx(k5,{className:"w-5 h-5 text-red-600 flex-shrink-0 mt-0.5"}),c.jsx("p",{className:"text-sm text-red-800",children:l})]}),c.jsxs("div",{className:"space-y-4 mb-6",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre de l'Exercice *"}),c.jsx("input",{type:"text",value:s.title,onChange:A=>i({...s,title:A.target.value}),placeholder:"Ex: Application To-Do List",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),c.jsx("textarea",{value:s.description,onChange:A=>i({...s,description:A.target.value}),placeholder:"Crez une application To-Do List avec React...",rows:"2",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none"})]})]}),c.jsxs("div",{className:"space-y-6 mb-6",children:[c.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:"Niveaux (3)"}),s.levels.map((A,x)=>c.jsxs("div",{className:`border-2 rounded-xl p-6 ${b(x)}`,children:[c.jsx("div",{className:"mb-4",children:c.jsx("h5",{className:"text-lg font-bold text-gray-900 mb-2",children:A.title})}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectif du niveau *"}),c.jsx("textarea",{value:A.description,onChange:T=>f(x,"description",T.target.value),placeholder:"Ce que l'tudiant doit accomplir...",rows:"3",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-white"})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Code de dpart (optionnel)"}),c.jsx("textarea",{value:A.starterCode,onChange:T=>f(x,"starterCode",T.target.value),placeholder:"// Code initial que l'tudiant verra...",rows:"6",className:"w-full px-4 py-2 font-mono text-sm border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-gray-900 text-green-400",spellCheck:!1})]}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Solution *"}),c.jsx("textarea",{value:A.solution,onChange:T=>f(x,"solution",T.target.value),placeholder:"// Solution complte...",rows:"8",className:"w-full px-4 py-2 font-mono text-sm border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none bg-gray-900 text-green-400",spellCheck:!1})]}),c.jsxs("div",{children:[c.jsxs("div",{className:"flex items-center justify-between mb-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Indices (optionnel)"}),c.jsxs("button",{onClick:()=>g(x),className:"flex items-center gap-1 px-3 py-1 text-sm bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition",children:[c.jsx(wa,{className:"w-4 h-4"}),"Ajouter un indice"]})]}),c.jsx("div",{className:"space-y-2",children:A.hints.map((T,I)=>c.jsxs("div",{className:"flex items-center gap-2",children:[c.jsx("input",{type:"text",value:T,onChange:k=>y(x,I,k.target.value),placeholder:`Indice ${I+1}`,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none bg-white"}),c.jsx("button",{onClick:()=>m(x,I),className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition",children:c.jsx(ff,{className:"w-4 h-4"})})]},I))})]})]},x))]}),c.jsxs("div",{className:"flex gap-3 justify-end",children:[c.jsx("button",{onClick:n,className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-lg hover:bg-gray-300 transition font-medium",children:"Annuler"}),c.jsxs("button",{onClick:E,disabled:o,className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:[c.jsx(Of,{className:"w-5 h-5"}),o?"Enregistrement...":"Enregistrer l'exercice"]})]})]})}function j$(){const{courseId:t}=Ev(),e=$s(),[r]=mE(),[n,s]=ne.useState(null),[i,o]=ne.useState([]),[a,l]=ne.useState([]),[u,f]=ne.useState([]),g=r.get("tab"),y=g==="quizzes"||g==="exercises"?g:"modules",[m,E]=ne.useState(y),[b,A]=ne.useState(!1),[x,T]=ne.useState(!1),[I,k]=ne.useState(null),[H,Z]=ne.useState(null),[F,P]=ne.useState(!0),C=[{id:"modules",name:"Modules & Leons",icon:LF},{id:"quizzes",name:"Quiz",icon:zu},{id:"exercises",name:"Exercices",icon:qu}];ne.useEffect(()=>{t&&O()},[t]);const O=async()=>{P(!0);const le=await Fs.getCourseById(t);le.success&&(s(le.course),o(le.course.modules||[]));const ye=await Ol.getQuizzesByCourse(t);ye.success&&l(ye.quizzes);const ee=await Dl.getExercisesByCourse(t);ee.success&&f(ee.exercises),P(!1)},N=async le=>{o(le),await Fs.updateCourse(t,{modules:le})},R=async le=>{A(!1),k(null),await O()},L=async le=>{T(!1),Z(null),await O()},X=async le=>{confirm("Supprimer ce quiz?")&&(await Ol.deleteQuiz(le),await O())},fe=async le=>{confirm("Supprimer cet exercice?")&&(await Dl.deleteExercise(le),await O())};return F?c.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:c.jsxs("div",{className:"text-center",children:[c.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600",children:"Chargement..."})]})}):c.jsx("div",{className:"min-h-screen bg-gray-50",children:c.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-8",children:[c.jsxs("div",{className:"mb-8",children:[c.jsxs("button",{onClick:()=>e("/admin"),className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 mb-4",children:[c.jsx(hh,{className:"w-5 h-5"}),"Retour au tableau de bord"]}),c.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:n==null?void 0:n.title}),c.jsx("p",{className:"text-gray-600 mt-2",children:"Grer le contenu du cours"})]}),c.jsx("div",{className:"bg-white rounded-xl shadow-sm mb-6",children:c.jsx("div",{className:"border-b border-gray-200",children:c.jsx("nav",{className:"flex -mb-px",children:C.map(le=>{const ye=le.icon;return c.jsxs("button",{onClick:()=>E(le.id),className:`flex items-center gap-2 px-6 py-4 text-sm font-medium border-b-2 transition ${m===le.id?"border-green-500 text-green-600":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:[c.jsx(ye,{className:"w-5 h-5"}),le.name]},le.id)})})})}),c.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[m==="modules"&&c.jsx(k$,{modules:i,onChange:N}),m==="quizzes"&&c.jsx("div",{className:"space-y-6",children:b?c.jsx(P$,{courseId:t,quiz:I,onSave:R,onCancel:()=>{A(!1),k(null)}}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Quiz (",a.length,")"]}),c.jsxs("button",{onClick:()=>A(!0),className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[c.jsx(zu,{className:"w-5 h-5"}),"Crer un quiz"]})]}),a.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[c.jsx(zu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun quiz pour ce cours"}),c.jsx("button",{onClick:()=>A(!0),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Crer le premier quiz"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(le=>{var ye;return c.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-green-300 transition",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:le.title}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:le.description}),c.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[c.jsxs("span",{className:"px-3 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:[((ye=le.questions)==null?void 0:ye.length)||0," questions"]}),c.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 text-xs rounded-full font-medium capitalize",children:le.difficulty})]}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{k(le),A(!0)},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-sm font-medium",children:"Modifier"}),c.jsx("button",{onClick:()=>X(le.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium",children:"Supprimer"})]})]},le.id)})})]})}),m==="exercises"&&c.jsx("div",{className:"space-y-6",children:x?c.jsx(C$,{courseId:t,exercise:H,onSave:L,onCancel:()=>{T(!1),Z(null)}}):c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:["Exercices (",u.length,")"]}),c.jsxs("button",{onClick:()=>T(!0),className:"flex items-center gap-2 px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:[c.jsx(qu,{className:"w-5 h-5"}),"Crer un exercice"]})]}),u.length===0?c.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-xl border-2 border-dashed border-gray-300",children:[c.jsx(qu,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),c.jsx("p",{className:"text-gray-600 mb-4",children:"Aucun exercice pour ce cours"}),c.jsx("button",{onClick:()=>T(!0),className:"px-6 py-3 bg-green-500 text-white rounded-lg hover:bg-green-600 transition font-medium",children:"Crer le premier exercice"})]}):c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(le=>{var ye;return c.jsxs("div",{className:"border-2 border-gray-200 rounded-xl p-6 hover:border-green-300 transition",children:[c.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:le.title}),c.jsx("p",{className:"text-sm text-gray-600 mb-4",children:le.description}),c.jsx("div",{className:"flex items-center gap-2 mb-4",children:c.jsxs("span",{className:"px-3 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:[((ye=le.levels)==null?void 0:ye.length)||0," niveaux"]})}),c.jsxs("div",{className:"flex gap-2",children:[c.jsx("button",{onClick:()=>{Z(le),T(!0)},className:"flex-1 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition text-sm font-medium",children:"Modifier"}),c.jsx("button",{onClick:()=>fe(le.id),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition text-sm font-medium",children:"Supprimer"})]})]},le.id)})})]})})]})]})})}function L$(){return c.jsx(lj,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:c.jsx(gF,{children:c.jsxs(ej,{children:[c.jsx(Fn,{path:"/login",element:c.jsx(UF,{})}),c.jsx(Fn,{path:"/register",element:c.jsx(VF,{})}),c.jsx(Fn,{path:"/forgot-password",element:c.jsx(BF,{})}),c.jsx(Fn,{path:"/",element:c.jsx(WF,{})}),c.jsx(Fn,{path:"/debug",element:c.jsx(yF,{})}),c.jsx(Fn,{path:"/courses",element:c.jsx(eU,{})}),c.jsx(Fn,{path:"/courses/:id",element:c.jsx(tU,{})}),c.jsx(Fn,{path:"/payment/success",element:c.jsx(x$,{})}),c.jsx(Fn,{path:"/payment/cancel",element:c.jsx(_$,{})}),c.jsx(Fn,{path:"/profile",element:c.jsx(iu,{children:c.jsx(GF,{})})}),c.jsx(Fn,{path:p6,element:c.jsx(iu,{adminOnly:!0,children:c.jsx($N,{})})}),c.jsx(Fn,{path:zF,element:c.jsx(iu,{adminOnly:!0,children:c.jsx($N,{})})}),c.jsx(Fn,{path:"/admin/courses/:courseId",element:c.jsx(iu,{adminOnly:!0,children:c.jsx(j$,{})})}),c.jsx(Fn,{path:"/my-courses",element:c.jsx(iu,{children:c.jsx(w$,{})})}),c.jsx(Fn,{path:"/course/:courseId/view",element:c.jsx(iu,{children:c.jsx(v$,{})})}),c.jsx(Fn,{path:"*",element:c.jsx(Ry,{to:"/",replace:!0})})]})})})}V1.createRoot(document.getElementById("root")).render(c.jsx(r4.StrictMode,{children:c.jsx(L$,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{ar as _,An as a,E0 as c,HN as g,Hz as p,ne as r,s0 as u};
