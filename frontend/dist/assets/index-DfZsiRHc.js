function Q1(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in t)){const i=Object.getOwnPropertyDescriptor(r,s);i&&Object.defineProperty(t,s,i.get?i:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();var vd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function n_(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function Y1(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var n=function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};n.prototype=e.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(t).forEach(function(r){var s=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return t[r]}})}),n}var r_={exports:{}},ec={},s_={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aa=Symbol.for("react.element"),X1=Symbol.for("react.portal"),J1=Symbol.for("react.fragment"),Z1=Symbol.for("react.strict_mode"),eI=Symbol.for("react.profiler"),tI=Symbol.for("react.provider"),nI=Symbol.for("react.context"),rI=Symbol.for("react.forward_ref"),sI=Symbol.for("react.suspense"),iI=Symbol.for("react.memo"),oI=Symbol.for("react.lazy"),ny=Symbol.iterator;function aI(t){return t===null||typeof t!="object"?null:(t=ny&&t[ny]||t["@@iterator"],typeof t=="function"?t:null)}var i_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},o_=Object.assign,a_={};function Ui(t,e,n){this.props=t,this.context=e,this.refs=a_,this.updater=n||i_}Ui.prototype.isReactComponent={};Ui.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ui.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function l_(){}l_.prototype=Ui.prototype;function Wf(t,e,n){this.props=t,this.context=e,this.refs=a_,this.updater=n||i_}var Kf=Wf.prototype=new l_;Kf.constructor=Wf;o_(Kf,Ui.prototype);Kf.isPureReactComponent=!0;var ry=Array.isArray,u_=Object.prototype.hasOwnProperty,Gf={current:null},c_={key:!0,ref:!0,__self:!0,__source:!0};function d_(t,e,n){var r,s={},i=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)u_.call(e,r)&&!c_.hasOwnProperty(r)&&(s[r]=e[r]);var u=arguments.length-2;if(u===1)s.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];s.children=c}if(t&&t.defaultProps)for(r in u=t.defaultProps,u)s[r]===void 0&&(s[r]=u[r]);return{$$typeof:Aa,type:t,key:i,ref:o,props:s,_owner:Gf.current}}function lI(t,e){return{$$typeof:Aa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qf(t){return typeof t=="object"&&t!==null&&t.$$typeof===Aa}function uI(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var sy=/\/+/g;function _d(t,e){return typeof t=="object"&&t!==null&&t.key!=null?uI(""+t.key):e.toString(36)}function Ll(t,e,n,r,s){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Aa:case X1:o=!0}}if(o)return o=t,s=s(o),t=r===""?"."+_d(o,0):r,ry(s)?(n="",t!=null&&(n=t.replace(sy,"$&/")+"/"),Ll(s,e,n,"",function(d){return d})):s!=null&&(Qf(s)&&(s=lI(s,n+(!s.key||o&&o.key===s.key?"":(""+s.key).replace(sy,"$&/")+"/")+t)),e.push(s)),1;if(o=0,r=r===""?".":r+":",ry(t))for(var u=0;u<t.length;u++){i=t[u];var c=r+_d(i,u);o+=Ll(i,e,n,c,s)}else if(c=aI(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=r+_d(i,u++),o+=Ll(i,e,n,c,s);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fl(t,e,n){if(t==null)return t;var r=[],s=0;return Ll(t,r,"","",function(i){return e.call(n,i,s++)}),r}function cI(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},Ml={transition:null},dI={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Gf};function h_(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:fl,forEach:function(t,e,n){fl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fl(t,function(){e++}),e},toArray:function(t){return fl(t,function(e){return e})||[]},only:function(t){if(!Qf(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ui;ee.Fragment=J1;ee.Profiler=eI;ee.PureComponent=Wf;ee.StrictMode=Z1;ee.Suspense=sI;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=dI;ee.act=h_;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=o_({},t.props),s=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Gf.current),e.key!==void 0&&(s=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)u_.call(e,c)&&!c_.hasOwnProperty(c)&&(r[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)r.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];r.children=u}return{$$typeof:Aa,type:t.type,key:s,ref:i,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:nI,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tI,_context:t},t.Consumer=t};ee.createElement=d_;ee.createFactory=function(t){var e=d_.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:rI,render:t}};ee.isValidElement=Qf;ee.lazy=function(t){return{$$typeof:oI,_payload:{_status:-1,_result:t},_init:cI}};ee.memo=function(t,e){return{$$typeof:iI,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};ee.unstable_act=h_;ee.useCallback=function(t,e){return It.current.useCallback(t,e)};ee.useContext=function(t){return It.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ee.useEffect=function(t,e){return It.current.useEffect(t,e)};ee.useId=function(){return It.current.useId()};ee.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return It.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ee.useRef=function(t){return It.current.useRef(t)};ee.useState=function(t){return It.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return It.current.useTransition()};ee.version="18.3.1";s_.exports=ee;var R=s_.exports;const f_=n_(R),hI=Q1({__proto__:null,default:f_},[R]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fI=R,pI=Symbol.for("react.element"),mI=Symbol.for("react.fragment"),gI=Object.prototype.hasOwnProperty,yI=fI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,vI={key:!0,ref:!0,__self:!0,__source:!0};function p_(t,e,n){var r,s={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)gI.call(e,r)&&!vI.hasOwnProperty(r)&&(s[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)s[r]===void 0&&(s[r]=e[r]);return{$$typeof:pI,type:t,key:i,ref:o,props:s,_owner:yI.current}}ec.Fragment=mI;ec.jsx=p_;ec.jsxs=p_;r_.exports=ec;var l=r_.exports,fh={},m_={exports:{}},Bt={},g_={exports:{}},y_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var Z=B.length;B.push(Y);e:for(;0<Z;){var xe=Z-1>>>1,ue=B[xe];if(0<s(ue,Y))B[xe]=Y,B[Z]=ue,Z=xe;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],Z=B.pop();if(Z!==Y){B[0]=Z;e:for(var xe=0,ue=B.length,Se=ue>>>1;xe<Se;){var On=2*(xe+1)-1,Dn=B[On],Ln=On+1,Mn=B[Ln];if(0>s(Dn,Z))Ln<ue&&0>s(Mn,Dn)?(B[xe]=Mn,B[Ln]=Z,xe=Ln):(B[xe]=Dn,B[On]=Z,xe=On);else if(Ln<ue&&0>s(Mn,Z))B[xe]=Mn,B[Ln]=Z,xe=Ln;else break e}}return Y}function s(B,Y){var Z=B.sortIndex-Y.sortIndex;return Z!==0?Z:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,u=o.now();t.unstable_now=function(){return o.now()-u}}var c=[],d=[],f=1,g=null,p=3,E=!1,N=!1,T=!1,A=typeof setTimeout=="function"?setTimeout:null,w=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function y(B){for(var Y=n(d);Y!==null;){if(Y.callback===null)r(d);else if(Y.startTime<=B)r(d),Y.sortIndex=Y.expirationTime,e(c,Y);else break;Y=n(d)}}function C(B){if(T=!1,y(B),!N)if(n(c)!==null)N=!0,Yi(L);else{var Y=n(d);Y!==null&&jn(C,Y.startTime-B)}}function L(B,Y){N=!1,T&&(T=!1,w(_),_=-1),E=!0;var Z=p;try{for(y(Y),g=n(c);g!==null&&(!(g.expirationTime>Y)||B&&!k());){var xe=g.callback;if(typeof xe=="function"){g.callback=null,p=g.priorityLevel;var ue=xe(g.expirationTime<=Y);Y=t.unstable_now(),typeof ue=="function"?g.callback=ue:g===n(c)&&r(c),y(Y)}else r(c);g=n(c)}if(g!==null)var Se=!0;else{var On=n(d);On!==null&&jn(C,On.startTime-Y),Se=!1}return Se}finally{g=null,p=Z,E=!1}}var V=!1,I=null,_=-1,S=5,b=-1;function k(){return!(t.unstable_now()-b<S)}function j(){if(I!==null){var B=t.unstable_now();b=B;var Y=!0;try{Y=I(!0,B)}finally{Y?P():(V=!1,I=null)}}else V=!1}var P;if(typeof x=="function")P=function(){x(j)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,Rn=He.port2;He.port1.onmessage=j,P=function(){Rn.postMessage(null)}}else P=function(){A(j,0)};function Yi(B){I=B,V||(V=!0,P())}function jn(B,Y){_=A(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){N||E||(N=!0,Yi(L))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(B){switch(p){case 1:case 2:case 3:var Y=3;break;default:Y=p}var Z=p;p=Y;try{return B()}finally{p=Z}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var Z=p;p=B;try{return Y()}finally{p=Z}},t.unstable_scheduleCallback=function(B,Y,Z){var xe=t.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?xe+Z:xe):Z=xe,B){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=Z+ue,B={id:f++,callback:Y,priorityLevel:B,startTime:Z,expirationTime:ue,sortIndex:-1},Z>xe?(B.sortIndex=Z,e(d,B),n(c)===null&&B===n(d)&&(T?(w(_),_=-1):T=!0,jn(C,Z-xe))):(B.sortIndex=ue,e(c,B),N||E||(N=!0,Yi(L))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var Y=p;return function(){var Z=p;p=Y;try{return B.apply(this,arguments)}finally{p=Z}}}})(y_);g_.exports=y_;var _I=g_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xI=R,zt=_I;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v_=new Set,Go={};function As(t,e){_i(t,e),_i(t+"Capture",e)}function _i(t,e){for(Go[t]=e,t=0;t<e.length;t++)v_.add(e[t])}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ph=Object.prototype.hasOwnProperty,wI=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,iy={},oy={};function EI(t){return ph.call(oy,t)?!0:ph.call(iy,t)?!1:wI.test(t)?oy[t]=!0:(iy[t]=!0,!1)}function TI(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function bI(t,e,n,r){if(e===null||typeof e>"u"||TI(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nt(t,e,n,r,s,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var tt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){tt[t]=new Nt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];tt[e]=new Nt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){tt[t]=new Nt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){tt[t]=new Nt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){tt[t]=new Nt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){tt[t]=new Nt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){tt[t]=new Nt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){tt[t]=new Nt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){tt[t]=new Nt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Yf=/[\-:]([a-z])/g;function Xf(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Yf,Xf);tt[e]=new Nt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Yf,Xf);tt[e]=new Nt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Yf,Xf);tt[e]=new Nt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){tt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!1,!1)});tt.xlinkHref=new Nt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){tt[t]=new Nt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jf(t,e,n,r){var s=tt.hasOwnProperty(e)?tt[e]:null;(s!==null?s.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(bI(e,n,s,r)&&(n=null),r||s===null?EI(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):s.mustUseProperty?t[s.propertyName]=n===null?s.type===3?!1:"":n:(e=s.attributeName,r=s.attributeNamespace,n===null?t.removeAttribute(e):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var ar=xI.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,pl=Symbol.for("react.element"),Qs=Symbol.for("react.portal"),Ys=Symbol.for("react.fragment"),Zf=Symbol.for("react.strict_mode"),mh=Symbol.for("react.profiler"),__=Symbol.for("react.provider"),x_=Symbol.for("react.context"),ep=Symbol.for("react.forward_ref"),gh=Symbol.for("react.suspense"),yh=Symbol.for("react.suspense_list"),tp=Symbol.for("react.memo"),yr=Symbol.for("react.lazy"),w_=Symbol.for("react.offscreen"),ay=Symbol.iterator;function co(t){return t===null||typeof t!="object"?null:(t=ay&&t[ay]||t["@@iterator"],typeof t=="function"?t:null)}var Te=Object.assign,xd;function To(t){if(xd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);xd=e&&e[1]||""}return`
`+xd+t}var wd=!1;function Ed(t,e){if(!t||wd)return"";wd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var r=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){r=d}t.call(e.prototype)}else{try{throw Error()}catch(d){r=d}t()}}catch(d){if(d&&r&&typeof d.stack=="string"){for(var s=d.stack.split(`
`),i=r.stack.split(`
`),o=s.length-1,u=i.length-1;1<=o&&0<=u&&s[o]!==i[u];)u--;for(;1<=o&&0<=u;o--,u--)if(s[o]!==i[u]){if(o!==1||u!==1)do if(o--,u--,0>u||s[o]!==i[u]){var c=`
`+s[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=u);break}}}finally{wd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?To(t):""}function II(t){switch(t.tag){case 5:return To(t.type);case 16:return To("Lazy");case 13:return To("Suspense");case 19:return To("SuspenseList");case 0:case 2:case 15:return t=Ed(t.type,!1),t;case 11:return t=Ed(t.type.render,!1),t;case 1:return t=Ed(t.type,!0),t;default:return""}}function vh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Ys:return"Fragment";case Qs:return"Portal";case mh:return"Profiler";case Zf:return"StrictMode";case gh:return"Suspense";case yh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case x_:return(t.displayName||"Context")+".Consumer";case __:return(t._context.displayName||"Context")+".Provider";case ep:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case tp:return e=t.displayName||null,e!==null?e:vh(t.type)||"Memo";case yr:e=t._payload,t=t._init;try{return vh(t(e))}catch{}}return null}function NI(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return vh(e);case 8:return e===Zf?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Fr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function E_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function SI(t){var e=E_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return s.call(this)},set:function(o){r=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ml(t){t._valueTracker||(t._valueTracker=SI(t))}function T_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=E_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function iu(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function _h(t,e){var n=e.checked;return Te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ly(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Fr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function b_(t,e){e=e.checked,e!=null&&Jf(t,"checked",e,!1)}function xh(t,e){b_(t,e);var n=Fr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?wh(t,e.type,n):e.hasOwnProperty("defaultValue")&&wh(t,e.type,Fr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function uy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function wh(t,e,n){(e!=="number"||iu(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var bo=Array.isArray;function li(t,e,n,r){if(t=t.options,e){e={};for(var s=0;s<n.length;s++)e["$"+n[s]]=!0;for(n=0;n<t.length;n++)s=e.hasOwnProperty("$"+t[n].value),t[n].selected!==s&&(t[n].selected=s),s&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Fr(n),e=null,s=0;s<t.length;s++){if(t[s].value===n){t[s].selected=!0,r&&(t[s].defaultSelected=!0);return}e!==null||t[s].disabled||(e=t[s])}e!==null&&(e.selected=!0)}}function Eh(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return Te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function cy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(F(92));if(bo(n)){if(1<n.length)throw Error(F(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Fr(n)}}function I_(t,e){var n=Fr(e.value),r=Fr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function dy(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function N_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Th(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?N_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gl,S_=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,s){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,s)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gl=gl||document.createElement("div"),gl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Qo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},AI=["Webkit","ms","Moz","O"];Object.keys(Oo).forEach(function(t){AI.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Oo[e]=Oo[t]})});function A_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Oo.hasOwnProperty(t)&&Oo[t]?(""+e).trim():e+"px"}function P_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=A_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,s):t[n]=s}}var PI=Te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function bh(t,e){if(e){if(PI[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Ih(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Nh=null;function np(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Sh=null,ui=null,ci=null;function hy(t){if(t=ka(t)){if(typeof Sh!="function")throw Error(F(280));var e=t.stateNode;e&&(e=ic(e),Sh(t.stateNode,t.type,e))}}function C_(t){ui?ci?ci.push(t):ci=[t]:ui=t}function k_(){if(ui){var t=ui,e=ci;if(ci=ui=null,hy(t),e)for(t=0;t<e.length;t++)hy(e[t])}}function R_(t,e){return t(e)}function j_(){}var Td=!1;function O_(t,e,n){if(Td)return t(e,n);Td=!0;try{return R_(t,e,n)}finally{Td=!1,(ui!==null||ci!==null)&&(j_(),k_())}}function Yo(t,e){var n=t.stateNode;if(n===null)return null;var r=ic(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(F(231,e,typeof n));return n}var Ah=!1;if(Zn)try{var ho={};Object.defineProperty(ho,"passive",{get:function(){Ah=!0}}),window.addEventListener("test",ho,ho),window.removeEventListener("test",ho,ho)}catch{Ah=!1}function CI(t,e,n,r,s,i,o,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var Do=!1,ou=null,au=!1,Ph=null,kI={onError:function(t){Do=!0,ou=t}};function RI(t,e,n,r,s,i,o,u,c){Do=!1,ou=null,CI.apply(kI,arguments)}function jI(t,e,n,r,s,i,o,u,c){if(RI.apply(this,arguments),Do){if(Do){var d=ou;Do=!1,ou=null}else throw Error(F(198));au||(au=!0,Ph=d)}}function Ps(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function D_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function fy(t){if(Ps(t)!==t)throw Error(F(188))}function OI(t){var e=t.alternate;if(!e){if(e=Ps(t),e===null)throw Error(F(188));return e!==t?null:t}for(var n=t,r=e;;){var s=n.return;if(s===null)break;var i=s.alternate;if(i===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return fy(s),t;if(i===r)return fy(s),e;i=i.sibling}throw Error(F(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,u=s.child;u;){if(u===n){o=!0,n=s,r=i;break}if(u===r){o=!0,r=s,n=i;break}u=u.sibling}if(!o){for(u=i.child;u;){if(u===n){o=!0,n=i,r=s;break}if(u===r){o=!0,r=i,n=s;break}u=u.sibling}if(!o)throw Error(F(189))}}if(n.alternate!==r)throw Error(F(190))}if(n.tag!==3)throw Error(F(188));return n.stateNode.current===n?t:e}function L_(t){return t=OI(t),t!==null?M_(t):null}function M_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=M_(t);if(e!==null)return e;t=t.sibling}return null}var V_=zt.unstable_scheduleCallback,py=zt.unstable_cancelCallback,DI=zt.unstable_shouldYield,LI=zt.unstable_requestPaint,ke=zt.unstable_now,MI=zt.unstable_getCurrentPriorityLevel,rp=zt.unstable_ImmediatePriority,U_=zt.unstable_UserBlockingPriority,lu=zt.unstable_NormalPriority,VI=zt.unstable_LowPriority,F_=zt.unstable_IdlePriority,tc=null,wn=null;function UI(t){if(wn&&typeof wn.onCommitFiberRoot=="function")try{wn.onCommitFiberRoot(tc,t,void 0,(t.current.flags&128)===128)}catch{}}var cn=Math.clz32?Math.clz32:zI,FI=Math.log,$I=Math.LN2;function zI(t){return t>>>=0,t===0?32:31-(FI(t)/$I|0)|0}var yl=64,vl=4194304;function Io(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function uu(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,s=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var u=o&~s;u!==0?r=Io(u):(i&=o,i!==0&&(r=Io(i)))}else o=n&~s,o!==0?r=Io(o):i!==0&&(r=Io(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&s)&&(s=r&-r,i=e&-e,s>=i||s===16&&(i&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-cn(e),s=1<<n,r|=t[n],e&=~s;return r}function BI(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function qI(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,s=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-cn(i),u=1<<o,c=s[o];c===-1?(!(u&n)||u&r)&&(s[o]=BI(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function Ch(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function $_(){var t=yl;return yl<<=1,!(yl&4194240)&&(yl=64),t}function bd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-cn(e),t[e]=n}function HI(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var s=31-cn(n),i=1<<s;e[s]=0,r[s]=-1,t[s]=-1,n&=~i}}function sp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-cn(n),s=1<<r;s&e|t[r]&e&&(t[r]|=e),n&=~s}}var ae=0;function z_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var B_,ip,q_,H_,W_,kh=!1,_l=[],Pr=null,Cr=null,kr=null,Xo=new Map,Jo=new Map,_r=[],WI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function my(t,e){switch(t){case"focusin":case"focusout":Pr=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":Xo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Jo.delete(e.pointerId)}}function fo(t,e,n,r,s,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},e!==null&&(e=ka(e),e!==null&&ip(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,s!==null&&e.indexOf(s)===-1&&e.push(s),t)}function KI(t,e,n,r,s){switch(e){case"focusin":return Pr=fo(Pr,t,e,n,r,s),!0;case"dragenter":return Cr=fo(Cr,t,e,n,r,s),!0;case"mouseover":return kr=fo(kr,t,e,n,r,s),!0;case"pointerover":var i=s.pointerId;return Xo.set(i,fo(Xo.get(i)||null,t,e,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,Jo.set(i,fo(Jo.get(i)||null,t,e,n,r,s)),!0}return!1}function K_(t){var e=os(t.target);if(e!==null){var n=Ps(e);if(n!==null){if(e=n.tag,e===13){if(e=D_(n),e!==null){t.blockedOn=e,W_(t.priority,function(){q_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Rh(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Nh=r,n.target.dispatchEvent(r),Nh=null}else return e=ka(n),e!==null&&ip(e),t.blockedOn=n,!1;e.shift()}return!0}function gy(t,e,n){Vl(t)&&n.delete(e)}function GI(){kh=!1,Pr!==null&&Vl(Pr)&&(Pr=null),Cr!==null&&Vl(Cr)&&(Cr=null),kr!==null&&Vl(kr)&&(kr=null),Xo.forEach(gy),Jo.forEach(gy)}function po(t,e){t.blockedOn===e&&(t.blockedOn=null,kh||(kh=!0,zt.unstable_scheduleCallback(zt.unstable_NormalPriority,GI)))}function Zo(t){function e(s){return po(s,t)}if(0<_l.length){po(_l[0],t);for(var n=1;n<_l.length;n++){var r=_l[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Pr!==null&&po(Pr,t),Cr!==null&&po(Cr,t),kr!==null&&po(kr,t),Xo.forEach(e),Jo.forEach(e),n=0;n<_r.length;n++)r=_r[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<_r.length&&(n=_r[0],n.blockedOn===null);)K_(n),n.blockedOn===null&&_r.shift()}var di=ar.ReactCurrentBatchConfig,cu=!0;function QI(t,e,n,r){var s=ae,i=di.transition;di.transition=null;try{ae=1,op(t,e,n,r)}finally{ae=s,di.transition=i}}function YI(t,e,n,r){var s=ae,i=di.transition;di.transition=null;try{ae=4,op(t,e,n,r)}finally{ae=s,di.transition=i}}function op(t,e,n,r){if(cu){var s=Rh(t,e,n,r);if(s===null)Od(t,e,r,du,n),my(t,r);else if(KI(s,t,e,n,r))r.stopPropagation();else if(my(t,r),e&4&&-1<WI.indexOf(t)){for(;s!==null;){var i=ka(s);if(i!==null&&B_(i),i=Rh(t,e,n,r),i===null&&Od(t,e,r,du,n),i===s)break;s=i}s!==null&&r.stopPropagation()}else Od(t,e,r,null,n)}}var du=null;function Rh(t,e,n,r){if(du=null,t=np(r),t=os(t),t!==null)if(e=Ps(t),e===null)t=null;else if(n=e.tag,n===13){if(t=D_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return du=t,null}function G_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(MI()){case rp:return 1;case U_:return 4;case lu:case VI:return 16;case F_:return 536870912;default:return 16}default:return 16}}var br=null,ap=null,Ul=null;function Q_(){if(Ul)return Ul;var t,e=ap,n=e.length,r,s="value"in br?br.value:br.textContent,i=s.length;for(t=0;t<n&&e[t]===s[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===s[i-r];r++);return Ul=s.slice(t,1<r?1-r:void 0)}function Fl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xl(){return!0}function yy(){return!1}function qt(t){function e(n,r,s,i,o){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?xl:yy,this.isPropagationStopped=yy,this}return Te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xl)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xl)},persist:function(){},isPersistent:xl}),e}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},lp=qt(Fi),Ca=Te({},Fi,{view:0,detail:0}),XI=qt(Ca),Id,Nd,mo,nc=Te({},Ca,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:up,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==mo&&(mo&&t.type==="mousemove"?(Id=t.screenX-mo.screenX,Nd=t.screenY-mo.screenY):Nd=Id=0,mo=t),Id)},movementY:function(t){return"movementY"in t?t.movementY:Nd}}),vy=qt(nc),JI=Te({},nc,{dataTransfer:0}),ZI=qt(JI),eN=Te({},Ca,{relatedTarget:0}),Sd=qt(eN),tN=Te({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),nN=qt(tN),rN=Te({},Fi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),sN=qt(rN),iN=Te({},Fi,{data:0}),_y=qt(iN),oN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},aN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uN(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=lN[t])?!!e[t]:!1}function up(){return uN}var cN=Te({},Ca,{key:function(t){if(t.key){var e=oN[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Fl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?aN[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:up,charCode:function(t){return t.type==="keypress"?Fl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Fl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),dN=qt(cN),hN=Te({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xy=qt(hN),fN=Te({},Ca,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:up}),pN=qt(fN),mN=Te({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),gN=qt(mN),yN=Te({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),vN=qt(yN),_N=[9,13,27,32],cp=Zn&&"CompositionEvent"in window,Lo=null;Zn&&"documentMode"in document&&(Lo=document.documentMode);var xN=Zn&&"TextEvent"in window&&!Lo,Y_=Zn&&(!cp||Lo&&8<Lo&&11>=Lo),wy=" ",Ey=!1;function X_(t,e){switch(t){case"keyup":return _N.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function J_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xs=!1;function wN(t,e){switch(t){case"compositionend":return J_(e);case"keypress":return e.which!==32?null:(Ey=!0,wy);case"textInput":return t=e.data,t===wy&&Ey?null:t;default:return null}}function EN(t,e){if(Xs)return t==="compositionend"||!cp&&X_(t,e)?(t=Q_(),Ul=ap=br=null,Xs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Y_&&e.locale!=="ko"?null:e.data;default:return null}}var TN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ty(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!TN[t.type]:e==="textarea"}function Z_(t,e,n,r){C_(r),e=hu(e,"onChange"),0<e.length&&(n=new lp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Mo=null,ea=null;function bN(t){cx(t,0)}function rc(t){var e=ei(t);if(T_(e))return t}function IN(t,e){if(t==="change")return e}var ex=!1;if(Zn){var Ad;if(Zn){var Pd="oninput"in document;if(!Pd){var by=document.createElement("div");by.setAttribute("oninput","return;"),Pd=typeof by.oninput=="function"}Ad=Pd}else Ad=!1;ex=Ad&&(!document.documentMode||9<document.documentMode)}function Iy(){Mo&&(Mo.detachEvent("onpropertychange",tx),ea=Mo=null)}function tx(t){if(t.propertyName==="value"&&rc(ea)){var e=[];Z_(e,ea,t,np(t)),O_(bN,e)}}function NN(t,e,n){t==="focusin"?(Iy(),Mo=e,ea=n,Mo.attachEvent("onpropertychange",tx)):t==="focusout"&&Iy()}function SN(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rc(ea)}function AN(t,e){if(t==="click")return rc(e)}function PN(t,e){if(t==="input"||t==="change")return rc(e)}function CN(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:CN;function ta(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!ph.call(e,s)||!pn(t[s],e[s]))return!1}return!0}function Ny(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sy(t,e){var n=Ny(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ny(n)}}function nx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?nx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function rx(){for(var t=window,e=iu();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=iu(t.document)}return e}function dp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kN(t){var e=rx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&nx(n.ownerDocument.documentElement,n)){if(r!==null&&dp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var s=n.textContent.length,i=Math.min(r.start,s);r=r.end===void 0?i:Math.min(r.end,s),!t.extend&&i>r&&(s=r,r=i,i=s),s=Sy(n,i);var o=Sy(n,r);s&&o&&(t.rangeCount!==1||t.anchorNode!==s.node||t.anchorOffset!==s.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(s.node,s.offset),t.removeAllRanges(),i>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RN=Zn&&"documentMode"in document&&11>=document.documentMode,Js=null,jh=null,Vo=null,Oh=!1;function Ay(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Oh||Js==null||Js!==iu(r)||(r=Js,"selectionStart"in r&&dp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Vo&&ta(Vo,r)||(Vo=r,r=hu(jh,"onSelect"),0<r.length&&(e=new lp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Js)))}function wl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zs={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},Cd={},sx={};Zn&&(sx=document.createElement("div").style,"AnimationEvent"in window||(delete Zs.animationend.animation,delete Zs.animationiteration.animation,delete Zs.animationstart.animation),"TransitionEvent"in window||delete Zs.transitionend.transition);function sc(t){if(Cd[t])return Cd[t];if(!Zs[t])return t;var e=Zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in sx)return Cd[t]=e[n];return t}var ix=sc("animationend"),ox=sc("animationiteration"),ax=sc("animationstart"),lx=sc("transitionend"),ux=new Map,Py="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Wr(t,e){ux.set(t,e),As(e,[t])}for(var kd=0;kd<Py.length;kd++){var Rd=Py[kd],jN=Rd.toLowerCase(),ON=Rd[0].toUpperCase()+Rd.slice(1);Wr(jN,"on"+ON)}Wr(ix,"onAnimationEnd");Wr(ox,"onAnimationIteration");Wr(ax,"onAnimationStart");Wr("dblclick","onDoubleClick");Wr("focusin","onFocus");Wr("focusout","onBlur");Wr(lx,"onTransitionEnd");_i("onMouseEnter",["mouseout","mouseover"]);_i("onMouseLeave",["mouseout","mouseover"]);_i("onPointerEnter",["pointerout","pointerover"]);_i("onPointerLeave",["pointerout","pointerover"]);As("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));As("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));As("onBeforeInput",["compositionend","keypress","textInput","paste"]);As("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));As("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));As("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var No="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),DN=new Set("cancel close invalid load scroll toggle".split(" ").concat(No));function Cy(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,jI(r,e,void 0,t),t.currentTarget=null}function cx(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],s=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var o=r.length-1;0<=o;o--){var u=r[o],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&s.isPropagationStopped())break e;Cy(s,u,d),i=c}else for(o=0;o<r.length;o++){if(u=r[o],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&s.isPropagationStopped())break e;Cy(s,u,d),i=c}}}if(au)throw t=Ph,au=!1,Ph=null,t}function ge(t,e){var n=e[Uh];n===void 0&&(n=e[Uh]=new Set);var r=t+"__bubble";n.has(r)||(dx(e,t,2,!1),n.add(r))}function jd(t,e,n){var r=0;e&&(r|=4),dx(n,t,r,e)}var El="_reactListening"+Math.random().toString(36).slice(2);function na(t){if(!t[El]){t[El]=!0,v_.forEach(function(n){n!=="selectionchange"&&(DN.has(n)||jd(n,!1,t),jd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[El]||(e[El]=!0,jd("selectionchange",!1,e))}}function dx(t,e,n,r){switch(G_(e)){case 1:var s=QI;break;case 4:s=YI;break;default:s=op}n=s.bind(null,e,n,t),s=void 0,!Ah||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(s=!0),r?s!==void 0?t.addEventListener(e,n,{capture:!0,passive:s}):t.addEventListener(e,n,!0):s!==void 0?t.addEventListener(e,n,{passive:s}):t.addEventListener(e,n,!1)}function Od(t,e,n,r,s){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var u=r.stateNode.containerInfo;if(u===s||u.nodeType===8&&u.parentNode===s)break;if(o===4)for(o=r.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===s||c.nodeType===8&&c.parentNode===s))return;o=o.return}for(;u!==null;){if(o=os(u),o===null)return;if(c=o.tag,c===5||c===6){r=i=o;continue e}u=u.parentNode}}r=r.return}O_(function(){var d=i,f=np(n),g=[];e:{var p=ux.get(t);if(p!==void 0){var E=lp,N=t;switch(t){case"keypress":if(Fl(n)===0)break e;case"keydown":case"keyup":E=dN;break;case"focusin":N="focus",E=Sd;break;case"focusout":N="blur",E=Sd;break;case"beforeblur":case"afterblur":E=Sd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=vy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=ZI;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=pN;break;case ix:case ox:case ax:E=nN;break;case lx:E=gN;break;case"scroll":E=XI;break;case"wheel":E=vN;break;case"copy":case"cut":case"paste":E=sN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=xy}var T=(e&4)!==0,A=!T&&t==="scroll",w=T?p!==null?p+"Capture":null:p;T=[];for(var x=d,y;x!==null;){y=x;var C=y.stateNode;if(y.tag===5&&C!==null&&(y=C,w!==null&&(C=Yo(x,w),C!=null&&T.push(ra(x,C,y)))),A)break;x=x.return}0<T.length&&(p=new E(p,N,null,n,f),g.push({event:p,listeners:T}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",E=t==="mouseout"||t==="pointerout",p&&n!==Nh&&(N=n.relatedTarget||n.fromElement)&&(os(N)||N[er]))break e;if((E||p)&&(p=f.window===f?f:(p=f.ownerDocument)?p.defaultView||p.parentWindow:window,E?(N=n.relatedTarget||n.toElement,E=d,N=N?os(N):null,N!==null&&(A=Ps(N),N!==A||N.tag!==5&&N.tag!==6)&&(N=null)):(E=null,N=d),E!==N)){if(T=vy,C="onMouseLeave",w="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(T=xy,C="onPointerLeave",w="onPointerEnter",x="pointer"),A=E==null?p:ei(E),y=N==null?p:ei(N),p=new T(C,x+"leave",E,n,f),p.target=A,p.relatedTarget=y,C=null,os(f)===d&&(T=new T(w,x+"enter",N,n,f),T.target=y,T.relatedTarget=A,C=T),A=C,E&&N)t:{for(T=E,w=N,x=0,y=T;y;y=$s(y))x++;for(y=0,C=w;C;C=$s(C))y++;for(;0<x-y;)T=$s(T),x--;for(;0<y-x;)w=$s(w),y--;for(;x--;){if(T===w||w!==null&&T===w.alternate)break t;T=$s(T),w=$s(w)}T=null}else T=null;E!==null&&ky(g,p,E,T,!1),N!==null&&A!==null&&ky(g,A,N,T,!0)}}e:{if(p=d?ei(d):window,E=p.nodeName&&p.nodeName.toLowerCase(),E==="select"||E==="input"&&p.type==="file")var L=IN;else if(Ty(p))if(ex)L=PN;else{L=SN;var V=NN}else(E=p.nodeName)&&E.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(L=AN);if(L&&(L=L(t,d))){Z_(g,L,n,f);break e}V&&V(t,p,d),t==="focusout"&&(V=p._wrapperState)&&V.controlled&&p.type==="number"&&wh(p,"number",p.value)}switch(V=d?ei(d):window,t){case"focusin":(Ty(V)||V.contentEditable==="true")&&(Js=V,jh=d,Vo=null);break;case"focusout":Vo=jh=Js=null;break;case"mousedown":Oh=!0;break;case"contextmenu":case"mouseup":case"dragend":Oh=!1,Ay(g,n,f);break;case"selectionchange":if(RN)break;case"keydown":case"keyup":Ay(g,n,f)}var I;if(cp)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Xs?X_(t,n)&&(_="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(_="onCompositionStart");_&&(Y_&&n.locale!=="ko"&&(Xs||_!=="onCompositionStart"?_==="onCompositionEnd"&&Xs&&(I=Q_()):(br=f,ap="value"in br?br.value:br.textContent,Xs=!0)),V=hu(d,_),0<V.length&&(_=new _y(_,t,null,n,f),g.push({event:_,listeners:V}),I?_.data=I:(I=J_(n),I!==null&&(_.data=I)))),(I=xN?wN(t,n):EN(t,n))&&(d=hu(d,"onBeforeInput"),0<d.length&&(f=new _y("onBeforeInput","beforeinput",null,n,f),g.push({event:f,listeners:d}),f.data=I))}cx(g,e)})}function ra(t,e,n){return{instance:t,listener:e,currentTarget:n}}function hu(t,e){for(var n=e+"Capture",r=[];t!==null;){var s=t,i=s.stateNode;s.tag===5&&i!==null&&(s=i,i=Yo(t,n),i!=null&&r.unshift(ra(t,i,s)),i=Yo(t,e),i!=null&&r.push(ra(t,i,s))),t=t.return}return r}function $s(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,n,r,s){for(var i=e._reactName,o=[];n!==null&&n!==r;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===r)break;u.tag===5&&d!==null&&(u=d,s?(c=Yo(n,i),c!=null&&o.unshift(ra(n,c,u))):s||(c=Yo(n,i),c!=null&&o.push(ra(n,c,u)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var LN=/\r\n?/g,MN=/\u0000|\uFFFD/g;function Ry(t){return(typeof t=="string"?t:""+t).replace(LN,`
`).replace(MN,"")}function Tl(t,e,n){if(e=Ry(e),Ry(t)!==e&&n)throw Error(F(425))}function fu(){}var Dh=null,Lh=null;function Mh(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vh=typeof setTimeout=="function"?setTimeout:void 0,VN=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,UN=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(t){return jy.resolve(null).then(t).catch(FN)}:Vh;function FN(t){setTimeout(function(){throw t})}function Dd(t,e){var n=e,r=0;do{var s=n.nextSibling;if(t.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){t.removeChild(s),Zo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);Zo(e)}function Rr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var $i=Math.random().toString(36).slice(2),xn="__reactFiber$"+$i,sa="__reactProps$"+$i,er="__reactContainer$"+$i,Uh="__reactEvents$"+$i,$N="__reactListeners$"+$i,zN="__reactHandles$"+$i;function os(t){var e=t[xn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[er]||n[xn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Oy(t);t!==null;){if(n=t[xn])return n;t=Oy(t)}return e}t=n,n=t.parentNode}return null}function ka(t){return t=t[xn]||t[er],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ei(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function ic(t){return t[sa]||null}var Fh=[],ti=-1;function Kr(t){return{current:t}}function ye(t){0>ti||(t.current=Fh[ti],Fh[ti]=null,ti--)}function pe(t,e){ti++,Fh[ti]=t.current,t.current=e}var $r={},gt=Kr($r),Rt=Kr(!1),gs=$r;function xi(t,e){var n=t.type.contextTypes;if(!n)return $r;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var s={},i;for(i in n)s[i]=e[i];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=s),s}function jt(t){return t=t.childContextTypes,t!=null}function pu(){ye(Rt),ye(gt)}function Dy(t,e,n){if(gt.current!==$r)throw Error(F(168));pe(gt,e),pe(Rt,n)}function hx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in e))throw Error(F(108,NI(t)||"Unknown",s));return Te({},n,r)}function mu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$r,gs=gt.current,pe(gt,t),pe(Rt,Rt.current),!0}function Ly(t,e,n){var r=t.stateNode;if(!r)throw Error(F(169));n?(t=hx(t,e,gs),r.__reactInternalMemoizedMergedChildContext=t,ye(Rt),ye(gt),pe(gt,t)):ye(Rt),pe(Rt,n)}var zn=null,oc=!1,Ld=!1;function fx(t){zn===null?zn=[t]:zn.push(t)}function BN(t){oc=!0,fx(t)}function Gr(){if(!Ld&&zn!==null){Ld=!0;var t=0,e=ae;try{var n=zn;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}zn=null,oc=!1}catch(s){throw zn!==null&&(zn=zn.slice(t+1)),V_(rp,Gr),s}finally{ae=e,Ld=!1}}return null}var ni=[],ri=0,gu=null,yu=0,Ht=[],Wt=0,ys=null,qn=1,Hn="";function ns(t,e){ni[ri++]=yu,ni[ri++]=gu,gu=t,yu=e}function px(t,e,n){Ht[Wt++]=qn,Ht[Wt++]=Hn,Ht[Wt++]=ys,ys=t;var r=qn;t=Hn;var s=32-cn(r)-1;r&=~(1<<s),n+=1;var i=32-cn(e)+s;if(30<i){var o=s-s%5;i=(r&(1<<o)-1).toString(32),r>>=o,s-=o,qn=1<<32-cn(e)+s|n<<s|r,Hn=i+t}else qn=1<<i|n<<s|r,Hn=t}function hp(t){t.return!==null&&(ns(t,1),px(t,1,0))}function fp(t){for(;t===gu;)gu=ni[--ri],ni[ri]=null,yu=ni[--ri],ni[ri]=null;for(;t===ys;)ys=Ht[--Wt],Ht[Wt]=null,Hn=Ht[--Wt],Ht[Wt]=null,qn=Ht[--Wt],Ht[Wt]=null}var $t=null,Ut=null,ve=!1,on=null;function mx(t,e){var n=Kt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function My(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,$t=t,Ut=Rr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,$t=t,Ut=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=ys!==null?{id:qn,overflow:Hn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Kt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,$t=t,Ut=null,!0):!1;default:return!1}}function $h(t){return(t.mode&1)!==0&&(t.flags&128)===0}function zh(t){if(ve){var e=Ut;if(e){var n=e;if(!My(t,e)){if($h(t))throw Error(F(418));e=Rr(n.nextSibling);var r=$t;e&&My(t,e)?mx(r,n):(t.flags=t.flags&-4097|2,ve=!1,$t=t)}}else{if($h(t))throw Error(F(418));t.flags=t.flags&-4097|2,ve=!1,$t=t}}}function Vy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;$t=t}function bl(t){if(t!==$t)return!1;if(!ve)return Vy(t),ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Mh(t.type,t.memoizedProps)),e&&(e=Ut)){if($h(t))throw gx(),Error(F(418));for(;e;)mx(t,e),e=Rr(e.nextSibling)}if(Vy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ut=Rr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ut=null}}else Ut=$t?Rr(t.stateNode.nextSibling):null;return!0}function gx(){for(var t=Ut;t;)t=Rr(t.nextSibling)}function wi(){Ut=$t=null,ve=!1}function pp(t){on===null?on=[t]:on.push(t)}var qN=ar.ReactCurrentBatchConfig;function go(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(F(309));var r=n.stateNode}if(!r)throw Error(F(147,t));var s=r,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var u=s.refs;o===null?delete u[i]:u[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!n._owner)throw Error(F(290,t))}return t}function Il(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Uy(t){var e=t._init;return e(t._payload)}function yx(t){function e(w,x){if(t){var y=w.deletions;y===null?(w.deletions=[x],w.flags|=16):y.push(x)}}function n(w,x){if(!t)return null;for(;x!==null;)e(w,x),x=x.sibling;return null}function r(w,x){for(w=new Map;x!==null;)x.key!==null?w.set(x.key,x):w.set(x.index,x),x=x.sibling;return w}function s(w,x){return w=Lr(w,x),w.index=0,w.sibling=null,w}function i(w,x,y){return w.index=y,t?(y=w.alternate,y!==null?(y=y.index,y<x?(w.flags|=2,x):y):(w.flags|=2,x)):(w.flags|=1048576,x)}function o(w){return t&&w.alternate===null&&(w.flags|=2),w}function u(w,x,y,C){return x===null||x.tag!==6?(x=Bd(y,w.mode,C),x.return=w,x):(x=s(x,y),x.return=w,x)}function c(w,x,y,C){var L=y.type;return L===Ys?f(w,x,y.props.children,C,y.key):x!==null&&(x.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&Uy(L)===x.type)?(C=s(x,y.props),C.ref=go(w,x,y),C.return=w,C):(C=Kl(y.type,y.key,y.props,null,w.mode,C),C.ref=go(w,x,y),C.return=w,C)}function d(w,x,y,C){return x===null||x.tag!==4||x.stateNode.containerInfo!==y.containerInfo||x.stateNode.implementation!==y.implementation?(x=qd(y,w.mode,C),x.return=w,x):(x=s(x,y.children||[]),x.return=w,x)}function f(w,x,y,C,L){return x===null||x.tag!==7?(x=ps(y,w.mode,C,L),x.return=w,x):(x=s(x,y),x.return=w,x)}function g(w,x,y){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bd(""+x,w.mode,y),x.return=w,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case pl:return y=Kl(x.type,x.key,x.props,null,w.mode,y),y.ref=go(w,null,x),y.return=w,y;case Qs:return x=qd(x,w.mode,y),x.return=w,x;case yr:var C=x._init;return g(w,C(x._payload),y)}if(bo(x)||co(x))return x=ps(x,w.mode,y,null),x.return=w,x;Il(w,x)}return null}function p(w,x,y,C){var L=x!==null?x.key:null;if(typeof y=="string"&&y!==""||typeof y=="number")return L!==null?null:u(w,x,""+y,C);if(typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:return y.key===L?c(w,x,y,C):null;case Qs:return y.key===L?d(w,x,y,C):null;case yr:return L=y._init,p(w,x,L(y._payload),C)}if(bo(y)||co(y))return L!==null?null:f(w,x,y,C,null);Il(w,y)}return null}function E(w,x,y,C,L){if(typeof C=="string"&&C!==""||typeof C=="number")return w=w.get(y)||null,u(x,w,""+C,L);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case pl:return w=w.get(C.key===null?y:C.key)||null,c(x,w,C,L);case Qs:return w=w.get(C.key===null?y:C.key)||null,d(x,w,C,L);case yr:var V=C._init;return E(w,x,y,V(C._payload),L)}if(bo(C)||co(C))return w=w.get(y)||null,f(x,w,C,L,null);Il(x,C)}return null}function N(w,x,y,C){for(var L=null,V=null,I=x,_=x=0,S=null;I!==null&&_<y.length;_++){I.index>_?(S=I,I=null):S=I.sibling;var b=p(w,I,y[_],C);if(b===null){I===null&&(I=S);break}t&&I&&b.alternate===null&&e(w,I),x=i(b,x,_),V===null?L=b:V.sibling=b,V=b,I=S}if(_===y.length)return n(w,I),ve&&ns(w,_),L;if(I===null){for(;_<y.length;_++)I=g(w,y[_],C),I!==null&&(x=i(I,x,_),V===null?L=I:V.sibling=I,V=I);return ve&&ns(w,_),L}for(I=r(w,I);_<y.length;_++)S=E(I,w,_,y[_],C),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?_:S.key),x=i(S,x,_),V===null?L=S:V.sibling=S,V=S);return t&&I.forEach(function(k){return e(w,k)}),ve&&ns(w,_),L}function T(w,x,y,C){var L=co(y);if(typeof L!="function")throw Error(F(150));if(y=L.call(y),y==null)throw Error(F(151));for(var V=L=null,I=x,_=x=0,S=null,b=y.next();I!==null&&!b.done;_++,b=y.next()){I.index>_?(S=I,I=null):S=I.sibling;var k=p(w,I,b.value,C);if(k===null){I===null&&(I=S);break}t&&I&&k.alternate===null&&e(w,I),x=i(k,x,_),V===null?L=k:V.sibling=k,V=k,I=S}if(b.done)return n(w,I),ve&&ns(w,_),L;if(I===null){for(;!b.done;_++,b=y.next())b=g(w,b.value,C),b!==null&&(x=i(b,x,_),V===null?L=b:V.sibling=b,V=b);return ve&&ns(w,_),L}for(I=r(w,I);!b.done;_++,b=y.next())b=E(I,w,_,b.value,C),b!==null&&(t&&b.alternate!==null&&I.delete(b.key===null?_:b.key),x=i(b,x,_),V===null?L=b:V.sibling=b,V=b);return t&&I.forEach(function(j){return e(w,j)}),ve&&ns(w,_),L}function A(w,x,y,C){if(typeof y=="object"&&y!==null&&y.type===Ys&&y.key===null&&(y=y.props.children),typeof y=="object"&&y!==null){switch(y.$$typeof){case pl:e:{for(var L=y.key,V=x;V!==null;){if(V.key===L){if(L=y.type,L===Ys){if(V.tag===7){n(w,V.sibling),x=s(V,y.props.children),x.return=w,w=x;break e}}else if(V.elementType===L||typeof L=="object"&&L!==null&&L.$$typeof===yr&&Uy(L)===V.type){n(w,V.sibling),x=s(V,y.props),x.ref=go(w,V,y),x.return=w,w=x;break e}n(w,V);break}else e(w,V);V=V.sibling}y.type===Ys?(x=ps(y.props.children,w.mode,C,y.key),x.return=w,w=x):(C=Kl(y.type,y.key,y.props,null,w.mode,C),C.ref=go(w,x,y),C.return=w,w=C)}return o(w);case Qs:e:{for(V=y.key;x!==null;){if(x.key===V)if(x.tag===4&&x.stateNode.containerInfo===y.containerInfo&&x.stateNode.implementation===y.implementation){n(w,x.sibling),x=s(x,y.children||[]),x.return=w,w=x;break e}else{n(w,x);break}else e(w,x);x=x.sibling}x=qd(y,w.mode,C),x.return=w,w=x}return o(w);case yr:return V=y._init,A(w,x,V(y._payload),C)}if(bo(y))return N(w,x,y,C);if(co(y))return T(w,x,y,C);Il(w,y)}return typeof y=="string"&&y!==""||typeof y=="number"?(y=""+y,x!==null&&x.tag===6?(n(w,x.sibling),x=s(x,y),x.return=w,w=x):(n(w,x),x=Bd(y,w.mode,C),x.return=w,w=x),o(w)):n(w,x)}return A}var Ei=yx(!0),vx=yx(!1),vu=Kr(null),_u=null,si=null,mp=null;function gp(){mp=si=_u=null}function yp(t){var e=vu.current;ye(vu),t._currentValue=e}function Bh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hi(t,e){_u=t,mp=si=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(mp!==t)if(t={context:t,memoizedValue:e,next:null},si===null){if(_u===null)throw Error(F(308));si=t,_u.dependencies={lanes:0,firstContext:t}}else si=si.next=t;return e}var as=null;function vp(t){as===null?as=[t]:as.push(t)}function _x(t,e,n,r){var s=e.interleaved;return s===null?(n.next=n,vp(e)):(n.next=s.next,s.next=n),e.interleaved=n,tr(t,r)}function tr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var vr=!1;function _p(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Qn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function jr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var s=r.pending;return s===null?e.next=e:(e.next=s.next,s.next=e),r.pending=e,tr(t,n)}return s=r.interleaved,s===null?(e.next=e,vp(r)):(e.next=s.next,s.next=e),r.interleaved=e,tr(t,n)}function $l(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sp(t,n)}}function Fy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?s=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?s=i=e:i=i.next=e}else s=i=e;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function xu(t,e,n,r){var s=t.updateQueue;vr=!1;var i=s.firstBaseUpdate,o=s.lastBaseUpdate,u=s.shared.pending;if(u!==null){s.shared.pending=null;var c=u,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==o&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var g=s.baseState;o=0,f=d=c=null,u=i;do{var p=u.lane,E=u.eventTime;if((r&p)===p){f!==null&&(f=f.next={eventTime:E,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var N=t,T=u;switch(p=e,E=n,T.tag){case 1:if(N=T.payload,typeof N=="function"){g=N.call(E,g,p);break e}g=N;break e;case 3:N.flags=N.flags&-65537|128;case 0:if(N=T.payload,p=typeof N=="function"?N.call(E,g,p):N,p==null)break e;g=Te({},g,p);break e;case 2:vr=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,p=s.effects,p===null?s.effects=[u]:p.push(u))}else E={eventTime:E,lane:p,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=E,c=g):f=f.next=E,o|=p;if(u=u.next,u===null){if(u=s.shared.pending,u===null)break;p=u,u=p.next,p.next=null,s.lastBaseUpdate=p,s.shared.pending=null}}while(!0);if(f===null&&(c=g),s.baseState=c,s.firstBaseUpdate=d,s.lastBaseUpdate=f,e=s.shared.interleaved,e!==null){s=e;do o|=s.lane,s=s.next;while(s!==e)}else i===null&&(s.shared.lanes=0);_s|=o,t.lanes=o,t.memoizedState=g}}function $y(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(F(191,s));s.call(r)}}}var Ra={},En=Kr(Ra),ia=Kr(Ra),oa=Kr(Ra);function ls(t){if(t===Ra)throw Error(F(174));return t}function xp(t,e){switch(pe(oa,e),pe(ia,t),pe(En,Ra),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Th(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Th(e,t)}ye(En),pe(En,e)}function Ti(){ye(En),ye(ia),ye(oa)}function wx(t){ls(oa.current);var e=ls(En.current),n=Th(e,t.type);e!==n&&(pe(ia,t),pe(En,n))}function wp(t){ia.current===t&&(ye(En),ye(ia))}var we=Kr(0);function wu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Md=[];function Ep(){for(var t=0;t<Md.length;t++)Md[t]._workInProgressVersionPrimary=null;Md.length=0}var zl=ar.ReactCurrentDispatcher,Vd=ar.ReactCurrentBatchConfig,vs=0,Ee=null,Ue=null,Be=null,Eu=!1,Uo=!1,aa=0,HN=0;function ot(){throw Error(F(321))}function Tp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function bp(t,e,n,r,s,i){if(vs=i,Ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,zl.current=t===null||t.memoizedState===null?QN:YN,t=n(r,s),Uo){i=0;do{if(Uo=!1,aa=0,25<=i)throw Error(F(301));i+=1,Be=Ue=null,e.updateQueue=null,zl.current=XN,t=n(r,s)}while(Uo)}if(zl.current=Tu,e=Ue!==null&&Ue.next!==null,vs=0,Be=Ue=Ee=null,Eu=!1,e)throw Error(F(300));return t}function Ip(){var t=aa!==0;return aa=0,t}function _n(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Be===null?Ee.memoizedState=Be=t:Be=Be.next=t,Be}function Yt(){if(Ue===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Ue.next;var e=Be===null?Ee.memoizedState:Be.next;if(e!==null)Be=e,Ue=t;else{if(t===null)throw Error(F(310));Ue=t,t={memoizedState:Ue.memoizedState,baseState:Ue.baseState,baseQueue:Ue.baseQueue,queue:Ue.queue,next:null},Be===null?Ee.memoizedState=Be=t:Be=Be.next=t}return Be}function la(t,e){return typeof e=="function"?e(t):e}function Ud(t){var e=Yt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=Ue,s=r.baseQueue,i=n.pending;if(i!==null){if(s!==null){var o=s.next;s.next=i.next,i.next=o}r.baseQueue=s=i,n.pending=null}if(s!==null){i=s.next,r=r.baseState;var u=o=null,c=null,d=i;do{var f=d.lane;if((vs&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:t(r,d.action);else{var g={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=g,o=r):c=c.next=g,Ee.lanes|=f,_s|=f}d=d.next}while(d!==null&&d!==i);c===null?o=r:c.next=u,pn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=c,n.lastRenderedState=r}if(t=n.interleaved,t!==null){s=t;do i=s.lane,Ee.lanes|=i,_s|=i,s=s.next;while(s!==t)}else s===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Fd(t){var e=Yt(),n=e.queue;if(n===null)throw Error(F(311));n.lastRenderedReducer=t;var r=n.dispatch,s=n.pending,i=e.memoizedState;if(s!==null){n.pending=null;var o=s=s.next;do i=t(i,o.action),o=o.next;while(o!==s);pn(i,e.memoizedState)||(kt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,r]}function Ex(){}function Tx(t,e){var n=Ee,r=Yt(),s=e(),i=!pn(r.memoizedState,s);if(i&&(r.memoizedState=s,kt=!0),r=r.queue,Np(Nx.bind(null,n,r,t),[t]),r.getSnapshot!==e||i||Be!==null&&Be.memoizedState.tag&1){if(n.flags|=2048,ua(9,Ix.bind(null,n,r,s,e),void 0,null),qe===null)throw Error(F(349));vs&30||bx(n,e,s)}return s}function bx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Ix(t,e,n,r){e.value=n,e.getSnapshot=r,Sx(e)&&Ax(t)}function Nx(t,e,n){return n(function(){Sx(e)&&Ax(t)})}function Sx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function Ax(t){var e=tr(t,1);e!==null&&dn(e,t,1,-1)}function zy(t){var e=_n();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},e.queue=t,t=t.dispatch=GN.bind(null,Ee,t),[e.memoizedState,t]}function ua(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Ee.updateQueue,e===null?(e={lastEffect:null,stores:null},Ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Px(){return Yt().memoizedState}function Bl(t,e,n,r){var s=_n();Ee.flags|=t,s.memoizedState=ua(1|e,n,void 0,r===void 0?null:r)}function ac(t,e,n,r){var s=Yt();r=r===void 0?null:r;var i=void 0;if(Ue!==null){var o=Ue.memoizedState;if(i=o.destroy,r!==null&&Tp(r,o.deps)){s.memoizedState=ua(e,n,i,r);return}}Ee.flags|=t,s.memoizedState=ua(1|e,n,i,r)}function By(t,e){return Bl(8390656,8,t,e)}function Np(t,e){return ac(2048,8,t,e)}function Cx(t,e){return ac(4,2,t,e)}function kx(t,e){return ac(4,4,t,e)}function Rx(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function jx(t,e,n){return n=n!=null?n.concat([t]):null,ac(4,4,Rx.bind(null,e,t),n)}function Sp(){}function Ox(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tp(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Dx(t,e){var n=Yt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Tp(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Lx(t,e,n){return vs&21?(pn(n,e)||(n=$_(),Ee.lanes|=n,_s|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function WN(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Vd.transition;Vd.transition={};try{t(!1),e()}finally{ae=n,Vd.transition=r}}function Mx(){return Yt().memoizedState}function KN(t,e,n){var r=Dr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Vx(t))Ux(e,n);else if(n=_x(t,e,n,r),n!==null){var s=Tt();dn(n,t,r,s),Fx(n,e,r)}}function GN(t,e,n){var r=Dr(t),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Vx(t))Ux(e,s);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,u=i(o,n);if(s.hasEagerState=!0,s.eagerState=u,pn(u,o)){var c=e.interleaved;c===null?(s.next=s,vp(e)):(s.next=c.next,c.next=s),e.interleaved=s;return}}catch{}finally{}n=_x(t,e,s,r),n!==null&&(s=Tt(),dn(n,t,r,s),Fx(n,e,r))}}function Vx(t){var e=t.alternate;return t===Ee||e!==null&&e===Ee}function Ux(t,e){Uo=Eu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Fx(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,sp(t,n)}}var Tu={readContext:Qt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},QN={readContext:Qt,useCallback:function(t,e){return _n().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:By,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Bl(4194308,4,Rx.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bl(4,2,t,e)},useMemo:function(t,e){var n=_n();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=_n();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=KN.bind(null,Ee,t),[r.memoizedState,t]},useRef:function(t){var e=_n();return t={current:t},e.memoizedState=t},useState:zy,useDebugValue:Sp,useDeferredValue:function(t){return _n().memoizedState=t},useTransition:function(){var t=zy(!1),e=t[0];return t=WN.bind(null,t[1]),_n().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Ee,s=_n();if(ve){if(n===void 0)throw Error(F(407));n=n()}else{if(n=e(),qe===null)throw Error(F(349));vs&30||bx(r,e,n)}s.memoizedState=n;var i={value:n,getSnapshot:e};return s.queue=i,By(Nx.bind(null,r,i,t),[t]),r.flags|=2048,ua(9,Ix.bind(null,r,i,n,e),void 0,null),n},useId:function(){var t=_n(),e=qe.identifierPrefix;if(ve){var n=Hn,r=qn;n=(r&~(1<<32-cn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=aa++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=HN++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},YN={readContext:Qt,useCallback:Ox,useContext:Qt,useEffect:Np,useImperativeHandle:jx,useInsertionEffect:Cx,useLayoutEffect:kx,useMemo:Dx,useReducer:Ud,useRef:Px,useState:function(){return Ud(la)},useDebugValue:Sp,useDeferredValue:function(t){var e=Yt();return Lx(e,Ue.memoizedState,t)},useTransition:function(){var t=Ud(la)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Ex,useSyncExternalStore:Tx,useId:Mx,unstable_isNewReconciler:!1},XN={readContext:Qt,useCallback:Ox,useContext:Qt,useEffect:Np,useImperativeHandle:jx,useInsertionEffect:Cx,useLayoutEffect:kx,useMemo:Dx,useReducer:Fd,useRef:Px,useState:function(){return Fd(la)},useDebugValue:Sp,useDeferredValue:function(t){var e=Yt();return Ue===null?e.memoizedState=t:Lx(e,Ue.memoizedState,t)},useTransition:function(){var t=Fd(la)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:Ex,useSyncExternalStore:Tx,useId:Mx,unstable_isNewReconciler:!1};function rn(t,e){if(t&&t.defaultProps){e=Te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function qh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var lc={isMounted:function(t){return(t=t._reactInternals)?Ps(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Dr(t),i=Qn(r,s);i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(dn(e,t,s,r),$l(e,t,s))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Tt(),s=Dr(t),i=Qn(r,s);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=jr(t,i,s),e!==null&&(dn(e,t,s,r),$l(e,t,s))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),r=Dr(t),s=Qn(n,r);s.tag=2,e!=null&&(s.callback=e),e=jr(t,s,r),e!==null&&(dn(e,t,r,n),$l(e,t,r))}};function qy(t,e,n,r,s,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,i,o):e.prototype&&e.prototype.isPureReactComponent?!ta(n,r)||!ta(s,i):!0}function $x(t,e,n){var r=!1,s=$r,i=e.contextType;return typeof i=="object"&&i!==null?i=Qt(i):(s=jt(e)?gs:gt.current,r=e.contextTypes,i=(r=r!=null)?xi(t,s):$r),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=lc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=s,t.__reactInternalMemoizedMaskedChildContext=i),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&lc.enqueueReplaceState(e,e.state,null)}function Hh(t,e,n,r){var s=t.stateNode;s.props=n,s.state=t.memoizedState,s.refs={},_p(t);var i=e.contextType;typeof i=="object"&&i!==null?s.context=Qt(i):(i=jt(e)?gs:gt.current,s.context=xi(t,i)),s.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(qh(t,e,i,n),s.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(e=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),e!==s.state&&lc.enqueueReplaceState(s,s.state,null),xu(t,n,s,r),s.state=t.memoizedState),typeof s.componentDidMount=="function"&&(t.flags|=4194308)}function bi(t,e){try{var n="",r=e;do n+=II(r),r=r.return;while(r);var s=n}catch(i){s=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:s,digest:null}}function $d(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Wh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var JN=typeof WeakMap=="function"?WeakMap:Map;function zx(t,e,n){n=Qn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Iu||(Iu=!0,nf=r),Wh(t,e)},n}function Bx(t,e,n){n=Qn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var s=e.value;n.payload=function(){return r(s)},n.callback=function(){Wh(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){Wh(t,e),typeof r!="function"&&(Or===null?Or=new Set([this]):Or.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Wy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new JN;var s=new Set;r.set(e,s)}else s=r.get(e),s===void 0&&(s=new Set,r.set(e,s));s.has(n)||(s.add(n),t=hS.bind(null,t,e,n),e.then(t,t))}function Ky(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Gy(t,e,n,r,s){return t.mode&1?(t.flags|=65536,t.lanes=s,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Qn(-1,1),e.tag=2,jr(n,e,1))),n.lanes|=1),t)}var ZN=ar.ReactCurrentOwner,kt=!1;function Et(t,e,n,r){e.child=t===null?vx(e,null,n,r):Ei(e,t.child,n,r)}function Qy(t,e,n,r,s){n=n.render;var i=e.ref;return hi(e,s),r=bp(t,e,n,r,i,s),n=Ip(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ve&&n&&hp(e),e.flags|=1,Et(t,e,r,s),e.child)}function Yy(t,e,n,r,s){if(t===null){var i=n.type;return typeof i=="function"&&!Dp(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,qx(t,e,i,r,s)):(t=Kl(n.type,null,r,e,e.mode,s),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&s)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ta,n(o,r)&&t.ref===e.ref)return nr(t,e,s)}return e.flags|=1,t=Lr(i,r),t.ref=e.ref,t.return=e,e.child=t}function qx(t,e,n,r,s){if(t!==null){var i=t.memoizedProps;if(ta(i,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=i,(t.lanes&s)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,nr(t,e,s)}return Kh(t,e,n,r,s)}function Hx(t,e,n){var r=e.pendingProps,s=r.children,i=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(oi,Vt),Vt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(oi,Vt),Vt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:n,pe(oi,Vt),Vt|=r}else i!==null?(r=i.baseLanes|n,e.memoizedState=null):r=n,pe(oi,Vt),Vt|=r;return Et(t,e,s,n),e.child}function Wx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Kh(t,e,n,r,s){var i=jt(n)?gs:gt.current;return i=xi(e,i),hi(e,s),n=bp(t,e,n,r,i,s),r=Ip(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~s,nr(t,e,s)):(ve&&r&&hp(e),e.flags|=1,Et(t,e,n,s),e.child)}function Xy(t,e,n,r,s){if(jt(n)){var i=!0;mu(e)}else i=!1;if(hi(e,s),e.stateNode===null)ql(t,e),$x(e,n,r),Hh(e,n,r,s),r=!0;else if(t===null){var o=e.stateNode,u=e.memoizedProps;o.props=u;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=Qt(d):(d=jt(n)?gs:gt.current,d=xi(e,d));var f=n.getDerivedStateFromProps,g=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function";g||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==r||c!==d)&&Hy(e,o,r,d),vr=!1;var p=e.memoizedState;o.state=p,xu(e,r,o,s),c=e.memoizedState,u!==r||p!==c||Rt.current||vr?(typeof f=="function"&&(qh(e,n,f,r),c=e.memoizedState),(u=vr||qy(e,n,u,r,p,c,d))?(g||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=c),o.props=r,o.state=c,o.context=d,r=u):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,xx(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:rn(e.type,u),o.props=d,g=e.pendingProps,p=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=Qt(c):(c=jt(n)?gs:gt.current,c=xi(e,c));var E=n.getDerivedStateFromProps;(f=typeof E=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(u!==g||p!==c)&&Hy(e,o,r,c),vr=!1,p=e.memoizedState,o.state=p,xu(e,r,o,s);var N=e.memoizedState;u!==g||p!==N||Rt.current||vr?(typeof E=="function"&&(qh(e,n,E,r),N=e.memoizedState),(d=vr||qy(e,n,d,r,p,N,c)||!1)?(f||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,N,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,N,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=N),o.props=r,o.state=N,o.context=c,r=d):(typeof o.componentDidUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return Gh(t,e,n,r,i,s)}function Gh(t,e,n,r,s,i){Wx(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return s&&Ly(e,n,!1),nr(t,e,i);r=e.stateNode,ZN.current=e;var u=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=Ei(e,t.child,null,i),e.child=Ei(e,null,u,i)):Et(t,e,u,i),e.memoizedState=r.state,s&&Ly(e,n,!0),e.child}function Kx(t){var e=t.stateNode;e.pendingContext?Dy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Dy(t,e.context,!1),xp(t,e.containerInfo)}function Jy(t,e,n,r,s){return wi(),pp(s),e.flags|=256,Et(t,e,n,r),e.child}var Qh={dehydrated:null,treeContext:null,retryLane:0};function Yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function Gx(t,e,n){var r=e.pendingProps,s=we.current,i=!1,o=(e.flags&128)!==0,u;if((u=o)||(u=t!==null&&t.memoizedState===null?!1:(s&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(s|=1),pe(we,s&1),t===null)return zh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,i?(r=e.mode,i=e.child,o={mode:"hidden",children:o},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=dc(o,r,0,null),t=ps(t,r,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Yh(n),e.memoizedState=Qh,t):Ap(e,o));if(s=t.memoizedState,s!==null&&(u=s.dehydrated,u!==null))return eS(t,e,o,r,u,s,n);if(i){i=r.fallback,o=e.mode,s=t.child,u=s.sibling;var c={mode:"hidden",children:r.children};return!(o&1)&&e.child!==s?(r=e.child,r.childLanes=0,r.pendingProps=c,e.deletions=null):(r=Lr(s,c),r.subtreeFlags=s.subtreeFlags&14680064),u!==null?i=Lr(u,i):(i=ps(i,o,n,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,o=t.child.memoizedState,o=o===null?Yh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Qh,r}return i=t.child,t=i.sibling,r=Lr(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Ap(t,e){return e=dc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Nl(t,e,n,r){return r!==null&&pp(r),Ei(e,t.child,null,n),t=Ap(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function eS(t,e,n,r,s,i,o){if(n)return e.flags&256?(e.flags&=-257,r=$d(Error(F(422))),Nl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=r.fallback,s=e.mode,r=dc({mode:"visible",children:r.children},s,0,null),i=ps(i,s,o,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&Ei(e,t.child,null,o),e.child.memoizedState=Yh(o),e.memoizedState=Qh,i);if(!(e.mode&1))return Nl(t,e,o,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var u=r.dgst;return r=u,i=Error(F(419)),r=$d(i,r,void 0),Nl(t,e,o,r)}if(u=(o&t.childLanes)!==0,kt||u){if(r=qe,r!==null){switch(o&-o){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|o)?0:s,s!==0&&s!==i.retryLane&&(i.retryLane=s,tr(t,s),dn(r,t,s,-1))}return Op(),r=$d(Error(F(421))),Nl(t,e,o,r)}return s.data==="$?"?(e.flags|=128,e.child=t.child,e=fS.bind(null,t),s._reactRetry=e,null):(t=i.treeContext,Ut=Rr(s.nextSibling),$t=e,ve=!0,on=null,t!==null&&(Ht[Wt++]=qn,Ht[Wt++]=Hn,Ht[Wt++]=ys,qn=t.id,Hn=t.overflow,ys=e),e=Ap(e,r.children),e.flags|=4096,e)}function Zy(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Bh(t.return,e,n)}function zd(t,e,n,r,s){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Qx(t,e,n){var r=e.pendingProps,s=r.revealOrder,i=r.tail;if(Et(t,e,r.children,n),r=we.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Zy(t,n,e);else if(t.tag===19)Zy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(we,r),!(e.mode&1))e.memoizedState=null;else switch(s){case"forwards":for(n=e.child,s=null;n!==null;)t=n.alternate,t!==null&&wu(t)===null&&(s=n),n=n.sibling;n=s,n===null?(s=e.child,e.child=null):(s=n.sibling,n.sibling=null),zd(e,!1,s,n,i);break;case"backwards":for(n=null,s=e.child,e.child=null;s!==null;){if(t=s.alternate,t!==null&&wu(t)===null){e.child=s;break}t=s.sibling,s.sibling=n,n=s,s=t}zd(e,!0,n,null,i);break;case"together":zd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function ql(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function nr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),_s|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,n=Lr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Lr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function tS(t,e,n){switch(e.tag){case 3:Kx(e),wi();break;case 5:wx(e);break;case 1:jt(e.type)&&mu(e);break;case 4:xp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,s=e.memoizedProps.value;pe(vu,r._currentValue),r._currentValue=s;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(we,we.current&1),e.flags|=128,null):n&e.child.childLanes?Gx(t,e,n):(pe(we,we.current&1),t=nr(t,e,n),t!==null?t.sibling:null);pe(we,we.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Qx(t,e,n);e.flags|=128}if(s=e.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),pe(we,we.current),r)break;return null;case 22:case 23:return e.lanes=0,Hx(t,e,n)}return nr(t,e,n)}var Yx,Xh,Xx,Jx;Yx=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Xh=function(){};Xx=function(t,e,n,r){var s=t.memoizedProps;if(s!==r){t=e.stateNode,ls(En.current);var i=null;switch(n){case"input":s=_h(t,s),r=_h(t,r),i=[];break;case"select":s=Te({},s,{value:void 0}),r=Te({},r,{value:void 0}),i=[];break;case"textarea":s=Eh(t,s),r=Eh(t,r),i=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=fu)}bh(n,r);var o;n=null;for(d in s)if(!r.hasOwnProperty(d)&&s.hasOwnProperty(d)&&s[d]!=null)if(d==="style"){var u=s[d];for(o in u)u.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Go.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(u=s!=null?s[d]:void 0,r.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(o in u)!u.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&u[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Go.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&ge("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Jx=function(t,e,n,r){n!==r&&(e.flags|=4)};function yo(t,e){if(!ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function at(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=t,s=s.sibling;else for(s=t.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=t,s=s.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function nS(t,e,n){var r=e.pendingProps;switch(fp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return at(e),null;case 1:return jt(e.type)&&pu(),at(e),null;case 3:return r=e.stateNode,Ti(),ye(Rt),ye(gt),Ep(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(bl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,on!==null&&(of(on),on=null))),Xh(t,e),at(e),null;case 5:wp(e);var s=ls(oa.current);if(n=e.type,t!==null&&e.stateNode!=null)Xx(t,e,n,r,s),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(F(166));return at(e),null}if(t=ls(En.current),bl(e)){r=e.stateNode,n=e.type;var i=e.memoizedProps;switch(r[xn]=e,r[sa]=i,t=(e.mode&1)!==0,n){case"dialog":ge("cancel",r),ge("close",r);break;case"iframe":case"object":case"embed":ge("load",r);break;case"video":case"audio":for(s=0;s<No.length;s++)ge(No[s],r);break;case"source":ge("error",r);break;case"img":case"image":case"link":ge("error",r),ge("load",r);break;case"details":ge("toggle",r);break;case"input":ly(r,i),ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},ge("invalid",r);break;case"textarea":cy(r,i),ge("invalid",r)}bh(n,i),s=null;for(var o in i)if(i.hasOwnProperty(o)){var u=i[o];o==="children"?typeof u=="string"?r.textContent!==u&&(i.suppressHydrationWarning!==!0&&Tl(r.textContent,u,t),s=["children",u]):typeof u=="number"&&r.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&Tl(r.textContent,u,t),s=["children",""+u]):Go.hasOwnProperty(o)&&u!=null&&o==="onScroll"&&ge("scroll",r)}switch(n){case"input":ml(r),uy(r,i,!0);break;case"textarea":ml(r),dy(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=fu)}r=s,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=s.nodeType===9?s:s.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=N_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[xn]=e,t[sa]=r,Yx(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ih(n,r),n){case"dialog":ge("cancel",t),ge("close",t),s=r;break;case"iframe":case"object":case"embed":ge("load",t),s=r;break;case"video":case"audio":for(s=0;s<No.length;s++)ge(No[s],t);s=r;break;case"source":ge("error",t),s=r;break;case"img":case"image":case"link":ge("error",t),ge("load",t),s=r;break;case"details":ge("toggle",t),s=r;break;case"input":ly(t,r),s=_h(t,r),ge("invalid",t);break;case"option":s=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},s=Te({},r,{value:void 0}),ge("invalid",t);break;case"textarea":cy(t,r),s=Eh(t,r),ge("invalid",t);break;default:s=r}bh(n,s),u=s;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?P_(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&S_(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Qo(t,c):typeof c=="number"&&Qo(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Go.hasOwnProperty(i)?c!=null&&i==="onScroll"&&ge("scroll",t):c!=null&&Jf(t,i,c,o))}switch(n){case"input":ml(t),uy(t,r,!1);break;case"textarea":ml(t),dy(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Fr(r.value));break;case"select":t.multiple=!!r.multiple,i=r.value,i!=null?li(t,!!r.multiple,i,!1):r.defaultValue!=null&&li(t,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(t.onclick=fu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return at(e),null;case 6:if(t&&e.stateNode!=null)Jx(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(F(166));if(n=ls(oa.current),ls(En.current),bl(e)){if(r=e.stateNode,n=e.memoizedProps,r[xn]=e,(i=r.nodeValue!==n)&&(t=$t,t!==null))switch(t.tag){case 3:Tl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Tl(r.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[xn]=e,e.stateNode=r}return at(e),null;case 13:if(ye(we),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ve&&Ut!==null&&e.mode&1&&!(e.flags&128))gx(),wi(),e.flags|=98560,i=!1;else if(i=bl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[xn]=e}else wi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;at(e),i=!1}else on!==null&&(of(on),on=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||we.current&1?Fe===0&&(Fe=3):Op())),e.updateQueue!==null&&(e.flags|=4),at(e),null);case 4:return Ti(),Xh(t,e),t===null&&na(e.stateNode.containerInfo),at(e),null;case 10:return yp(e.type._context),at(e),null;case 17:return jt(e.type)&&pu(),at(e),null;case 19:if(ye(we),i=e.memoizedState,i===null)return at(e),null;if(r=(e.flags&128)!==0,o=i.rendering,o===null)if(r)yo(i,!1);else{if(Fe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wu(t),o!==null){for(e.flags|=128,yo(i,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)i=n,t=r,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(we,we.current&1|2),e.child}t=t.sibling}i.tail!==null&&ke()>Ii&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304)}else{if(!r)if(t=wu(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),yo(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!ve)return at(e),null}else 2*ke()-i.renderingStartTime>Ii&&n!==1073741824&&(e.flags|=128,r=!0,yo(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ke(),e.sibling=null,n=we.current,pe(we,r?n&1|2:n&1),e):(at(e),null);case 22:case 23:return jp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Vt&1073741824&&(at(e),e.subtreeFlags&6&&(e.flags|=8192)):at(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function rS(t,e){switch(fp(e),e.tag){case 1:return jt(e.type)&&pu(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),ye(Rt),ye(gt),Ep(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return wp(e),null;case 13:if(ye(we),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));wi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ye(we),null;case 4:return Ti(),null;case 10:return yp(e.type._context),null;case 22:case 23:return jp(),null;case 24:return null;default:return null}}var Sl=!1,ht=!1,sS=typeof WeakSet=="function"?WeakSet:Set,q=null;function ii(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ne(t,e,r)}else n.current=null}function Jh(t,e,n){try{n()}catch(r){Ne(t,e,r)}}var ev=!1;function iS(t,e){if(Dh=cu,t=rx(),dp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,u=-1,c=-1,d=0,f=0,g=t,p=null;t:for(;;){for(var E;g!==n||s!==0&&g.nodeType!==3||(u=o+s),g!==i||r!==0&&g.nodeType!==3||(c=o+r),g.nodeType===3&&(o+=g.nodeValue.length),(E=g.firstChild)!==null;)p=g,g=E;for(;;){if(g===t)break t;if(p===n&&++d===s&&(u=o),p===i&&++f===r&&(c=o),(E=g.nextSibling)!==null)break;g=p,p=g.parentNode}g=E}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(Lh={focusedElem:t,selectionRange:n},cu=!1,q=e;q!==null;)if(e=q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,q=t;else for(;q!==null;){e=q;try{var N=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(N!==null){var T=N.memoizedProps,A=N.memoizedState,w=e.stateNode,x=w.getSnapshotBeforeUpdate(e.elementType===e.type?T:rn(e.type,T),A);w.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var y=e.stateNode.containerInfo;y.nodeType===1?y.textContent="":y.nodeType===9&&y.documentElement&&y.removeChild(y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(C){Ne(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,q=t;break}q=e.return}return N=ev,ev=!1,N}function Fo(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&t)===t){var i=s.destroy;s.destroy=void 0,i!==void 0&&Jh(e,n,i)}s=s.next}while(s!==r)}}function uc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Zh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Zx(t){var e=t.alternate;e!==null&&(t.alternate=null,Zx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[xn],delete e[sa],delete e[Uh],delete e[$N],delete e[zN])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ew(t){return t.tag===5||t.tag===3||t.tag===4}function tv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ew(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ef(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=fu));else if(r!==4&&(t=t.child,t!==null))for(ef(t,e,n),t=t.sibling;t!==null;)ef(t,e,n),t=t.sibling}function tf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(tf(t,e,n),t=t.sibling;t!==null;)tf(t,e,n),t=t.sibling}var Qe=null,sn=!1;function mr(t,e,n){for(n=n.child;n!==null;)tw(t,e,n),n=n.sibling}function tw(t,e,n){if(wn&&typeof wn.onCommitFiberUnmount=="function")try{wn.onCommitFiberUnmount(tc,n)}catch{}switch(n.tag){case 5:ht||ii(n,e);case 6:var r=Qe,s=sn;Qe=null,mr(t,e,n),Qe=r,sn=s,Qe!==null&&(sn?(t=Qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Qe.removeChild(n.stateNode));break;case 18:Qe!==null&&(sn?(t=Qe,n=n.stateNode,t.nodeType===8?Dd(t.parentNode,n):t.nodeType===1&&Dd(t,n),Zo(t)):Dd(Qe,n.stateNode));break;case 4:r=Qe,s=sn,Qe=n.stateNode.containerInfo,sn=!0,mr(t,e,n),Qe=r,sn=s;break;case 0:case 11:case 14:case 15:if(!ht&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var i=s,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Jh(n,e,o),s=s.next}while(s!==r)}mr(t,e,n);break;case 1:if(!ht&&(ii(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Ne(n,e,u)}mr(t,e,n);break;case 21:mr(t,e,n);break;case 22:n.mode&1?(ht=(r=ht)||n.memoizedState!==null,mr(t,e,n),ht=r):mr(t,e,n);break;default:mr(t,e,n)}}function nv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new sS),e.forEach(function(r){var s=pS.bind(null,t,r);n.has(r)||(n.add(r),r.then(s,s))})}}function nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var i=t,o=e,u=o;e:for(;u!==null;){switch(u.tag){case 5:Qe=u.stateNode,sn=!1;break e;case 3:Qe=u.stateNode.containerInfo,sn=!0;break e;case 4:Qe=u.stateNode.containerInfo,sn=!0;break e}u=u.return}if(Qe===null)throw Error(F(160));tw(i,o,s),Qe=null,sn=!1;var c=s.alternate;c!==null&&(c.return=null),s.return=null}catch(d){Ne(s,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nw(e,t),e=e.sibling}function nw(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(nn(e,t),vn(t),r&4){try{Fo(3,t,t.return),uc(3,t)}catch(T){Ne(t,t.return,T)}try{Fo(5,t,t.return)}catch(T){Ne(t,t.return,T)}}break;case 1:nn(e,t),vn(t),r&512&&n!==null&&ii(n,n.return);break;case 5:if(nn(e,t),vn(t),r&512&&n!==null&&ii(n,n.return),t.flags&32){var s=t.stateNode;try{Qo(s,"")}catch(T){Ne(t,t.return,T)}}if(r&4&&(s=t.stateNode,s!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&b_(s,i),Ih(u,o);var d=Ih(u,i);for(o=0;o<c.length;o+=2){var f=c[o],g=c[o+1];f==="style"?P_(s,g):f==="dangerouslySetInnerHTML"?S_(s,g):f==="children"?Qo(s,g):Jf(s,f,g,d)}switch(u){case"input":xh(s,i);break;case"textarea":I_(s,i);break;case"select":var p=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!i.multiple;var E=i.value;E!=null?li(s,!!i.multiple,E,!1):p!==!!i.multiple&&(i.defaultValue!=null?li(s,!!i.multiple,i.defaultValue,!0):li(s,!!i.multiple,i.multiple?[]:"",!1))}s[sa]=i}catch(T){Ne(t,t.return,T)}}break;case 6:if(nn(e,t),vn(t),r&4){if(t.stateNode===null)throw Error(F(162));s=t.stateNode,i=t.memoizedProps;try{s.nodeValue=i}catch(T){Ne(t,t.return,T)}}break;case 3:if(nn(e,t),vn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Zo(e.containerInfo)}catch(T){Ne(t,t.return,T)}break;case 4:nn(e,t),vn(t);break;case 13:nn(e,t),vn(t),s=t.child,s.flags&8192&&(i=s.memoizedState!==null,s.stateNode.isHidden=i,!i||s.alternate!==null&&s.alternate.memoizedState!==null||(kp=ke())),r&4&&nv(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(d=ht)||f,nn(e,t),ht=d):nn(e,t),vn(t),r&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(q=t,f=t.child;f!==null;){for(g=q=f;q!==null;){switch(p=q,E=p.child,p.tag){case 0:case 11:case 14:case 15:Fo(4,p,p.return);break;case 1:ii(p,p.return);var N=p.stateNode;if(typeof N.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,N.props=e.memoizedProps,N.state=e.memoizedState,N.componentWillUnmount()}catch(T){Ne(r,n,T)}}break;case 5:ii(p,p.return);break;case 22:if(p.memoizedState!==null){sv(g);continue}}E!==null?(E.return=p,q=E):sv(g)}f=f.sibling}e:for(f=null,g=t;;){if(g.tag===5){if(f===null){f=g;try{s=g.stateNode,d?(i=s.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=g.stateNode,c=g.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=A_("display",o))}catch(T){Ne(t,t.return,T)}}}else if(g.tag===6){if(f===null)try{g.stateNode.nodeValue=d?"":g.memoizedProps}catch(T){Ne(t,t.return,T)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===t)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===t)break e;for(;g.sibling===null;){if(g.return===null||g.return===t)break e;f===g&&(f=null),g=g.return}f===g&&(f=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:nn(e,t),vn(t),r&4&&nv(t);break;case 21:break;default:nn(e,t),vn(t)}}function vn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(ew(n)){var r=n;break e}n=n.return}throw Error(F(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(Qo(s,""),r.flags&=-33);var i=tv(t);tf(t,i,s);break;case 3:case 4:var o=r.stateNode.containerInfo,u=tv(t);ef(t,u,o);break;default:throw Error(F(161))}}catch(c){Ne(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function oS(t,e,n){q=t,rw(t)}function rw(t,e,n){for(var r=(t.mode&1)!==0;q!==null;){var s=q,i=s.child;if(s.tag===22&&r){var o=s.memoizedState!==null||Sl;if(!o){var u=s.alternate,c=u!==null&&u.memoizedState!==null||ht;u=Sl;var d=ht;if(Sl=o,(ht=c)&&!d)for(q=s;q!==null;)o=q,c=o.child,o.tag===22&&o.memoizedState!==null?iv(s):c!==null?(c.return=o,q=c):iv(s);for(;i!==null;)q=i,rw(i),i=i.sibling;q=s,Sl=u,ht=d}rv(t)}else s.subtreeFlags&8772&&i!==null?(i.return=s,q=i):rv(t)}}function rv(t){for(;q!==null;){var e=q;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||uc(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!ht)if(n===null)r.componentDidMount();else{var s=e.elementType===e.type?n.memoizedProps:rn(e.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&$y(e,i,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}$y(e,o,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var g=f.dehydrated;g!==null&&Zo(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}ht||e.flags&512&&Zh(e)}catch(p){Ne(e,e.return,p)}}if(e===t){q=null;break}if(n=e.sibling,n!==null){n.return=e.return,q=n;break}q=e.return}}function sv(t){for(;q!==null;){var e=q;if(e===t){q=null;break}var n=e.sibling;if(n!==null){n.return=e.return,q=n;break}q=e.return}}function iv(t){for(;q!==null;){var e=q;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{uc(4,e)}catch(c){Ne(e,n,c)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var s=e.return;try{r.componentDidMount()}catch(c){Ne(e,s,c)}}var i=e.return;try{Zh(e)}catch(c){Ne(e,i,c)}break;case 5:var o=e.return;try{Zh(e)}catch(c){Ne(e,o,c)}}}catch(c){Ne(e,e.return,c)}if(e===t){q=null;break}var u=e.sibling;if(u!==null){u.return=e.return,q=u;break}q=e.return}}var aS=Math.ceil,bu=ar.ReactCurrentDispatcher,Pp=ar.ReactCurrentOwner,Gt=ar.ReactCurrentBatchConfig,se=0,qe=null,Le=null,Ze=0,Vt=0,oi=Kr(0),Fe=0,ca=null,_s=0,cc=0,Cp=0,$o=null,Pt=null,kp=0,Ii=1/0,Fn=null,Iu=!1,nf=null,Or=null,Al=!1,Ir=null,Nu=0,zo=0,rf=null,Hl=-1,Wl=0;function Tt(){return se&6?ke():Hl!==-1?Hl:Hl=ke()}function Dr(t){return t.mode&1?se&2&&Ze!==0?Ze&-Ze:qN.transition!==null?(Wl===0&&(Wl=$_()),Wl):(t=ae,t!==0||(t=window.event,t=t===void 0?16:G_(t.type)),t):1}function dn(t,e,n,r){if(50<zo)throw zo=0,rf=null,Error(F(185));Pa(t,n,r),(!(se&2)||t!==qe)&&(t===qe&&(!(se&2)&&(cc|=n),Fe===4&&xr(t,Ze)),Ot(t,r),n===1&&se===0&&!(e.mode&1)&&(Ii=ke()+500,oc&&Gr()))}function Ot(t,e){var n=t.callbackNode;qI(t,e);var r=uu(t,t===qe?Ze:0);if(r===0)n!==null&&py(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&py(n),e===1)t.tag===0?BN(ov.bind(null,t)):fx(ov.bind(null,t)),UN(function(){!(se&6)&&Gr()}),n=null;else{switch(z_(r)){case 1:n=rp;break;case 4:n=U_;break;case 16:n=lu;break;case 536870912:n=F_;break;default:n=lu}n=dw(n,sw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function sw(t,e){if(Hl=-1,Wl=0,se&6)throw Error(F(327));var n=t.callbackNode;if(fi()&&t.callbackNode!==n)return null;var r=uu(t,t===qe?Ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=Su(t,r);else{e=r;var s=se;se|=2;var i=ow();(qe!==t||Ze!==e)&&(Fn=null,Ii=ke()+500,fs(t,e));do try{cS();break}catch(u){iw(t,u)}while(!0);gp(),bu.current=i,se=s,Le!==null?e=0:(qe=null,Ze=0,e=Fe)}if(e!==0){if(e===2&&(s=Ch(t),s!==0&&(r=s,e=sf(t,s))),e===1)throw n=ca,fs(t,0),xr(t,r),Ot(t,ke()),n;if(e===6)xr(t,r);else{if(s=t.current.alternate,!(r&30)&&!lS(s)&&(e=Su(t,r),e===2&&(i=Ch(t),i!==0&&(r=i,e=sf(t,i))),e===1))throw n=ca,fs(t,0),xr(t,r),Ot(t,ke()),n;switch(t.finishedWork=s,t.finishedLanes=r,e){case 0:case 1:throw Error(F(345));case 2:rs(t,Pt,Fn);break;case 3:if(xr(t,r),(r&130023424)===r&&(e=kp+500-ke(),10<e)){if(uu(t,0)!==0)break;if(s=t.suspendedLanes,(s&r)!==r){Tt(),t.pingedLanes|=t.suspendedLanes&s;break}t.timeoutHandle=Vh(rs.bind(null,t,Pt,Fn),e);break}rs(t,Pt,Fn);break;case 4:if(xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,s=-1;0<r;){var o=31-cn(r);i=1<<o,o=e[o],o>s&&(s=o),r&=~i}if(r=s,r=ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*aS(r/1960))-r,10<r){t.timeoutHandle=Vh(rs.bind(null,t,Pt,Fn),r);break}rs(t,Pt,Fn);break;case 5:rs(t,Pt,Fn);break;default:throw Error(F(329))}}}return Ot(t,ke()),t.callbackNode===n?sw.bind(null,t):null}function sf(t,e){var n=$o;return t.current.memoizedState.isDehydrated&&(fs(t,e).flags|=256),t=Su(t,e),t!==2&&(e=Pt,Pt=n,e!==null&&of(e)),t}function of(t){Pt===null?Pt=t:Pt.push.apply(Pt,t)}function lS(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!pn(i(),s))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function xr(t,e){for(e&=~Cp,e&=~cc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-cn(e),r=1<<n;t[n]=-1,e&=~r}}function ov(t){if(se&6)throw Error(F(327));fi();var e=uu(t,0);if(!(e&1))return Ot(t,ke()),null;var n=Su(t,e);if(t.tag!==0&&n===2){var r=Ch(t);r!==0&&(e=r,n=sf(t,r))}if(n===1)throw n=ca,fs(t,0),xr(t,e),Ot(t,ke()),n;if(n===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,rs(t,Pt,Fn),Ot(t,ke()),null}function Rp(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Ii=ke()+500,oc&&Gr())}}function xs(t){Ir!==null&&Ir.tag===0&&!(se&6)&&fi();var e=se;se|=1;var n=Gt.transition,r=ae;try{if(Gt.transition=null,ae=1,t)return t()}finally{ae=r,Gt.transition=n,se=e,!(se&6)&&Gr()}}function jp(){Vt=oi.current,ye(oi)}function fs(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,VN(n)),Le!==null)for(n=Le.return;n!==null;){var r=n;switch(fp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&pu();break;case 3:Ti(),ye(Rt),ye(gt),Ep();break;case 5:wp(r);break;case 4:Ti();break;case 13:ye(we);break;case 19:ye(we);break;case 10:yp(r.type._context);break;case 22:case 23:jp()}n=n.return}if(qe=t,Le=t=Lr(t.current,null),Ze=Vt=e,Fe=0,ca=null,Cp=cc=_s=0,Pt=$o=null,as!==null){for(e=0;e<as.length;e++)if(n=as[e],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,i=n.pending;if(i!==null){var o=i.next;i.next=s,r.next=o}n.pending=r}as=null}return t}function iw(t,e){do{var n=Le;try{if(gp(),zl.current=Tu,Eu){for(var r=Ee.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}Eu=!1}if(vs=0,Be=Ue=Ee=null,Uo=!1,aa=0,Pp.current=null,n===null||n.return===null){Fe=1,ca=e,Le=null;break}e:{var i=t,o=n.return,u=n,c=e;if(e=Ze,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,g=f.tag;if(!(f.mode&1)&&(g===0||g===11||g===15)){var p=f.alternate;p?(f.updateQueue=p.updateQueue,f.memoizedState=p.memoizedState,f.lanes=p.lanes):(f.updateQueue=null,f.memoizedState=null)}var E=Ky(o);if(E!==null){E.flags&=-257,Gy(E,o,u,i,e),E.mode&1&&Wy(i,d,e),e=E,c=d;var N=e.updateQueue;if(N===null){var T=new Set;T.add(c),e.updateQueue=T}else N.add(c);break e}else{if(!(e&1)){Wy(i,d,e),Op();break e}c=Error(F(426))}}else if(ve&&u.mode&1){var A=Ky(o);if(A!==null){!(A.flags&65536)&&(A.flags|=256),Gy(A,o,u,i,e),pp(bi(c,u));break e}}i=c=bi(c,u),Fe!==4&&(Fe=2),$o===null?$o=[i]:$o.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var w=zx(i,c,e);Fy(i,w);break e;case 1:u=c;var x=i.type,y=i.stateNode;if(!(i.flags&128)&&(typeof x.getDerivedStateFromError=="function"||y!==null&&typeof y.componentDidCatch=="function"&&(Or===null||!Or.has(y)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Bx(i,u,e);Fy(i,C);break e}}i=i.return}while(i!==null)}lw(n)}catch(L){e=L,Le===n&&n!==null&&(Le=n=n.return);continue}break}while(!0)}function ow(){var t=bu.current;return bu.current=Tu,t===null?Tu:t}function Op(){(Fe===0||Fe===3||Fe===2)&&(Fe=4),qe===null||!(_s&268435455)&&!(cc&268435455)||xr(qe,Ze)}function Su(t,e){var n=se;se|=2;var r=ow();(qe!==t||Ze!==e)&&(Fn=null,fs(t,e));do try{uS();break}catch(s){iw(t,s)}while(!0);if(gp(),se=n,bu.current=r,Le!==null)throw Error(F(261));return qe=null,Ze=0,Fe}function uS(){for(;Le!==null;)aw(Le)}function cS(){for(;Le!==null&&!DI();)aw(Le)}function aw(t){var e=cw(t.alternate,t,Vt);t.memoizedProps=t.pendingProps,e===null?lw(t):Le=e,Pp.current=null}function lw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=rS(n,e),n!==null){n.flags&=32767,Le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Fe=6,Le=null;return}}else if(n=nS(n,e,Vt),n!==null){Le=n;return}if(e=e.sibling,e!==null){Le=e;return}Le=e=t}while(e!==null);Fe===0&&(Fe=5)}function rs(t,e,n){var r=ae,s=Gt.transition;try{Gt.transition=null,ae=1,dS(t,e,n,r)}finally{Gt.transition=s,ae=r}return null}function dS(t,e,n,r){do fi();while(Ir!==null);if(se&6)throw Error(F(327));n=t.finishedWork;var s=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(HI(t,i),t===qe&&(Le=qe=null,Ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Al||(Al=!0,dw(lu,function(){return fi(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=Gt.transition,Gt.transition=null;var o=ae;ae=1;var u=se;se|=4,Pp.current=null,iS(t,n),nw(n,t),kN(Lh),cu=!!Dh,Lh=Dh=null,t.current=n,oS(n),LI(),se=u,ae=o,Gt.transition=i}else t.current=n;if(Al&&(Al=!1,Ir=t,Nu=s),i=t.pendingLanes,i===0&&(Or=null),UI(n.stateNode),Ot(t,ke()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)s=e[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(Iu)throw Iu=!1,t=nf,nf=null,t;return Nu&1&&t.tag!==0&&fi(),i=t.pendingLanes,i&1?t===rf?zo++:(zo=0,rf=t):zo=0,Gr(),null}function fi(){if(Ir!==null){var t=z_(Nu),e=Gt.transition,n=ae;try{if(Gt.transition=null,ae=16>t?16:t,Ir===null)var r=!1;else{if(t=Ir,Ir=null,Nu=0,se&6)throw Error(F(331));var s=se;for(se|=4,q=t.current;q!==null;){var i=q,o=i.child;if(q.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(q=d;q!==null;){var f=q;switch(f.tag){case 0:case 11:case 15:Fo(8,f,i)}var g=f.child;if(g!==null)g.return=f,q=g;else for(;q!==null;){f=q;var p=f.sibling,E=f.return;if(Zx(f),f===d){q=null;break}if(p!==null){p.return=E,q=p;break}q=E}}}var N=i.alternate;if(N!==null){var T=N.child;if(T!==null){N.child=null;do{var A=T.sibling;T.sibling=null,T=A}while(T!==null)}}q=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,q=o;else e:for(;q!==null;){if(i=q,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Fo(9,i,i.return)}var w=i.sibling;if(w!==null){w.return=i.return,q=w;break e}q=i.return}}var x=t.current;for(q=x;q!==null;){o=q;var y=o.child;if(o.subtreeFlags&2064&&y!==null)y.return=o,q=y;else e:for(o=x;q!==null;){if(u=q,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:uc(9,u)}}catch(L){Ne(u,u.return,L)}if(u===o){q=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,q=C;break e}q=u.return}}if(se=s,Gr(),wn&&typeof wn.onPostCommitFiberRoot=="function")try{wn.onPostCommitFiberRoot(tc,t)}catch{}r=!0}return r}finally{ae=n,Gt.transition=e}}return!1}function av(t,e,n){e=bi(n,e),e=zx(t,e,1),t=jr(t,e,1),e=Tt(),t!==null&&(Pa(t,1,e),Ot(t,e))}function Ne(t,e,n){if(t.tag===3)av(t,t,n);else for(;e!==null;){if(e.tag===3){av(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Or===null||!Or.has(r))){t=bi(n,t),t=Bx(e,t,1),e=jr(e,t,1),t=Tt(),e!==null&&(Pa(e,1,t),Ot(e,t));break}}e=e.return}}function hS(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,qe===t&&(Ze&n)===n&&(Fe===4||Fe===3&&(Ze&130023424)===Ze&&500>ke()-kp?fs(t,0):Cp|=n),Ot(t,e)}function uw(t,e){e===0&&(t.mode&1?(e=vl,vl<<=1,!(vl&130023424)&&(vl=4194304)):e=1);var n=Tt();t=tr(t,e),t!==null&&(Pa(t,e,n),Ot(t,n))}function fS(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),uw(t,n)}function pS(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,s=t.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(F(314))}r!==null&&r.delete(e),uw(t,n)}var cw;cw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,tS(t,e,n);kt=!!(t.flags&131072)}else kt=!1,ve&&e.flags&1048576&&px(e,yu,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;ql(t,e),t=e.pendingProps;var s=xi(e,gt.current);hi(e,n),s=bp(null,e,r,t,s,n);var i=Ip();return e.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jt(r)?(i=!0,mu(e)):i=!1,e.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,_p(e),s.updater=lc,e.stateNode=s,s._reactInternals=e,Hh(e,r,t,n),e=Gh(null,e,r,!0,i,n)):(e.tag=0,ve&&i&&hp(e),Et(null,e,s,n),e=e.child),e;case 16:r=e.elementType;e:{switch(ql(t,e),t=e.pendingProps,s=r._init,r=s(r._payload),e.type=r,s=e.tag=gS(r),t=rn(r,t),s){case 0:e=Kh(null,e,r,t,n);break e;case 1:e=Xy(null,e,r,t,n);break e;case 11:e=Qy(null,e,r,t,n);break e;case 14:e=Yy(null,e,r,rn(r.type,t),n);break e}throw Error(F(306,r,""))}return e;case 0:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Kh(t,e,r,s,n);case 1:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Xy(t,e,r,s,n);case 3:e:{if(Kx(e),t===null)throw Error(F(387));r=e.pendingProps,i=e.memoizedState,s=i.element,xx(t,e),xu(e,r,null,n);var o=e.memoizedState;if(r=o.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){s=bi(Error(F(423)),e),e=Jy(t,e,r,n,s);break e}else if(r!==s){s=bi(Error(F(424)),e),e=Jy(t,e,r,n,s);break e}else for(Ut=Rr(e.stateNode.containerInfo.firstChild),$t=e,ve=!0,on=null,n=vx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wi(),r===s){e=nr(t,e,n);break e}Et(t,e,r,n)}e=e.child}return e;case 5:return wx(e),t===null&&zh(e),r=e.type,s=e.pendingProps,i=t!==null?t.memoizedProps:null,o=s.children,Mh(r,s)?o=null:i!==null&&Mh(r,i)&&(e.flags|=32),Wx(t,e),Et(t,e,o,n),e.child;case 6:return t===null&&zh(e),null;case 13:return Gx(t,e,n);case 4:return xp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=Ei(e,null,r,n):Et(t,e,r,n),e.child;case 11:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),Qy(t,e,r,s,n);case 7:return Et(t,e,e.pendingProps,n),e.child;case 8:return Et(t,e,e.pendingProps.children,n),e.child;case 12:return Et(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,s=e.pendingProps,i=e.memoizedProps,o=s.value,pe(vu,r._currentValue),r._currentValue=o,i!==null)if(pn(i.value,o)){if(i.children===s.children&&!Rt.current){e=nr(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){o=i.child;for(var c=u.firstContext;c!==null;){if(c.context===r){if(i.tag===1){c=Qn(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Bh(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=n,u=o.alternate,u!==null&&(u.lanes|=n),Bh(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Et(t,e,s.children,n),e=e.child}return e;case 9:return s=e.type,r=e.pendingProps.children,hi(e,n),s=Qt(s),r=r(s),e.flags|=1,Et(t,e,r,n),e.child;case 14:return r=e.type,s=rn(r,e.pendingProps),s=rn(r.type,s),Yy(t,e,r,s,n);case 15:return qx(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,s=e.pendingProps,s=e.elementType===r?s:rn(r,s),ql(t,e),e.tag=1,jt(r)?(t=!0,mu(e)):t=!1,hi(e,n),$x(e,r,s),Hh(e,r,s,n),Gh(null,e,r,!0,t,n);case 19:return Qx(t,e,n);case 22:return Hx(t,e,n)}throw Error(F(156,e.tag))};function dw(t,e){return V_(t,e)}function mS(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Kt(t,e,n,r){return new mS(t,e,n,r)}function Dp(t){return t=t.prototype,!(!t||!t.isReactComponent)}function gS(t){if(typeof t=="function")return Dp(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ep)return 11;if(t===tp)return 14}return 2}function Lr(t,e){var n=t.alternate;return n===null?(n=Kt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Kl(t,e,n,r,s,i){var o=2;if(r=t,typeof t=="function")Dp(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Ys:return ps(n.children,s,i,e);case Zf:o=8,s|=8;break;case mh:return t=Kt(12,n,e,s|2),t.elementType=mh,t.lanes=i,t;case gh:return t=Kt(13,n,e,s),t.elementType=gh,t.lanes=i,t;case yh:return t=Kt(19,n,e,s),t.elementType=yh,t.lanes=i,t;case w_:return dc(n,s,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case __:o=10;break e;case x_:o=9;break e;case ep:o=11;break e;case tp:o=14;break e;case yr:o=16,r=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=Kt(o,n,e,s),e.elementType=t,e.type=r,e.lanes=i,e}function ps(t,e,n,r){return t=Kt(7,t,r,e),t.lanes=n,t}function dc(t,e,n,r){return t=Kt(22,t,r,e),t.elementType=w_,t.lanes=n,t.stateNode={isHidden:!1},t}function Bd(t,e,n){return t=Kt(6,t,null,e),t.lanes=n,t}function qd(t,e,n){return e=Kt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function yS(t,e,n,r,s){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=bd(0),this.expirationTimes=bd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=bd(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function Lp(t,e,n,r,s,i,o,u,c){return t=new yS(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Kt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},_p(i),t}function vS(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qs,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function hw(t){if(!t)return $r;t=t._reactInternals;e:{if(Ps(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var n=t.type;if(jt(n))return hx(t,n,e)}return e}function fw(t,e,n,r,s,i,o,u,c){return t=Lp(n,r,!0,t,s,i,o,u,c),t.context=hw(null),n=t.current,r=Tt(),s=Dr(n),i=Qn(r,s),i.callback=e??null,jr(n,i,s),t.current.lanes=s,Pa(t,s,r),Ot(t,r),t}function hc(t,e,n,r){var s=e.current,i=Tt(),o=Dr(s);return n=hw(n),e.context===null?e.context=n:e.pendingContext=n,e=Qn(i,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=jr(s,e,o),t!==null&&(dn(t,s,o,i),$l(t,s,o)),o}function Au(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function lv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Mp(t,e){lv(t,e),(t=t.alternate)&&lv(t,e)}function _S(){return null}var pw=typeof reportError=="function"?reportError:function(t){console.error(t)};function Vp(t){this._internalRoot=t}fc.prototype.render=Vp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));hc(t,e,null,null)};fc.prototype.unmount=Vp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xs(function(){hc(null,t,null,null)}),e[er]=null}};function fc(t){this._internalRoot=t}fc.prototype.unstable_scheduleHydration=function(t){if(t){var e=H_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<_r.length&&e!==0&&e<_r[n].priority;n++);_r.splice(n,0,t),n===0&&K_(t)}};function Up(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function uv(){}function xS(t,e,n,r,s){if(s){if(typeof r=="function"){var i=r;r=function(){var d=Au(o);i.call(d)}}var o=fw(e,r,t,0,null,!1,!1,"",uv);return t._reactRootContainer=o,t[er]=o.current,na(t.nodeType===8?t.parentNode:t),xs(),o}for(;s=t.lastChild;)t.removeChild(s);if(typeof r=="function"){var u=r;r=function(){var d=Au(c);u.call(d)}}var c=Lp(t,0,!1,null,null,!1,!1,"",uv);return t._reactRootContainer=c,t[er]=c.current,na(t.nodeType===8?t.parentNode:t),xs(function(){hc(e,c,n,r)}),c}function mc(t,e,n,r,s){var i=n._reactRootContainer;if(i){var o=i;if(typeof s=="function"){var u=s;s=function(){var c=Au(o);u.call(c)}}hc(e,o,t,s)}else o=xS(n,e,t,s,r);return Au(o)}B_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Io(e.pendingLanes);n!==0&&(sp(e,n|1),Ot(e,ke()),!(se&6)&&(Ii=ke()+500,Gr()))}break;case 13:xs(function(){var r=tr(t,1);if(r!==null){var s=Tt();dn(r,t,1,s)}}),Mp(t,1)}};ip=function(t){if(t.tag===13){var e=tr(t,134217728);if(e!==null){var n=Tt();dn(e,t,134217728,n)}Mp(t,134217728)}};q_=function(t){if(t.tag===13){var e=Dr(t),n=tr(t,e);if(n!==null){var r=Tt();dn(n,t,e,r)}Mp(t,e)}};H_=function(){return ae};W_=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Sh=function(t,e,n){switch(e){case"input":if(xh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var s=ic(r);if(!s)throw Error(F(90));T_(r),xh(r,s)}}}break;case"textarea":I_(t,n);break;case"select":e=n.value,e!=null&&li(t,!!n.multiple,e,!1)}};R_=Rp;j_=xs;var wS={usingClientEntryPoint:!1,Events:[ka,ei,ic,C_,k_,Rp]},vo={findFiberByHostInstance:os,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ES={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ar.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=L_(t),t===null?null:t.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||_S,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Pl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Pl.isDisabled&&Pl.supportsFiber)try{tc=Pl.inject(ES),wn=Pl}catch{}}Bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=wS;Bt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Up(e))throw Error(F(200));return vS(t,e,null,n)};Bt.createRoot=function(t,e){if(!Up(t))throw Error(F(299));var n=!1,r="",s=pw;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(s=e.onRecoverableError)),e=Lp(t,1,!1,null,null,n,!1,r,s),t[er]=e.current,na(t.nodeType===8?t.parentNode:t),new Vp(e)};Bt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=L_(e),t=t===null?null:t.stateNode,t};Bt.flushSync=function(t){return xs(t)};Bt.hydrate=function(t,e,n){if(!pc(e))throw Error(F(200));return mc(null,t,e,!0,n)};Bt.hydrateRoot=function(t,e,n){if(!Up(t))throw Error(F(405));var r=n!=null&&n.hydratedSources||null,s=!1,i="",o=pw;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=fw(e,null,t,1,n??null,s,!1,i,o),t[er]=e.current,na(t),r)for(t=0;t<r.length;t++)n=r[t],s=n._getVersion,s=s(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,s]:e.mutableSourceEagerHydrationData.push(n,s);return new fc(e)};Bt.render=function(t,e,n){if(!pc(e))throw Error(F(200));return mc(null,t,e,!1,n)};Bt.unmountComponentAtNode=function(t){if(!pc(t))throw Error(F(40));return t._reactRootContainer?(xs(function(){mc(null,null,t,!1,function(){t._reactRootContainer=null,t[er]=null})}),!0):!1};Bt.unstable_batchedUpdates=Rp;Bt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!pc(n))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return mc(t,e,n,!1,r)};Bt.version="18.3.1-next-f1338f8080-20240426";function mw(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(mw)}catch(t){console.error(t)}}mw(),m_.exports=Bt;var TS=m_.exports,cv=TS;fh.createRoot=cv.createRoot,fh.hydrateRoot=cv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function da(){return da=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},da.apply(this,arguments)}var Nr;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Nr||(Nr={}));const dv="popstate";function bS(t){t===void 0&&(t={});function e(r,s){let{pathname:i,search:o,hash:u}=r.location;return af("",{pathname:i,search:o,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Pu(s)}return NS(e,n,null,t)}function je(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function gw(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IS(){return Math.random().toString(36).substr(2,8)}function hv(t,e){return{usr:t.state,key:t.key,idx:e}}function af(t,e,n,r){return n===void 0&&(n=null),da({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?zi(e):e,{state:n,key:e&&e.key||r||IS()})}function Pu(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function zi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function NS(t,e,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:i=!1}=r,o=s.history,u=Nr.Pop,c=null,d=f();d==null&&(d=0,o.replaceState(da({},o.state,{idx:d}),""));function f(){return(o.state||{idx:null}).idx}function g(){u=Nr.Pop;let A=f(),w=A==null?null:A-d;d=A,c&&c({action:u,location:T.location,delta:w})}function p(A,w){u=Nr.Push;let x=af(T.location,A,w);d=f()+1;let y=hv(x,d),C=T.createHref(x);try{o.pushState(y,"",C)}catch(L){if(L instanceof DOMException&&L.name==="DataCloneError")throw L;s.location.assign(C)}i&&c&&c({action:u,location:T.location,delta:1})}function E(A,w){u=Nr.Replace;let x=af(T.location,A,w);d=f();let y=hv(x,d),C=T.createHref(x);o.replaceState(y,"",C),i&&c&&c({action:u,location:T.location,delta:0})}function N(A){let w=s.location.origin!=="null"?s.location.origin:s.location.href,x=typeof A=="string"?A:Pu(A);return x=x.replace(/ $/,"%20"),je(w,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,w)}let T={get action(){return u},get location(){return t(s,o)},listen(A){if(c)throw new Error("A history only accepts one active listener");return s.addEventListener(dv,g),c=A,()=>{s.removeEventListener(dv,g),c=null}},createHref(A){return e(s,A)},createURL:N,encodeLocation(A){let w=N(A);return{pathname:w.pathname,search:w.search,hash:w.hash}},push:p,replace:E,go(A){return o.go(A)}};return T}var fv;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(fv||(fv={}));function SS(t,e,n){return n===void 0&&(n="/"),AS(t,e,n)}function AS(t,e,n,r){let s=typeof e=="string"?zi(e):e,i=Fp(s.pathname||"/",n);if(i==null)return null;let o=yw(t);PS(o);let u=null;for(let c=0;u==null&&c<o.length;++c){let d=$S(i);u=VS(o[c],d)}return u}function yw(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(i,o,u)=>{let c={relativePath:u===void 0?i.path||"":u,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(je(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let d=Mr([r,c.relativePath]),f=n.concat(c);i.children&&i.children.length>0&&(je(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),yw(i.children,e,f,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:LS(d,i.index),routesMeta:f})};return t.forEach((i,o)=>{var u;if(i.path===""||!((u=i.path)!=null&&u.includes("?")))s(i,o);else for(let c of vw(i.path))s(i,o,c)}),e}function vw(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,s=n.endsWith("?"),i=n.replace(/\?$/,"");if(r.length===0)return s?[i,""]:[i];let o=vw(r.join("/")),u=[];return u.push(...o.map(c=>c===""?i:[i,c].join("/"))),s&&u.push(...o),u.map(c=>t.startsWith("/")&&c===""?"/":c)}function PS(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:MS(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const CS=/^:[\w-]+$/,kS=3,RS=2,jS=1,OS=10,DS=-2,pv=t=>t==="*";function LS(t,e){let n=t.split("/"),r=n.length;return n.some(pv)&&(r+=DS),e&&(r+=RS),n.filter(s=>!pv(s)).reduce((s,i)=>s+(CS.test(i)?kS:i===""?jS:OS),r)}function MS(t,e){return t.length===e.length&&t.slice(0,-1).every((r,s)=>r===e[s])?t[t.length-1]-e[e.length-1]:0}function VS(t,e,n){let{routesMeta:r}=t,s={},i="/",o=[];for(let u=0;u<r.length;++u){let c=r[u],d=u===r.length-1,f=i==="/"?e:e.slice(i.length)||"/",g=US({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},f),p=c.route;if(!g)return null;Object.assign(s,g.params),o.push({params:s,pathname:Mr([i,g.pathname]),pathnameBase:HS(Mr([i,g.pathnameBase])),route:p}),g.pathnameBase!=="/"&&(i=Mr([i,g.pathnameBase]))}return o}function US(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=FS(t.path,t.caseSensitive,t.end),s=e.match(n);if(!s)return null;let i=s[0],o=i.replace(/(.)\/+$/,"$1"),u=s.slice(1);return{params:r.reduce((d,f,g)=>{let{paramName:p,isOptional:E}=f;if(p==="*"){let T=u[g]||"";o=i.slice(0,i.length-T.length).replace(/(.)\/+$/,"$1")}const N=u[g];return E&&!N?d[p]=void 0:d[p]=(N||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function FS(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),gw(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],s="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,u,c)=>(r.push({paramName:u,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),s+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":t!==""&&t!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,e?void 0:"i"),r]}function $S(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return gw(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Fp(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function zS(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:s=""}=typeof t=="string"?zi(t):t;return{pathname:n?n.startsWith("/")?n:BS(n,e):e,search:WS(r),hash:KS(s)}}function BS(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function Hd(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function qS(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function $p(t,e){let n=qS(t);return e?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function zp(t,e,n,r){r===void 0&&(r=!1);let s;typeof t=="string"?s=zi(t):(s=da({},t),je(!s.pathname||!s.pathname.includes("?"),Hd("?","pathname","search",s)),je(!s.pathname||!s.pathname.includes("#"),Hd("#","pathname","hash",s)),je(!s.search||!s.search.includes("#"),Hd("#","search","hash",s)));let i=t===""||s.pathname==="",o=i?"/":s.pathname,u;if(o==null)u=n;else{let g=e.length-1;if(!r&&o.startsWith("..")){let p=o.split("/");for(;p[0]==="..";)p.shift(),g-=1;s.pathname=p.join("/")}u=g>=0?e[g]:"/"}let c=zS(s,u),d=o&&o!=="/"&&o.endsWith("/"),f=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||f)&&(c.pathname+="/"),c}const Mr=t=>t.join("/").replace(/\/\/+/g,"/"),HS=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),WS=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,KS=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function GS(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const _w=["post","put","patch","delete"];new Set(_w);const QS=["get",..._w];new Set(QS);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ha(){return ha=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ha.apply(this,arguments)}const Bp=R.createContext(null),YS=R.createContext(null),Qr=R.createContext(null),gc=R.createContext(null),lr=R.createContext({outlet:null,matches:[],isDataRoute:!1}),xw=R.createContext(null);function XS(t,e){let{relative:n}=e===void 0?{}:e;Bi()||je(!1);let{basename:r,navigator:s}=R.useContext(Qr),{hash:i,pathname:o,search:u}=Tw(t,{relative:n}),c=o;return r!=="/"&&(c=o==="/"?r:Mr([r,o])),s.createHref({pathname:c,search:u,hash:i})}function Bi(){return R.useContext(gc)!=null}function Cs(){return Bi()||je(!1),R.useContext(gc).location}function ww(t){R.useContext(Qr).static||R.useLayoutEffect(t)}function Zt(){let{isDataRoute:t}=R.useContext(lr);return t?cA():JS()}function JS(){Bi()||je(!1);let t=R.useContext(Bp),{basename:e,future:n,navigator:r}=R.useContext(Qr),{matches:s}=R.useContext(lr),{pathname:i}=Cs(),o=JSON.stringify($p(s,n.v7_relativeSplatPath)),u=R.useRef(!1);return ww(()=>{u.current=!0}),R.useCallback(function(d,f){if(f===void 0&&(f={}),!u.current)return;if(typeof d=="number"){r.go(d);return}let g=zp(d,JSON.parse(o),i,f.relative==="path");t==null&&e!=="/"&&(g.pathname=g.pathname==="/"?e:Mr([e,g.pathname])),(f.replace?r.replace:r.push)(g,f.state,f)},[e,r,o,i,t])}function Ew(){let{matches:t}=R.useContext(lr),e=t[t.length-1];return e?e.params:{}}function Tw(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=R.useContext(Qr),{matches:s}=R.useContext(lr),{pathname:i}=Cs(),o=JSON.stringify($p(s,r.v7_relativeSplatPath));return R.useMemo(()=>zp(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function ZS(t,e){return eA(t,e)}function eA(t,e,n,r){Bi()||je(!1);let{navigator:s}=R.useContext(Qr),{matches:i}=R.useContext(lr),o=i[i.length-1],u=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Cs(),f;if(e){var g;let A=typeof e=="string"?zi(e):e;c==="/"||(g=A.pathname)!=null&&g.startsWith(c)||je(!1),f=A}else f=d;let p=f.pathname||"/",E=p;if(c!=="/"){let A=c.replace(/^\//,"").split("/");E="/"+p.replace(/^\//,"").split("/").slice(A.length).join("/")}let N=SS(t,{pathname:E}),T=iA(N&&N.map(A=>Object.assign({},A,{params:Object.assign({},u,A.params),pathname:Mr([c,s.encodeLocation?s.encodeLocation(A.pathname).pathname:A.pathname]),pathnameBase:A.pathnameBase==="/"?c:Mr([c,s.encodeLocation?s.encodeLocation(A.pathnameBase).pathname:A.pathnameBase])})),i,n,r);return e&&T?R.createElement(gc.Provider,{value:{location:ha({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:Nr.Pop}},T):T}function tA(){let t=uA(),e=GS(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),n?R.createElement("pre",{style:s},n):null,null)}const nA=R.createElement(tA,null);class rA extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?R.createElement(lr.Provider,{value:this.props.routeContext},R.createElement(xw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sA(t){let{routeContext:e,match:n,children:r}=t,s=R.useContext(Bp);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),R.createElement(lr.Provider,{value:e},r)}function iA(t,e,n,r){var s;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=r)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,u=(s=n)==null?void 0:s.errors;if(u!=null){let f=o.findIndex(g=>g.route.id&&(u==null?void 0:u[g.route.id])!==void 0);f>=0||je(!1),o=o.slice(0,Math.min(o.length,f+1))}let c=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let f=0;f<o.length;f++){let g=o[f];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(d=f),g.route.id){let{loaderData:p,errors:E}=n,N=g.route.loader&&p[g.route.id]===void 0&&(!E||E[g.route.id]===void 0);if(g.route.lazy||N){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((f,g,p)=>{let E,N=!1,T=null,A=null;n&&(E=u&&g.route.id?u[g.route.id]:void 0,T=g.route.errorElement||nA,c&&(d<0&&p===0?(dA("route-fallback"),N=!0,A=null):d===p&&(N=!0,A=g.route.hydrateFallbackElement||null)));let w=e.concat(o.slice(0,p+1)),x=()=>{let y;return E?y=T:N?y=A:g.route.Component?y=R.createElement(g.route.Component,null):g.route.element?y=g.route.element:y=f,R.createElement(sA,{match:g,routeContext:{outlet:f,matches:w,isDataRoute:n!=null},children:y})};return n&&(g.route.ErrorBoundary||g.route.errorElement||p===0)?R.createElement(rA,{location:n.location,revalidation:n.revalidation,component:T,error:E,children:x(),routeContext:{outlet:null,matches:w,isDataRoute:!0}}):x()},null)}var bw=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(bw||{}),Iw=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Iw||{});function oA(t){let e=R.useContext(Bp);return e||je(!1),e}function aA(t){let e=R.useContext(YS);return e||je(!1),e}function lA(t){let e=R.useContext(lr);return e||je(!1),e}function Nw(t){let e=lA(),n=e.matches[e.matches.length-1];return n.route.id||je(!1),n.route.id}function uA(){var t;let e=R.useContext(xw),n=aA(),r=Nw();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function cA(){let{router:t}=oA(bw.UseNavigateStable),e=Nw(Iw.UseNavigateStable),n=R.useRef(!1);return ww(()=>{n.current=!0}),R.useCallback(function(s,i){i===void 0&&(i={}),n.current&&(typeof s=="number"?t.navigate(s):t.navigate(s,ha({fromRouteId:e},i)))},[t,e])}const mv={};function dA(t,e,n){mv[t]||(mv[t]=!0)}function hA(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function lf(t){let{to:e,replace:n,state:r,relative:s}=t;Bi()||je(!1);let{future:i,static:o}=R.useContext(Qr),{matches:u}=R.useContext(lr),{pathname:c}=Cs(),d=Zt(),f=zp(e,$p(u,i.v7_relativeSplatPath),c,s==="path"),g=JSON.stringify(f);return R.useEffect(()=>d(JSON.parse(g),{replace:n,state:r,relative:s}),[d,g,s,n,r]),null}function ct(t){je(!1)}function fA(t){let{basename:e="/",children:n=null,location:r,navigationType:s=Nr.Pop,navigator:i,static:o=!1,future:u}=t;Bi()&&je(!1);let c=e.replace(/^\/*/,"/"),d=R.useMemo(()=>({basename:c,navigator:i,static:o,future:ha({v7_relativeSplatPath:!1},u)}),[c,u,i,o]);typeof r=="string"&&(r=zi(r));let{pathname:f="/",search:g="",hash:p="",state:E=null,key:N="default"}=r,T=R.useMemo(()=>{let A=Fp(f,c);return A==null?null:{location:{pathname:A,search:g,hash:p,state:E,key:N},navigationType:s}},[c,f,g,p,E,N,s]);return T==null?null:R.createElement(Qr.Provider,{value:d},R.createElement(gc.Provider,{children:n,value:T}))}function pA(t){let{children:e,location:n}=t;return ZS(uf(e),n)}new Promise(()=>{});function uf(t,e){e===void 0&&(e=[]);let n=[];return R.Children.forEach(t,(r,s)=>{if(!R.isValidElement(r))return;let i=[...e,s];if(r.type===R.Fragment){n.push.apply(n,uf(r.props.children,i));return}r.type!==ct&&je(!1),!r.props.index||!r.props.children||je(!1);let o={id:r.props.id||i.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=uf(r.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cf(){return cf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cf.apply(this,arguments)}function mA(t,e){if(t==null)return{};var n={},r=Object.keys(t),s,i;for(i=0;i<r.length;i++)s=r[i],!(e.indexOf(s)>=0)&&(n[s]=t[s]);return n}function gA(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function yA(t,e){return t.button===0&&(!e||e==="_self")&&!gA(t)}function df(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function vA(t,e){let n=df(t);return e&&e.forEach((r,s)=>{n.has(s)||e.getAll(s).forEach(i=>{n.append(s,i)})}),n}const _A=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],xA="6";try{window.__reactRouterVersion=xA}catch{}const wA="startTransition",gv=hI[wA];function EA(t){let{basename:e,children:n,future:r,window:s}=t,i=R.useRef();i.current==null&&(i.current=bS({window:s,v5Compat:!0}));let o=i.current,[u,c]=R.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},f=R.useCallback(g=>{d&&gv?gv(()=>c(g)):c(g)},[c,d]);return R.useLayoutEffect(()=>o.listen(f),[o,f]),R.useEffect(()=>hA(r),[r]),R.createElement(fA,{basename:e,children:n,location:u.location,navigationType:u.action,navigator:o,future:r})}const TA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,de=R.forwardRef(function(e,n){let{onClick:r,relative:s,reloadDocument:i,replace:o,state:u,target:c,to:d,preventScrollReset:f,viewTransition:g}=e,p=mA(e,_A),{basename:E}=R.useContext(Qr),N,T=!1;if(typeof d=="string"&&bA.test(d)&&(N=d,TA))try{let y=new URL(window.location.href),C=d.startsWith("//")?new URL(y.protocol+d):new URL(d),L=Fp(C.pathname,E);C.origin===y.origin&&L!=null?d=L+C.search+C.hash:T=!0}catch{}let A=XS(d,{relative:s}),w=IA(d,{replace:o,state:u,target:c,preventScrollReset:f,relative:s,viewTransition:g});function x(y){r&&r(y),y.defaultPrevented||w(y)}return R.createElement("a",cf({},p,{href:N||A,onClick:T||i?r:x,ref:n,target:c}))});var yv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(yv||(yv={}));var vv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(vv||(vv={}));function IA(t,e){let{target:n,replace:r,state:s,preventScrollReset:i,relative:o,viewTransition:u}=e===void 0?{}:e,c=Zt(),d=Cs(),f=Tw(t,{relative:o});return R.useCallback(g=>{if(yA(g,n)){g.preventDefault();let p=r!==void 0?r:Pu(d)===Pu(f);c(t,{replace:p,state:s,preventScrollReset:i,relative:o,viewTransition:u})}},[d,c,f,r,s,n,t,i,o,u])}function NA(t){let e=R.useRef(df(t)),n=R.useRef(!1),r=Cs(),s=R.useMemo(()=>vA(r.search,n.current?null:e.current),[r.search]),i=Zt(),o=R.useCallback((u,c)=>{const d=df(typeof u=="function"?u(s):u);n.current=!0,i("?"+d,c)},[i,s]);return[s,o]}var _v={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},SA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],u=t[n++],c=((s&7)<<18|(i&63)<<12|(o&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},Aw={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,u=o?t[s+1]:0,c=s+2<t.length,d=c?t[s+2]:0,f=i>>2,g=(i&3)<<4|u>>4;let p=(u&15)<<2|d>>6,E=d&63;c||(E=64,o||(p=64)),r.push(n[f],n[g],n[p],n[E])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Sw(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):SA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],u=s<t.length?n[t.charAt(s)]:0;++s;const d=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||u==null||d==null||g==null)throw new AA;const p=i<<2|u>>4;if(r.push(p),d!==64){const E=u<<4&240|d>>2;if(r.push(E),g!==64){const N=d<<6&192|g;r.push(N)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class AA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const PA=function(t){const e=Sw(t);return Aw.encodeByteArray(e,!0)},Cu=function(t){return PA(t).replace(/\./g,"")},Pw=function(t){try{return Aw.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=()=>CA().__FIREBASE_DEFAULTS__,RA=()=>{if(typeof process>"u"||typeof _v>"u")return;const t=_v.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},jA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Pw(t[1]);return e&&JSON.parse(e)},yc=()=>{try{return kA()||RA()||jA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Cw=t=>{var e,n;return(n=(e=yc())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},kw=t=>{const e=Cw(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Rw=()=>{var t;return(t=yc())===null||t===void 0?void 0:t.config},jw=t=>{var e;return(e=yc())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ow(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},t);return[Cu(JSON.stringify(n)),Cu(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function DA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(yt())}function LA(){var t;const e=(t=yc())===null||t===void 0?void 0:t.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function MA(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function VA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function UA(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FA(){const t=yt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function $A(){return!LA()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Dw(){try{return typeof indexedDB=="object"}catch{return!1}}function Lw(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;e(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){e(n)}})}function zA(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BA="FirebaseError";class yn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=BA,Object.setPrototypeOf(this,yn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ks.prototype.create)}}class ks{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?qA(i,r):"Error",u=`${this.serviceName}: ${o} (${s}).`;return new yn(s,u,r)}}function qA(t,e){return t.replace(HA,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const HA=/\{\$([^}]+)}/g;function WA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function fa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(xv(i)&&xv(o)){if(!fa(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function xv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ja(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function So(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[s,i]=r.split("=");e[decodeURIComponent(s)]=decodeURIComponent(i)}}),e}function Ao(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function KA(t,e){const n=new GA(t,e);return n.subscribe.bind(n)}class GA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");QA(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wd),s.error===void 0&&(s.error=Wd),s.complete===void 0&&(s.complete=Wd);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),i}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _e(t){return t&&t._delegate?t._delegate:t}class Xt{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ss="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new OA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),s=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JA(e))try{this.getOrInitializeService({instanceIdentifier:ss})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=ss){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ss){return this.instances.has(e)}getOptions(e=ss){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const u=this.normalizeInstanceIdentifier(i);r===u&&o.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(e),this.onInitCallbacks.set(s,i);const o=this.instances.get(s);return o&&e(o,s),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:XA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ss){return this.component?this.component.multipleInstances?e:ss:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XA(t){return t===ss?void 0:t}function JA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new YA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ne;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(ne||(ne={}));const eP={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},tP=ne.INFO,nP={[ne.DEBUG]:"log",[ne.VERBOSE]:"log",[ne.INFO]:"info",[ne.WARN]:"warn",[ne.ERROR]:"error"},rP=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=nP[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qp{constructor(e){this.name=e,this._logLevel=tP,this._logHandler=rP,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in ne))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,ne.DEBUG,...e),this._logHandler(this,ne.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,ne.VERBOSE,...e),this._logHandler(this,ne.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,ne.INFO,...e),this._logHandler(this,ne.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,ne.WARN,...e),this._logHandler(this,ne.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,ne.ERROR,...e),this._logHandler(this,ne.ERROR,...e)}}const sP=(t,e)=>e.some(n=>t instanceof n);let wv,Ev;function iP(){return wv||(wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oP(){return Ev||(Ev=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Mw=new WeakMap,hf=new WeakMap,Vw=new WeakMap,Kd=new WeakMap,Hp=new WeakMap;function aP(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(Yn(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Mw.set(n,t)}).catch(()=>{}),Hp.set(e,t),e}function lP(t){if(hf.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});hf.set(t,e)}let ff={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return hf.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Vw.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Yn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function uP(t){ff=t(ff)}function cP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Gd(this),e,...n);return Vw.set(r,e.sort?e.sort():[e]),Yn(r)}:oP().includes(t)?function(...e){return t.apply(Gd(this),e),Yn(Mw.get(this))}:function(...e){return Yn(t.apply(Gd(this),e))}}function dP(t){return typeof t=="function"?cP(t):(t instanceof IDBTransaction&&lP(t),sP(t,iP())?new Proxy(t,ff):t)}function Yn(t){if(t instanceof IDBRequest)return aP(t);if(Kd.has(t))return Kd.get(t);const e=dP(t);return e!==t&&(Kd.set(t,e),Hp.set(e,t)),e}const Gd=t=>Hp.get(t);function vc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),u=Yn(o);return r&&o.addEventListener("upgradeneeded",c=>{r(Yn(o.result),c.oldVersion,c.newVersion,Yn(o.transaction),c)}),n&&o.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),u.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",d=>s(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}function Qd(t,{blocked:e}={}){const n=indexedDB.deleteDatabase(t);return e&&n.addEventListener("blocked",r=>e(r.oldVersion,r)),Yn(n).then(()=>{})}const hP=["get","getKey","getAll","getAllKeys","count"],fP=["put","add","delete","clear"],Yd=new Map;function Tv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Yd.get(e))return Yd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=fP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||hP.includes(n)))return;const i=async function(o,...u){const c=this.transaction(o,s?"readwrite":"readonly");let d=c.store;return r&&(d=d.index(u.shift())),(await Promise.all([d[n](...u),s&&c.done]))[0]};return Yd.set(e,i),i}uP(t=>({...t,get:(e,n,r)=>Tv(e,n)||t.get(e,n,r),has:(e,n)=>!!Tv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pP{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(mP(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function mP(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const pf="@firebase/app",bv="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr=new qp("@firebase/app"),gP="@firebase/app-compat",yP="@firebase/analytics-compat",vP="@firebase/analytics",_P="@firebase/app-check-compat",xP="@firebase/app-check",wP="@firebase/auth",EP="@firebase/auth-compat",TP="@firebase/database",bP="@firebase/data-connect",IP="@firebase/database-compat",NP="@firebase/functions",SP="@firebase/functions-compat",AP="@firebase/installations",PP="@firebase/installations-compat",CP="@firebase/messaging",kP="@firebase/messaging-compat",RP="@firebase/performance",jP="@firebase/performance-compat",OP="@firebase/remote-config",DP="@firebase/remote-config-compat",LP="@firebase/storage",MP="@firebase/storage-compat",VP="@firebase/firestore",UP="@firebase/vertexai-preview",FP="@firebase/firestore-compat",$P="firebase",zP="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf="[DEFAULT]",BP={[pf]:"fire-core",[gP]:"fire-core-compat",[vP]:"fire-analytics",[yP]:"fire-analytics-compat",[xP]:"fire-app-check",[_P]:"fire-app-check-compat",[wP]:"fire-auth",[EP]:"fire-auth-compat",[TP]:"fire-rtdb",[bP]:"fire-data-connect",[IP]:"fire-rtdb-compat",[NP]:"fire-fn",[SP]:"fire-fn-compat",[AP]:"fire-iid",[PP]:"fire-iid-compat",[CP]:"fire-fcm",[kP]:"fire-fcm-compat",[RP]:"fire-perf",[jP]:"fire-perf-compat",[OP]:"fire-rc",[DP]:"fire-rc-compat",[LP]:"fire-gcs",[MP]:"fire-gcs-compat",[VP]:"fire-fst",[FP]:"fire-fst-compat",[UP]:"fire-vertex","fire-js":"fire-js",[$P]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ku=new Map,qP=new Map,gf=new Map;function Iv(t,e){try{t.container.addComponent(e)}catch(n){rr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function mn(t){const e=t.name;if(gf.has(e))return rr.debug(`There were multiple attempts to register component ${e}.`),!1;gf.set(e,t);for(const n of ku.values())Iv(n,t);for(const n of qP.values())Iv(n,t);return!0}function Rs(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function an(t){return t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HP={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Vr=new ks("app","Firebase",HP);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WP{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Xt("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Vr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=zP;function Uw(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:mf,automaticDataCollectionEnabled:!1},e),s=r.name;if(typeof s!="string"||!s)throw Vr.create("bad-app-name",{appName:String(s)});if(n||(n=Rw()),!n)throw Vr.create("no-options");const i=ku.get(s);if(i){if(fa(n,i.options)&&fa(r,i.config))return i;throw Vr.create("duplicate-app",{appName:s})}const o=new ZA(s);for(const c of gf.values())o.addComponent(c);const u=new WP(n,r,o);return ku.set(s,u),u}function _c(t=mf){const e=ku.get(t);if(!e&&t===mf&&Rw())return Uw();if(!e)throw Vr.create("no-app",{appName:t});return e}function Dt(t,e,n){var r;let s=(r=BP[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const i=s.match(/\s|\//),o=e.match(/\s|\//);if(i||o){const u=[`Unable to register library "${s}" with version "${e}":`];i&&u.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&o&&u.push("and"),o&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),rr.warn(u.join(" "));return}mn(new Xt(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KP="firebase-heartbeat-database",GP=1,pa="firebase-heartbeat-store";let Xd=null;function Fw(){return Xd||(Xd=vc(KP,GP,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(pa)}catch(n){console.warn(n)}}}}).catch(t=>{throw Vr.create("idb-open",{originalErrorMessage:t.message})})),Xd}async function QP(t){try{const n=(await Fw()).transaction(pa),r=await n.objectStore(pa).get($w(t));return await n.done,r}catch(e){if(e instanceof yn)rr.warn(e.message);else{const n=Vr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});rr.warn(n.message)}}}async function Nv(t,e){try{const r=(await Fw()).transaction(pa,"readwrite");await r.objectStore(pa).put(e,$w(t)),await r.done}catch(n){if(n instanceof yn)rr.warn(n.message);else{const r=Vr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});rr.warn(r.message)}}}function $w(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YP=1024,XP=30*24*60*60*1e3;class JP{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new eC(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Sv();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(o=>o.date===i)?void 0:(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const u=new Date(o.date).valueOf();return Date.now()-u<=XP}),this._storage.overwrite(this._heartbeatsCache))}catch(r){rr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Sv(),{heartbeatsToSend:r,unsentEntries:s}=ZP(this._heartbeatsCache.heartbeats),i=Cu(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return rr.warn(n),""}}}function Sv(){return new Date().toISOString().substring(0,10)}function ZP(t,e=YP){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Av(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Av(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class eC{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Dw()?Lw().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await QP(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Nv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function Av(t){return Cu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tC(t){mn(new Xt("platform-logger",e=>new pP(e),"PRIVATE")),mn(new Xt("heartbeat",e=>new JP(e),"PRIVATE")),Dt(pf,bv,t),Dt(pf,bv,"esm2017"),Dt("fire-js","")}tC("");function Wp(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(t);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(t,r[s])&&(n[r[s]]=t[r[s]]);return n}function zw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const nC=zw,Bw=new ks("auth","Firebase",zw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ru=new qp("@firebase/auth");function rC(t,...e){Ru.logLevel<=ne.WARN&&Ru.warn(`Auth (${js}): ${t}`,...e)}function Gl(t,...e){Ru.logLevel<=ne.ERROR&&Ru.error(`Auth (${js}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jt(t,...e){throw Gp(t,...e)}function hn(t,...e){return Gp(t,...e)}function Kp(t,e,n){const r=Object.assign(Object.assign({},nC()),{[e]:n});return new ks("auth","Firebase",r).create(e,{appName:t.name})}function Xn(t){return Kp(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function sC(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Jt(t,"argument-error"),Kp(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Gp(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Bw.create(t,...e)}function K(t,e,...n){if(!t)throw Gp(e,...n)}function Wn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Gl(e),new Error(e)}function sr(t,e){t||Wn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function iC(){return Pv()==="http:"||Pv()==="https:"}function Pv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oC(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(iC()||VA()||"connection"in navigator)?navigator.onLine:!0}function aC(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.shortDelay=e,this.longDelay=n,sr(n>e,"Short delay should be less than long delay!"),this.isMobile=DA()||UA()}get(){return oC()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(t,e){sr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Wn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Wn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Wn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uC=new Oa(3e4,6e4);function ur(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Cn(t,e,n,r,s={}){return Hw(t,s,async()=>{let i={},o={};r&&(e==="GET"?o=r:i={body:JSON.stringify(r)});const u=ja(Object.assign({key:t.config.apiKey},o)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const d=Object.assign({method:e,headers:c},i);return MA()||(d.referrerPolicy="no-referrer"),qw.fetch()(Ww(t,t.config.apiHost,n,u),d)})}async function Hw(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},lC),e);try{const s=new dC(t),i=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const o=await i.json();if("needConfirmation"in o)throw Cl(t,"account-exists-with-different-credential",o);if(i.ok&&!("errorMessage"in o))return o;{const u=i.ok?o.errorMessage:o.error.message,[c,d]=u.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw Cl(t,"credential-already-in-use",o);if(c==="EMAIL_EXISTS")throw Cl(t,"email-already-in-use",o);if(c==="USER_DISABLED")throw Cl(t,"user-disabled",o);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Kp(t,f,d);Jt(t,f)}}catch(s){if(s instanceof yn)throw s;Jt(t,"network-request-failed",{message:String(s)})}}async function Da(t,e,n,r,s={}){const i=await Cn(t,e,n,r,s);return"mfaPendingCredential"in i&&Jt(t,"multi-factor-auth-required",{_serverResponse:i}),i}function Ww(t,e,n,r){const s=`${e}${n}?${r}`;return t.config.emulator?Qp(t.config,s):`${t.config.apiScheme}://${s}`}function cC(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class dC{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hn(this.auth,"network-request-failed")),uC.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Cl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=hn(t,e,r);return s.customData._tokenResponse=n,s}function Cv(t){return t!==void 0&&t.enterprise!==void 0}class hC{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return cC(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}}async function fC(t,e){return Cn(t,"GET","/v2/recaptchaConfig",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return Cn(t,"POST","/v1/accounts:delete",e)}async function Kw(t,e){return Cn(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bo(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function mC(t,e=!1){const n=_e(t),r=await n.getIdToken(e),s=Yp(r);K(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i=typeof s.firebase=="object"?s.firebase:void 0,o=i==null?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:Bo(Jd(s.auth_time)),issuedAtTime:Bo(Jd(s.iat)),expirationTime:Bo(Jd(s.exp)),signInProvider:o||null,signInSecondFactor:(i==null?void 0:i.sign_in_second_factor)||null}}function Jd(t){return Number(t)*1e3}function Yp(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Gl("JWT malformed, contained fewer than 3 sections"),null;try{const s=Pw(n);return s?JSON.parse(s):(Gl("Failed to decode base64 JWT payload"),null)}catch(s){return Gl("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function kv(t){const e=Yp(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ni(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof yn&&gC(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function gC({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yC{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Bo(this.lastLoginAt),this.creationTime=Bo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ju(t){var e;const n=t.auth,r=await t.getIdToken(),s=await Ni(t,Kw(n,{idToken:r}));K(s==null?void 0:s.users.length,n,"internal-error");const i=s.users[0];t._notifyReloadListener(i);const o=!((e=i.providerUserInfo)===null||e===void 0)&&e.length?Gw(i.providerUserInfo):[],u=_C(t.providerData,o),c=t.isAnonymous,d=!(t.email&&i.passwordHash)&&!(u!=null&&u.length),f=c?d:!1,g={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:u,metadata:new vf(i.createdAt,i.lastLoginAt),isAnonymous:f};Object.assign(t,g)}async function vC(t){const e=_e(t);await ju(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function _C(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Gw(t){return t.map(e=>{var{providerId:n}=e,r=Wp(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xC(t,e){const n=await Hw(t,{},async()=>{const r=ja({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:i}=t.config,o=Ww(t,s,"/v1/token",`key=${i}`),u=await t._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",qw.fetch()(o,{method:"POST",headers:u,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function wC(t,e){return Cn(t,"POST","/v2/accounts:revokeToken",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):kv(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=kv(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:i}=await xC(e,n);this.updateTokensAndExpiration(r,s,Number(i))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:i}=n,o=new pi;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),s&&(K(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),i&&(K(typeof i=="number","internal-error",{appName:e}),o.expirationTime=i),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new pi,this.toJSON())}_performRefresh(){return Wn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gr(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Kn{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,i=Wp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new yC(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new vf(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ni(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return mC(this,e)}reload(){return vC(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Kn(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await ju(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(an(this.auth.app))return Promise.reject(Xn(this.auth));const e=await this.getIdToken();return await Ni(this,pC(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,i,o,u,c,d,f;const g=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,E=(i=n.phoneNumber)!==null&&i!==void 0?i:void 0,N=(o=n.photoURL)!==null&&o!==void 0?o:void 0,T=(u=n.tenantId)!==null&&u!==void 0?u:void 0,A=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,w=(d=n.createdAt)!==null&&d!==void 0?d:void 0,x=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:y,emailVerified:C,isAnonymous:L,providerData:V,stsTokenManager:I}=n;K(y&&I,e,"internal-error");const _=pi.fromJSON(this.name,I);K(typeof y=="string",e,"internal-error"),gr(g,e.name),gr(p,e.name),K(typeof C=="boolean",e,"internal-error"),K(typeof L=="boolean",e,"internal-error"),gr(E,e.name),gr(N,e.name),gr(T,e.name),gr(A,e.name),gr(w,e.name),gr(x,e.name);const S=new Kn({uid:y,auth:e,email:p,emailVerified:C,displayName:g,isAnonymous:L,photoURL:N,phoneNumber:E,tenantId:T,stsTokenManager:_,createdAt:w,lastLoginAt:x});return V&&Array.isArray(V)&&(S.providerData=V.map(b=>Object.assign({},b))),A&&(S._redirectEventId=A),S}static async _fromIdTokenResponse(e,n,r=!1){const s=new pi;s.updateFromServerResponse(n);const i=new Kn({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await ju(i),i}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];K(s.localId!==void 0,"internal-error");const i=s.providerUserInfo!==void 0?Gw(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(i!=null&&i.length),u=new pi;u.updateFromIdToken(r);const c=new Kn({uid:s.localId,auth:e,stsTokenManager:u,isAnonymous:o}),d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:i,metadata:new vf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(i!=null&&i.length)};return Object.assign(c,d),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv=new Map;function Gn(t){sr(t instanceof Function,"Expected a class definition");let e=Rv.get(t);return e?(sr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,Rv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Qw.type="NONE";const jv=Qw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ql(t,e,n){return`firebase:${t}:${e}:${n}`}class mi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:i}=this.auth;this.fullUserKey=Ql(this.userKey,s.apiKey,i),this.fullPersistenceKey=Ql("persistence",s.apiKey,i),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Kn._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new mi(Gn(jv),e,r);const s=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let i=s[0]||Gn(jv);const o=Ql(r,e.config.apiKey,e.name);let u=null;for(const d of n)try{const f=await d._get(o);if(f){const g=Kn._fromJSON(e,f);d!==i&&(u=g),i=d;break}}catch{}const c=s.filter(d=>d._shouldAllowMigration);return!i._shouldAllowMigration||!c.length?new mi(i,e,r):(i=c[0],u&&await i._set(o,u.toJSON()),await Promise.all(n.map(async d=>{if(d!==i)try{await d._remove(o)}catch{}})),new mi(i,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Zw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Yw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(tE(e))return"Blackberry";if(nE(e))return"Webos";if(Xw(e))return"Safari";if((e.includes("chrome/")||Jw(e))&&!e.includes("edge/"))return"Chrome";if(eE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Yw(t=yt()){return/firefox\//i.test(t)}function Xw(t=yt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Jw(t=yt()){return/crios\//i.test(t)}function Zw(t=yt()){return/iemobile/i.test(t)}function eE(t=yt()){return/android/i.test(t)}function tE(t=yt()){return/blackberry/i.test(t)}function nE(t=yt()){return/webos/i.test(t)}function Xp(t=yt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function EC(t=yt()){var e;return Xp(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function TC(){return FA()&&document.documentMode===10}function rE(t=yt()){return Xp(t)||eE(t)||nE(t)||tE(t)||/windows phone/i.test(t)||Zw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sE(t,e=[]){let n;switch(t){case"Browser":n=Ov(yt());break;case"Worker":n=`${Ov(yt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${js}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bC{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=i=>new Promise((o,u)=>{try{const c=e(i);o(c)}catch(c){u(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IC(t,e={}){return Cn(t,"GET","/v2/passwordPolicy",ur(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NC=6;class SC{constructor(e){var n,r,s,i;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:NC,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(i=e.forceUpgradeOnSignin)!==null&&i!==void 0?i:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,i,o,u;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(i=c.containsUppercaseLetter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(o=c.containsNumericCharacter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(u=c.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AC{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new bC(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Bw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Gn(n)),this._initializationPromise=this.queue(async()=>{var r,s;if(!this._deleted&&(this.persistenceManager=await mi.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)===null||s===void 0?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kw(this,{idToken:e}),r=await Kn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(an(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(u,u))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,u=s==null?void 0:s._redirectEventId,c=await this.tryRedirectSignIn(e);(!o||o===u)&&(c!=null&&c.user)&&(s=c.user,i=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(s)}catch(o){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await ju(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=aC()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(an(this.app))return Promise.reject(Xn(this));const n=e?_e(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return an(this.app)?Promise.reject(Xn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return an(this.app)?Promise.reject(Xn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Gn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await IC(this),n=new SC(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ks("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await wC(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Gn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await mi.create(this,[Gn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const i=typeof n=="function"?n:n.next.bind(n);let o=!1;const u=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(u,this,"internal-error"),u.then(()=>{o||i(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{o=!0,c()}}else{const c=e.addObserver(n);return()=>{o=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=sE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&rC(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function cr(t){return _e(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=KA(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let xc={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function PC(t){xc=t}function iE(t){return xc.loadJS(t)}function CC(){return xc.recaptchaEnterpriseScript}function kC(){return xc.gapiScript}function RC(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const jC="recaptcha-enterprise",OC="NO_RECAPTCHA";class DC{constructor(e){this.type=jC,this.auth=cr(e)}async verify(e="verify",n=!1){async function r(i){if(!n){if(i.tenantId==null&&i._agentRecaptchaConfig!=null)return i._agentRecaptchaConfig.siteKey;if(i.tenantId!=null&&i._tenantRecaptchaConfigs[i.tenantId]!==void 0)return i._tenantRecaptchaConfigs[i.tenantId].siteKey}return new Promise(async(o,u)=>{fC(i,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(c=>{if(c.recaptchaKey===void 0)u(new Error("recaptcha Enterprise site key undefined"));else{const d=new hC(c);return i.tenantId==null?i._agentRecaptchaConfig=d:i._tenantRecaptchaConfigs[i.tenantId]=d,o(d.siteKey)}}).catch(c=>{u(c)})})}function s(i,o,u){const c=window.grecaptcha;Cv(c)?c.enterprise.ready(()=>{c.enterprise.execute(i,{action:e}).then(d=>{o(d)}).catch(()=>{o(OC)})}):u(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((i,o)=>{r(this.auth).then(u=>{if(!n&&Cv(window.grecaptcha))s(u,i,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let c=CC();c.length!==0&&(c+=u),iE(c).then(()=>{s(u,i,o)}).catch(d=>{o(d)})}}).catch(u=>{o(u)})})}}async function Lv(t,e,n,r=!1){const s=new DC(t);let i;try{i=await s.verify(n)}catch{i=await s.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:i}):Object.assign(o,{captchaResponse:i}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Ou(t,e,n,r){var s;if(!((s=t._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await Lv(t,e,n,n==="getOobCode");return r(t,i)}else return r(t,e).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const o=await Lv(t,e,n,n==="getOobCode");return r(t,o)}else return Promise.reject(i)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LC(t,e){const n=Rs(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),i=n.getOptions();if(fa(i,e??{}))return s;Jt(s,"already-initialized")}return n.initialize({options:e})}function MC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Gn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function VC(t,e,n){const r=cr(t);K(r._canInitEmulator,r,"emulator-config-failed"),K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,i=oE(e),{host:o,port:u}=UC(e),c=u===null?"":`:${u}`;r.config.emulator={url:`${i}//${o}${c}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:u,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})}),FC()}function oE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function UC(t){const e=oE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const i=s[1];return{host:i,port:Mv(r.substr(i.length+1))}}else{const[i,o]=r.split(":");return{host:i,port:Mv(o)}}}function Mv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function FC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Wn("not implemented")}_getIdTokenResponse(e){return Wn("not implemented")}_linkToIdToken(e,n){return Wn("not implemented")}_getReauthenticationResolver(e){return Wn("not implemented")}}async function $C(t,e){return Cn(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zC(t,e){return Da(t,"POST","/v1/accounts:signInWithPassword",ur(t,e))}async function BC(t,e){return Cn(t,"POST","/v1/accounts:sendOobCode",ur(t,e))}async function qC(t,e){return BC(t,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HC(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}async function WC(t,e){return Da(t,"POST","/v1/accounts:signInWithEmailLink",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma extends Jp{constructor(e,n,r,s=null){super("password",r),this._email=e,this._password=n,this._tenantId=s}static _fromEmailAndPassword(e,n){return new ma(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new ma(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,n,"signInWithPassword",zC);case"emailLink":return HC(e,{email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Ou(e,r,"signUpPassword",$C);case"emailLink":return WC(e,{idToken:n,email:this._email,oobCode:this._password});default:Jt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gi(t,e){return Da(t,"POST","/v1/accounts:signInWithIdp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KC="http://localhost";class ws extends Jp{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new ws(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Jt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,i=Wp(n,["providerId","signInMethod"]);if(!r||!s)return null;const o=new ws(r,s);return o.idToken=i.idToken||void 0,o.accessToken=i.accessToken||void 0,o.secret=i.secret,o.nonce=i.nonce,o.pendingToken=i.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return gi(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,gi(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,gi(e,n)}buildRequest(){const e={requestUri:KC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ja(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function QC(t){const e=So(Ao(t)).link,n=e?So(Ao(e)).deep_link_id:null,r=So(Ao(t)).deep_link_id;return(r?So(Ao(r)).link:null)||r||n||e||t}class Zp{constructor(e){var n,r,s,i,o,u;const c=So(Ao(e)),d=(n=c.apiKey)!==null&&n!==void 0?n:null,f=(r=c.oobCode)!==null&&r!==void 0?r:null,g=GC((s=c.mode)!==null&&s!==void 0?s:null);K(d&&f&&g,"argument-error"),this.apiKey=d,this.operation=g,this.code=f,this.continueUrl=(i=c.continueUrl)!==null&&i!==void 0?i:null,this.languageCode=(o=c.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(u=c.tenantId)!==null&&u!==void 0?u:null}static parseLink(e){const n=QC(e);try{return new Zp(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(){this.providerId=qi.PROVIDER_ID}static credential(e,n){return ma._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zp.parseLink(n);return K(r,"argument-error"),ma._fromEmailAndCode(e,r.code,r.tenantId)}}qi.PROVIDER_ID="password";qi.EMAIL_PASSWORD_SIGN_IN_METHOD="password";qi.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class em{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class La extends em{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr extends La{constructor(){super("facebook.com")}static credential(e){return ws._fromParams({providerId:wr.PROVIDER_ID,signInMethod:wr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wr.credentialFromTaggedObject(e)}static credentialFromError(e){return wr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wr.credential(e.oauthAccessToken)}catch{return null}}}wr.FACEBOOK_SIGN_IN_METHOD="facebook.com";wr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends La{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return ws._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Bn.credential(n,r)}catch{return null}}}Bn.GOOGLE_SIGN_IN_METHOD="google.com";Bn.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er extends La{constructor(){super("github.com")}static credential(e){return ws._fromParams({providerId:Er.PROVIDER_ID,signInMethod:Er.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Er.credentialFromTaggedObject(e)}static credentialFromError(e){return Er.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Er.credential(e.oauthAccessToken)}catch{return null}}}Er.GITHUB_SIGN_IN_METHOD="github.com";Er.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr extends La{constructor(){super("twitter.com")}static credential(e,n){return ws._fromParams({providerId:Tr.PROVIDER_ID,signInMethod:Tr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Tr.credentialFromTaggedObject(e)}static credentialFromError(e){return Tr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Tr.credential(n,r)}catch{return null}}}Tr.TWITTER_SIGN_IN_METHOD="twitter.com";Tr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YC(t,e){return Da(t,"POST","/v1/accounts:signUp",ur(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const i=await Kn._fromIdTokenResponse(e,r,s),o=Vv(r);return new Es({user:i,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=Vv(r);return new Es({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function Vv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Du extends yn{constructor(e,n,r,s){var i;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Du.prototype),this.customData={appName:e.name,tenantId:(i=e.tenantId)!==null&&i!==void 0?i:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Du(e,n,r,s)}}function aE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(i=>{throw i.code==="auth/multi-factor-auth-required"?Du._fromErrorAndOperation(t,i,e,r):i})}async function XC(t,e,n=!1){const r=await Ni(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Es._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function JC(t,e,n=!1){const{auth:r}=t;if(an(r.app))return Promise.reject(Xn(r));const s="reauthenticate";try{const i=await Ni(t,aE(r,s,e,t),n);K(i.idToken,r,"internal-error");const o=Yp(i.idToken);K(o,r,"internal-error");const{sub:u}=o;return K(t.uid===u,r,"user-mismatch"),Es._forOperation(t,s,i)}catch(i){throw(i==null?void 0:i.code)==="auth/user-not-found"&&Jt(r,"user-mismatch"),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(t,e,n=!1){if(an(t.app))return Promise.reject(Xn(t));const r="signIn",s=await aE(t,r,e),i=await Es._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(i.user),i}async function ZC(t,e){return lE(cr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uE(t){const e=cr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function ek(t,e,n){const r=cr(t);await Ou(r,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",qC)}async function tk(t,e,n){if(an(t.app))return Promise.reject(Xn(t));const r=cr(t),o=await Ou(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",YC).catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&uE(t),c}),u=await Es._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(u.user),u}function nk(t,e,n){return an(t.app)?Promise.reject(Xn(t)):ZC(_e(t),qi.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&uE(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rk(t,e){return Cn(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sk(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=_e(t),i={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await Ni(r,rk(r.auth,i));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const u=r.providerData.find(({providerId:c})=>c==="password");u&&(u.displayName=r.displayName,u.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function ik(t,e,n,r){return _e(t).onIdTokenChanged(e,n,r)}function ok(t,e,n){return _e(t).beforeAuthStateChanged(e,n)}function ak(t,e,n,r){return _e(t).onAuthStateChanged(e,n,r)}function lk(t){return _e(t).signOut()}const Lu="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Lu,"1"),this.storage.removeItem(Lu),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uk=1e3,ck=10;class dE extends cE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=rE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,u,c)=>{this.notifyListeners(o,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},i=this.storage.getItem(r);TC()&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,ck):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},uk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}dE.type="LOCAL";const dk=dE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hE extends cE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}hE.type="SESSION";const fE=hE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hk(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new wc(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:i}=n.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const u=Array.from(o).map(async d=>d(n.origin,i)),c=await hk(u);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}wc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fk{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let i,o;return new Promise((u,c)=>{const d=tm("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);o={messageChannel:s,onMessage(g){const p=g;if(p.data.eventId===d)switch(p.data.status){case"ack":clearTimeout(f),i=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),u(p.data.response);break;default:clearTimeout(f),clearTimeout(i),c(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(){return window}function pk(t){Tn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pE(){return typeof Tn().WorkerGlobalScope<"u"&&typeof Tn().importScripts=="function"}async function mk(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function gk(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function yk(){return pE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mE="firebaseLocalStorageDb",vk=1,Mu="firebaseLocalStorage",gE="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ec(t,e){return t.transaction([Mu],e?"readwrite":"readonly").objectStore(Mu)}function _k(){const t=indexedDB.deleteDatabase(mE);return new Ma(t).toPromise()}function _f(){const t=indexedDB.open(mE,vk);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Mu,{keyPath:gE})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Mu)?e(r):(r.close(),await _k(),e(await _f()))})})}async function Uv(t,e,n){const r=Ec(t,!0).put({[gE]:e,value:n});return new Ma(r).toPromise()}async function xk(t,e){const n=Ec(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function Fv(t,e){const n=Ec(t,!0).delete(e);return new Ma(n).toPromise()}const wk=800,Ek=3;class yE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Ek)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return pE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=wc._getInstance(yk()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await mk(),!this.activeServiceWorker)return;this.sender=new fk(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||gk()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await Uv(e,Lu,"1"),await Fv(e,Lu),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Uv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>xk(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Fv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const i=Ec(s,!1).getAll();return new Ma(i).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:i}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(i)&&(this.notifyListeners(s,i),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wk)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}yE.type="LOCAL";const Tk=yE;new Oa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){return e?Gn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nm extends Jp{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return gi(e,this._buildIdpRequest())}_linkToIdToken(e,n){return gi(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return gi(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function bk(t){return lE(t.auth,new nm(t),t.bypassAuthState)}function Ik(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),JC(n,new nm(t),t.bypassAuthState)}async function Nk(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),XC(n,new nm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(e,n,r,s,i=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:i,error:o,type:u}=e;if(o){this.reject(o);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:i||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(u)(c))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return bk;case"linkViaPopup":case"linkViaRedirect":return Nk;case"reauthViaPopup":case"reauthViaRedirect":return Ik;default:Jt(this.auth,"internal-error")}}resolve(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){sr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sk=new Oa(2e3,1e4);async function Ak(t,e,n){if(an(t.app))return Promise.reject(hn(t,"operation-not-supported-in-this-environment"));const r=cr(t);sC(t,e,em);const s=vE(r,n);return new us(r,"signInViaPopup",e,s).executeNotNull()}class us extends _E{constructor(e,n,r,s,i){super(e,n,s,i),this.provider=r,this.authWindow=null,this.pollId=null,us.currentPopupAction&&us.currentPopupAction.cancel(),us.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){sr(this.filter.length===1,"Popup operations only handle one event");const e=tm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(hn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,us.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Sk.get())};e()}}us.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pk="pendingRedirect",Yl=new Map;class Ck extends _E{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Yl.get(this.auth._key());if(!e){try{const r=await kk(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Yl.set(this.auth._key(),e)}return this.bypassAuthState||Yl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function kk(t,e){const n=Ok(e),r=jk(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Rk(t,e){Yl.set(t._key(),e)}function jk(t){return Gn(t._redirectPersistence)}function Ok(t){return Ql(Pk,t.config.apiKey,t.name)}async function Dk(t,e,n=!1){if(an(t.app))return Promise.reject(Xn(t));const r=cr(t),s=vE(r,e),o=await new Ck(r,s,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lk=10*60*1e3;class Mk{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Vk(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!xE(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(hn(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Lk&&this.cachedEventUids.clear(),this.cachedEventUids.has($v(e))}saveEventToCache(e){this.cachedEventUids.add($v(e)),this.lastProcessedEventTime=Date.now()}}function $v(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function xE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Vk(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return xE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Uk(t,e={}){return Cn(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fk=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$k=/^https?/;async function zk(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Uk(t);for(const n of e)try{if(Bk(n))return}catch{}Jt(t,"unauthorized-domain")}function Bk(t){const e=yf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$k.test(n))return!1;if(Fk.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qk=new Oa(3e4,6e4);function zv(){const t=Tn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Hk(t){return new Promise((e,n)=>{var r,s,i;function o(){zv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{zv(),n(hn(t,"network-request-failed"))},timeout:qk.get()})}if(!((s=(r=Tn().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((i=Tn().gapi)===null||i===void 0)&&i.load)o();else{const u=RC("iframefcb");return Tn()[u]=()=>{gapi.load?o():n(hn(t,"network-request-failed"))},iE(`${kC()}?onload=${u}`).catch(c=>n(c))}}).catch(e=>{throw Xl=null,e})}let Xl=null;function Wk(t){return Xl=Xl||Hk(t),Xl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kk=new Oa(5e3,15e3),Gk="__/auth/iframe",Qk="emulator/auth/iframe",Yk={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Xk=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Jk(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Qp(e,Qk):`https://${t.config.authDomain}/${Gk}`,r={apiKey:e.apiKey,appName:t.name,v:js},s=Xk.get(t.config.apiHost);s&&(r.eid=s);const i=t._getFrameworks();return i.length&&(r.fw=i.join(",")),`${n}?${ja(r).slice(1)}`}async function Zk(t){const e=await Wk(t),n=Tn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:Jk(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Yk,dontclear:!0},r=>new Promise(async(s,i)=>{await r.restyle({setHideOnLeave:!1});const o=hn(t,"network-request-failed"),u=Tn().setTimeout(()=>{i(o)},Kk.get());function c(){Tn().clearTimeout(u),s(r)}r.ping(c).then(c,()=>{i(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},t2=500,n2=600,r2="_blank",s2="http://localhost";class Bv{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function i2(t,e,n,r=t2,s=n2){const i=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let u="";const c=Object.assign(Object.assign({},e2),{width:r.toString(),height:s.toString(),top:i,left:o}),d=yt().toLowerCase();n&&(u=Jw(d)?r2:n),Yw(d)&&(e=e||s2,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[E,N])=>`${p}${E}=${N},`,"");if(EC(d)&&u!=="_self")return o2(e||"",u),new Bv(null);const g=window.open(e||"",u,f);K(g,t,"popup-blocked");try{g.focus()}catch{}return new Bv(g)}function o2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a2="__/auth/handler",l2="emulator/auth/handler",u2=encodeURIComponent("fac");async function qv(t,e,n,r,s,i){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:js,eventId:s};if(e instanceof em){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",WA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,g]of Object.entries({}))o[f]=g}if(e instanceof La){const f=e.getScopes().filter(g=>g!=="");f.length>0&&(o.scopes=f.join(","))}t.tenantId&&(o.tid=t.tenantId);const u=o;for(const f of Object.keys(u))u[f]===void 0&&delete u[f];const c=await t._getAppCheckToken(),d=c?`#${u2}=${encodeURIComponent(c)}`:"";return`${c2(t)}?${ja(u).slice(1)}${d}`}function c2({config:t}){return t.emulator?Qp(t,l2):`https://${t.authDomain}/${a2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd="webStorageSupport";class d2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=fE,this._completeRedirectFn=Dk,this._overrideRedirectResult=Rk}async _openPopup(e,n,r,s){var i;sr((i=this.eventManagers[e._key()])===null||i===void 0?void 0:i.manager,"_initialize() not called before _openPopup()");const o=await qv(e,n,r,yf(),s);return i2(e,o,tm())}async _openRedirect(e,n,r,s){await this._originValidation(e);const i=await qv(e,n,r,yf(),s);return pk(i),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:i}=this.eventManagers[n];return s?Promise.resolve(s):(sr(i,"If manager is not set, promise should be"),i)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Zk(e),r=new Mk(e);return n.register("authEvent",s=>(K(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Zd,{type:Zd},s=>{var i;const o=(i=s==null?void 0:s[0])===null||i===void 0?void 0:i[Zd];o!==void 0&&n(!!o),Jt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=zk(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return rE()||Xw()||Xp()}}const h2=d2;var Hv="@firebase/auth",Wv="1.7.9";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function m2(t){mn(new Xt("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:o,authDomain:u}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:o,authDomain:u,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:sE(t)},d=new AC(r,s,i,c);return MC(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),mn(new Xt("auth-internal",e=>{const n=cr(e.getProvider("auth").getImmediate());return(r=>new f2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Dt(Hv,Wv,p2(t)),Dt(Hv,Wv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2=5*60,y2=jw("authIdTokenMaxAge")||g2;let Kv=null;const v2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>y2)return;const s=n==null?void 0:n.token;Kv!==s&&(Kv=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function _2(t=_c()){const e=Rs(t,"auth");if(e.isInitialized())return e.getImmediate();const n=LC(t,{popupRedirectResolver:h2,persistence:[Tk,dk,fE]}),r=jw("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const i=new URL(r,location.origin);if(location.origin===i.origin){const o=v2(i.toString());ok(n,o,()=>o(n.currentUser)),ik(n,u=>o(u))}}const s=Cw("auth");return s&&VC(n,`http://${s}`),n}function x2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}PC({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const i=hn("internal-error");i.customData=s,n(i)},r.type="text/javascript",r.charset="UTF-8",x2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});m2("Browser");var w2="firebase",E2="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Dt(w2,E2,"app");var Gv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ms,wE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(I,_){function S(){}S.prototype=_.prototype,I.D=_.prototype,I.prototype=new S,I.prototype.constructor=I,I.C=function(b,k,j){for(var P=Array(arguments.length-2),He=2;He<arguments.length;He++)P[He-2]=arguments[He];return _.prototype[k].apply(b,P)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,_,S){S||(S=0);var b=Array(16);if(typeof _=="string")for(var k=0;16>k;++k)b[k]=_.charCodeAt(S++)|_.charCodeAt(S++)<<8|_.charCodeAt(S++)<<16|_.charCodeAt(S++)<<24;else for(k=0;16>k;++k)b[k]=_[S++]|_[S++]<<8|_[S++]<<16|_[S++]<<24;_=I.g[0],S=I.g[1],k=I.g[2];var j=I.g[3],P=_+(j^S&(k^j))+b[0]+3614090360&4294967295;_=S+(P<<7&4294967295|P>>>25),P=j+(k^_&(S^k))+b[1]+3905402710&4294967295,j=_+(P<<12&4294967295|P>>>20),P=k+(S^j&(_^S))+b[2]+606105819&4294967295,k=j+(P<<17&4294967295|P>>>15),P=S+(_^k&(j^_))+b[3]+3250441966&4294967295,S=k+(P<<22&4294967295|P>>>10),P=_+(j^S&(k^j))+b[4]+4118548399&4294967295,_=S+(P<<7&4294967295|P>>>25),P=j+(k^_&(S^k))+b[5]+1200080426&4294967295,j=_+(P<<12&4294967295|P>>>20),P=k+(S^j&(_^S))+b[6]+2821735955&4294967295,k=j+(P<<17&4294967295|P>>>15),P=S+(_^k&(j^_))+b[7]+4249261313&4294967295,S=k+(P<<22&4294967295|P>>>10),P=_+(j^S&(k^j))+b[8]+1770035416&4294967295,_=S+(P<<7&4294967295|P>>>25),P=j+(k^_&(S^k))+b[9]+2336552879&4294967295,j=_+(P<<12&4294967295|P>>>20),P=k+(S^j&(_^S))+b[10]+4294925233&4294967295,k=j+(P<<17&4294967295|P>>>15),P=S+(_^k&(j^_))+b[11]+2304563134&4294967295,S=k+(P<<22&4294967295|P>>>10),P=_+(j^S&(k^j))+b[12]+1804603682&4294967295,_=S+(P<<7&4294967295|P>>>25),P=j+(k^_&(S^k))+b[13]+4254626195&4294967295,j=_+(P<<12&4294967295|P>>>20),P=k+(S^j&(_^S))+b[14]+2792965006&4294967295,k=j+(P<<17&4294967295|P>>>15),P=S+(_^k&(j^_))+b[15]+1236535329&4294967295,S=k+(P<<22&4294967295|P>>>10),P=_+(k^j&(S^k))+b[1]+4129170786&4294967295,_=S+(P<<5&4294967295|P>>>27),P=j+(S^k&(_^S))+b[6]+3225465664&4294967295,j=_+(P<<9&4294967295|P>>>23),P=k+(_^S&(j^_))+b[11]+643717713&4294967295,k=j+(P<<14&4294967295|P>>>18),P=S+(j^_&(k^j))+b[0]+3921069994&4294967295,S=k+(P<<20&4294967295|P>>>12),P=_+(k^j&(S^k))+b[5]+3593408605&4294967295,_=S+(P<<5&4294967295|P>>>27),P=j+(S^k&(_^S))+b[10]+38016083&4294967295,j=_+(P<<9&4294967295|P>>>23),P=k+(_^S&(j^_))+b[15]+3634488961&4294967295,k=j+(P<<14&4294967295|P>>>18),P=S+(j^_&(k^j))+b[4]+3889429448&4294967295,S=k+(P<<20&4294967295|P>>>12),P=_+(k^j&(S^k))+b[9]+568446438&4294967295,_=S+(P<<5&4294967295|P>>>27),P=j+(S^k&(_^S))+b[14]+3275163606&4294967295,j=_+(P<<9&4294967295|P>>>23),P=k+(_^S&(j^_))+b[3]+4107603335&4294967295,k=j+(P<<14&4294967295|P>>>18),P=S+(j^_&(k^j))+b[8]+1163531501&4294967295,S=k+(P<<20&4294967295|P>>>12),P=_+(k^j&(S^k))+b[13]+2850285829&4294967295,_=S+(P<<5&4294967295|P>>>27),P=j+(S^k&(_^S))+b[2]+4243563512&4294967295,j=_+(P<<9&4294967295|P>>>23),P=k+(_^S&(j^_))+b[7]+1735328473&4294967295,k=j+(P<<14&4294967295|P>>>18),P=S+(j^_&(k^j))+b[12]+2368359562&4294967295,S=k+(P<<20&4294967295|P>>>12),P=_+(S^k^j)+b[5]+4294588738&4294967295,_=S+(P<<4&4294967295|P>>>28),P=j+(_^S^k)+b[8]+2272392833&4294967295,j=_+(P<<11&4294967295|P>>>21),P=k+(j^_^S)+b[11]+1839030562&4294967295,k=j+(P<<16&4294967295|P>>>16),P=S+(k^j^_)+b[14]+4259657740&4294967295,S=k+(P<<23&4294967295|P>>>9),P=_+(S^k^j)+b[1]+2763975236&4294967295,_=S+(P<<4&4294967295|P>>>28),P=j+(_^S^k)+b[4]+1272893353&4294967295,j=_+(P<<11&4294967295|P>>>21),P=k+(j^_^S)+b[7]+4139469664&4294967295,k=j+(P<<16&4294967295|P>>>16),P=S+(k^j^_)+b[10]+3200236656&4294967295,S=k+(P<<23&4294967295|P>>>9),P=_+(S^k^j)+b[13]+681279174&4294967295,_=S+(P<<4&4294967295|P>>>28),P=j+(_^S^k)+b[0]+3936430074&4294967295,j=_+(P<<11&4294967295|P>>>21),P=k+(j^_^S)+b[3]+3572445317&4294967295,k=j+(P<<16&4294967295|P>>>16),P=S+(k^j^_)+b[6]+76029189&4294967295,S=k+(P<<23&4294967295|P>>>9),P=_+(S^k^j)+b[9]+3654602809&4294967295,_=S+(P<<4&4294967295|P>>>28),P=j+(_^S^k)+b[12]+3873151461&4294967295,j=_+(P<<11&4294967295|P>>>21),P=k+(j^_^S)+b[15]+530742520&4294967295,k=j+(P<<16&4294967295|P>>>16),P=S+(k^j^_)+b[2]+3299628645&4294967295,S=k+(P<<23&4294967295|P>>>9),P=_+(k^(S|~j))+b[0]+4096336452&4294967295,_=S+(P<<6&4294967295|P>>>26),P=j+(S^(_|~k))+b[7]+1126891415&4294967295,j=_+(P<<10&4294967295|P>>>22),P=k+(_^(j|~S))+b[14]+2878612391&4294967295,k=j+(P<<15&4294967295|P>>>17),P=S+(j^(k|~_))+b[5]+4237533241&4294967295,S=k+(P<<21&4294967295|P>>>11),P=_+(k^(S|~j))+b[12]+1700485571&4294967295,_=S+(P<<6&4294967295|P>>>26),P=j+(S^(_|~k))+b[3]+2399980690&4294967295,j=_+(P<<10&4294967295|P>>>22),P=k+(_^(j|~S))+b[10]+4293915773&4294967295,k=j+(P<<15&4294967295|P>>>17),P=S+(j^(k|~_))+b[1]+2240044497&4294967295,S=k+(P<<21&4294967295|P>>>11),P=_+(k^(S|~j))+b[8]+1873313359&4294967295,_=S+(P<<6&4294967295|P>>>26),P=j+(S^(_|~k))+b[15]+4264355552&4294967295,j=_+(P<<10&4294967295|P>>>22),P=k+(_^(j|~S))+b[6]+2734768916&4294967295,k=j+(P<<15&4294967295|P>>>17),P=S+(j^(k|~_))+b[13]+1309151649&4294967295,S=k+(P<<21&4294967295|P>>>11),P=_+(k^(S|~j))+b[4]+4149444226&4294967295,_=S+(P<<6&4294967295|P>>>26),P=j+(S^(_|~k))+b[11]+3174756917&4294967295,j=_+(P<<10&4294967295|P>>>22),P=k+(_^(j|~S))+b[2]+718787259&4294967295,k=j+(P<<15&4294967295|P>>>17),P=S+(j^(k|~_))+b[9]+3951481745&4294967295,I.g[0]=I.g[0]+_&4294967295,I.g[1]=I.g[1]+(k+(P<<21&4294967295|P>>>11))&4294967295,I.g[2]=I.g[2]+k&4294967295,I.g[3]=I.g[3]+j&4294967295}r.prototype.u=function(I,_){_===void 0&&(_=I.length);for(var S=_-this.blockSize,b=this.B,k=this.h,j=0;j<_;){if(k==0)for(;j<=S;)s(this,I,j),j+=this.blockSize;if(typeof I=="string"){for(;j<_;)if(b[k++]=I.charCodeAt(j++),k==this.blockSize){s(this,b),k=0;break}}else for(;j<_;)if(b[k++]=I[j++],k==this.blockSize){s(this,b),k=0;break}}this.h=k,this.o+=_},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var _=1;_<I.length-8;++_)I[_]=0;var S=8*this.o;for(_=I.length-8;_<I.length;++_)I[_]=S&255,S/=256;for(this.u(I),I=Array(16),_=S=0;4>_;++_)for(var b=0;32>b;b+=8)I[S++]=this.g[_]>>>b&255;return I};function i(I,_){var S=u;return Object.prototype.hasOwnProperty.call(S,I)?S[I]:S[I]=_(I)}function o(I,_){this.h=_;for(var S=[],b=!0,k=I.length-1;0<=k;k--){var j=I[k]|0;b&&j==_||(S[k]=j,b=!1)}this.g=S}var u={};function c(I){return-128<=I&&128>I?i(I,function(_){return new o([_|0],0>_?-1:0)}):new o([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return g;if(0>I)return A(d(-I));for(var _=[],S=1,b=0;I>=S;b++)_[b]=I/S|0,S*=4294967296;return new o(_,0)}function f(I,_){if(I.length==0)throw Error("number format error: empty string");if(_=_||10,2>_||36<_)throw Error("radix out of range: "+_);if(I.charAt(0)=="-")return A(f(I.substring(1),_));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var S=d(Math.pow(_,8)),b=g,k=0;k<I.length;k+=8){var j=Math.min(8,I.length-k),P=parseInt(I.substring(k,k+j),_);8>j?(j=d(Math.pow(_,j)),b=b.j(j).add(d(P))):(b=b.j(S),b=b.add(d(P)))}return b}var g=c(0),p=c(1),E=c(16777216);t=o.prototype,t.m=function(){if(T(this))return-A(this).m();for(var I=0,_=1,S=0;S<this.g.length;S++){var b=this.i(S);I+=(0<=b?b:4294967296+b)*_,_*=4294967296}return I},t.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N(this))return"0";if(T(this))return"-"+A(this).toString(I);for(var _=d(Math.pow(I,6)),S=this,b="";;){var k=C(S,_).g;S=w(S,k.j(_));var j=((0<S.g.length?S.g[0]:S.h)>>>0).toString(I);if(S=k,N(S))return j+b;for(;6>j.length;)j="0"+j;b=j+b}},t.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function N(I){if(I.h!=0)return!1;for(var _=0;_<I.g.length;_++)if(I.g[_]!=0)return!1;return!0}function T(I){return I.h==-1}t.l=function(I){return I=w(this,I),T(I)?-1:N(I)?0:1};function A(I){for(var _=I.g.length,S=[],b=0;b<_;b++)S[b]=~I.g[b];return new o(S,~I.h).add(p)}t.abs=function(){return T(this)?A(this):this},t.add=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],b=0,k=0;k<=_;k++){var j=b+(this.i(k)&65535)+(I.i(k)&65535),P=(j>>>16)+(this.i(k)>>>16)+(I.i(k)>>>16);b=P>>>16,j&=65535,P&=65535,S[k]=P<<16|j}return new o(S,S[S.length-1]&-2147483648?-1:0)};function w(I,_){return I.add(A(_))}t.j=function(I){if(N(this)||N(I))return g;if(T(this))return T(I)?A(this).j(A(I)):A(A(this).j(I));if(T(I))return A(this.j(A(I)));if(0>this.l(E)&&0>I.l(E))return d(this.m()*I.m());for(var _=this.g.length+I.g.length,S=[],b=0;b<2*_;b++)S[b]=0;for(b=0;b<this.g.length;b++)for(var k=0;k<I.g.length;k++){var j=this.i(b)>>>16,P=this.i(b)&65535,He=I.i(k)>>>16,Rn=I.i(k)&65535;S[2*b+2*k]+=P*Rn,x(S,2*b+2*k),S[2*b+2*k+1]+=j*Rn,x(S,2*b+2*k+1),S[2*b+2*k+1]+=P*He,x(S,2*b+2*k+1),S[2*b+2*k+2]+=j*He,x(S,2*b+2*k+2)}for(b=0;b<_;b++)S[b]=S[2*b+1]<<16|S[2*b];for(b=_;b<2*_;b++)S[b]=0;return new o(S,0)};function x(I,_){for(;(I[_]&65535)!=I[_];)I[_+1]+=I[_]>>>16,I[_]&=65535,_++}function y(I,_){this.g=I,this.h=_}function C(I,_){if(N(_))throw Error("division by zero");if(N(I))return new y(g,g);if(T(I))return _=C(A(I),_),new y(A(_.g),A(_.h));if(T(_))return _=C(I,A(_)),new y(A(_.g),_.h);if(30<I.g.length){if(T(I)||T(_))throw Error("slowDivide_ only works with positive integers.");for(var S=p,b=_;0>=b.l(I);)S=L(S),b=L(b);var k=V(S,1),j=V(b,1);for(b=V(b,2),S=V(S,2);!N(b);){var P=j.add(b);0>=P.l(I)&&(k=k.add(S),j=P),b=V(b,1),S=V(S,1)}return _=w(I,k.j(_)),new y(k,_)}for(k=g;0<=I.l(_);){for(S=Math.max(1,Math.floor(I.m()/_.m())),b=Math.ceil(Math.log(S)/Math.LN2),b=48>=b?1:Math.pow(2,b-48),j=d(S),P=j.j(_);T(P)||0<P.l(I);)S-=b,j=d(S),P=j.j(_);N(j)&&(j=p),k=k.add(j),I=w(I,P)}return new y(k,I)}t.A=function(I){return C(this,I).h},t.and=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],b=0;b<_;b++)S[b]=this.i(b)&I.i(b);return new o(S,this.h&I.h)},t.or=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],b=0;b<_;b++)S[b]=this.i(b)|I.i(b);return new o(S,this.h|I.h)},t.xor=function(I){for(var _=Math.max(this.g.length,I.g.length),S=[],b=0;b<_;b++)S[b]=this.i(b)^I.i(b);return new o(S,this.h^I.h)};function L(I){for(var _=I.g.length+1,S=[],b=0;b<_;b++)S[b]=I.i(b)<<1|I.i(b-1)>>>31;return new o(S,I.h)}function V(I,_){var S=_>>5;_%=32;for(var b=I.g.length-S,k=[],j=0;j<b;j++)k[j]=0<_?I.i(j+S)>>>_|I.i(j+S+1)<<32-_:I.i(j+S);return new o(k,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,wE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=f,ms=o}).apply(typeof Gv<"u"?Gv:typeof self<"u"?self:typeof window<"u"?window:{});var kl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var EE,Po,TE,Jl,xf,bE,IE,NE;(function(){var t,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(a,h,m){return a==Array.prototype||a==Object.prototype||(a[h]=m.value),a};function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kl=="object"&&kl];for(var h=0;h<a.length;++h){var m=a[h];if(m&&m.Math==Math)return m}throw Error("Cannot find global object")}var r=n(this);function s(a,h){if(h)e:{var m=r;a=a.split(".");for(var v=0;v<a.length-1;v++){var O=a[v];if(!(O in m))break e;m=m[O]}a=a[a.length-1],v=m[a],h=h(v),h!=v&&h!=null&&e(m,a,{configurable:!0,writable:!0,value:h})}}function i(a,h){a instanceof String&&(a+="");var m=0,v=!1,O={next:function(){if(!v&&m<a.length){var D=m++;return{value:h(D,a[D]),done:!1}}return v=!0,{done:!0,value:void 0}}};return O[Symbol.iterator]=function(){return O},O}s("Array.prototype.values",function(a){return a||function(){return i(this,function(h,m){return m})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},u=this||self;function c(a){var h=typeof a;return h=h!="object"?h:a?Array.isArray(a)?"array":h:"null",h=="array"||h=="object"&&typeof a.length=="number"}function d(a){var h=typeof a;return h=="object"&&a!=null||h=="function"}function f(a,h,m){return a.call.apply(a.bind,arguments)}function g(a,h,m){if(!a)throw Error();if(2<arguments.length){var v=Array.prototype.slice.call(arguments,2);return function(){var O=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(O,v),a.apply(h,O)}}return function(){return a.apply(h,arguments)}}function p(a,h,m){return p=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?f:g,p.apply(null,arguments)}function E(a,h){var m=Array.prototype.slice.call(arguments,1);return function(){var v=m.slice();return v.push.apply(v,arguments),a.apply(this,v)}}function N(a,h){function m(){}m.prototype=h.prototype,a.aa=h.prototype,a.prototype=new m,a.prototype.constructor=a,a.Qb=function(v,O,D){for(var $=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)$[ce-2]=arguments[ce];return h.prototype[O].apply(v,$)}}function T(a){const h=a.length;if(0<h){const m=Array(h);for(let v=0;v<h;v++)m[v]=a[v];return m}return[]}function A(a,h){for(let m=1;m<arguments.length;m++){const v=arguments[m];if(c(v)){const O=a.length||0,D=v.length||0;a.length=O+D;for(let $=0;$<D;$++)a[O+$]=v[$]}else a.push(v)}}class w{constructor(h,m){this.i=h,this.j=m,this.h=0,this.g=null}get(){let h;return 0<this.h?(this.h--,h=this.g,this.g=h.next,h.next=null):h=this.i(),h}}function x(a){return/^[\s\xa0]*$/.test(a)}function y(){var a=u.navigator;return a&&(a=a.userAgent)?a:""}function C(a){return C[" "](a),a}C[" "]=function(){};var L=y().indexOf("Gecko")!=-1&&!(y().toLowerCase().indexOf("webkit")!=-1&&y().indexOf("Edge")==-1)&&!(y().indexOf("Trident")!=-1||y().indexOf("MSIE")!=-1)&&y().indexOf("Edge")==-1;function V(a,h,m){for(const v in a)h.call(m,a[v],v,a)}function I(a,h){for(const m in a)h.call(void 0,a[m],m,a)}function _(a){const h={};for(const m in a)h[m]=a[m];return h}const S="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function b(a,h){let m,v;for(let O=1;O<arguments.length;O++){v=arguments[O];for(m in v)a[m]=v[m];for(let D=0;D<S.length;D++)m=S[D],Object.prototype.hasOwnProperty.call(v,m)&&(a[m]=v[m])}}function k(a){var h=1;a=a.split(":");const m=[];for(;0<h&&a.length;)m.push(a.shift()),h--;return a.length&&m.push(a.join(":")),m}function j(a){u.setTimeout(()=>{throw a},0)}function P(){var a=Y;let h=null;return a.g&&(h=a.g,a.g=a.g.next,a.g||(a.h=null),h.next=null),h}class He{constructor(){this.h=this.g=null}add(h,m){const v=Rn.get();v.set(h,m),this.h?this.h.next=v:this.g=v,this.h=v}}var Rn=new w(()=>new Yi,a=>a.reset());class Yi{constructor(){this.next=this.g=this.h=null}set(h,m){this.h=h,this.g=m,this.next=null}reset(){this.next=this.g=this.h=null}}let jn,B=!1,Y=new He,Z=()=>{const a=u.Promise.resolve(void 0);jn=()=>{a.then(xe)}};var xe=()=>{for(var a;a=P();){try{a.h.call(a.g)}catch(m){j(m)}var h=Rn;h.j(a),100>h.h&&(h.h++,a.next=h.g,h.g=a)}B=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Se(a,h){this.type=a,this.g=this.target=h,this.defaultPrevented=!1}Se.prototype.h=function(){this.defaultPrevented=!0};var On=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var a=!1,h=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const m=()=>{};u.addEventListener("test",m,h),u.removeEventListener("test",m,h)}catch{}return a}();function Dn(a,h){if(Se.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a){var m=this.type=a.type,v=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;if(this.target=a.target||a.srcElement,this.g=h,h=a.relatedTarget){if(L){e:{try{C(h.nodeName);var O=!0;break e}catch{}O=!1}O||(h=null)}}else m=="mouseover"?h=a.fromElement:m=="mouseout"&&(h=a.toElement);this.relatedTarget=h,v?(this.clientX=v.clientX!==void 0?v.clientX:v.pageX,this.clientY=v.clientY!==void 0?v.clientY:v.pageY,this.screenX=v.screenX||0,this.screenY=v.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=typeof a.pointerType=="string"?a.pointerType:Ln[a.pointerType]||"",this.state=a.state,this.i=a,a.defaultPrevented&&Dn.aa.h.call(this)}}N(Dn,Se);var Ln={2:"touch",3:"pen",4:"mouse"};Dn.prototype.h=function(){Dn.aa.h.call(this);var a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var Mn="closure_listenable_"+(1e6*Math.random()|0),v1=0;function _1(a,h,m,v,O){this.listener=a,this.proxy=null,this.src=h,this.type=m,this.capture=!!v,this.ha=O,this.key=++v1,this.da=this.fa=!1}function Qa(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Ya(a){this.src=a,this.g={},this.h=0}Ya.prototype.add=function(a,h,m,v,O){var D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);var $=Yc(a,h,v,O);return-1<$?(h=a[$],m||(h.fa=!1)):(h=new _1(h,this.src,D,!!v,O),h.fa=m,a.push(h)),h};function Qc(a,h){var m=h.type;if(m in a.g){var v=a.g[m],O=Array.prototype.indexOf.call(v,h,void 0),D;(D=0<=O)&&Array.prototype.splice.call(v,O,1),D&&(Qa(h),a.g[m].length==0&&(delete a.g[m],a.h--))}}function Yc(a,h,m,v){for(var O=0;O<a.length;++O){var D=a[O];if(!D.da&&D.listener==h&&D.capture==!!m&&D.ha==v)return O}return-1}var Xc="closure_lm_"+(1e6*Math.random()|0),Jc={};function rg(a,h,m,v,O){if(Array.isArray(h)){for(var D=0;D<h.length;D++)rg(a,h[D],m,v,O);return null}return m=og(m),a&&a[Mn]?a.K(h,m,d(v)?!!v.capture:!1,O):x1(a,h,m,!1,v,O)}function x1(a,h,m,v,O,D){if(!h)throw Error("Invalid event type");var $=d(O)?!!O.capture:!!O,ce=ed(a);if(ce||(a[Xc]=ce=new Ya(a)),m=ce.add(h,m,v,$,D),m.proxy)return m;if(v=w1(),m.proxy=v,v.src=a,v.listener=m,a.addEventListener)On||(O=$),O===void 0&&(O=!1),a.addEventListener(h.toString(),v,O);else if(a.attachEvent)a.attachEvent(ig(h.toString()),v);else if(a.addListener&&a.removeListener)a.addListener(v);else throw Error("addEventListener and attachEvent are unavailable.");return m}function w1(){function a(m){return h.call(a.src,a.listener,m)}const h=E1;return a}function sg(a,h,m,v,O){if(Array.isArray(h))for(var D=0;D<h.length;D++)sg(a,h[D],m,v,O);else v=d(v)?!!v.capture:!!v,m=og(m),a&&a[Mn]?(a=a.i,h=String(h).toString(),h in a.g&&(D=a.g[h],m=Yc(D,m,v,O),-1<m&&(Qa(D[m]),Array.prototype.splice.call(D,m,1),D.length==0&&(delete a.g[h],a.h--)))):a&&(a=ed(a))&&(h=a.g[h.toString()],a=-1,h&&(a=Yc(h,m,v,O)),(m=-1<a?h[a]:null)&&Zc(m))}function Zc(a){if(typeof a!="number"&&a&&!a.da){var h=a.src;if(h&&h[Mn])Qc(h.i,a);else{var m=a.type,v=a.proxy;h.removeEventListener?h.removeEventListener(m,v,a.capture):h.detachEvent?h.detachEvent(ig(m),v):h.addListener&&h.removeListener&&h.removeListener(v),(m=ed(h))?(Qc(m,a),m.h==0&&(m.src=null,h[Xc]=null)):Qa(a)}}}function ig(a){return a in Jc?Jc[a]:Jc[a]="on"+a}function E1(a,h){if(a.da)a=!0;else{h=new Dn(h,this);var m=a.listener,v=a.ha||a.src;a.fa&&Zc(a),a=m.call(v,h)}return a}function ed(a){return a=a[Xc],a instanceof Ya?a:null}var td="__closure_events_fn_"+(1e9*Math.random()>>>0);function og(a){return typeof a=="function"?a:(a[td]||(a[td]=function(h){return a.handleEvent(h)}),a[td])}function rt(){ue.call(this),this.i=new Ya(this),this.M=this,this.F=null}N(rt,ue),rt.prototype[Mn]=!0,rt.prototype.removeEventListener=function(a,h,m,v){sg(this,a,h,m,v)};function vt(a,h){var m,v=a.F;if(v)for(m=[];v;v=v.F)m.push(v);if(a=a.M,v=h.type||h,typeof h=="string")h=new Se(h,a);else if(h instanceof Se)h.target=h.target||a;else{var O=h;h=new Se(v,a),b(h,O)}if(O=!0,m)for(var D=m.length-1;0<=D;D--){var $=h.g=m[D];O=Xa($,v,!0,h)&&O}if($=h.g=a,O=Xa($,v,!0,h)&&O,O=Xa($,v,!1,h)&&O,m)for(D=0;D<m.length;D++)$=h.g=m[D],O=Xa($,v,!1,h)&&O}rt.prototype.N=function(){if(rt.aa.N.call(this),this.i){var a=this.i,h;for(h in a.g){for(var m=a.g[h],v=0;v<m.length;v++)Qa(m[v]);delete a.g[h],a.h--}}this.F=null},rt.prototype.K=function(a,h,m,v){return this.i.add(String(a),h,!1,m,v)},rt.prototype.L=function(a,h,m,v){return this.i.add(String(a),h,!0,m,v)};function Xa(a,h,m,v){if(h=a.i.g[String(h)],!h)return!0;h=h.concat();for(var O=!0,D=0;D<h.length;++D){var $=h[D];if($&&!$.da&&$.capture==m){var ce=$.listener,We=$.ha||$.src;$.fa&&Qc(a.i,$),O=ce.call(We,v)!==!1&&O}}return O&&!v.defaultPrevented}function ag(a,h,m){if(typeof a=="function")m&&(a=p(a,m));else if(a&&typeof a.handleEvent=="function")a=p(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(h)?-1:u.setTimeout(a,h||0)}function lg(a){a.g=ag(()=>{a.g=null,a.i&&(a.i=!1,lg(a))},a.l);const h=a.h;a.h=null,a.m.apply(null,h)}class T1 extends ue{constructor(h,m){super(),this.m=h,this.l=m,this.h=null,this.i=!1,this.g=null}j(h){this.h=arguments,this.g?this.i=!0:lg(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xi(a){ue.call(this),this.h=a,this.g={}}N(Xi,ue);var ug=[];function cg(a){V(a.g,function(h,m){this.g.hasOwnProperty(m)&&Zc(h)},a),a.g={}}Xi.prototype.N=function(){Xi.aa.N.call(this),cg(this)},Xi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var nd=u.JSON.stringify,b1=u.JSON.parse,I1=class{stringify(a){return u.JSON.stringify(a,void 0)}parse(a){return u.JSON.parse(a,void 0)}};function rd(){}rd.prototype.h=null;function dg(a){return a.h||(a.h=a.i())}function hg(){}var Ji={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function sd(){Se.call(this,"d")}N(sd,Se);function id(){Se.call(this,"c")}N(id,Se);var Xr={},fg=null;function Ja(){return fg=fg||new rt}Xr.La="serverreachability";function pg(a){Se.call(this,Xr.La,a)}N(pg,Se);function Zi(a){const h=Ja();vt(h,new pg(h))}Xr.STAT_EVENT="statevent";function mg(a,h){Se.call(this,Xr.STAT_EVENT,a),this.stat=h}N(mg,Se);function _t(a){const h=Ja();vt(h,new mg(h,a))}Xr.Ma="timingevent";function gg(a,h){Se.call(this,Xr.Ma,a),this.size=h}N(gg,Se);function eo(a,h){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){a()},h)}function to(){this.g=!0}to.prototype.xa=function(){this.g=!1};function N1(a,h,m,v,O,D){a.info(function(){if(a.g)if(D)for(var $="",ce=D.split("&"),We=0;We<ce.length;We++){var ie=ce[We].split("=");if(1<ie.length){var st=ie[0];ie=ie[1];var it=st.split("_");$=2<=it.length&&it[1]=="type"?$+(st+"="+ie+"&"):$+(st+"=redacted&")}}else $=null;else $=D;return"XMLHTTP REQ ("+v+") [attempt "+O+"]: "+h+`
`+m+`
`+$})}function S1(a,h,m,v,O,D,$){a.info(function(){return"XMLHTTP RESP ("+v+") [ attempt "+O+"]: "+h+`
`+m+`
`+D+" "+$})}function Ms(a,h,m,v){a.info(function(){return"XMLHTTP TEXT ("+h+"): "+P1(a,m)+(v?" "+v:"")})}function A1(a,h){a.info(function(){return"TIMEOUT: "+h})}to.prototype.info=function(){};function P1(a,h){if(!a.g)return h;if(!h)return null;try{var m=JSON.parse(h);if(m){for(a=0;a<m.length;a++)if(Array.isArray(m[a])){var v=m[a];if(!(2>v.length)){var O=v[1];if(Array.isArray(O)&&!(1>O.length)){var D=O[0];if(D!="noop"&&D!="stop"&&D!="close")for(var $=1;$<O.length;$++)O[$]=""}}}}return nd(m)}catch{return h}}var Za={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},yg={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},od;function el(){}N(el,rd),el.prototype.g=function(){return new XMLHttpRequest},el.prototype.i=function(){return{}},od=new el;function hr(a,h,m,v){this.j=a,this.i=h,this.l=m,this.R=v||1,this.U=new Xi(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new vg}function vg(){this.i=null,this.g="",this.h=!1}var _g={},ad={};function ld(a,h,m){a.L=1,a.v=sl(Vn(h)),a.m=m,a.P=!0,xg(a,null)}function xg(a,h){a.F=Date.now(),tl(a),a.A=Vn(a.v);var m=a.A,v=a.R;Array.isArray(v)||(v=[String(v)]),Og(m.i,"t",v),a.C=0,m=a.j.J,a.h=new vg,a.g=Jg(a.j,m?h:null,!a.m),0<a.O&&(a.M=new T1(p(a.Y,a,a.g),a.O)),h=a.U,m=a.g,v=a.ca;var O="readystatechange";Array.isArray(O)||(O&&(ug[0]=O.toString()),O=ug);for(var D=0;D<O.length;D++){var $=rg(m,O[D],v||h.handleEvent,!1,h.h||h);if(!$)break;h.g[$.key]=$}h=a.H?_(a.H):{},a.m?(a.u||(a.u="POST"),h["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.A,a.u,a.m,h)):(a.u="GET",a.g.ea(a.A,a.u,null,h)),Zi(),N1(a.i,a.u,a.A,a.l,a.R,a.m)}hr.prototype.ca=function(a){a=a.target;const h=this.M;h&&Un(a)==3?h.j():this.Y(a)},hr.prototype.Y=function(a){try{if(a==this.g)e:{const it=Un(this.g);var h=this.g.Ba();const Fs=this.g.Z();if(!(3>it)&&(it!=3||this.g&&(this.h.h||this.g.oa()||$g(this.g)))){this.J||it!=4||h==7||(h==8||0>=Fs?Zi(3):Zi(2)),ud(this);var m=this.g.Z();this.X=m;t:if(wg(this)){var v=$g(this.g);a="";var O=v.length,D=Un(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Jr(this),no(this);var $="";break t}this.h.i=new u.TextDecoder}for(h=0;h<O;h++)this.h.h=!0,a+=this.h.i.decode(v[h],{stream:!(D&&h==O-1)});v.length=0,this.h.g+=a,this.C=0,$=this.h.g}else $=this.g.oa();if(this.o=m==200,S1(this.i,this.u,this.A,this.l,this.R,it,m),this.o){if(this.T&&!this.K){t:{if(this.g){var ce,We=this.g;if((ce=We.g?We.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(ce)){var ie=ce;break t}}ie=null}if(m=ie)Ms(this.i,this.l,m,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,cd(this,m);else{this.o=!1,this.s=3,_t(12),Jr(this),no(this);break e}}if(this.P){m=!0;let tn;for(;!this.J&&this.C<$.length;)if(tn=C1(this,$),tn==ad){it==4&&(this.s=4,_t(14),m=!1),Ms(this.i,this.l,null,"[Incomplete Response]");break}else if(tn==_g){this.s=4,_t(15),Ms(this.i,this.l,$,"[Invalid Chunk]"),m=!1;break}else Ms(this.i,this.l,tn,null),cd(this,tn);if(wg(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),it!=4||$.length!=0||this.h.h||(this.s=1,_t(16),m=!1),this.o=this.o&&m,!m)Ms(this.i,this.l,$,"[Invalid Chunked Response]"),Jr(this),no(this);else if(0<$.length&&!this.W){this.W=!0;var st=this.j;st.g==this&&st.ba&&!st.M&&(st.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),gd(st),st.M=!0,_t(11))}}else Ms(this.i,this.l,$,null),cd(this,$);it==4&&Jr(this),this.o&&!this.J&&(it==4?Gg(this.j,this):(this.o=!1,tl(this)))}else K1(this.g),m==400&&0<$.indexOf("Unknown SID")?(this.s=3,_t(12)):(this.s=0,_t(13)),Jr(this),no(this)}}}catch{}finally{}};function wg(a){return a.g?a.u=="GET"&&a.L!=2&&a.j.Ca:!1}function C1(a,h){var m=a.C,v=h.indexOf(`
`,m);return v==-1?ad:(m=Number(h.substring(m,v)),isNaN(m)?_g:(v+=1,v+m>h.length?ad:(h=h.slice(v,v+m),a.C=v+m,h)))}hr.prototype.cancel=function(){this.J=!0,Jr(this)};function tl(a){a.S=Date.now()+a.I,Eg(a,a.I)}function Eg(a,h){if(a.B!=null)throw Error("WatchDog timer not null");a.B=eo(p(a.ba,a),h)}function ud(a){a.B&&(u.clearTimeout(a.B),a.B=null)}hr.prototype.ba=function(){this.B=null;const a=Date.now();0<=a-this.S?(A1(this.i,this.A),this.L!=2&&(Zi(),_t(17)),Jr(this),this.s=2,no(this)):Eg(this,this.S-a)};function no(a){a.j.G==0||a.J||Gg(a.j,a)}function Jr(a){ud(a);var h=a.M;h&&typeof h.ma=="function"&&h.ma(),a.M=null,cg(a.U),a.g&&(h=a.g,a.g=null,h.abort(),h.ma())}function cd(a,h){try{var m=a.j;if(m.G!=0&&(m.g==a||dd(m.h,a))){if(!a.K&&dd(m.h,a)&&m.G==3){try{var v=m.Da.g.parse(h)}catch{v=null}if(Array.isArray(v)&&v.length==3){var O=v;if(O[0]==0){e:if(!m.u){if(m.g)if(m.g.F+3e3<a.F)cl(m),ll(m);else break e;md(m),_t(18)}}else m.za=O[1],0<m.za-m.T&&37500>O[2]&&m.F&&m.v==0&&!m.C&&(m.C=eo(p(m.Za,m),6e3));if(1>=Ig(m.h)&&m.ca){try{m.ca()}catch{}m.ca=void 0}}else es(m,11)}else if((a.K||m.g==a)&&cl(m),!x(h))for(O=m.Da.g.parse(h),h=0;h<O.length;h++){let ie=O[h];if(m.T=ie[0],ie=ie[1],m.G==2)if(ie[0]=="c"){m.K=ie[1],m.ia=ie[2];const st=ie[3];st!=null&&(m.la=st,m.j.info("VER="+m.la));const it=ie[4];it!=null&&(m.Aa=it,m.j.info("SVER="+m.Aa));const Fs=ie[5];Fs!=null&&typeof Fs=="number"&&0<Fs&&(v=1.5*Fs,m.L=v,m.j.info("backChannelRequestTimeoutMs_="+v)),v=m;const tn=a.g;if(tn){const hl=tn.g?tn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(hl){var D=v.h;D.g||hl.indexOf("spdy")==-1&&hl.indexOf("quic")==-1&&hl.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(hd(D,D.h),D.h=null))}if(v.D){const yd=tn.g?tn.g.getResponseHeader("X-HTTP-Session-Id"):null;yd&&(v.ya=yd,me(v.I,v.D,yd))}}m.G=3,m.l&&m.l.ua(),m.ba&&(m.R=Date.now()-a.F,m.j.info("Handshake RTT: "+m.R+"ms")),v=m;var $=a;if(v.qa=Xg(v,v.J?v.ia:null,v.W),$.K){Ng(v.h,$);var ce=$,We=v.L;We&&(ce.I=We),ce.B&&(ud(ce),tl(ce)),v.g=$}else Wg(v);0<m.i.length&&ul(m)}else ie[0]!="stop"&&ie[0]!="close"||es(m,7);else m.G==3&&(ie[0]=="stop"||ie[0]=="close"?ie[0]=="stop"?es(m,7):pd(m):ie[0]!="noop"&&m.l&&m.l.ta(ie),m.v=0)}}Zi(4)}catch{}}var k1=class{constructor(a,h){this.g=a,this.map=h}};function Tg(a){this.l=a||10,u.PerformanceNavigationTiming?(a=u.performance.getEntriesByType("navigation"),a=0<a.length&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function bg(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function Ig(a){return a.h?1:a.g?a.g.size:0}function dd(a,h){return a.h?a.h==h:a.g?a.g.has(h):!1}function hd(a,h){a.g?a.g.add(h):a.h=h}function Ng(a,h){a.h&&a.h==h?a.h=null:a.g&&a.g.has(h)&&a.g.delete(h)}Tg.prototype.cancel=function(){if(this.i=Sg(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function Sg(a){if(a.h!=null)return a.i.concat(a.h.D);if(a.g!=null&&a.g.size!==0){let h=a.i;for(const m of a.g.values())h=h.concat(m.D);return h}return T(a.i)}function R1(a){if(a.V&&typeof a.V=="function")return a.V();if(typeof Map<"u"&&a instanceof Map||typeof Set<"u"&&a instanceof Set)return Array.from(a.values());if(typeof a=="string")return a.split("");if(c(a)){for(var h=[],m=a.length,v=0;v<m;v++)h.push(a[v]);return h}h=[],m=0;for(v in a)h[m++]=a[v];return h}function j1(a){if(a.na&&typeof a.na=="function")return a.na();if(!a.V||typeof a.V!="function"){if(typeof Map<"u"&&a instanceof Map)return Array.from(a.keys());if(!(typeof Set<"u"&&a instanceof Set)){if(c(a)||typeof a=="string"){var h=[];a=a.length;for(var m=0;m<a;m++)h.push(m);return h}h=[],m=0;for(const v in a)h[m++]=v;return h}}}function Ag(a,h){if(a.forEach&&typeof a.forEach=="function")a.forEach(h,void 0);else if(c(a)||typeof a=="string")Array.prototype.forEach.call(a,h,void 0);else for(var m=j1(a),v=R1(a),O=v.length,D=0;D<O;D++)h.call(void 0,v[D],m&&m[D],a)}var Pg=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function O1(a,h){if(a){a=a.split("&");for(var m=0;m<a.length;m++){var v=a[m].indexOf("="),O=null;if(0<=v){var D=a[m].substring(0,v);O=a[m].substring(v+1)}else D=a[m];h(D,O?decodeURIComponent(O.replace(/\+/g," ")):"")}}}function Zr(a){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,a instanceof Zr){this.h=a.h,nl(this,a.j),this.o=a.o,this.g=a.g,rl(this,a.s),this.l=a.l;var h=a.i,m=new io;m.i=h.i,h.g&&(m.g=new Map(h.g),m.h=h.h),Cg(this,m),this.m=a.m}else a&&(h=String(a).match(Pg))?(this.h=!1,nl(this,h[1]||"",!0),this.o=ro(h[2]||""),this.g=ro(h[3]||"",!0),rl(this,h[4]),this.l=ro(h[5]||"",!0),Cg(this,h[6]||"",!0),this.m=ro(h[7]||"")):(this.h=!1,this.i=new io(null,this.h))}Zr.prototype.toString=function(){var a=[],h=this.j;h&&a.push(so(h,kg,!0),":");var m=this.g;return(m||h=="file")&&(a.push("//"),(h=this.o)&&a.push(so(h,kg,!0),"@"),a.push(encodeURIComponent(String(m)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),m=this.s,m!=null&&a.push(":",String(m))),(m=this.l)&&(this.g&&m.charAt(0)!="/"&&a.push("/"),a.push(so(m,m.charAt(0)=="/"?M1:L1,!0))),(m=this.i.toString())&&a.push("?",m),(m=this.m)&&a.push("#",so(m,U1)),a.join("")};function Vn(a){return new Zr(a)}function nl(a,h,m){a.j=m?ro(h,!0):h,a.j&&(a.j=a.j.replace(/:$/,""))}function rl(a,h){if(h){if(h=Number(h),isNaN(h)||0>h)throw Error("Bad port number "+h);a.s=h}else a.s=null}function Cg(a,h,m){h instanceof io?(a.i=h,F1(a.i,a.h)):(m||(h=so(h,V1)),a.i=new io(h,a.h))}function me(a,h,m){a.i.set(h,m)}function sl(a){return me(a,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),a}function ro(a,h){return a?h?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function so(a,h,m){return typeof a=="string"?(a=encodeURI(a).replace(h,D1),m&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function D1(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var kg=/[#\/\?@]/g,L1=/[#\?:]/g,M1=/[#\?]/g,V1=/[#\?@]/g,U1=/#/g;function io(a,h){this.h=this.g=null,this.i=a||null,this.j=!!h}function fr(a){a.g||(a.g=new Map,a.h=0,a.i&&O1(a.i,function(h,m){a.add(decodeURIComponent(h.replace(/\+/g," ")),m)}))}t=io.prototype,t.add=function(a,h){fr(this),this.i=null,a=Vs(this,a);var m=this.g.get(a);return m||this.g.set(a,m=[]),m.push(h),this.h+=1,this};function Rg(a,h){fr(a),h=Vs(a,h),a.g.has(h)&&(a.i=null,a.h-=a.g.get(h).length,a.g.delete(h))}function jg(a,h){return fr(a),h=Vs(a,h),a.g.has(h)}t.forEach=function(a,h){fr(this),this.g.forEach(function(m,v){m.forEach(function(O){a.call(h,O,v,this)},this)},this)},t.na=function(){fr(this);const a=Array.from(this.g.values()),h=Array.from(this.g.keys()),m=[];for(let v=0;v<h.length;v++){const O=a[v];for(let D=0;D<O.length;D++)m.push(h[v])}return m},t.V=function(a){fr(this);let h=[];if(typeof a=="string")jg(this,a)&&(h=h.concat(this.g.get(Vs(this,a))));else{a=Array.from(this.g.values());for(let m=0;m<a.length;m++)h=h.concat(a[m])}return h},t.set=function(a,h){return fr(this),this.i=null,a=Vs(this,a),jg(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[h]),this.h+=1,this},t.get=function(a,h){return a?(a=this.V(a),0<a.length?String(a[0]):h):h};function Og(a,h,m){Rg(a,h),0<m.length&&(a.i=null,a.g.set(Vs(a,h),T(m)),a.h+=m.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],h=Array.from(this.g.keys());for(var m=0;m<h.length;m++){var v=h[m];const D=encodeURIComponent(String(v)),$=this.V(v);for(v=0;v<$.length;v++){var O=D;$[v]!==""&&(O+="="+encodeURIComponent(String($[v]))),a.push(O)}}return this.i=a.join("&")};function Vs(a,h){return h=String(h),a.j&&(h=h.toLowerCase()),h}function F1(a,h){h&&!a.j&&(fr(a),a.i=null,a.g.forEach(function(m,v){var O=v.toLowerCase();v!=O&&(Rg(this,v),Og(this,O,m))},a)),a.j=h}function $1(a,h){const m=new to;if(u.Image){const v=new Image;v.onload=E(pr,m,"TestLoadImage: loaded",!0,h,v),v.onerror=E(pr,m,"TestLoadImage: error",!1,h,v),v.onabort=E(pr,m,"TestLoadImage: abort",!1,h,v),v.ontimeout=E(pr,m,"TestLoadImage: timeout",!1,h,v),u.setTimeout(function(){v.ontimeout&&v.ontimeout()},1e4),v.src=a}else h(!1)}function z1(a,h){const m=new to,v=new AbortController,O=setTimeout(()=>{v.abort(),pr(m,"TestPingServer: timeout",!1,h)},1e4);fetch(a,{signal:v.signal}).then(D=>{clearTimeout(O),D.ok?pr(m,"TestPingServer: ok",!0,h):pr(m,"TestPingServer: server error",!1,h)}).catch(()=>{clearTimeout(O),pr(m,"TestPingServer: error",!1,h)})}function pr(a,h,m,v,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),v(m)}catch{}}function B1(){this.g=new I1}function q1(a,h,m){const v=m||"";try{Ag(a,function(O,D){let $=O;d(O)&&($=nd(O)),h.push(v+D+"="+encodeURIComponent($))})}catch(O){throw h.push(v+"type="+encodeURIComponent("_badmap")),O}}function il(a){this.l=a.Ub||null,this.j=a.eb||!1}N(il,rd),il.prototype.g=function(){return new ol(this.l,this.j)},il.prototype.i=function(a){return function(){return a}}({});function ol(a,h){rt.call(this),this.D=a,this.o=h,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}N(ol,rt),t=ol.prototype,t.open=function(a,h){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=a,this.A=h,this.readyState=1,ao(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const h={headers:this.u,method:this.B,credentials:this.m,cache:void 0};a&&(h.body=a),(this.D||u).fetch(new Request(this.A,h)).then(this.Sa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,oo(this)),this.readyState=0},t.Sa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ao(this)),this.g&&(this.readyState=3,ao(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Dg(this)}else a.text().then(this.Ra.bind(this),this.ga.bind(this))};function Dg(a){a.j.read().then(a.Pa.bind(a)).catch(a.ga.bind(a))}t.Pa=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var h=a.value?a.value:new Uint8Array(0);(h=this.v.decode(h,{stream:!a.done}))&&(this.response=this.responseText+=h)}a.done?oo(this):ao(this),this.readyState==3&&Dg(this)}},t.Ra=function(a){this.g&&(this.response=this.responseText=a,oo(this))},t.Qa=function(a){this.g&&(this.response=a,oo(this))},t.ga=function(){this.g&&oo(this)};function oo(a){a.readyState=4,a.l=null,a.j=null,a.v=null,ao(a)}t.setRequestHeader=function(a,h){this.u.append(a,h)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],h=this.h.entries();for(var m=h.next();!m.done;)m=m.value,a.push(m[0]+": "+m[1]),m=h.next();return a.join(`\r
`)};function ao(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ol.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function Lg(a){let h="";return V(a,function(m,v){h+=v,h+=":",h+=m,h+=`\r
`}),h}function fd(a,h,m){e:{for(v in m){var v=!1;break e}v=!0}v||(m=Lg(m),typeof a=="string"?m!=null&&encodeURIComponent(String(m)):me(a,h,m))}function Ie(a){rt.call(this),this.headers=new Map,this.o=a||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}N(Ie,rt);var H1=/^https?$/i,W1=["POST","PUT"];t=Ie.prototype,t.Ha=function(a){this.J=a},t.ea=function(a,h,m,v){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);h=h?h.toUpperCase():"GET",this.D=a,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():od.g(),this.v=this.o?dg(this.o):dg(od),this.g.onreadystatechange=p(this.Ea,this);try{this.B=!0,this.g.open(h,String(a),!0),this.B=!1}catch(D){Mg(this,D);return}if(a=m||"",m=new Map(this.headers),v)if(Object.getPrototypeOf(v)===Object.prototype)for(var O in v)m.set(O,v[O]);else if(typeof v.keys=="function"&&typeof v.get=="function")for(const D of v.keys())m.set(D,v.get(D));else throw Error("Unknown input type for opt_headers: "+String(v));v=Array.from(m.keys()).find(D=>D.toLowerCase()=="content-type"),O=u.FormData&&a instanceof u.FormData,!(0<=Array.prototype.indexOf.call(W1,h,void 0))||v||O||m.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,$]of m)this.g.setRequestHeader(D,$);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Fg(this),this.u=!0,this.g.send(a),this.u=!1}catch(D){Mg(this,D)}};function Mg(a,h){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=h,a.m=5,Vg(a),al(a)}function Vg(a){a.A||(a.A=!0,vt(a,"complete"),vt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=a||7,vt(this,"complete"),vt(this,"abort"),al(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),al(this,!0)),Ie.aa.N.call(this)},t.Ea=function(){this.s||(this.B||this.u||this.j?Ug(this):this.bb())},t.bb=function(){Ug(this)};function Ug(a){if(a.h&&typeof o<"u"&&(!a.v[1]||Un(a)!=4||a.Z()!=2)){if(a.u&&Un(a)==4)ag(a.Ea,0,a);else if(vt(a,"readystatechange"),Un(a)==4){a.h=!1;try{const $=a.Z();e:switch($){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var h=!0;break e;default:h=!1}var m;if(!(m=h)){var v;if(v=$===0){var O=String(a.D).match(Pg)[1]||null;!O&&u.self&&u.self.location&&(O=u.self.location.protocol.slice(0,-1)),v=!H1.test(O?O.toLowerCase():"")}m=v}if(m)vt(a,"complete"),vt(a,"success");else{a.m=6;try{var D=2<Un(a)?a.g.statusText:""}catch{D=""}a.l=D+" ["+a.Z()+"]",Vg(a)}}finally{al(a)}}}}function al(a,h){if(a.g){Fg(a);const m=a.g,v=a.v[0]?()=>{}:null;a.g=null,a.v=null,h||vt(a,"ready");try{m.onreadystatechange=v}catch{}}}function Fg(a){a.I&&(u.clearTimeout(a.I),a.I=null)}t.isActive=function(){return!!this.g};function Un(a){return a.g?a.g.readyState:0}t.Z=function(){try{return 2<Un(this)?this.g.status:-1}catch{return-1}},t.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.Oa=function(a){if(this.g){var h=this.g.responseText;return a&&h.indexOf(a)==0&&(h=h.substring(a.length)),b1(h)}};function $g(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.H){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function K1(a){const h={};a=(a.g&&2<=Un(a)&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let v=0;v<a.length;v++){if(x(a[v]))continue;var m=k(a[v]);const O=m[0];if(m=m[1],typeof m!="string")continue;m=m.trim();const D=h[O]||[];h[O]=D,D.push(m)}I(h,function(v){return v.join(", ")})}t.Ba=function(){return this.m},t.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function lo(a,h,m){return m&&m.internalChannelParams&&m.internalChannelParams[a]||h}function zg(a){this.Aa=0,this.i=[],this.j=new to,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=lo("failFast",!1,a),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=lo("baseRetryDelayMs",5e3,a),this.cb=lo("retryDelaySeedMs",1e4,a),this.Wa=lo("forwardChannelMaxRetries",2,a),this.wa=lo("forwardChannelRequestTimeoutMs",2e4,a),this.pa=a&&a.xmlHttpFactory||void 0,this.Xa=a&&a.Tb||void 0,this.Ca=a&&a.useFetchStreams||!1,this.L=void 0,this.J=a&&a.supportsCrossDomainXhr||!1,this.K="",this.h=new Tg(a&&a.concurrentRequestLimit),this.Da=new B1,this.P=a&&a.fastHandshake||!1,this.O=a&&a.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=a&&a.Rb||!1,a&&a.xa&&this.j.xa(),a&&a.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&a&&a.detectBufferingProxy||!1,this.ja=void 0,a&&a.longPollingTimeout&&0<a.longPollingTimeout&&(this.ja=a.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}t=zg.prototype,t.la=8,t.G=1,t.connect=function(a,h,m,v){_t(0),this.W=a,this.H=h||{},m&&v!==void 0&&(this.H.OSID=m,this.H.OAID=v),this.F=this.X,this.I=Xg(this,null,this.W),ul(this)};function pd(a){if(Bg(a),a.G==3){var h=a.U++,m=Vn(a.I);if(me(m,"SID",a.K),me(m,"RID",h),me(m,"TYPE","terminate"),uo(a,m),h=new hr(a,a.j,h),h.L=2,h.v=sl(Vn(m)),m=!1,u.navigator&&u.navigator.sendBeacon)try{m=u.navigator.sendBeacon(h.v.toString(),"")}catch{}!m&&u.Image&&(new Image().src=h.v,m=!0),m||(h.g=Jg(h.j,null),h.g.ea(h.v)),h.F=Date.now(),tl(h)}Yg(a)}function ll(a){a.g&&(gd(a),a.g.cancel(),a.g=null)}function Bg(a){ll(a),a.u&&(u.clearTimeout(a.u),a.u=null),cl(a),a.h.cancel(),a.s&&(typeof a.s=="number"&&u.clearTimeout(a.s),a.s=null)}function ul(a){if(!bg(a.h)&&!a.s){a.s=!0;var h=a.Ga;jn||Z(),B||(jn(),B=!0),Y.add(h,a),a.B=0}}function G1(a,h){return Ig(a.h)>=a.h.j-(a.s?1:0)?!1:a.s?(a.i=h.D.concat(a.i),!0):a.G==1||a.G==2||a.B>=(a.Va?0:a.Wa)?!1:(a.s=eo(p(a.Ga,a,h),Qg(a,a.B)),a.B++,!0)}t.Ga=function(a){if(this.s)if(this.s=null,this.G==1){if(!a){this.U=Math.floor(1e5*Math.random()),a=this.U++;const O=new hr(this,this.j,a);let D=this.o;if(this.S&&(D?(D=_(D),b(D,this.S)):D=this.S),this.m!==null||this.O||(O.H=D,D=null),this.P)e:{for(var h=0,m=0;m<this.i.length;m++){t:{var v=this.i[m];if("__data__"in v.map&&(v=v.map.__data__,typeof v=="string")){v=v.length;break t}v=void 0}if(v===void 0)break;if(h+=v,4096<h){h=m;break e}if(h===4096||m===this.i.length-1){h=m+1;break e}}h=1e3}else h=1e3;h=Hg(this,O,h),m=Vn(this.I),me(m,"RID",a),me(m,"CVER",22),this.D&&me(m,"X-HTTP-Session-Id",this.D),uo(this,m),D&&(this.O?h="headers="+encodeURIComponent(String(Lg(D)))+"&"+h:this.m&&fd(m,this.m,D)),hd(this.h,O),this.Ua&&me(m,"TYPE","init"),this.P?(me(m,"$req",h),me(m,"SID","null"),O.T=!0,ld(O,m,null)):ld(O,m,h),this.G=2}}else this.G==3&&(a?qg(this,a):this.i.length==0||bg(this.h)||qg(this))};function qg(a,h){var m;h?m=h.l:m=a.U++;const v=Vn(a.I);me(v,"SID",a.K),me(v,"RID",m),me(v,"AID",a.T),uo(a,v),a.m&&a.o&&fd(v,a.m,a.o),m=new hr(a,a.j,m,a.B+1),a.m===null&&(m.H=a.o),h&&(a.i=h.D.concat(a.i)),h=Hg(a,m,1e3),m.I=Math.round(.5*a.wa)+Math.round(.5*a.wa*Math.random()),hd(a.h,m),ld(m,v,h)}function uo(a,h){a.H&&V(a.H,function(m,v){me(h,v,m)}),a.l&&Ag({},function(m,v){me(h,v,m)})}function Hg(a,h,m){m=Math.min(a.i.length,m);var v=a.l?p(a.l.Na,a.l,a):null;e:{var O=a.i;let D=-1;for(;;){const $=["count="+m];D==-1?0<m?(D=O[0].g,$.push("ofs="+D)):D=0:$.push("ofs="+D);let ce=!0;for(let We=0;We<m;We++){let ie=O[We].g;const st=O[We].map;if(ie-=D,0>ie)D=Math.max(0,O[We].g-100),ce=!1;else try{q1(st,$,"req"+ie+"_")}catch{v&&v(st)}}if(ce){v=$.join("&");break e}}}return a=a.i.splice(0,m),h.D=a,v}function Wg(a){if(!a.g&&!a.u){a.Y=1;var h=a.Fa;jn||Z(),B||(jn(),B=!0),Y.add(h,a),a.v=0}}function md(a){return a.g||a.u||3<=a.v?!1:(a.Y++,a.u=eo(p(a.Fa,a),Qg(a,a.v)),a.v++,!0)}t.Fa=function(){if(this.u=null,Kg(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var a=2*this.R;this.j.info("BP detection timer enabled: "+a),this.A=eo(p(this.ab,this),a)}},t.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_t(10),ll(this),Kg(this))};function gd(a){a.A!=null&&(u.clearTimeout(a.A),a.A=null)}function Kg(a){a.g=new hr(a,a.j,"rpc",a.Y),a.m===null&&(a.g.H=a.o),a.g.O=0;var h=Vn(a.qa);me(h,"RID","rpc"),me(h,"SID",a.K),me(h,"AID",a.T),me(h,"CI",a.F?"0":"1"),!a.F&&a.ja&&me(h,"TO",a.ja),me(h,"TYPE","xmlhttp"),uo(a,h),a.m&&a.o&&fd(h,a.m,a.o),a.L&&(a.g.I=a.L);var m=a.g;a=a.ia,m.L=1,m.v=sl(Vn(h)),m.m=null,m.P=!0,xg(m,a)}t.Za=function(){this.C!=null&&(this.C=null,ll(this),md(this),_t(19))};function cl(a){a.C!=null&&(u.clearTimeout(a.C),a.C=null)}function Gg(a,h){var m=null;if(a.g==h){cl(a),gd(a),a.g=null;var v=2}else if(dd(a.h,h))m=h.D,Ng(a.h,h),v=1;else return;if(a.G!=0){if(h.o)if(v==1){m=h.m?h.m.length:0,h=Date.now()-h.F;var O=a.B;v=Ja(),vt(v,new gg(v,m)),ul(a)}else Wg(a);else if(O=h.s,O==3||O==0&&0<h.X||!(v==1&&G1(a,h)||v==2&&md(a)))switch(m&&0<m.length&&(h=a.h,h.i=h.i.concat(m)),O){case 1:es(a,5);break;case 4:es(a,10);break;case 3:es(a,6);break;default:es(a,2)}}}function Qg(a,h){let m=a.Ta+Math.floor(Math.random()*a.cb);return a.isActive()||(m*=2),m*h}function es(a,h){if(a.j.info("Error code "+h),h==2){var m=p(a.fb,a),v=a.Xa;const O=!v;v=new Zr(v||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||nl(v,"https"),sl(v),O?$1(v.toString(),m):z1(v.toString(),m)}else _t(2);a.G=0,a.l&&a.l.sa(h),Yg(a),Bg(a)}t.fb=function(a){a?(this.j.info("Successfully pinged google.com"),_t(2)):(this.j.info("Failed to ping google.com"),_t(1))};function Yg(a){if(a.G=0,a.ka=[],a.l){const h=Sg(a.h);(h.length!=0||a.i.length!=0)&&(A(a.ka,h),A(a.ka,a.i),a.h.i.length=0,T(a.i),a.i.length=0),a.l.ra()}}function Xg(a,h,m){var v=m instanceof Zr?Vn(m):new Zr(m);if(v.g!="")h&&(v.g=h+"."+v.g),rl(v,v.s);else{var O=u.location;v=O.protocol,h=h?h+"."+O.hostname:O.hostname,O=+O.port;var D=new Zr(null);v&&nl(D,v),h&&(D.g=h),O&&rl(D,O),m&&(D.l=m),v=D}return m=a.D,h=a.ya,m&&h&&me(v,m,h),me(v,"VER",a.la),uo(a,v),v}function Jg(a,h,m){if(h&&!a.J)throw Error("Can't create secondary domain capable XhrIo object.");return h=a.Ca&&!a.pa?new Ie(new il({eb:m})):new Ie(a.pa),h.Ha(a.J),h}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Zg(){}t=Zg.prototype,t.ua=function(){},t.ta=function(){},t.sa=function(){},t.ra=function(){},t.isActive=function(){return!0},t.Na=function(){};function dl(){}dl.prototype.g=function(a,h){return new Lt(a,h)};function Lt(a,h){rt.call(this),this.g=new zg(h),this.l=a,this.h=h&&h.messageUrlParams||null,a=h&&h.messageHeaders||null,h&&h.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=h&&h.initMessageHeaders||null,h&&h.messageContentType&&(a?a["X-WebChannel-Content-Type"]=h.messageContentType:a={"X-WebChannel-Content-Type":h.messageContentType}),h&&h.va&&(a?a["X-WebChannel-Client-Profile"]=h.va:a={"X-WebChannel-Client-Profile":h.va}),this.g.S=a,(a=h&&h.Sb)&&!x(a)&&(this.g.m=a),this.v=h&&h.supportsCrossDomainXhr||!1,this.u=h&&h.sendRawJson||!1,(h=h&&h.httpSessionIdParam)&&!x(h)&&(this.g.D=h,a=this.h,a!==null&&h in a&&(a=this.h,h in a&&delete a[h])),this.j=new Us(this)}N(Lt,rt),Lt.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Lt.prototype.close=function(){pd(this.g)},Lt.prototype.o=function(a){var h=this.g;if(typeof a=="string"){var m={};m.__data__=a,a=m}else this.u&&(m={},m.__data__=nd(a),a=m);h.i.push(new k1(h.Ya++,a)),h.G==3&&ul(h)},Lt.prototype.N=function(){this.g.l=null,delete this.j,pd(this.g),delete this.g,Lt.aa.N.call(this)};function ey(a){sd.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var h=a.__sm__;if(h){e:{for(const m in h){a=m;break e}a=void 0}(this.i=a)&&(a=this.i,h=h!==null&&a in h?h[a]:void 0),this.data=h}else this.data=a}N(ey,sd);function ty(){id.call(this),this.status=1}N(ty,id);function Us(a){this.g=a}N(Us,Zg),Us.prototype.ua=function(){vt(this.g,"a")},Us.prototype.ta=function(a){vt(this.g,new ey(a))},Us.prototype.sa=function(a){vt(this.g,new ty)},Us.prototype.ra=function(){vt(this.g,"b")},dl.prototype.createWebChannel=dl.prototype.g,Lt.prototype.send=Lt.prototype.o,Lt.prototype.open=Lt.prototype.m,Lt.prototype.close=Lt.prototype.close,NE=function(){return new dl},IE=function(){return Ja()},bE=Xr,xf={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Za.NO_ERROR=0,Za.TIMEOUT=8,Za.HTTP_ERROR=6,Jl=Za,yg.COMPLETE="complete",TE=yg,hg.EventType=Ji,Ji.OPEN="a",Ji.CLOSE="b",Ji.ERROR="c",Ji.MESSAGE="d",rt.prototype.listen=rt.prototype.K,Po=hg,Ie.prototype.listenOnce=Ie.prototype.L,Ie.prototype.getLastError=Ie.prototype.Ka,Ie.prototype.getLastErrorCode=Ie.prototype.Ba,Ie.prototype.getStatus=Ie.prototype.Z,Ie.prototype.getResponseJson=Ie.prototype.Oa,Ie.prototype.getResponseText=Ie.prototype.oa,Ie.prototype.send=Ie.prototype.ea,Ie.prototype.setWithCredentials=Ie.prototype.Ha,EE=Ie}).apply(typeof kl<"u"?kl:typeof self<"u"?self:typeof window<"u"?window:{});const Qv="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dt=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};dt.UNAUTHENTICATED=new dt(null),dt.GOOGLE_CREDENTIALS=new dt("google-credentials-uid"),dt.FIRST_PARTY=new dt("first-party-uid"),dt.MOCK_USER=new dt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hi="10.14.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=new qp("@firebase/firestore");function _o(){return Ts.logLevel}function H(t,...e){if(Ts.logLevel<=ne.DEBUG){const n=e.map(rm);Ts.debug(`Firestore (${Hi}): ${t}`,...n)}}function ir(t,...e){if(Ts.logLevel<=ne.ERROR){const n=e.map(rm);Ts.error(`Firestore (${Hi}): ${t}`,...n)}}function Si(t,...e){if(Ts.logLevel<=ne.WARN){const n=e.map(rm);Ts.warn(`Firestore (${Hi}): ${t}`,...n)}}function rm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(t="Unexpected state"){const e=`FIRESTORE (${Hi}) INTERNAL ASSERTION FAILED: `+t;throw ir(e),new Error(e)}function le(t,e){t||Q()}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class z extends yn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class T2{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(dt.UNAUTHENTICATED))}shutdown(){}}class b2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class I2{constructor(e){this.t=e,this.currentUser=dt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){le(this.o===void 0);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new Jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new Jn,e.enqueueRetryable(()=>s(this.currentUser))};const o=()=>{const c=i;e.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},u=c=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(c=>u(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?u(c):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new Jn)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(le(typeof r.accessToken=="string"),new SE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return le(e===null||typeof e=="string"),new dt(e)}}class N2{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=dt.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class S2{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new N2(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(dt.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class A2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class P2{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){le(this.o===void 0);const r=i=>{i.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const o=i.token!==this.R;return this.R=i.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(i.token):Promise.resolve()};this.o=i=>{e.enqueueRetryable(()=>r(i))};const s=i=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.A.getImmediate({optional:!0});i?s(i):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(le(typeof n.token=="string"),this.R=n.token,new A2(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function C2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AE{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const s=C2(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=e.charAt(s[i]%e.length))}return r}}function oe(t,e){return t<e?-1:t>e?1:0}function Ai(t,e,n){return t.length===e.length&&t.every((r,s)=>n(r,e[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $e{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new z(M.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new z(M.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return $e.fromMillis(Date.now())}static fromDate(e){return $e.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new $e(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?oe(this.nanoseconds,e.nanoseconds):oe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new $e(0,0))}static max(){return new X(new $e(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(e,n,r){n===void 0?n=0:n>e.length&&Q(),r===void 0?r=e.length-n:r>e.length-n&&Q(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ga.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ga?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let s=0;s<r;s++){const i=e.get(s),o=n.get(s);if(i<o)return-1;if(i>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class fe extends ga{construct(e,n,r){return new fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new z(M.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new fe(n)}static emptyPath(){return new fe([])}}const k2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xe extends ga{construct(e,n,r){return new Xe(e,n,r)}static isValidIdentifier(e){return k2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xe.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Xe(["__name__"])}static fromServerFormat(e){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;s<e.length;){const u=e[s];if(u==="\\"){if(s+1===e.length)throw new z(M.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const c=e[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new z(M.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=c,s+=2}else u==="`"?(o=!o,s++):u!=="."||o?(r+=u,s++):(i(),s++)}if(i(),o)throw new z(M.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xe(n)}static emptyPath(){return new Xe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(fe.fromString(e))}static fromName(e){return new W(fe.fromString(e).popFirst(5))}static empty(){return new W(fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new fe(e.slice()))}}function R2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,s=X.fromTimestamp(r===1e9?new $e(n+1,0):new $e(n,r));return new zr(s,W.empty(),e)}function j2(t){return new zr(t.readTime,t.key,-1)}class zr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new zr(X.min(),W.empty(),-1)}static max(){return new zr(X.max(),W.empty(),-1)}}function O2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:oe(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class L2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Va(t){if(t.code!==M.FAILED_PRECONDITION||t.message!==D2)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new U((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(e,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof U?n:U.resolve(n)}catch(n){return U.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):U.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):U.reject(n)}static resolve(e){return new U((n,r)=>{n(e)})}static reject(e){return new U((n,r)=>{r(e)})}static waitFor(e){return new U((n,r)=>{let s=0,i=0,o=!1;e.forEach(u=>{++s,u.next(()=>{++i,o&&i===s&&n()},c=>r(c))}),o=!0,i===s&&n()})}static or(e){let n=U.resolve(!1);for(const r of e)n=n.next(s=>s?U.resolve(s):r());return n}static forEach(e,n){const r=[];return e.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(e,n){return new U((r,s)=>{const i=e.length,o=new Array(i);let u=0;for(let c=0;c<i;c++){const d=c;n(e[d]).next(f=>{o[d]=f,++u,u===i&&r(o)},f=>s(f))}})}static doWhile(e,n){return new U((r,s)=>{const i=()=>{e()===!0?n().next(()=>{i()},s):r()};i()})}}function M2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ua(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}sm.oe=-1;function Tc(t){return t==null}function Vu(t){return t===0&&1/t==-1/0}function V2(t){return typeof t=="number"&&Number.isInteger(t)&&!Vu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yv(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Os(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function PE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(e,n){this.comparator=e,this.root=n||Ye.EMPTY}insert(e,n){return new be(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ye.BLACK,null,null))}remove(e){return new be(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ye.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(e,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Rl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Rl(this.root,e,this.comparator,!1)}getReverseIterator(){return new Rl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Rl(this.root,e,this.comparator,!0)}}class Rl{constructor(e,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=n?r(e.key,n):1,n&&s&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(i===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ye{constructor(e,n,r,s,i){this.key=e,this.value=n,this.color=r??Ye.RED,this.left=s??Ye.EMPTY,this.right=i??Ye.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,i){return new Ye(e??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this;const i=r(e,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(e,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ye.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return Ye.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Q();const e=this.left.check();if(e!==this.right.check())throw Q();return e+(this.isRed()?0:1)}}Ye.EMPTY=null,Ye.RED=!0,Ye.BLACK=!1;Ye.EMPTY=new class{constructor(){this.size=0}get key(){throw Q()}get value(){throw Q()}get color(){throw Q()}get left(){throw Q()}get right(){throw Q()}copy(e,n,r,s,i){return this}insert(e,n,r){return new Ye(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class et{constructor(e){this.comparator=e,this.data=new be(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,e[1])>=0)return;n(s.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Xv(this.data.getIterator())}getIteratorFrom(e){return new Xv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof et)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new et(this.comparator);return n.data=e,n}}class Xv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(Xe.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new et(Xe.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Ai(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new CE("Invalid base64 string: "+i):i}}(e);return new nt(n)}static fromUint8Array(e){const n=function(s){let i="";for(let o=0;o<s.length;++o)i+=String.fromCharCode(s[o]);return i}(e);return new nt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return oe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}nt.EMPTY_BYTE_STRING=new nt("");const U2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Br(t){if(le(!!t),typeof t=="string"){let e=0;const n=U2.exec(t);if(le(!!n),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),e=Number(s)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Ce(t.seconds),nanos:Ce(t.nanos)}}function Ce(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function bs(t){return typeof t=="string"?nt.fromBase64String(t):nt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bc(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function im(t){const e=t.mapValue.fields.__previous_value__;return bc(e)?im(e):e}function ya(t){const e=Br(t.mapValue.fields.__local_write_time__.timestampValue);return new $e(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(e,n,r,s,i,o,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.longPollingOptions=c,this.useFetchStreams=d}}class va{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new va("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof va&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jl={mapValue:{}};function Is(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?bc(t)?4:z2(t)?9007199254740991:$2(t)?10:11:Q()}function Sn(t,e){if(t===e)return!0;const n=Is(t);if(n!==Is(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ya(t).isEqual(ya(e));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const o=Br(s.timestampValue),u=Br(i.timestampValue);return o.seconds===u.seconds&&o.nanos===u.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(s,i){return bs(s.bytesValue).isEqual(bs(i.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(s,i){return Ce(s.geoPointValue.latitude)===Ce(i.geoPointValue.latitude)&&Ce(s.geoPointValue.longitude)===Ce(i.geoPointValue.longitude)}(t,e);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Ce(s.integerValue)===Ce(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const o=Ce(s.doubleValue),u=Ce(i.doubleValue);return o===u?Vu(o)===Vu(u):isNaN(o)&&isNaN(u)}return!1}(t,e);case 9:return Ai(t.arrayValue.values||[],e.arrayValue.values||[],Sn);case 10:case 11:return function(s,i){const o=s.mapValue.fields||{},u=i.mapValue.fields||{};if(Yv(o)!==Yv(u))return!1;for(const c in o)if(o.hasOwnProperty(c)&&(u[c]===void 0||!Sn(o[c],u[c])))return!1;return!0}(t,e);default:return Q()}}function _a(t,e){return(t.values||[]).find(n=>Sn(n,e))!==void 0}function Pi(t,e){if(t===e)return 0;const n=Is(t),r=Is(e);if(n!==r)return oe(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return oe(t.booleanValue,e.booleanValue);case 2:return function(i,o){const u=Ce(i.integerValue||i.doubleValue),c=Ce(o.integerValue||o.doubleValue);return u<c?-1:u>c?1:u===c?0:isNaN(u)?isNaN(c)?0:-1:1}(t,e);case 3:return Jv(t.timestampValue,e.timestampValue);case 4:return Jv(ya(t),ya(e));case 5:return oe(t.stringValue,e.stringValue);case 6:return function(i,o){const u=bs(i),c=bs(o);return u.compareTo(c)}(t.bytesValue,e.bytesValue);case 7:return function(i,o){const u=i.split("/"),c=o.split("/");for(let d=0;d<u.length&&d<c.length;d++){const f=oe(u[d],c[d]);if(f!==0)return f}return oe(u.length,c.length)}(t.referenceValue,e.referenceValue);case 8:return function(i,o){const u=oe(Ce(i.latitude),Ce(o.latitude));return u!==0?u:oe(Ce(i.longitude),Ce(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Zv(t.arrayValue,e.arrayValue);case 10:return function(i,o){var u,c,d,f;const g=i.fields||{},p=o.fields||{},E=(u=g.value)===null||u===void 0?void 0:u.arrayValue,N=(c=p.value)===null||c===void 0?void 0:c.arrayValue,T=oe(((d=E==null?void 0:E.values)===null||d===void 0?void 0:d.length)||0,((f=N==null?void 0:N.values)===null||f===void 0?void 0:f.length)||0);return T!==0?T:Zv(E,N)}(t.mapValue,e.mapValue);case 11:return function(i,o){if(i===jl.mapValue&&o===jl.mapValue)return 0;if(i===jl.mapValue)return 1;if(o===jl.mapValue)return-1;const u=i.fields||{},c=Object.keys(u),d=o.fields||{},f=Object.keys(d);c.sort(),f.sort();for(let g=0;g<c.length&&g<f.length;++g){const p=oe(c[g],f[g]);if(p!==0)return p;const E=Pi(u[c[g]],d[f[g]]);if(E!==0)return E}return oe(c.length,f.length)}(t.mapValue,e.mapValue);default:throw Q()}}function Jv(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return oe(t,e);const n=Br(t),r=Br(e),s=oe(n.seconds,r.seconds);return s!==0?s:oe(n.nanos,r.nanos)}function Zv(t,e){const n=t.values||[],r=e.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Pi(n[s],r[s]);if(i)return i}return oe(n.length,r.length)}function Ci(t){return wf(t)}function wf(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Br(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return bs(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=wf(i);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const o of r)i?i=!1:s+=",",s+=`${o}:${wf(n.fields[o])}`;return s+"}"}(t.mapValue):Q()}function Uu(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function Ef(t){return!!t&&"integerValue"in t}function om(t){return!!t&&"arrayValue"in t}function e0(t){return!!t&&"nullValue"in t}function t0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Zl(t){return!!t&&"mapValue"in t}function $2(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function qo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Os(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=qo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=qo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function z2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.value=e}static empty(){return new Ct({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Zl(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=qo(n)}setAll(e){let n=Xe.emptyPath(),r={},s=[];e.forEach((o,u)=>{if(!n.isImmediateParentOf(u)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=u.popLast()}o?r[u.lastSegment()]=qo(o):s.push(u.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(e){const n=this.field(e.popLast());Zl(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Sn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let s=n.mapValue.fields[e.get(r)];Zl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(e,n,r){Os(n,(s,i)=>e[s]=i);for(const s of r)delete e[s]}clone(){return new Ct(qo(this.value))}}function kE(t){const e=[];return Os(t.fields,(n,r)=>{const s=new Xe([n]);if(Zl(r)){const i=kE(r.mapValue).fields;if(i.length===0)e.push(s);else for(const o of i)e.push(s.child(o))}else e.push(s)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ft{constructor(e,n,r,s,i,o,u){this.key=e,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=o,this.documentState=u}static newInvalidDocument(e){return new ft(e,0,X.min(),X.min(),X.min(),Ct.empty(),0)}static newFoundDocument(e,n,r,s){return new ft(e,1,n,X.min(),r,s,0)}static newNoDocument(e,n){return new ft(e,2,n,X.min(),X.min(),Ct.empty(),0)}static newUnknownDocument(e,n){return new ft(e,3,n,X.min(),X.min(),Ct.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(X.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ct.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ct.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof ft&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new ft(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ki{constructor(e,n){this.position=e,this.inclusive=n}}function n0(t,e,n){let r=0;for(let s=0;s<t.position.length;s++){const i=e[s],o=t.position[s];if(i.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=Pi(o,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function r0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!Sn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xa{constructor(e,n="asc"){this.field=e,this.dir=n}}function B2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{}class Me extends RE{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new H2(e,n,r):n==="array-contains"?new G2(e,r):n==="in"?new Q2(e,r):n==="not-in"?new Y2(e,r):n==="array-contains-any"?new X2(e,r):new Me(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new W2(e,r):new K2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Pi(n,this.value)):n!==null&&Is(this.value)===Is(n)&&this.matchesComparison(Pi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class gn extends RE{constructor(e,n){super(),this.filters=e,this.op=n,this.ae=null}static create(e,n){return new gn(e,n)}matches(e){return jE(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function jE(t){return t.op==="and"}function OE(t){return q2(t)&&jE(t)}function q2(t){for(const e of t.filters)if(e instanceof gn)return!1;return!0}function Tf(t){if(t instanceof Me)return t.field.canonicalString()+t.op.toString()+Ci(t.value);if(OE(t))return t.filters.map(e=>Tf(e)).join(",");{const e=t.filters.map(n=>Tf(n)).join(",");return`${t.op}(${e})`}}function DE(t,e){return t instanceof Me?function(r,s){return s instanceof Me&&r.op===s.op&&r.field.isEqual(s.field)&&Sn(r.value,s.value)}(t,e):t instanceof gn?function(r,s){return s instanceof gn&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,o,u)=>i&&DE(o,s.filters[u]),!0):!1}(t,e):void Q()}function LE(t){return t instanceof Me?function(n){return`${n.field.canonicalString()} ${n.op} ${Ci(n.value)}`}(t):t instanceof gn?function(n){return n.op.toString()+" {"+n.getFilters().map(LE).join(" ,")+"}"}(t):"Filter"}class H2 extends Me{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class W2 extends Me{constructor(e,n){super(e,"in",n),this.keys=ME("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class K2 extends Me{constructor(e,n){super(e,"not-in",n),this.keys=ME("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function ME(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class G2 extends Me{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return om(n)&&_a(n.arrayValue,this.value)}}class Q2 extends Me{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&_a(this.value.arrayValue,n)}}class Y2 extends Me{constructor(e,n){super(e,"not-in",n)}matches(e){if(_a(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!_a(this.value.arrayValue,n)}}class X2 extends Me{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!om(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>_a(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n=null,r=[],s=[],i=null,o=null,u=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=o,this.endAt=u,this.ue=null}}function s0(t,e=null,n=[],r=[],s=null,i=null,o=null){return new J2(t,e,n,r,s,i,o)}function am(t){const e=J(t);if(e.ue===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Tf(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Tc(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Ci(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Ci(r)).join(",")),e.ue=n}return e.ue}function lm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!DE(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!r0(t.startAt,e.startAt)&&r0(t.endAt,e.endAt)}function bf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ds{constructor(e,n=null,r=[],s=[],i=null,o="F",u=null,c=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=o,this.startAt=u,this.endAt=c,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Z2(t,e,n,r,s,i,o,u){return new Ds(t,e,n,r,s,i,o,u)}function um(t){return new Ds(t)}function i0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function cm(t){return t.collectionGroup!==null}function yi(t){const e=J(t);if(e.ce===null){e.ce=[];const n=new Set;for(const i of e.explicitOrderBy)e.ce.push(i),n.add(i.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let u=new et(Xe.comparator);return o.filters.forEach(c=>{c.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||e.ce.push(new xa(i,r))}),n.has(Xe.keyField().canonicalString())||e.ce.push(new xa(Xe.keyField(),r))}return e.ce}function bn(t){const e=J(t);return e.le||(e.le=eR(e,yi(t))),e.le}function eR(t,e){if(t.limitType==="F")return s0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new xa(s.field,i)});const n=t.endAt?new ki(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ki(t.startAt.position,t.startAt.inclusive):null;return s0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function If(t,e){const n=t.filters.concat([e]);return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Fu(t,e,n){return new Ds(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ic(t,e){return lm(bn(t),bn(e))&&t.limitType===e.limitType}function VE(t){return`${am(bn(t))}|lt:${t.limitType}`}function qs(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>LE(s)).join(", ")}]`),Tc(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Ci(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Ci(s)).join(",")),`Target(${r})`}(bn(t))}; limitType=${t.limitType})`}function Nc(t,e){return e.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):W.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(t,e)&&function(r,s){for(const i of yi(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(t,e)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(t,e)&&function(r,s){return!(r.startAt&&!function(o,u,c){const d=n0(o,u,c);return o.inclusive?d<=0:d<0}(r.startAt,yi(r),s)||r.endAt&&!function(o,u,c){const d=n0(o,u,c);return o.inclusive?d>=0:d>0}(r.endAt,yi(r),s))}(t,e)}function tR(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function UE(t){return(e,n)=>{let r=!1;for(const s of yi(t)){const i=nR(s,e,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function nR(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(i,o,u){const c=o.data.field(i),d=u.data.field(i);return c!==null&&d!==null?Pi(c,d):Q()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Q()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,e))return i}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),s=this.inner[r];if(s===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],e))return void(s[i]=[e,n]);s.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(e){Os(this.inner,(n,r)=>{for(const[s,i]of r)e(s,i)})}isEmpty(){return PE(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR=new be(W.comparator);function or(){return rR}const FE=new be(W.comparator);function Co(...t){let e=FE;for(const n of t)e=e.insert(n.key,n);return e}function $E(t){let e=FE;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function cs(){return Ho()}function zE(){return Ho()}function Ho(){return new Wi(t=>t.toString(),(t,e)=>t.isEqual(e))}const sR=new be(W.comparator),iR=new et(W.comparator);function te(...t){let e=iR;for(const n of t)e=e.add(n);return e}const oR=new et(oe);function aR(){return oR}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dm(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vu(e)?"-0":e}}function BE(t){return{integerValue:""+t}}function lR(t,e){return V2(e)?BE(e):dm(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc{constructor(){this._=void 0}}function uR(t,e,n){return t instanceof wa?function(s,i){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&bc(i)&&(i=im(i)),i&&(o.fields.__previous_value__=i),{mapValue:o}}(n,e):t instanceof Ri?HE(t,e):t instanceof Ea?WE(t,e):function(s,i){const o=qE(s,i),u=o0(o)+o0(s.Pe);return Ef(o)&&Ef(s.Pe)?BE(u):dm(s.serializer,u)}(t,e)}function cR(t,e,n){return t instanceof Ri?HE(t,e):t instanceof Ea?WE(t,e):n}function qE(t,e){return t instanceof $u?function(r){return Ef(r)||function(i){return!!i&&"doubleValue"in i}(r)}(e)?e:{integerValue:0}:null}class wa extends Sc{}class Ri extends Sc{constructor(e){super(),this.elements=e}}function HE(t,e){const n=KE(e);for(const r of t.elements)n.some(s=>Sn(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Sc{constructor(e){super(),this.elements=e}}function WE(t,e){let n=KE(e);for(const r of t.elements)n=n.filter(s=>!Sn(s,r));return{arrayValue:{values:n}}}class $u extends Sc{constructor(e,n){super(),this.serializer=e,this.Pe=n}}function o0(t){return Ce(t.integerValue||t.doubleValue)}function KE(t){return om(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,n){this.field=e,this.transform=n}}function dR(t,e){return t.field.isEqual(e.field)&&function(r,s){return r instanceof Ri&&s instanceof Ri||r instanceof Ea&&s instanceof Ea?Ai(r.elements,s.elements,Sn):r instanceof $u&&s instanceof $u?Sn(r.Pe,s.Pe):r instanceof wa&&s instanceof wa}(t.transform,e.transform)}class hR{constructor(e,n){this.version=e,this.transformResults=n}}class fn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new fn}static exists(e){return new fn(void 0,e)}static updateTime(e){return new fn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function eu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Ac{}function QE(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new XE(t.key,fn.none()):new Fa(t.key,t.data,fn.none());{const n=t.data,r=Ct.empty();let s=new et(Xe.comparator);for(let i of e.fields)if(!s.has(i)){let o=n.field(i);o===null&&i.length>1&&(i=i.popLast(),o=n.field(i)),o===null?r.delete(i):r.set(i,o),s=s.add(i)}return new Yr(t.key,r,new Ft(s.toArray()),fn.none())}}function fR(t,e,n){t instanceof Fa?function(s,i,o){const u=s.value.clone(),c=l0(s.fieldTransforms,i,o.transformResults);u.setAll(c),i.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):t instanceof Yr?function(s,i,o){if(!eu(s.precondition,i))return void i.convertToUnknownDocument(o.version);const u=l0(s.fieldTransforms,i,o.transformResults),c=i.data;c.setAll(YE(s)),c.setAll(u),i.convertToFoundDocument(o.version,c).setHasCommittedMutations()}(t,e,n):function(s,i,o){i.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Wo(t,e,n,r){return t instanceof Fa?function(i,o,u,c){if(!eu(i.precondition,o))return u;const d=i.value.clone(),f=u0(i.fieldTransforms,c,o);return d.setAll(f),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null}(t,e,n,r):t instanceof Yr?function(i,o,u,c){if(!eu(i.precondition,o))return u;const d=u0(i.fieldTransforms,c,o),f=o.data;return f.setAll(YE(i)),f.setAll(d),o.convertToFoundDocument(o.version,f).setHasLocalMutations(),u===null?null:u.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(g=>g.field))}(t,e,n,r):function(i,o,u){return eu(i.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):u}(t,e,n)}function pR(t,e){let n=null;for(const r of t.fieldTransforms){const s=e.data.field(r.field),i=qE(r.transform,s||null);i!=null&&(n===null&&(n=Ct.empty()),n.set(r.field,i))}return n||null}function a0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&Ai(r,s,(i,o)=>dR(i,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Fa extends Ac{constructor(e,n,r,s=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class Yr extends Ac{constructor(e,n,r,s,i=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function YE(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function l0(t,e,n){const r=new Map;le(t.length===n.length);for(let s=0;s<n.length;s++){const i=t[s],o=i.transform,u=e.data.field(i.field);r.set(i.field,cR(o,u,n[s]))}return r}function u0(t,e,n){const r=new Map;for(const s of t){const i=s.transform,o=n.data.field(s.field);r.set(s.field,uR(i,o,e))}return r}class XE extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class mR extends Ac{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gR{constructor(e,n,r,s){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(e.key)&&fR(i,e,r[s])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Wo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=zE();return this.mutations.forEach(s=>{const i=e.get(s.key),o=i.overlayedDocument;let u=this.applyToLocalView(o,i.mutatedFields);u=n.has(s.key)?null:u;const c=QE(o,u);c!==null&&r.set(s.key,c),o.isValidDocument()||o.convertToNoDocument(X.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),te())}isEqual(e){return this.batchId===e.batchId&&Ai(this.mutations,e.mutations,(n,r)=>a0(n,r))&&Ai(this.baseMutations,e.baseMutations,(n,r)=>a0(n,r))}}class hm{constructor(e,n,r,s){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=s}static from(e,n,r){le(e.mutations.length===r.length);let s=function(){return sR}();const i=e.mutations;for(let o=0;o<i.length;o++)s=s.insert(i[o].key,r[o].version);return new hm(e,n,r,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yR{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Oe,re;function _R(t){switch(t){default:return Q();case M.CANCELLED:case M.UNKNOWN:case M.DEADLINE_EXCEEDED:case M.RESOURCE_EXHAUSTED:case M.INTERNAL:case M.UNAVAILABLE:case M.UNAUTHENTICATED:return!1;case M.INVALID_ARGUMENT:case M.NOT_FOUND:case M.ALREADY_EXISTS:case M.PERMISSION_DENIED:case M.FAILED_PRECONDITION:case M.ABORTED:case M.OUT_OF_RANGE:case M.UNIMPLEMENTED:case M.DATA_LOSS:return!0}}function JE(t){if(t===void 0)return ir("GRPC error has no .code"),M.UNKNOWN;switch(t){case Oe.OK:return M.OK;case Oe.CANCELLED:return M.CANCELLED;case Oe.UNKNOWN:return M.UNKNOWN;case Oe.DEADLINE_EXCEEDED:return M.DEADLINE_EXCEEDED;case Oe.RESOURCE_EXHAUSTED:return M.RESOURCE_EXHAUSTED;case Oe.INTERNAL:return M.INTERNAL;case Oe.UNAVAILABLE:return M.UNAVAILABLE;case Oe.UNAUTHENTICATED:return M.UNAUTHENTICATED;case Oe.INVALID_ARGUMENT:return M.INVALID_ARGUMENT;case Oe.NOT_FOUND:return M.NOT_FOUND;case Oe.ALREADY_EXISTS:return M.ALREADY_EXISTS;case Oe.PERMISSION_DENIED:return M.PERMISSION_DENIED;case Oe.FAILED_PRECONDITION:return M.FAILED_PRECONDITION;case Oe.ABORTED:return M.ABORTED;case Oe.OUT_OF_RANGE:return M.OUT_OF_RANGE;case Oe.UNIMPLEMENTED:return M.UNIMPLEMENTED;case Oe.DATA_LOSS:return M.DATA_LOSS;default:return Q()}}(re=Oe||(Oe={}))[re.OK=0]="OK",re[re.CANCELLED=1]="CANCELLED",re[re.UNKNOWN=2]="UNKNOWN",re[re.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",re[re.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",re[re.NOT_FOUND=5]="NOT_FOUND",re[re.ALREADY_EXISTS=6]="ALREADY_EXISTS",re[re.PERMISSION_DENIED=7]="PERMISSION_DENIED",re[re.UNAUTHENTICATED=16]="UNAUTHENTICATED",re[re.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",re[re.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",re[re.ABORTED=10]="ABORTED",re[re.OUT_OF_RANGE=11]="OUT_OF_RANGE",re[re.UNIMPLEMENTED=12]="UNIMPLEMENTED",re[re.INTERNAL=13]="INTERNAL",re[re.UNAVAILABLE=14]="UNAVAILABLE",re[re.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xR(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wR=new ms([4294967295,4294967295],0);function c0(t){const e=xR().encode(t),n=new wE;return n.update(e),new Uint8Array(n.digest())}function d0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),s=e.getUint32(8,!0),i=e.getUint32(12,!0);return[new ms([n,r],0),new ms([s,i],0)]}class fm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ko(`Invalid padding: ${n}`);if(r<0)throw new ko(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ko(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ko(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*e.length-n,this.Te=ms.fromNumber(this.Ie)}Ee(e,n,r){let s=e.add(n.multiply(ms.fromNumber(r)));return s.compare(wR)===1&&(s=new ms([s.getBits(0),s.getBits(1)],0)),s.modulo(this.Te).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ie===0)return!1;const n=c0(e),[r,s]=d0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);if(!this.de(o))return!1}return!0}static create(e,n,r){const s=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),o=new fm(i,s,n);return r.forEach(u=>o.insert(u)),o}insert(e){if(this.Ie===0)return;const n=c0(e),[r,s]=d0(n);for(let i=0;i<this.hashCount;i++){const o=this.Ee(r,s,i);this.Ae(o)}}Ae(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ko extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e,n,r,s,i){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const s=new Map;return s.set(e,$a.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Pc(X.min(),s,new be(oe),or(),te())}}class $a{constructor(e,n,r,s,i){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new $a(r,n,te(),te(),te())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tu{constructor(e,n,r,s){this.Re=e,this.removedTargetIds=n,this.key=r,this.Ve=s}}class ZE{constructor(e,n){this.targetId=e,this.me=n}}class eT{constructor(e,n,r=nt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=s}}class h0{constructor(){this.fe=0,this.ge=p0(),this.pe=nt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=te(),n=te(),r=te();return this.ge.forEach((s,i)=>{switch(i){case 0:e=e.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:Q()}}),new $a(this.pe,this.ye,e,n,r)}Ce(){this.we=!1,this.ge=p0()}Fe(e,n){this.we=!0,this.ge=this.ge.insert(e,n)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,le(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class ER{constructor(e){this.Le=e,this.Be=new Map,this.ke=or(),this.qe=f0(),this.Qe=new be(oe)}Ke(e){for(const n of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.$e(n,e.Ve):this.Ue(n,e.key,e.Ve);for(const n of e.removedTargetIds)this.Ue(n,e.key,e.Ve)}We(e){this.forEachTarget(e,n=>{const r=this.Ge(n);switch(e.state){case 0:this.ze(n)&&r.De(e.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(e.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(e.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(e.resumeToken));break;default:Q()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Be.forEach((r,s)=>{this.ze(s)&&n(s)})}He(e){const n=e.targetId,r=e.me.count,s=this.Je(n);if(s){const i=s.target;if(bf(i))if(r===0){const o=new W(i.path);this.Ue(n,o,ft.newNoDocument(o,X.min()))}else le(r===1);else{const o=this.Ye(n);if(o!==r){const u=this.Ze(e),c=u?this.Xe(u,e,o):1;if(c!==0){this.je(n);const d=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,d)}}}}}Ze(e){const n=e.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let o,u;try{o=bs(r).toUint8Array()}catch(c){if(c instanceof CE)return Si("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{u=new fm(o,s,i)}catch(c){return Si(c instanceof ko?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return u.Ie===0?null:u}Xe(e,n,r){return n.me.count===r-this.nt(e,n.targetId)?0:2}nt(e,n){const r=this.Le.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const o=this.Le.tt(),u=`projects/${o.projectId}/databases/${o.database}/documents/${i.path.canonicalString()}`;e.mightContain(u)||(this.Ue(n,i,null),s++)}),s}rt(e){const n=new Map;this.Be.forEach((i,o)=>{const u=this.Je(o);if(u){if(i.current&&bf(u.target)){const c=new W(u.target.path);this.ke.get(c)!==null||this.it(o,c)||this.Ue(o,c,ft.newNoDocument(c,e))}i.be&&(n.set(o,i.ve()),i.Ce())}});let r=te();this.qe.forEach((i,o)=>{let u=!0;o.forEachWhile(c=>{const d=this.Je(c);return!d||d.purpose==="TargetPurposeLimboResolution"||(u=!1,!1)}),u&&(r=r.add(i))}),this.ke.forEach((i,o)=>o.setReadTime(e));const s=new Pc(e,n,this.Qe,this.ke,r);return this.ke=or(),this.qe=f0(),this.Qe=new be(oe),s}$e(e,n){if(!this.ze(e))return;const r=this.it(e,n.key)?2:0;this.Ge(e).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(e))}Ue(e,n,r){if(!this.ze(e))return;const s=this.Ge(e);this.it(e,n)?s.Fe(n,1):s.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(e)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(e){this.Be.delete(e)}Ye(e){const n=this.Ge(e).ve();return this.Le.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}xe(e){this.Ge(e).xe()}Ge(e){let n=this.Be.get(e);return n||(n=new h0,this.Be.set(e,n)),n}st(e){let n=this.qe.get(e);return n||(n=new et(oe),this.qe=this.qe.insert(e,n)),n}ze(e){const n=this.Je(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}Je(e){const n=this.Be.get(e);return n&&n.Se?null:this.Le.ot(e)}je(e){this.Be.set(e,new h0),this.Le.getRemoteKeysForTarget(e).forEach(n=>{this.Ue(e,n,null)})}it(e,n){return this.Le.getRemoteKeysForTarget(e).has(n)}}function f0(){return new be(W.comparator)}function p0(){return new be(W.comparator)}const TR={asc:"ASCENDING",desc:"DESCENDING"},bR={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},IR={and:"AND",or:"OR"};class NR{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Nf(t,e){return t.useProto3Json||Tc(e)?e:{value:e}}function zu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tT(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function SR(t,e){return zu(t,e.toTimestamp())}function In(t){return le(!!t),X.fromTimestamp(function(n){const r=Br(n);return new $e(r.seconds,r.nanos)}(t))}function pm(t,e){return Sf(t,e).canonicalString()}function Sf(t,e){const n=function(s){return new fe(["projects",s.projectId,"databases",s.database])}(t).child("documents");return e===void 0?n:n.child(e)}function nT(t){const e=fe.fromString(t);return le(aT(e)),e}function Af(t,e){return pm(t.databaseId,e.path)}function eh(t,e){const n=nT(e);if(n.get(1)!==t.databaseId.projectId)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new z(M.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(sT(n))}function rT(t,e){return pm(t.databaseId,e)}function AR(t){const e=nT(t);return e.length===4?fe.emptyPath():sT(e)}function Pf(t){return new fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function sT(t){return le(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function m0(t,e,n){return{name:Af(t,e),fields:n.value.mapValue.fields}}function PR(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:Q()}(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],i=function(d,f){return d.useProto3Json?(le(f===void 0||typeof f=="string"),nt.fromBase64String(f||"")):(le(f===void 0||f instanceof Buffer||f instanceof Uint8Array),nt.fromUint8Array(f||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,u=o&&function(d){const f=d.code===void 0?M.UNKNOWN:JE(d.code);return new z(f,d.message||"")}(o);n=new eT(r,s,i,u||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const s=eh(t,r.document.name),i=In(r.document.updateTime),o=r.document.createTime?In(r.document.createTime):X.min(),u=new Ct({mapValue:{fields:r.document.fields}}),c=ft.newFoundDocument(s,i,o,u),d=r.targetIds||[],f=r.removedTargetIds||[];n=new tu(d,f,c.key,c)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const s=eh(t,r.document),i=r.readTime?In(r.readTime):X.min(),o=ft.newNoDocument(s,i),u=r.removedTargetIds||[];n=new tu([],u,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const s=eh(t,r.document),i=r.removedTargetIds||[];n=new tu([],i,s,null)}else{if(!("filter"in e))return Q();{e.filter;const r=e.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,o=new vR(s,i),u=r.targetId;n=new ZE(u,o)}}return n}function CR(t,e){let n;if(e instanceof Fa)n={update:m0(t,e.key,e.value)};else if(e instanceof XE)n={delete:Af(t,e.key)};else if(e instanceof Yr)n={update:m0(t,e.key,e.data),updateMask:UR(e.fieldMask)};else{if(!(e instanceof mR))return Q();n={verify:Af(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(i,o){const u=o.transform;if(u instanceof wa)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof Ri)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof $u)return{fieldPath:o.field.canonicalString(),increment:u.Pe};throw Q()}(0,r))),e.precondition.isNone||(n.currentDocument=function(s,i){return i.updateTime!==void 0?{updateTime:SR(s,i.updateTime)}:i.exists!==void 0?{exists:i.exists}:Q()}(t,e.precondition)),n}function kR(t,e){return t&&t.length>0?(le(e!==void 0),t.map(n=>function(s,i){let o=s.updateTime?In(s.updateTime):In(i);return o.isEqual(X.min())&&(o=In(i)),new hR(o,s.transformResults||[])}(n,e))):[]}function RR(t,e){return{documents:[rT(t,e.path)]}}function jR(t,e){const n={structuredQuery:{}},r=e.path;let s;e.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=rT(t,s);const i=function(d){if(d.length!==0)return oT(gn.create(d,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(d){if(d.length!==0)return d.map(f=>function(p){return{field:Hs(p.field),direction:LR(p.dir)}}(f))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const u=Nf(t,e.limit);return u!==null&&(n.structuredQuery.limit=u),e.startAt&&(n.structuredQuery.startAt=function(d){return{before:d.inclusive,values:d.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(d){return{before:!d.inclusive,values:d.position}}(e.endAt)),{_t:n,parent:s}}function OR(t){let e=AR(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){le(r===1);const f=n.from[0];f.allDescendants?s=f.collectionId:e=e.child(f.collectionId)}let i=[];n.where&&(i=function(g){const p=iT(g);return p instanceof gn&&OE(p)?p.getFilters():[p]}(n.where));let o=[];n.orderBy&&(o=function(g){return g.map(p=>function(N){return new xa(Ws(N.field),function(A){switch(A){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction))}(p))}(n.orderBy));let u=null;n.limit&&(u=function(g){let p;return p=typeof g=="object"?g.value:g,Tc(p)?null:p}(n.limit));let c=null;n.startAt&&(c=function(g){const p=!!g.before,E=g.values||[];return new ki(E,p)}(n.startAt));let d=null;return n.endAt&&(d=function(g){const p=!g.before,E=g.values||[];return new ki(E,p)}(n.endAt)),Z2(e,s,o,i,u,"F",c,d)}function DR(t,e){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Q()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function iT(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ws(n.unaryFilter.field);return Me.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=Ws(n.unaryFilter.field);return Me.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Ws(n.unaryFilter.field);return Me.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ws(n.unaryFilter.field);return Me.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Q()}}(t):t.fieldFilter!==void 0?function(n){return Me.create(Ws(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Q()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return gn.create(n.compositeFilter.filters.map(r=>iT(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return Q()}}(n.compositeFilter.op))}(t):Q()}function LR(t){return TR[t]}function MR(t){return bR[t]}function VR(t){return IR[t]}function Hs(t){return{fieldPath:t.canonicalString()}}function Ws(t){return Xe.fromServerFormat(t.fieldPath)}function oT(t){return t instanceof Me?function(n){if(n.op==="=="){if(t0(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NAN"}};if(e0(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(t0(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NAN"}};if(e0(n.value))return{unaryFilter:{field:Hs(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Hs(n.field),op:MR(n.op),value:n.value}}}(t):t instanceof gn?function(n){const r=n.getFilters().map(s=>oT(s));return r.length===1?r[0]:{compositeFilter:{op:VR(n.op),filters:r}}}(t):Q()}function UR(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function aT(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r,s,i=X.min(),o=X.min(),u=nt.EMPTY_BYTE_STRING,c=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u,this.expectedCount=c}withSequenceNumber(e){return new Sr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Sr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FR{constructor(e){this.ct=e}}function $R(t){const e=OR({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fu(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zR{constructor(){this.un=new BR}addToCollectionParentIndex(e,n){return this.un.add(n),U.resolve()}getCollectionParents(e,n){return U.resolve(this.un.getEntries(n))}addFieldIndex(e,n){return U.resolve()}deleteFieldIndex(e,n){return U.resolve()}deleteAllFieldIndexes(e){return U.resolve()}createTargetIndexes(e,n){return U.resolve()}getDocumentsMatchingTarget(e,n){return U.resolve(null)}getIndexType(e,n){return U.resolve(0)}getFieldIndexes(e,n){return U.resolve([])}getNextCollectionGroupToUpdate(e){return U.resolve(null)}getMinOffset(e,n){return U.resolve(zr.min())}getMinOffsetFromCollectionGroup(e,n){return U.resolve(zr.min())}updateCollectionGroup(e,n,r){return U.resolve()}updateIndexEntries(e,n){return U.resolve()}}class BR{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n]||new et(fe.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(e){const n=e.lastSegment(),r=e.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(e){return(this.index[e]||new et(fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new ji(0)}static kn(){return new ji(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qR{constructor(){this.changes=new Wi(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,ft.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?U.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HR{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WR{constructor(e,n,r,s){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(e,n))).next(s=>(r!==null&&Wo(r.mutation,s,Ft.empty(),$e.now()),s))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,te()).next(()=>r))}getLocalViewOfDocuments(e,n,r=te()){const s=cs();return this.populateOverlays(e,s,n).next(()=>this.computeViews(e,n,s,r).next(i=>{let o=Co();return i.forEach((u,c)=>{o=o.insert(u,c.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=cs();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,te()))}populateOverlays(e,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(e,s).next(i=>{i.forEach((o,u)=>{n.set(o,u)})})}computeViews(e,n,r,s){let i=or();const o=Ho(),u=function(){return Ho()}();return n.forEach((c,d)=>{const f=r.get(d.key);s.has(d.key)&&(f===void 0||f.mutation instanceof Yr)?i=i.insert(d.key,d):f!==void 0?(o.set(d.key,f.mutation.getFieldMask()),Wo(f.mutation,d,f.mutation.getFieldMask(),$e.now())):o.set(d.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,i).next(c=>(c.forEach((d,f)=>o.set(d,f)),n.forEach((d,f)=>{var g;return u.set(d,new HR(f,(g=o.get(d))!==null&&g!==void 0?g:null))}),u))}recalculateAndSaveOverlays(e,n){const r=Ho();let s=new be((o,u)=>o-u),i=te();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const u of o)u.keys().forEach(c=>{const d=n.get(c);if(d===null)return;let f=r.get(c)||Ft.empty();f=u.applyToLocalView(d,f),r.set(c,f);const g=(s.get(u.batchId)||te()).add(c);s=s.insert(u.batchId,g)})}).next(()=>{const o=[],u=s.getReverseIterator();for(;u.hasNext();){const c=u.getNext(),d=c.key,f=c.value,g=zE();f.forEach(p=>{if(!i.has(p)){const E=QE(n.get(p),r.get(p));E!==null&&g.set(p,E),i=i.add(p)}}),o.push(this.documentOverlayCache.saveOverlays(e,d,g))}return U.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,s){return function(o){return W.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):cm(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,s):this.getDocumentsMatchingCollectionQuery(e,n,r,s)}getNextDocuments(e,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,s).next(i=>{const o=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,s-i.size):U.resolve(cs());let u=-1,c=i;return o.next(d=>U.forEach(d,(f,g)=>(u<g.largestBatchId&&(u=g.largestBatchId),i.get(f)?U.resolve():this.remoteDocumentCache.getEntry(e,f).next(p=>{c=c.insert(f,p)}))).next(()=>this.populateOverlays(e,d,i)).next(()=>this.computeViews(e,c,d,te())).next(f=>({batchId:u,changes:$E(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let s=Co();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(e,n,r,s){const i=n.collectionGroup;let o=Co();return this.indexManager.getCollectionParents(e,i).next(u=>U.forEach(u,c=>{const d=function(g,p){return new Ds(p,null,g.explicitOrderBy.slice(),g.filters.slice(),g.limit,g.limitType,g.startAt,g.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(e,d,r,s).next(f=>{f.forEach((g,p)=>{o=o.insert(g,p)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i,s))).next(o=>{i.forEach((c,d)=>{const f=d.getKey();o.get(f)===null&&(o=o.insert(f,ft.newInvalidDocument(f)))});let u=Co();return o.forEach((c,d)=>{const f=i.get(c);f!==void 0&&Wo(f.mutation,d,Ft.empty(),$e.now()),Nc(n,d)&&(u=u.insert(c,d))}),u})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KR{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,n){return U.resolve(this.hr.get(n))}saveBundleMetadata(e,n){return this.hr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:In(s.createTime)}}(n)),U.resolve()}getNamedQuery(e,n){return U.resolve(this.Pr.get(n))}saveNamedQuery(e,n){return this.Pr.set(n.name,function(s){return{name:s.name,query:$R(s.bundledQuery),readTime:In(s.readTime)}}(n)),U.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(){this.overlays=new be(W.comparator),this.Ir=new Map}getOverlay(e,n){return U.resolve(this.overlays.get(n))}getOverlays(e,n){const r=cs();return U.forEach(n,s=>this.getOverlay(e,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((s,i)=>{this.ht(e,n,i)}),U.resolve()}removeOverlaysForBatchId(e,n,r){const s=this.Ir.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Ir.delete(r)),U.resolve()}getOverlaysForCollection(e,n,r){const s=cs(),i=n.length+1,o=new W(n.child("")),u=this.overlays.getIteratorFrom(o);for(;u.hasNext();){const c=u.getNext().value,d=c.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return U.resolve(s)}getOverlaysForCollectionGroup(e,n,r,s){let i=new be((d,f)=>d-f);const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let f=i.get(d.largestBatchId);f===null&&(f=cs(),i=i.insert(d.largestBatchId,f)),f.set(d.getKey(),d)}}const u=cs(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((d,f)=>u.set(d,f)),!(u.size()>=s)););return U.resolve(u)}ht(e,n,r){const s=this.overlays.get(r.key);if(s!==null){const o=this.Ir.get(s.largestBatchId).delete(r.key);this.Ir.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new yR(n,r));let i=this.Ir.get(n);i===void 0&&(i=te(),this.Ir.set(n,i)),this.Ir.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QR{constructor(){this.sessionToken=nt.EMPTY_BYTE_STRING}getSessionToken(e){return U.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,U.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.Tr=new et(ze.Er),this.dr=new et(ze.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,n){const r=new ze(e,n);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Vr(new ze(e,n))}mr(e,n){e.forEach(r=>this.removeReference(r,n))}gr(e){const n=new W(new fe([])),r=new ze(n,e),s=new ze(n,e+1),i=[];return this.dr.forEachInRange([r,s],o=>{this.Vr(o),i.push(o.key)}),i}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){const n=new W(new fe([])),r=new ze(n,e),s=new ze(n,e+1);let i=te();return this.dr.forEachInRange([r,s],o=>{i=i.add(o.key)}),i}containsKey(e){const n=new ze(e,0),r=this.Tr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class ze{constructor(e,n){this.key=e,this.wr=n}static Er(e,n){return W.comparator(e.key,n.key)||oe(e.wr,n.wr)}static Ar(e,n){return oe(e.wr,n.wr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YR{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Sr=1,this.br=new et(ze.Er)}checkEmpty(e){return U.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,s){const i=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new gR(i,n,r,s);this.mutationQueue.push(o);for(const u of s)this.br=this.br.add(new ze(u.key,i)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return U.resolve(o)}lookupMutationBatch(e,n){return U.resolve(this.Dr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,s=this.vr(r),i=s<0?0:s;return U.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return U.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return U.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new ze(n,0),s=new ze(n,Number.POSITIVE_INFINITY),i=[];return this.br.forEachInRange([r,s],o=>{const u=this.Dr(o.wr);i.push(u)}),U.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new et(oe);return n.forEach(s=>{const i=new ze(s,0),o=new ze(s,Number.POSITIVE_INFINITY);this.br.forEachInRange([i,o],u=>{r=r.add(u.wr)})}),U.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,s=r.length+1;let i=r;W.isDocumentKey(i)||(i=i.child(""));const o=new ze(new W(i),0);let u=new et(oe);return this.br.forEachWhile(c=>{const d=c.key.path;return!!r.isPrefixOf(d)&&(d.length===s&&(u=u.add(c.wr)),!0)},o),U.resolve(this.Cr(u))}Cr(e){const n=[];return e.forEach(r=>{const s=this.Dr(r);s!==null&&n.push(s)}),n}removeMutationBatch(e,n){le(this.Fr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return U.forEach(n.mutations,s=>{const i=new ze(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,n){const r=new ze(n,0),s=this.br.firstAfterOrEqual(r);return U.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,U.resolve()}Fr(e,n){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){const n=this.vr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XR{constructor(e){this.Mr=e,this.docs=function(){return new be(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,o=this.Mr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-i,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return U.resolve(r?r.document.mutableCopy():ft.newInvalidDocument(n))}getEntries(e,n){let r=or();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():ft.newInvalidDocument(s))}),U.resolve(r)}getDocumentsMatchingQuery(e,n,r,s){let i=or();const o=n.path,u=new W(o.child("")),c=this.docs.getIteratorFrom(u);for(;c.hasNext();){const{key:d,value:{document:f}}=c.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||O2(j2(f),r)<=0||(s.has(f.key)||Nc(n,f))&&(i=i.insert(f.key,f.mutableCopy()))}return U.resolve(i)}getAllFromCollectionGroup(e,n,r,s){Q()}Or(e,n){return U.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new JR(this)}getSize(e){return U.resolve(this.size)}}class JR extends qR{constructor(e){super(),this.cr=e}applyChanges(e){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.cr.addEntry(e,s)):this.cr.removeEntry(r)}),U.waitFor(n)}getFromCache(e,n){return this.cr.getEntry(e,n)}getAllFromCache(e,n){return this.cr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZR{constructor(e){this.persistence=e,this.Nr=new Wi(n=>am(n),lm),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Lr=0,this.Br=new mm,this.targetCount=0,this.kr=ji.Bn()}forEachTarget(e,n){return this.Nr.forEach((r,s)=>n(s)),U.resolve()}getLastRemoteSnapshotVersion(e){return U.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return U.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),U.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Lr&&(this.Lr=n),U.resolve()}Kn(e){this.Nr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.kr=new ji(n),this.highestTargetId=n),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,n){return this.Kn(n),this.targetCount+=1,U.resolve()}updateTargetData(e,n){return this.Kn(n),U.resolve()}removeTargetData(e,n){return this.Nr.delete(n.target),this.Br.gr(n.targetId),this.targetCount-=1,U.resolve()}removeTargets(e,n,r){let s=0;const i=[];return this.Nr.forEach((o,u)=>{u.sequenceNumber<=n&&r.get(u.targetId)===null&&(this.Nr.delete(o),i.push(this.removeMatchingKeysForTargetId(e,u.targetId)),s++)}),U.waitFor(i).next(()=>s)}getTargetCount(e){return U.resolve(this.targetCount)}getTargetData(e,n){const r=this.Nr.get(n)||null;return U.resolve(r)}addMatchingKeys(e,n,r){return this.Br.Rr(n,r),U.resolve()}removeMatchingKeys(e,n,r){this.Br.mr(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(o=>{i.push(s.markPotentiallyOrphaned(e,o))}),U.waitFor(i)}removeMatchingKeysForTargetId(e,n){return this.Br.gr(n),U.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Br.yr(n);return U.resolve(r)}containsKey(e,n){return U.resolve(this.Br.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ej{constructor(e,n){this.qr={},this.overlays={},this.Qr=new sm(0),this.Kr=!1,this.Kr=!0,this.$r=new QR,this.referenceDelegate=e(this),this.Ur=new ZR(this),this.indexManager=new zR,this.remoteDocumentCache=function(s){return new XR(s)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new FR(n),this.Gr=new KR(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new GR,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.qr[e.toKey()];return r||(r=new YR(n,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const s=new tj(this.Qr.next());return this.referenceDelegate.zr(),r(s).next(i=>this.referenceDelegate.jr(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Hr(e,n){return U.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,n)))}}class tj extends L2{constructor(e){super(),this.currentSequenceNumber=e}}class gm{constructor(e){this.persistence=e,this.Jr=new mm,this.Yr=null}static Zr(e){return new gm(e)}get Xr(){if(this.Yr)return this.Yr;throw Q()}addReference(e,n,r){return this.Jr.addReference(r,n),this.Xr.delete(r.toString()),U.resolve()}removeReference(e,n,r){return this.Jr.removeReference(r,n),this.Xr.add(r.toString()),U.resolve()}markPotentiallyOrphaned(e,n){return this.Xr.add(n.toString()),U.resolve()}removeTarget(e,n){this.Jr.gr(n.targetId).forEach(s=>this.Xr.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(s=>{s.forEach(i=>this.Xr.add(i.toString()))}).next(()=>r.removeTargetData(e,n))}zr(){this.Yr=new Set}jr(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return U.forEach(this.Xr,r=>{const s=W.fromPath(r);return this.ei(e,s).next(i=>{i||n.removeEntry(s,X.min())})}).next(()=>(this.Yr=null,n.apply(e)))}updateLimboDocument(e,n){return this.ei(e,n).next(r=>{r?this.Xr.delete(n.toString()):this.Xr.add(n.toString())})}Wr(e){return 0}ei(e,n){return U.or([()=>U.resolve(this.Jr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Hr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ym{constructor(e,n,r,s){this.targetId=e,this.fromCache=n,this.$i=r,this.Ui=s}static Wi(e,n){let r=te(),s=te();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new ym(e,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rj{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return $A()?8:M2(yt())>0?6:4}()}initialize(e,n){this.Ji=e,this.indexManager=n,this.Gi=!0}getDocumentsMatchingQuery(e,n,r,s){const i={result:null};return this.Yi(e,n).next(o=>{i.result=o}).next(()=>{if(!i.result)return this.Zi(e,n,s,r).next(o=>{i.result=o})}).next(()=>{if(i.result)return;const o=new nj;return this.Xi(e,n,o).next(u=>{if(i.result=u,this.zi)return this.es(e,n,o,u.size)})}).next(()=>i.result)}es(e,n,r,s){return r.documentReadCount<this.ji?(_o()<=ne.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",qs(n),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),U.resolve()):(_o()<=ne.DEBUG&&H("QueryEngine","Query:",qs(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.Hi*s?(_o()<=ne.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",qs(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,bn(n))):U.resolve())}Yi(e,n){if(i0(n))return U.resolve(null);let r=bn(n);return this.indexManager.getIndexType(e,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=Fu(n,null,"F"),r=bn(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(i=>{const o=te(...i);return this.Ji.getDocuments(e,o).next(u=>this.indexManager.getMinOffset(e,r).next(c=>{const d=this.ts(n,u);return this.ns(n,d,o,c.readTime)?this.Yi(e,Fu(n,null,"F")):this.rs(e,d,n,c)}))})))}Zi(e,n,r,s){return i0(n)||s.isEqual(X.min())?U.resolve(null):this.Ji.getDocuments(e,r).next(i=>{const o=this.ts(n,i);return this.ns(n,o,r,s)?U.resolve(null):(_o()<=ne.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),qs(n)),this.rs(e,o,n,R2(s,-1)).next(u=>u))})}ts(e,n){let r=new et(UE(e));return n.forEach((s,i)=>{Nc(e,i)&&(r=r.add(i))}),r}ns(e,n,r,s){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const i=e.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}Xi(e,n,r){return _o()<=ne.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",qs(n)),this.Ji.getDocumentsMatchingQuery(e,n,zr.min(),r)}rs(e,n,r,s){return this.Ji.getDocumentsMatchingQuery(e,r,s).next(i=>(n.forEach(o=>{i=i.insert(o.key,o)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sj{constructor(e,n,r,s){this.persistence=e,this.ss=n,this.serializer=s,this.os=new be(oe),this._s=new Wi(i=>am(i),lm),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new WR(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.os))}}function ij(t,e,n,r){return new sj(t,e,n,r)}async function lT(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.ls(e),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const o=[],u=[];let c=te();for(const d of s){o.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}for(const d of i){u.push(d.batchId);for(const f of d.mutations)c=c.add(f.key)}return n.localDocuments.getDocuments(r,c).next(d=>({hs:d,removedBatchIds:o,addedBatchIds:u}))})})}function oj(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const s=e.batch.keys(),i=n.cs.newChangeBuffer({trackRemovals:!0});return function(u,c,d,f){const g=d.batch,p=g.keys();let E=U.resolve();return p.forEach(N=>{E=E.next(()=>f.getEntry(c,N)).next(T=>{const A=d.docVersions.get(N);le(A!==null),T.version.compareTo(A)<0&&(g.applyToRemoteDocument(T,d),T.isValidDocument()&&(T.setReadTime(d.commitVersion),f.addEntry(T)))})}),E.next(()=>u.mutationQueue.removeMutationBatch(c,g))}(n,r,e,i).next(()=>i.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,s,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let c=te();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(c=c.add(u.batch.mutations[d].key));return c}(e))).next(()=>n.localDocuments.getDocuments(r,s))})}function uT(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Ur.getLastRemoteSnapshotVersion(n))}function aj(t,e){const n=J(t),r=e.snapshotVersion;let s=n.os;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const o=n.cs.newChangeBuffer({trackRemovals:!0});s=n.os;const u=[];e.targetChanges.forEach((f,g)=>{const p=s.get(g);if(!p)return;u.push(n.Ur.removeMatchingKeys(i,f.removedDocuments,g).next(()=>n.Ur.addMatchingKeys(i,f.addedDocuments,g)));let E=p.withSequenceNumber(i.currentSequenceNumber);e.targetMismatches.get(g)!==null?E=E.withResumeToken(nt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):f.resumeToken.approximateByteSize()>0&&(E=E.withResumeToken(f.resumeToken,r)),s=s.insert(g,E),function(T,A,w){return T.resumeToken.approximateByteSize()===0||A.snapshotVersion.toMicroseconds()-T.snapshotVersion.toMicroseconds()>=3e8?!0:w.addedDocuments.size+w.modifiedDocuments.size+w.removedDocuments.size>0}(p,E,f)&&u.push(n.Ur.updateTargetData(i,E))});let c=or(),d=te();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&u.push(n.persistence.referenceDelegate.updateLimboDocument(i,f))}),u.push(lj(i,o,e.documentUpdates).next(f=>{c=f.Ps,d=f.Is})),!r.isEqual(X.min())){const f=n.Ur.getLastRemoteSnapshotVersion(i).next(g=>n.Ur.setTargetsMetadata(i,i.currentSequenceNumber,r));u.push(f)}return U.waitFor(u).next(()=>o.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,d)).next(()=>c)}).then(i=>(n.os=s,i))}function lj(t,e,n){let r=te(),s=te();return n.forEach(i=>r=r.add(i)),e.getEntries(t,r).next(i=>{let o=or();return n.forEach((u,c)=>{const d=i.get(u);c.isFoundDocument()!==d.isFoundDocument()&&(s=s.add(u)),c.isNoDocument()&&c.version.isEqual(X.min())?(e.removeEntry(u,c.readTime),o=o.insert(u,c)):!d.isValidDocument()||c.version.compareTo(d.version)>0||c.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(c),o=o.insert(u,c)):H("LocalStore","Ignoring outdated watch update for ",u,". Current version:",d.version," Watch version:",c.version)}),{Ps:o,Is:s}})}function uj(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function cj(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.Ur.getTargetData(r,e).next(i=>i?(s=i,U.resolve(s)):n.Ur.allocateTargetId(r).next(o=>(s=new Sr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Ur.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.os.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.os=n.os.insert(r.targetId,r),n._s.set(e,r.targetId)),r})}async function Cf(t,e,n){const r=J(t),s=r.os.get(e),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,o=>r.persistence.referenceDelegate.removeTarget(o,s))}catch(o){if(!Ua(o))throw o;H("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.os=r.os.remove(e),r._s.delete(s.target)}function g0(t,e,n){const r=J(t);let s=X.min(),i=te();return r.persistence.runTransaction("Execute query","readwrite",o=>function(c,d,f){const g=J(c),p=g._s.get(f);return p!==void 0?U.resolve(g.os.get(p)):g.Ur.getTargetData(d,f)}(r,o,bn(e)).next(u=>{if(u)return s=u.lastLimboFreeSnapshotVersion,r.Ur.getMatchingKeysForTargetId(o,u.targetId).next(c=>{i=c})}).next(()=>r.ss.getDocumentsMatchingQuery(o,e,n?s:X.min(),n?i:te())).next(u=>(dj(r,tR(e),u),{documents:u,Ts:i})))}function dj(t,e,n){let r=t.us.get(e)||X.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),t.us.set(e,r)}class y0{constructor(){this.activeTargetIds=aR()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class hj{constructor(){this.so=new y0,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,n,r){this.oo[e]=n}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new y0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fj{_o(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v0{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){H("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.ho)e(0)}lo(){H("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ol=null;function th(){return Ol===null?Ol=function(){return 268435456+Math.round(2147483648*Math.random())}():Ol++,"0x"+Ol.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pj={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lt="WebChannelConnection";class gj extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+n.host,this.vo=`projects/${s}/databases/${i}`,this.Co=this.databaseId.database==="(default)"?`project_id=${s}`:`project_id=${s}&database_id=${i}`}get Fo(){return!1}Mo(n,r,s,i,o){const u=th(),c=this.xo(n,r.toUriEncodedString());H("RestConnection",`Sending RPC '${n}' ${u}:`,c,s);const d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,i,o),this.No(n,c,d,s).then(f=>(H("RestConnection",`Received RPC '${n}' ${u}: `,f),f),f=>{throw Si("RestConnection",`RPC '${n}' ${u} failed with error: `,f,"url: ",c,"request:",s),f})}Lo(n,r,s,i,o,u){return this.Mo(n,r,s,i,o)}Oo(n,r,s){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Hi}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((i,o)=>n[o]=i),s&&s.headers.forEach((i,o)=>n[o]=i)}xo(n,r){const s=pj[n];return`${this.Do}/v1/${r}:${s}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,n,r,s){const i=th();return new Promise((o,u)=>{const c=new EE;c.setWithCredentials(!0),c.listenOnce(TE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case Jl.NO_ERROR:const f=c.getResponseJson();H(lt,`XHR for RPC '${e}' ${i} received:`,JSON.stringify(f)),o(f);break;case Jl.TIMEOUT:H(lt,`RPC '${e}' ${i} timed out`),u(new z(M.DEADLINE_EXCEEDED,"Request time out"));break;case Jl.HTTP_ERROR:const g=c.getStatus();if(H(lt,`RPC '${e}' ${i} failed with status:`,g,"response text:",c.getResponseText()),g>0){let p=c.getResponseJson();Array.isArray(p)&&(p=p[0]);const E=p==null?void 0:p.error;if(E&&E.status&&E.message){const N=function(A){const w=A.toLowerCase().replace(/_/g,"-");return Object.values(M).indexOf(w)>=0?w:M.UNKNOWN}(E.status);u(new z(N,E.message))}else u(new z(M.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new z(M.UNAVAILABLE,"Connection failed."));break;default:Q()}}finally{H(lt,`RPC '${e}' ${i} completed.`)}});const d=JSON.stringify(s);H(lt,`RPC '${e}' ${i} sending request:`,s),c.send(n,"POST",d,r,15)})}Bo(e,n,r){const s=th(),i=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=NE(),u=IE(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(c.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Oo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const f=i.join("");H(lt,`Creating RPC '${e}' stream ${s}: ${f}`,c);const g=o.createWebChannel(f,c);let p=!1,E=!1;const N=new mj({Io:A=>{E?H(lt,`Not sending because RPC '${e}' stream ${s} is closed:`,A):(p||(H(lt,`Opening RPC '${e}' stream ${s} transport.`),g.open(),p=!0),H(lt,`RPC '${e}' stream ${s} sending:`,A),g.send(A))},To:()=>g.close()}),T=(A,w,x)=>{A.listen(w,y=>{try{x(y)}catch(C){setTimeout(()=>{throw C},0)}})};return T(g,Po.EventType.OPEN,()=>{E||(H(lt,`RPC '${e}' stream ${s} transport opened.`),N.yo())}),T(g,Po.EventType.CLOSE,()=>{E||(E=!0,H(lt,`RPC '${e}' stream ${s} transport closed`),N.So())}),T(g,Po.EventType.ERROR,A=>{E||(E=!0,Si(lt,`RPC '${e}' stream ${s} transport errored:`,A),N.So(new z(M.UNAVAILABLE,"The operation could not be completed")))}),T(g,Po.EventType.MESSAGE,A=>{var w;if(!E){const x=A.data[0];le(!!x);const y=x,C=y.error||((w=y[0])===null||w===void 0?void 0:w.error);if(C){H(lt,`RPC '${e}' stream ${s} received error:`,C);const L=C.status;let V=function(S){const b=Oe[S];if(b!==void 0)return JE(b)}(L),I=C.message;V===void 0&&(V=M.INTERNAL,I="Unknown error status: "+L+" with message "+C.message),E=!0,N.So(new z(V,I)),g.close()}else H(lt,`RPC '${e}' stream ${s} received:`,x),N.bo(x)}}),T(u,bE.STAT_EVENT,A=>{A.stat===xf.PROXY?H(lt,`RPC '${e}' stream ${s} detected buffering proxy`):A.stat===xf.NOPROXY&&H(lt,`RPC '${e}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{N.wo()},0),N}}function nh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cc(t){return new NR(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cT{constructor(e,n,r=1e3,s=1.5,i=6e4){this.ui=e,this.timerId=n,this.ko=r,this.qo=s,this.Qo=i,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();const n=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),s=Math.max(0,n-r);s>0&&H("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.Ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,s,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(e,n,r,s,i,o,u,c){this.ui=e,this.Ho=r,this.Jo=s,this.connection=i,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=c,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new cT(e,n)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}async stop(){this.n_()&&await this.close(0)}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}async __(){if(this.r_())return this.close(0)}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}async close(e,n){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():n&&n.code===M.RESOURCE_EXHAUSTED?(ir(n.toString()),ir("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):n&&n.code===M.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.mo(n)}l_(){}auth(){this.state=1;const e=this.h_(this.Yo),n=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.Yo===n&&this.P_(r,s)},r=>{e(()=>{const s=new z(M.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(s)})})}P_(e,n){const r=this.h_(this.Yo);this.stream=this.T_(e,n),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(s=>{r(()=>this.I_(s))}),this.stream.onMessage(s=>{r(()=>++this.e_==1?this.E_(s):this.onNext(s))})}i_(){this.state=5,this.t_.Go(async()=>{this.state=0,this.start()})}I_(e){return H("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return n=>{this.ui.enqueueAndForget(()=>this.Yo===e?n():(H("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class yj extends dT{constructor(e,n,r,s,i,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}T_(e,n){return this.connection.Bo("Listen",e,n)}E_(e){return this.onNext(e)}onNext(e){this.t_.reset();const n=PR(this.serializer,e),r=function(i){if(!("targetChange"in i))return X.min();const o=i.targetChange;return o.targetIds&&o.targetIds.length?X.min():o.readTime?In(o.readTime):X.min()}(e);return this.listener.d_(n,r)}A_(e){const n={};n.database=Pf(this.serializer),n.addTarget=function(i,o){let u;const c=o.target;if(u=bf(c)?{documents:RR(i,c)}:{query:jR(i,c)._t},u.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){u.resumeToken=tT(i,o.resumeToken);const d=Nf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}else if(o.snapshotVersion.compareTo(X.min())>0){u.readTime=zu(i,o.snapshotVersion.toTimestamp());const d=Nf(i,o.expectedCount);d!==null&&(u.expectedCount=d)}return u}(this.serializer,e);const r=DR(this.serializer,e);r&&(n.labels=r),this.a_(n)}R_(e){const n={};n.database=Pf(this.serializer),n.removeTarget=e,this.a_(n)}}class vj extends dT{constructor(e,n,r,s,i,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,s,o),this.serializer=i}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,n){return this.connection.Bo("Write",e,n)}E_(e){return le(!!e.streamToken),this.lastStreamToken=e.streamToken,le(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){le(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();const n=kR(e.writeResults,e.commitTime),r=In(e.commitTime);return this.listener.g_(r,n)}p_(){const e={};e.database=Pf(this.serializer),this.a_(e)}m_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>CR(this.serializer,r))};this.a_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _j extends class{}{constructor(e,n,r,s){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.y_=!1}w_(){if(this.y_)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,n,r,s){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.Mo(e,Sf(n,r),s,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new z(M.UNKNOWN,i.toString())})}Lo(e,n,r,s,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.Lo(e,Sf(n,r),s,o,u,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===M.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new z(M.UNKNOWN,o.toString())})}terminate(){this.y_=!0,this.connection.terminate()}}class xj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(ir(n),this.D_=!1):H("OnlineStateTracker",n)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wj{constructor(e,n,r,s,i){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=i,this.k_._o(o=>{r.enqueueAndForget(async()=>{Ls(this)&&(H("RemoteStore","Restarting streams for network reachability change."),await async function(c){const d=J(c);d.L_.add(4),await za(d),d.q_.set("Unknown"),d.L_.delete(4),await kc(d)}(this))})}),this.q_=new xj(r,s)}}async function kc(t){if(Ls(t))for(const e of t.B_)await e(!0)}async function za(t){for(const e of t.B_)await e(!1)}function hT(t,e){const n=J(t);n.N_.has(e.targetId)||(n.N_.set(e.targetId,e),wm(n)?xm(n):Ki(n).r_()&&_m(n,e))}function vm(t,e){const n=J(t),r=Ki(n);n.N_.delete(e),r.r_()&&fT(n,e),n.N_.size===0&&(r.r_()?r.o_():Ls(n)&&n.q_.set("Unknown"))}function _m(t,e){if(t.Q_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(X.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ki(t).A_(e)}function fT(t,e){t.Q_.xe(e),Ki(t).R_(e)}function xm(t){t.Q_=new ER({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ot:e=>t.N_.get(e)||null,tt:()=>t.datastore.serializer.databaseId}),Ki(t).start(),t.q_.v_()}function wm(t){return Ls(t)&&!Ki(t).n_()&&t.N_.size>0}function Ls(t){return J(t).L_.size===0}function pT(t){t.Q_=void 0}async function Ej(t){t.q_.set("Online")}async function Tj(t){t.N_.forEach((e,n)=>{_m(t,e)})}async function bj(t,e){pT(t),wm(t)?(t.q_.M_(e),xm(t)):t.q_.set("Unknown")}async function Ij(t,e,n){if(t.q_.set("Online"),e instanceof eT&&e.state===2&&e.cause)try{await async function(s,i){const o=i.cause;for(const u of i.targetIds)s.N_.has(u)&&(await s.remoteSyncer.rejectListen(u,o),s.N_.delete(u),s.Q_.removeTarget(u))}(t,e)}catch(r){H("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Bu(t,r)}else if(e instanceof tu?t.Q_.Ke(e):e instanceof ZE?t.Q_.He(e):t.Q_.We(e),!n.isEqual(X.min()))try{const r=await uT(t.localStore);n.compareTo(r)>=0&&await function(i,o){const u=i.Q_.rt(o);return u.targetChanges.forEach((c,d)=>{if(c.resumeToken.approximateByteSize()>0){const f=i.N_.get(d);f&&i.N_.set(d,f.withResumeToken(c.resumeToken,o))}}),u.targetMismatches.forEach((c,d)=>{const f=i.N_.get(c);if(!f)return;i.N_.set(c,f.withResumeToken(nt.EMPTY_BYTE_STRING,f.snapshotVersion)),fT(i,c);const g=new Sr(f.target,c,d,f.sequenceNumber);_m(i,g)}),i.remoteSyncer.applyRemoteEvent(u)}(t,n)}catch(r){H("RemoteStore","Failed to raise snapshot:",r),await Bu(t,r)}}async function Bu(t,e,n){if(!Ua(e))throw e;t.L_.add(1),await za(t),t.q_.set("Offline"),n||(n=()=>uT(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H("RemoteStore","Retrying IndexedDB access"),await n(),t.L_.delete(1),await kc(t)})}function mT(t,e){return e().catch(n=>Bu(t,n,e))}async function Rc(t){const e=J(t),n=qr(e);let r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;Nj(e);)try{const s=await uj(e.localStore,r);if(s===null){e.O_.length===0&&n.o_();break}r=s.batchId,Sj(e,s)}catch(s){await Bu(e,s)}gT(e)&&yT(e)}function Nj(t){return Ls(t)&&t.O_.length<10}function Sj(t,e){t.O_.push(e);const n=qr(t);n.r_()&&n.V_&&n.m_(e.mutations)}function gT(t){return Ls(t)&&!qr(t).n_()&&t.O_.length>0}function yT(t){qr(t).start()}async function Aj(t){qr(t).p_()}async function Pj(t){const e=qr(t);for(const n of t.O_)e.m_(n.mutations)}async function Cj(t,e,n){const r=t.O_.shift(),s=hm.from(r,e,n);await mT(t,()=>t.remoteSyncer.applySuccessfulWrite(s)),await Rc(t)}async function kj(t,e){e&&qr(t).V_&&await async function(r,s){if(function(o){return _R(o)&&o!==M.ABORTED}(s.code)){const i=r.O_.shift();qr(r).s_(),await mT(r,()=>r.remoteSyncer.rejectFailedWrite(i.batchId,s)),await Rc(r)}}(t,e),gT(t)&&yT(t)}async function _0(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H("RemoteStore","RemoteStore received new credentials");const r=Ls(n);n.L_.add(3),await za(n),r&&n.q_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.L_.delete(3),await kc(n)}async function Rj(t,e){const n=J(t);e?(n.L_.delete(2),await kc(n)):e||(n.L_.add(2),await za(n),n.q_.set("Unknown"))}function Ki(t){return t.K_||(t.K_=function(n,r,s){const i=J(n);return i.w_(),new yj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:Ej.bind(null,t),Ro:Tj.bind(null,t),mo:bj.bind(null,t),d_:Ij.bind(null,t)}),t.B_.push(async e=>{e?(t.K_.s_(),wm(t)?xm(t):t.q_.set("Unknown")):(await t.K_.stop(),pT(t))})),t.K_}function qr(t){return t.U_||(t.U_=function(n,r,s){const i=J(n);return i.w_(),new vj(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(t.datastore,t.asyncQueue,{Eo:()=>Promise.resolve(),Ro:Aj.bind(null,t),mo:kj.bind(null,t),f_:Pj.bind(null,t),g_:Cj.bind(null,t)}),t.B_.push(async e=>{e?(t.U_.s_(),await Rc(t)):(await t.U_.stop(),t.O_.length>0&&(H("RemoteStore",`Stopping write stream with ${t.O_.length} pending writes`),t.O_=[]))})),t.U_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Em{constructor(e,n,r,s,i){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new Jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,s,i){const o=Date.now()+r,u=new Em(e,n,o,s,i);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new z(M.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Tm(t,e){if(ir("AsyncQueue",`${e}: ${t}`),Ua(t))return new z(M.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vi{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=Co(),this.sortedSet=new be(this.comparator)}static emptySet(e){return new vi(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof vi)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new vi;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.W_=new be(W.comparator)}track(e){const n=e.doc.key,r=this.W_.get(n);r?e.type!==0&&r.type===3?this.W_=this.W_.insert(n,e):e.type===3&&r.type!==1?this.W_=this.W_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.W_=this.W_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.W_=this.W_.remove(n):e.type===1&&r.type===2?this.W_=this.W_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.W_=this.W_.insert(n,{type:2,doc:e.doc}):Q():this.W_=this.W_.insert(n,e)}G_(){const e=[];return this.W_.inorderTraversal((n,r)=>{e.push(r)}),e}}class Oi{constructor(e,n,r,s,i,o,u,c,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=c,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,s,i){const o=[];return n.forEach(u=>{o.push({type:0,doc:u})}),new Oi(e,n,vi.emptySet(n),o,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ic(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj{constructor(){this.z_=void 0,this.j_=[]}H_(){return this.j_.some(e=>e.J_())}}class Oj{constructor(){this.queries=w0(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(n,r){const s=J(n),i=s.queries;s.queries=w0(),i.forEach((o,u)=>{for(const c of u.j_)c.onError(r)})})(this,new z(M.ABORTED,"Firestore shutting down"))}}function w0(){return new Wi(t=>VE(t),Ic)}async function vT(t,e){const n=J(t);let r=3;const s=e.query;let i=n.queries.get(s);i?!i.H_()&&e.J_()&&(r=2):(i=new jj,r=e.J_()?0:1);try{switch(r){case 0:i.z_=await n.onListen(s,!0);break;case 1:i.z_=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(o){const u=Tm(o,`Initialization of query '${qs(e.query)}' failed`);return void e.onError(u)}n.queries.set(s,i),i.j_.push(e),e.Z_(n.onlineState),i.z_&&e.X_(i.z_)&&bm(n)}async function _T(t,e){const n=J(t),r=e.query;let s=3;const i=n.queries.get(r);if(i){const o=i.j_.indexOf(e);o>=0&&(i.j_.splice(o,1),i.j_.length===0?s=e.J_()?0:1:!i.H_()&&e.J_()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Dj(t,e){const n=J(t);let r=!1;for(const s of e){const i=s.query,o=n.queries.get(i);if(o){for(const u of o.j_)u.X_(s)&&(r=!0);o.z_=s}}r&&bm(n)}function Lj(t,e,n){const r=J(t),s=r.queries.get(e);if(s)for(const i of s.j_)i.onError(n);r.queries.delete(e)}function bm(t){t.Y_.forEach(e=>{e.next()})}var kf,E0;(E0=kf||(kf={})).ea="default",E0.Cache="cache";class xT{constructor(e,n,r){this.query=e,this.ta=n,this.na=!1,this.ra=null,this.onlineState="Unknown",this.options=r||{}}X_(e){if(!this.options.includeMetadataChanges){const r=[];for(const s of e.docChanges)s.type!==3&&r.push(s);e=new Oi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.na?this.ia(e)&&(this.ta.next(e),n=!0):this.sa(e,this.onlineState)&&(this.oa(e),n=!0),this.ra=e,n}onError(e){this.ta.error(e)}Z_(e){this.onlineState=e;let n=!1;return this.ra&&!this.na&&this.sa(this.ra,e)&&(this.oa(this.ra),n=!0),n}sa(e,n){if(!e.fromCache||!this.J_())return!0;const r=n!=="Offline";return(!this.options._a||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}ia(e){if(e.docChanges.length>0)return!0;const n=this.ra&&this.ra.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}oa(e){e=Oi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.na=!0,this.ta.next(e)}J_(){return this.options.source!==kf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wT{constructor(e){this.key=e}}class ET{constructor(e){this.key=e}}class Mj{constructor(e,n){this.query=e,this.Ta=n,this.Ea=null,this.hasCachedResults=!1,this.current=!1,this.da=te(),this.mutatedKeys=te(),this.Aa=UE(e),this.Ra=new vi(this.Aa)}get Va(){return this.Ta}ma(e,n){const r=n?n.fa:new x0,s=n?n.Ra:this.Ra;let i=n?n.mutatedKeys:this.mutatedKeys,o=s,u=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,d=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal((f,g)=>{const p=s.get(f),E=Nc(this.query,g)?g:null,N=!!p&&this.mutatedKeys.has(p.key),T=!!E&&(E.hasLocalMutations||this.mutatedKeys.has(E.key)&&E.hasCommittedMutations);let A=!1;p&&E?p.data.isEqual(E.data)?N!==T&&(r.track({type:3,doc:E}),A=!0):this.ga(p,E)||(r.track({type:2,doc:E}),A=!0,(c&&this.Aa(E,c)>0||d&&this.Aa(E,d)<0)&&(u=!0)):!p&&E?(r.track({type:0,doc:E}),A=!0):p&&!E&&(r.track({type:1,doc:p}),A=!0,(c||d)&&(u=!0)),A&&(E?(o=o.add(E),i=T?i.add(f):i.delete(f)):(o=o.delete(f),i=i.delete(f)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const f=this.query.limitType==="F"?o.last():o.first();o=o.delete(f.key),i=i.delete(f.key),r.track({type:1,doc:f})}return{Ra:o,fa:r,ns:u,mutatedKeys:i}}ga(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,s){const i=this.Ra;this.Ra=e.Ra,this.mutatedKeys=e.mutatedKeys;const o=e.fa.G_();o.sort((f,g)=>function(E,N){const T=A=>{switch(A){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Q()}};return T(E)-T(N)}(f.type,g.type)||this.Aa(f.doc,g.doc)),this.pa(r),s=s!=null&&s;const u=n&&!s?this.ya():[],c=this.da.size===0&&this.current&&!s?1:0,d=c!==this.Ea;return this.Ea=c,o.length!==0||d?{snapshot:new Oi(this.query,e.Ra,i,o,e.mutatedKeys,c===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),wa:u}:{wa:u}}Z_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({Ra:this.Ra,fa:new x0,mutatedKeys:this.mutatedKeys,ns:!1},!1)):{wa:[]}}Sa(e){return!this.Ta.has(e)&&!!this.Ra.has(e)&&!this.Ra.get(e).hasLocalMutations}pa(e){e&&(e.addedDocuments.forEach(n=>this.Ta=this.Ta.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ta=this.Ta.delete(n)),this.current=e.current)}ya(){if(!this.current)return[];const e=this.da;this.da=te(),this.Ra.forEach(r=>{this.Sa(r.key)&&(this.da=this.da.add(r.key))});const n=[];return e.forEach(r=>{this.da.has(r)||n.push(new ET(r))}),this.da.forEach(r=>{e.has(r)||n.push(new wT(r))}),n}ba(e){this.Ta=e.Ts,this.da=te();const n=this.ma(e.documents);return this.applyChanges(n,!0)}Da(){return Oi.fromInitialDocuments(this.query,this.Ra,this.mutatedKeys,this.Ea===0,this.hasCachedResults)}}class Vj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Uj{constructor(e){this.key=e,this.va=!1}}class Fj{constructor(e,n,r,s,i,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.Ca={},this.Fa=new Wi(u=>VE(u),Ic),this.Ma=new Map,this.xa=new Set,this.Oa=new be(W.comparator),this.Na=new Map,this.La=new mm,this.Ba={},this.ka=new Map,this.qa=ji.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}}async function $j(t,e,n=!0){const r=AT(t);let s;const i=r.Fa.get(e);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.Da()):s=await TT(r,e,n,!0),s}async function zj(t,e){const n=AT(t);await TT(n,e,!0,!1)}async function TT(t,e,n,r){const s=await cj(t.localStore,bn(e)),i=s.targetId,o=t.sharedClientState.addLocalQueryTarget(i,n);let u;return r&&(u=await Bj(t,e,i,o==="current",s.resumeToken)),t.isPrimaryClient&&n&&hT(t.remoteStore,s),u}async function Bj(t,e,n,r,s){t.Ka=(g,p,E)=>async function(T,A,w,x){let y=A.view.ma(w);y.ns&&(y=await g0(T.localStore,A.query,!1).then(({documents:I})=>A.view.ma(I,y)));const C=x&&x.targetChanges.get(A.targetId),L=x&&x.targetMismatches.get(A.targetId)!=null,V=A.view.applyChanges(y,T.isPrimaryClient,C,L);return b0(T,A.targetId,V.wa),V.snapshot}(t,g,p,E);const i=await g0(t.localStore,e,!0),o=new Mj(e,i.Ts),u=o.ma(i.documents),c=$a.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",s),d=o.applyChanges(u,t.isPrimaryClient,c);b0(t,n,d.wa);const f=new Vj(e,n,o);return t.Fa.set(e,f),t.Ma.has(n)?t.Ma.get(n).push(e):t.Ma.set(n,[e]),d.snapshot}async function qj(t,e,n){const r=J(t),s=r.Fa.get(e),i=r.Ma.get(s.targetId);if(i.length>1)return r.Ma.set(s.targetId,i.filter(o=>!Ic(o,e))),void r.Fa.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Cf(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&vm(r.remoteStore,s.targetId),Rf(r,s.targetId)}).catch(Va)):(Rf(r,s.targetId),await Cf(r.localStore,s.targetId,!0))}async function Hj(t,e){const n=J(t),r=n.Fa.get(e),s=n.Ma.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),vm(n.remoteStore,r.targetId))}async function Wj(t,e,n){const r=Zj(t);try{const s=await function(o,u){const c=J(o),d=$e.now(),f=u.reduce((E,N)=>E.add(N.key),te());let g,p;return c.persistence.runTransaction("Locally write mutations","readwrite",E=>{let N=or(),T=te();return c.cs.getEntries(E,f).next(A=>{N=A,N.forEach((w,x)=>{x.isValidDocument()||(T=T.add(w))})}).next(()=>c.localDocuments.getOverlayedDocuments(E,N)).next(A=>{g=A;const w=[];for(const x of u){const y=pR(x,g.get(x.key).overlayedDocument);y!=null&&w.push(new Yr(x.key,y,kE(y.value.mapValue),fn.exists(!0)))}return c.mutationQueue.addMutationBatch(E,d,w,u)}).next(A=>{p=A;const w=A.applyToLocalDocumentSet(g,T);return c.documentOverlayCache.saveOverlays(E,A.batchId,w)})}).then(()=>({batchId:p.batchId,changes:$E(g)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(s.batchId),function(o,u,c){let d=o.Ba[o.currentUser.toKey()];d||(d=new be(oe)),d=d.insert(u,c),o.Ba[o.currentUser.toKey()]=d}(r,s.batchId,n),await Ba(r,s.changes),await Rc(r.remoteStore)}catch(s){const i=Tm(s,"Failed to persist write");n.reject(i)}}async function bT(t,e){const n=J(t);try{const r=await aj(n.localStore,e);e.targetChanges.forEach((s,i)=>{const o=n.Na.get(i);o&&(le(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1),s.addedDocuments.size>0?o.va=!0:s.modifiedDocuments.size>0?le(o.va):s.removedDocuments.size>0&&(le(o.va),o.va=!1))}),await Ba(n,r,e)}catch(r){await Va(r)}}function T0(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.Fa.forEach((i,o)=>{const u=o.view.Z_(e);u.snapshot&&s.push(u.snapshot)}),function(o,u){const c=J(o);c.onlineState=u;let d=!1;c.queries.forEach((f,g)=>{for(const p of g.j_)p.Z_(u)&&(d=!0)}),d&&bm(c)}(r.eventManager,e),s.length&&r.Ca.d_(s),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Kj(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const s=r.Na.get(e),i=s&&s.key;if(i){let o=new be(W.comparator);o=o.insert(i,ft.newNoDocument(i,X.min()));const u=te().add(i),c=new Pc(X.min(),new Map,new be(oe),o,u);await bT(r,c),r.Oa=r.Oa.remove(i),r.Na.delete(e),Im(r)}else await Cf(r.localStore,e,!1).then(()=>Rf(r,e,n)).catch(Va)}async function Gj(t,e){const n=J(t),r=e.batch.batchId;try{const s=await oj(n.localStore,e);NT(n,r,null),IT(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ba(n,s)}catch(s){await Va(s)}}async function Qj(t,e,n){const r=J(t);try{const s=await function(o,u){const c=J(o);return c.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let f;return c.mutationQueue.lookupMutationBatch(d,u).next(g=>(le(g!==null),f=g.keys(),c.mutationQueue.removeMutationBatch(d,g))).next(()=>c.mutationQueue.performConsistencyCheck(d)).next(()=>c.documentOverlayCache.removeOverlaysForBatchId(d,f,u)).next(()=>c.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,f)).next(()=>c.localDocuments.getDocuments(d,f))})}(r.localStore,e);NT(r,e,n),IT(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ba(r,s)}catch(s){await Va(s)}}function IT(t,e){(t.ka.get(e)||[]).forEach(n=>{n.resolve()}),t.ka.delete(e)}function NT(t,e,n){const r=J(t);let s=r.Ba[r.currentUser.toKey()];if(s){const i=s.get(e);i&&(n?i.reject(n):i.resolve(),s=s.remove(e)),r.Ba[r.currentUser.toKey()]=s}}function Rf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Ma.get(e))t.Fa.delete(r),n&&t.Ca.$a(r,n);t.Ma.delete(e),t.isPrimaryClient&&t.La.gr(e).forEach(r=>{t.La.containsKey(r)||ST(t,r)})}function ST(t,e){t.xa.delete(e.path.canonicalString());const n=t.Oa.get(e);n!==null&&(vm(t.remoteStore,n),t.Oa=t.Oa.remove(e),t.Na.delete(n),Im(t))}function b0(t,e,n){for(const r of n)r instanceof wT?(t.La.addReference(r.key,e),Yj(t,r)):r instanceof ET?(H("SyncEngine","Document no longer in limbo: "+r.key),t.La.removeReference(r.key,e),t.La.containsKey(r.key)||ST(t,r.key)):Q()}function Yj(t,e){const n=e.key,r=n.path.canonicalString();t.Oa.get(n)||t.xa.has(r)||(H("SyncEngine","New document in limbo: "+n),t.xa.add(r),Im(t))}function Im(t){for(;t.xa.size>0&&t.Oa.size<t.maxConcurrentLimboResolutions;){const e=t.xa.values().next().value;t.xa.delete(e);const n=new W(fe.fromString(e)),r=t.qa.next();t.Na.set(r,new Uj(n)),t.Oa=t.Oa.insert(n,r),hT(t.remoteStore,new Sr(bn(um(n.path)),r,"TargetPurposeLimboResolution",sm.oe))}}async function Ba(t,e,n){const r=J(t),s=[],i=[],o=[];r.Fa.isEmpty()||(r.Fa.forEach((u,c)=>{o.push(r.Ka(c,e,n).then(d=>{var f;if((d||n)&&r.isPrimaryClient){const g=d?!d.fromCache:(f=n==null?void 0:n.targetChanges.get(c.targetId))===null||f===void 0?void 0:f.current;r.sharedClientState.updateQueryState(c.targetId,g?"current":"not-current")}if(d){s.push(d);const g=ym.Wi(c.targetId,d);i.push(g)}}))}),await Promise.all(o),r.Ca.d_(s),await async function(c,d){const f=J(c);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",g=>U.forEach(d,p=>U.forEach(p.$i,E=>f.persistence.referenceDelegate.addReference(g,p.targetId,E)).next(()=>U.forEach(p.Ui,E=>f.persistence.referenceDelegate.removeReference(g,p.targetId,E)))))}catch(g){if(!Ua(g))throw g;H("LocalStore","Failed to update sequence numbers: "+g)}for(const g of d){const p=g.targetId;if(!g.fromCache){const E=f.os.get(p),N=E.snapshotVersion,T=E.withLastLimboFreeSnapshotVersion(N);f.os=f.os.insert(p,T)}}}(r.localStore,i))}async function Xj(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H("SyncEngine","User change. New user:",e.toKey());const r=await lT(n.localStore,e);n.currentUser=e,function(i,o){i.ka.forEach(u=>{u.forEach(c=>{c.reject(new z(M.CANCELLED,o))})}),i.ka.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ba(n,r.hs)}}function Jj(t,e){const n=J(t),r=n.Na.get(e);if(r&&r.va)return te().add(r.key);{let s=te();const i=n.Ma.get(e);if(!i)return s;for(const o of i){const u=n.Fa.get(o);s=s.unionWith(u.view.Va)}return s}}function AT(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=bT.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Jj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Kj.bind(null,e),e.Ca.d_=Dj.bind(null,e.eventManager),e.Ca.$a=Lj.bind(null,e.eventManager),e}function Zj(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Gj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Qj.bind(null,e),e}class qu{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Cc(e.databaseInfo.databaseId),this.sharedClientState=this.Wa(e),this.persistence=this.Ga(e),await this.persistence.start(),this.localStore=this.za(e),this.gcScheduler=this.ja(e,this.localStore),this.indexBackfillerScheduler=this.Ha(e,this.localStore)}ja(e,n){return null}Ha(e,n){return null}za(e){return ij(this.persistence,new rj,e.initialUser,this.serializer)}Ga(e){return new ej(gm.Zr,this.serializer)}Wa(e){return new hj}async terminate(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}qu.provider={build:()=>new qu};class jf{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>T0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Xj.bind(null,this.syncEngine),await Rj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Oj}()}createDatastore(e){const n=Cc(e.databaseInfo.databaseId),r=function(i){return new gj(i)}(e.databaseInfo);return function(i,o,u,c){return new _j(i,o,u,c)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,s,i,o,u){return new wj(r,s,i,o,u)}(this.localStore,this.datastore,e.asyncQueue,n=>T0(this.syncEngine,n,0),function(){return v0.D()?new v0:new fj}())}createSyncEngine(e,n){return function(s,i,o,u,c,d,f){const g=new Fj(s,i,o,u,c,d);return f&&(g.Qa=!0),g}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(s){const i=J(s);H("RemoteStore","RemoteStore shutting down."),i.L_.add(5),await za(i),i.k_.shutdown(),i.q_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}jf.provider={build:()=>new jf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ya(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ya(this.observer.error,e):ir("Uncaught Error in snapshot listener:",e.toString()))}Za(){this.muted=!0}Ya(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eO{constructor(e,n,r,s,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=dt.UNAUTHENTICATED,this.clientId=AE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async o=>{H("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=Tm(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function rh(t,e){t.asyncQueue.verifyOperationInProgress(),H("FirestoreClient","Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async s=>{r.isEqual(s)||(await lT(e.localStore,s),r=s)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function I0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await tO(t);H("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>_0(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,s)=>_0(e.remoteStore,s)),t._onlineComponents=e}async function tO(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H("FirestoreClient","Using user provided OfflineComponentProvider");try{await rh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(s){return s.name==="FirebaseError"?s.code===M.FAILED_PRECONDITION||s.code===M.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;Si("Error using user provided cache. Falling back to memory cache: "+n),await rh(t,new qu)}}else H("FirestoreClient","Using default OfflineComponentProvider"),await rh(t,new qu);return t._offlineComponents}async function CT(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H("FirestoreClient","Using user provided OnlineComponentProvider"),await I0(t,t._uninitializedComponentsProvider._online)):(H("FirestoreClient","Using default OnlineComponentProvider"),await I0(t,new jf))),t._onlineComponents}function nO(t){return CT(t).then(e=>e.syncEngine)}async function kT(t){const e=await CT(t),n=e.eventManager;return n.onListen=$j.bind(null,e.syncEngine),n.onUnlisten=qj.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=zj.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Hj.bind(null,e.syncEngine),n}function rO(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new PT({next:p=>{f.Za(),o.enqueueAndForget(()=>_T(i,g));const E=p.docs.has(u);!E&&p.fromCache?d.reject(new z(M.UNAVAILABLE,"Failed to get document because the client is offline.")):E&&p.fromCache&&c&&c.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new xT(um(u.path),f,{includeMetadataChanges:!0,_a:!0});return vT(i,g)}(await kT(t),t.asyncQueue,e,n,r)),r.promise}function sO(t,e,n={}){const r=new Jn;return t.asyncQueue.enqueueAndForget(async()=>function(i,o,u,c,d){const f=new PT({next:p=>{f.Za(),o.enqueueAndForget(()=>_T(i,g)),p.fromCache&&c.source==="server"?d.reject(new z(M.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):d.resolve(p)},error:p=>d.reject(p)}),g=new xT(u,f,{includeMetadataChanges:!0,_a:!0});return vT(i,g)}(await kT(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RT(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(t,e,n){if(!n)throw new z(M.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function iO(t,e,n,r){if(e===!0&&r===!0)throw new z(M.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S0(t){if(!W.isDocumentKey(t))throw new z(M.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function A0(t){if(W.isDocumentKey(t))throw new z(M.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function jc(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Q()}function An(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new z(M.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=jc(t);throw new z(M.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function oO(t,e){if(e<=0)throw new z(M.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new z(M.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new z(M.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}iO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=RT((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new z(M.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Oc{constructor(e,n,r,s){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new P0({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new z(M.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new z(M.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new P0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new T2;switch(r.type){case"firstParty":return new S2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new z(M.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=N0.get(n);r&&(H("ComponentProvider","Removing Datastore"),N0.delete(n),r.terminate())}(this),Promise.resolve()}}function aO(t,e,n,r={}){var s;const i=(t=An(t,Oc))._getSettings(),o=`${e}:${n}`;if(i.host!=="firestore.googleapis.com"&&i.host!==o&&Si("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},i),{host:o,ssl:!1})),r.mockUserToken){let u,c;if(typeof r.mockUserToken=="string")u=r.mockUserToken,c=dt.MOCK_USER;else{u=Ow(r.mockUserToken,(s=t._app)===null||s===void 0?void 0:s.options.projectId);const d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new z(M.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");c=new dt(d)}t._authCredentials=new b2(new SE(u,c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new dr(this.firestore,e,this._query)}}class bt{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ur(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new bt(this.firestore,e,this._key)}}class Ur extends dr{constructor(e,n,r){super(e,n,um(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new bt(this.firestore,null,new W(e))}withConverter(e){return new Ur(this.firestore,e,this._path)}}function Ar(t,e,...n){if(t=_e(t),jT("collection","path",e),t instanceof Oc){const r=fe.fromString(e,...n);return A0(r),new Ur(t,null,r)}{if(!(t instanceof bt||t instanceof Ur))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return A0(r),new Ur(t.firestore,null,r)}}function De(t,e,...n){if(t=_e(t),arguments.length===1&&(e=AE.newId()),jT("doc","path",e),t instanceof Oc){const r=fe.fromString(e,...n);return S0(r),new bt(t,null,new W(r))}{if(!(t instanceof bt||t instanceof Ur))throw new z(M.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(fe.fromString(e,...n));return S0(r),new bt(t.firestore,t instanceof Ur?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C0{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new cT(this,"async_queue_retry"),this.Vu=()=>{const r=nh();r&&H("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;const n=nh();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;const n=nh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});const n=new Jn;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}async pu(){if(this.Pu.length!==0){try{await this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!Ua(e))throw e;H("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}}gu(e){const n=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;const s=function(o){let u=o.message||"";return o.stack&&(u=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),u}(r);throw ir("INTERNAL UNHANDLED ERROR: ",s),r}).then(r=>(this.du=!1,r))));return this.mu=n,n}enqueueAfterDelay(e,n,r){this.fu(),this.Ru.indexOf(e)>-1&&(n=0);const s=Em.createAndSchedule(this,e,n,r,i=>this.yu(i));return this.Tu.push(s),s}fu(){this.Eu&&Q()}verifyOperationInProgress(){}async wu(){let e;do e=this.mu,await e;while(e!==this.mu)}Su(e){for(const n of this.Tu)if(n.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Tu)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){const n=this.Tu.indexOf(e);this.Tu.splice(n,1)}}class Gi extends Oc{constructor(e,n,r,s){super(e,n,r,s),this.type="firestore",this._queue=new C0,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new C0(e),this._firestoreClient=void 0,await e}}}function lO(t,e){const n=typeof t=="object"?t:_c(),r=typeof t=="string"?t:"(default)",s=Rs(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=kw("firestore");i&&aO(s,...i)}return s}function Nm(t){if(t._terminated)throw new z(M.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||uO(t),t._firestoreClient}function uO(t){var e,n,r;const s=t._freezeSettings(),i=function(u,c,d,f){return new F2(u,c,d,f.host,f.ssl,f.experimentalForceLongPolling,f.experimentalAutoDetectLongPolling,RT(f.experimentalLongPollingOptions),f.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,s);t._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),t._firestoreClient=new eO(t._authCredentials,t._appCheckCredentials,t._queue,i,t._componentsProvider&&function(u){const c=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(c),_online:c}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Di(nt.fromBase64String(e))}catch(n){throw new z(M.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Di(nt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new z(M.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xe(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sm{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new z(M.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new z(M.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return oe(this._lat,e._lat)||oe(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Am{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cO=/^__.*__$/;class dO{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Fa(e,this.data,n,this.fieldTransforms)}}class OT{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new Yr(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function DT(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Q()}}class Lc{constructor(e,n,r,s,i,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this.vu(),this.fieldTransforms=i||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new Lc(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.Ou(e),s}Nu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),s=this.Fu({path:r,xu:!1});return s.vu(),s}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return Hu(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(DT(this.Cu)&&cO.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}}class hO{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Cc(e)}Qu(e,n,r,s=!1){return new Lc({Cu:e,methodName:n,qu:r,path:Xe.emptyPath(),xu:!1,ku:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Ha(t){const e=t._freezeSettings(),n=Cc(t._databaseId);return new hO(t._databaseId,!!e.ignoreUndefinedProperties,n)}function LT(t,e,n,r,s,i={}){const o=t.Qu(i.merge||i.mergeFields?2:0,e,n,s);km("Data must be an object, but it was:",o,r);const u=VT(r,o);let c,d;if(i.merge)c=new Ft(o.fieldMask),d=o.fieldTransforms;else if(i.mergeFields){const f=[];for(const g of i.mergeFields){const p=Of(e,g,n);if(!o.contains(p))throw new z(M.INVALID_ARGUMENT,`Field '${p}' is specified in your field mask but missing from your input data.`);FT(f,p)||f.push(p)}c=new Ft(f),d=o.fieldTransforms.filter(g=>c.covers(g.field))}else c=null,d=o.fieldTransforms;return new dO(new Ct(u),c,d)}class Mc extends qa{_toFieldTransform(e){if(e.Cu!==2)throw e.Cu===1?e.Bu(`${this._methodName}() can only appear at the top level of your update data`):e.Bu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Mc}}function fO(t,e,n){return new Lc({Cu:3,qu:e.settings.qu,methodName:t._methodName,xu:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class Pm extends qa{_toFieldTransform(e){return new GE(e.path,new wa)}isEqual(e){return e instanceof Pm}}class Cm extends qa{constructor(e,n){super(e),this.Ku=n}_toFieldTransform(e){const n=fO(this,e,!0),r=this.Ku.map(i=>Qi(i,n)),s=new Ri(r);return new GE(e.path,s)}isEqual(e){return e instanceof Cm&&fa(this.Ku,e.Ku)}}function pO(t,e,n,r){const s=t.Qu(1,e,n);km("Data must be an object, but it was:",s,r);const i=[],o=Ct.empty();Os(r,(c,d)=>{const f=Rm(e,c,n);d=_e(d);const g=s.Nu(f);if(d instanceof Mc)i.push(f);else{const p=Qi(d,g);p!=null&&(i.push(f),o.set(f,p))}});const u=new Ft(i);return new OT(o,u,s.fieldTransforms)}function mO(t,e,n,r,s,i){const o=t.Qu(1,e,n),u=[Of(e,r,n)],c=[s];if(i.length%2!=0)throw new z(M.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let p=0;p<i.length;p+=2)u.push(Of(e,i[p])),c.push(i[p+1]);const d=[],f=Ct.empty();for(let p=u.length-1;p>=0;--p)if(!FT(d,u[p])){const E=u[p];let N=c[p];N=_e(N);const T=o.Nu(E);if(N instanceof Mc)d.push(E);else{const A=Qi(N,T);A!=null&&(d.push(E),f.set(E,A))}}const g=new Ft(d);return new OT(f,g,o.fieldTransforms)}function MT(t,e,n,r=!1){return Qi(n,t.Qu(r?4:3,e))}function Qi(t,e){if(UT(t=_e(t)))return km("Unsupported field value:",e,t),VT(t,e);if(t instanceof qa)return function(r,s){if(!DT(s.Cu))throw s.Bu(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Bu(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,s){const i=[];let o=0;for(const u of r){let c=Qi(u,s.Lu(o));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),o++}return{arrayValue:{values:i}}}(t,e)}return function(r,s){if((r=_e(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return lR(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=$e.fromDate(r);return{timestampValue:zu(s.serializer,i)}}if(r instanceof $e){const i=new $e(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:zu(s.serializer,i)}}if(r instanceof Sm)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Di)return{bytesValue:tT(s.serializer,r._byteString)};if(r instanceof bt){const i=s.databaseId,o=r.firestore._databaseId;if(!o.isEqual(i))throw s.Bu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:pm(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof Am)return function(o,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw u.Bu("VectorValues must only contain numeric values.");return dm(u.serializer,c)})}}}}}}(r,s);throw s.Bu(`Unsupported field value: ${jc(r)}`)}(t,e)}function VT(t,e){const n={};return PE(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Os(t,(r,s)=>{const i=Qi(s,e.Mu(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function UT(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof $e||t instanceof Sm||t instanceof Di||t instanceof bt||t instanceof qa||t instanceof Am)}function km(t,e,n){if(!UT(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=jc(n);throw r==="an object"?e.Bu(t+" a custom object"):e.Bu(t+" "+r)}}function Of(t,e,n){if((e=_e(e))instanceof Dc)return e._internalPath;if(typeof e=="string")return Rm(t,e);throw Hu("Field path arguments must be of type string or ",t,!1,void 0,n)}const gO=new RegExp("[~\\*/\\[\\]]");function Rm(t,e,n){if(e.search(gO)>=0)throw Hu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Dc(...e.split("."))._internalPath}catch{throw Hu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Hu(t,e,n,r,s){const i=r&&!r.isEmpty(),o=s!==void 0;let u=`Function ${e}() called with invalid data`;n&&(u+=" (via `toFirestore()`)"),u+=". ";let c="";return(i||o)&&(c+=" (found",i&&(c+=` in field ${r}`),o&&(c+=` in document ${s}`),c+=")"),new z(M.INVALID_ARGUMENT,u+t+c)}function FT(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jm{constructor(e,n,r,s,i){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new bt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new yO(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Vc("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class yO extends jm{data(){return super.data()}}function Vc(t,e){return typeof e=="string"?Rm(t,e):e instanceof Dc?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vO(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new z(M.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Om{}class Uc extends Om{}function Df(t,e,...n){let r=[];e instanceof Om&&r.push(e),r=r.concat(n),function(i){const o=i.filter(c=>c instanceof Dm).length,u=i.filter(c=>c instanceof Fc).length;if(o>1||o>0&&u>0)throw new z(M.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)t=s._apply(t);return t}class Fc extends Uc{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Fc(e,n,r)}_apply(e){const n=this._parse(e);return $T(e._query,n),new dr(e.firestore,e.converter,If(e._query,n))}_parse(e){const n=Ha(e.firestore);return function(i,o,u,c,d,f,g){let p;if(d.isKeyField()){if(f==="array-contains"||f==="array-contains-any")throw new z(M.INVALID_ARGUMENT,`Invalid Query. You can't perform '${f}' queries on documentId().`);if(f==="in"||f==="not-in"){R0(g,f);const E=[];for(const N of g)E.push(k0(c,i,N));p={arrayValue:{values:E}}}else p=k0(c,i,g)}else f!=="in"&&f!=="not-in"&&f!=="array-contains-any"||R0(g,f),p=MT(u,o,g,f==="in"||f==="not-in");return Me.create(d,f,p)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function ai(t,e,n){const r=e,s=Vc("where",t);return Fc._create(s,r,n)}class Dm extends Om{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Dm(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:gn.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(s,i){let o=s;const u=i.getFlattenedFilters();for(const c of u)$T(o,c),o=If(o,c)}(e._query,n),new dr(e.firestore,e.converter,If(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Lm extends Uc{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Lm(e,n)}_apply(e){const n=function(s,i,o){if(s.startAt!==null)throw new z(M.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(s.endAt!==null)throw new z(M.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new xa(i,o)}(e._query,this._field,this._direction);return new dr(e.firestore,e.converter,function(s,i){const o=s.explicitOrderBy.concat([i]);return new Ds(s.path,s.collectionGroup,o,s.filters.slice(),s.limit,s.limitType,s.startAt,s.endAt)}(e._query,n))}}function Lf(t,e="asc"){const n=e,r=Vc("orderBy",t);return Lm._create(r,n)}class Mm extends Uc{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Mm(e,n,r)}_apply(e){return new dr(e.firestore,e.converter,Fu(e._query,this._limit,this._limitType))}}function _O(t){return oO("limit",t),Mm._create("limit",t,"F")}class Vm extends Uc{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Vm(e,n,r)}_apply(e){const n=wO(e,this.type,this._docOrFields,this._inclusive);return new dr(e.firestore,e.converter,function(s,i){return new Ds(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),s.limit,s.limitType,i,s.endAt)}(e._query,n))}}function xO(...t){return Vm._create("startAfter",t,!1)}function wO(t,e,n,r){if(n[0]=_e(n[0]),n[0]instanceof jm)return function(i,o,u,c,d){if(!c)throw new z(M.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${u}().`);const f=[];for(const g of yi(i))if(g.field.isKeyField())f.push(Uu(o,c.key));else{const p=c.data.field(g.field);if(bc(p))throw new z(M.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+g.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(p===null){const E=g.field.canonicalString();throw new z(M.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${E}' (used as the orderBy) does not exist.`)}f.push(p)}return new ki(f,d)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const s=Ha(t.firestore);return function(o,u,c,d,f,g){const p=o.explicitOrderBy;if(f.length>p.length)throw new z(M.INVALID_ARGUMENT,`Too many arguments provided to ${d}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const E=[];for(let N=0;N<f.length;N++){const T=f[N];if(p[N].field.isKeyField()){if(typeof T!="string")throw new z(M.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${d}(), but got a ${typeof T}`);if(!cm(o)&&T.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${d}() must be a plain document ID, but '${T}' contains a slash.`);const A=o.path.child(fe.fromString(T));if(!W.isDocumentKey(A))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${d}() must result in a valid document path, but '${A}' is not because it contains an odd number of segments.`);const w=new W(A);E.push(Uu(u,w))}else{const A=MT(c,d,T);E.push(A)}}return new ki(E,g)}(t._query,t.firestore._databaseId,s,e,n,r)}}function k0(t,e,n){if(typeof(n=_e(n))=="string"){if(n==="")throw new z(M.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!cm(e)&&n.indexOf("/")!==-1)throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(fe.fromString(n));if(!W.isDocumentKey(r))throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Uu(t,new W(r))}if(n instanceof bt)return Uu(t,n._key);throw new z(M.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jc(n)}.`)}function R0(t,e){if(!Array.isArray(t)||t.length===0)throw new z(M.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function $T(t,e){const n=function(s,i){for(const o of s)for(const u of o.getFlattenedFilters())if(i.indexOf(u.op)>=0)return u.op;return null}(t.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new z(M.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EO{convertValue(e,n="none"){switch(Is(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ce(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(bs(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw Q()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Os(e,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(e){var n,r,s;const i=(s=(r=(n=e.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(o=>Ce(o.doubleValue));return new Am(i)}convertGeoPoint(e){return new Sm(Ce(e.latitude),Ce(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=im(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ya(e));default:return null}}convertTimestamp(e){const n=Br(e);return new $e(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=fe.fromString(e);le(aT(r));const s=new va(r.get(1),r.get(3)),i=new W(r.popFirst(5));return s.isEqual(n)||ir(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zT(t,e,n){let r;return r=t?t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ro{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class BT extends jm{constructor(e,n,r,s,i,o){super(e,n,r,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nu(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Vc("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nu extends BT{data(e={}){return super.data(e)}}class TO{constructor(e,n,r,s){this._firestore=e,this._userDataWriter=n,this._snapshot=s,this.metadata=new Ro(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new nu(this._firestore,this._userDataWriter,r.key,r,new Ro(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new z(M.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map(u=>{const c=new nu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ro(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);return u.doc,{type:"added",doc:c,oldIndex:-1,newIndex:o++}})}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(u=>i||u.type!==3).map(u=>{const c=new nu(s._firestore,s._userDataWriter,u.doc.key,u.doc,new Ro(s._snapshot.mutatedKeys.has(u.doc.key),s._snapshot.fromCache),s.query.converter);let d=-1,f=-1;return u.type!==0&&(d=o.indexOf(u.doc.key),o=o.delete(u.doc.key)),u.type!==1&&(o=o.add(u.doc),f=o.indexOf(u.doc.key)),{type:bO(u.type),doc:c,oldIndex:d,newIndex:f}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function bO(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Q()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t){t=An(t,bt);const e=An(t.firestore,Gi);return rO(Nm(e),t._key).then(n=>IO(e,t,n))}class qT extends EO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Di(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new bt(this.firestore,null,n)}}function Wu(t){t=An(t,dr);const e=An(t.firestore,Gi),n=Nm(e),r=new qT(e);return vO(t._query),sO(n,t._query).then(s=>new TO(e,r,t,s))}function Mf(t,e,n){t=An(t,bt);const r=An(t.firestore,Gi),s=zT(t.converter,e);return Um(r,[LT(Ha(r),"setDoc",t._key,s,t.converter!==null,n).toMutation(t._key,fn.none())])}function Nn(t,e,n,...r){t=An(t,bt);const s=An(t.firestore,Gi),i=Ha(s);let o;return o=typeof(e=_e(e))=="string"||e instanceof Dc?mO(i,"updateDoc",t._key,e,n,r):pO(i,"updateDoc",t._key,e),Um(s,[o.toMutation(t._key,fn.exists(!0))])}function Ku(t,e){const n=An(t.firestore,Gi),r=De(t),s=zT(t.converter,e);return Um(n,[LT(Ha(t.firestore),"addDoc",r._key,s,t.converter!==null,{}).toMutation(r._key,fn.exists(!1))]).then(()=>r)}function Um(t,e){return function(r,s){const i=new Jn;return r.asyncQueue.enqueueAndForget(async()=>Wj(await nO(r),s,i)),i.promise}(Nm(t),e)}function IO(t,e,n){const r=n.docs.get(e._key),s=new qT(t);return new BT(t,s,e._key,r,new Ro(n.hasPendingWrites,n.fromCache),e.converter)}function Re(){return new Pm("serverTimestamp")}function HT(...t){return new Cm("arrayUnion",t)}(function(e,n=!0){(function(s){Hi=s})(js),mn(new Xt("firestore",(r,{instanceIdentifier:s,options:i})=>{const o=r.getProvider("app").getImmediate(),u=new Gi(new I2(r.getProvider("auth-internal")),new P2(r.getProvider("app-check-internal")),function(d,f){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new z(M.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new va(d.options.projectId,f)}(o,s),o);return i=Object.assign({useFetchStreams:n},i),u._setSettings(i),u},"PUBLIC").setMultipleInstances(!0)),Dt(Qv,"4.7.3",e),Dt(Qv,"4.7.3","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WT="firebasestorage.googleapis.com",NO="storageBucket",SO=2*60*1e3,AO=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kn extends yn{constructor(e,n,r=0){super(sh(e),`Firebase Storage: ${n} (${sh(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kn.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return sh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Pn;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Pn||(Pn={}));function sh(t){return"storage/"+t}function PO(){const t="An unknown error occurred, please check the error payload for server response.";return new kn(Pn.UNKNOWN,t)}function CO(){return new kn(Pn.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function kO(){return new kn(Pn.CANCELED,"User canceled the upload/download.")}function RO(t){return new kn(Pn.INVALID_URL,"Invalid URL '"+t+"'.")}function jO(t){return new kn(Pn.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function j0(t){return new kn(Pn.INVALID_ARGUMENT,t)}function KT(){return new kn(Pn.APP_DELETED,"The Firebase app was deleted.")}function OO(t){return new kn(Pn.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=ln.makeFromUrl(e,n)}catch{return new ln(e,"")}if(r.path==="")return r;throw jO(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(C){C.path.charAt(C.path.length-1)==="/"&&(C.path_=C.path_.slice(0,-1))}const o="(/(.*))?$",u=new RegExp("^gs://"+s+o,"i"),c={bucket:1,path:3};function d(C){C.path_=decodeURIComponent(C.path)}const f="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),p="(/([^?#]*).*)?$",E=new RegExp(`^https?://${g}/${f}/b/${s}/o${p}`,"i"),N={bucket:1,path:3},T=n===WT?"(?:storage.googleapis.com|storage.cloud.google.com)":n,A="([^?#]*)",w=new RegExp(`^https?://${T}/${s}/${A}`,"i"),y=[{regex:u,indices:c,postModify:i},{regex:E,indices:N,postModify:d},{regex:w,indices:{bucket:1,path:2},postModify:d}];for(let C=0;C<y.length;C++){const L=y[C],V=L.regex.exec(e);if(V){const I=V[L.indices.bucket];let _=V[L.indices.path];_||(_=""),r=new ln(I,_),L.postModify(r);break}}if(r==null)throw RO(e);return r}}class DO{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LO(t,e,n){let r=1,s=null,i=null,o=!1,u=0;function c(){return u===2}let d=!1;function f(...A){d||(d=!0,e.apply(null,A))}function g(A){s=setTimeout(()=>{s=null,t(E,c())},A)}function p(){i&&clearTimeout(i)}function E(A,...w){if(d){p();return}if(A){p(),f.call(null,A,...w);return}if(c()||o){p(),f.call(null,A,...w);return}r<64&&(r*=2);let y;u===1?(u=2,y=0):y=(r+Math.random())*1e3,g(y)}let N=!1;function T(A){N||(N=!0,p(),!d&&(s!==null?(A||(u=2),clearTimeout(s),g(0)):A||(u=1)))}return g(0),i=setTimeout(()=>{o=!0,T(!0)},n),T}function MO(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VO(t){return t!==void 0}function O0(t,e,n,r){if(r<e)throw j0(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw j0(`Invalid value for '${t}'. Expected ${n} or less.`)}function UO(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var Gu;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(Gu||(Gu={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FO(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $O{constructor(e,n,r,s,i,o,u,c,d,f,g,p=!0){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=g,this.retry=p,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,N)=>{this.resolve_=E,this.reject_=N,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new Dl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=u=>{const c=u.loaded,d=u.lengthComputable?u.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const u=i.getErrorCode()===Gu.NO_ERROR,c=i.getStatus();if(!u||FO(c,this.additionalRetryCodes_)&&this.retry){const f=i.getErrorCode()===Gu.ABORT;r(!1,new Dl(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new Dl(d,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,u=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(u,u.getResponse());VO(c)?i(c):i()}catch(c){o(c)}else if(u!==null){const c=PO();c.serverResponse=u.getErrorText(),this.errorCallback_?o(this.errorCallback_(u,c)):o(c)}else if(s.canceled){const c=this.appDelete_?KT():kO();o(c)}else{const c=CO();o(c)}};this.canceled_?n(!1,new Dl(!1,null,!0)):this.backoffId_=LO(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&MO(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Dl{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function zO(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function BO(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qO(t,e){e&&(t["X-Firebase-GMPID"]=e)}function HO(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function WO(t,e,n,r,s,i,o=!0){const u=UO(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return qO(d,e),zO(d,n),BO(d,i),HO(d,r),new $O(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KO(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function GO(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qu{constructor(e,n){this._service=e,n instanceof ln?this._location=n:this._location=ln.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new Qu(e,n)}get root(){const e=new ln(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return GO(this._location.path)}get storage(){return this._service}get parent(){const e=KO(this._location.path);if(e===null)return null;const n=new ln(this._location.bucket,e);return new Qu(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw OO(e)}}function D0(t,e){const n=e==null?void 0:e[NO];return n==null?null:ln.makeFromBucketSpec(n,t)}function QO(t,e,n,r={}){t.host=`${e}:${n}`,t._protocol="http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:Ow(s,t.app.options.projectId))}class YO{constructor(e,n,r,s,i){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=WT,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=SO,this._maxUploadRetryTime=AO,this._requests=new Set,s!=null?this._bucket=ln.makeFromBucketSpec(s,this._host):this._bucket=D0(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ln.makeFromBucketSpec(this._url,e):this._bucket=D0(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){O0("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Qu(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new DO(KT());{const o=WO(e,this._appId,r,s,n,this._firebaseVersion,i);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const L0="@firebase/storage",M0="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GT="storage";function XO(t=_c(),e){t=_e(t);const r=Rs(t,GT).getImmediate({identifier:e}),s=kw("storage");return s&&JO(r,...s),r}function JO(t,e,n,r={}){QO(t,e,n,r)}function ZO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new YO(n,r,s,e,js)}function eD(){mn(new Xt(GT,ZO,"PUBLIC").setMultipleInstances(!0)),Dt(L0,M0,""),Dt(L0,M0,"esm2017")}eD();const QT="@firebase/installations",Fm="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YT=1e4,XT=`w:${Fm}`,JT="FIS_v2",tD="https://firebaseinstallations.googleapis.com/v1",nD=60*60*1e3,rD="installations",sD="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ns=new ks(rD,sD,iD);function ZT(t){return t instanceof yn&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eb({projectId:t}){return`${tD}/projects/${t}/installations`}function tb(t){return{token:t.token,requestStatus:2,expiresIn:aD(t.expiresIn),creationTime:Date.now()}}async function nb(t,e){const r=(await e.json()).error;return Ns.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function rb({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function oD(t,{refreshToken:e}){const n=rb(t);return n.append("Authorization",lD(e)),n}async function sb(t){const e=await t();return e.status>=500&&e.status<600?t():e}function aD(t){return Number(t.replace("s","000"))}function lD(t){return`${JT} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uD({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=eb(t),s=rb(t),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={fid:n,authVersion:JT,appId:t.appId,sdkVersion:XT},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await sb(()=>fetch(r,u));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:tb(d.authToken)}}else throw await nb("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cD(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dD=/^[cdef][\w-]{21}$/,Vf="";function hD(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=fD(t);return dD.test(n)?n:Vf}catch{return Vf}}function fD(t){return cD(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $c(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ob=new Map;function ab(t,e){const n=$c(t);lb(n,e),pD(n,e)}function lb(t,e){const n=ob.get(t);if(n)for(const r of n)r(e)}function pD(t,e){const n=mD();n&&n.postMessage({key:t,fid:e}),gD()}let ds=null;function mD(){return!ds&&"BroadcastChannel"in self&&(ds=new BroadcastChannel("[Firebase] FID Change"),ds.onmessage=t=>{lb(t.data.key,t.data.fid)}),ds}function gD(){ob.size===0&&ds&&(ds.close(),ds=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="firebase-installations-database",vD=1,Ss="firebase-installations-store";let ih=null;function $m(){return ih||(ih=vc(yD,vD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Ss)}}})),ih}async function Yu(t,e){const n=$c(t),s=(await $m()).transaction(Ss,"readwrite"),i=s.objectStore(Ss),o=await i.get(n);return await i.put(e,n),await s.done,(!o||o.fid!==e.fid)&&ab(t,e.fid),e}async function ub(t){const e=$c(t),r=(await $m()).transaction(Ss,"readwrite");await r.objectStore(Ss).delete(e),await r.done}async function zc(t,e){const n=$c(t),s=(await $m()).transaction(Ss,"readwrite"),i=s.objectStore(Ss),o=await i.get(n),u=e(o);return u===void 0?await i.delete(n):await i.put(u,n),await s.done,u&&(!o||o.fid!==u.fid)&&ab(t,u.fid),u}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zm(t){let e;const n=await zc(t.appConfig,r=>{const s=_D(r),i=xD(t,s);return e=i.registrationPromise,i.installationEntry});return n.fid===Vf?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function _D(t){const e=t||{fid:hD(),registrationStatus:0};return cb(e)}function xD(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ns.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=wD(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:ED(t)}:{installationEntry:e}}async function wD(t,e){try{const n=await uD(t,e);return Yu(t.appConfig,n)}catch(n){throw ZT(n)&&n.customData.serverCode===409?await ub(t.appConfig):await Yu(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function ED(t){let e=await V0(t.appConfig);for(;e.registrationStatus===1;)await ib(100),e=await V0(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await zm(t);return r||n}return e}function V0(t){return zc(t,e=>{if(!e)throw Ns.create("installation-not-found");return cb(e)})}function cb(t){return TD(t)?{fid:t.fid,registrationStatus:0}:t}function TD(t){return t.registrationStatus===1&&t.registrationTime+YT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bD({appConfig:t,heartbeatServiceProvider:e},n){const r=ID(t,n),s=oD(t,n),i=e.getImmediate({optional:!0});if(i){const d=await i.getHeartbeatsHeader();d&&s.append("x-firebase-client",d)}const o={installation:{sdkVersion:XT,appId:t.appId}},u={method:"POST",headers:s,body:JSON.stringify(o)},c=await sb(()=>fetch(r,u));if(c.ok){const d=await c.json();return tb(d)}else throw await nb("Generate Auth Token",c)}function ID(t,{fid:e}){return`${eb(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bm(t,e=!1){let n;const r=await zc(t.appConfig,i=>{if(!db(i))throw Ns.create("not-registered");const o=i.authToken;if(!e&&AD(o))return i;if(o.requestStatus===1)return n=ND(t,e),i;{if(!navigator.onLine)throw Ns.create("app-offline");const u=CD(i);return n=SD(t,u),u}});return n?await n:r.authToken}async function ND(t,e){let n=await U0(t.appConfig);for(;n.authToken.requestStatus===1;)await ib(100),n=await U0(t.appConfig);const r=n.authToken;return r.requestStatus===0?Bm(t,e):r}function U0(t){return zc(t,e=>{if(!db(e))throw Ns.create("not-registered");const n=e.authToken;return kD(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function SD(t,e){try{const n=await bD(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Yu(t.appConfig,r),n}catch(n){if(ZT(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await ub(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Yu(t.appConfig,r)}throw n}}function db(t){return t!==void 0&&t.registrationStatus===2}function AD(t){return t.requestStatus===2&&!PD(t)}function PD(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+nD}function CD(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function kD(t){return t.requestStatus===1&&t.requestTime+YT<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function RD(t){const e=t,{installationEntry:n,registrationPromise:r}=await zm(e);return r?r.catch(console.error):Bm(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jD(t,e=!1){const n=t;return await OD(n),(await Bm(n,e)).token}async function OD(t){const{registrationPromise:e}=await zm(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DD(t){if(!t||!t.options)throw oh("App Configuration");if(!t.name)throw oh("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw oh(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function oh(t){return Ns.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hb="installations",LD="installations-internal",MD=t=>{const e=t.getProvider("app").getImmediate(),n=DD(e),r=Rs(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},VD=t=>{const e=t.getProvider("app").getImmediate(),n=Rs(e,hb).getImmediate();return{getId:()=>RD(n),getToken:s=>jD(n,s)}};function UD(){mn(new Xt(hb,MD,"PUBLIC")),mn(new Xt(LD,VD,"PRIVATE"))}UD();Dt(QT,Fm);Dt(QT,Fm,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FD="/firebase-messaging-sw.js",$D="/firebase-cloud-messaging-push-scope",fb="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",zD="https://fcmregistrations.googleapis.com/v1",pb="google.c.a.c_id",BD="google.c.a.c_l",qD="google.c.a.ts",HD="google.c.a.e";var F0;(function(t){t[t.DATA_MESSAGE=1]="DATA_MESSAGE",t[t.DISPLAY_NOTIFICATION=3]="DISPLAY_NOTIFICATION"})(F0||(F0={}));/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not use this file except
 * in compliance with the License. You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software distributed under the License
 * is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express
 * or implied. See the License for the specific language governing permissions and limitations under
 * the License.
 */var Ta;(function(t){t.PUSH_RECEIVED="push-received",t.NOTIFICATION_CLICKED="notification-clicked"})(Ta||(Ta={}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){const e=new Uint8Array(t);return btoa(String.fromCharCode(...e)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function WD(t){const e="=".repeat((4-t.length%4)%4),n=(t+e).replace(/\-/g,"+").replace(/_/g,"/"),r=atob(n),s=new Uint8Array(r.length);for(let i=0;i<r.length;++i)s[i]=r.charCodeAt(i);return s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="fcm_token_details_db",KD=5,$0="fcm_token_object_Store";async function GD(t){if("databases"in indexedDB&&!(await indexedDB.databases()).map(i=>i.name).includes(ah))return null;let e=null;return(await vc(ah,KD,{upgrade:async(r,s,i,o)=>{var u;if(s<2||!r.objectStoreNames.contains($0))return;const c=o.objectStore($0),d=await c.index("fcmSenderId").get(t);if(await c.clear(),!!d){if(s===2){const f=d;if(!f.auth||!f.p256dh||!f.endpoint)return;e={token:f.fcmToken,createTime:(u=f.createTime)!==null&&u!==void 0?u:Date.now(),subscriptionOptions:{auth:f.auth,p256dh:f.p256dh,endpoint:f.endpoint,swScope:f.swScope,vapidKey:typeof f.vapidKey=="string"?f.vapidKey:$n(f.vapidKey)}}}else if(s===3){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:$n(f.auth),p256dh:$n(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:$n(f.vapidKey)}}}else if(s===4){const f=d;e={token:f.fcmToken,createTime:f.createTime,subscriptionOptions:{auth:$n(f.auth),p256dh:$n(f.p256dh),endpoint:f.endpoint,swScope:f.swScope,vapidKey:$n(f.vapidKey)}}}}}})).close(),await Qd(ah),await Qd("fcm_vapid_details_db"),await Qd("undefined"),QD(e)?e:null}function QD(t){if(!t||!t.subscriptionOptions)return!1;const{subscriptionOptions:e}=t;return typeof t.createTime=="number"&&t.createTime>0&&typeof t.token=="string"&&t.token.length>0&&typeof e.auth=="string"&&e.auth.length>0&&typeof e.p256dh=="string"&&e.p256dh.length>0&&typeof e.endpoint=="string"&&e.endpoint.length>0&&typeof e.swScope=="string"&&e.swScope.length>0&&typeof e.vapidKey=="string"&&e.vapidKey.length>0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YD="firebase-messaging-database",XD=1,ba="firebase-messaging-store";let lh=null;function mb(){return lh||(lh=vc(YD,XD,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ba)}}})),lh}async function JD(t){const e=gb(t),r=await(await mb()).transaction(ba).objectStore(ba).get(e);if(r)return r;{const s=await GD(t.appConfig.senderId);if(s)return await qm(t,s),s}}async function qm(t,e){const n=gb(t),s=(await mb()).transaction(ba,"readwrite");return await s.objectStore(ba).put(e,n),await s.done,e}function gb({appConfig:t}){return t.appId}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZD={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."},mt=new ks("messaging","Messaging",ZD);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function eL(t,e){const n=await Wm(t),r=yb(e),s={method:"POST",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(Hm(t.appConfig),s)).json()}catch(o){throw mt.create("token-subscribe-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw mt.create("token-subscribe-failed",{errorInfo:o})}if(!i.token)throw mt.create("token-subscribe-no-token");return i.token}async function tL(t,e){const n=await Wm(t),r=yb(e.subscriptionOptions),s={method:"PATCH",headers:n,body:JSON.stringify(r)};let i;try{i=await(await fetch(`${Hm(t.appConfig)}/${e.token}`,s)).json()}catch(o){throw mt.create("token-update-failed",{errorInfo:o==null?void 0:o.toString()})}if(i.error){const o=i.error.message;throw mt.create("token-update-failed",{errorInfo:o})}if(!i.token)throw mt.create("token-update-no-token");return i.token}async function nL(t,e){const r={method:"DELETE",headers:await Wm(t)};try{const i=await(await fetch(`${Hm(t.appConfig)}/${e}`,r)).json();if(i.error){const o=i.error.message;throw mt.create("token-unsubscribe-failed",{errorInfo:o})}}catch(s){throw mt.create("token-unsubscribe-failed",{errorInfo:s==null?void 0:s.toString()})}}function Hm({projectId:t}){return`${zD}/projects/${t}/registrations`}async function Wm({appConfig:t,installations:e}){const n=await e.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t.apiKey,"x-goog-firebase-installations-auth":`FIS ${n}`})}function yb({p256dh:t,auth:e,endpoint:n,vapidKey:r}){const s={web:{endpoint:n,auth:e,p256dh:t}};return r!==fb&&(s.web.applicationPubKey=r),s}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rL=7*24*60*60*1e3;async function sL(t){const e=await oL(t.swRegistration,t.vapidKey),n={vapidKey:t.vapidKey,swScope:t.swRegistration.scope,endpoint:e.endpoint,auth:$n(e.getKey("auth")),p256dh:$n(e.getKey("p256dh"))},r=await JD(t.firebaseDependencies);if(r){if(aL(r.subscriptionOptions,n))return Date.now()>=r.createTime+rL?iL(t,{token:r.token,createTime:Date.now(),subscriptionOptions:n}):r.token;try{await nL(t.firebaseDependencies,r.token)}catch(s){console.warn(s)}return z0(t.firebaseDependencies,n)}else return z0(t.firebaseDependencies,n)}async function iL(t,e){try{const n=await tL(t.firebaseDependencies,e),r=Object.assign(Object.assign({},e),{token:n,createTime:Date.now()});return await qm(t.firebaseDependencies,r),n}catch(n){throw n}}async function z0(t,e){const r={token:await eL(t,e),createTime:Date.now(),subscriptionOptions:e};return await qm(t,r),r.token}async function oL(t,e){const n=await t.pushManager.getSubscription();return n||t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:WD(e)})}function aL(t,e){const n=e.vapidKey===t.vapidKey,r=e.endpoint===t.endpoint,s=e.auth===t.auth,i=e.p256dh===t.p256dh;return n&&r&&s&&i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(t){const e={from:t.from,collapseKey:t.collapse_key,messageId:t.fcmMessageId};return lL(e,t),uL(e,t),cL(e,t),e}function lL(t,e){if(!e.notification)return;t.notification={};const n=e.notification.title;n&&(t.notification.title=n);const r=e.notification.body;r&&(t.notification.body=r);const s=e.notification.image;s&&(t.notification.image=s);const i=e.notification.icon;i&&(t.notification.icon=i)}function uL(t,e){e.data&&(t.data=e.data)}function cL(t,e){var n,r,s,i,o;if(!e.fcmOptions&&!(!((n=e.notification)===null||n===void 0)&&n.click_action))return;t.fcmOptions={};const u=(s=(r=e.fcmOptions)===null||r===void 0?void 0:r.link)!==null&&s!==void 0?s:(i=e.notification)===null||i===void 0?void 0:i.click_action;u&&(t.fcmOptions.link=u);const c=(o=e.fcmOptions)===null||o===void 0?void 0:o.analytics_label;c&&(t.fcmOptions.analyticsLabel=c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dL(t){return typeof t=="object"&&!!t&&pb in t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hL(t){if(!t||!t.options)throw uh("App Configuration Object");if(!t.name)throw uh("App Name");const e=["projectId","apiKey","appId","messagingSenderId"],{options:n}=t;for(const r of e)if(!n[r])throw uh(r);return{appName:t.name,projectId:n.projectId,apiKey:n.apiKey,appId:n.appId,senderId:n.messagingSenderId}}function uh(t){return mt.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fL{constructor(e,n,r){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const s=hL(e);this.firebaseDependencies={app:e,appConfig:s,installations:n,analyticsProvider:r}}_delete(){return Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pL(t){try{t.swRegistration=await navigator.serviceWorker.register(FD,{scope:$D}),t.swRegistration.update().catch(()=>{})}catch(e){throw mt.create("failed-service-worker-registration",{browserErrorMessage:e==null?void 0:e.message})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function mL(t,e){if(!e&&!t.swRegistration&&await pL(t),!(!e&&t.swRegistration)){if(!(e instanceof ServiceWorkerRegistration))throw mt.create("invalid-sw-registration");t.swRegistration=e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gL(t,e){e?t.vapidKey=e:t.vapidKey||(t.vapidKey=fb)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vb(t,e){if(!navigator)throw mt.create("only-available-in-window");if(Notification.permission==="default"&&await Notification.requestPermission(),Notification.permission!=="granted")throw mt.create("permission-blocked");return await gL(t,e==null?void 0:e.vapidKey),await mL(t,e==null?void 0:e.serviceWorkerRegistration),sL(t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yL(t,e,n){const r=vL(e);(await t.firebaseDependencies.analyticsProvider.get()).logEvent(r,{message_id:n[pb],message_name:n[BD],message_time:n[qD],message_device_time:Math.floor(Date.now()/1e3)})}function vL(t){switch(t){case Ta.NOTIFICATION_CLICKED:return"notification_open";case Ta.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _L(t,e){const n=e.data;if(!n.isFirebaseMessaging)return;t.onMessageHandler&&n.messageType===Ta.PUSH_RECEIVED&&(typeof t.onMessageHandler=="function"?t.onMessageHandler(B0(n)):t.onMessageHandler.next(B0(n)));const r=n.data;dL(r)&&r[HD]==="1"&&await yL(t,n.messageType,r)}const q0="@firebase/messaging",H0="0.12.12";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xL=t=>{const e=new fL(t.getProvider("app").getImmediate(),t.getProvider("installations-internal").getImmediate(),t.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",n=>_L(e,n)),e},wL=t=>{const e=t.getProvider("messaging").getImmediate();return{getToken:r=>vb(e,r)}};function EL(){mn(new Xt("messaging",xL,"PUBLIC")),mn(new Xt("messaging-internal",wL,"PRIVATE")),Dt(q0,H0),Dt(q0,H0,"esm2017")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TL(){try{await Lw()}catch{return!1}return typeof window<"u"&&Dw()&&zA()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bL(t,e){if(!navigator)throw mt.create("only-available-in-window");return t.onMessageHandler=e,()=>{t.onMessageHandler=null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function IL(t=_c()){return TL().then(e=>{if(!e)throw mt.create("unsupported-browser")},e=>{throw mt.create("indexed-db-unsupported")}),Rs(_e(t),"messaging").getImmediate()}async function NL(t,e){return t=_e(t),vb(t,e)}function SL(t,e){return t=_e(t),bL(t,e)}EL();const is={apiKey:"AIzaSyAwpDzEdm-rWIiwequIIOW3K88ZukFd8Ko",authDomain:"education-platform-backend.firebaseapp.com",projectId:"education-platform-backend",storageBucket:"education-platform-backend.firebasestorage.app",messagingSenderId:"882764679517",appId:"1:882764679517:web:ad0ed91d818388b44c00b4"};console.log("Firebase Config:",{apiKey:is.apiKey?"Set":"Missing",authDomain:is.authDomain?"Set":"Missing",projectId:is.projectId?"Set":"Missing",storageBucket:is.storageBucket?"Set":"Missing",messagingSenderId:is.messagingSenderId?"Set":"Missing",appId:is.appId?"Set":"Missing"});const Km=Uw(is),Ks=_2(Km),he=lO(Km);XO(Km);const _b=new Bn;_b.setCustomParameters({prompt:"select_account"});class AL{async register(e,n,r){try{const i=(await tk(Ks,e,n)).user;return await sk(i,{displayName:r}),await Mf(De(he,"users",i.uid),{uid:i.uid,email:e,displayName:r,role:"student",purchasedCourses:[],createdAt:Re(),lastLogin:Re(),photoURL:null,progress:{}}),{success:!0,user:i}}catch(s){return console.error("Registration error:",s),{success:!1,error:this.getErrorMessage(s.code)}}}async login(e,n){try{const r=await nk(Ks,e,n);return await Nn(De(he,"users",r.user.uid),{lastLogin:Re()}),{success:!0,user:r.user}}catch(r){return console.error("Login error:",r),{success:!1,error:this.getErrorMessage(r.code)}}}async loginWithGoogle(){try{const n=(await Ak(Ks,_b)).user;return(await Hr(De(he,"users",n.uid))).exists()?await Nn(De(he,"users",n.uid),{lastLogin:Re()}):await Mf(De(he,"users",n.uid),{uid:n.uid,email:n.email,displayName:n.displayName,photoURL:n.photoURL,role:"student",purchasedCourses:[],createdAt:Re(),lastLogin:Re(),progress:{}}),{success:!0,user:n}}catch(e){return console.error("Google login error:",e),{success:!1,error:this.getErrorMessage(e.code)}}}async logout(){try{return await lk(Ks),{success:!0}}catch(e){return console.error("Logout error:",e),{success:!1,error:e.message}}}async resetPassword(e){try{return await ek(Ks,e),{success:!0,message:"Email de rinitialisation envoy"}}catch(n){return console.error("Password reset error:",n),{success:!1,error:this.getErrorMessage(n.code)}}}async getUserData(e){try{const n=await Hr(De(he,"users",e));return n.exists()?{success:!0,data:n.data()}:{success:!1,error:"Utilisateur introuvable"}}catch(n){return console.error("Get user data error:",n),{success:!1,error:n.message}}}getErrorMessage(e){return{"auth/email-already-in-use":"Cet email est dj utilis","auth/invalid-email":"Email invalide","auth/operation-not-allowed":"Opration non autorise","auth/weak-password":"Mot de passe trop faible (minimum 6 caractres)","auth/user-disabled":"Ce compte a t dsactiv","auth/user-not-found":"Aucun utilisateur trouv avec cet email","auth/wrong-password":"Mot de passe incorrect","auth/too-many-requests":"Trop de tentatives. Ressayez plus tard","auth/network-request-failed":"Erreur de connexion rseau","auth/popup-closed-by-user":"Fentre de connexion ferme","auth/requires-recent-login":"Veuillez vous reconnecter pour effectuer cette action"}[e]||"Une erreur est survenue"}}const ts=new AL,PL=void 0;class CL{constructor(){this.messaging=null}async initialize(){try{return this.messaging=IL(),console.log(" FCM initialis"),!0}catch(e){return console.error(" Erreur initialisation FCM:",e),!1}}async requestPermission(){try{const e=await Notification.requestPermission();return console.log(" Permission notification:",e),e==="granted"?!0:(e==="denied"&&console.log(" Permission refuse"),!1)}catch(e){return console.error(" Erreur permission:",e),!1}}async getDeviceToken(e){try{this.messaging||await this.initialize();const n=await NL(this.messaging,{vapidKey:PL});return n?(console.log(" FCM Token:",n),e&&await Nn(De(he,"users",e),{fcmTokens:HT(n),lastTokenUpdate:new Date}),n):(console.log(" Impossible de rcuprer le token"),null)}catch(n){return console.error(" Erreur rcupration token:",n),null}}async subscribeToNotifications(e){try{if(!("Notification"in window))return console.log(" Notifications non supportes"),{success:!1,error:"Notifications non supportes"};if(!await this.requestPermission())return{success:!1,error:"Permission refuse"};const r=await this.getDeviceToken(e);return r?{success:!0,token:r}:{success:!1,error:"Impossible de rcuprer le token"}}catch(n){return console.error(" Erreur souscription:",n),{success:!1,error:n.message}}}onMessageReceived(e){if(!this.messaging){console.error(" FCM non initialis");return}SL(this.messaging,n=>{console.log(" Message reu (foreground):",n),n.notification&&new Notification(n.notification.title,{body:n.notification.body,icon:"/logo.png"}),e&&e(n)})}}const ru=new CL,xb=R.createContext({}),en=()=>{const t=R.useContext(xb);if(!t)throw new Error("useAuth must be used within AuthProvider");return t},kL=({children:t})=>{const[e,n]=R.useState(null),[r,s]=R.useState(null),[i,o]=R.useState(!0),[u,c]=R.useState(null),d=async y=>{try{const C=await ts.getUserData(y);if(C.success)return s(C.data),console.log("Loaded userProfile from Firestore:",C.data),C.data}catch(C){console.error("Error loading user profile:",C)}return null};R.useEffect(()=>ak(Ks,async C=>{if(n(C),console.log("Auth state changed - uid:",(C==null?void 0:C.uid)||null),C){const L=await d(C.uid);console.log("After loadUserProfile - userProfile:",L),(L==null?void 0:L.role)!=="admin"?(await ru.initialize(),(await ru.subscribeToNotifications(C.uid)).success&&console.log(" Notifications actives"),ru.onMessageReceived(I=>{console.log(" Nouvelle notification:",I)})):console.log("Notifications skipped for admin user")}else s(null);o(!1)}),[]);const f=async(y,C,L)=>{c(null);const V=await ts.register(y,C,L);return V.success||c(V.error),V},g=async(y,C)=>{c(null);const L=await ts.login(y,C);return L.success||c(L.error),L},p=async()=>{c(null);const y=await ts.loginWithGoogle();return y.success||c(y.error),y},E=async()=>{c(null);const y=await ts.logout();return y.success||c(y.error),y},N=async y=>{c(null);const C=await ts.resetPassword(y);return C.success||c(C.error),C},T=async y=>{c(null);const C=await ts.updateUserProfile(y);return C.success?await d(e.uid):c(C.error),C},A=()=>(r==null?void 0:r.role)==="admin",x={currentUser:e,userProfile:r,loading:i,error:u,register:f,login:g,loginWithGoogle:p,logout:E,resetPassword:N,updateProfile:T,isAdmin:A,hasAccessToCourse:y=>{var C;return((C=r==null?void 0:r.purchasedCourses)==null?void 0:C.includes(y))||A()},setError:c};return l.jsx(xb.Provider,{value:x,children:!i&&t})};function xo({children:t,adminOnly:e=!1}){const{currentUser:n,userProfile:r,loading:s}=en();return s?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})}):(console.log("ProtectedRoute - adminOnly:",e,"currentUser:",!!n,"userProfile:",r),n?e&&(r==null?void 0:r.role)!=="admin"?(console.log("ProtectedRoute blocking admin route - userProfile.role:",r==null?void 0:r.role),l.jsx(lf,{to:"/",replace:!0})):t:(console.log("ProtectedRoute redirecting to /login because no currentUser"),l.jsx(lf,{to:"/login",replace:!0})))}/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jL=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),G=(t,e)=>{const n=R.forwardRef(({color:r="currentColor",size:s=24,strokeWidth:i=2,absoluteStrokeWidth:o,className:u="",children:c,...d},f)=>R.createElement("svg",{ref:f,...RL,width:s,height:s,stroke:r,strokeWidth:o?Number(i)*24/Number(s):i,className:["lucide",`lucide-${jL(t)}`,u].join(" "),...d},[...e.map(([g,p])=>R.createElement(g,p)),...Array.isArray(c)?c:[c]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OL=G("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=G("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Li=G("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=G("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wb=G("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LL=G("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=G("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=G("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=G("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=G("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FL=G("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=G("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=G("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Eb=G("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tb=G("Chrome",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["line",{x1:"21.17",x2:"12",y1:"8",y2:"8",key:"a0cw5f"}],["line",{x1:"3.95",x2:"8.54",y1:"6.06",y2:"14",key:"1kftof"}],["line",{x1:"10.88",x2:"15.46",y1:"21.94",y2:"14",key:"1ymyh8"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=G("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ia=G("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=G("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=G("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HL=G("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=G("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=G("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GL=G("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=G("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gm=G("Loader",[["line",{x1:"12",x2:"12",y1:"2",y2:"6",key:"gza1u7"}],["line",{x1:"12",x2:"12",y1:"18",y2:"22",key:"1qhbu9"}],["line",{x1:"4.93",x2:"7.76",y1:"4.93",y2:"7.76",key:"xae44r"}],["line",{x1:"16.24",x2:"19.07",y1:"16.24",y2:"19.07",key:"bxnmvf"}],["line",{x1:"2",x2:"6",y1:"12",y2:"12",key:"89khin"}],["line",{x1:"18",x2:"22",y1:"12",y2:"12",key:"pb8tfm"}],["line",{x1:"4.93",x2:"7.76",y1:"19.07",y2:"16.24",key:"1uxjnu"}],["line",{x1:"16.24",x2:"19.07",y1:"7.76",y2:"4.93",key:"6duxfx"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mi=G("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YL=G("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=G("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XL=G("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=G("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=G("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xu=G("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uf=G("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e4=G("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const t4=G("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bb=G("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ib=G("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n4=G("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nb=G("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qm=G("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ff=G("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r4=G("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W0=G("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s4=G("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ym=G("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bc=G("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sb=G("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $f=G("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);function i4(){var T,A;const[t,e]=R.useState({email:"",password:""}),[n,r]=R.useState(!1),{login:s,loginWithGoogle:i,error:o,setError:u,userProfile:c}=en(),d=Zt(),g=((A=(T=Cs().state)==null?void 0:T.from)==null?void 0:A.pathname)||"/",p=async w=>{w.preventDefault(),r(!0);const x=await s(t.email,t.password);x.success&&setTimeout(()=>{if(x.user){const y=setInterval(()=>{c&&(clearInterval(y),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(y),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},E=async()=>{r(!0);const w=await i();w.success&&setTimeout(()=>{if(w.user){const x=setInterval(()=>{c&&(clearInterval(x),c.role==="admin"?d("/admin",{replace:!0}):d(g,{replace:!0}))},100);setTimeout(()=>{clearInterval(x),d(g,{replace:!0})},3e3)}else d(g,{replace:!0})},500),r(!1)},N=w=>{e({...t,[w.target.name]:w.target.value}),o&&u(null)};return l.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-green-100 via-blue-50 to-purple-100 flex items-center justify-center p-4",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-green-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:l.jsx(Je,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent mb-2",children:"Bon retour !"}),l.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[l.jsx(Qm,{className:"w-4 h-4"}),"Connectez-vous pour continuer"]})]}),o&&l.jsxs("div",{className:"mb-6 bg-red-50/90 backdrop-blur-sm border border-red-200 rounded-2xl p-4 flex items-start gap-3 animate-shake",children:[l.jsx(OL,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),l.jsx("p",{className:"text-red-700 text-sm",children:o})]}),l.jsxs("button",{onClick:E,disabled:n,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[l.jsx(Tb,{className:"w-5 h-5 group-hover:rotate-12 transition"}),l.jsx("span",{className:"font-medium",children:"Continuer avec Google"})]}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),l.jsxs("form",{onSubmit:p,className:"space-y-5",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Na,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),l.jsx("input",{type:"email",name:"email",value:t.email,onChange:N,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:"exemple@email.com"})]})]}),l.jsxs("div",{className:"group",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Mot de passe"}),l.jsx(de,{to:"/forgot-password",className:"text-sm text-green-600 hover:text-green-700 font-medium transition",children:"Oubli?"})]}),l.jsxs("div",{className:"relative",children:[l.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-green-500 transition"}),l.jsx("input",{type:"password",name:"password",value:t.password,onChange:N,required:!0,className:"w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 border-gray-200 rounded-2xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition-all outline-none",placeholder:""})]})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 hover:from-green-600 hover:to-blue-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:n?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Connexion..."]}):"Se connecter"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Pas encore de compte?"," ",l.jsx(de,{to:"/register",className:"text-green-600 hover:text-green-700 font-semibold hover:underline transition",children:"S'inscrire gratuitement"})]})]}),l.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-green-600 to-blue-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function o4(){const[t,e]=R.useState({displayName:"",email:"",password:"",confirmPassword:""}),[n,r]=R.useState({}),[s,i]=R.useState(!1),{register:o,loginWithGoogle:u}=en(),c=Zt(),d=()=>{const T={};return t.displayName.trim()||(T.displayName="Le nom est requis"),t.email.trim()?/\S+@\S+\.\S+/.test(t.email)||(T.email="Email invalide"):T.email="L'email est requis",t.password?t.password.length<6&&(T.password="Minimum 6 caractres"):T.password="Le mot de passe est requis",t.password!==t.confirmPassword&&(T.confirmPassword="Les mots de passe ne correspondent pas"),r(T),Object.keys(T).length===0},f=async T=>{if(T.preventDefault(),!d())return;i(!0),(await o(t.email,t.password,t.displayName)).success&&c("/"),i(!1)},g=async()=>{i(!0),(await u()).success&&c("/"),i(!1)},p=T=>{e({...t,[T.target.name]:T.target.value}),n[T.target.name]&&r({...n,[T.target.name]:""})},N=(()=>{const T=t.password;if(!T)return{strength:0,label:"",color:""};let A=0;return T.length>=6&&A++,T.length>=8&&A++,/[a-z]/.test(T)&&/[A-Z]/.test(T)&&A++,/\d/.test(T)&&A++,/[^a-zA-Z\d]/.test(T)&&A++,[{strength:1,label:"Faible",color:"bg-red-500"},{strength:2,label:"Moyen",color:"bg-yellow-500"},{strength:3,label:"Bon",color:"bg-blue-500"},{strength:4,label:"Fort",color:"bg-green-500"},{strength:5,label:"Excellent",color:"bg-green-600"}][A-1]||{strength:0,label:"",color:""}})();return l.jsxs("div",{className:"min-h-screen relative overflow-hidden bg-gradient-to-br from-purple-100 via-pink-50 to-blue-100 flex items-center justify-center p-4",children:[l.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[l.jsx("div",{className:"absolute -top-40 -left-40 w-80 h-80 bg-purple-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob"}),l.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-pink-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-2000"}),l.jsx("div",{className:"absolute -bottom-40 left-20 w-80 h-80 bg-blue-300 rounded-full mix-blend-multiply filter blur-3xl opacity-70 animate-blob animation-delay-4000"})]}),l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsxs("div",{className:"relative backdrop-blur-xl bg-white/70 rounded-3xl shadow-2xl border border-white/20 p-8 md:p-10",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx(de,{to:"/",className:"inline-flex items-center justify-center space-x-2 mb-4",children:l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-2xl flex items-center justify-center shadow-lg transform hover:scale-110 transition",children:l.jsx(Je,{className:"w-8 h-8 text-white"})})}),l.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent mb-2",children:"Crer un compte"}),l.jsxs("p",{className:"text-gray-600 flex items-center justify-center gap-1",children:[l.jsx(Qm,{className:"w-4 h-4"}),"Commencez votre apprentissage"]})]}),l.jsxs("button",{onClick:g,disabled:s,className:"group w-full flex items-center justify-center gap-3 bg-white hover:bg-gray-50 border-2 border-gray-200 text-gray-700 py-3.5 rounded-2xl transition-all disabled:opacity-50 mb-6 shadow-md hover:shadow-xl transform hover:-translate-y-0.5",children:[l.jsx(Tb,{className:"w-5 h-5 group-hover:rotate-12 transition"}),l.jsx("span",{className:"font-medium",children:"S'inscrire avec Google"})]}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"absolute inset-0 flex items-center",children:l.jsx("div",{className:"w-full border-t border-gray-300"})}),l.jsx("div",{className:"relative flex justify-center text-sm",children:l.jsx("span",{className:"px-4 bg-white/70 backdrop-blur-sm text-gray-500 font-medium",children:"Ou avec email"})})]}),l.jsxs("form",{onSubmit:f,className:"space-y-5",children:[l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),l.jsxs("div",{className:"relative",children:[l.jsx(Ym,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"text",name:"displayName",value:t.displayName,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.displayName?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"Ahmed Ben Salem"})]}),n.displayName&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.displayName]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Na,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"email",name:"email",value:t.email,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.email?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:"exemple@email.com"})]}),n.email&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.email]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"password",name:"password",value:t.password,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""})]}),t.password&&!n.password&&l.jsx("div",{className:"mt-2",children:l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsx("div",{className:"flex-1 h-1.5 bg-gray-200 rounded-full overflow-hidden",children:l.jsx("div",{className:`h-full transition-all duration-300 ${N.color}`,style:{width:`${N.strength/5*100}%`}})}),l.jsx("span",{className:"text-xs font-medium text-gray-600",children:N.label})]})}),n.password&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.password]})]}),l.jsxs("div",{className:"group",children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Confirmer le mot de passe"}),l.jsxs("div",{className:"relative",children:[l.jsx(Mi,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400 group-focus-within:text-purple-500 transition"}),l.jsx("input",{type:"password",name:"confirmPassword",value:t.confirmPassword,onChange:p,className:`w-full pl-12 pr-4 py-3.5 bg-white/50 backdrop-blur-sm border-2 rounded-2xl focus:ring-4 focus:ring-purple-500/20 focus:bg-white transition-all outline-none ${n.confirmPassword?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-purple-500"}`,placeholder:""}),t.confirmPassword&&t.password===t.confirmPassword&&l.jsx(pt,{className:"absolute right-4 top-1/2 transform -translate-y-1/2 w-5 h-5 text-green-500"})]}),n.confirmPassword&&l.jsxs("p",{className:"text-red-500 text-sm mt-1.5 flex items-center gap-1",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"}),n.confirmPassword]})]}),l.jsx("button",{type:"submit",disabled:s,className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-4 rounded-2xl font-semibold shadow-lg hover:shadow-2xl transition-all disabled:opacity-50 transform hover:-translate-y-0.5 disabled:transform-none",children:s?l.jsxs("span",{className:"flex items-center justify-center gap-2",children:[l.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Cration..."]}):"Crer mon compte"})]}),l.jsxs("p",{className:"text-center text-gray-600 mt-8",children:["Vous avez dj un compte?"," ",l.jsx(de,{to:"/login",className:"text-purple-600 hover:text-purple-700 font-semibold hover:underline transition",children:"Se connecter"})]})]}),l.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-purple-600 to-pink-600 rounded-3xl blur-2xl opacity-20 -z-10"})]})]})}function a4(){const[t,e]=R.useState(""),[n,r]=R.useState(!1),[s,i]=R.useState(!1),[o,u]=R.useState(""),{resetPassword:c}=en(),d=async f=>{if(f.preventDefault(),u(""),!t.trim()){u("Veuillez entrer votre email");return}r(!0);const g=await c(t);g.success?i(!0):u(g.error),r(!1)};return s?l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8 text-center",children:[l.jsx(pt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Email envoy !"}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Nous avons envoy un lien de rinitialisation  ",l.jsx("strong",{children:t})]}),l.jsx("p",{className:"text-sm text-gray-500 mb-8",children:"Vrifiez votre bote de rception et suivez les instructions pour rinitialiser votre mot de passe."}),l.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-green-500 hover:text-green-600 font-medium",children:[l.jsx(Li,{className:"w-4 h-4"}),"Retour  la connexion"]})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"max-w-md w-full bg-white rounded-2xl shadow-xl p-8",children:[l.jsxs(de,{to:"/login",className:"inline-flex items-center gap-2 text-gray-600 hover:text-gray-800 mb-6",children:[l.jsx(Li,{className:"w-4 h-4"}),"Retour"]}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"Mot de passe oubli ?"}),l.jsx("p",{className:"text-gray-600 mt-2",children:"Entrez votre email pour recevoir un lien de rinitialisation"})]}),o&&l.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:l.jsx("p",{className:"text-red-700 text-sm",children:o})}),l.jsxs("form",{onSubmit:d,className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),l.jsxs("div",{className:"relative",children:[l.jsx(Na,{className:"absolute left-3 top-3 w-5 h-5 text-gray-400"}),l.jsx("input",{type:"email",value:t,onChange:f=>e(f.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent",placeholder:"email@example.com",required:!0})]})]}),l.jsx("button",{type:"submit",disabled:n,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 font-medium",children:n?"Envoi en cours...":"Envoyer le lien"})]})]})})}const Ab="/admin",l4="/dashboard";class u4{constructor(){this.cloudName="dbsemu1xo",this.uploadPreset="course_thumbnails",console.log(" Cloudinary Config:",{cloudName:this.cloudName,uploadPreset:this.uploadPreset}),this.cloudName||console.error(" VITE_CLOUDINARY_CLOUD_NAME is not set! Check your .env file")}async uploadImage(e,n="courses"){var r;try{const s=new FormData;s.append("file",e),s.append("upload_preset",this.uploadPreset),s.append("folder",n);const i=await fetch(`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,{method:"POST",body:s});if(!i.ok){const u=await i.json();throw new Error(((r=u.error)==null?void 0:r.message)||"Upload failed")}const o=await i.json();return console.log(" Image uploaded to Cloudinary:",o.secure_url),{success:!0,url:o.secure_url,publicId:o.public_id}}catch(s){return console.error(" Cloudinary upload error:",s),{success:!1,error:s.message}}}async deleteImage(e){try{return console.log(" Image deletion not implemented (requires server-side)"),{success:!0}}catch(n){return console.error(" Cloudinary delete error:",n),{success:!1,error:n.message}}}getOptimizedUrl(e,n={}){const{width:r=800,height:s=600,quality:i="auto",format:o="auto"}=n;if(!e||!e.includes("cloudinary.com"))return e;const u=`w_${r},h_${s},c_fill,q_${i},f_${o}`;return e.replace("/upload/",`/upload/${u}/`)}}const c4=new u4;class d4{async createCourse(e,n){try{let r=null;n&&(r=await this.uploadThumbnail(n));const s={...e,thumbnail:r,enrolledCount:0,status:"draft",createdAt:Re(),updatedAt:Re()},i=await Ku(Ar(he,"courses"),s);return console.log(" Cours cr:",i.id),{success:!0,id:i.id,course:s}}catch(r){return console.error(" Erreur cration cours:",r),{success:!1,error:r.message}}}async updateCourse(e,n,r){try{const s=De(he,"courses",e);let i={...n};return r&&(i.thumbnail=await this.uploadThumbnail(r)),i.updatedAt=Re(),await Nn(s,i),console.log(" Cours mis  jour:",e),{success:!0}}catch(s){return console.error(" Erreur mise  jour cours:",s),{success:!1,error:s.message}}}async deleteCourse(e){try{const n=De(he,"courses",e);return await Nn(n,{status:"archived",archivedAt:Re()}),console.log(" Cours archiv:",e),{success:!0}}catch(n){return console.error(" Erreur suppression cours:",n),{success:!1,error:n.message}}}async getCourseById(e){try{const n=De(he,"courses",e),r=await Hr(n);return r.exists()?{success:!0,course:{id:r.id,...r.data()}}:{success:!1,error:"Cours introuvable"}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message}}}async getCourses(e={}){try{let n=Ar(he,"courses");const r=[];return e.category&&r.push(ai("category","==",e.category)),e.status?r.push(ai("status","==",e.status)):r.push(ai("status","!=","archived")),e.level&&r.push(ai("level","==",e.level)),r.push(Lf("createdAt","desc")),e.limit&&r.push(_O(e.limit)),e.startAfter&&r.push(xO(e.startAfter)),n=Df(n,...r),{success:!0,courses:(await Wu(n)).docs.map(o=>({id:o.id,...o.data()}))}}catch(n){return console.error(" Erreur rcupration cours:",n),{success:!1,error:n.message,courses:[]}}}async publishCourse(e){try{const n=De(he,"courses",e);return await Nn(n,{status:"published",publishedAt:Re(),updatedAt:Re()}),console.log(" Cours publi:",e),{success:!0}}catch(n){return console.error(" Erreur publication cours:",n),{success:!1,error:n.message}}}async uploadThumbnail(e){try{const n=await c4.uploadImage(e,"courses/thumbnails");if(!n.success)throw new Error(n.error||"Upload failed");return console.log(" Thumbnail uploaded:",n.url),n.url}catch(n){throw console.error(" Erreur upload thumbnail:",n),n}}async duplicateCourse(e){try{const{success:n,course:r}=await this.getCourseById(e);if(!n)return{success:!1,error:"Cours introuvable"};const s={...r,title:`${r.title} (Copie)`,status:"draft",enrolledCount:0};return delete s.id,await this.createCourse(s,null)}catch(n){return console.error(" Erreur duplication cours:",n),{success:!1,error:n.message}}}}const un=new d4;function h4(){const{currentUser:t,userProfile:e}=en(),n=Zt(),[r,s]=R.useState([]),[i,o]=R.useState({totalCourses:0,totalStudents:0,totalHours:0}),[u,c]=R.useState(!0);R.useEffect(()=>{d()},[]);const d=async()=>{try{const p=await un.getCourses({status:"published",limit:6,sortBy:"enrolledCount",sortOrder:"desc"});p.success&&(s(p.courses),o({totalCourses:p.total||p.courses.length,totalStudents:p.courses.reduce((E,N)=>E+(N.enrolledCount||0),0),totalHours:p.courses.reduce((E,N)=>E+(N.duration||0),0)}))}catch(p){console.error("Error loading home data:",p)}finally{c(!1)}},f=[{name:"Programmation",icon:"",color:"bg-blue-100 text-blue-600"},{name:"Design",icon:"",color:"bg-purple-100 text-purple-600"},{name:"Marketing",icon:"",color:"bg-green-100 text-green-600"},{name:"Business",icon:"",color:"bg-yellow-100 text-yellow-600"},{name:"Langues",icon:"",color:"bg-pink-100 text-pink-600"},{name:"Musique",icon:"",color:"bg-indigo-100 text-indigo-600"}],g=[{name:"Ahmed Ben Ali",role:"Dveloppeur Web",photo:"https://i.pravatar.cc/150?img=12",quote:"Les cours sont excellents et m'ont aid  progresser dans ma carrire.",rating:5},{name:"Fatima Khelifi",role:"Designer UI/UX",photo:"https://i.pravatar.cc/150?img=45",quote:"Une plateforme intuitive avec des instructeurs de qualit. Je recommande!",rating:5},{name:"Mohamed Trabelsi",role:"Marketing Manager",photo:"https://i.pravatar.cc/150?img=33",quote:"Les certificats obtenus m'ont permis de valoriser mon profil professionnel.",rating:5}];return l.jsxs("div",{className:"min-h-screen bg-white",children:[l.jsx("nav",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs("div",{className:"flex justify-between items-center h-16",children:[l.jsxs(de,{to:"/",className:"flex items-center space-x-2",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xl font-bold bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:"EduPlatform"})]}),l.jsxs("div",{className:"hidden md:flex items-center space-x-8",children:[l.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Cours"}),l.jsx(de,{to:"/courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Catgories"})]}),l.jsx("div",{className:"flex items-center gap-3",children:t?l.jsxs(l.Fragment,{children:[l.jsx(de,{to:"/my-courses",className:"text-gray-600 hover:text-gray-900 transition",children:"Mes Cours"}),l.jsx(de,{to:"/profile",className:"text-gray-600 hover:text-gray-900 transition",children:"Profil"}),(e==null?void 0:e.role)==="admin"&&l.jsx("button",{onClick:()=>n(Ab),className:"bg-purple-500 text-white px-4 py-2 rounded-lg hover:bg-purple-600 transition font-medium",children:"Admin"})]}):l.jsxs(l.Fragment,{children:[l.jsx(de,{to:"/login",className:"text-gray-600 hover:text-gray-900 transition font-medium",children:"Connexion"}),l.jsx(de,{to:"/register",className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-2 rounded-lg hover:shadow-lg transition font-medium",children:"S'inscrire"})]})})]})})}),l.jsxs("section",{className:"relative bg-gradient-to-br from-green-50 via-blue-50 to-purple-50 overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 bg-grid-pattern opacity-5"}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-20 md:py-32 relative",children:l.jsxs("div",{className:"grid md:grid-cols-2 gap-12 items-center",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"inline-flex items-center space-x-2 bg-green-100 text-green-700 px-4 py-2 rounded-full mb-6",children:[l.jsx(Qm,{className:"w-4 h-4"}),l.jsx("span",{className:"text-sm font-medium",children:"Plateforme d'apprentissage #1 en Tunisie"})]}),l.jsxs("h1",{className:"text-5xl md:text-6xl font-bold text-gray-900 mb-6 leading-tight",children:["Apprenez des comptences qui",l.jsxs("span",{className:"bg-gradient-to-r from-green-600 to-blue-600 bg-clip-text text-transparent",children:[" ","comptent"]})]}),l.jsx("p",{className:"text-xl text-gray-600 mb-8 leading-relaxed",children:"Accdez  des cours de qualit, crs par des experts. Dveloppez vos comptences et boostez votre carrire aujourd'hui."}),l.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[l.jsxs(de,{to:"/courses",className:"inline-flex items-center justify-center gap-2 bg-gradient-to-r from-green-500 to-blue-500 text-white px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg group",children:["Dcouvrir les cours",l.jsx(Ko,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]}),!t&&l.jsxs(de,{to:"/register",className:"inline-flex items-center justify-center gap-2 bg-white text-gray-800 px-8 py-4 rounded-lg border-2 border-gray-200 hover:border-green-500 hover:text-green-600 transition font-medium text-lg",children:[l.jsx(Uf,{className:"w-5 h-5"}),"Commencer gratuitement"]})]}),l.jsxs("div",{className:"grid grid-cols-3 gap-6 mt-12",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalCourses,"+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"Cours disponibles"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalStudents,"+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"tudiants actifs"})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[i.totalHours,"h+"]}),l.jsx("div",{className:"text-sm text-gray-600",children:"De contenu vido"})]})]})]}),l.jsxs("div",{className:"relative hidden md:block",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-green-400 to-blue-500 rounded-3xl transform rotate-6 opacity-20"}),l.jsxs("div",{className:"relative bg-white p-8 rounded-3xl shadow-2xl",children:[l.jsx("div",{className:"aspect-video bg-gradient-to-br from-gray-100 to-gray-200 rounded-xl flex items-center justify-center",children:l.jsx(Uf,{className:"w-20 h-20 text-gray-400"})}),l.jsxs("div",{className:"mt-4 space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]})]})]})})]}),l.jsx("section",{className:"py-20 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Cours populaires"}),l.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Dcouvrez nos cours les plus apprcis par les tudiants"})]}),u?l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:[1,2,3].map(p=>l.jsxs("div",{className:"bg-white rounded-xl shadow animate-pulse",children:[l.jsx("div",{className:"aspect-video bg-gray-200 rounded-t-xl"}),l.jsxs("div",{className:"p-6 space-y-3",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})]},p))}):r.length>0?l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:r.map(p=>l.jsxs(de,{to:`/courses/${p.id}`,className:"group bg-white rounded-xl shadow-lg hover:shadow-2xl transition overflow-hidden",children:[l.jsxs("div",{className:"aspect-video bg-gradient-to-br from-green-100 to-blue-100 relative overflow-hidden",children:[p.thumbnail?l.jsx("img",{src:p.thumbnail,alt:p.title,className:"w-full h-full object-cover group-hover:scale-110 transition duration-300"}):l.jsx("div",{className:"w-full h-full flex items-center justify-center",children:l.jsx(Je,{className:"w-16 h-16 text-gray-300"})}),l.jsx("div",{className:"absolute top-4 right-4 bg-white px-3 py-1 rounded-full text-sm font-semibold text-gray-900",children:p.price>0?`${p.price} DT`:"Gratuit"})]}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 text-xs rounded-full font-medium",children:p.category||"Gnral"}),l.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:p.level||"Dbutant"})]}),l.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 group-hover:text-green-600 transition line-clamp-2",children:p.title}),l.jsx("p",{className:"text-gray-600 text-sm mb-4 line-clamp-2",children:p.shortDescription||p.description}),l.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Bc,{className:"w-4 h-4"}),l.jsxs("span",{children:[p.enrolledCount||0," tudiants"]})]}),p.duration&&l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx(Ia,{className:"w-4 h-4"}),l.jsxs("span",{children:[p.duration,"h"]})]})]})]})]},p.id))}):l.jsxs("div",{className:"text-center py-12",children:[l.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("p",{className:"text-gray-600",children:"Aucun cours disponible pour le moment"})]}),l.jsx("div",{className:"text-center mt-12",children:l.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-green-600 hover:text-green-700 font-semibold text-lg group",children:["Voir tous les cours",l.jsx(Ko,{className:"w-5 h-5 group-hover:translate-x-1 transition"})]})})]})}),l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Explorez par catgorie"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Trouvez le domaine qui vous intresse"})]}),l.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-6",children:f.map(p=>l.jsxs(de,{to:`/courses?category=${p.name}`,className:"group p-6 bg-gray-50 hover:bg-white border-2 border-transparent hover:border-green-500 rounded-xl text-center transition",children:[l.jsx("div",{className:`w-16 h-16 mx-auto mb-3 ${p.color} rounded-full flex items-center justify-center text-3xl group-hover:scale-110 transition`,children:p.icon}),l.jsx("h3",{className:"font-semibold text-gray-900",children:p.name})]},p.name))})]})}),l.jsx("section",{className:"py-20 bg-gray-50",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Comment a marche?"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Commencez votre apprentissage en 3 tapes simples"})]}),l.jsxs("div",{className:"grid md:grid-cols-3 gap-8",children:[l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"1"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Parcourez les cours"}),l.jsx("p",{className:"text-gray-600",children:"Explorez notre catalogue et trouvez le cours qui correspond  vos objectifs"})]})}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-blue-500 to-purple-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"2"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Inscrivez-vous"}),l.jsx("p",{className:"text-gray-600",children:"Crez votre compte et achetez le cours en quelques clics scuriss"})]})}),l.jsx("div",{className:"relative",children:l.jsxs("div",{className:"bg-white p-8 rounded-2xl shadow-lg",children:[l.jsx("div",{className:"w-14 h-14 bg-gradient-to-br from-purple-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xl font-bold mb-6",children:"3"}),l.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Apprenez et progressez"}),l.jsx("p",{className:"text-gray-600",children:"Suivez les leons  votre rythme et obtenez votre certificat"})]})})]})]})}),l.jsx("section",{className:"py-20 bg-white",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"text-center mb-12",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-gray-900 mb-4",children:"Ce que disent nos tudiants"}),l.jsx("p",{className:"text-lg text-gray-600",children:"Rejoignez des milliers d'tudiants satisfaits"})]}),l.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:g.map((p,E)=>l.jsxs("div",{className:"bg-gray-50 p-8 rounded-2xl",children:[l.jsx("div",{className:"flex gap-1 mb-4",children:[...Array(p.rating)].map((N,T)=>l.jsx(Ff,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"},T))}),l.jsxs("p",{className:"text-gray-700 mb-6 italic",children:['"',p.quote,'"']}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("img",{src:p.photo,alt:p.name,className:"w-12 h-12 rounded-full"}),l.jsxs("div",{children:[l.jsx("div",{className:"font-semibold text-gray-900",children:p.name}),l.jsx("div",{className:"text-sm text-gray-600",children:p.role})]})]})]},E))})]})}),l.jsx("section",{className:"py-20 bg-gradient-to-br from-green-600 to-blue-600",children:l.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[l.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-6",children:"Prt  commencer votre apprentissage?"}),l.jsx("p",{className:"text-xl text-green-100 mb-8",children:"Rejoignez notre communaut et dveloppez vos comptences ds aujourd'hui"}),l.jsxs(de,{to:t?"/courses":"/register",className:"inline-flex items-center gap-2 bg-white text-green-600 px-8 py-4 rounded-lg hover:shadow-xl transition font-medium text-lg",children:[t?"Explorer les cours":"Commencer gratuitement",l.jsx(Ko,{className:"w-5 h-5"})]})]})}),l.jsx("footer",{className:"bg-gray-900 text-gray-300 py-12",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"grid md:grid-cols-4 gap-8 mb-8",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[l.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("span",{className:"text-xl font-bold text-white",children:"EduPlatform"})]}),l.jsx("p",{className:"text-sm",children:"Votre plateforme d'apprentissage en ligne pour dvelopper vos comptences"})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:"Plateforme"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Cours"})}),l.jsx("li",{children:l.jsx(de,{to:"/courses",className:"hover:text-white transition",children:"Catgories"})}),l.jsx("li",{children:l.jsx(de,{to:"/my-courses",className:"hover:text-white transition",children:"Mes Cours"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:" propos"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:" propos de nous"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Contact"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Devenir instructeur"})})]})]}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-white font-semibold mb-4",children:"Lgal"}),l.jsxs("ul",{className:"space-y-2 text-sm",children:[l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Conditions d'utilisation"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de confidentialit"})}),l.jsx("li",{children:l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Politique de cookies"})})]})]})]}),l.jsxs("div",{className:"border-t border-gray-800 pt-8 flex flex-col md:flex-row justify-between items-center",children:[l.jsx("p",{className:"text-sm",children:" 2025 EduPlatform. Tous droits rservs."}),l.jsxs("div",{className:"flex gap-4 mt-4 md:mt-0",children:[l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Facebook"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Twitter"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"LinkedIn"}),l.jsx("a",{href:"#",className:"hover:text-white transition",children:"Instagram"})]})]})]})})]})}function f4(){var S;const{currentUser:t,userProfile:e,logout:n}=en(),r=Zt(),[s,i]=R.useState(!1),[o,u]=R.useState("personal"),[c,d]=R.useState(!1),[f,g]=R.useState({displayName:(e==null?void 0:e.displayName)||"",phone:(e==null?void 0:e.phone)||"",bio:(e==null?void 0:e.bio)||""}),[p,E]=R.useState(e!=null&&e.fcmTokens&&e.fcmTokens.length>0?"enabled":"disabled"),[N,T]=R.useState(null),[A,w]=R.useState(!1),[x,y]=R.useState(null),C=async()=>{i(!0),await n(),r("/login")},L=async()=>{try{y(null),await Nn(De(he,"users",t.uid),{displayName:f.displayName,phone:f.phone,bio:f.bio}),y({type:"success",text:"Profil mis  jour avec succs!"}),d(!1),setTimeout(()=>y(null),3e3)}catch(b){y({type:"error",text:"Erreur: "+b.message})}},V=async()=>{if(!t)return;w(!0),T(null);const b=await ru.subscribeToNotifications(t.uid);b.success?(E("enabled"),T({type:"success",text:"Notifications actives"})):T({type:"error",text:b.error||"Impossible d'activer"}),w(!1),setTimeout(()=>T(null),3e3)},I=[{id:"personal",name:"Informations",icon:zL},{id:"security",name:"Scurit",icon:Mi},{id:"progress",name:"Progression",icon:W0}],_=[{label:"Cours suivis",value:((S=e==null?void 0:e.purchasedCourses)==null?void 0:S.length)||0,icon:Je,color:"text-blue-600 bg-blue-100"},{label:"Heures d'apprentissage",value:"0h",icon:Ia,color:"text-green-600 bg-green-100"},{label:"Certificats",value:0,icon:wb,color:"text-purple-600 bg-purple-100"}];return l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8",children:l.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8",children:[l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden mb-6",children:[l.jsx("div",{className:"h-32 bg-gradient-to-r from-green-500 via-blue-500 to-purple-500"}),l.jsx("div",{className:"px-8 pb-8",children:l.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-end gap-6 -mt-16",children:[l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"w-32 h-32 rounded-3xl bg-white p-2 shadow-xl",children:t!=null&&t.photoURL?l.jsx("img",{src:t.photoURL,alt:e==null?void 0:e.displayName,className:"w-full h-full rounded-2xl object-cover"}):l.jsx("div",{className:"w-full h-full rounded-2xl bg-gradient-to-br from-green-400 to-blue-400 flex items-center justify-center",children:l.jsx(Ym,{className:"w-16 h-16 text-white"})})}),l.jsx("button",{className:"absolute bottom-2 right-2 w-10 h-10 bg-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-50 transition opacity-0 group-hover:opacity-100",children:l.jsx(FL,{className:"w-5 h-5 text-gray-600"})})]}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-1",children:(e==null?void 0:e.displayName)||"Utilisateur"}),l.jsx("p",{className:"text-gray-600 mb-3",children:t==null?void 0:t.email}),l.jsxs("div",{className:"flex flex-wrap gap-2",children:[l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-green-100 text-green-700 text-sm font-medium rounded-full",children:[l.jsx(Nb,{className:"w-4 h-4"}),(e==null?void 0:e.role)==="admin"?"Administrateur":"tudiant"]}),l.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1.5 bg-blue-100 text-blue-700 text-sm font-medium rounded-full",children:[l.jsx(Na,{className:"w-4 h-4"}),"Email vrifi"]})]})]}),l.jsxs("button",{onClick:C,disabled:s,className:"inline-flex items-center gap-2 px-6 py-3 bg-red-500 hover:bg-red-600 text-white rounded-xl transition disabled:opacity-50 font-medium shadow-lg hover:shadow-xl",children:[l.jsx(YL,{className:"w-5 h-5"}),s?"Dconnexion...":"Dconnexion"]})]})})]}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:_.map((b,k)=>l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition",children:[l.jsx("div",{className:"flex items-center justify-between mb-4",children:l.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center ${b.color}`,children:l.jsx(b.icon,{className:"w-6 h-6"})})}),l.jsx("p",{className:"text-gray-600 text-sm mb-1",children:b.label}),l.jsx("p",{className:"text-3xl font-bold text-gray-900",children:b.value})]},k))}),l.jsxs("div",{className:"bg-white rounded-3xl shadow-xl overflow-hidden",children:[l.jsx("div",{className:"border-b border-gray-200 px-8 pt-6",children:l.jsx("nav",{className:"flex gap-8",children:I.map(b=>{const k=b.icon;return l.jsxs("button",{onClick:()=>u(b.id),className:`pb-4 px-2 border-b-2 transition font-medium flex items-center gap-2 ${o===b.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[l.jsx(k,{className:"w-5 h-5"}),b.name]},b.id)})})}),l.jsxs("div",{className:"p-8",children:[o==="personal"&&l.jsxs("div",{className:"space-y-6",children:[x&&l.jsxs("div",{className:`p-4 rounded-xl flex items-center gap-2 ${x.type==="success"?"bg-green-50 text-green-700":"bg-red-50 text-red-700"}`,children:[l.jsx("div",{className:`w-2 h-2 rounded-full ${x.type==="success"?"bg-green-500":"bg-red-500"}`}),x.text]}),l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Informations personnelles"}),c?l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("button",{onClick:L,className:"inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-xl hover:bg-green-600 transition font-medium",children:[l.jsx(bb,{className:"w-4 h-4"}),"Enregistrer"]}),l.jsxs("button",{onClick:()=>d(!1),className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-200 text-gray-700 rounded-xl hover:bg-gray-300 transition",children:[l.jsx($f,{className:"w-4 h-4"}),"Annuler"]})]}):l.jsxs("button",{onClick:()=>d(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-green-600 hover:bg-green-50 rounded-xl transition font-medium",children:[l.jsx(ZL,{className:"w-4 h-4"}),"Modifier"]})]}),l.jsxs("div",{className:"grid gap-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Nom complet"}),c?l.jsx("input",{type:"text",value:f.displayName,onChange:b=>g({...f,displayName:b.target.value}),className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.displayName||"Non renseign"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Adresse email"}),l.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 rounded-xl",children:[l.jsx(Na,{className:"w-5 h-5 text-gray-400"}),l.jsx("span",{className:"text-gray-900",children:t==null?void 0:t.email}),l.jsx("span",{className:"ml-auto px-2 py-1 bg-green-100 text-green-700 text-xs rounded-full font-medium",children:"Vrifi"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Tlphone"}),c?l.jsx("input",{type:"tel",value:f.phone,onChange:b=>g({...f,phone:b.target.value}),placeholder:"+216 12 345 678",maxLength:"15",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900",children:f.phone||"Non renseign"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Bio"}),c?l.jsx("textarea",{value:f.bio,onChange:b=>g({...f,bio:b.target.value}),rows:"3",placeholder:"Parlez-nous de vous...",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:border-green-500 focus:ring-4 focus:ring-green-500/20 focus:bg-white transition outline-none resize-none"}):l.jsx("p",{className:"px-4 py-3 bg-gray-50 rounded-xl text-gray-900 min-h-[80px]",children:f.bio||"Aucune bio renseigne"})]})]})]}),o==="security"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Scurit et confidentialit"}),l.jsx("div",{className:"p-6 bg-gradient-to-r from-blue-50 to-purple-50 rounded-2xl border border-blue-100",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:l.jsx(ML,{className:"w-6 h-6 text-white"})}),l.jsxs("div",{children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Notifications push"}),l.jsx("p",{className:"text-sm text-gray-600",children:"Recevez des notifications pour vos paiements et cours"}),l.jsxs("p",{className:"text-sm font-medium mt-2",children:["Statut: ",l.jsx("span",{className:p==="enabled"?"text-green-600":"text-gray-500",children:p==="enabled"?"Actives ":"Dsactives"})]}),N&&l.jsx("p",{className:`text-sm mt-2 ${N.type==="success"?"text-green-600":"text-red-600"}`,children:N.text})]})]}),l.jsx("button",{onClick:V,disabled:A||p==="enabled",className:"px-4 py-2 bg-blue-500 text-white rounded-xl hover:bg-blue-600 transition disabled:opacity-50 font-medium",children:p==="enabled"?"Actives":A?"Activation...":"Activer"})]})}),l.jsx("div",{className:"p-6 bg-gray-50 rounded-2xl",children:l.jsxs("div",{className:"flex items-start gap-4",children:[l.jsx("div",{className:"w-12 h-12 bg-gray-200 rounded-xl flex items-center justify-center",children:l.jsx(Mi,{className:"w-6 h-6 text-gray-600"})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Mot de passe"}),l.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Dernire modification: Jamais"}),l.jsx("button",{className:"px-4 py-2 bg-white border-2 border-gray-200 text-gray-700 rounded-xl hover:border-gray-300 transition font-medium",children:"Changer le mot de passe"})]})]})})]}),o==="progress"&&l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Ma progression"}),l.jsxs("div",{className:"text-center py-12",children:[l.jsx(W0,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucune progression pour le moment"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Inscrivez-vous  un cours pour commencer votre apprentissage"}),l.jsxs("button",{onClick:()=>r("/courses"),className:"inline-flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[l.jsx(Je,{className:"w-5 h-5"}),"Explorer les cours"]})]})]})]})]})]})})}const p4="https://sandbox.paymee.tn/api/v2",m4="73af59aae675d845db28616e3e9304f2473d7090",g4="https://plateforme-educative.onrender.com";function y4(t){if(typeof t=="boolean")return t?"completed":"failed";if(typeof t=="number")return t===1?"completed":"failed";if(!t)return"failed";const e=String(t).trim().toLowerCase(),n=new Set(["1","true","yes","paid","success","ok","completed"]),r=new Set(["pending","in_progress","processing","wait"]),s=new Set(["0","false","failed","cancelled","canceled"]);return n.has(e)?"completed":r.has(e)?"pending":s.has(e)?"failed":"unknown"}const v4=()=>{const t="https://e-learing-58b34.web.app";return t.endsWith("/")?t.slice(0,-1):t};class _4{async initiatePayment(e,n,r,s){var i,o;try{console.log(" Initiating payment...",{courseId:e,courseTitle:n,amount:r});let u;try{u=v4()}catch(T){return console.error(" HTTPS check failed:",T.message),{success:!1,error:T.message}}const c=await Ku(Ar(he,"payments"),{userId:s.uid,courseId:e,courseTitle:n,amount:r,currency:"TND",status:"pending",createdAt:Re(),userEmail:s.email,userName:s.displayName});console.log(" Payment document created:",c.id);const d=((i=s.displayName)==null?void 0:i.split(" ")[0])||"User",f=((o=s.displayName)==null?void 0:o.split(" ").slice(1).join(" "))||"Student";let g=s.phone||"12345678";g=g.replace(/\D/g,""),g.length!==8&&(g="12345678");const p={amount:parseFloat(r),note:`Cours ${n}`,first_name:d,last_name:f,email:s.email,phone:g,return_url:`${u}/payment/success?payment_id=${c.id}`,cancel_url:`${u}/payment/cancel?payment_id=${c.id}`,webhook_url:`${g4}/paymee-webhook`,order_id:c.id};console.log(" Sending to Paymee:",p);const E=await fetch(`${p4}/payments/create`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Token ${m4}`},body:JSON.stringify(p)});console.log(" Response status:",E.status);const N=await E.json();if(console.log(" Paymee response:",N),!N.status){if(console.error(" Paymee error:",N),N.errors&&Array.isArray(N.errors)){const T=N.errors.map(A=>typeof A=="object"?Object.entries(A).map(([w,x])=>`${w}: ${x}`).join(", "):A).join(" | ");throw new Error(`Erreur Paymee: ${T}`)}throw new Error(N.message||"Erreur initialisation paiement")}return await Nn(De(he,"payments",c.id),{paymeeToken:N.data.token,paymentUrl:N.data.payment_url,updatedAt:Re()}),console.log(" Payment ready:",N.data.payment_url),{success:!0,paymentId:c.id,paymentUrl:N.data.payment_url,token:N.data.token}}catch(u){return console.error(" Payment error:",u),{success:!1,error:u.message}}}async verifyPayment(e){try{const n=await Hr(De(he,"payments",e));if(!n.exists())return{success:!1,error:"Paiement introuvable"};const r=n.data();return{success:!0,status:y4(r.status),rawStatus:r.status,data:r}}catch(n){return console.error("Verification error:",n),{success:!1,error:n.message}}}}const Pb=new _4;function Cb({course:t}){var c;const{currentUser:e,userProfile:n}=en(),[r,s]=R.useState(!1),[i,o]=R.useState(null),u=async()=>{var f;if(!e){o("Veuillez vous connecter pour acheter ce cours");return}if((f=n==null?void 0:n.purchasedCourses)!=null&&f.includes(t.id)){o("Vous avez dj accs  ce cours");return}s(!0),o(null);const d=await Pb.initiatePayment(t.id,t.title,t.price,{uid:e.uid,email:e.email,displayName:(n==null?void 0:n.displayName)||e.displayName,phone:(n==null?void 0:n.phone)||"00000000"});d.success?window.location.href=d.paymentUrl:(o(d.error),s(!1))};return(c=n==null?void 0:n.purchasedCourses)!=null&&c.includes(t.id)?l.jsx("button",{disabled:!0,className:"w-full bg-gray-300 text-gray-600 py-3 rounded-lg cursor-not-allowed",children:"Cours dj achet"}):t.isFree?l.jsx("button",{onClick:()=>window.location.href=`/courses/${t.id}`,className:"w-full bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition",children:"Accder gratuitement"}):l.jsxs("div",{children:[i&&l.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:i}),l.jsx("button",{onClick:u,disabled:r,className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:r?l.jsxs(l.Fragment,{children:[l.jsx(Gm,{className:"w-5 h-5 animate-spin"}),"Chargement..."]}):l.jsxs(l.Fragment,{children:[l.jsx(HL,{className:"w-5 h-5"}),"Acheter pour ",t.price," TND"]})}),l.jsx("p",{className:"text-xs text-gray-500 text-center mt-2",children:"Paiement scuris via Paymee"})]})}function x4(){const[t,e]=R.useState([]),[n,r]=R.useState(!0);R.useEffect(()=>{s()},[]);const s=async()=>{r(!0);const i=await un.getCourses({status:"published"});i.success&&e(i.courses),r(!1)};return n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Nos Cours"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Dcouvrez notre collection de cours de qualit"})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.length===0?l.jsxs("div",{className:"col-span-full text-center py-12",children:[l.jsx(Je,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Aucun cours disponible"}),l.jsx("p",{className:"text-gray-600",children:"Revenez bientt pour dcouvrir de nouveaux cours!"})]}):t.map(i=>l.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden hover:shadow-xl transition-shadow",children:[l.jsx("img",{src:i.thumbnail||"/assets/images/default-course.png",alt:i.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("span",{className:"text-sm font-medium text-indigo-600 bg-indigo-100 px-2 py-1 rounded",children:i.category||"General"}),i.price===0&&l.jsx("span",{className:"text-sm font-medium text-green-600 bg-green-100 px-2 py-1 rounded",children:"Gratuit"})]}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:i.title}),l.jsx("p",{className:"text-gray-600 mb-4 line-clamp-2",children:i.description}),l.jsxs("div",{className:"flex items-center text-sm text-gray-500 mb-4",children:[l.jsx(Bc,{className:"w-4 h-4 mr-1"}),l.jsxs("span",{children:[i.enrolledCount||0," tudiants"]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("span",{className:"text-sm text-gray-600",children:"By Admin"}),l.jsx("span",{className:"text-2xl font-bold text-green-600",children:i.price===0?"Gratuit":`${i.price} TND`})]}),l.jsx(Cb,{course:i}),l.jsx(de,{to:`/course/${i.id}`,className:"block text-center text-sm text-green-600 hover:text-green-700 transition font-medium",children:"Voir les dtails"})]})]})]},i.id))})})]})}function w4(){var d;const{id:t}=Ew(),e=Zt(),{userProfile:n}=en(),[r,s]=R.useState(null),[i,o]=R.useState(!0);R.useEffect(()=>{u()},[t]);const u=async()=>{try{const f=await Hr(De(he,"courses",t));f.exists()?s({id:f.id,...f.data()}):e("/courses")}catch(f){console.error("Error loading course:",f)}finally{o(!1)}},c=((d=n==null?void 0:n.purchasedCourses)==null?void 0:d.includes(t))||(r==null?void 0:r.isFree)||(n==null?void 0:n.role)==="admin";return i?l.jsx("div",{className:"min-h-screen flex items-center justify-center",children:l.jsx(Gm,{className:"w-8 h-8 animate-spin text-green-500"})}):r?l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white py-8",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:l.jsxs(de,{to:"/courses",className:"inline-flex items-center gap-2 text-white hover:text-green-100 mb-6",children:[l.jsx(Li,{className:"w-5 h-5"}),"Retour aux cours"]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[l.jsxs("div",{className:"lg:col-span-2",children:[l.jsx("div",{className:"bg-white rounded-xl shadow-md overflow-hidden mb-6",children:l.jsx("img",{src:r.thumbnail||"https://via.placeholder.com/800x400?text=Cours",alt:r.title,className:"w-full h-64 object-cover"})}),l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[l.jsx("span",{className:"bg-purple-100 text-purple-600 px-3 py-1 rounded-full text-sm",children:r.category}),l.jsx("span",{className:"bg-gray-100 text-gray-600 px-3 py-1 rounded-full text-sm",children:r.level}),c&&l.jsx("span",{className:"bg-green-100 text-green-600 px-3 py-1 rounded-full text-sm",children:" Accs activ"})]}),l.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:r.title}),l.jsx("p",{className:"text-gray-600 text-lg mb-6",children:r.description}),l.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Ia,{className:"w-5 h-5"}),l.jsx("span",{children:r.duration})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Je,{className:"w-5 h-5"}),l.jsxs("span",{children:[r.totalLessons," leons"]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Bc,{className:"w-5 h-5"}),l.jsxs("span",{children:[r.enrolledCount," tudiants"]})]}),r.rating>0&&l.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[l.jsx(Ff,{className:"w-5 h-5 fill-yellow-400 text-yellow-400"}),l.jsx("span",{children:r.rating.toFixed(1)})]})]}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Ce que vous allez apprendre"}),l.jsxs("ul",{className:"space-y-3",children:[l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(pt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Matriser les concepts fondamentaux"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(pt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Appliquer les connaissances dans des projets rels"})]}),l.jsxs("li",{className:"flex items-start gap-3",children:[l.jsx(pt,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),l.jsx("span",{className:"text-gray-700",children:"Obtenir un certificat de russite"})]})]})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsxs("div",{className:"bg-white rounded-xl shadow-md p-6 sticky top-8",children:[l.jsxs("div",{className:"text-center mb-6",children:[l.jsx("div",{className:"text-4xl font-bold text-green-600 mb-2",children:r.isFree?"Gratuit":`${r.price} TND`}),!r.isFree&&l.jsx("p",{className:"text-sm text-gray-500",children:"Paiement unique"})]}),c?l.jsxs("button",{onClick:()=>alert("Page de leons  venir !"),className:"w-full flex items-center justify-center gap-2 bg-blue-500 text-white py-3 rounded-lg hover:bg-blue-600 transition font-medium mb-4",children:[l.jsx(Xu,{className:"w-5 h-5"}),"Commencer le cours"]}):l.jsx("div",{className:"mb-4",children:l.jsx(Cb,{course:r})}),l.jsxs("div",{className:"border-t pt-6",children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Ce cours inclut :"}),l.jsxs("ul",{className:"space-y-3 text-sm text-gray-600",children:[l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Xu,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Vidos  la demande"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Je,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Ressources tlchargeables"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(pt,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Accs illimit"})]}),l.jsxs("li",{className:"flex items-center gap-3",children:[l.jsx(Ff,{className:"w-4 h-4 text-green-500"}),l.jsx("span",{children:"Certificat de russite"})]})]})]}),r.instructor&&l.jsxs("div",{className:"border-t pt-6 mt-6",children:[l.jsx("h3",{className:"font-bold text-gray-900 mb-2",children:"Instructeur"}),l.jsx("p",{className:"text-gray-600",children:r.instructor})]})]})})]})})]}):null}class E4{async createModule(e,n){try{const r={courseId:e,...n,order:n.order||0,createdAt:Re()};return{success:!0,id:(await Ku(Ar(he,"modules"),r)).id}}catch(r){return console.error("Error creating module:",r),{success:!1,error:r.message}}}async createLesson(e,n){try{const r={moduleId:e,...n,order:n.order||0,createdAt:Re()};return{success:!0,id:(await Ku(Ar(he,"lessons"),r)).id}}catch(r){return console.error("Error creating lesson:",r),{success:!1,error:r.message}}}async getModulesByCourse(e){try{const n=Df(Ar(he,"modules"),ai("courseId","==",e),Lf("order","asc"));return{success:!0,modules:(await Wu(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching modules:",n),{success:!1,error:n.message,modules:[]}}}async getLessonsByModule(e){try{const n=Df(Ar(he,"lessons"),ai("moduleId","==",e),Lf("order","asc"));return{success:!0,lessons:(await Wu(n)).docs.map(i=>({id:i.id,...i.data()}))}}catch(n){return console.error("Error fetching lessons:",n),{success:!1,error:n.message,lessons:[]}}}async getLessonById(e){try{const n=De(he,"lessons",e),r=await Hr(n);return r.exists()?{success:!0,lesson:{id:r.id,...r.data()}}:{success:!1,error:"Leon introuvable"}}catch(n){return console.error("Error fetching lesson:",n),{success:!1,error:n.message}}}}const Ju=new E4;class T4{async markLessonComplete(e,n,r){try{const s=De(he,"progress",`${e}_${n}`);return(await Hr(s)).exists()?await Nn(s,{completedLessons:HT(r),lastAccessed:Re(),updatedAt:Re()}):await Mf(s,{userId:e,courseId:n,completedLessons:[r],startedAt:Re(),lastAccessed:Re(),updatedAt:Re()}),{success:!0}}catch(s){return console.error("Error marking lesson complete:",s),{success:!1,error:s.message}}}async getCourseProgress(e,n){try{const r=De(he,"progress",`${e}_${n}`),s=await Hr(r);if(!s.exists())return{success:!0,progress:{completedLessons:[],percentage:0}};const i=s.data();return{success:!0,progress:{...i,completedLessons:i.completedLessons||[]}}}catch(r){return console.error("Error fetching progress:",r),{success:!1,error:r.message}}}calculateProgressPercentage(e,n){return n===0?0:Math.round(e/n*100)}isLessonCompleted(e,n=[]){return n.includes(e)}}const hs=new T4,b4="modulepreload",I4=function(t){return"/"+t},K0={},At=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),u=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));s=Promise.allSettled(n.map(c=>{if(c=I4(c),c in K0)return;K0[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":b4,d||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((p,E)=>{g.addEventListener("load",p),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=o,window.dispatchEvent(u),!u.defaultPrevented)throw o}return s.then(o=>{for(const u of o||[])u.status==="rejected"&&i(u.reason);return e().catch(i)})};var N4=function(e,n,r){var s=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof n=="function"&&(r=n,n={}),n=n||{},r=r||function(){},i.type=n.type||"text/javascript",i.charset=n.charset||"utf8",i.async="async"in n?!!n.async:!0,i.src=e,n.attrs&&S4(i,n.attrs),n.text&&(i.text=""+n.text);var o="onload"in i?G0:A4;o(i,r),i.onload||G0(i,r),s.appendChild(i)};function S4(t,e){for(var n in e)t.setAttribute(n,e[n])}function G0(t,e){t.onload=function(){this.onerror=this.onload=null,e(null,t)},t.onerror=function(){this.onerror=this.onload=null,e(new Error("Failed to load "+this.src),t)}}function A4(t,e){t.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,e(null,t))}}var P4=function(e){return C4(e)&&!k4(e)};function C4(t){return!!t&&typeof t=="object"}function k4(t){var e=Object.prototype.toString.call(t);return e==="[object RegExp]"||e==="[object Date]"||O4(t)}var R4=typeof Symbol=="function"&&Symbol.for,j4=R4?Symbol.for("react.element"):60103;function O4(t){return t.$$typeof===j4}function D4(t){return Array.isArray(t)?[]:{}}function Sa(t,e){return e.clone!==!1&&e.isMergeableObject(t)?Vi(D4(t),t,e):t}function L4(t,e,n){return t.concat(e).map(function(r){return Sa(r,n)})}function M4(t,e){if(!e.customMerge)return Vi;var n=e.customMerge(t);return typeof n=="function"?n:Vi}function V4(t){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(t).filter(function(e){return Object.propertyIsEnumerable.call(t,e)}):[]}function Q0(t){return Object.keys(t).concat(V4(t))}function kb(t,e){try{return e in t}catch{return!1}}function U4(t,e){return kb(t,e)&&!(Object.hasOwnProperty.call(t,e)&&Object.propertyIsEnumerable.call(t,e))}function F4(t,e,n){var r={};return n.isMergeableObject(t)&&Q0(t).forEach(function(s){r[s]=Sa(t[s],n)}),Q0(e).forEach(function(s){U4(t,s)||(kb(t,s)&&n.isMergeableObject(e[s])?r[s]=M4(s,n)(t[s],e[s],n):r[s]=Sa(e[s],n))}),r}function Vi(t,e,n){n=n||{},n.arrayMerge=n.arrayMerge||L4,n.isMergeableObject=n.isMergeableObject||P4,n.cloneUnlessOtherwiseSpecified=Sa;var r=Array.isArray(e),s=Array.isArray(t),i=r===s;return i?r?n.arrayMerge(t,e,n):F4(t,e,n):Sa(e,n)}Vi.all=function(e,n){if(!Array.isArray(e))throw new Error("first argument should be an array");return e.reduce(function(r,s){return Vi(r,s,n)},{})};var $4=Vi,Rb=$4,z4=Object.create,qc=Object.defineProperty,B4=Object.getOwnPropertyDescriptor,q4=Object.getOwnPropertyNames,H4=Object.getPrototypeOf,W4=Object.prototype.hasOwnProperty,K4=(t,e)=>{for(var n in e)qc(t,n,{get:e[n],enumerable:!0})},jb=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of q4(e))!W4.call(t,s)&&s!==n&&qc(t,s,{get:()=>e[s],enumerable:!(r=B4(e,s))||r.enumerable});return t},Xm=(t,e,n)=>(n=t!=null?z4(H4(t)):{},jb(!t||!t.__esModule?qc(n,"default",{value:t,enumerable:!0}):n,t)),G4=t=>jb(qc({},"__esModule",{value:!0}),t),Ob={};K4(Ob,{callPlayer:()=>cM,getConfig:()=>lM,getSDK:()=>aM,isBlobUrl:()=>hM,isMediaStream:()=>dM,lazy:()=>J4,omit:()=>uM,parseEndTime:()=>sM,parseStartTime:()=>rM,queryString:()=>oM,randomString:()=>iM,supportsWebKitPresentationMode:()=>fM});var Hc=G4(Ob),Q4=Xm(R),Y4=Xm(N4),X4=Xm(Rb);const J4=t=>Q4.default.lazy(async()=>{const e=await t();return typeof e.default=="function"?e:e.default}),Z4=/[?&#](?:start|t)=([0-9hms]+)/,eM=/[?&#]end=([0-9hms]+)/,zf=/(\d+)(h|m|s)/g,tM=/^\d+$/;function Db(t,e){if(t instanceof Array)return;const n=t.match(e);if(n){const r=n[1];if(r.match(zf))return nM(r);if(tM.test(r))return parseInt(r)}}function nM(t){let e=0,n=zf.exec(t);for(;n!==null;){const[,r,s]=n;s==="h"&&(e+=parseInt(r,10)*60*60),s==="m"&&(e+=parseInt(r,10)*60),s==="s"&&(e+=parseInt(r,10)),n=zf.exec(t)}return e}function rM(t){return Db(t,Z4)}function sM(t){return Db(t,eM)}function iM(){return Math.random().toString(36).substr(2,5)}function oM(t){return Object.keys(t).map(e=>`${e}=${t[e]}`).join("&")}function ch(t){return window[t]?window[t]:window.exports&&window.exports[t]?window.exports[t]:window.module&&window.module.exports&&window.module.exports[t]?window.module.exports[t]:null}const zs={},aM=function(e,n,r=null,s=()=>!0,i=Y4.default){const o=ch(n);return o&&s(o)?Promise.resolve(o):new Promise((u,c)=>{if(zs[e]){zs[e].push({resolve:u,reject:c});return}zs[e]=[{resolve:u,reject:c}];const d=f=>{zs[e].forEach(g=>g.resolve(f))};if(r){const f=window[r];window[r]=function(){f&&f(),d(ch(n))}}i(e,f=>{f?(zs[e].forEach(g=>g.reject(f)),zs[e]=null):r||d(ch(n))})})};function lM(t,e){return(0,X4.default)(e.config,t.config)}function uM(t,...e){const n=[].concat(...e),r={},s=Object.keys(t);for(const i of s)n.indexOf(i)===-1&&(r[i]=t[i]);return r}function cM(t,...e){if(!this.player||!this.player[t]){let n=`ReactPlayer: ${this.constructor.displayName} player could not call %c${t}%c  `;return this.player?this.player[t]||(n+="The method was not available"):n+="The player was not available",console.warn(n,"font-weight: bold",""),null}return this.player[t](...e)}function dM(t){return typeof window<"u"&&typeof window.MediaStream<"u"&&t instanceof window.MediaStream}function hM(t){return/^blob:/.test(t)}function fM(t=document.createElement("video")){const e=/iPhone|iPod/.test(navigator.userAgent)===!1;return t.webkitSupportsPresentationMode&&typeof t.webkitSetPresentationMode=="function"&&e}var Jm=Object.defineProperty,pM=Object.getOwnPropertyDescriptor,mM=Object.getOwnPropertyNames,gM=Object.prototype.hasOwnProperty,yM=(t,e)=>{for(var n in e)Jm(t,n,{get:e[n],enumerable:!0})},vM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mM(e))!gM.call(t,s)&&s!==n&&Jm(t,s,{get:()=>e[s],enumerable:!(r=pM(e,s))||r.enumerable});return t},_M=t=>vM(Jm({},"__esModule",{value:!0}),t),Lb={};yM(Lb,{AUDIO_EXTENSIONS:()=>Zm,DASH_EXTENSIONS:()=>Yb,FLV_EXTENSIONS:()=>Xb,HLS_EXTENSIONS:()=>tg,MATCH_URL_DAILYMOTION:()=>Wb,MATCH_URL_FACEBOOK:()=>Fb,MATCH_URL_FACEBOOK_WATCH:()=>$b,MATCH_URL_KALTURA:()=>Qb,MATCH_URL_MIXCLOUD:()=>Kb,MATCH_URL_MUX:()=>Ub,MATCH_URL_SOUNDCLOUD:()=>Mb,MATCH_URL_STREAMABLE:()=>zb,MATCH_URL_TWITCH_CHANNEL:()=>Hb,MATCH_URL_TWITCH_VIDEO:()=>qb,MATCH_URL_VIDYARD:()=>Gb,MATCH_URL_VIMEO:()=>Vb,MATCH_URL_WISTIA:()=>Bb,MATCH_URL_YOUTUBE:()=>Bf,VIDEO_EXTENSIONS:()=>eg,canPlay:()=>wM});var xM=_M(Lb),Y0=Hc;const Bf=/(?:youtu\.be\/|youtube(?:-nocookie|education)?\.com\/(?:embed\/|v\/|watch\/|watch\?v=|watch\?.+&v=|shorts\/|live\/))((\w|-){11})|youtube\.com\/playlist\?list=|youtube\.com\/user\//,Mb=/(?:soundcloud\.com|snd\.sc)\/[^.]+$/,Vb=/vimeo\.com\/(?!progressive_redirect).+/,Ub=/stream\.mux\.com\/(?!\w+\.m3u8)(\w+)/,Fb=/^https?:\/\/(www\.)?facebook\.com.*\/(video(s)?|watch|story)(\.php?|\/).+$/,$b=/^https?:\/\/fb\.watch\/.+$/,zb=/streamable\.com\/([a-z0-9]+)$/,Bb=/(?:wistia\.(?:com|net)|wi\.st)\/(?:medias|embed)\/(?:iframe\/)?([^?]+)/,qb=/(?:www\.|go\.)?twitch\.tv\/videos\/(\d+)($|\?)/,Hb=/(?:www\.|go\.)?twitch\.tv\/([a-zA-Z0-9_]+)($|\?)/,Wb=/^(?:(?:https?):)?(?:\/\/)?(?:www\.)?(?:(?:dailymotion\.com(?:\/embed)?\/video)|dai\.ly)\/([a-zA-Z0-9]+)(?:_[\w_-]+)?(?:[\w.#_-]+)?/,Kb=/mixcloud\.com\/([^/]+\/[^/]+)/,Gb=/vidyard.com\/(?:watch\/)?([a-zA-Z0-9-_]+)/,Qb=/^https?:\/\/[a-zA-Z]+\.kaltura.(com|org)\/p\/([0-9]+)\/sp\/([0-9]+)00\/embedIframeJs\/uiconf_id\/([0-9]+)\/partner_id\/([0-9]+)(.*)entry_id.([a-zA-Z0-9-_].*)$/,Zm=/\.(m4a|m4b|mp4a|mpga|mp2|mp2a|mp3|m2a|m3a|wav|weba|aac|oga|spx)($|\?)/i,eg=/\.(mp4|og[gv]|webm|mov|m4v)(#t=[,\d+]+)?($|\?)/i,tg=/\.(m3u8)($|\?)/i,Yb=/\.(mpd)($|\?)/i,Xb=/\.(flv)($|\?)/i,qf=t=>{if(t instanceof Array){for(const e of t)if(typeof e=="string"&&qf(e)||qf(e.src))return!0;return!1}return(0,Y0.isMediaStream)(t)||(0,Y0.isBlobUrl)(t)?!0:Zm.test(t)||eg.test(t)||tg.test(t)||Yb.test(t)||Xb.test(t)},wM={youtube:t=>t instanceof Array?t.every(e=>Bf.test(e)):Bf.test(t),soundcloud:t=>Mb.test(t)&&!Zm.test(t),vimeo:t=>Vb.test(t)&&!eg.test(t)&&!tg.test(t),mux:t=>Ub.test(t),facebook:t=>Fb.test(t)||$b.test(t),streamable:t=>zb.test(t),wistia:t=>Bb.test(t),twitch:t=>qb.test(t)||Hb.test(t),dailymotion:t=>Wb.test(t),mixcloud:t=>Kb.test(t),vidyard:t=>Gb.test(t),kaltura:t=>Qb.test(t),file:qf};var ng=Object.defineProperty,EM=Object.getOwnPropertyDescriptor,TM=Object.getOwnPropertyNames,bM=Object.prototype.hasOwnProperty,IM=(t,e)=>{for(var n in e)ng(t,n,{get:e[n],enumerable:!0})},NM=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of TM(e))!bM.call(t,s)&&s!==n&&ng(t,s,{get:()=>e[s],enumerable:!(r=EM(e,s))||r.enumerable});return t},SM=t=>NM(ng({},"__esModule",{value:!0}),t),Jb={};IM(Jb,{default:()=>PM});var AM=SM(Jb),St=Hc,xt=xM,PM=[{key:"youtube",name:"YouTube",canPlay:xt.canPlay.youtube,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./YouTube-DmWIKmfX.js").then(t=>t.Y),[]))},{key:"soundcloud",name:"SoundCloud",canPlay:xt.canPlay.soundcloud,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./SoundCloud-DgEpTR3U.js").then(t=>t.S),[]))},{key:"vimeo",name:"Vimeo",canPlay:xt.canPlay.vimeo,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Vimeo-BBsIGssa.js").then(t=>t.V),[]))},{key:"mux",name:"Mux",canPlay:xt.canPlay.mux,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Mux-CIqvzAvM.js").then(t=>t.M),[]))},{key:"facebook",name:"Facebook",canPlay:xt.canPlay.facebook,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Facebook-CAy9GJ2t.js").then(t=>t.F),[]))},{key:"streamable",name:"Streamable",canPlay:xt.canPlay.streamable,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Streamable-CdDlse1y.js").then(t=>t.S),[]))},{key:"wistia",name:"Wistia",canPlay:xt.canPlay.wistia,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Wistia-16rTzUI7.js").then(t=>t.W),[]))},{key:"twitch",name:"Twitch",canPlay:xt.canPlay.twitch,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Twitch-gIVBi74u.js").then(t=>t.T),[]))},{key:"dailymotion",name:"DailyMotion",canPlay:xt.canPlay.dailymotion,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./DailyMotion-BvJ-QZx6.js").then(t=>t.D),[]))},{key:"mixcloud",name:"Mixcloud",canPlay:xt.canPlay.mixcloud,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Mixcloud-_AGCEtfQ.js").then(t=>t.M),[]))},{key:"vidyard",name:"Vidyard",canPlay:xt.canPlay.vidyard,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Vidyard-OAsqXKtu.js").then(t=>t.V),[]))},{key:"kaltura",name:"Kaltura",canPlay:xt.canPlay.kaltura,lazyPlayer:(0,St.lazy)(()=>At(()=>import("./Kaltura-BnUG8bmM.js").then(t=>t.K),[]))},{key:"file",name:"FilePlayer",canPlay:xt.canPlay.file,canEnablePIP:t=>xt.canPlay.file(t)&&(document.pictureInPictureEnabled||(0,St.supportsWebKitPresentationMode)())&&!xt.AUDIO_EXTENSIONS.test(t),lazyPlayer:(0,St.lazy)(()=>At(()=>import("./FilePlayer-BwGOSP7_.js").then(t=>t.F),[]))}],X0=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function CM(t,e){return!!(t===e||X0(t)&&X0(e))}function kM(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!CM(t[n],e[n]))return!1;return!0}function RM(t,e){e===void 0&&(e=kM);var n,r=[],s,i=!1;function o(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];return i&&n===this&&e(u,r)||(s=t.apply(this,u),i=!0,n=this,r=u),s}return o}const jM=Object.freeze(Object.defineProperty({__proto__:null,default:RM},Symbol.toStringTag,{value:"Module"})),OM=Y1(jM);var DM=typeof Element<"u",LM=typeof Map=="function",MM=typeof Set=="function",VM=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function su(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!su(t[r],e[r]))return!1;return!0}var i;if(LM&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;for(i=t.entries();!(r=i.next()).done;)if(!su(r.value[1],e.get(r.value[0])))return!1;return!0}if(MM&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(i=t.entries();!(r=i.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(VM&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(DM&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!su(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var Zb=function(e,n){try{return su(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},e1={exports:{}},UM="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",FM=UM,$M=FM;function t1(){}function n1(){}n1.resetWarningCache=t1;var zM=function(){function t(r,s,i,o,u,c){if(c!==$M){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:n1,resetWarningCache:t1};return n.PropTypes=n,n};e1.exports=zM();var BM=e1.exports,qM=Object.create,Wc=Object.defineProperty,HM=Object.getOwnPropertyDescriptor,WM=Object.getOwnPropertyNames,KM=Object.getPrototypeOf,GM=Object.prototype.hasOwnProperty,QM=(t,e)=>{for(var n in e)Wc(t,n,{get:e[n],enumerable:!0})},r1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of WM(e))!GM.call(t,s)&&s!==n&&Wc(t,s,{get:()=>e[s],enumerable:!(r=HM(e,s))||r.enumerable});return t},YM=(t,e,n)=>(n=t!=null?qM(KM(t)):{},r1(!t||!t.__esModule?Wc(n,"default",{value:t,enumerable:!0}):n,t)),XM=t=>r1(Wc({},"__esModule",{value:!0}),t),s1={};QM(s1,{defaultProps:()=>eV,propTypes:()=>ZM});var i1=XM(s1),JM=YM(BM);const{string:Ke,bool:wt,number:Bs,array:dh,oneOfType:wo,shape:Mt,object:ut,func:Ve,node:J0}=JM.default,ZM={url:wo([Ke,dh,ut]),playing:wt,loop:wt,controls:wt,volume:Bs,muted:wt,playbackRate:Bs,width:wo([Ke,Bs]),height:wo([Ke,Bs]),style:ut,progressInterval:Bs,playsinline:wt,pip:wt,stopOnUnmount:wt,light:wo([wt,Ke,ut]),playIcon:J0,previewTabIndex:Bs,previewAriaLabel:Ke,fallback:J0,oEmbedUrl:Ke,wrapper:wo([Ke,Ve,Mt({render:Ve.isRequired})]),config:Mt({soundcloud:Mt({options:ut}),youtube:Mt({playerVars:ut,embedOptions:ut,onUnstarted:Ve}),facebook:Mt({appId:Ke,version:Ke,playerId:Ke,attributes:ut}),dailymotion:Mt({params:ut}),vimeo:Mt({playerOptions:ut,title:Ke}),mux:Mt({attributes:ut,version:Ke}),file:Mt({attributes:ut,tracks:dh,forceVideo:wt,forceAudio:wt,forceHLS:wt,forceSafariHLS:wt,forceDisableHls:wt,forceDASH:wt,forceFLV:wt,hlsOptions:ut,hlsVersion:Ke,dashVersion:Ke,flvVersion:Ke}),wistia:Mt({options:ut,playerId:Ke,customControls:dh}),mixcloud:Mt({options:ut}),twitch:Mt({options:ut,playerId:Ke}),vidyard:Mt({options:ut})}),onReady:Ve,onStart:Ve,onPlay:Ve,onPause:Ve,onBuffer:Ve,onBufferEnd:Ve,onEnded:Ve,onError:Ve,onDuration:Ve,onSeek:Ve,onPlaybackRateChange:Ve,onPlaybackQualityChange:Ve,onProgress:Ve,onClickPreview:Ve,onEnablePIP:Ve,onDisablePIP:Ve},Ge=()=>{},eV={playing:!1,loop:!1,controls:!1,volume:null,muted:!1,playbackRate:1,width:"640px",height:"360px",style:{},progressInterval:1e3,playsinline:!1,pip:!1,stopOnUnmount:!0,light:!1,fallback:null,wrapper:"div",previewTabIndex:0,previewAriaLabel:"",oEmbedUrl:"https://noembed.com/embed?url={url}",config:{soundcloud:{options:{visual:!0,buying:!1,liking:!1,download:!1,sharing:!1,show_comments:!1,show_playcount:!1}},youtube:{playerVars:{playsinline:1,showinfo:0,rel:0,iv_load_policy:3,modestbranding:1},embedOptions:{},onUnstarted:Ge},facebook:{appId:"1309697205772819",version:"v3.3",playerId:null,attributes:{}},dailymotion:{params:{api:1,"endscreen-enable":!1}},vimeo:{playerOptions:{autopause:!1,byline:!1,portrait:!1,title:!1},title:null},mux:{attributes:{},version:"2"},file:{attributes:{},tracks:[],forceVideo:!1,forceAudio:!1,forceHLS:!1,forceDASH:!1,forceFLV:!1,hlsOptions:{},hlsVersion:"1.1.4",dashVersion:"3.1.3",flvVersion:"1.5.0",forceDisableHls:!1},wistia:{options:{},playerId:null,customControls:null},mixcloud:{options:{hide_cover:1}},twitch:{options:{},playerId:null},vidyard:{options:{}}},onReady:Ge,onStart:Ge,onPlay:Ge,onPause:Ge,onBuffer:Ge,onBufferEnd:Ge,onEnded:Ge,onError:Ge,onDuration:Ge,onSeek:Ge,onPlaybackRateChange:Ge,onPlaybackQualityChange:Ge,onProgress:Ge,onClickPreview:Ge,onEnablePIP:Ge,onDisablePIP:Ge};var tV=Object.create,Wa=Object.defineProperty,nV=Object.getOwnPropertyDescriptor,rV=Object.getOwnPropertyNames,sV=Object.getPrototypeOf,iV=Object.prototype.hasOwnProperty,oV=(t,e,n)=>e in t?Wa(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,aV=(t,e)=>{for(var n in e)Wa(t,n,{get:e[n],enumerable:!0})},o1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of rV(e))!iV.call(t,s)&&s!==n&&Wa(t,s,{get:()=>e[s],enumerable:!(r=nV(e,s))||r.enumerable});return t},a1=(t,e,n)=>(n=t!=null?tV(sV(t)):{},o1(!t||!t.__esModule?Wa(n,"default",{value:t,enumerable:!0}):n,t)),lV=t=>o1(Wa({},"__esModule",{value:!0}),t),Pe=(t,e,n)=>(oV(t,typeof e!="symbol"?e+"":e,n),n),l1={};aV(l1,{default:()=>Kc});var uV=lV(l1),Z0=a1(R),cV=a1(Zb),u1=i1,dV=Hc;const hV=5e3;class Kc extends Z0.Component{constructor(){super(...arguments),Pe(this,"mounted",!1),Pe(this,"isReady",!1),Pe(this,"isPlaying",!1),Pe(this,"isLoading",!0),Pe(this,"loadOnReady",null),Pe(this,"startOnPlay",!0),Pe(this,"seekOnPlay",null),Pe(this,"onDurationCalled",!1),Pe(this,"handlePlayerMount",e=>{if(this.player){this.progress();return}this.player=e,this.player.load(this.props.url),this.progress()}),Pe(this,"getInternalPlayer",e=>this.player?this.player[e]:null),Pe(this,"progress",()=>{if(this.props.url&&this.player&&this.isReady){const e=this.getCurrentTime()||0,n=this.getSecondsLoaded(),r=this.getDuration();if(r){const s={playedSeconds:e,played:e/r};n!==null&&(s.loadedSeconds=n,s.loaded=n/r),(s.playedSeconds!==this.prevPlayed||s.loadedSeconds!==this.prevLoaded)&&this.props.onProgress(s),this.prevPlayed=s.playedSeconds,this.prevLoaded=s.loadedSeconds}}this.progressTimeout=setTimeout(this.progress,this.props.progressFrequency||this.props.progressInterval)}),Pe(this,"handleReady",()=>{if(!this.mounted)return;this.isReady=!0,this.isLoading=!1;const{onReady:e,playing:n,volume:r,muted:s}=this.props;e(),!s&&r!==null&&this.player.setVolume(r),this.loadOnReady?(this.player.load(this.loadOnReady,!0),this.loadOnReady=null):n&&this.player.play(),this.handleDurationCheck()}),Pe(this,"handlePlay",()=>{this.isPlaying=!0,this.isLoading=!1;const{onStart:e,onPlay:n,playbackRate:r}=this.props;this.startOnPlay&&(this.player.setPlaybackRate&&r!==1&&this.player.setPlaybackRate(r),e(),this.startOnPlay=!1),n(),this.seekOnPlay&&(this.seekTo(this.seekOnPlay),this.seekOnPlay=null),this.handleDurationCheck()}),Pe(this,"handlePause",e=>{this.isPlaying=!1,this.isLoading||this.props.onPause(e)}),Pe(this,"handleEnded",()=>{const{activePlayer:e,loop:n,onEnded:r}=this.props;e.loopOnEnded&&n&&this.seekTo(0),n||(this.isPlaying=!1,r())}),Pe(this,"handleError",(...e)=>{this.isLoading=!1,this.props.onError(...e)}),Pe(this,"handleDurationCheck",()=>{clearTimeout(this.durationCheckTimeout);const e=this.getDuration();e?this.onDurationCalled||(this.props.onDuration(e),this.onDurationCalled=!0):this.durationCheckTimeout=setTimeout(this.handleDurationCheck,100)}),Pe(this,"handleLoaded",()=>{this.isLoading=!1})}componentDidMount(){this.mounted=!0}componentWillUnmount(){clearTimeout(this.progressTimeout),clearTimeout(this.durationCheckTimeout),this.isReady&&this.props.stopOnUnmount&&(this.player.stop(),this.player.disablePIP&&this.player.disablePIP()),this.mounted=!1}componentDidUpdate(e){if(!this.player)return;const{url:n,playing:r,volume:s,muted:i,playbackRate:o,pip:u,loop:c,activePlayer:d,disableDeferredLoading:f}=this.props;if(!(0,cV.default)(e.url,n)){if(this.isLoading&&!d.forceLoad&&!f&&!(0,dV.isMediaStream)(n)){console.warn(`ReactPlayer: the attempt to load ${n} is being deferred until the player has loaded`),this.loadOnReady=n;return}this.isLoading=!0,this.startOnPlay=!0,this.onDurationCalled=!1,this.player.load(n,this.isReady)}!e.playing&&r&&!this.isPlaying&&this.player.play(),e.playing&&!r&&this.isPlaying&&this.player.pause(),!e.pip&&u&&this.player.enablePIP&&this.player.enablePIP(),e.pip&&!u&&this.player.disablePIP&&this.player.disablePIP(),e.volume!==s&&s!==null&&this.player.setVolume(s),e.muted!==i&&(i?this.player.mute():(this.player.unmute(),s!==null&&setTimeout(()=>this.player.setVolume(s)))),e.playbackRate!==o&&this.player.setPlaybackRate&&this.player.setPlaybackRate(o),e.loop!==c&&this.player.setLoop&&this.player.setLoop(c)}getDuration(){return this.isReady?this.player.getDuration():null}getCurrentTime(){return this.isReady?this.player.getCurrentTime():null}getSecondsLoaded(){return this.isReady?this.player.getSecondsLoaded():null}seekTo(e,n,r){if(!this.isReady){e!==0&&(this.seekOnPlay=e,setTimeout(()=>{this.seekOnPlay=null},hV));return}if(n?n==="fraction":e>0&&e<1){const i=this.player.getDuration();if(!i){console.warn("ReactPlayer: could not seek using fraction duration not yet available");return}this.player.seekTo(i*e,r);return}this.player.seekTo(e,r)}render(){const e=this.props.activePlayer;return e?Z0.default.createElement(e,{...this.props,onMount:this.handlePlayerMount,onReady:this.handleReady,onPlay:this.handlePlay,onPause:this.handlePause,onEnded:this.handleEnded,onLoaded:this.handleLoaded,onError:this.handleError}):null}}Pe(Kc,"displayName","Player");Pe(Kc,"propTypes",u1.propTypes);Pe(Kc,"defaultProps",u1.defaultProps);var fV=Object.create,Ka=Object.defineProperty,pV=Object.getOwnPropertyDescriptor,mV=Object.getOwnPropertyNames,gV=Object.getPrototypeOf,yV=Object.prototype.hasOwnProperty,vV=(t,e,n)=>e in t?Ka(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,_V=(t,e)=>{for(var n in e)Ka(t,n,{get:e[n],enumerable:!0})},c1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of mV(e))!yV.call(t,s)&&s!==n&&Ka(t,s,{get:()=>e[s],enumerable:!(r=pV(e,s))||r.enumerable});return t},Ga=(t,e,n)=>(n=t!=null?fV(gV(t)):{},c1(!t||!t.__esModule?Ka(n,"default",{value:t,enumerable:!0}):n,t)),xV=t=>c1(Ka({},"__esModule",{value:!0}),t),Ae=(t,e,n)=>(vV(t,typeof e!="symbol"?e+"":e,n),n),d1={};_V(d1,{createReactPlayer:()=>PV});var wV=xV(d1),Gs=Ga(R),EV=Ga(Rb),hh=Ga(OM),e_=Ga(Zb),jo=i1,h1=Hc,TV=Ga(uV);const bV=(0,h1.lazy)(()=>At(()=>import("./Preview-Ct2XEQwX.js").then(t=>t.P),[])),IV=typeof window<"u"&&window.document&&typeof document<"u",NV=typeof vd<"u"&&vd.window&&vd.window.document,SV=Object.keys(jo.propTypes),AV=IV||NV?Gs.Suspense:()=>null,Eo=[],PV=(t,e)=>{var n;return n=class extends Gs.Component{constructor(){super(...arguments),Ae(this,"state",{showPreview:!!this.props.light}),Ae(this,"references",{wrapper:r=>{this.wrapper=r},player:r=>{this.player=r}}),Ae(this,"handleClickPreview",r=>{this.setState({showPreview:!1}),this.props.onClickPreview(r)}),Ae(this,"showPreview",()=>{this.setState({showPreview:!0})}),Ae(this,"getDuration",()=>this.player?this.player.getDuration():null),Ae(this,"getCurrentTime",()=>this.player?this.player.getCurrentTime():null),Ae(this,"getSecondsLoaded",()=>this.player?this.player.getSecondsLoaded():null),Ae(this,"getInternalPlayer",(r="player")=>this.player?this.player.getInternalPlayer(r):null),Ae(this,"seekTo",(r,s,i)=>{if(!this.player)return null;this.player.seekTo(r,s,i)}),Ae(this,"handleReady",()=>{this.props.onReady(this)}),Ae(this,"getActivePlayer",(0,hh.default)(r=>{for(const s of[...Eo,...t])if(s.canPlay(r))return s;return e||null})),Ae(this,"getConfig",(0,hh.default)((r,s)=>{const{config:i}=this.props;return EV.default.all([jo.defaultProps.config,jo.defaultProps.config[s]||{},i,i[s]||{}])})),Ae(this,"getAttributes",(0,hh.default)(r=>(0,h1.omit)(this.props,SV))),Ae(this,"renderActivePlayer",r=>{if(!r)return null;const s=this.getActivePlayer(r);if(!s)return null;const i=this.getConfig(r,s.key);return Gs.default.createElement(TV.default,{...this.props,key:s.key,ref:this.references.player,config:i,activePlayer:s.lazyPlayer||s,onReady:this.handleReady})})}shouldComponentUpdate(r,s){return!(0,e_.default)(this.props,r)||!(0,e_.default)(this.state,s)}componentDidUpdate(r){const{light:s}=this.props;!r.light&&s&&this.setState({showPreview:!0}),r.light&&!s&&this.setState({showPreview:!1})}renderPreview(r){if(!r)return null;const{light:s,playIcon:i,previewTabIndex:o,oEmbedUrl:u,previewAriaLabel:c}=this.props;return Gs.default.createElement(bV,{url:r,light:s,playIcon:i,previewTabIndex:o,previewAriaLabel:c,oEmbedUrl:u,onClick:this.handleClickPreview})}render(){const{url:r,style:s,width:i,height:o,fallback:u,wrapper:c}=this.props,{showPreview:d}=this.state,f=this.getAttributes(r),g=typeof c=="string"?this.references.wrapper:void 0;return Gs.default.createElement(c,{ref:g,style:{...s,width:i,height:o},...f},Gs.default.createElement(AV,{fallback:u},d?this.renderPreview(r):this.renderActivePlayer(r)))}},Ae(n,"displayName","ReactPlayer"),Ae(n,"propTypes",jo.propTypes),Ae(n,"defaultProps",jo.defaultProps),Ae(n,"addCustomPlayer",r=>{Eo.push(r)}),Ae(n,"removeCustomPlayers",()=>{Eo.length=0}),Ae(n,"canPlay",r=>{for(const s of[...Eo,...t])if(s.canPlay(r))return!0;return!1}),Ae(n,"canEnablePIP",r=>{for(const s of[...Eo,...t])if(s.canEnablePIP&&s.canEnablePIP(r))return!0;return!1}),n};var CV=Object.create,Gc=Object.defineProperty,kV=Object.getOwnPropertyDescriptor,RV=Object.getOwnPropertyNames,jV=Object.getPrototypeOf,OV=Object.prototype.hasOwnProperty,DV=(t,e)=>{for(var n in e)Gc(t,n,{get:e[n],enumerable:!0})},f1=(t,e,n,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of RV(e))!OV.call(t,s)&&s!==n&&Gc(t,s,{get:()=>e[s],enumerable:!(r=kV(e,s))||r.enumerable});return t},LV=(t,e,n)=>(n=t!=null?CV(jV(t)):{},f1(!t||!t.__esModule?Gc(n,"default",{value:t,enumerable:!0}):n,t)),MV=t=>f1(Gc({},"__esModule",{value:!0}),t),p1={};DV(p1,{default:()=>$V});var VV=MV(p1),Hf=LV(AM),UV=wV;const FV=Hf.default[Hf.default.length-1];var $V=(0,UV.createReactPlayer)(Hf.default,FV);const zV=n_(VV);function m1({lesson:t,onComplete:e,onNext:n,isCompleted:r}){const{user:s}=en(),[i,o]=R.useState(!1),[u,c]=R.useState(0),[d,f]=R.useState(r),g=E=>{c(E.played*100),E.played>.9&&!d&&p()},p=async()=>{if(!t.courseId||!s)return;(await hs.markLessonComplete(s.uid,t.courseId,t.id)).success&&(f(!0),e==null||e(t.id))};return l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"relative bg-black",style:{paddingTop:"56.25%"},children:t.videoUrl?l.jsx(zV,{url:t.videoUrl,width:"100%",height:"100%",style:{position:"absolute",top:0,left:0},playing:i,controls:!0,onProgress:g,onPlay:()=>o(!0),onPause:()=>o(!1)}):l.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:l.jsxs("div",{className:"text-white text-center",children:[l.jsx(Xu,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),l.jsx("p",{children:"Aucune vido disponible"})]})})}),l.jsxs("div",{className:"p-6",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:t.title}),l.jsx("p",{className:"text-gray-600",children:t.description})]}),d&&l.jsxs("div",{className:"ml-4 flex items-center text-green-600",children:[l.jsx(pt,{className:"w-5 h-5 mr-1"}),l.jsx("span",{className:"text-sm font-medium",children:"Complt"})]})]}),t.videoUrl&&l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-1",children:[l.jsx("span",{children:"Progression"}),l.jsxs("span",{children:[Math.round(u),"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:l.jsx("div",{className:"bg-green-500 h-2 rounded-full transition-all duration-300",style:{width:`${u}%`}})})]}),l.jsxs("div",{className:"flex space-x-3",children:[!d&&l.jsxs("button",{onClick:p,className:"flex-1 bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center justify-center",children:[l.jsx(pt,{className:"w-5 h-5 mr-2"}),"Marquer comme complt"]}),n&&l.jsxs("button",{onClick:n,className:"flex-1 bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 flex items-center justify-center",children:["Leon suivante",l.jsx(Ko,{className:"w-5 h-5 ml-2"})]})]}),t.content&&l.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Contenu de la leon"}),l.jsx("div",{className:"prose max-w-none text-gray-700",children:t.content})]})]})]})}function BV({courseId:t,currentLessonId:e,onLessonSelect:n,userProgress:r=[],isPurchased:s=!1}){const[i,o]=R.useState([]),[u,c]=R.useState(new Set),[d,f]=R.useState(!0);R.useEffect(()=>{g()},[t]);const g=async()=>{f(!0);const T=await Ju.getModulesByCourse(t);if(T.success){const A=await Promise.all(T.modules.map(async w=>{const x=await Ju.getLessonsByModule(w.id);return{...w,lessons:x.lessons||[]}}));o(A),A.length>0&&c(new Set([A[0].id]))}f(!1)},p=T=>{c(A=>{const w=new Set(A);return w.has(T)?w.delete(T):w.add(T),w})},E=T=>hs.isLessonCompleted(T,r),N=T=>T.reduce((A,w)=>A+(w.duration||0),0);return d?l.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:l.jsxs("div",{className:"animate-pulse space-y-4",children:[l.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded"}),l.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})}):l.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[l.jsx("div",{className:"px-6 py-4 bg-gray-50 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Programme du cours"})}),l.jsx("div",{className:"divide-y divide-gray-200",children:i.map((T,A)=>l.jsxs("div",{children:[l.jsx("button",{onClick:()=>p(T.id),className:"w-full px-6 py-4 flex items-center justify-between hover:bg-gray-50 transition-colors",children:l.jsxs("div",{className:"flex items-center",children:[u.has(T.id)?l.jsx($L,{className:"w-5 h-5 text-gray-400 mr-2"}):l.jsx(Eb,{className:"w-5 h-5 text-gray-400 mr-2"}),l.jsxs("div",{className:"text-left",children:[l.jsxs("h4",{className:"font-medium text-gray-900",children:["Module ",A+1,": ",T.title]}),l.jsxs("p",{className:"text-sm text-gray-500",children:[T.lessons.length," leon",T.lessons.length>1?"s":"",N(T.lessons)>0&&l.jsxs("span",{children:["  ",N(T.lessons)," min"]})]})]})]})}),u.has(T.id)&&l.jsx("div",{className:"bg-gray-50",children:T.lessons.map((w,x)=>{const y=E(w.id),C=w.id===e,L=s||w.isFree;return l.jsxs("button",{onClick:()=>L&&n(w),disabled:!L,className:`w-full px-6 py-3 pl-14 flex items-center justify-between hover:bg-gray-100 transition-colors ${C?"bg-green-50 border-l-4 border-green-500":""} ${L?"":"opacity-50 cursor-not-allowed"}`,children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"mr-3",children:L?y?l.jsx(pt,{className:"w-4 h-4 text-green-500"}):l.jsx(Xu,{className:"w-4 h-4 text-gray-400"}):l.jsx(Mi,{className:"w-4 h-4 text-gray-400"})}),l.jsxs("div",{className:"text-left",children:[l.jsxs("p",{className:`text-sm ${C?"font-medium text-green-700":"text-gray-700"}`,children:[x+1,". ",w.title]}),w.duration&&l.jsxs("p",{className:"text-xs text-gray-500",children:[w.duration," min"]})]})]}),w.isFree&&l.jsx("span",{className:"text-xs bg-green-100 text-green-700 px-2 py-1 rounded",children:"Gratuit"})]},w.id)})})]},T.id))}),i.length===0&&l.jsx("div",{className:"px-6 py-8 text-center text-gray-500",children:l.jsx("p",{children:"Aucun contenu disponible pour l'instant"})})]})}function qV({quiz:t,onSubmit:e,previousResult:n}){const[r,s]=R.useState({}),[i,o]=R.useState(!1),[u,c]=R.useState(null),d=(T,A)=>{i||s({...r,[T]:A})},f=async()=>{const T=t.questions.map((w,x)=>r[x]??-1);o(!0);const A=await e(T);c(A)},g=()=>{s({}),o(!1),c(null)},p=T=>r[T]!==void 0,E=t.questions.every((T,A)=>p(A)),N=T=>{switch(T==null?void 0:T.toLowerCase()){case"beginner":return"bg-green-100 text-green-700";case"intermediate":return"bg-yellow-100 text-yellow-700";case"advanced":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title}),t.difficulty&&l.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${N(t.difficulty)}`,children:t.difficulty.charAt(0).toUpperCase()+t.difficulty.slice(1)})]}),t.description&&l.jsx("p",{className:"text-gray-600 mb-4",children:t.description}),l.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[l.jsxs("span",{children:[t.questions.length," questions"]}),n&&!i&&l.jsxs("span",{className:"text-green-600 font-medium",children:["Meilleur score: ",n.score,"%"]})]})]}),l.jsx("div",{className:"space-y-8",children:t.questions.map((T,A)=>l.jsxs("div",{className:"border-2 border-gray-100 rounded-xl p-6",children:[l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"flex items-start gap-3",children:[l.jsx("span",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-full flex items-center justify-center font-semibold",children:A+1}),l.jsx("h3",{className:"text-lg font-semibold text-gray-900 flex-1",children:T.question})]})}),l.jsx("div",{className:"space-y-3",children:T.options.map((w,x)=>{const y=r[A]===x,C=i&&x===T.correctAnswer,L=i&&y&&x!==T.correctAnswer;return l.jsx("button",{onClick:()=>d(A,x),disabled:i,className:`w-full text-left p-4 rounded-xl border-2 transition-all ${C?"border-green-500 bg-green-50":L?"border-red-500 bg-red-50":y?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"} ${i?"cursor-not-allowed":"cursor-pointer"}`,children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("span",{className:"flex items-center gap-3",children:[l.jsx("span",{className:`w-6 h-6 rounded-full border-2 flex items-center justify-center ${y?"border-blue-500 bg-blue-500":"border-gray-300"}`,children:y&&!i&&l.jsx("div",{className:"w-3 h-3 bg-white rounded-full"})}),l.jsx("span",{className:"font-medium",children:w})]}),i&&C&&l.jsx(pt,{className:"w-6 h-6 text-green-600"}),i&&L&&l.jsx(Sb,{className:"w-6 h-6 text-red-600"})]})},x)})}),i&&T.explanation&&l.jsx("div",{className:"mt-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:l.jsxs("p",{className:"text-sm text-gray-700",children:[l.jsx("span",{className:"font-semibold text-blue-700",children:"Explication: "}),T.explanation]})})]},A))}),l.jsx("div",{className:"mt-8",children:i?l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 p-8 rounded-2xl text-white",children:l.jsxs("div",{className:"text-center",children:[l.jsx(wb,{className:"w-16 h-16 mx-auto mb-4"}),l.jsx("h3",{className:"text-2xl font-bold mb-2",children:"Quiz Termin!"}),l.jsxs("p",{className:"text-5xl font-bold mb-4",children:[u==null?void 0:u.score,"%"]}),l.jsxs("p",{className:"text-lg mb-6",children:[u==null?void 0:u.correctCount," / ",u==null?void 0:u.totalQuestions," rponses correctes"]}),l.jsxs("button",{onClick:g,className:"inline-flex items-center gap-2 px-6 py-3 bg-white text-green-600 rounded-xl font-semibold hover:bg-gray-100 transition",children:[l.jsx(t4,{className:"w-5 h-5"}),"Ressayer"]})]})}):l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-6 rounded-xl",children:[l.jsx("div",{className:"text-sm text-gray-600",children:E?l.jsx("span",{className:"text-green-600 font-medium",children:" Toutes les questions rpondues"}):l.jsxs("span",{children:[Object.keys(r).length," / ",t.questions.length," questions rpondues"]})}),l.jsx("button",{onClick:f,disabled:!E,className:`px-8 py-3 rounded-xl font-semibold transition ${E?"bg-gradient-to-r from-green-500 to-blue-500 text-white hover:shadow-xl":"bg-gray-300 text-gray-500 cursor-not-allowed"}`,children:"Soumettre le Quiz"})]})})]})}function HV({exercise:t,onComplete:e}){var A;const[n,r]=R.useState(0),[s,i]=R.useState(((A=t.levels[0])==null?void 0:A.starterCode)||""),[o,u]=R.useState(!1),[c,d]=R.useState(!1),[f,g]=R.useState([]),p=t.levels[n],E=()=>{var w;f.includes(n)||(g([...f,n]),e==null||e(n)),n<t.levels.length-1&&(r(n+1),i(((w=t.levels[n+1])==null?void 0:w.starterCode)||""),u(!1),d(!1))},N=w=>{switch(w){case 0:return"bg-green-100 text-green-700 border-green-300";case 1:return"bg-yellow-100 text-yellow-700 border-yellow-300";case 2:return"bg-red-100 text-red-700 border-red-300";default:return"bg-gray-100 text-gray-700 border-gray-300"}},T=w=>{switch(w){case 0:return" Niveau 1: Dbutant";case 1:return" Niveau 2: Intermdiaire";case 2:return" Niveau 3: Avanc";default:return`Niveau ${w+1}`}};return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:t.title}),l.jsx("p",{className:"text-gray-600 mb-6",children:t.description}),l.jsx("div",{className:"flex gap-2 mb-4",children:t.levels.map((w,x)=>l.jsx("div",{className:`flex-1 h-2 rounded-full transition ${x===n?"bg-gradient-to-r from-green-500 to-blue-500":f.includes(x)?"bg-green-500":"bg-gray-200"}`},x))}),l.jsx("div",{className:"flex gap-3",children:t.levels.map((w,x)=>l.jsxs("button",{onClick:()=>{var y;r(x),i(((y=t.levels[x])==null?void 0:y.starterCode)||""),u(!1),d(!1)},className:`px-4 py-2 rounded-xl border-2 font-medium text-sm transition ${x===n?N(x):f.includes(x)?"bg-green-50 text-green-600 border-green-200":"bg-gray-50 text-gray-600 border-gray-200 hover:border-gray-300"}`,children:[f.includes(x)&&l.jsx(pt,{className:"w-4 h-4 inline mr-1"}),"Niveau ",x+1]},x))})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:`p-4 rounded-xl border-2 ${N(n)}`,children:[l.jsx("h3",{className:"text-xl font-bold mb-2",children:T(n)}),l.jsx("p",{className:"text-sm",children:p==null?void 0:p.title})]}),l.jsxs("div",{className:"p-6 bg-gray-50 rounded-xl",children:[l.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:" Objectif:"}),l.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:p==null?void 0:p.description})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsx("label",{className:"font-semibold text-gray-900",children:"Votre Code:"}),l.jsxs("button",{onClick:()=>d(!c),className:"flex items-center gap-2 text-sm text-blue-600 hover:text-blue-700",children:[l.jsx(QL,{className:"w-4 h-4"}),c?"Masquer les indices":"Afficher les indices"]})]}),c&&(p==null?void 0:p.hints)&&p.hints.length>0&&l.jsxs("div",{className:"mb-4 p-4 bg-blue-50 border-l-4 border-blue-500 rounded",children:[l.jsx("p",{className:"font-semibold text-blue-900 mb-2",children:" Indices:"}),l.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-blue-800",children:p.hints.map((w,x)=>l.jsx("li",{children:w},x))})]}),l.jsx("textarea",{value:s,onChange:w=>i(w.target.value),className:"w-full h-64 p-4 font-mono text-sm bg-gray-900 text-green-400 rounded-xl border-2 border-gray-300 focus:border-green-500 focus:ring-2 focus:ring-green-500/20 outline-none resize-none",placeholder:"crivez votre code ici...",spellCheck:!1})]}),l.jsxs("div",{children:[l.jsxs("button",{onClick:()=>u(!o),className:"flex items-center gap-2 text-sm text-purple-600 hover:text-purple-700 font-medium",children:[o?l.jsx(WL,{className:"w-4 h-4"}):l.jsx(KL,{className:"w-4 h-4"}),o?"Masquer la solution":"Voir la solution"]}),o&&(p==null?void 0:p.solution)&&l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"bg-yellow-50 border-l-4 border-yellow-500 p-4 rounded mb-3",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[" ",l.jsx("strong",{children:"Astuce:"})," Essayez de rsoudre l'exercice par vous-mme avant de regarder la solution!"]})}),l.jsxs("div",{className:"p-4 bg-gray-900 rounded-xl",children:[l.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Solution:"}),l.jsx("pre",{className:"font-mono text-sm text-green-400 overflow-x-auto",children:p.solution})]})]})]}),l.jsxs("div",{className:"flex justify-between items-center pt-4",children:[l.jsx("div",{className:"text-sm text-gray-600",children:f.includes(n)&&l.jsx("span",{className:"text-green-600 font-medium",children:" Niveau termin"})}),l.jsxs("div",{className:"flex gap-3",children:[n>0&&l.jsx("button",{onClick:()=>{var w;r(n-1),i(((w=t.levels[n-1])==null?void 0:w.starterCode)||""),u(!1),d(!1)},className:"px-6 py-3 bg-gray-200 text-gray-700 rounded-xl font-semibold hover:bg-gray-300 transition",children:"Niveau Prcdent"}),l.jsx("button",{onClick:E,className:"px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition flex items-center gap-2",children:n<t.levels.length-1?l.jsxs(l.Fragment,{children:["Niveau Suivant",l.jsx(Eb,{className:"w-5 h-5"})]}):l.jsxs(l.Fragment,{children:[l.jsx(pt,{className:"w-5 h-5"}),"Terminer l'Exercice"]})})]})]})]})]})}function Zu({content:t,contentType:e,onComplete:n,onNext:r}){const[s,i]=R.useState(null),o=async c=>{const d=Math.floor(Math.random()*40)+60,f={score:d,correctCount:Math.floor(d/100*c.length),totalQuestions:c.length};return i(f),n==null||n(),f},u=c=>{console.log("Exercise level completed:",c),c===t.levels.length-1&&(n==null||n())};switch(e){case"video":return l.jsx(m1,{lesson:t,onComplete:n,onNext:r,isCompleted:!1});case"text":case"course":return l.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[l.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-blue-500 rounded-xl flex items-center justify-center",children:l.jsx(Je,{className:"w-6 h-6 text-white"})}),l.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:t.title})]}),l.jsx("div",{className:"prose prose-lg max-w-none",children:typeof t.content=="string"?l.jsx("div",{className:"whitespace-pre-wrap text-gray-700 leading-relaxed",children:t.content}):t.content}),l.jsx("div",{className:"mt-8 flex justify-end",children:l.jsx("button",{onClick:()=>{n==null||n(),r==null||r()},className:"px-8 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl font-semibold hover:shadow-xl transition",children:"Marquer comme termin et continuer"})})]});case"quiz":return l.jsx(qV,{quiz:t,onSubmit:o,previousResult:s});case"exercise":return l.jsx(HV,{exercise:t,onComplete:u});default:return l.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-8",children:l.jsxs("p",{className:"text-gray-600",children:["Type de contenu non support: ",e]})})}}const g1={title:"Quiz React & Hooks",description:"valuez vos connaissances sur React et les Hooks",difficulty:"intermediate",courseId:"demo-react-course",order:1,questions:[{id:"q1",question:"Quel langage est principalement utilis pour dfinir la structure et le contenu d'une page web ?",options:["CSS","JavaScript","HTML","Python"],correctAnswer:2,explanation:"HTML (HyperText Markup Language) est le langage standard pour crer la structure des pages web."},{id:"q2",question:"Que signifie l'acronyme DOM dans le contexte du dveloppement web ?",options:["Document Object Model","Data Order Manager","Design Object Mapping","Direct Output Method"],correctAnswer:0,explanation:"Le DOM (Document Object Model) est une interface de programmation qui reprsente la structure d'un document HTML/XML."},{id:"q3",question:"Dans la programmation, une variable est utilise pour...",options:["Dfinir le style d'un lment","Stocker temporairement une valeur","Crer une fonction","Connecter une base de donnes"],correctAnswer:1,explanation:"Une variable permet de stocker et manipuler des donnes dans un programme."},{id:"q4",question:"Dans React, comment appelle-t-on le composant qui ne fait que recevoir des donnes et n'a pas son propre tat interne ?",options:["Composant de classe","Composant fonctionnel (ou stateless)","Composant parent","Composant d'tat"],correctAnswer:1,explanation:"Un composant fonctionnel sans tat (stateless) reoit des props mais ne gre pas son propre state."},{id:"q5",question:"Laquelle de ces mthodes sert  ajouter un lment  la fin d'un tableau (Array) en JavaScript ?",options:[".get()",".insert()",".pop()",".push()"],correctAnswer:3,explanation:"La mthode .push() ajoute un ou plusieurs lments  la fin d'un tableau."},{id:"q6",question:"Quel est le rle principal du Hook useEffect en React ?",options:["Grer l'tat local","Excuter des effets secondaires (requtes API, abonnements) aprs le rendu","Crer des rfrences","Optimiser le rendu du composant"],correctAnswer:1,explanation:"useEffect permet d'excuter du code aprs le rendu du composant, comme des appels API ou des abonnements."},{id:"q7",question:"Que reprsente le tableau de dpendances pass comme deuxime argument  useEffect ?",options:["La liste des composants  mettre  jour","Les valeurs que l'effet doit surveiller pour se r-excuter","Les donnes initiales du composant","Les props que le composant ne doit pas utiliser"],correctAnswer:1,explanation:"Le tableau de dpendances indique  useEffect quand se r-excuter - seulement quand ces valeurs changent."},{id:"q8",question:"En dveloppement front-end, que signifie l'acronyme API ?",options:["Application Process Interface","Asynchronous Programming Instruction","Application Programming Interface","Advanced Protocol Integration"],correctAnswer:2,explanation:"API (Application Programming Interface) dfinit comment diffrents logiciels communiquent entre eux."},{id:"q9",question:"Qu'est-ce que le concept de 'Lifting State Up' en React ?",options:["Le dplacement de l'tat d'un enfant vers son parent commun","L'utilisation de Hooks  la place de classes","Le dploiement de l'application sur un serveur","L'utilisation du contexte global"],correctAnswer:0,explanation:"Lifting State Up consiste  dplacer l'tat vers un composant parent commun pour le partager entre composants enfants."},{id:"q10",question:"Quelle proprit CSS est utilise pour rendre un lment cliquable sans qu'il ne ragisse aux vnements de la souris ou du toucher ?",options:["visibility: hidden;","cursor: none;","display: none;","pointer-events: none;"],correctAnswer:3,explanation:"pointer-events: none dsactive toutes les interactions de la souris sur un lment."},{id:"q11",question:"Pourquoi utiliserait-on React.memo sur un composant fonctionnel ?",options:["Pour crer un tat global","Pour optimiser les composants qui ne doivent pas se re-rendre si leurs props n'ont pas chang","Pour forcer un re-rendu","Pour grer des effets asynchrones complexes"],correctAnswer:1,explanation:"React.memo est une HOC qui mmorise le composant et vite les re-rendus inutiles quand les props n'ont pas chang."},{id:"q12",question:"Quel est le rle principal de useCallback ?",options:["Mmoriser le rsultat d'une fonction coteuse","Mmoriser la fonction elle-mme (prvenir sa recration inutile)","Excuter un rappel aprs le montage","Grer les transitions d'tat asynchrones"],correctAnswer:1,explanation:"useCallback mmorise une fonction pour viter qu'elle soit recre  chaque rendu, utile pour optimiser les performances."},{id:"q13",question:"Qu'est-ce que le Tree Shaking dans le contexte du bundling JavaScript (Webpack, Rollup) ?",options:["La rduction de la taille des images","L'optimisation des structures de donnes arborescentes","L'limination du code mort ou inutilis dans le bundle final","Le chargement progressif des composants"],correctAnswer:2,explanation:"Tree Shaking analyse et supprime le code JavaScript non utilis pour rduire la taille du bundle final."},{id:"q14",question:"Quel problme le Hook useReducer est-il le mieux adapt  rsoudre par rapport  useState ?",options:["La gestion des formulaires","La gestion d'une logique d'tat complexe qui dpend de l'tat prcdent","La gestion des rfrences DOM","La cration d'un tat global simple"],correctAnswer:1,explanation:"useReducer est idal pour grer un tat complexe avec plusieurs sous-valeurs ou quand le prochain tat dpend du prcdent."},{id:"q15",question:"Dans le contexte de l'API de navigation (fetch), quel statut HTTP indique qu'une ressource a t cre avec succs sur le serveur ?",options:["200 OK","201 Created","204 No Content","202 Accepted"],correctAnswer:1,explanation:"Le code de statut HTTP 201 Created indique qu'une nouvelle ressource a t cre avec succs."}]},y1={title:"Exercice Progressif: To-Do List React",description:"Construisez une application de gestion de tches en 3 tapes progressives",courseId:"demo-react-course",order:1,levels:[{level:0,title:"Affichage Statique",description:`Crez un composant TodoList qui affiche une liste de tches pr-dfinies.

Objectifs:
- Crez un composant fonctionnel TodoList
- Dfinissez un tableau de 3 tches (strings): ['Acheter lait', 'Coder React', 'Faire sport']
- Utilisez map() pour afficher chaque tche dans un <li>
- Ajoutez les lments dans une <ul>`,starterCode:`import React from 'react';

function TodoList() {
  // Dfinissez votre tableau de tches ici
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      {/* Ajoutez votre liste ici */}
    </div>
  );
}

export default TodoList;`,solution:`import React from 'react';

function TodoList() {
  const taches = ['Acheter lait', 'Coder React', 'Faire sport'];
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez un tableau pour stocker les tches","La mthode .map() transforme chaque lment du tableau","N'oubliez pas la prop 'key' pour chaque <li>"]},{level:1,title:"Ajout de l'tat (useState)",description:`Ajoutez la fonctionnalit d'ajout de nouvelles tches.

Objectifs:
- Utilisez useState pour grer le tableau de tches
- Ajoutez un champ <input> et un bouton "Ajouter"
- Utilisez un deuxime useState pour la valeur de l'input
- Implmentez la fonction d'ajout qui met  jour le state`,starterCode:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  // Ajoutez un state pour la nouvelle tche
  
  const ajouterTache = () => {
    // Implmentez la logique d'ajout
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      {/* Ajoutez input et bouton ici */}
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,solution:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>{tache}</li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez le spread operator [...taches, nouvelleTache] pour ajouter","N'oubliez pas de vider l'input aprs l'ajout","Vrifiez que l'input n'est pas vide avec .trim()"]},{level:2,title:"Suppression et Styles",description:`Ajoutez la suppression de tches et un style conditionnel.

Objectifs:
- Ajoutez un bouton "X"  ct de chaque tche
- Implmentez la fonction de suppression avec .filter()
- Ajoutez un style (texte barr) si la tche contient "Fait"`,starterCode:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  const supprimerTache = (index) => {
    // Implmentez la suppression
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li key={index}>
            {tache}
            {/* Ajoutez le bouton supprimer et le style conditionnel */}
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,solution:`import React, { useState } from 'react';

function TodoList() {
  const [taches, setTaches] = useState(['Acheter lait', 'Coder React', 'Faire sport']);
  const [nouvelleTache, setNouvelleTache] = useState('');
  
  const ajouterTache = () => {
    if (nouvelleTache.trim()) {
      setTaches([...taches, nouvelleTache]);
      setNouvelleTache('');
    }
  };
  
  const supprimerTache = (index) => {
    setTaches(taches.filter((_, i) => i !== index));
  };
  
  return (
    <div>
      <h1>Ma Todo List</h1>
      
      <div>
        <input
          type="text"
          value={nouvelleTache}
          onChange={(e) => setNouvelleTache(e.target.value)}
          placeholder="Nouvelle tche..."
        />
        <button onClick={ajouterTache}>Ajouter</button>
      </div>
      
      <ul>
        {taches.map((tache, index) => (
          <li 
            key={index}
            style={{ 
              textDecoration: tache.includes('Fait') ? 'line-through' : 'none' 
            }}
          >
            {tache}
            <button onClick={() => supprimerTache(index)}>X</button>
          </li>
        ))}
      </ul>
    </div>
  );
}

export default TodoList;`,hints:["Utilisez .filter() pour crer un nouveau tableau sans l'lment supprim","Le style conditionnel peut utiliser l'oprateur ternaire","La mthode .includes() vrifie si une string contient un texte"]}]};function WV(){const{courseId:t}=Ew(),e=Zt(),{user:n,userProfile:r}=en(),[s,i]=R.useState(null),[o,u]=R.useState(null),[c,d]=R.useState([]),[f,g]=R.useState("overview"),[p,E]=R.useState(!0),[N,T]=R.useState(!1),[A,w]=R.useState([]);R.useEffect(()=>{x()},[t,n]);const x=async()=>{var I;if(console.log(" loadCourseData called",{courseId:t,user:!!n,userProfile:!!r}),!t||!n){console.log(" Early return - missing courseId or user");return}try{E(!0),console.log(" Loading course:",t);const _=await un.getCourseById(t);if(console.log(" Course result:",_),_.success)i(_.course);else{console.error(" Failed to load course"),E(!1);return}const S=(I=r==null?void 0:r.purchasedCourses)==null?void 0:I.includes(t);console.log(" Has purchased:",S),T(S);const b=await hs.getCourseProgress(n.uid,t);b.success&&d(b.progress.completedLessons||[]);const k=await Ju.getModulesByCourse(t);if(k.success){const j=[];for(const P of k.modules){const He=await Ju.getLessonsByModule(P.id);He.success&&j.push(...He.lessons.map(Rn=>({...Rn,moduleId:P.id,courseId:t})))}if(w(j),j.length>0&&!o){const P=j.find(He=>!hs.isLessonCompleted(He.id,b.progress.completedLessons||[]));u(P||j[0])}}console.log(" Course data loaded successfully"),E(!1)}catch(_){console.error(" Error loading course data:",_),E(!1)}},y=I=>{d(_=>[..._,I])},C=()=>{if(!o||A.length===0)return;const I=A.findIndex(_=>_.id===o.id);I<A.length-1&&u(A[I+1])},L=()=>A.length===0?0:hs.calculateProgressPercentage(c.length,A.length);if(p)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"})});if(!s)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cours introuvable"}),l.jsx("button",{onClick:()=>e("/my-courses"),className:"text-green-600 hover:text-green-700",children:"Retour  mes cours"})]})});if(!N)return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsxs("div",{className:"text-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accs refus"}),l.jsx("p",{className:"text-gray-600 mb-4",children:"Vous devez acheter ce cours pour y accder"}),l.jsx("button",{onClick:()=>e(`/courses/${t}`),className:"bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600",children:"Voir le cours"})]})});const V=[{id:"overview",name:"Aperu",icon:Je},{id:"quiz",name:"Quiz",icon:VL},{id:"exercise",name:"Exercice",icon:BL},{id:"resources",name:"Ressources",icon:GL},{id:"qna",name:"Q&A",icon:XL}];return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>e("/my-courses"),className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(Li,{className:"w-5 h-5 mr-2"}),"Retour  mes cours"]}),l.jsxs("div",{className:"flex items-center space-x-4",children:[l.jsxs("div",{className:"text-sm text-gray-600",children:["Progression: ",L(),"%"]}),l.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full",children:l.jsx("div",{className:"h-2 bg-green-500 rounded-full transition-all",style:{width:`${L()}%`}})})]})]})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[l.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[o&&l.jsx(m1,{lesson:o,onComplete:y,onNext:C,isCompleted:hs.isLessonCompleted(o.id,c)}),l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"border-b border-gray-200",children:l.jsx("nav",{className:"flex -mb-px",children:V.map(I=>{const _=I.icon;return l.jsxs("button",{onClick:()=>g(I.id),className:`flex items-center px-6 py-3 border-b-2 font-medium text-sm ${f===I.id?"border-green-500 text-green-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[l.jsx(_,{className:"w-4 h-4 mr-2"}),I.name]},I.id)})})}),l.jsxs("div",{className:"p-6",children:[f==="overview"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:" propos de ce cours"}),l.jsx("p",{className:"text-gray-700 mb-4",children:s.description}),s.outcomes&&l.jsxs("div",{className:"mb-4",children:[l.jsx("h4",{className:"font-semibold mb-2",children:"Ce que vous allez apprendre:"}),l.jsx("ul",{className:"list-disc list-inside text-gray-700 space-y-1",children:s.outcomes.split(`
`).filter(Boolean).map((I,_)=>l.jsx("li",{children:I},_))})]})]}),f==="quiz"&&l.jsx("div",{className:"-m-6",children:l.jsx(Zu,{content:g1,contentType:"quiz",onComplete:()=>console.log("Quiz completed"),onNext:C})}),f==="exercise"&&l.jsx("div",{className:"-m-6",children:l.jsx(Zu,{content:y1,contentType:"exercise",onComplete:()=>console.log("Exercise completed"),onNext:C})}),f==="resources"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Ressources du cours"}),l.jsx("p",{className:"text-gray-600",children:"Aucune ressource disponible pour l'instant"})]}),f==="qna"&&l.jsxs("div",{children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Questions et Rponses"}),l.jsx("p",{className:"text-gray-600",children:"Section Q&A  venir"})]})]})]})]}),l.jsx("div",{className:"lg:col-span-1",children:l.jsx(BV,{courseId:t,currentLessonId:o==null?void 0:o.id,onLessonSelect:u,userProgress:c,isPurchased:N})})]})})]})}function KV(){const{userProfile:t,currentUser:e}=en(),[n,r]=R.useState([]),[s,i]=R.useState(!0);R.useEffect(()=>{e&&t&&o()},[e,t]);const o=async()=>{i(!0);const u=(t==null?void 0:t.purchasedCourses)||[];if(u.length===0){i(!1);return}const c=await Promise.all(u.map(async d=>{const f=await un.getCourseById(d);if(f.success&&f.course.status!=="archived"){const g=await hs.getCourseProgress(e.uid,d);return{...f.course,progress:g.completionPercentage||0,totalLessons:g.totalLessons||0,completedLessons:g.completedLessons||0}}return null}));r(c.filter(d=>d!==null)),i(!1)};return s?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:l.jsx("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-green-500"})}):l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Mes Cours"}),l.jsx("p",{className:"mt-2 text-gray-600",children:"Continuez votre apprentissage"})]})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:n.length===0?l.jsxs("div",{className:"text-center py-12 bg-white rounded-2xl shadow",children:[l.jsx(Je,{className:"mx-auto h-16 w-16 text-gray-300 mb-4"}),l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Aucun cours achet"}),l.jsx("p",{className:"text-gray-600 mb-6",children:"Commencez par explorer nos cours disponibles."}),l.jsxs(de,{to:"/courses",className:"inline-flex items-center px-6 py-3 bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-xl hover:shadow-xl transition font-medium",children:[l.jsx(Je,{className:"w-5 h-5 mr-2"}),"Explorer les cours"]})]}):l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:n.map(u=>l.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden hover:shadow-2xl transition",children:[l.jsx("img",{src:u.thumbnail||"/assets/images/default-course.png",alt:u.title,className:"w-full h-48 object-cover"}),l.jsxs("div",{className:"p-6",children:[l.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:u.title}),l.jsx("p",{className:"text-gray-600 mb-4",children:u.category||"General"}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[l.jsx("span",{className:"font-medium",children:"Progression"}),l.jsxs("span",{className:"font-semibold text-green-600",children:[u.progress,"%"]})]}),l.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 overflow-hidden",children:l.jsx("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 h-3 rounded-full transition-all duration-500",style:{width:`${u.progress}%`}})})]}),l.jsx("div",{className:"flex items-center justify-between text-sm text-gray-600 mb-6",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(pt,{className:"w-4 h-4 mr-1 text-green-500"}),l.jsxs("span",{children:[u.completedLessons,"/",u.totalLessons," leons"]})]})}),l.jsxs(de,{to:`/course/${u.id}/view`,className:"w-full bg-gradient-to-r from-green-500 to-blue-500 text-white py-3 px-4 rounded-xl hover:shadow-xl transition flex items-center justify-center font-medium",children:[l.jsx(Uf,{className:"w-5 h-5 mr-2"}),u.progress===0?"Commencer":"Continuer"]})]})]},u.id))})})]})}function GV(){const[t]=NA(),e=Zt(),[n,r]=R.useState(!0),[s,i]=R.useState(null),[o,u]=R.useState(null),[c,d]=R.useState(0),f=10,g=R.useRef(null),p=R.useRef(!1),E=R.useRef(0),N=t.get("payment_id"),T=N==null?void 0:N.split("?")[0],A=R.useCallback(async()=>{if(p.current)return;if(!T){u("ID de paiement manquant"),r(!1),p.current=!0;return}E.current+=1;const w=E.current;if(console.log(` Tentative ${w}/${f}`),d(w),w>f){console.log(" Limite de tentatives atteinte (dpasse)"),u("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),p.current=!0;return}if(p.current||(await new Promise(y=>setTimeout(y,3e3)),p.current))return;const x=await Pb.verifyPayment(T);if(console.log(" Rsultat vrification:",x),!p.current)if(x.success)if(i(x.data),x.status==="completed")console.log(" Paiement confirm !"),r(!1),p.current=!0,g.current&&clearTimeout(g.current);else if(x.status==="pending")if(E.current>=f)console.log(" Limite de tentatives atteinte (pending)"),u("Le paiement est toujours en attente aprs plusieurs tentatives. Veuillez vrifier votre email ou contacter le support."),r(!1),p.current=!0,g.current&&clearTimeout(g.current);else if(E.current>=3){console.log(" Tentative de synchronisation avec le backend...");try{let y="https://plateforme-educative.onrender.com";if(y&&y.includes("/"))try{const C=new URL(y);C.pathname!=="/"&&!y.includes("/sync-payment")&&(y=`${C.origin}`)}catch{console.warn(" URL backend invalide, utilisation directe:",y)}if(y){const C=y.endsWith("/")?y.slice(0,-1):y;let L=`${C}/sync-payment`;const V="https://plateforme-educative.onrender.com";let I=null;if(V&&V.includes("/")&&V!==C)try{const b=new URL(V);if(b.pathname&&b.pathname!=="/"){const k=b.pathname.endsWith("/")?b.pathname.slice(0,-1):b.pathname;I=`${b.origin}${k}/sync-payment`}}catch{}console.log(" URL backend pour sync:",L),I&&console.log(" URL fallback pour sync:",I);const _=b=>fetch(b,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({paymentId:T})});(I?_(L).catch(()=>(console.log(" Premire tentative choue, essai avec URL fallback..."),_(I))):_(L)).then(b=>b.ok?b.json():(console.error(" Erreur HTTP sync:",b.status,b.statusText),null)).then(b=>{b&&b.success?(console.log(" Paiement synchronis, rechargement..."),setTimeout(()=>window.location.reload(),1e3),p.current=!0):(console.warn(" Synchronisation choue:",b),!p.current&&E.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3)))}).catch(b=>{console.error(" Erreur synchronisation:",b),console.error("   Type:",b.name),console.error("   Message:",b.message),!p.current&&E.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))})}else!p.current&&E.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}catch(y){console.warn(" Erreur synchronisation:",y),!p.current&&E.current<f&&(console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3))}}else console.log(" Paiement toujours en attente, nouvelle tentative dans 3s..."),g.current=setTimeout(A,3e3);else x.status==="failed"?(u("Le paiement a chou"),r(!1),p.current=!0,g.current&&clearTimeout(g.current)):E.current>=f?(u("Le paiement a un statut inconnu. Veuillez contacter le support."),r(!1),p.current=!0,g.current&&clearTimeout(g.current)):(console.log(" Statut inconnu:",x.status,"- Nouvelle tentative..."),g.current=setTimeout(A,3e3));else console.error(" Erreur vrification:",x.error),u(x.error||"Erreur lors de la vrification du paiement"),r(!1),p.current=!0,g.current&&clearTimeout(g.current)},[T,f]);return R.useEffect(()=>(p.current=!1,E.current=0,d(0),g.current&&(clearTimeout(g.current),g.current=null),T?(console.log(" Vrification du paiement:",T),A()):(u("ID de paiement manquant"),r(!1),p.current=!0),()=>{g.current&&(clearTimeout(g.current),g.current=null),p.current=!0}),[T,A]),n?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(Gm,{className:"w-16 h-16 animate-spin text-green-500 mx-auto mb-4"}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Vrification du paiement..."}),l.jsx("p",{className:"text-gray-600 mb-2",children:"Veuillez patienter pendant que nous confirmons votre paiement"}),c>0&&l.jsxs("p",{className:"text-sm text-gray-500",children:["Tentative ",c,"/",f,"..."]})]})}):o?l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:l.jsx("span",{className:"text-3xl",children:""})}),l.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Erreur de paiement"}),l.jsx("p",{className:"text-gray-600 mb-6",children:o}),l.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-500 text-white px-6 py-3 rounded-lg hover:bg-gray-600 transition",children:"Retour aux cours"})]})}):l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(pt,{className:"w-16 h-16 text-green-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement russi ! "}),l.jsxs("p",{className:"text-gray-600 mb-6",children:["Votre paiement de ",l.jsxs("strong",{children:[s==null?void 0:s.amount," TND"]})," a t confirm avec succs."]}),l.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-6 text-left",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Rfrence :"}),l.jsx("p",{className:"font-mono text-sm text-gray-800",children:s==null?void 0:s.paymeeTransactionId})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>e("/my-courses"),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:["Accder  mes cours",l.jsx(Ko,{className:"w-5 h-5"})]}),l.jsx("button",{onClick:()=>e("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Dcouvrir d'autres cours"})]})]})})}function QV(){const t=Zt();return l.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-4",children:l.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 max-w-md w-full text-center",children:[l.jsx(Sb,{className:"w-16 h-16 text-orange-500 mx-auto mb-4"}),l.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-2",children:"Paiement annul"}),l.jsx("p",{className:"text-gray-600 mb-8",children:"Vous avez annul le processus de paiement. Aucun montant n'a t dbit."}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("button",{onClick:()=>t(-1),className:"w-full flex items-center justify-center gap-2 bg-green-500 text-white py-3 rounded-lg hover:bg-green-600 transition font-medium",children:[l.jsx(Li,{className:"w-5 h-5"}),"Ressayer le paiement"]}),l.jsx("button",{onClick:()=>t("/courses"),className:"w-full bg-gray-100 text-gray-700 py-3 rounded-lg hover:bg-gray-200 transition",children:"Retour aux cours"})]})]})})}function YV({onCreate:t}){const[e,n]=R.useState(""),[r,s]=R.useState(""),i=o=>{if(o.preventDefault(),!e.trim())return;const u={id:Date.now().toString(),title:e.trim(),body:r.trim(),time:new Date().toLocaleString()};t&&t(u),n(""),s("")};return l.jsxs("form",{onSubmit:i,className:"bg-white p-4 rounded-md shadow-sm",children:[l.jsx("h3",{className:"text-lg font-semibold mb-3",children:"Create admin content"}),l.jsx("div",{className:"mb-2",children:l.jsx("input",{value:e,onChange:o=>n(o.target.value),placeholder:"Title",className:"w-full border px-3 py-2 rounded"})}),l.jsx("div",{className:"mb-3",children:l.jsx("textarea",{value:r,onChange:o=>s(o.target.value),placeholder:"Content",className:"w-full border px-3 py-2 rounded",rows:3})}),l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"submit",className:"bg-purple-600 text-white px-4 py-2 rounded",children:"Create"})})]})}function XV({notification:t}){return l.jsx("div",{className:"p-3 border-b last:border-b-0 hover:bg-gray-50",children:l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:t.title}),l.jsx("div",{className:"text-xs text-gray-600",children:t.body})]}),l.jsx("div",{className:"text-xs text-gray-400",children:t.time})]})})}function JV({items:t=[]}){return t.length?l.jsx("div",{className:"bg-white rounded-md shadow-sm overflow-hidden",children:t.map(e=>l.jsx(XV,{notification:e},e.id))}):l.jsx("div",{className:"p-4 text-sm text-gray-500",children:"No notifications"})}function ZV({onEdit:t,onAddNew:e}){const[n,r]=R.useState([]),[s,i]=R.useState(!0),[o,u]=R.useState(""),[c,d]=R.useState("all"),[f,g]=R.useState("");R.useEffect(()=>{p()},[c,f]);const p=async()=>{i(!0);const y={};c!=="all"&&(y.category=c),f&&(y.status=f);const C=await un.getCourses(y);C.success&&r(C.courses),i(!1)},E=async y=>{if(!confirm("tes-vous sr de vouloir archiver ce cours ?"))return;(await un.deleteCourse(y)).success&&p()},N=async y=>{(await un.duplicateCourse(y)).success&&p()},T=async y=>{(await un.publishCourse(y)).success&&p()},A=n.filter(y=>{var C,L;return((C=y.title)==null?void 0:C.toLowerCase().includes(o.toLowerCase()))||((L=y.description)==null?void 0:L.toLowerCase().includes(o.toLowerCase()))}),w=[{value:"all",label:"Toutes les catgories"},{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],x=y=>{const C={draft:"bg-gray-100 text-gray-700",published:"bg-green-100 text-green-700",archived:"bg-red-100 text-red-700"},V={draft:Ia,published:pt,archived:DL}[y]||Ia;return l.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${C[y]||C.draft}`,children:[l.jsx(V,{className:"w-3 h-3 mr-1"}),y==="draft"?"Brouillon":y==="published"?"Publi":"Archiv"]})};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Cours"}),l.jsxs("button",{onClick:e,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 flex items-center",children:[l.jsx(e4,{className:"w-4 h-4 mr-2"}),"Nouveau Cours"]})]}),l.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Ib,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Rechercher un cours...",value:o,onChange:y=>u(y.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsx("select",{value:c,onChange:y=>d(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:w.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))}),l.jsxs("select",{value:f,onChange:y=>g(y.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"",children:"Tous les statuts"}),l.jsx("option",{value:"draft",children:"Brouillon"}),l.jsx("option",{value:"published",children:"Publi"}),l.jsx("option",{value:"archived",children:"Archiv"})]})]})}),s?l.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des cours..."})]}):A.length===0?l.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:l.jsx("p",{className:"text-gray-600",children:"Aucun cours trouv"})}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Catgorie"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Prix"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscrits"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Statut"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.map(y=>l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[y.thumbnail&&l.jsx("img",{src:y.thumbnail,alt:y.title,className:"w-12 h-12 rounded object-cover mr-3"}),l.jsxs("div",{children:[l.jsx("div",{className:"text-sm font-medium text-gray-900",children:y.title}),l.jsx("div",{className:"text-sm text-gray-500",children:y.level==="beginner"?"Dbutant":y.level==="intermediate"?"Intermdiaire":y.level==="advanced"?"Avanc":"Tous niveaux"})]})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.category}),l.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-medium",children:[y.price," TND"]}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.enrolledCount||0}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x(y.status)}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsxs("div",{className:"flex justify-end space-x-2",children:[y.status==="draft"&&l.jsx("button",{onClick:()=>T(y.id),className:"text-green-600 hover:text-green-900",title:"Publier",children:l.jsx(pt,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>t(y),className:"text-blue-600 hover:text-blue-900",title:"Modifier",children:l.jsx(JL,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>N(y.id),className:"text-gray-600 hover:text-gray-900",title:"Dupliquer",children:l.jsx(qL,{className:"w-5 h-5"})}),l.jsx("button",{onClick:()=>E(y.id),className:"text-red-600 hover:text-red-900",title:"Archiver",children:l.jsx(r4,{className:"w-5 h-5"})})]})})]},y.id))})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:n.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Publis"}),l.jsx("p",{className:"text-2xl font-bold text-green-600",children:n.filter(y=>y.status==="published").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Brouillons"}),l.jsx("p",{className:"text-2xl font-bold text-gray-600",children:n.filter(y=>y.status==="draft").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total Inscrits"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:n.reduce((y,C)=>y+(C.enrolledCount||0),0)})]})]})]})}function e5({courseId:t=null,onSave:e,onCancel:n}){const[r,s]=R.useState(!1),[i,o]=R.useState(null),[u,c]=R.useState(null),[d,f]=R.useState(null),[g,p]=R.useState({title:"",description:"",shortDescription:"",category:"programming",level:"beginner",price:0,duration:"",language:"fr",instructor:"",requirements:"",outcomes:"",videoUrl:"",status:"draft"});R.useEffect(()=>{t&&E()},[t]);const E=async()=>{s(!0);const y=await un.getCourseById(t);y.success?(p(y.course),y.course.thumbnail&&c(y.course.thumbnail)):o(y.error),s(!1)},N=y=>{const{name:C,value:L}=y.target;p(V=>({...V,[C]:L}))},T=y=>{const C=y.target.files[0];if(C){f(C);const L=new FileReader;L.onloadend=()=>{c(L.result)},L.readAsDataURL(C)}},A=async y=>{y.preventDefault(),s(!0),o(null);try{let C;t?C=await un.updateCourse(t,g,d):C=await un.createCourse(g,d),C.success?e==null||e(C):o(C.error)}catch(C){o(C.message)}finally{s(!1)}},w=[{value:"programming",label:"Programmation"},{value:"design",label:"Design"},{value:"business",label:"Business"},{value:"marketing",label:"Marketing"},{value:"languages",label:"Langues"},{value:"science",label:"Sciences"},{value:"other",label:"Autre"}],x=[{value:"beginner",label:"Dbutant"},{value:"intermediate",label:"Intermdiaire"},{value:"advanced",label:"Avanc"},{value:"all",label:"Tous niveaux"}];return l.jsxs("form",{onSubmit:A,className:"bg-white rounded-lg shadow p-6 space-y-6",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:t?"Modifier le cours":"Nouveau cours"}),l.jsx("button",{type:"button",onClick:n,className:"text-gray-400 hover:text-gray-600",children:l.jsx($f,{className:"w-6 h-6"})})]}),i&&l.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:i}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Titre du cours *"}),l.jsx("input",{type:"text",name:"title",value:g.title,onChange:N,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: Matriser React.js de A  Z"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description courte *"}),l.jsx("input",{type:"text",name:"shortDescription",value:g.shortDescription,onChange:N,required:!0,maxLength:150,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Rsum en une ligne (max 150 caractres)"}),l.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[g.shortDescription.length,"/150 caractres"]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description complte *"}),l.jsx("textarea",{name:"description",value:g.description,onChange:N,required:!0,rows:5,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Dcrivez en dtail ce que les tudiants vont apprendre..."})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Catgorie *"}),l.jsx("select",{name:"category",value:g.category,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:w.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Niveau *"}),l.jsx("select",{name:"level",value:g.level,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:x.map(y=>l.jsx("option",{value:y.value,children:y.label},y.value))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prix (TND) *"}),l.jsx("input",{type:"number",name:"price",value:g.price,onChange:N,required:!0,min:"0",step:"0.01",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"0.00"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Dure"}),l.jsx("input",{type:"text",name:"duration",value:g.duration,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Ex: 4 semaines, 20 heures"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructeur"}),l.jsx("input",{type:"text",name:"instructor",value:g.instructor,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Nom de l'instructeur"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Langue"}),l.jsxs("select",{name:"language",value:g.language,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"fr",children:"Franais"}),l.jsx("option",{value:"ar",children:"Arabe"}),l.jsx("option",{value:"en",children:"Anglais"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Image de couverture"}),l.jsxs("div",{className:"flex items-start space-x-4",children:[u&&l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:u,alt:"Preview",className:"w-32 h-32 object-cover rounded-lg"}),l.jsx("button",{type:"button",onClick:()=>{c(null),f(null)},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600",children:l.jsx($f,{className:"w-4 h-4"})})]}),l.jsxs("label",{className:"flex flex-col items-center px-4 py-6 bg-white text-gray-500 rounded-lg border-2 border-dashed border-gray-300 cursor-pointer hover:border-green-500 hover:text-green-500",children:[l.jsx(s4,{className:"w-8 h-8 mb-2"}),l.jsx("span",{className:"text-sm",children:"Choisir une image"}),l.jsx("input",{type:"file",accept:"image/*",onChange:T,className:"hidden"})]})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"URL Vido de dmonstration (YouTube/Vimeo)"}),l.jsx("input",{type:"url",name:"videoUrl",value:g.videoUrl,onChange:N,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"https://youtube.com/watch?v=..."})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prrequis"}),l.jsx("textarea",{name:"requirements",value:g.requirements,onChange:N,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Quels sont les prrequis pour suivre ce cours ? (un par ligne)"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Objectifs d'apprentissage"}),l.jsx("textarea",{name:"outcomes",value:g.outcomes,onChange:N,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Que vont apprendre les tudiants ? (un par ligne)"})]}),l.jsxs("div",{className:"flex justify-end space-x-3 pt-4 border-t",children:[l.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",children:"Annuler"}),l.jsxs("button",{type:"submit",disabled:r,className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600 disabled:opacity-50 flex items-center",children:[l.jsx(bb,{className:"w-4 h-4 mr-2"}),r?"Enregistrement...":"Enregistrer"]})]})]})}function t5({onSelectDetails:t}){const[e,n]=R.useState([]),[r,s]=R.useState(!0),[i,o]=R.useState(""),[u,c]=R.useState("all");R.useEffect(()=>{d()},[]);const d=async()=>{try{s(!0);const E=(await Wu(Ar(he,"users"))).docs.map(N=>({id:N.id,...N.data()}));n(E)}catch(p){console.error("Error loading users:",p)}finally{s(!1)}},f=async(p,E)=>{try{const N=E==="admin"?"student":"admin",T=De(he,"users",p);await Nn(T,{role:N}),d()}catch(N){console.error("Error updating role:",N),alert("Erreur lors de la mise  jour du rle")}},g=e.filter(p=>{var T,A;const E=((T=p.displayName)==null?void 0:T.toLowerCase().includes(i.toLowerCase()))||((A=p.email)==null?void 0:A.toLowerCase().includes(i.toLowerCase())),N=u==="all"||p.role===u;return E&&N});return l.jsxs("div",{className:"space-y-4",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Gestion des Utilisateurs"}),l.jsx("div",{className:"bg-white p-4 rounded-lg shadow",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{className:"relative",children:[l.jsx(Ib,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),l.jsx("input",{type:"text",placeholder:"Rechercher un utilisateur...",value:i,onChange:p=>o(p.target.value),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500"})]}),l.jsxs("select",{value:u,onChange:p=>c(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",children:[l.jsx("option",{value:"all",children:"Tous les rles"}),l.jsx("option",{value:"student",children:"tudiants"}),l.jsx("option",{value:"admin",children:"Administrateurs"})]})]})}),r?l.jsxs("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto"}),l.jsx("p",{className:"text-gray-600 mt-4",children:"Chargement des utilisateurs..."})]}):g.length===0?l.jsx("div",{className:"bg-white rounded-lg shadow p-8 text-center",children:l.jsx("p",{className:"text-gray-600",children:"Aucun utilisateur trouv"})}):l.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:l.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[l.jsx("thead",{className:"bg-gray-50",children:l.jsxs("tr",{children:[l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Utilisateur"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rle"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cours achets"}),l.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Inscription"}),l.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),l.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(p=>{var E,N,T;return l.jsxs("tr",{className:"hover:bg-gray-50",children:[l.jsx("td",{className:"px-6 py-4",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:p.photoURL?l.jsx("img",{src:p.photoURL,alt:p.displayName,className:"h-10 w-10 rounded-full"}):l.jsx("div",{className:"h-10 w-10 rounded-full bg-green-100 flex items-center justify-center",children:l.jsx(Ym,{className:"w-6 h-6 text-green-600"})})}),l.jsx("div",{className:"ml-4",children:l.jsx("div",{className:"text-sm font-medium text-gray-900",children:p.displayName||"Sans nom"})})]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:p.email}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:l.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:p.role==="admin"?l.jsxs(l.Fragment,{children:[l.jsx(Nb,{className:"w-3 h-3 mr-1"}),"Admin"]}):l.jsxs(l.Fragment,{children:[l.jsx(Je,{className:"w-3 h-3 mr-1"}),"tudiant"]})})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((E=p.purchasedCourses)==null?void 0:E.length)||0}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx(UL,{className:"w-4 h-4 mr-1"}),((T=(N=p.createdAt)==null?void 0:N.toDate)==null?void 0:T.call(N).toLocaleDateString())||"N/A"]})}),l.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:l.jsx("button",{onClick:()=>f(p.id,p.role),className:`${p.role==="admin"?"text-red-600 hover:text-red-900":"text-green-600 hover:text-green-900"}`,children:p.role==="admin"?"Rvoquer admin":"Promouvoir admin"})})]},p.id)})})]})}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Total Utilisateurs"}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"tudiants"}),l.jsx("p",{className:"text-2xl font-bold text-blue-600",children:e.filter(p=>p.role==="student").length})]}),l.jsxs("div",{className:"bg-white p-4 rounded-lg shadow",children:[l.jsx("p",{className:"text-sm text-gray-600",children:"Administrateurs"}),l.jsx("p",{className:"text-2xl font-bold text-purple-600",children:e.filter(p=>p.role==="admin").length})]})]})]})}function t_(){const{userProfile:t}=en(),[e,n]=R.useState("overview"),[r,s]=R.useState(!1),[i,o]=R.useState(null),[u,c]=R.useState([]),d=[{id:"overview",name:"Vue d'ensemble",icon:LL},{id:"courses",name:"Cours",icon:Je},{id:"users",name:"Utilisateurs",icon:Bc},{id:"settings",name:"Paramtres",icon:n4}],f=[{name:"Total Utilisateurs",value:"1,234",change:"+12%",changeType:"positive"},{name:"Cours Actifs",value:"45",change:"+3",changeType:"positive"},{name:"Revenus ce mois",value:"12,345",change:"+8%",changeType:"positive"},{name:"Taux de completion",value:"78%",change:"+2%",changeType:"positive"}],g=()=>{switch(e){case"overview":return l.jsxs("div",{className:"space-y-6",children:[l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:f.map(p=>l.jsx("div",{className:"bg-white p-6 rounded-lg shadow",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{children:[l.jsx("p",{className:"text-sm font-medium text-gray-600",children:p.name}),l.jsx("p",{className:"text-2xl font-bold text-gray-900",children:p.value})]}),l.jsx("div",{className:`text-sm font-medium ${p.changeType==="positive"?"text-green-600":"text-red-600"}`,children:p.change})]})},p.name))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[l.jsx("div",{className:"md:col-span-2",children:l.jsx(YV,{onCreate:p=>c(E=>[p,...E])})}),l.jsx("div",{children:l.jsxs("div",{className:"bg-white rounded-lg shadow",children:[l.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:l.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Notifications rcentes"})}),l.jsx("div",{className:"p-4",children:l.jsx(JV,{items:u})})]})})]})]});case"courses":return l.jsx("div",{className:"space-y-6",children:r?l.jsx(e5,{courseId:i==null?void 0:i.id,onSave:()=>{s(!1),o(null)},onCancel:()=>{s(!1),o(null)}}):l.jsx(ZV,{onEdit:p=>{o(p),s(!0)},onAddNew:()=>{o(null),s(!0)}})});case"users":return l.jsx(t5,{});case"settings":return l.jsxs("div",{className:"space-y-6",children:[l.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Paramtres"}),l.jsx("div",{className:"bg-white rounded-lg shadow",children:l.jsx("div",{className:"p-6",children:l.jsx("p",{className:"text-gray-600",children:"Paramtres de l'application  implmenter"})})})]});default:return null}};return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:l.jsx("div",{className:"flex items-center justify-between",children:l.jsxs("div",{children:[l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Tableau de bord Admin"}),l.jsxs("p",{className:"text-gray-600",children:["Bienvenue, ",t==null?void 0:t.displayName]})]})})})}),l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:l.jsxs("div",{className:"flex space-x-8",children:[l.jsx("div",{className:"w-64",children:l.jsx("nav",{className:"space-y-1",children:d.map(p=>{const E=p.icon;return l.jsxs("button",{onClick:()=>n(p.id),className:`w-full flex items-center px-3 py-2 text-sm font-medium rounded-md ${e===p.id?"bg-green-100 text-green-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-50"}`,children:[l.jsx(E,{className:"w-5 h-5 mr-3"}),p.name]},p.id)})})}),l.jsx("div",{className:"flex-1",children:g()})]})})]})}function n5(){const t=Zt(),[e,n]=R.useState("quiz");return l.jsxs("div",{className:"min-h-screen bg-gray-50",children:[l.jsx("div",{className:"bg-white shadow-sm sticky top-0 z-10",children:l.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("button",{onClick:()=>t(-1),className:"flex items-center text-gray-600 hover:text-gray-900",children:[l.jsx(Li,{className:"w-5 h-5 mr-2"}),"Retour"]}),l.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Demo: Quiz & Exercices React"}),l.jsx("div",{})]})})}),l.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l.jsxs("div",{className:"flex gap-4 mb-8",children:[l.jsx("button",{onClick:()=>n("quiz"),className:`px-6 py-3 rounded-xl font-semibold transition ${e==="quiz"?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" Quiz React (15 questions)"}),l.jsx("button",{onClick:()=>n("exercise"),className:`px-6 py-3 rounded-xl font-semibold transition ${e==="exercise"?"bg-gradient-to-r from-green-500 to-blue-500 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-50"}`,children:" Exercice To-Do List (3 niveaux)"})]}),e==="quiz"&&l.jsx(Zu,{content:g1,contentType:"quiz",onComplete:()=>console.log("Quiz completed!"),onNext:()=>console.log("Next content")}),e==="exercise"&&l.jsx(Zu,{content:y1,contentType:"exercise",onComplete:()=>console.log("Exercise completed!"),onNext:()=>console.log("Next content")})]})]})}function r5(){return l.jsx(EA,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:l.jsx(kL,{children:l.jsxs(pA,{children:[l.jsx(ct,{path:"/login",element:l.jsx(i4,{})}),l.jsx(ct,{path:"/register",element:l.jsx(o4,{})}),l.jsx(ct,{path:"/forgot-password",element:l.jsx(a4,{})}),l.jsx(ct,{path:"/",element:l.jsx(h4,{})}),l.jsx(ct,{path:"/courses",element:l.jsx(x4,{})}),l.jsx(ct,{path:"/courses/:id",element:l.jsx(w4,{})}),l.jsx(ct,{path:"/demo",element:l.jsx(n5,{})}),l.jsx(ct,{path:"/payment/success",element:l.jsx(GV,{})}),l.jsx(ct,{path:"/payment/cancel",element:l.jsx(QV,{})}),l.jsx(ct,{path:"/profile",element:l.jsx(xo,{children:l.jsx(f4,{})})}),l.jsx(ct,{path:Ab,element:l.jsx(xo,{adminOnly:!0,children:l.jsx(t_,{})})}),l.jsx(ct,{path:l4,element:l.jsx(xo,{adminOnly:!0,children:l.jsx(t_,{})})}),l.jsx(ct,{path:"/my-courses",element:l.jsx(xo,{children:l.jsx(KV,{})})}),l.jsx(ct,{path:"/course/:courseId/view",element:l.jsx(xo,{children:l.jsx(WV,{})})}),l.jsx(ct,{path:"*",element:l.jsx(lf,{to:"/",replace:!0})})]})})})}fh.createRoot(document.getElementById("root")).render(l.jsx(f_.StrictMode,{children:l.jsx(r5,{})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").then(t=>{console.log(" Service worker FCM enregistr:",t.scope)}).catch(t=>{console.error(" Service worker registration failed:",t)});export{At as _,n_ as g,xM as p,R as r,Hc as u};
